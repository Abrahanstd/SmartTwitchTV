var t,n,a,e,i,o,s,d,l,r,p,m,c,u,_,f,v,h,g,y,b,w,k,C,M,E,S,I,P,x,L,T,B,G,O,U,A,N,H,F,D,R,q,V,J,z,X,j,Y,W,K,Z,$,Q,ee,te,ne,ae,ie,oe,se,de,le,re,ce,ue,_e,fe,me,he,pe,ve,ge,ye,be,we,ke,Ce,Me,Ee,Se,Ie,Pe,xe,Le,Te,Be,Ge,Oe,Ue,Ae,Ne,He,Fe,De,Re,qe,Ve,Je,ze,Xe,je,Ye,We,Ke,Ze,$e,Qe,et,tt,nt,at,it,ot,st,dt,lt,rt,ct,ut,_t,ft,mt,ht,pt,vt,gt,yt,bt,wt,kt,Ct,Mt,Et,St,It,Pt,xt,Lt,Tt,Bt,Gt,Ot,Ut,At,Nt,Ht,Ft,Dt,Rt,qt,Vt,Jt,zt,Xt,jt,Yt,Wt,Kt,Zt,$t,Qt,en,tn,nn,an,on,sn,dn,ln,rn,cn,un,_n,fn,mn,hn,pn,vn,gn,yn,bn,wn,kn,Cn,Mn,En,Sn,In,Pn,xn,Ln,Tn,Bn,Gn,On,Un,An,Nn,Hn,Fn,Dn,Rn,qn,Vn,Jn,zn,Xn,jn,Yn,Wn,Kn,Zn,$n,Qn,ea,ta,na,aa,ia,oa,sa,da="fglfgl27@gmail.com",la="<br>",ra='<i class="icon-circle" style="font-size: 50%; vertical-align: middle; font-weight: bold;"></i>  ',ca='<div class="about_text_title">',ua='<div class="about_text_title" style="text-align: left;">',_a='<div style="text-align: left;">',fa="",ma="",ha="",pa="",va="",ga="",ya="",ba="",wa="",ka="",Ca="&nbsp;",Ma="",Ea='<div style="vertical-align: middle; display: inline-block;"><i class="icon-twitch" style="color: #FFFFFF; font-size: 115%; "></i></div><div style="vertical-align: middle; display: inline-block">'+Ca;function Sa(){fa=e+" (C)",ma=n+" (D)",pa=a+" (A)",ha=i+" (A)",l+=tn,r+=tn,va=ca+e+"</div>"+ca+Ee+"</div>"+la+_a+ra+Le+la+ra+(Te+=Rn)+la+ra+Be+la+ra+Ge+la+Oe+la+ra+Ue+la+Ca+Ca+Ca+Ae+la+ra+Ne+la+"</div>"+la+(ba=ca+Ce+"</div>"+_a+ra+at+la+ra+et+la+ra+tt+la+"</div>"+_a+ra+nt+la+ra+it+la+ra+ot+la+la+ca+Me+"</div>"+_a+ra+st+la+ra+dt+la+ra+lt+la+ra+rt+la+ra+ct)+la+la+ca+ke+"</div>",ga=ca+Ea+we+"</div></div>",ya=_a+la+He+la+(pr?"":la+'<div style="display: inline-block; color: #FF0000; font-size: 110%; font-weight: bold;">'+ea+"</div>")+"</div>"+la+ca+Fe+"</div>"+da+la+la+De+la+Re+la+la+ua+qe+"</div>"+_a+Ke+la+ra+Ve+la+ra+Je+la+ra+ze+la+ra+Xe+la+ra+je+la+ra+Ye+la+ra+We+la+Ze+la+ra+$e+la+ra+Qe+la+ca+ke+"</div></div>",wa=ca+Se+"</div>"+mt+la,Ma=la+ca+ht+"</div>"+_a+ra+pt+la+la+ca+Ma+"</div>"+la+la+ke+"</div>",ka=gt+la+ra+yt.replace("link_link",'<div style="display: inline-block; color: #FF0000; font-size: 110%; font-weight: bold;">http://tiny.cc/twitchkeycode</div>')+la+ra+bt+la+ra+wt+la+ra+kt+la+ra+Ct}function Ia(){$r=!1,document.getElementById("side_panel").style.width="17%",t="Refresh:",n="Search",a="Settings",e="Controls",i="About",o="Hide",s="The text you entered is empty.",d="The search result is empty.",l="Switch screen",r="Switch user screen",p="Switch: Past Broadcast or Highlight",m="Switch: Period (24h, 7d, 30d, all)",c="Go to ",u="User ",_="Live",f="Games",v="Playing ",h=" for ",g="Watching time ",y="Since ",b=" ago",w="A Game",k="Type your search...",C="Type your authentication key...",M="Type your user name...",E="Press Enter or Select key to, ",S="Channels",I="Channel",P="Back to previously screen: Back key twice",x=" has ended",L="This video is only available to subscribers.",T="Connection failed, unable to load content hit refresh to try again",B="No",G=" for this ",O="Connection failed, unable to load video content exiting...",U=" Past Broadcast",A=" Highlight",N=" Clips",H=" Content",F="Streamed on ",D="Duration ",R=" Views",q=" Viewers",V="Click again to exit!",J="Do you wanna to exit Twitch?",z="Exit",X="Close",j="Minimize",Y="Cancel",W="Not Live | ",K=" Channels Live",Z=" Hosts Live",$=" Games Live",Q=" Followed Channels",ee=" Add User",te=" Remove User",ne="User doesn't exist",ae=" hosting ",ie=" already set",oe="Make First",se="First user can fallow (when providing a key) and see live channels feed outside of the user screen<br>",de="Add a Twitch user to display it's Followed Channels content here",le=" (24h)",re=" (7d)",ce=" (30d)",ue=" (all)",_e="Jumping",fe=" to ",me="Jump Canceled",he=" , jump time bigger then duration",pe=" Sec",ve=" Min",ge=" Hr",ye="Source",be="Version: ",we="SmartTV Twitch",ke="Press back key to close this.",Ce="Player Related:",Me="Chat Related:",Ee="General Related:",Se="Update",Ie="Current installed version ",Pe=" latest available version ",xe="This are the none players related controls, the player can show it's own controls.",Le="Play a video: Navigate using Directional pad (up/down/left/right), press enter to start playing",Te="Refresh screen content: ",Be="Exit the application: from side pannel click exit",Ge=" Switch screen: Back key then D-Pad left or right",Oe="Some screen will change its internal content (channel past broadcast or clips for example) instead of changing to another screen",Ue="Start a search: from side pannel click search",Ae="After writing the search text press key Enter on the virtual keyboard then choose a search option",Ne="About this application: from side pannel click about",He="This is a SmartTV Twitch client develop by a individual on his free time, for TV's that don't have access to a good official application, released for free to any one that wanna to use it.",ea="This version of the app is for test only, if you aren't testing please reinstall the app using the release version from https://github.com/fgl27/SmartTwitchTV/releases in doubt check the README.md https://github.com/fgl27/SmartTwitchTV",Fe="Developer information:",De="This is an open source application licensed under the GNU General Public License v3.0, check it on github",Re="github.com/fgl27/SmartTwitchTV",qe="This application uses following dependencies:",Ve="Nightdev KapChat - KapChat captures Twitch chat directly into OBS or XSplit (https://www.nightdev.com/kapchat/)",Je="Fontastic - Create your customized icon fonts in seconds (http://app.fontastic.me)",ze="Twemoji - A simple library that provides standard Unicode emoji support across all platforms (https://github.com/twitter/twemoji)",Xe="UglifyJS - is a JavaScript parser, minifier, compressor and beautifier toolkit (https://github.com/mishoo/UglifyJS2)",je="JS Beautifier - Beautify, unpack or deobfuscate JavaScript and HTML, make JSON/JSONP readable, etc. (https://github.com/beautify-web/js-beautify)",Ye="HTMLMinifier - A highly configurable, well-tested, JavaScript-based HTML minifier (https://github.com/kangax/html-minifier)",We="JSHint - A Static Code Analysis Tool for JavaScript (https://github.com/jshint/jshint)",Ke="Web:",Ze="Android:",$e="Google: Leanback v17 (https://developer.android.com/reference/android/support/v17/leanback/package-summary)",Qe="Google: ExoPlayer (https://github.com/google/ExoPlayer)",et="Show information panel: Press enter key or D-pad keys if chat and live channel feed is not showing",tt="Close the video: press back key twice",nt="Play/Pause a video: open information panel and click on pause simbol (not available to Live streams)",at="Show user live channels feed: D-pad up",it="Change video quality: Open information panel, , navigate using use Directional pad (left/right), then use Directional pad (up/down) to choose the new quality after press Select key to confirm the change",ot="Force refresh a video (in case it freezes): Change video quality to the same",st="Show or hide the Chat : D-pad right",dt="Change Chat position : D-pad left",lt="Change Chat size : D-pad up",rt="Change Chat background brightness: Change in side panel settings",ct="Force refresh the Chat (in case it freezes or doesn't load): Change video quality to the same will reset and sync it",ut='Start a search: open information panel, navigate using use Directional pad (left/right) to "Search" and press enter',_t="Chat and video (Side by side): Color button red (A)",ia="Force disable the chat",oa="with this the chat will not load content, this is useful on a stream with too many viewers were the chat can lag the app.",ft="There is a update available, check it in the app github releases ",Ma="Be aware that after the update (reinstall of the app using latest release) all saved users, keys or etc configuration of the app is lost",mt="A update is available, and the app can't self update this version ",ht="Major changes:",pt="Improves how the app runs in the background",vt='Adding a key allows the app to fallow and access subscribed only past broadcast (for channel you are Sub to and block VOD access to none subscribers). On the authentication page if you already added a key for another user, you need to click up two to tree time and click over "not you?" to authenticate for a different users <br> <br> add key for',gt=" below, fallowing this steps:",yt="Access the site link_link (using a computer or a smart phone)",bt='Click on the "Authorize" button it will take you to main Twitch.TV authentication site',wt="Login to Twitch.TV using the user name you are trying to add a key for",kt="Click on Authorize button of Twitch.TV site if you agree with the requested permissions",Ct="The web page will update and show a key code, the key only has lower case letters and nubers.",Mt=" Add Authentication key",Et="Key added OK",St="Key test fail, it's needed to add new one",It="Key test return OK",Pt="You try to add a key for user ",xt=" but this key is for user ",Lt=" Following",Tt=" Follow",Bt=" And you have not set a authentication key the app can't check yours sub status.",Gt=" And you are not a sub of this channel",Ot=" You are a sub of this channel but the app fail to authenticate contact the developer email in about",Ut="Fail authentication check with the provider key, please check and try again",Fn="The added key doesn't belong to the user ",At="No user",Nt="Set a user and a authentication key to be able to fallow/unfollow",Ht="Restart the",Ft=" Clip",Dt="Channel content",Rt="Network is disconnect, the application can't work without INTERNET",qt="Network connection reestablished",Vt=" Followers",Jt=", Can't fallow or unfallow ",zt="Game content",Xt="Yes",jt="Are you sure you want to remove the user ",Yt="Press Up to ",Wt="Followed Games",Kt="Change between",Zt=" Back key then Enter",$t=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"],Qt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],en="Started ",tn=" (PG Up/Down)",nn="Videos",an=" Video",on="Replay",sn="exiting in ",dn='press "Return" to exit',ln="Featured",rn="Created at ",cn="Open the Broadcast",un="No Broadcast",_n="There is no Past Broadcast for this clip",fn="And because of that no chat",mn=" is now",hn="Open the Hosting",pn="Player related",vn="Buffer size:",gn="A lower value here will make the player to start playing sooner, but it may cause re-buffer with will cause the player to pause to buffer.",yn="Live streams buffer",bn="Videos (Past Broadcast and Highlight) buffer",wn="Clips buffer",kn="General related",Cn="Language",Mn="Chat: Connecting to chat history server.."+la+"Chat: Connected."+la+"Chat: Joined channel ",En="Play from the start or from where you stop watching last time?",In=(Sn="From:"+la)+"Start",Pn="Chat: The Chat has ended!",xn=": Most recent",Ln=": Most views",Tn="Set a authentication key to be able to see fallowed videos",Bn="Switch: Most recent or views",Gn="Enable",On="Disable",Yn="The app was closed willing playing, restoring playback",Un="Restore playback",An="When changing apps, the app may be closed by the system to free memory. In this case the app saves what it was playing and restores the playback when reopened",Nn="Chat font size",Hn="Change the chat lines font size, applies to text and emotes",Dn="Videos animated thumbnails",Rn="Side panel: Back key twice",qn="Size ",Vn="Brightness ",Jn="Forbidden content, this Live must be for Prime only subscribers or lock to Twitch official app only",zn="Jump step ",Xn=" seconds",jn=" minutes",Wn="Clock offset",Kn="Application language",Zn="Content language",$n="All",Qn="Empty game fro this",ta="Isn't possible to jump during a buffering",na="Chat is disabled, enable in side pannel settings",aa="This clip/video fail to load can't replay",sa="Chat backgroung brightness "}var Pa=51,xa=52,La=179,Ta=37,Ba=38,Ga=39,Oa=40,Ua=13,Aa=49,Na=8,Ha=13,Fa=32,Da=46,Ra=0,qa=5,Va=1e4,Ja=0,za=!1,Xa=!1,ja=!1,Ya=!1,Wa="",Ka="https://fgl27.github.io/SmartTwitchTV/release/index.min.html",Za="elsu5d09k0xomu7cggx3qg5ybdwu7g",$a="https://id.twitch.tv/oauth2/token?";function Qa(e){qr.Users_Position=qr.Users_AddcodePosition,Ja=e,ki(),Zc(),ai()}function ei(e,t,n,a){var i=new XMLHttpRequest,o=$a+"grant_type=refresh_token&client_id="+encodeURIComponent(pc)+"&client_secret="+encodeURIComponent(Za)+"&refresh_token="+encodeURIComponent(Ri[e].refresh_token)+"&redirect_uri="+Ka;i.open("POST",o,!0),i.timeout=Va,i.ontimeout=function(){},i.onreadystatechange=function(){4!==i.readyState||(200===i.status?ni(i.responseText,e,n):ti(e,t,n,a))},i.send(null)}function ti(e,t,n,a){++t<10?ei(e,t,n):a&&a()}function ni(e,t,n){var a=JSON.parse(e);Ri[t].access_token=a.access_token,Ri[t].refresh_token=a.refresh_token,so(),n&&n()}function ai(){var e=new XMLHttpRequest,t=$a+"grant_type=authorization_code&client_id="+encodeURIComponent(pc)+"&client_secret="+encodeURIComponent(Za)+"&code="+encodeURIComponent(Ja)+"&redirect_uri="+Ka;e.open("POST",t,!0),e.timeout=Va,e.ontimeout=function(){},e.onreadystatechange=function(){4!==e.readyState||(200===e.status?si(e.responseText):ii())},e.send(null)}function ii(){++Ra<qa?ai():oi()}function oi(){$c(),lu(Ut),window.setTimeout(function(){ru(),jr=0,Iu(),qr.Main_Go=Br,window.location=Ka},4e3),Ri[qr.Users_Position].access_token=0,Ri[qr.Users_Position].refresh_token=0}function si(e){var t=JSON.parse(e);Ri[qr.Users_Position].access_token=t.access_token,Ri[qr.Users_Position].refresh_token=t.refresh_token,ki(),di()}function di(){q_("https://api.twitch.tv/kraken?oauth_token="+Ri[qr.Users_Position].access_token,Va,0,null,li,ri)}function li(e){var t=JSON.parse(e).token;t.user_name&&-1!==t.user_name.indexOf(Ri[qr.Users_Position].name)?(so(),jr=0,$c(),za=RM=!1,qr.Main_Go=Br,Iu(),lu(Et),window.setTimeout(function(){window.location=Ka},3e3)):(Ri[qr.Users_Position].access_token=0,Ri[qr.Users_Position].refresh_token=0,za=!1,lu(Fn+Ri[qr.Users_Position].name),window.setTimeout(function(){ru(),jr=0,Iu(),qr.Main_Go=Br,window.location=Ka},4e3))}function ri(){++Ra<qa?(Va+=500,di()):oi()}function ci(){ki(),Xa=!1,ui()}function ui(){var e="https://api.twitch.tv/kraken/users/"+Ri[qr.Users_Position].id+"/follows/channels/"+Wa,t=new XMLHttpRequest;t.open("GET",e,!0),t.timeout=Va,t.setRequestHeader(vc,pc),t.setRequestHeader(gc,wc),t.ontimeout=function(){},t.onreadystatechange=function(){4===t.readyState&&(200===t.status?_i():404===t.status?fi(t.responseText):mi())},t.send(null)}function _i(){za=!(Xa=!0),Ya?pv():yd()}function fi(e){-1!==(JSON.parse(e).error+"").indexOf("Not Found")?(za=Xa=!1,Ya?pv():yd()):mi()}function mi(){++Ra<qa?(Va+=500,ui()):(za=!1,Ya?pv():yd())}function hi(){ki(),pi()}function pi(){var e=new XMLHttpRequest;e.open("PUT","https://api.twitch.tv/kraken/users/"+Ri[qr.Users_Position].id+"/follows/channels/"+Wa,!0),e.timeout=Va,e.setRequestHeader(vc,pc),e.setRequestHeader(gc,wc),e.setRequestHeader("Authorization","OAuth "+Ri[qr.Users_Position].access_token),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return Xa=!(za=!1),void(Ya?pv():yd());401===e.status||403===e.status?ei(qr.Users_Position,0,hi,null):vi()}},e.send(null)}function vi(){++Ra<qa&&(Va+=500,pi())}function gi(){ki(),yi()}function yi(){var e=new XMLHttpRequest;e.open("DELETE","https://api.twitch.tv/kraken/users/"+Ri[qr.Users_Position].id+"/follows/channels/"+Wa,!0),e.timeout=Va,e.setRequestHeader(vc,pc),e.setRequestHeader(gc,wc),e.setRequestHeader("Authorization","OAuth "+Ri[qr.Users_Position].access_token),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(204===e.status)return za=Xa=!1,void(Ya?pv():yd());401===e.status||403===e.status?ei(qr.Users_Position,0,gi,null):bi()}},e.send(null)}function bi(){++Ra<qa&&(Va+=500,yi())}function wi(){ki(),ja=!1,Ci()}function ki(){Va=1e4,za=!(Ra=0)}function Ci(){var e,t="https://api.twitch.tv/kraken/users/"+Ri[qr.Users_Position].id+"/subscriptions/"+Wa;if(Lc){if(!(e=Android.mreadUrl(t,Va,3,Ri[qr.Users_Position].access_token)))return void Mi();if(200===(e=JSON.parse(e)).status)za=!(ja=!0),Sg();else if(422===e.status)za=ja=!1,Eg();else if(404===e.status){if(-1!==(JSON.parse(e.responseText).error+"").indexOf("Not Found"))return za=ja=!1,void Eg();Mi()}else 401===e.status||403===e.status?ei(qr.Users_Position,0,wi,Ei):Mi()}else(e=new XMLHttpRequest).open("GET",t,!0),e.timeout=Va,e.setRequestHeader(vc,pc),e.setRequestHeader(gc,wc),e.setRequestHeader("Authorization","OAuth "+Ri[qr.Users_Position].access_token),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState)if(200===e.status)za=!(ja=!0),Sg();else if(422===e.status)za=ja=!1,Eg();else if(404===e.status){if(-1!==(JSON.parse(e.responseText).error+"").indexOf("Not Found"))return za=ja=!1,void Eg();Mi()}else 401===e.status||403===e.status?ei(qr.Users_Position,0,wi,Ei):Mi()},e.send(null)}function Mi(){++Ra<qa?(Va+=500,Ci()):Ei()}function Ei(){za=ja=!1,Eg()}function Si(e){ki(),Ii(e,0)}function Ii(e,t){var n="https://api.twitch.tv/kraken?oauth_token="+Ri[e].access_token,a=new XMLHttpRequest;a.open("GET",n,!0),a.timeout=1e4,a.ontimeout=function(){},a.onreadystatechange=function(){if(4===a.readyState){if(200===a.status)return void(JSON.parse(a.responseText).token.valid?za=!1:(ki(),ei(e,0,null,null)));400===a.status?(ki(),ei(e,0,null,null)):Pi(e,t)}},a.send(null)}function Pi(e,t){++t<qa&&Ii(e,t)}function xi(){ki(),Li()}function Li(){var e=new XMLHttpRequest;e.open("PUT","https://api.twitch.tv/api/users/"+Ri[qr.Users_Position].name+"/follows/games/"+encodeURIComponent(qr.Main_gameSelected)+"?oauth_token="+Ri[qr.Users_Position].access_token,!0),e.timeout=1e4,e.setRequestHeader(vc,pc),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return Io=!0,void Fo();401===e.status||403===e.status?ei(qr.Users_Position,0,xi,null):Ti()}},e.send(null)}function Ti(){++Ra<qa&&(Va+=500,Li())}function Bi(){ki(),Gi()}function Gi(){var e=new XMLHttpRequest;e.open("DELETE","https://api.twitch.tv/api/users/"+Ri[qr.Users_Position].name+"/follows/games/"+encodeURIComponent(qr.Main_gameSelected)+"?oauth_token="+Ri[qr.Users_Position].access_token,!0),e.timeout=1e4,e.setRequestHeader(vc,pc),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(204===e.status)return Io=!1,void Fo();401===e.status||403===e.status?ei(qr.Users_Position,0,Bi,null):Oi()}},e.send(null)}function Oi(){++Ra<qa&&(Va+=500,Gi())}function Ui(){ki(),Ai()}function Ai(){var e,t="https://api.twitch.tv/api/users/"+Ri[qr.Users_Position].name+"/follows/games/"+encodeURIComponent(qr.Main_gameSelected);(e=new XMLHttpRequest).open("GET",t,!0),e.timeout=1e4,e.setRequestHeader(vc,pc),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState)return 200===e.status?(Io=!0,void Fo()):404===e.status?(Io=!1,void Fo()):void Ni()},e.send(null)}function Ni(){++Ra<qa?(Va+=500,Ai()):(Io=!1,Fo())}var Hi=0,Fi=5,Di=3500,Ri=[],qi=null,Vi=!1,Ji=!1;function zi(){qr.Main_Go=br,jc("top_bar_user","icon_center_focus"),ru(),cr.placeholder=M,zc("add_user_scroll"),Yi()}function Xi(){Ki(!1),document.body.removeEventListener("keydown",ji),document.body.removeEventListener("keydown",Zi),Yc("top_bar_user","icon_center_focus"),Jc("add_user_scroll")}function ji(e){if(!Vi&&!Ji&&qr.Main_Go===br)switch(e.keyCode){case Aa:_u()?uu():pu()?hu():(0<Ri.length&&qr.Main_Go!==Br?qr.Main_Go=qr.Main_Before:qr.Main_Go=yr,Xi(),Eu());break;case xa:case Pa:case La:case Ua:Yi()}}function Yi(){document.body.removeEventListener("keydown",ji),document.body.addEventListener("keydown",Zi,!1),cr.placeholder=M,cr.focus(),Ji=!0}function Wi(){if(null!==cr){var e=cr.cloneNode(!0);cr.parentNode.replaceChild(e,cr),cr=document.getElementById("user_input")}}function Ki(e){cr.blur(),Wi(),document.body.removeEventListener("keydown",Zi),cr.placeholder=E+M,e&&document.body.addEventListener("keydown",ji,!1),Ji=!1}function Zi(e){if(!Vi&&qr.Main_Go===br)switch(e.keyCode){case Aa:_u()?uu():pu()?hu():(0<Ri.length&&qr.Main_Go!==Br?qr.Main_Go=qr.Main_Before:qr.Main_Go=yr,Xi(),Eu());break;case Da:cr.value="";break;case Ha:case Oa:""!==cr.value&&null!==cr.value?ro(qi=pr||ao()?cr.value:"testtwitch27")?($c(),lu(u+qi+ie),window.setTimeout(function(){ru(),Yi()},1500)):(Di=3500,Vi=!(Hi=0),Jc("add_user_scroll"),Zc(),$i()):Yi();break;case Na:cr.value=cr.value.slice(0,-1);break;case Fa:cr.value+=" "}}function $i(){q_("https://api.twitch.tv/kraken/users?login="+encodeURIComponent(qi),Di,2,null,Qi,eo)}function Qi(e){JSON.parse(e)._total?(cr.value="",document.body.removeEventListener("keydown",ji),io(e)):to()}function eo(){++Hi<Fi?(Di+=500,$i()):to()}function to(){qi=null,$c(),lu(ne),window.setTimeout(function(){zi()},1e3),Vi=!1}function no(){if(0<(Ri=H_("AddUser_UsernameArray",[])).length)for(var e=0;e<Ri.length;e++)Ri[e].access_token&&Si(e)}function ao(){return 0<Ri.length}function io(e){qi=JSON.parse(e).users[0],Ri.push({name:qi.name,id:qi._id,access_token:0,refresh_token:0}),so(),RM=!1,Xi(),VM(),Vi=!1}function oo(e){var t=Ri.indexOf(Ri[e]);-1<t&&Ri.splice(t,1),0<Ri.length?(RM=!1,VM()):zi(),so()}function so(){A_("AddUser_UsernameArray",JSON.stringify(Ri))}function lo(e){qi=Ri[0],Ri[0]=Ri[e],Ri[e]=qi,RM=!1,VM(),so()}function ro(e){return-1!==Ri.indexOf(e)}function co(){return 0<Ri.length}var uo=0,_o=0,fo=!1,mo=0,ho={},po=[],vo=!1,go=0,yo=5,bo=3500,wo=0,ko=0,Co=!1,Mo=["ag_thumbdiv","ag_img","ag_infodiv","ag_displayname","ag_streamtitle","ag_streamgame","ag_viwers","ag_quality","ag_cell","agempty_","a_games_scroll"],Eo=!1,So=!1,Io=!1,Po=!1,xo=!1;function Lo(){qr.Main_CenterLablesVectorPos=3,qr.Main_Go=kr,document.body.addEventListener("keydown",Wo,!1),jc("top_bar_game","icon_center_focus"),Vc("label_side_panel","icon-arrow-circle-left",P),qr.Search_isSearching&&(Tu(),Wc("top_bar_user",n+Bu(f+" '"+qr.Search_data+"'"))),Wc("top_bar_game",w+Bu(_+": "+qr.Main_gameSelected)),qr.Main_OldgameSelected===qr.Main_gameSelected&&Eo?(Fu(uo),zc(Mo[10]),zo(),Iu()):Bo()}function To(){Eo&&-1===uo&&(Yo(),_o=uo=0,jc(Mo[0]+"0_"+_o,Mc)),Vc("label_side_panel","icon-ellipsis",Rn),Wc("top_bar_game",f),document.body.removeEventListener("keydown",Wo),Yc("top_bar_game","icon_center_focus"),Jc(Mo[10])}function Bo(){null===qr.Main_OldgameSelected&&(qr.Main_OldgameSelected=qr.Main_gameSelected),Uu("stream_table_a_game"),Jc(Mo[10]),Zc(),ru(),xo=Eo=!1,ho={},mo=ko=wo=0,uo=_o=0,fo=!(P_=!(So=!(po=[]))),iu(),Go(),Oo()}function Go(){Nu(),vo=!0,go=0,bo=3500}function Oo(){var e=mo+wo;e&&ko-1<e&&(e=ko-sc,fo=!0),q_("https://api.twitch.tv/kraken/streams?game="+encodeURIComponent(qr.Main_gameSelected)+"&limit="+sc+"&offset="+e+(""!==Qr?"&language="+Qr:""),bo,2,null,Ao,Uo)}function Uo(){++go<yo?(bo+=500,Oo()):(vo=!1,mo?(fo=!0,No()):(P_=!1,$c(),lu(T)))}function Ao(e){var t=JSON.parse(e),n=t.streams.length;ko=parseInt(t._total),n<sc&&(fo=!0);var a=mo;Co=!(mo+=n);var i=n/dc;0<n%dc&&i++;var o,s,d,l,r,c,u=0,_=document.getElementById("stream_table_a_game");if(!xo){var f;for(xo=!0,d=document.createElement("tr"),l=0;l<3;l++)f=l?1===l?'<i class="icon-movie stream_channel_fallow_icon"></i>'+Ca+N:"":'<i class="icon-movie-play stream_channel_fallow_icon"></i>'+Ca+Ca+nn,(Zr=document.createElement("td")).setAttribute("id",Mo[8]+"y_"+l),Zr.className="stream_cell",Zr.innerHTML='<div id="'+Mo[0]+"y_"+l+'" class="stream_thumbnail_fallow_game" ><div id="'+Mo[3]+"y_"+l+'" class="stream_channel_fallow_game">'+f+"</div></div>",d.appendChild(Zr);_.appendChild(d)}for(l=0;l<i;l++){for(s=a/dc+l,d=document.createElement("tr"),o=0;o<dc&&u<n;o++,u++)c=(r=t.streams[u]).channel._id,ho[c]?o--:(ho[c]=1,d.appendChild(Xu(s,s+"_"+o,[r.channel.name,c],Mo,[r.preview.template.replace("{width}x{height}",kc),bu(JSON.stringify(r.stream_type))+r.channel.display_name,r.channel.status,r.game,y+Kh(r.created_at)+b+", "+h+gu(r.viewers)+q,yu(r.video_height,r.average_fps,r.channel.language)])));for(;o<dc;o++)fo&&!So&&(So=!0,mo=s*dc+o),d.appendChild(qu(Mo[9]+s+"_"+o)),po.push(Mo[9]+s+"_"+o);_.appendChild(d)}No()}function No(){if(Eo){if(Au(Uc),0<po.length&&!fo)return Go(),void qo();ou(_o,uo,dc,mo),po=[]}else Ho(),Co?(lu(B+$),uo=-1,jo()):(Eo=!0,Au(Uc),zo(),Iu()),zc(Mo[10]),P_=!1,$c();vo=!1}function Ho(){Po?(Io=!0,Fo()):ao()?Ui():(Io=!1,Fo())}function Fo(){Wc(Mo[3]+"y_2",Io?'<i class="icon-heart" style="color: #00b300; font-size: 100%; text-shadow: #FFFFFF 0 0 10px, #FFFFFF 0 0 10px, #FFFFFF 0 0 8px;"></i>'+Ca+Ca+Lt:'<i class="icon-heart-o" style="color: #FFFFFF; font-size: 100%; text-shadow: #000000 0 0 10px, #000000 0 0 10px, #000000 0 0 8px;"></i>'+Ca+Ca+(ao()?Tt:At))}function Do(){ao()&&Ri[qr.Users_Position].access_token?Io?Bi():xi():(lu(Nt),window.setTimeout(function(){Co&&qr.Main_Go===kr?lu(B+$):ru()},2e3))}function Ro(){_o?1===_o?(qr.Main_Go=Hr,qr.Main_OldgameSelected=qr.Main_gameSelected,To(),Eu()):Do():(qr.Main_Go=Nr,qr.Main_OldgameSelected=qr.Main_gameSelected,To(),Eu())}function qo(){du(po.length);var e=mo+wo;e&&ko-1<e&&(e=ko-hc,fo=!0),q_("https://api.twitch.tv/kraken/streams?game="+encodeURIComponent(qr.Main_gameSelected)+"&limit="+hc+"&offset="+e+(""!==Qr?"&language="+Qr:""),bo,2,null,Jo,Vo)}function Vo(){++go<yo?(bo+=500,qo()):(fo=!0,mo-=po.length,po=[],No())}function Jo(e){var t,n,a=JSON.parse(e),i=a.streams.length,o=0,s=0,d=[];for(ko=parseInt(a._total),i<hc&&(fo=!0);o<po.length&&s<i;o++,s++)n=(t=a.streams[s]).channel._id,ho[n]?o--:(ho[n]=1,ju(po[o],[t.channel.name,n],[t.preview.template.replace("{width}x{height}",kc),bu(JSON.stringify(t.stream_type))+t.channel.display_name,t.channel.status,t.game,y+Kh(t.created_at)+b+", "+h+gu(t.viewers)+q,yu(t.video_height,t.average_fps,t.channel.language)],Mo),d.push(o));for(o=d.length-1;-1<o;o--)po.splice(d[o],1);wo+=s,fo&&(mo-=po.length,po=[]),No()}function zo(){uo<0?jo():(n_(uo,_o,Mo,dc,mo),mo/dc<uo+lc&&!fo&&!vo&&(Go(),Oo()),zr&&Xo())}function Xo(){-1<uo&&mo?c_(uo+"_"+_o,Mo):Yo()}function jo(){jc(Mo[0]+"y_"+_o,Mc)}function Yo(){Yc(Mo[0]+"y_"+_o,Mc)}function Wo(e){var t;if(!P_&&!e_())switch(Qu(),e.keyCode){case Aa:pu()?hu():_u()?uu():(qr.Main_OldgameSelected=qr.Main_gameSelected,Xo(),Yo(),L_(Wo));break;case Ta:if(-1===uo)Yo(),--_o<0&&(_o=2),jo();else if(uo||_o){if(wu(uo,_o-1,Mo[0]))Xo(),_o--,zo();else for(t=dc-1;-1<t;t--)if(wu(uo-1,t,Mo[0])){Xo(),uo--,_o=t,zo();break}}else Xo(),Yo(),uo=-1,_o=2,jo();break;case Ga:-1===uo?(Yo(),2<++_o?(_o=0,Co?jo():(uo=0,zo())):jo()):wu(uo,_o+1,Mo[0])?(Xo(),_o++,zo()):wu(uo+1,0,Mo[0])&&(Xo(),uo++,_o=0,zo());break;case Ba:if(-1!==uo||Co)if(uo){for(t=0;t<dc;t++)if(wu(uo-1,_o-t,Mo[0])){Xo(),uo--,_o-=t,zo();break}}else Xo(),uo=-1,jo();else uo=0,Yo(),zo();break;case Oa:if(-1!==uo||Co){for(t=0;t<dc;t++)if(wu(uo+1,_o-t,Mo[0])){Xo(),uo++,_o-=t,zo();break}}else uo=0,Yo(),zo();break;case xa:case Pa:case La:case Ua:-1!==uo?i_(uo+"_"+_o,Mo,Wo):Ro()}}var Ko=0,Zo=0,$o=!1,Qo=0,es={},ts=[],ns=!1,as=0,is=5,os=3500,ss=0,ds=0,ls=!1,rs=!1,cs="week",us=2,_s=!1,fs=["agv_thumbdiv","agv_img","agv_infodiv","agv_title","agv_streamon","agv_duration","agv_viwers","agv_quality","agv_cell","gvempty_","a_games_vod_scroll","agv_game"],ms=!1,hs=!1,ps="";function vs(){qr.Main_CenterLablesVectorPos=3,qr.Main_Go=Nr,jc("top_bar_game","icon_center_focus"),document.body.addEventListener("keydown",Bs,!1),Vc("label_side_panel","icon-arrow-circle-left",P),ps===qr.Main_gameSelected&&ms?(Fu(Ko),zc(fs[10]),Gs(),Ps(),Iu()):ys()}function gs(){ms&&xs(),document.body.removeEventListener("keydown",Bs),Yc("top_bar_game","icon_center_focus"),Wc("top_bar_game",f),Vc("label_side_panel","icon-ellipsis",Rn),Vc("label_switch","icon-switch",l),Jc(fs[10])}function ys(){ms&&xs(),Uu("stream_table_a_game_vod"),Jc(fs[10]),Zc(),Gs(),ps=qr.Main_gameSelected,ru(),_s=ms=!1,ds=ss=0,es={},Ko=Zo=Qo=0,$o=!(P_=!(rs=!(ts=[]))),iu(),bs(),ws()}function bs(){Nu(),ns=!0,as=0,os=3500}function ws(){var e=Qo+ss;e&&ds-1<e&&(e=ds-sc,$o=!0),q_("https://api.twitch.tv/kraken/videos/top?game="+encodeURIComponent(qr.Main_gameSelected)+"&limit="+sc+"&broadcast_type="+(hs?"highlight":"archive")+"&sort=views&offset="+e+"&period="+cs+(""!==Qr?"&language="+Qr:""),os,2,null,Cs,ks)}function ks(){++as<is?(os+=500,ws()):(ns=!1,Qo?($o=!0,Ms()):(P_=!1,$c(),lu(T)))}function Cs(e){var t=JSON.parse(e),n=t.vods.length;ds=parseInt(t._total),n<sc&&($o=!0);var a=Qo;ls=!(Qo+=n);var i=n/dc;0<n%dc&&i++;var o,s,d,l,r,c=0,u=document.getElementById("stream_table_a_game_vod");if(!_s){var _;for(_s=!0,d=document.createElement("tr"),f=0;f<2;f++)_=f?'<i class="icon-history stream_channel_fallow_icon"></i>'+Ca+Ca+m:'<i class="icon-movie-play stream_channel_fallow_icon"></i>'+Ca+Ca+p,(Zr=document.createElement("td")).setAttribute("id",fs[8]+"y_"+f),Zr.className="stream_cell",Zr.innerHTML='<div id="'+fs[0]+"y_"+f+'" class="stream_thumbnail_channel_vod" ><div id="'+fs[3]+"y_"+f+'" class="stream_channel_fallow_game">'+_+"</div></div>",d.appendChild(Zr);u.appendChild(d)}for(var f=0;f<i;f++){for(s=a/dc+f,d=document.createElement("tr"),o=0;o<dc&&c<n;o++,c++)r=(l=t.vods[c])._id,-1!==(l.preview.template+"").indexOf("404_processing")||es[r]?o--:(es[r]=1,d.appendChild(kS(s,s+"_"+o,[r,l.length,l.language,l.game,l.channel.name,l.increment_view_count_url],[l.preview.template.replace("{width}x{height}",kc),l.channel.display_name,F+Gu(l.created_at),bk.parse(l.title)+la+en+v+l.game,gu(l.views)+R,yu(l.resolutions.chunked.slice(-4),parseInt(l.fps.chunked)||0,l.language),D+Yh(l.length),l.animated_preview_url],fs)));for(;o<dc;o++)$o&&!rs&&(rs=!0,Qo=s*dc+o),d.appendChild(qu(fs[9]+s+"_"+o)),ts.push(fs[9]+s+"_"+o);u.appendChild(d)}Ms()}function Ms(){if(ms?Au(Uc):(ls?lu(B+(hs?A:U)+G+I):(ms=!0,Au(Uc),Ps(),Iu()),zc(fs[10]),P_=!1,$c()),0<ts.length&&!$o)return bs(),void Es();ou(Zo,Ko,dc,Qo),ns=!(ts=[])}function Es(){du(ts.length);var e=Qo+ss;e&&ds-1<e&&(e=ds-hc,$o=!0),q_("https://api.twitch.tv/kraken/videos/top?game="+encodeURIComponent(qr.Main_gameSelected)+"&limit="+hc+"&broadcast_type="+(hs?"highlight":"archive")+"&sort=views&offset="+e+"&period="+cs+(""!==Qr?"&language="+Qr:""),os,2,null,Is,Ss)}function Ss(){++as<is?(os+=500,Es()):($o=!0,ts=[],Ms())}function Is(e){var t,n,a=JSON.parse(e),i=a.vods.length,o=0,s=0,d=[];for(ds=parseInt(a._total);o<ts.length&&s<i;o++,s++)n=(t=a.vods[s])._id,-1!==(t.preview.template+"").indexOf("404_processing")||es[n]?o--:(es[n]=1,MS(ts[o],[n,t.length,t.language,t.game,t.channel.name,t.increment_view_count_url],[t.preview.template.replace("{width}x{height}",kc),t.channel.display_name,F+Gu(t.created_at),bk.parse(t.title)+la+en+v+t.game,gu(t.views)+R,yu(t.resolutions.chunked.slice(-4),parseInt(t.fps.chunked)||0,t.language),D+Yh(t.length),t.animated_preview_url],fs),d.push(o));for(o=d.length-1;-1<o;o--)ts.splice(d[o],1);ss+=s,$o&&(Qo-=ts.length,ts=[]),Ms()}function Ps(){Ko<0?Ls():(n_(Ko,Zo,fs,dc,Qo),OS(fs,Ko+"_"+Zo),Qo/dc<Ko+lc&&!$o&&!ns&&(bs(),ws()),zr&&xs())}function xs(){window.clearInterval(XE),-1<Ko&&Qo?(zc(fs[1]+Ko+"_"+Zo),c_(Ko+"_"+Zo,fs)):Ts()}function Ls(){var e=1<Zo?1:Zo;jc(fs[0]+"y_"+e,Mc)}function Ts(){var e=1<Zo?1:Zo;Yc(fs[0]+"y_"+e,Mc)}function Bs(e){var t;if(!P_&&!e_())switch(Qu(),e.keyCode){case Aa:pu()?hu():_u()?uu():(xs(),L_(Bs));break;case Ta:if(-1===Ko)Ts(),--Zo<0&&(Zo=1),Ls();else if(Ko||Zo){if(wu(Ko,Zo-1,fs[0]))xs(),Zo--,Ps();else for(t=dc-1;-1<t;t--)if(wu(Ko-1,t,fs[0])){xs(),Ko--,Zo=t,Ps();break}}else xs(),Ts(),Ko=-1,Zo=1,Ls();break;case Ga:-1===Ko?(Ts(),1<++Zo?(Zo=0,ls?Ls():(Ko=0,Ps())):Ls()):wu(Ko,Zo+1,fs[0])?(xs(),Zo++,Ps()):wu(Ko+1,0,fs[0])&&(xs(),Ko++,Zo=0,Ps());break;case Ba:if(-1!==Ko||ls)if(Ko){for(t=0;t<dc;t++)if(wu(Ko-1,Zo-t,fs[0])){xs(),Ko--,Zo-=t,Ps();break}}else xs(),Ko=-1,Ls();else Ko=0,Ts(),Ps();break;case Oa:if(-1!==Ko||ls){for(t=0;t<dc;t++)if(wu(Ko+1,Zo-t,fs[0])){xs(),Ko++,Zo-=t,Ps();break}}else Ko=0,Ts(),Ps();break;case xa:case Pa:case La:case Ua:-1===Ko?(0===Zo?A_("AGameVod_highlight",(hs=!hs)?"true":"false"):4<++us&&(us=1),ys()):d_(Ko+"_"+Zo,fs,Bs)}}function Gs(){1===us?(Wc("top_bar_game",w+Bu((hs?A:U)+le+": "+qr.Main_gameSelected)),cs="day"):2===us?(Wc("top_bar_game",w+Bu((hs?A:U)+re+": "+qr.Main_gameSelected)),cs="week"):3===us?(Wc("top_bar_game",w+Bu((hs?A:U)+ce+": "+qr.Main_gameSelected)),cs="month"):4===us&&(Wc("top_bar_game",w+Bu((hs?A:U)+ue+": "+qr.Main_gameSelected)),cs="all"),A_("AGameVod_periodNumber",us)}var Os,Us,As=0,Ns=0,Hs=!1,Fs=0,Ds=0,Rs=5,qs=3500,Vs=0,Js=!1,zs=!1,Xs=["cc_thumbdiv","cc_img","cc_infodiv","cc_name","cc_createdon","cc_game","cc_viwers","cc_duration","cc_cell","sccempty_","channel_content_scroll"],js=!1,Ys="",Ws=null,Ks="",Zs="",$s="",Qs="",ed="",td={};function nd(){qr.Main_CenterLablesVectorPos=1,qr.Main_Go=xr,Us&&!qr.Search_isSearching&&qr.Main_selectedChannel_id&&Sd(),Ys!==qr.Main_selectedChannel&&(js=!1),Tu(),qr.Main_selectedChannelDisplayname=qr.Main_selectedChannelDisplayname.replace(W,""),Kc("top_bar_user",qr.Main_selectedChannelDisplayname),Kc("top_bar_game",Dt),document.body.addEventListener("keydown",Id,!1),Ya=!1,js?(Fu(As),zc(Xs[10]),wd(),kd(),Iu()):id()}function ad(){Lu(),document.body.removeEventListener("keydown",Id),Jc(Xs[10])}function id(){Uu("stream_table_channel_content"),Jc(Xs[10]),Zc(),ru(),Ys=qr.Main_selectedChannel,Qs="",Hs=Js=js=!1,Os=void(As=Ns=Fs=Vs=0),od(),sd()}function od(){P_=!0,Ds=0,qs=3500}function sd(){q_("https://api.twitch.tv/kraken/streams/"+encodeURIComponent(void 0!==Os?Os:qr.Main_selectedChannel_id),qs,2,null,dd,ld)}function dd(e){null!==JSON.parse(e).stream?(Ws=e,od(),_d()):Os?(Ws=null,od(),_d()):(od(),rd())}function ld(){++Ds<Rs?(qs+=500,sd()):(Ws=null,od(),_d())}function rd(){var e,t="https://tmi.twitch.tv/hosts?include_logins=1&host="+encodeURIComponent(qr.Main_selectedChannel_id);if(Lc){if(!(e=Android.mreadUrl(t,qs,1,null)))return void cd();200===(e=JSON.parse(e)).status?ud(e.responseText):cd()}else(e=new XMLHttpRequest).open("GET",Ac+t,!0),e.timeout=qs,e.setRequestHeader(vc,pc),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void ud(e.responseText);cd()}},e.send(null)}function cd(){++Ds<Rs?(qs+=500,rd()):(Ws=null,od(),_d())}function ud(e){var t=JSON.parse(e);void 0!==(Os=t.hosts[0].target_id)?(od(),sd()):(Ws=null,od(),_d())}function _d(){q_("https://api.twitch.tv/kraken/channels/"+qr.Main_selectedChannel_id,Hv,2,null,fd,md)}function fd(e){var t=JSON.parse(e);Ks=t.views,Zs=t.followers,$s=t.description,qr.Main_selectedChannelLogo=t.logo,hd()}function md(){++Ds<Rs?(qs+=500,_d()):($s=Zs=Ks="",qr.Main_selectedChannelLogo=Oc,hd())}function hd(){var e=document.createElement("tr"),t=document.createElement("tbody"),n=0,a=document.getElementById("stream_table_channel_content");if((Zr=document.createElement("tr")).className="follower_header",Zr.innerHTML='<div class="follower_header">'+bk.parse($s)+"</div>",a.appendChild(t),a.appendChild(Zr),null!==Ws){var i=JSON.parse(Ws);if(null!==i.stream){var o=void 0!==Os?qr.Main_selectedChannelDisplayname+ae:"",s=i.stream;e.appendChild(pd("0_"+n,s.channel.name,s.preview.template,bk.parse(s.channel.status),s.game,bu(JSON.stringify(s.stream_type))+o+s.channel.display_name,y+Kh(s.created_at)+b+", "+h+gu(s.viewers)+q,yu(s.video_height,s.average_fps,s.channel.language))),n++}else Js=!0}else Js=!0;e.appendChild(vd("0_"+n,qr.Main_selectedChannelDisplayname,qr.Main_selectedChannelDisplayname+U,"movie-play")),n++,e.appendChild(vd("0_"+n,qr.Main_selectedChannelDisplayname,qr.Main_selectedChannelDisplayname+N,"movie")),n<2&&(n++,e.appendChild(qu(Xs[9]+"0_"+n))),a.appendChild(e),(e=document.createElement("tr")).appendChild(gd("1_0",qr.Main_selectedChannelDisplayname,qr.Main_selectedChannelDisplayname,qr.Main_selectedChannelLogo)),a.appendChild(e),bd()}function pd(e,t,n,a,i,o,s,d){return Qs=n.replace("{width}x{height}",kc),(Zr=document.createElement("td")).setAttribute("id",Xs[8]+e),Zr.setAttribute(Ec,t),Zr.className="stream_cell",Zr.innerHTML='<div id="'+Xs[0]+e+'" class="stream_thumbnail_video" ><img id="'+Xs[1]+e+'" class="stream_img"></div><div id="'+Xs[2]+e+'" class="stream_text"><div id="'+Xs[3]+e+'" class="stream_channel" style="width: 66%; display: inline-block;"><i class="icon-circle" style="color: '+(void 0!==Os?"#FED000":"red")+'; font-size: 90%; aria-hidden="true"></i> '+Ca+o+'</div><div id="'+Xs[7]+e+'"class="stream_info" style="width:33%; float: right; text-align: right; display: inline-block;">'+d+'</div><div id="'+Xs[4]+e+'"class="stream_info">'+a+'</div><div id="'+Xs[5]+e+'"class="stream_info">'+v+i+'</div><div id="'+Xs[6]+e+'"class="stream_info">'+s+"</div></div>",Zr}function vd(e,t,n,a){return(Zr=document.createElement("td")).setAttribute("id",Xs[8]+e),Zr.setAttribute(Ec,t),Zr.className="stream_cell",Zr.innerHTML='<div id="'+Xs[0]+e+'" class="stream_thumbnail_video" ><div id="'+Xs[1]+e+'" class="stream_channel_content_icon"><i class="icon-'+a+'"></i></div></div><div id="'+Xs[2]+e+'" class="stream_text"><div id="'+Xs[3]+e+'" class="stream_channel" style="text-align: center">'+n+"</div></div>",Zr}function gd(e,t,n,a){return ed=a,(Zr=document.createElement("td")).setAttribute("id",Xs[8]+e),Zr.setAttribute(Ec,t),Zr.className="stream_cell",Zr.innerHTML='<div id="'+Xs[0]+e+'" class="stream_thumbnail_video" ><div id="schannel_cont_heart" style="position: absolute; top: 5%; left: 6%;"></div><img id="'+Xs[1]+e+'" class="stream_img_fallow"></div><div id="'+Xs[2]+e+'" class="stream_text"><div id="'+Xs[3]+e+'" class="stream_channel">'+n+'</div><div id="'+Xs[5]+e+'"class="stream_info">'+gu(Ks)+R+'</div><div id="'+Xs[6]+e+'"class="stream_info" >'+gu(Zs)+Vt+"</div></div>",Zr}function yd(){Xa?(Wc("schannel_cont_heart",'<i class="icon-heart" style="color: #00b300; font-size: 600%; text-shadow: #FFFFFF 0 0 10px, #FFFFFF 0 0 10px, #FFFFFF 0 0 8px;"></i>'),Kc(Xs[3]+"1_0",qr.Main_selectedChannelDisplayname+Lt)):(Wc("schannel_cont_heart",'<i class="icon-heart-o" style="color: #FFFFFF; font-size: 600%; text-shadow: #000000 0 0 10px, #000000 0 0 10px, #000000 0 0 8px;"></i>'),ao()?Kc(Xs[3]+"1_0",qr.Main_selectedChannelDisplayname+Tt):Kc(Xs[3]+"1_0",qr.Main_selectedChannelDisplayname+Jt))}function bd(){js||(js=!0,""!==Qs&&Nc(document.getElementById(Xs[1]+"0_0"),Qs,Uc),Nc(document.getElementById(Xs[1]+"1_0"),ed,Oc),kd(),Iu(),zc(Xs[10]),$c()),wd(),P_=!1}function wd(){zs?yd():ao()?(Wa=qr.Main_selectedChannel_id,Ya=!1,ci()):(Xa=!1,yd())}function kd(){jc(Xs[0]+As+"_"+(As?0:Ns),Mc),zr&&Cd(),Zu()}function Cd(){c_(As+"_"+(As?0:Ns),Xs)}function Md(){if(As)ao()&&Ri[qr.Users_Position].access_token?(Ya=!1,Wa=qr.Main_selectedChannel_id,Xa?gi():hi()):(lu(Nt),window.setTimeout(ru,2e3));else{document.body.removeEventListener("keydown",Id),Jc(Xs[10]);var e=Js?1:0;Ns===0-e?(qr.Play_selectedChannel=document.getElementById(Xs[8]+As+"_"+Ns).getAttribute(Ec),qr.Play_selectedChannelDisplayname=document.getElementById(Xs[3]+As+"_"+Ns).textContent,-1!==qr.Play_selectedChannelDisplayname.indexOf(ae)?(qr.Play_isHost=!0,qr.Play_DisplaynameHost=qr.Play_selectedChannelDisplayname,qr.Play_selectedChannelDisplayname=qr.Play_selectedChannelDisplayname.split(ae)[1],qr.Play_selectedChannel_id=Os):qr.Play_selectedChannel_id=qr.Main_selectedChannel_id,qr.Play_gameSelected=document.getElementById(Xs[5]+As+"_"+Ns).textContent.split(v)[1],f_(o_)):Ns===1-e?f_(el):Ns===2-e&&(dy=Gy,f_(_y))}}function Ed(){td={"Main_values.Main_selectedChannel_id":qr.Main_selectedChannel_id,"Main_values.Main_selectedChannelLogo":qr.Main_selectedChannelLogo,"Main_values.Main_selectedChannel":qr.Main_selectedChannel,"Main_values.Main_selectedChannelDisplayname":qr.Main_selectedChannelDisplayname,ChannelContent_UserChannels:zs,"Main_values.Main_BeforeChannel":qr.Main_BeforeChannel}}function Sd(){qr.Main_selectedChannel_id=qr.Main_selectedChannel_id,qr.Main_selectedChannelLogo=qr.Main_selectedChannelLogo,qr.Main_selectedChannel=qr.Main_selectedChannel,qr.Main_selectedChannelDisplayname=qr.Main_selectedChannelDisplayname,zs=td.ChannelContent_UserChannels,qr.Main_BeforeChannel=qr.Main_BeforeChannel,Us=!(td={})}function Id(e){if(!P_&&!e_())switch(Qu(),e.keyCode){case Aa:pu()?hu():_u()?uu():(Cd(),L_(Id));break;case Ta:As||(Cd(),--Ns<0&&(Ns=Js?1:2),kd());break;case Ga:As||(Cd(),(Js?1:2)<++Ns&&(Ns=0),kd());break;case Ba:case Oa:Cd(),As=As?0:1,kd();break;case xa:case Pa:case La:case Ua:Md()}}var Pd=0,xd=0,Ld=!1,Td=0,Bd={},Gd=[],Od=!1,Ud=0,Ad=5,Nd=3500,Hd=0,Fd=0,Dd=0,Rd=!1,qd=!1,Vd="",Jd=!1,zd=["cv_thumbdiv","cv_img","cv_infodiv","cv_title","cv_streamon","cv_duration","cv_viwers","cv_quality","cv_cell","cvempty_","channel_vod_scroll","cv_game"],Xd=!1,jd=!1,Yd="",Wd="",Kd="",Zd="",$d="",Qd=0;function el(){qr.Main_CenterLablesVectorPos=1,qr.Main_Go=Lr,!qr.Search_isSearching&&qr.Main_selectedChannel_id&&Sd(),qr.Main_selectedChannel!==Yd&&(Xd=!1),Tu(),Vc("label_side_panel","icon-arrow-circle-left",P),Kc("top_bar_user",qr.Main_selectedChannelDisplayname),document.body.addEventListener("keydown",hl,!1),Xd?(Fu(Pd),Kc("top_bar_game",jd?A:U),zc(zd[10]),ul(),Iu()):nl()}function tl(){Xd&&_l(),Lu(),document.body.removeEventListener("keydown",hl),Jc(zd[10])}function nl(){Xd&&_l(),Uu("stream_table_channel_vod"),Jc(zd[10]),Kc("top_bar_game",jd?A:U),Zc(),ru(),Yd=qr.Main_selectedChannel,Fd=Hd=0,Jd=Xd=!1,Bd={},Pd=xd=Td=0,Ld=!(P_=!(qd=!(Gd=[]))),iu(),al(),il()}function al(){Nu(),Od=!0,Ud=0,Nd=3500}function il(){var e=Td+Hd;e&&Fd-1<e&&(e=Fd-sc,Ld=!0),q_("https://api.twitch.tv/kraken/channels/"+encodeURIComponent(qr.Main_selectedChannel_id)+"/videos?limit="+sc+"&broadcast_type="+(jd?"highlight":"archive")+"&sort=time&offset="+e,Nd,2,null,sl,ol)}function ol(){++Ud<Ad?(Nd+=500,il()):(Od=!1,Td?(Ld=!0,dl()):(P_=!1,$c(),lu(T)))}function sl(e){var t=JSON.parse(e),n=t.videos.length;Fd=parseInt(t._total),n<sc&&(Ld=!0);var a=Td;Rd=!(Td+=n);var i=n/dc;0<n%dc&&i++;var o,s,d,l,r,c,u,_=0,f=document.getElementById("stream_table_channel_vod");if(!Jd){Jd=!0,d=document.createElement("tr");var m='<i class="icon-movie-play stream_channel_fallow_icon"></i>'+Ca+Ca+p;(Zr=document.createElement("td")).setAttribute("id",zd[8]+"y_0"),Zr.className="stream_cell",Zr.innerHTML='<div id="'+zd[0]+'y_0" class="stream_thumbnail_channel_vod" ><div id="'+zd[3]+'y_0" class="stream_channel_fallow_game">'+m+"</div></div>",d.appendChild(Zr),f.appendChild(d)}for(var h=0;h<i;h++){for(s=a/dc+h,d=document.createElement("tr"),o=0;o<dc&&_<n;o++,_++)r=(l=t.videos[_])._id,c=-1!==((u=l.preview.template)+"").indexOf("404_processing"),s||o||!c||(c=!1,u=Uc),c||Bd[r]?o--:(Bd[r]=1,d.appendChild(kS(s,s+"_"+o,[r,l.length,l.language,l.game,l.channel.name,l.increment_view_count_url],[u.replace("{width}x{height}",kc),bk.parse(l.title),F+Gu(l.created_at),en+v+l.game,gu(l.views)+R,yu(l.resolutions.chunked.slice(-4),parseInt(l.fps.chunked)||0,l.language),D+Yh(l.length),l.animated_preview_url],zd)));for(;o<dc;o++)Ld&&!qd&&(qd=!0,Td=s*dc+o),d.appendChild(qu(zd[9]+s+"_"+o)),Gd.push(zd[9]+s+"_"+o);f.appendChild(d)}dl()}function dl(){if(Xd?(ou(xd,Pd,dc,Td),Au(Uc)):(Rd?lu(B+(jd?A:U)+G+I):(Xd=!0,Au(Uc),ul(),Iu()),zc(zd[10]),P_=!1,$c()),0<Gd.length&&!Ld)return al(),void ll();Od=!(Gd=[])}function ll(){du(Gd.length);var e=Td+Hd;e&&Fd-1<e&&(e=Fd-hc,Ld=!0),q_("https://api.twitch.tv/kraken/channels/"+encodeURIComponent(qr.Main_selectedChannel_id)+"/videos?limit="+hc+"&broadcast_type="+(jd?"highlight":"archive")+"&sort=time&offset="+e,Nd,2,null,cl,rl)}function rl(){++Ud<Ad?(Nd+=500,ll()):(Ld=!0,Td-=Gd.length,Gd=[],dl())}function cl(e){var t,n,a=JSON.parse(e),i=a.videos.length,o=0,s=0,d=[];for(Fd=parseInt(a._total);o<Gd.length&&s<i;o++,s++)n=(t=a.videos[s])._id,-1!==(t.preview.template+"").indexOf("404_processing")||Bd[n]?o--:(Bd[n]=1,MS(Gd[o],[n,t.length,t.language,t.game,t.channel.name,t.increment_view_count_url],[t.preview.template.replace("{width}x{height}",kc),bk.parse(t.title),F+Gu(t.created_at),en+v+t.game,gu(t.views)+R,yu(t.resolutions.chunked.slice(-4),parseInt(t.fps.chunked)||0,t.language),D+Yh(t.length),t.animated_preview_url],zd),d.push(o));for(o=d.length-1;-1<o;o--)Gd.splice(d[o],1);Hd+=s,Ld&&(Td-=Gd.length,Gd=[]),dl()}function ul(){Pd<0?fl():(n_(Pd,xd,zd,dc,Td),OS(zd,Pd+"_"+xd),Td/dc<Pd+lc&&!Ld&&!Od&&(al(),il()),zr&&_l())}function _l(){window.clearInterval(XE),-1<Pd&&Td?(zc(zd[1]+Pd+"_"+xd),c_(Pd+"_"+xd,zd)):ml()}function fl(){jc(zd[0]+"y_0",Mc)}function ml(){Yc(zd[0]+"y_0",Mc)}function hl(e){var t;if(!P_&&!e_())switch(Qu(),e.keyCode){case Aa:pu()?hu():_u()?uu():(_l(),L_(hl));break;case Ta:if(wu(Pd,xd-1,zd[0]))_l(),xd--,ul();else for(t=dc-1;-1<t;t--)if(wu(Pd-1,t,zd[0])){_l(),Pd--,xd=t,ul();break}break;case Ga:wu(Pd,xd+1,zd[0])?(_l(),xd++,ul()):wu(Pd+1,0,zd[0])&&(_l(),Pd++,xd=0,ul());break;case Ba:if(-1!==Pd||Rd)if(Pd){for(t=0;t<dc;t++)if(wu(Pd-1,xd-t,zd[0])){_l(),Pd--,xd-=t,ul();break}}else _l(),Pd=-1,fl();else Pd=0,ml(),ul();break;case Oa:if(-1!==Pd||Rd){for(t=0;t<dc;t++)if(wu(Pd+1,xd-t,zd[0])){_l(),Pd++,xd-=t,ul();break}}else Pd=0,ml(),ul();break;case xa:case Pa:case La:case Ua:-1===Pd?(A_("ChannelVod_highlight",(jd=!jd)?"true":"false"),nl()):d_(Pd+"_"+xd,zd,hl)}}var pl,vl,gl,yl,bl,wl=!1,kl=0,Cl=[],Ml=[],El=10,Sl=null,Il=0,Pl="",xl=["ff0000","ff4000","ff8000","ffbf00","ffff00","bfff00","80ff00","40ff00","00ff00","00ff40","00ff80","00ffbf","00ffff","00bfff","0080ff","0040ff","ff00ff","ff00bf","ff0080","ff0040"],Ll=xl.length,Tl=0,Bl=!1,Gl=0;function Ol(){yl=document.getElementById("chat_box"),Hl()}function Ul(){er(),Lc&&qr.Play_ChatForceDisable?(wl||Hl(),f_(function(){ql(Gl=(new Date).getTime())})):sr()}function Al(a){return Object.keys(a).map(function(n){var e=a[n];return e.type=n,e.versions=Object.keys(a[n].versions).map(function(e){var t=a[n].versions[e];return t.type=e,t}),e})}function Nl(e,t,n,a){var i=document.createElement("style");i.type="text/css",i.innerHTML="."+e+"-"+t+' { background-image: url("'+n.replace("http:","https:")+'"); }',a?document.head.appendChild(i):yl.appendChild(i)}function Hl(){kl=0,wl=!1,Fl()}function Fl(){q_("https://badges.twitch.tv/v1/badges/global/display",1e4,0,null,Rl,Dl)}function Dl(){++kl<El?Fl():wl=!1}function Rl(e){Al(JSON.parse(e).badge_sets).forEach(function(t){t.versions.forEach(function(e){Nl(t.type,e.type,e.image_url_4x,!0)})}),wl=!0}function ql(e){kl=0,Vl(e)}function Vl(e){var t,n="https://badges.twitch.tv/v1/badges/channels/"+qr.Main_selectedChannel_id+"/display";if(Lc){if(!(t=Android.mreadUrl(n,1e4,0,null)))return void(Gl===e&&Jl(e));if(200===(t=JSON.parse(t)).status)return void(Gl===e&&zl(t.responseText,e));Gl===e&&Jl(e)}else(t=new XMLHttpRequest).open("GET",n,!0),t.timeout=1e4,t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void(Gl===e&&zl(t.responseText,e));Gl===e&&Jl(e)}},t.send(null)}function Jl(e){kl++,Gl===e&&(kl<El?Vl(e):bl=window.setTimeout(function(){Vl(e)},2500))}function zl(e,t){Al(JSON.parse(e).badge_sets).forEach(function(t){t.versions.forEach(function(e){Nl(t.type,e.type,e.image_url_4x,!1)})}),Gl===t&&Xl(t)}function Xl(e){kl=0,Gl===e&&jl(e)}function jl(e){var t,n="https://api.twitch.tv/v5/videos/"+qr.ChannelVod_vodId+"/comments?client_id="+pc+(Il?"&content_offset_seconds="+parseInt(Il):"");if(Lc){if(!(t=Android.mreadUrl(n,1e4,0,null)))return void(Gl===e&&Yl(e));if(200===(t=JSON.parse(t)).status)return void(Gl===e&&Wl(t.responseText,e));Gl===e&&Yl(e)}else(t=new XMLHttpRequest).open("GET",n,!0),t.timeout=1e4,t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void(Gl===e&&Wl(t.responseText,e));Gl===e&&Yl(e)}},t.send(null)}function Yl(e){kl++,Gl===e&&(kl<El?jl(e):vl=window.setTimeout(function(){jl(e)},2500))}function Wl(e,t){e=JSON.parse(e);var n,a,i=null===Sl;i&&(n="&nbsp;",n+='<span class="message">',n+=la+Mn+qr.Main_selectedChannelDisplayname+" "+Pl,Kl(n+="</span>",0)),Il=0,Sl=e._next,e.comments.forEach(function(e){n="",(a=e.message).hasOwnProperty("user_badges")&&a.user_badges.forEach(function(e){n+='<span class="'+e._id+"-"+e.version+' tag"></span>'}),n+='<span class="nick" style="color: #'+xl[e.commenter.display_name.charCodeAt(0)%Ll]+';">'+e.commenter.display_name+"</span>&#58;&nbsp;",n+='<span class="message">',a.fragments.forEach(function(e){e.hasOwnProperty("emoticon")?n+='<img class="emoticon" src="https://static-cdn.jtvnw.net/emoticons/v1/'+e.emoticon.emoticon_id+'/1.0" srcset="https://static-cdn.jtvnw.net/emoticons/v1/'+e.emoticon.emoticon_id+"/2.0 2x, https://static-cdn.jtvnw.net/emoticons/v1/"+e.emoticon.emoticon_id+'/3.0 4x">':n+=bk.parse(e.text)}),n+="</span>",i?Kl(n,e.content_offset_seconds):void 0!==Sl&&Zl(n,e.content_offset_seconds)}),i&&Gl===t&&($l(t),void 0!==Sl&&nr(t))}function Kl(e,t){Cl.push({time:t,message:e})}function Zl(e,t){Ml.push({time:t,message:e})}function $l(e){Bl||Gl!==e||(pl=window.setInterval(function(){tr(e),yl.scrollTop=yl.scrollHeight},1e3))}function Ql(){Bl||(window.clearInterval(bl),window.clearInterval(pl),window.clearInterval(vl),window.clearInterval(gl))}function er(){Ql(),Gl=0,Uu("chat_box"),Bl=!1,Sl=null,Cl=[],Ml=[],Tl=0}function tr(e){var t,n;if(Tl<Cl.length-1)for(n=Tl;n<Cl.length&&Cl[n].time<Qd+Android.gettime()/1e3;n++,Tl++)(t=document.createElement("div")).className="chat_line",t.innerHTML=Cl[n].message,yl.appendChild(t);else if(Ql(),void 0!==Sl){Cl=Ml.slice(),Tl=0,$l(e),Ml=[],Gl===e&&nr(e);var a=document.getElementsByClassName("chat_line");if(0<a.length-100)for(n=0;n<a.length-100;n++)a[0].parentNode.removeChild(a[0]);yl.scrollTop=yl.scrollHeight}else{var i="&nbsp;";i+='<span class="message">',i+=la+la+Pn+la+la,i+="</span>",(t=document.createElement("div")).className="chat_line",t.innerHTML=i,yl.appendChild(t),Bl=!0,yl.scrollTop=yl.scrollHeight,window.clearInterval(pl),pl=window.setInterval(function(){yl.scrollTop=yl.scrollHeight},250)}}function nr(e){kl=0,Bl||Gl!==e||ar(e)}function ar(e){var t,n="https://api.twitch.tv/v5/videos/"+qr.ChannelVod_vodId+"/comments?client_id="+pc+(null!==Sl?"&cursor="+Sl:"");if(Lc){if(!(t=Android.mreadUrl(n,1e4,0,null)))return void(Bl||Gl!==e||ir(e));if(200===(t=JSON.parse(t)).status)return void(Bl||Gl!==e||Wl(t.responseText,e));Bl||Gl!==e||ir(e)}else(t=new XMLHttpRequest).open("GET",n,!0),t.timeout=1e4,t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void(Bl||Gl!==e||Wl(t.responseText,e));Bl||Gl!==e||ir(e)}},t.send(null)}function ir(e){kl++,Gl===e&&(kl<El?ar(e):gl=window.setTimeout(function(){ar(e)},2500))}function or(){Gl=0,dr(_n+la+fn)}function sr(){er(),Jc("chat_frame"),zc("chat_box"),dr(na)}function dr(e){var t="&nbsp;";t+='<span class="message">',t+=la+la+la+la+la+la+la+la+la+la,t+=e,t+="</span>";var n=document.createElement("div");n.className="chat_line",n.innerHTML=t,yl.appendChild(n)}var lr,rr,cr,ur,_r,fr,mr,hr,pr=!0,vr=-1,gr=new Image,yr=1,br=2,wr=3,kr=4,Cr=5,Mr=6,Er=7,Sr=8,Ir=9,Pr=10,xr=11,Lr=12,Tr=13,Br=14,Gr=15,Or=16,Ur=17,Ar=18,Nr=19,Hr=20,Fr=21,Dr=22,Rr="",qr={Main_Go:1,Main_Before:1,Main_BeforeSearch:1,Main_BeforeChannel:1,Main_BeforeAgame:wr,Main_BeforeChannelisSet:!1,Main_BeforeAgameisSet:!1,Main_selectedChannel:"",Main_selectedChannelDisplayname:"",Main_selectedChannelLogo:"",Main_selectedChannel_id:"",Main_gameSelected:"",Main_OldgameSelected:null,Play_isHost:!1,Play_DisplaynameHost:"",Play_selectedChannelDisplayname:"",Play_selectedChannel:"",Play_gameSelected:"",Users_Position:0,Users_AddcodePosition:0,Play_WasPlaying:0,ChannelVod_vodId:"",vodOffset:0,Search_data:"",isLastSChannels:!1,gameSelectedOld:"",Games_return:!1,Search_isSearching:!1,Play_ChatForceDisable:!1,Never_run:!0,Main_CenterLablesVectorPos:0},Vr=!0,Jr=!0,zr=!1,Xr=[],jr=0,Yr=0,Wr=null,Kr=!0,Zr="",$r=!1,Qr="",ec=["label_side_panel","label_extra","label_refresh","label_switch","top_bar_live","top_bar_user","top_bar_featured","top_bar_game","top_bar_vod","top_bar_clip"],tc=0,nc=!0,ac=0,ic=1.35,oc=1.5,sc=45,dc=3,lc=Math.floor(sc/dc/oc),rc=45,cc=5,uc=Math.floor(rc/cc/ic),_c=48,fc=6,mc=Math.floor(_c/fc/oc),hc=6,pc="5seja5ptej058mxqy7gh5tcudjqtm9",vc="Client-ID",gc="Accept",yc="Authorization",bc="OAuth ",wc="application/vnd.twitchtv.v5+json",kc="528x297",Cc="340x475",Mc="stream_thumbnail_focused",Ec="data_attribute",Sc="1.0",Ic="040919",Pc=Sc+"-"+Ic,xc=0,Lc=0,Tc="?"+Math.random(),Bc="https://fgl27.github.io/SmartTwitchTV/release/githubio/images/",Gc=Bc+"404_game.png",Oc=Bc+"404_logo.png",Uc=Bc+"404_video.png",Ac="https://cors-anywhere.herokuapp.com/",Nc=function(e,t,n){e.onerror=function(){this.src=n},e.src=t};function Hc(){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){Fc(window.navigator.userLanguage||window.navigator.language)}):Fc(window.navigator.userLanguage||window.navigator.language)}function Fc(e){u_(),f_(function(){try{Lc=Android.getAndroid()}catch(e){Lc=0,document.body.style.backgroundColor="rgba(0, 0, 0, 1)"}lk(),Ia(),console.log("language is "+e),Sa(),-1!==window.location.href.indexOf("code")&&R_(window.location.href),Dc()})}function Dc(){ly(),Rc(!0),lr=document.getElementById("scrollbar"),Pu(),Rr=qr.Main_Go,f_(function(){mh(),no(),ao()&&(hr=window.setInterval(v_,6e5),v_()),document.body.addEventListener("keyup",Zu,!1),ry(),Ol(),document.getElementById("side_panel").style.marginLeft="",Ou(),qc(),_S=F_("Vod_highlight",!1),jd=F_("ChannelVod_highlight",!1),hs=F_("AGameVod_highlight",!1),EE=F_("UserVod_highlight",!1),lS=N_("vod_periodNumber",2),us=N_("AGameVod_periodNumber",2),wE=N_("UserVod_TypeNumber",1),Kg(),rr=document.getElementById("search_input"),cr=document.getElementById("user_input"),Ru(Uc),Ru(Gc),Ru(Oc),document.addEventListener("visibilitychange",h_,!1),_r=window.setInterval(p_,6e4),dy=Ny,_y(),ur=window.setTimeout(Cu,5e3),zc("topbar")})}function Rc(e){p_(),Vc("label_refresh","icon-refresh",t+Zt),Vc("label_switch","icon-switch",l),Vc("label_side_panel","icon-ellipsis",Rn),Vc("icon_feed_refresh","icon-refresh",t+" Press up"),Kc("top_bar_live",_),Kc("top_bar_user",e?u:a),Kc("top_bar_featured",ln),Kc("top_bar_game",f),Kc("top_bar_vod",nn),Kc("top_bar_clip",N),Wc("scene2_search_text",Ca+n),Wc("scene2_channel_text",Ca+Dt),Wc("scene2_game_text",Ca+zt),Kc("dialog_end_replay_text",on),Kc("dialog_end_vod_text",cn),Kc("dialog_end_channel_text",Dt),Kc("dialog_end_game_text",zt),Wc("dialog_about_text",ga+ya),fr=[le,re,ce,ue],e?nk():(dk(),Ou())}function qc(){Kc("play_dialog_exit_text",V),Kc("side_panel_search",n),Kc("side_panel_settings",a),Kc("side_panel_about",i),Kc("side_panel_controls",e),Kc("side_panel_exit",z),Kc("side_panel_live",_),Kc("side_panel_user",u),Kc("side_panel_featured",ln),Kc("side_panel_games",f),Kc("side_panel_videos",nn),Kc("side_panel_clips",N),Kc("side_panel_hide",o),Kc("chanel_button",S),Kc("game_button",f),Kc("live_button",_),Kc("exit_app_cancel",Y),Kc("exit_app_close",X),Kc("remove_cancel",Y),Kc("remove_yes",Xt),Kc("exit_app_minimize",j),Kc("main_dialog_exit_text",J),Wc("dialog_controls_text",va),Kc("dialog_vod_text",En),Wc("dialog_vod_start_text",In)}function Vc(e,t,n){Wc(e,'<div class="strokedextramini" style="vertical-align: middle; display: inline-block;"><i class="'+t+'" style="color: #FFFFFF; font-size: 115%; "></i></div><div class="strokedextramini" style="vertical-align: middle; display: inline-block">'+Ca+n+"</div>")}function Jc(e){document.getElementById(e).classList.add("hide")}function zc(e){document.getElementById(e).classList.remove("hide")}function Xc(e){return-1===document.getElementById(e).className.indexOf("hide")}function jc(e,t){document.getElementById(e).classList.add(t)}function Yc(e,t){document.getElementById(e).classList.remove(t)}function Wc(e,t){document.getElementById(e).innerHTML=t}function Kc(e,t){document.getElementById(e).textContent=t}function Zc(){Fu(-1),Lc?Android.mshowLoading(!0):zc("dialog_loading")}function $c(){Lc?Android.mshowLoading(!1):Jc("dialog_loading")}function Qc(){window.clearTimeout(Wr)}function eu(){Wr=window.setTimeout(nu,6e3)}function tu(){eu(),zc("main_dialog_exit"),document.body.addEventListener("keydown",E_,!1)}function nu(){document.body.removeEventListener("keydown",E_,!1),L_(mr),Qc(),Jc("main_dialog_exit"),Yr=0,au()}function au(){Yc("exit_app_cancel","button_search_focused"),Yc("exit_app_minimize","button_search_focused"),Yc("exit_app_close","button_search_focused"),jc(Yr?1===Yr?"exit_app_minimize":"exit_app_close":"exit_app_cancel","button_search_focused")}function iu(){Uu("dialog_counter_text"),su(0,0,0)}function ou(e,t,n,a){0<a?(Kc("dialog_counter_text",t*n+(e+1)+"/"+a),su(t,n,a)):iu()}function su(e,t,n){var a=screen.height/100*7;if(3===t&&9<n||5===t&&10<n||6===t&&12<n){var i=qr.Main_Go===kr||qr.Main_Go===Nr||qr.Main_Go===Hr||qr.Main_Go===Lr||qr.Main_Go===Dr||qr.Main_Go===Ur||qr.Main_Go===Ar||qr.Main_Go===Tr,o=Math.ceil((screen.height-3*a)/(Math.ceil(n/t)-1)*e+a*(i?1.8:1));lr.style.top=o+"px",Kr&&(Kr=!1,lr.style.backgroundColor="#777777")}else lr.style.backgroundColor="#000000",lr.style.top=a+"px",Kr=!0}function du(e){(hc=12)/3<e&&(hc=3*e),99<hc&&(hc=99)}function lu(e){Kc("dialog_warning_text",e),zc("dialog_warning")}function ru(){Jc("dialog_warning")}function cu(){hu(),vu(),zc("dialog_about")}function uu(){Jc("dialog_about")}function _u(){return Xc("dialog_about")}function fu(){hu(),vu(),ru(),xu(qr.Main_Go),iu(),ek()}function mu(){uu(),vu(),zc("dialog_controls")}function hu(){Jc("dialog_controls")}function pu(){return Xc("dialog_controls")}function vu(){Jc("dialog_update")}function gu(e){return(e+"").replace(/\B(?=(\d{3})+(?!\d))/g,",")}function yu(e,t,n){return(e+="").indexOf("x")||(e=e.slice(-3)),e+"p"+(t=58<t?60:t<32?30:Math.ceil(t))+(""!==n?" ["+n.toUpperCase()+"]":"")}function bu(e){return-1!==e.indexOf("live")?"":W}function wu(e,t,n){return null!==document.getElementById(n+e+"_"+t,0)}function ku(){p_(),Eu(),document.body.addEventListener("keyup",Zu,!1)}function Cu(){for(var e,t=0;t<ec.length;t++)t<4?document.getElementById(ec[t]).style.opacity="0.5":-1===(e=document.getElementById(ec[t])).className.indexOf("icon_center_focus")&&(e.style.opacity="0.5");jc("topbar","topbar_dim")}function Mu(){for(var e=0;e<ec.length;e++)document.getElementById(ec[e]).style.opacity="1";Yc("topbar","topbar_dim")}function Eu(e){window.clearTimeout(ur),Mu(),qr.Main_Go!==xr&&(qr.Main_BeforeChannelisSet=!1),qr.Main_Go!==kr&&(qr.Main_BeforeAgameisSet=!1),f_(function(){Su(e)})}function Su(e){iu(),qr.Main_Go===yr?(dy=Ny,_y()):qr.Main_Go===br?zi():qr.Main_Go===wr?(dy=Uy,_y()):qr.Main_Go===kr?Lo():qr.Main_Go===Sr?rw():qr.Main_Go===Ir?Yb():qr.Main_Go===Pr?Uw():qr.Main_Go===xr?nd():qr.Main_Go===Lr?el():qr.Main_Go===Tr?(dy=Gy,_y()):qr.Main_Go===Br?VM():qr.Main_Go===Cr?gM():qr.Main_Go===Mr?_C():qr.Main_Go===Er?(dy=Ay,_y()):qr.Main_Go===Gr?Ak():qr.Main_Go===Or?bb():qr.Main_Go===Ur?hS():qr.Main_Go===Ar?(dy=By,_y()):qr.Main_Go===Nr?vs():qr.Main_Go===Hr?(dy=Oy,_y()):qr.Main_Go===Fr?(dy=Hy,_y()):qr.Main_Go===Dr&&SE(),ur=window.setTimeout(Cu,3e3),e&&O_()}function Iu(){A_("Main_values",JSON.stringify(qr))}function Pu(){qr=uy(qr,H_("Main_values",{}))}function xu(e){e===yr?fy():e===br?Xi():e===wr?fy():e===kr?To():e===Sr?cw():e===Ir?Wb():e===Pr?Aw():e===xr?ad():e===Lr?tl():e===Tr?fy():e===Br?JM():e===Cr?yM():e===Mr?fC():e===Er?fy():e===Gr?Nk():e===Or?wb():e===Ur?pS():e===Ar?fy():e===Nr?gs():e===Hr?fy():e===Fr?fy():e===Dr&&IE(),Xc("settings_scroll")&&tk()}function Lu(){Vc("label_refresh","icon-refresh",t+Zt),Vc("label_side_panel","icon-ellipsis",Rn),Jc("label_switch"),Yc("top_bar_user","icon_center_focus"),Kc("top_bar_live",_),Kc("top_bar_user",u),Kc("top_bar_featured",ln),Kc("top_bar_game",f),Kc("top_bar_vod",nn),Kc("top_bar_clip",N)}function Tu(){Vc("label_side_panel","icon-arrow-circle-left",P),Uu("top_bar_live"),Uu("top_bar_game"),Uu("top_bar_vod"),Uu("top_bar_clip"),Uu("top_bar_featured"),jc("top_bar_user","icon_center_focus")}function Bu(e){return'<div style="font-size: 30%; position: fixed; line-height: 0; text-shadow: #000000 0 0 5.7px, #000000 0 0 5.7px, #000000 0 0 4px">'+e+"</div>"}function Gu(e){return e=new Date(e),$r?e.getDate()+" "+$t[e.getMonth()]+", "+e.getFullYear():$t[e.getMonth()]+" "+e.getDate()+", "+e.getFullYear()}function Ou(){Wc("dialog_about_text",ga+be+Pc+ya)}function Uu(e){for(e=document.getElementById(e);e.firstChild;)e.removeChild(e.firstChild)}function Au(e){for(var t,n=0;n<Xr.length;n++)null!==(t=document.getElementById(Xr[n].id))&&Nc(t,Xr[n].src+Tc,e)}function Nu(){Xr=[]}function Hu(e,t){Xr.push({id:e,src:t})}function Fu(e){vr=e}function Du(e){var t=0;return vr<e?t=-1:e<vr&&(t=1),vr=e,t}function Ru(e){gr.src=e}function qu(e){return(Zr=document.createElement("td")).setAttribute("id",e),Zr.className="stream_cell",Zr}function Vu(e,t,n){return(Zr=document.createElement("td")).setAttribute("id",t[4]+e),Zr.setAttribute(Ec,n[0]),Zr.setAttribute("data-id",n[1]),Zr.className="stream_cell",Zr.innerHTML=zu(e,t,n),Zr}function Ju(e,t,n){var a=document.getElementById(e),i=e.split(n[5])[1];a.setAttribute(Ec,t[0]),a.setAttribute("data-id",t[1]),a.innerHTML=zu(i,n,t),a.setAttribute("id",n[4]+i)}function zu(e,t,n){return Hu(t[1]+e,n[2]),'<div id="'+t[0]+e+'" class="stream_thumbnail_channel" ><img id="'+t[1]+e+'" class="stream_img"></div><div id="'+t[2]+e+'" class="stream_text"><div id="'+t[3]+e+'" class="stream_channel">'+n[3]+"</div></div>"}function Xu(e,t,n,a,i){return e<dc&&Ru(i[0]),(Zr=document.createElement("td")).setAttribute("id",a[8]+t),Zr.setAttribute(Ec,JSON.stringify(n)),Zr.className="stream_cell",Zr.innerHTML=Yu(t,a,i),Zr}function ju(e,t,n,a){var i=document.getElementById(e),o=e.split(a[9])[1];i.setAttribute(Ec,JSON.stringify(t)),i.innerHTML=Yu(o,a,n),i.setAttribute("id",a[8]+o)}function Yu(e,t,n){return Hu(t[1]+e,n[0]),'<div id="'+t[0]+e+'" class="stream_thumbnail_video" ><img id="'+t[1]+e+'" class="stream_img"></div><div id="'+t[2]+e+'" class="stream_text"><div id="'+t[3]+e+'" class="stream_channel" style="width: 66%; display: inline-block;">'+n[1]+'</div><div id="'+t[7]+e+'"class="stream_info" style="width:33%; float: right; text-align: right; display: inline-block;">'+n[5]+'</div><div id="'+t[4]+e+'"class="stream_info">'+bk.parse(n[2])+'</div><div id="'+t[5]+e+'"class="stream_info">'+v+n[3]+'</div><div id="'+t[6]+e+'"class="stream_info">'+n[4]+"</div></div>"}function Wu(e,t,n){return(Zr=document.createElement("td")).setAttribute("id",t[5]+e),Zr.setAttribute(Ec,n[0]),Zr.className="stream_cell",Zr.innerHTML=Ku(e,t,n),Zr}function Ku(e,t,n){return Hu(t[1]+e,n[1]),'<div id="'+t[0]+e+'" class="stream_thumbnail_game" ><img id="'+t[1]+e+'" class="stream_img"></div><div id="'+t[2]+e+'" class="stream_text"><div id="'+t[3]+e+'" class="stream_channel">'+n[0]+'</div><div id="'+t[4]+e+'"class="stream_info_games" style="width: 100%; display: inline-block;">'+n[2]+"</div></div>"}function Zu(){Jr=!0}function $u(){Vr=!0}function Qu(){Vr=!1,window.setTimeout($u)}function e_(){return!Vr||!Jr}function t_(e,t,n,a,i){jc(n[0]+e+"_"+t,Mc),ou(t,e,a,i),Du(e)?1<e?wu(e+1,0,n[0])?r_(n[6],-1*document.getElementById(n[4]+e+"_"+t).offsetTop+.42*screen.height):Zu():r_(n[6],.07*screen.height):Zu()}function n_(e,t,n,a,i){jc(n[0]+e+"_"+t,Mc),ou(t,e,a,i),Du(e)?e?wu(e+1,0,n[0])&&r_(n[10],-1*document.getElementById(n[8]+(e-1)+"_"+t).offsetTop):r_(n[10],.07*screen.height):Zu()}function a_(e,t,n,a,i){jc(n[0]+e+"_"+t,Mc),ou(t,e,a,i),Du(e)?r_(n[10]?n[10]:n[7],e?-1*document.getElementById(n[5]+(e-1)+"_"+t).offsetTop+.025*screen.height:-1*document.getElementById(n[5]+e+"_"+t).offsetTop+.025*screen.height):Zu()}function i_(e,t,n){document.body.removeEventListener("keydown",n),qr.Play_selectedChannel=JSON.parse(document.getElementById(t[8]+e).getAttribute(Ec)),qr.Play_selectedChannel_id=qr.Play_selectedChannel[1],qr.Play_selectedChannel=qr.Play_selectedChannel[0],qr.Main_Go===Mr?(qr.Play_DisplaynameHost=document.getElementById(t[3]+e).textContent,qr.Play_selectedChannelDisplayname=qr.Play_DisplaynameHost.split(ae)[1],qr.Play_isHost=!0):qr.Play_selectedChannelDisplayname=document.getElementById(t[3]+e).textContent,qr.Play_gameSelected=document.getElementById(t[5]+e).textContent.split(v)[1],qr.Main_Go===kr&&(qr.Main_OldgameSelected=qr.Main_gameSelected),o_()}function o_(){document.body.addEventListener("keydown",gv,!1),Jc("scene1"),zc("scene2"),vp(),Mp(),Rp(),f_(vh)}function s_(e,t,n){document.body.removeEventListener("keydown",n),Vy=JSON.parse(document.getElementById(t[8]+e).getAttribute(Ec)),mf=parseInt(Vy[1]),qr.Play_gameSelected=Vy[2],qr.Main_selectedChannel=Vy[3],qr.Main_selectedChannelDisplayname=Vy[4],qr.Main_selectedChannelLogo=Vy[5],qr.Main_selectedChannel_id=Vy[6],qr.ChannelVod_vodId=Vy[7],Qd=parseInt(Vy[8]),qy=Vy[9],zy=Vy[10],Dy=Vy[11],Vy=Vy[0],Jy=document.getElementById(t[4]+e).textContent,Ry=document.getElementById(t[6]+e).textContent,document.body.addEventListener("keydown",Nf,!1),Jc("scene1"),zc("scene2"),Mp(),fp(),sp(),rp(),f_(hf)}function d_(e,t,n){document.body.removeEventListener("keydown",n),qr.ChannelVod_vodId=JSON.parse(document.getElementById(t[8]+e).getAttribute(Ec)),Dd=parseInt(qr.ChannelVod_vodId[1]),Vd=qr.ChannelVod_vodId[2],qr.Play_gameSelected=qr.ChannelVod_vodId[3],qr.Main_selectedChannel=qr.ChannelVod_vodId[4],sh=qr.ChannelVod_vodId[5],qr.ChannelVod_vodId=qr.ChannelVod_vodId[0].substr(1),qr.Main_Go===Lr?Wd=document.getElementById(t[3]+e).innerHTML:(Wd="",qr.Main_selectedChannelDisplayname=document.getElementById(t[3]+e).textContent),Zd=document.getElementById(t[4]+e).textContent,$d=document.getElementById(t[5]+e).textContent,Kd=document.getElementById(t[11]+e).innerHTML+", "+document.getElementById(t[6]+e).textContent,l_()}function l_(){document.body.addEventListener("keydown",sy,!1),Jc("scene1"),zc("scene2"),Og(),Mp(),fp(),rp(),tg=!1,f_(lg)}function r_(e,t){document.getElementById(e).style.top=t+"px",window.setTimeout(Zu,10)}function c_(e,t){Jr=!1,Yc(t[0]+e,Mc)}function u_(){var e=document.createElement("span");e.className="fa",e.style.display="none",document.body.insertBefore(e,document.body.firstChild),"icons"!==window.getComputedStyle(e,null).getPropertyValue("font-family")?(pr||console.log("Main_Checktylesheet reloading"),__("https://fgl27.github.io/SmartTwitchTV/release/githubio/css/icons.min.css")):pr||console.log("Main_Checktylesheet loaded OK"),document.body.removeChild(e)}function __(e){var t=document.createElement("link");t.rel="stylesheet",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)}function f_(e){"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?window.setTimeout(e):document.addEventListener("DOMContentLoaded",e)}function m_(){var e=(new Date).getTime()+xc;return e=new Date(e),($r?Qt[e.getDay()]+" "+e.getDate()+"/"+$t[e.getMonth()]:Qt[e.getDay()]+" "+$t[e.getMonth()]+"/"+e.getDate())+" "+jh(e.getHours())+":"+jh(e.getMinutes())}function h_(){document.hidden||(p_(),window.setTimeout(p_,2e4))}function p_(){document.hidden||(Kc("label_clock",m_()),Tc="?"+Math.random())}function v_(){document.hidden||!ao()||Vp()||SC||(im=Ri[qr.Users_Position].name,RC())}function g_(){jc("side_panel_"+ac,"side_panel_text_focus")}function y_(){Yc("side_panel_"+ac,"side_panel_text_focus")}function b_(){ac?1===ac?fu():2===ac?(document.body.addEventListener("keydown",mr,!1),cu()):3===ac?(document.body.addEventListener("keydown",mr,!1),mu()):4===ac?tu(mr):5===ac?w_(yr):6===ac?w_(co()?Br:br):7===ac?w_(Fr):8===ac?w_(wr):9===ac?w_(Ur):10===ac&&w_(Ar):qr.Main_Go!==Sr?(qr.Search_isSearching||qr.Main_Go!==xr&&qr.Main_Go!==Tr&&qr.Main_Go!==Lr||Ed(),qr.Main_BeforeSearch=qr.Main_Go,qr.Main_Go=Sr,xu(qr.Main_BeforeSearch),Eu()):document.body.addEventListener("keydown",mr,!1),C_()}function w_(e){e===qr.Main_Go?document.body.addEventListener("keydown",mr,!1):(qr.Main_Before=qr.Main_Go,qr.Main_Go=e,xu(qr.Main_Before),Eu())}function k_(e){mr=e,document.body.removeEventListener("keydown",mr),document.body.addEventListener("keydown",M_,!1),Yc("side_panel","side_panel_hide")}function C_(){document.body.removeEventListener("keydown",M_),jc("side_panel","side_panel_hide"),y_(),ac=0,g_()}function M_(e){switch(e.keyCode){case Aa:case Ta:document.body.addEventListener("keydown",mr,!1),C_(),B_();break;case Ba:ac&&(y_(),ac--,g_());break;case Oa:ac<10&&(y_(),ac++,g_());break;case Ua:b_()}}function E_(e){switch(e.keyCode){case Aa:nu();break;case Ga:2<++Yr&&(Yr=0),au(),Qc(),eu();break;case Ta:--Yr<0&&(Yr=2),au(),Qc(),eu();break;case Ua:Yr?Lc&&1===Yr?Android.mclose(!1):Lc&&2===Yr&&Android.mclose(!0):nu()}}Hc();var S_=["top_bar_live","top_bar_user","top_bar_featured","top_bar_game","top_bar_vod","top_bar_clip"],I_=[yr,Br,Fr,wr,Ur,Ar],P_=!1;function x_(e){if(!(P_||dy.FirstLoad||e_()))switch(e.keyCode){case Aa:pu()?(B_(),hu()):_u()?(B_(),uu()):qr.Main_Go===kr?(qr.Main_OldgameSelected=qr.Main_gameSelected,qr.Games_return?(qr.Main_Go=Ir,qr.Main_gameSelected=qr.gameSelectedOld):(qr.Main_Go=qr.Main_BeforeAgame,qr.Main_BeforeAgame=yr),To(),T_(),Su()):qr.Main_Go===Hr?(Py(kr),T_(),Su()):qr.Main_Go===Er?(Py(Br),T_(),Su()):qr.Main_Go===Tr?(Py(xr),T_(),Su()):qr.Main_Go===Nr?(qr.Main_Go=kr,gs(),T_(),Su()):qr.Main_Go===Cr?(qr.Main_Go=Br,yM(),T_(),Su()):qr.Main_Go===Mr?(qr.Main_Go=Br,fC(),T_(),Su()):qr.Main_Go===Dr?(qr.Main_Go=Br,IE(),T_(),Su()):qr.Main_Go===Gr?(qr.Main_Go=Br,Nk(),T_(),Su()):qr.Main_Go===xr?(qr.Main_Go=qr.Main_BeforeChannel,qr.Main_BeforeChannel=yr,ad(),qr.Main_selectedChannel_id="",T_(),Su()):qr.Main_Go===Lr?(qr.Main_Go=xr,tl(),T_(),Su()):qr.Main_Go===Pr?(qr.Main_Go===qr.Main_BeforeSearch?qr.Main_Go=yr:qr.Main_Go=qr.Main_BeforeSearch,Aw(),qr.Search_isSearching=!1,T_(),Su()):qr.Main_Go===Ir?(qr.Main_Go===qr.Main_BeforeSearch?qr.Main_Go=yr:qr.Main_Go=qr.Main_BeforeSearch,qr.Search_isSearching=!1,Wb(),T_(),Su()):qr.Main_Go===Or?(qr.Main_Go===qr.Main_BeforeSearch?qr.Main_Go=yr:qr.Main_Go=qr.Main_BeforeSearch,qr.Main_selectedChannel_id&&Sd(),wb(),qr.Search_isSearching=!1,T_(),Su()):(T_(),k_(x_));break;case Ga:if(qr.Search_isSearching||qr.Main_Go===xr||qr.Main_Go===Lr||qr.Main_Go===Tr||qr.Main_Go===Pr||qr.Main_Go===Ir||qr.Main_Go===Or)break;Yc(S_[qr.Main_CenterLablesVectorPos],"icon_center_line"),qr.Main_CenterLablesVectorPos++,5<qr.Main_CenterLablesVectorPos&&(qr.Main_CenterLablesVectorPos=0),B_(),G_();break;case Ta:if(qr.Search_isSearching||qr.Main_Go===xr||qr.Main_Go===Lr||qr.Main_Go===Tr||qr.Main_Go===Pr||qr.Main_Go===Ir||qr.Main_Go===Or)break;Yc(S_[qr.Main_CenterLablesVectorPos],"icon_center_line"),qr.Main_CenterLablesVectorPos--,qr.Main_CenterLablesVectorPos<0&&(qr.Main_CenterLablesVectorPos=5),B_(),G_();break;case Oa:Yc(S_[qr.Main_CenterLablesVectorPos],"icon_center_line"),document.body.removeEventListener("keydown",x_),zr=!1,Su();break;case Ua:U_()}}function L_(e){window.clearTimeout(ur),Mu(),document.body.removeEventListener("keydown",e),document.body.removeEventListener("keydown",x_),document.body.addEventListener("keydown",x_,!1),B_()}function T_(){Yc(S_[qr.Main_CenterLablesVectorPos],"icon_center_line"),document.body.removeEventListener("keydown",x_),zr=!1}function B_(){zr=!0,jc(S_[qr.Main_CenterLablesVectorPos],"icon_center_line")}function G_(){xu(qr.Main_Go),qr.Main_Go=I_[qr.Main_CenterLablesVectorPos],qr.Main_Go!==Br||co()?Eu(!0):(qr.Main_Go=br,T_(),Eu())}function O_(){qr.Main_Go===yr?(dy=Ny,document.body.removeEventListener("keydown",Ty)):qr.Main_Go===Br?document.body.removeEventListener("keydown",oE):qr.Main_Go===kr?document.body.removeEventListener("keydown",Wo):qr.Main_Go===Fr?(dy=Hy,document.body.removeEventListener("keydown",Ty)):qr.Main_Go===Pr?document.body.removeEventListener("keydown",Yw):qr.Main_Go===Ir?document.body.removeEventListener("keydown",ow):qr.Main_Go===Or?document.body.removeEventListener("keydown",Ob):qr.Main_Go===Lr?document.body.removeEventListener("keydown",hl):qr.Main_Go===xr?document.body.removeEventListener("keydown",Id):qr.Main_Go===Mr?document.body.removeEventListener("keydown",EC):qr.Main_Go===Dr?document.body.removeEventListener("keydown",JE):qr.Main_Go===Gr?document.body.removeEventListener("keydown",Yk):qr.Main_Go===wr?(dy=Uy,document.body.removeEventListener("keydown",Ty)):qr.Main_Go===Tr?(dy=Gy,document.body.removeEventListener("keydown",Ty)):qr.Main_Go===Ur?document.body.removeEventListener("keydown",US):qr.Main_Go===Ar?(dy=By,document.body.removeEventListener("keydown",Ty)):qr.Main_Go===Hr?(dy=Oy,document.body.removeEventListener("keydown",Ty)):qr.Main_Go===Er?(dy=Ay,document.body.removeEventListener("keydown",Ty)):qr.Main_Go===Nr?document.body.removeEventListener("keydown",Bs):qr.Main_Go===Cr&&document.body.removeEventListener("keydown",OM)}function U_(){window.clearTimeout(ur),Mu(),qr.Main_Go!==xr&&(qr.Main_BeforeChannelisSet=!1),qr.Main_Go!==kr&&(qr.Main_BeforeAgameisSet=!1),iu(),qr.Main_Go===yr?(dy=Ny,my()):qr.Main_Go===Br?zM():qr.Main_Go===Fr?(dy=Hy,my()):qr.Main_Go===kr?Bo():qr.Main_Go===Gr?Hk():qr.Main_Go===xr?id():qr.Main_Go===Lr?nl():qr.Main_Go===Pr?Nw():qr.Main_Go===Ir?Kb():qr.Main_Go===Or?kb():qr.Main_Go===wr?(dy=Uy,my()):qr.Main_Go===Er?(dy=Ay).loadingData||dy.key_refresh():qr.Main_Go===Ur?vS():qr.Main_Go===Ar?(dy=By,my()):qr.Main_Go===Hr?(dy=Oy,my()):qr.Main_Go===Tr?(dy=Gy,my()):qr.Main_Go===Nr?ys():qr.Main_Go===Cr?bM():qr.Main_Go===Mr?mC():qr.Main_Go===Dr&&PE(),ur=window.setTimeout(Cu,3e3)}function A_(e,t){localStorage.setItem(e,t)}function N_(e,t){return parseInt(localStorage.getItem(e))||t}function H_(e,t){return JSON.parse(localStorage.getItem(e))||t}function F_(e,t){var n=t.toString();return(localStorage.getItem(e)||n)===n?t:!t}function D_(e){console.log(e);for(var t=0;t<e.length;t++)console.log("Character is: "+e.charAt(t)+" it's Unicode is: \\u"+e.charCodeAt(t).toString(16).toUpperCase())}function R_(e){console.log("processCode");var t="";t=e.match(/code=(\w+)/),jr=t?(t=t[1],console.log("if code "+t),t):(console.log("else code "+t),0)}function q_(e,t,n,a,i,o,s){var d;if(Lc){if(!(d=Android.mreadUrl(e,t,n,a)))return void o();200===(d=JSON.parse(d)).status?i(d.responseText):o()}else(d=new XMLHttpRequest).open("GET",(s?Ac:"")+e,!0),d.timeout=t,0<n&&d.setRequestHeader(vc,pc),1<n&&d.setRequestHeader(gc,wc),2<n&&d.setRequestHeader(yc,a),d.ontimeout=function(){},d.onreadystatechange=function(){if(4===d.readyState){if(200===d.status)return void i(d.responseText);o()}},d.send(null)}var V_=0,J_=null,z_=0,X_=!1,j_=0,Y_=0,W_=!1,K_=0,Z_=2e3,$_=5,Q_="source",ef=Q_,tf=0,nf=[],af="",of=!1,sf=0,df=0,lf=1,rf=!1,cf=0,uf=!1,_f=!1,ff=[0,5],mf=0;function hf(){ap(),Rp(),Ih(document.getElementById("stream_info_icon"),qr.Main_selectedChannelLogo),Kc("stream_info_name",qr.Main_selectedChannelDisplayname),Wc("stream_info_title",qy),Wc("stream_info_game",Dy+", "+Ry+", "+zy),Kc("stream_live_icon",Jy),Kc("progress_bar_duration",Yh(mf)),Xg((dh=ff)[1]),qr.Play_isHost=!1,Kc("progress_bar_current_time",Yh(0)),Kc("stream_live_time",""),Kc("stream_watching_time",""),rf=null!==qr.ChannelVod_vodId,Pl=Ft+".",rf?(Il=Qd,Ul()):or(),Wc("pause_button",'<i class="strokedbig icon-pause" style="color: #FFFFFF; font-size: 180%;"></i>'),zc("progress_pause_holder"),Uf(),Km=0,zc("scene_channel_panel_bottom"),zc("chat_box"),Jc("chat_frame"),z_=cf=0,window.clearInterval(J_),_f=!1,Zf=-13,sf=df=0,tf=2,av(3),Hm=!1,Ap(),ao()?(Ya=!0,Wa=qr.Main_selectedChannel_id,ci()):np(),document.addEventListener("visibilitychange",Cf,!1),X_=!1,W_=!(Y_=j_=0),pf(),document.body.removeEventListener("keyup",Zu)}function pf(){K_=0,Z_=2e3,vf()}function vf(){q_("https://clips.twitch.tv/api/v2/clips/"+Vy+"/status",Z_,1,null,yf,gf,!0)}function gf(){++K_<$_?(Z_+=250,vf()):(ip(),Play_PannelEndStart(3))}function yf(e){nf=[],e=JSON.parse(e).quality_options;for(var t=0;t<e.length;t++)nf.length?nf.push({id:e[t].quality+"p"+bf(e[t].frame_rate),url:e[t].source}):nf.push({id:e[t].quality+"p"+bf(e[t].frame_rate)+" (source)",url:e[t].source});df=lf,wf()}function bf(e){return 40<e?60:""}function wf(){window.clearInterval(J_),af=nf[tf=0].url,-1!==Q_.indexOf("source")&&(Q_="source");for(var e=0;e<Bf();e++){if(nf[e].id===Q_){af=nf[tf=e].url;break}-1!==nf[e].id.indexOf(Q_)&&(af=nf[tf=e].url)}ef=Q_,pr||console.log("PlayClip_onPlayer:",'\n\n"'+af+'"\n'),df=lf,Lc&&W_&&Android.startVideoOffset(af,3,of?-1:Android.gettime()),of=!1,kf()}function kf(){vm&&!Ep()&&Cp(),Lc&&(z_=0,uf=!(ah=4),window.clearInterval(J_),J_=window.setInterval(Mf,ih))}function Cf(){document.hidden&&Sf()}function Mf(){Lc&&(sf=Android.gettime()),W_&&V_===sf&&!zh()?++z_>ah&&(uf&&_f&&tf<Bf()-1?tf++:!uf&&_f&&cf++,navigator.onLine?1<cf?Jh(cf,3,Ef):(Gf(),wf(),_f=!0):Vh(!1,3)):(z_=cf=0,_f=!1),V_=sf}function Ef(e){if(!e){if(!(tf<Bf()-1))return void Vh(!1,3);tf++}cf=0,Gf(),wf(),_f=!0}function Sf(){W_&&(nf=[],If(),rp(),Qh())}function If(){window.clearInterval(J_),Lc&&Android.stopVideo(3),W_=!1,er(),ep(),zp(),document.body.removeEventListener("keydown",Nf),document.removeEventListener("visibilitychange",Cf),Pf(),document.getElementById("scene2_pannel_0").style.display="none",document.getElementById("scene2_pannel_1").style.width="30%",document.getElementById("quality_name").style.width="77%",document.getElementById("quality_name").style.fontSize="87.5%",Qd=0}function Pf(){jv=!1,Xv=Yv=0,bp(),Q_=ef,document.getElementById("scene_channel_panel").style.opacity="0",Lc&&Vg(Android.gettime()/1e3,mf,!0),Wc("progress_bar_jump_to",Ca),document.getElementById("progress_bar_steps").style.display="none",window.clearInterval(wv)}function xf(){Lf(),Xh(),wv=window.setInterval(Lf,1e3),rp(),Ng(),Tf(),Gf(),document.getElementById("scene_channel_panel").style.opacity="1",Of()}function Lf(){Lc&&Vg(Android.gettime()/1e3,mf,!jv)}function Tf(){for(var e=tf=0;e<Bf();e++){if(nf[e].id===Q_){tf=e;break}-1!==nf[e].id.indexOf(Q_)&&(tf=e)}}function Bf(){return nf.length}function Gf(){1===Bf()?(document.getElementById("quality_arrow_up").style.opacity="0",document.getElementById("quality_arrow_down").style.opacity="0"):tf?tf===Bf()-1?(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="0.2"):(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="1"):(document.getElementById("quality_arrow_up").style.opacity="0.2",document.getElementById("quality_arrow_down").style.opacity="1"),-1!==(Q_=nf[tf].id).indexOf("source")?Kc("quality_name",Q_.replace("source",ye)):Kc("quality_name",Q_)}function Of(){em=window.setTimeout(Pf,5e3+ng)}function Uf(){document.getElementById("scene2_pannel_1").style.width="18%",document.getElementById("quality_name").style.width="60%",document.getElementById("quality_name").style.fontSize="72%",Kc("open_vod_text",rf?cn:un),document.getElementById("scene2_pannel_0").style.display="inline-block"}function Af(){rf?(qr.vodOffset=Qd,If(),document.body.addEventListener("keydown",sy,!1),Ap(),f_(lg)):(Hm=!0,op(_n),window.setTimeout(function(){Hm=!1,sp()},2e3))}function Nf(e){if(df!==lf)switch(e.keyCode){case Aa:cp()?(rp(),Sf()):lp()}else switch(e.keyCode){case Ta:Vp()?om&&(Kp(),om--,Yp()):am&&!pp()&&Ep()?(Wf++,Bp()):pp()?(bp(),eg?(Hp(),5<++Nm&&(Nm=0),Np()):(Yg(-1,mf),ng=2500),Of()):qp()?(tv(),Qp(),--Vm<0&&(Vm=3),$p()):xf();break;case Ga:Vp()?om<TC-1&&(Kp(),om++,Yp()):!am||pp()||qp()?pp()?(bp(),eg?(Hp(),--Nm<0&&(Nm=5),Np()):(Yg(1,mf),ng=2500),Of()):qp()?(tv(),Qp(),3<++Vm&&(Vm=0),$p()):xf():A_("ChatEnable",(vm=Ep()||qp()?(Mp(),!1):(Cp(),!0))?"true":"false");break;case Ba:qp()?tv():pp()?(2===eg&&1!==Nm?(eg--,Hg()):1===eg?(eg--,Hg()):0<tf&&1===Nm&&(tf--,Gf()),bp(),Of()):Vp()?Vp()?jp():xf():Jp();break;case Oa:qp()?tv():pp()?(eg?1===eg?(eg++,Hg()):tf<Bf()-1&&1===Nm&&(tf++,Gf()):(eg++,Hg()),bp(),Of()):Vp()?zp():am&&Ep()?(4<++Qf?Tp(!(Qf=1)):4===Qf&&Tp(!0),xp(!0)):xf();break;case Ua:qp()?nv(3):pp()?eg?1===eg?(rf&&qr.Play_ChatForceDisable&&(zh()?$l(Gl):Ql()),qp()||Up(3)):lv(3):(bp(),Of(),Xv&&Jg()):Vp()?(If(),i_(om,DC,gv)):xf();break;case Aa:pp()?Pf():Vp()?zp():cp()?(rp(),Sf()):lp();break;case xa:case Pa:case La:rf&&!qr.Play_ChatForceDisable&&(zh()?$l(Gl):Ql()),qp()||Up(3)}}var Hf,Ff,Df,Rf,qf,Vf,Jf,zf,Xf,jf,Yf,Wf=0,Kf=Wf,Zf=-5,$f=.55,Qf=3,em=null,tm="source",nm=tm,am=!0,im="",om=0,sm=0,dm=1,lm=2,rm=0,cm=null,um=0,_m=0,fm=0,mm="",hm=[],pm=0,vm=!1,gm=null,ym=null,bm=null,wm="",km=0,Cm=5,Mm=0,Em=5,Sm=0,Im=!1,Pm=null,xm=!1,Lm=0,Tm=null,Bm=0,Gm=0,Om=!1,Um=!1,Am=!1,Nm=1,Hm=!1,Fm=!1,Dm=1e4,Rm=2e3,qm="",Vm=0,Jm=3,zm=null,Xm="",jm=0,Ym=0,Wm=0,Km=0,Zm="",$m=!0,Qm=!1,eh=!1,th=0,nh=!1,ah=4,ih=1500,oh=0,sh="",dh=[],lh=[{top:51.8,left:75.1,sizeOffset:[31,16,0,0]},{top:33,left:75.1,sizeOffset:[12.5,0,-6.25,0]},{top:.2,left:75.1,sizeOffset:[0,0,0,0]},{top:.2,left:38.3,sizeOffset:[0,0,0,0]},{top:.2,left:.2,sizeOffset:[0,0,0,0]},{top:33,left:.2,sizeOffset:[12.5,0,-6.25,0]},{top:51.8,left:.2,sizeOffset:[31,16,0,0]},{top:51.8,left:38.3,sizeOffset:[31,16,0,0]}],rh=[0,0,0,1,2,2,2,1],ch=[[0,1,2,2,2,1,0,0],[7,3,3,3,3,3,7,7],[6,5,4,4,4,5,6,6]],uh=[{containerHeight:17,percentage:"12.5%",dialogTop:15},{containerHeight:32,percentage:"25%",dialogTop:30},{containerHeight:48,percentage:"50%",dialogTop:50},{containerHeight:99.6,percentage:"100%",dialogTop:115}],_h=1,fh=["chat_extra_small","chat_size_small","chat_size_default","chat_size_biger","chat_size_bigest"];function mh(){Jf=document.getElementById("chat_frame"),Xf=document.getElementById("chat_container"),Yf=document.getElementById("inner_progress_bar"),Wf=N_("ChatPositionsValue",0),Qf=N_("ChatSizeValue",3),vm=F_("ChatEnable",!1),am=F_("Play_isFullScreen",!0),xp(!1),Lp(!1),ph()}function hh(e){e?void 0!==Hf&&(Wf=Hf,Qf=Df,(vm=Ff)||Mp(),xp(!1)):(Hf=Wf,Ff=vm,Df=Qf,Wf=0,Cp(),Qf=4,Tp(vm=!0),xp(!1),yl&&(yl.scrollTop=yl.scrollHeight)),A_("Play_isFullScreen",am)}function ph(){_h=uk("chat_font_size");for(var e=0;e<fh.length;e++)Yc("chat_inner_container",fh[e]);jc("chat_inner_container",fh[_h])}function vh(){ap(),Wc("stream_live_icon",'<div style="vertical-align: middle; display: inline-block"><i class="icon-circle" style="color: red; font-size: 105%; "></i></div><div style="vertical-align: middle; display: inline-block">'+Ca+_.toUpperCase()+"</div>"),Uu("stream_info_title"),rf=!(Fm=!1),Ih(document.getElementById("stream_info_icon"),Oc),qr.Play_isHost?Kc("stream_info_name",qr.Play_DisplaynameHost):Kc("stream_info_name",qr.Play_selectedChannelDisplayname),qr.Play_WasPlaying=1,Iu(),Rf=qr.Play_isHost,qr.Play_isHost=!1,Qm=!1,zc("scene_channel_panel_bottom"),Kc("stream_watching_time",g+Yh(Km=0)),wm=Wh(0),Kc("stream_live_time",y+wm+b),Jc("chat_box"),zc("chat_frame"),Jc("progress_pause_holder"),av(1),Zf=-5,Bm=Gm=oh=0,window.clearInterval(Tm),eh=Um=!1,jm=0,Ym=Date.now(),Dm=3e3,$m=!(Mm=Wm=0),rm=sm,Am=!(Im=!(fm=_m=um=xm=0)),document.addEventListener("visibilitychange",yh,!1),wh(),Ph(),document.body.removeEventListener("keyup",Zu),cm=window.setInterval(Mh,6e4)}function gh(e){op(e)}function Play_CheckResume(){Im&&yh(),Uv&&vg(),W_&&(Sf(),window.clearInterval(J_))}function yh(){document.hidden?qp()?(rp(),Mp(),Zh()):(ep(),Am=!1,Jf.src="about:blank",window.clearInterval(cm),Wm=Date.now()):(Im=!0,fp(),Im&&(Dm=3e3,Qm=!(Mm=0),Wm=Date.now()-Wm,Fm?Mh():wh(),rm=sm,Sm=0,navigator.onLine?Ph():Vf=window.setInterval(bh,100),cm=window.setInterval(Mh,6e4)))}function bh(){(navigator.onLine||200<Sm)&&(window.clearInterval(Vf),Ph()),Sm++}function wh(){var e="https://api.twitch.tv/kraken/streams/"+qr.Play_selectedChannel_id,t=new XMLHttpRequest;t.open("GET",e,!0),t.timeout=Dm,t.setRequestHeader(gc,wc),t.setRequestHeader(vc,pc),t.ontimeout=function(){},t.onreadystatechange=function(){4===t.readyState&&(200===t.status?kh(JSON.parse(t.responseText)):Ch())},t.send(null)}function kh(e){null!==e.stream&&(Kc("stream_info_name",Rf?qr.Play_DisplaynameHost:qr.Play_selectedChannelDisplayname),qr.Play_selectedChannel_id=e.stream.channel._id,Wc("stream_info_title",bk.parse(e.stream.channel.status)),qr.Play_gameSelected=e.stream.game,qm=", ["+e.stream.channel.language.toUpperCase()+"]",Kc("stream_info_game",v+qr.Play_gameSelected+h+gu(e.stream.viewers)+" "+q+qm),qr.Play_selectedChannelLogo=e.stream.channel.logo,Fm=!0,Ih(document.getElementById("stream_info_icon"),qr.Play_selectedChannelLogo),wm=e.stream.created_at,ao()?(Ya=!0,Wa=qr.Play_selectedChannel_id,ci()):np())}function Ch(){Mm<Em&&(Dm+=500,window.setTimeout(function(){Im&&wh()},750)),Mm++}function Mh(){var e="https://api.twitch.tv/kraken/streams/"+qr.Play_selectedChannel_id;Rm=3e3;var t=new XMLHttpRequest;t.ontimeout=function(){},t.onreadystatechange=function(){4===t.readyState&&(200===t.status?(oh=0,Eh(JSON.parse(t.responseText))):Sh())},t.open("GET",e,!0),t.timeout=Rm,t.setRequestHeader(gc,wc),t.setRequestHeader(vc,pc),t.send(null)}function Eh(e){null!==e.stream&&(Wc("stream_info_title",bk.parse(e.stream.channel.status)),qr.Play_gameSelected=e.stream.game,Kc("stream_info_game",v+qr.Play_gameSelected+h+gu(e.stream.viewers)+" "+q+qm),Fm||Ih(document.getElementById("stream_info_icon"),e.stream.channel.logo))}function Sh(){oh<Em?(window.setTimeout(function(){Im&&Mh()},2500),oh++):oh=0}function Ih(e,t){e.onerror=function(){this.src=Oc,Fm=!1},e.src=t}function Ph(){km=0,Rm=2e3+(Qm?3e3:0),xh()}function xh(){var e,t;if(e=rm===sm?"https://api.twitch.tv/api/channels/"+qr.Play_selectedChannel+"/access_token"+(ao()&&Ri[qr.Users_Position].access_token?"?oauth_token="+Ri[qr.Users_Position].access_token:""):"http://usher.ttvnw.net/api/channel/hls/"+qr.Play_selectedChannel+".m3u8?&token="+encodeURIComponent(um.token)+"&sig="+um.sig+"&allow_source=true&allow_audi_only=true&fast_bread=true&allow_spectre=false",Lc){if(!(t=Android.mreadUrl(e,Rm,1,null)))return void Th();200===(t=JSON.parse(t)).status?(km=0,Im&&Gh(t.responseText)):403===t.status?Bh():404===t.status?rv():Th()}else(t=new XMLHttpRequest).open("GET",Ac+e,!0),t.timeout=Rm,t.setRequestHeader(vc,pc),t.ontimeout=function(){},t.onreadystatechange=function(){4===t.readyState&&(200===t.status?(km=0,Im&&Gh(t.responseText)):403===t.status?(Lh(t),Bh()):404===t.status?(Lh(t),rv()):(Lh(t),Th()))},t.send(null)}function Lh(e){pr||(console.log(e.status),console.log(e.responseText))}function Th(){Im&&$m&&(++km<Cm+(Qm?15:0)?(Rm+=250,Qm?window.setTimeout(xh,500):xh()):rv())}function Bh(){ip(),op(Jn),window.setTimeout(function(){Im&&rv()},4e3)}function Gh(e){rm===sm?(um=JSON.parse(e),rm=dm,Ph()):rm===dm&&(hm=Oh(_m=e),rm=lm,Im&&Nh())}function Oh(e){for(var t,n=[],a="",i=1,o=Ah(e),s=0;s<o.length;s++)a=o[s].split('NAME="')[1].split('"')[0],t=Uh(o[s].split("BANDWIDTH=")[1].split(",")[0]),n.length?n[s-i].id!==a&&n[s-i].id!==a+" (source)"?n.push({id:a,band:t,url:o[s].split("\n")[2]}):i++:(-1===a.indexOf("ource")&&(a+=" (source)"),n.push({id:a,band:t,url:o[s].split("\n")[2]}));return n}function Uh(e){return 0<(e=parseInt(e))?" ("+parseFloat(e/1e6).toFixed(2)+"Mbps)":""}function Ah(e){for(var t,n=[],a=/#EXT-X-MEDIA:(.)*\n#EXT-X-STREAM-INF:(.)*\n(.)*/g;t=a.exec(e);)n.push(t[0]);return n}function Nh(){window.clearInterval(Tm),mm=hm[pm=0].url,-1!==tm.indexOf("source")&&(tm="source");for(var e=0;e<Pp();e++){if(hm[e].id===tm){mm=hm[pm=e].url;break}-1!==hm[e].id.indexOf(tm)&&(mm=hm[pm=e].url)}nm=tm,rm=lm,pr||console.log("Play_onPlayer:",'\n\n"'+mm+'"\n'),Lc&&Im&&Android.startVideo(mm,1),Hh()}function Hh(){window.clearTimeout(zf),nh=!1,vm&&!Ep()&&Cp(),Am=!0,Fh(),Lc&&(Bm=0,Om=!(ah=4),window.clearInterval(Tm),Tm=window.setInterval(Rh,ih))}function Fh(){if(qr.Play_ChatForceDisable){nh=!0,window.clearInterval(jf);var e=Jf.contentDocument;try{void 0!==e&&null!==e.body&&(e.open(),e.write(""),e.close())}catch(e){}window.clearTimeout(zf),th=0,eh=!1,Jf.src="https://www.nightdev.com/hosted/obschat/?theme=bttv_blackchat&channel="+qr.Play_selectedChannel+"&fade=false&bot_activity=true&prevent_clipping=false",zf=window.setTimeout(Dh,5e3)}else sr()}function Dh(){var e=Jf.contentDocument,t=!1;try{void 0!==e&&null!==e.body&&(eh=-1!==e.body.innerHTML.indexOf("Connected")),t=eh}catch(e){eh=!0}eh?t&&(jf=window.setInterval(kp,500),(e=e.getElementById("chat_box"))&&(e.style.fontFamily="'Helvetica Neue',Helvetica, Arial,sans-serif,Sans,Jomolhari,dejavu-sans, CambriaMath, CODE2000 , BabelStoneHan")):nh&&th<7?(th++,zf=window.setTimeout(Dh,1e3)):Fh()}function Rh(){Lc&&(jm=Android.gettime()),Im&&Lm===jm&&!zh()?ah<++Bm&&(Om&&Um&&pm<Pp()-1?pm++:!Om&&Um&&Gm++,navigator.onLine?1<Gm?Jh(Gm,1,qh):(Ip(),Nh(),Um=!0):Vh(!1,1)):(Bm=Gm=0,Um=!1),Lm=jm}function qh(e){if(!e){if(!(pm<Pp()-1))return void rv();pm++}Gm=0,Ip(),Nh(),Um=!0}function Vh(e,t){qr.Play_isHost=e,av(t),Play_PannelEndStart(t)}function Jh(e,t,n){var a=new XMLHttpRequest;a.timeout=1e3,a.open("GET","https://static-cdn.jtvnw.net/jtv-static/404_preview-10x10.png?"+Math.random(),!0),a.onreadystatechange=function(){4===a.readyState&&(200===a.status?n(2<e):12<e&&Vh(!1,t))},a.send(null)}function zh(){return!!Lc&&!Android.getPlaybackState()}function Xh(){var e=m_();Kc("stream_clock",e),Kc("label_clock",e)}function jh(e){return e<10?"0"+e:e}function Yh(e){var t,n,a;return e+=Km/1e3,t=jh(parseInt(e)%60),n=jh((e=Math.floor(e/60))%60),a=jh(e=Math.floor(e/60)),e?a+":"+n+":"+t:n+":"+t}function Wh(e){var t,n,a;return e<0&&!Km&&(Km=-1*e),e+=Km,t=jh(parseInt(e/1e3)%60),n=jh((e=Math.floor(e/1e3/60))%60),a=jh(e=Math.floor(e/60)),e?a+":"+n+":"+t:n+":"+t}function Kh(e){return Wh((new Date).getTime()-new Date(e).getTime())}function Zh(){Im&&($h(),qr.Play_WasPlaying=0,Qh())}function $h(){Lc&&Android.stopVideo(1),Im=!1,zp(),er(),ep(),tp(),window.clearInterval(jf),qr.Play_selectedChannel_id=""}function Qh(){Vg(0,0),zc("scene1"),Jc("scene2"),ku()}function ep(){vp(),fp(),sp(),Rp(),sh="",pm===Pp()-1&&(nm=hm[0].id),Bv===qg()-1&&(Mv=Tv[0].id),tf===Bf()-1&&(ef=nf[0].id)}function tp(){Am=!1,document.body.removeEventListener("keydown",gv),document.removeEventListener("visibilitychange",yh),Jf.src="about:blank",window.clearInterval(cm),window.clearInterval(Tm),Hm=!1}function np(){Wc("fallow_text",Ca+At),Xa=!1}function ap(){Lc?Android.mshowLoading(!0):zc("dialog_loading_play")}function ip(){Lc?Android.mshowLoading(!1):Jc("dialog_loading_play")}function op(e){Kc("dialog_warning_play_text",e),zc("dialog_warning_play")}function sp(){Jc("dialog_warning_play")}function dp(){return Xc("dialog_warning_play")}function lp(){cp()?rp():(zc("play_dialog_exit"),gm=window.setTimeout(lp,3e3))}function rp(){window.clearTimeout(gm),Jc("play_dialog_exit")}function cp(){return Xc("play_dialog_exit")}function up(){window.clearTimeout(ym)}function _p(){window.clearTimeout(bm)}function fp(){up(),_p(),Jc("play_dialog_simple_pause")}function mp(){zh()?hp()?(Jc("play_dialog_simple_pause"),bm=window.setTimeout(mp,8e3)):(zc("play_dialog_simple_pause"),ym=window.setTimeout(mp,1500)):fp()}function hp(){return Xc("play_dialog_simple_pause")}function pp(){return"1"===document.getElementById("scene_channel_panel").style.opacity}function vp(){bp(),document.getElementById("scene_channel_panel").style.opacity="0",tm=nm,window.clearInterval(wv)}function gp(){Ap(),Sp(),Ip(),yp(),wv=window.setInterval(yp,1e3),Xh(),rp(),document.getElementById("scene_channel_panel").style.opacity="1",wp()}function yp(){Kc("stream_watching_time",g+Wh(Date.now()-Wm-Ym)),Kc("stream_live_time",y+Kh(wm)+b)}function bp(){window.clearTimeout(em),ng=0}function wp(){em=window.setTimeout(vp,5e3)}function kp(){var e=Jf.contentDocument;try{void 0!==e&&null!==e.body&&(e=e.getElementById("chat_box"))&&(e.scrollTop=e.scrollHeight)}catch(e){}}function Cp(){Bp(),zc("chat_container")}function Mp(){Jc("chat_container")}function Ep(){return Xc("chat_container")}function Sp(){for(var e=pm=0;e<Pp();e++){if(hm[e].id===tm){pm=e;break}-1!==hm[e].id.indexOf(tm)&&(pm=e)}}function Ip(){1===Pp()?(document.getElementById("quality_arrow_up").style.opacity="0",document.getElementById("quality_arrow_down").style.opacity="0"):pm?pm===Pp()-1?(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="0.2"):(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="1"):(document.getElementById("quality_arrow_up").style.opacity="0.2",document.getElementById("quality_arrow_down").style.opacity="1"),-1!==(tm=hm[pm].id).indexOf("source")?Kc("quality_name",tm.replace("source",ye)+hm[pm].band):Kc("quality_name",tm+hm[pm].band)}function Pp(){return hm.length}function xp(e){Xf.style.height=uh[Qf-1].containerHeight+"%",document.getElementById("play_chat_dialog").style.marginTop=uh[Qf-1].dialogTop+"%",Bp(),kp(),e&&Gp(qn+uh[Qf-1].percentage),window.setTimeout(function(){yl&&(yl.scrollTop=yl.scrollHeight)},500),A_("ChatSizeValue",Qf)}function Lp(e){Xf.style.backgroundColor="rgba(0, 0, 0, "+$f+")",e&&Gp(Vn+(100*$f).toFixed(0)+"%")}function Tp(e){Wf=e?rh[Kf=Wf]:ch[Wf][Kf]}function Bp(){var e=4===Qf;Wf<0?Wf=e?2:7:(e?2:7)<Wf&&(Wf=0),Xf.style.top=(e?.2:lh[Wf].top+lh[Wf].sizeOffset[Qf-1])+"%",Xf.style.left=lh[Wf+(e?2:0)].left+"%",A_("ChatPositionsValue",Wf)}function Gp(e){window.clearTimeout(Pm),Kc("play_chat_dialog_text",e),zc("play_chat_dialog"),Pm=window.setTimeout(Op,1e3)}function Op(){Jc("play_chat_dialog")}function Up(e){zh()?(fp(),Lc&&Android.play(!0),Wc("pause_button",'<i class="strokedbig icon-pause" style="color: #FFFFFF; font-size: 180%;"></i>'),1===e?(pp()&&vp(),window.clearInterval(Tm),Tm=window.setInterval(Rh,ih)):2===e?(pp()&&Og(),window.clearInterval(Dv),Dv=window.setInterval(xg,ih)):3===e&&(pp()&&Pf(),window.clearInterval(J_),J_=window.setInterval(Mf,ih))):(window.clearInterval(Tm),window.clearInterval(Dv),window.clearInterval(J_),Wc("pause_button",'<i class="strokedbig icon-play-1" style="color: #FFFFFF; font-size: 180%;"></i>'),Lc&&Android.play(!1),mp())}function Ap(){Hp(),Nm=1,Np()}function Np(){jc("scene2_pannel_"+Nm,"playbotton_focus")}function Hp(){Yc("scene2_pannel_"+Nm,"playbotton_focus")}function Fp(){df=Ev=rm=-1,Mp(),vp(),Pf(),Og(),Hm||sp(),ip(),rp(),$p()}function Dp(){zc("dialog_end_stream")}function Rp(){Jc("dialog_end_stream"),tv(),Zp()}function qp(){return Xc("dialog_end_stream")}function Vp(){return Xc("user_feed")}function Jp(){var e=ao();e?(im!==Ri[qr.Users_Position].name&&(NC=!1),im=Ri[qr.Users_Position].name):NC=!1,NC||SC||RC(),e&&(zc("user_feed"),qf=window.setTimeout(zp,5e3))}function zp(){Jc("user_feed"),window.clearTimeout(qf)}function Xp(){window.clearTimeout(qf),qf=window.setTimeout(zp,5e3)}function jp(){window.clearTimeout(qf),SC||RC()}function Yp(){Xp(),jc(DC[0]+om,"feed_thumbnail_focused");var e;(e=om<3?3:Wp(om+2,DC[0])?-1*document.getElementById(DC[8]+(om-2)).offsetLeft:Wp(om+1,DC[0])?-1*document.getElementById(DC[8]+(om-3)).offsetLeft:-1*document.getElementById(DC[8]+(om-(3<om?4:3))).offsetLeft)&&(document.getElementById("user_feed_scroll").style.left=e+"px")}function Wp(e,t){return null!==document.getElementById(t+e,0)}function Kp(){Yc(DC[0]+om,"feed_thumbnail_focused")}function Zp(){Qp(),Vm=0,$p()}function $p(){jc("dialog_end_"+Vm,"dialog_end_icons_focus")}function Qp(){Yc("dialog_end_"+Vm,"dialog_end_icons_focus")}function ev(e){1===e?Xm=qr.Play_selectedChannelDisplayname+" "+_:2===e?Xm=qr.Main_selectedChannelDisplayname+an:3===e&&(Xm=qr.Main_selectedChannelDisplayname+Ft),Wc("dialog_end_stream_text",Xm+x+la+sn+Jm+"..."),qp()?(Ev=rm=lm,df=lf,-1===--Jm?(Wc("dialog_end_stream_text",Xm+x+la+sn+"0..."),rp(),Mp(),1===e?Zh():2===e?Tg():3===e&&Sf()):zm=window.setTimeout(function(){ev(e)},1e3)):zm=window.setTimeout(function(){ev(e)},50)}function tv(){window.clearTimeout(zm),Wc("dialog_end_stream_text",Xm+x+la+dn)}function nv(e){var t=!0;Vm?1===Vm?qr.Play_isHost?(qr.Play_DisplaynameHost=qr.Play_selectedChannelDisplayname+ae,qr.Play_selectedChannel=Zm.target_login,qr.Play_selectedChannelDisplayname=Zm.target_display_name,qr.Play_DisplaynameHost=qr.Play_DisplaynameHost+qr.Play_selectedChannelDisplayname,$h(),document.body.addEventListener("keydown",gv,!1),qr.Play_selectedChannel_id=Zm.target_id,f_(vh)):Af():2===Vm?iv(e):3===Vm&&sv(e):2===e?Tv.length?(qv=!(og=!0),Ig(),fp(),Il=Zv=0,Ul()):(t=!1,op(aa),window.setTimeout(function(){sp()},2e3)):3===e&&(nf.length?(uf=!(of=!0),wf(),fp(),rf?(Zv=0,Il=Qd,Ul()):or()):(t=!1,op(aa),window.setTimeout(function(){sp()},2e3))),1!==Vm&&3===Vm&&""===qr.Play_gameSelected&&(t=!1),t&&Rp()}function av(e){e?1===e?(Qp(),Vm=2,$p(),document.getElementById("dialog_end_0").style.display="none",document.getElementById("dialog_end_1").style.display="none"):2===e?(Zp(),document.getElementById("dialog_end_0").style.display="inline-block",document.getElementById("dialog_end_1").style.display="none"):3===e&&(Zp(),document.getElementById("dialog_end_0").style.display="inline-block",document.getElementById("dialog_end_1").style.display="inline-block",Kc("dialog_end_vod_text",rf?cn:un)):(Qp(),Vm=1,$p(),document.getElementById("dialog_end_0").style.display="none",document.getElementById("dialog_end_1").style.display="inline-block",Kc("dialog_end_vod_text",hn))}function iv(e){qr.Main_BeforeChannelisSet||qr.Main_Go===Lr||qr.Main_Go===Tr||(qr.Main_BeforeChannel=qr.Main_BeforeAgameisSet&&qr.Main_Go!==kr?qr.Main_BeforeAgame:qr.Main_Go,qr.Main_BeforeChannelisSet=!0),xu(qr.Main_Go),qr.Main_Go=xr,1===e?(qr.Main_selectedChannel_id=qr.Play_selectedChannel_id,qr.Main_selectedChannel=qr.Play_selectedChannel,qr.Main_selectedChannelDisplayname=qr.Play_selectedChannelDisplayname,zs=Xa,Mp(),Zh()):2===e?Tg():3===e&&Sf()}function ov(e){qr.Search_isSearching||(qr.Main_BeforeSearch=qr.Main_Go),xu(qr.Main_Go),qr.Main_Go=Sr,1===e?(Mp(),Zh()):2===e?Tg():3===e&&Sf()}function sv(e){if(""===qr.Play_gameSelected)return Hm=!0,op(Qn),void window.setTimeout(function(){Hm=!1,sp()},2e3);qr.Main_BeforeAgameisSet||qr.Main_Go===Nr||qr.Main_Go===Hr||(qr.Main_BeforeAgame=qr.Main_BeforeChannelisSet&&qr.Main_Go!==xr&&qr.Main_Go!==Lr&&qr.Main_Go!==Tr?qr.Main_BeforeChannel:qr.Main_Go,qr.Main_BeforeAgameisSet=!0),xu(qr.Main_Go),qr.Main_Go=kr,Po=!1,qr.Main_gameSelected=qr.Play_gameSelected,Mp(),1===e?Zh():2===e?Tg():3===e&&Sf()}function dv(){ao()&&Ri[qr.Users_Position].access_token?Xa?gi():hi():(op(Nt),Hm=!0,window.setTimeout(function(){sp(),Hm=!1},2e3))}function lv(e){Nm?1===Nm?(1===e?(Nh(),vp()):2===e?(qv=!1,Ig(),Og()):3===e&&(uf=!1,wf(),Pf()),fp()):2===Nm?(Wa=1===e?qr.Play_selectedChannel_id:qr.Main_selectedChannel_id,dv(),bp(),1===e?wp():2===e?Fg():3===e&&Of()):3===Nm?sv(e):4===Nm?iv(e):5===Nm&&ov(e):Af()}function Play_PannelEndStart(e){window.clearInterval(Tm),window.clearInterval(J_),window.clearInterval(Dv),Fp(),Jm=3,ev(e),Dp(e)}function rv(){rm=-1,km=0,Rm=2e3,window.clearTimeout(zf),Jf.src="about:blank",window.clearInterval(cm),window.clearInterval(Tm),""!==qr.Play_selectedChannel_id?fv():cv()}function cv(){var e="https://api.twitch.tv/kraken/users?login="+qr.Play_selectedChannel,t=new XMLHttpRequest;t.open("GET",e,!0),t.timeout=Rm,t.setRequestHeader(vc,pc),t.setRequestHeader(gc,wc),t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void uv(JSON.parse(t.responseText).users[0]);_v()}},t.send(null)}function uv(e){void 0!==e?(qr.Play_selectedChannel_id=e._id,km=0,Rm=2e3,fv()):Play_PannelEndStart(1)}function _v(){++km<Cm?(Rm+=250,cv()):Vh(!1,1)}function fv(){var e,t="https://tmi.twitch.tv/hosts?include_logins=1&host="+encodeURIComponent(qr.Play_selectedChannel_id);if(Lc){if(!(e=Android.mreadUrl(t,Rm,1,null)))return void mv();200===(e=JSON.parse(e)).status?hv(e.responseText):mv()}else(e=new XMLHttpRequest).open("GET",Ac+t,!0),e.timeout=Rm,e.setRequestHeader(vc,pc),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void hv(e.responseText);mv()}},e.send(null)}function mv(){++km<Cm?(Rm+=250,fv()):Vh(!1,1)}function hv(e){void 0!==(Zm=JSON.parse(e).hosts[0]).target_login?(Hm=!0,op(qr.Play_selectedChannelDisplayname+mn+ae+Zm.target_display_name),window.setTimeout(function(){Hm=!1},4e3),av(0),qr.Play_isHost=!0):(av(1),qr.Play_isHost=!1),Play_PannelEndStart(1)}function pv(){Xa?(Wc("fallow_heart",'<i class="icon-heart strokicon" style="color: #00b300; font-size: 210%;"></i>'),Wc("fallow_text",Ca+Lt)):(Wc("fallow_heart",'<i class="icon-heart-o strokicon" style="color: #FFFFFF; font-size: 210%;"></i>'),Wc("fallow_text",Ca+Tt))}function vv(e){qp()&&!cp()?(tv(),lp()):Vp()?zp():pp()&&!ty()?e?Og():vp():ty()&&cp()?(ey(),Bg(!1),Qh()):cp()?(rp(),Mp(),e?Tg():Zh()):(dp()&&sp(),lp())}function gv(e){if(rm!==lm)switch(e.keyCode){case Aa:cp()?(rp(),Mp(),Zh()):lp()}else switch(e.keyCode){case Ta:Vp()?om&&(Kp(),om--,Yp()):am&&!pp()&&Ep()?(Wf++,Bp()):pp()?(Hp(),5<++Nm&&(Nm=1),Np(),bp(),wp()):qp()?(tv(),Qp(),--Vm<(qr.Play_isHost?1:2)&&(Vm=3),$p()):gp();break;case Ga:Vp()?om<TC-1&&(Kp(),om++,Yp()):!am||pp()||qp()?pp()?(Hp(),--Nm<1&&(Nm=5),Np(),bp(),wp()):qp()?(tv(),Qp(),3<++Vm&&(Vm=qr.Play_isHost?1:2),$p()):gp():A_("ChatEnable",(vm=Ep()||qp()?(Mp(),!1):(Cp(),!0))?"true":"false");break;case Ba:pp()?(0<pm&&1===Nm&&(pm--,Ip()),bp(),wp()):!Vp()&&ao()?Jp():qp()?tv():Vp()&&jp();break;case Oa:pp()?(pm<Pp()-1&&1===Nm&&(pm++,Ip()),bp(),wp()):Vp()?zp():am&&Ep()?(4<++Qf?Tp(!(Qf=1)):4===Qf&&Tp(!0),xp(!0)):qp()?tv():gp();break;case Ua:qp()?nv(1):pp()?lv(1):Vp()?qr.Play_selectedChannel!==JSON.parse(document.getElementById(DC[8]+om).getAttribute(Ec))[0]?($h(),i_(om,DC,gv)):zp():gp();break;case Aa:vv(!1);break;case xa:case Pa:case La:qp()||Up(1)}}var yv,bv,wv,kv,Cv="source",Mv=Cv,Ev=0,Sv=null,Iv=0,Pv=0,xv=0,Lv="",Tv=[],Bv=0,Gv=0,Ov=5,Uv=!1,Av=0,Nv=5,Hv=1e4,Fv=0,Dv=null,Rv=0,qv=!1,Vv=0,Jv=!1,zv=!1,Xv=0,jv=!1,Yv=0,Wv=2e3,Kv=!1,Zv=0,$v={},Qv=0,eg=0,tg=!0,ng=0,ag=0,ig=0,og=!1,sg=[0,10,30,60,120,300,600,900,1200,1800],dg=!1;function lg(){ap(),Rp(),Zv=0,Kc("stream_live_time",""),Kc("stream_watching_time",""),Kc("progress_bar_current_time",Yh(0)),Pl=U+".",Wc("pause_button",'<i class="strokedbig icon-pause" style="color: #FFFFFF; font-size: 180%;"></i>'),Jc("progress_pause_holder"),ag=0,Xg((dh=sg)[1]),Ev=sm,rf=!0,Qd=0,qr.Play_isHost=!1,qr.vodOffset?(cg(),mg()):(tg&&""!==qr.Main_selectedChannel_id?(Ih(document.getElementById("stream_info_icon"),qr.Main_selectedChannelLogo),$v["#"+qr.ChannelVod_vodId]||Ul(),ao()?(Wa=qr.Main_selectedChannel_id,Ya=!0,ci()):np()):(cg(),ug()),Kc("stream_info_name",qr.Main_selectedChannelDisplayname),Wc("stream_info_title",Wd),Wc("stream_info_game",Kd+", ["+Vd.toUpperCase()+"]"),Kc("stream_live_icon",Zd)),$v["#"+qr.ChannelVod_vodId]&&!qr.vodOffset?(ip(),Qg()):rg()}function rg(){Km=0,zc("chat_box"),Jc("chat_frame"),window.setTimeout(function(){zc("scene_channel_panel_bottom"),Wc("pause_button",'<i class="strokedbig icon-pause" style="color: #FFFFFF; font-size: 180%;"></i>'),zc("progress_pause_holder")},1e3),Kc("progress_bar_duration",Yh(Dd)),qr.Play_WasPlaying=2,Iu(),kv=window.setInterval(yg,6e4),Ru(sh),Rv=Vv=0,window.clearInterval(Dv),Jv=!1,jv=Hm=Kv=!(Zf=-13),xv=Pv=Iv=Yv=0,document.addEventListener("visibilitychange",vg,!1),dg=!(Uv=!(zv=!1)),bg(),av(2),document.body.removeEventListener("keyup",Zu)}function cg(){Av=0,Nv=5,Hv=1e4}function ug(){var e="https://api.twitch.tv/kraken/users?login="+encodeURIComponent(qr.Main_selectedChannel),t=new XMLHttpRequest;t.open("GET",e,!0),t.timeout=Hv,t.setRequestHeader(vc,pc),t.setRequestHeader(gc,wc),t.ontimeout=function(){},t.onreadystatechange=function(){4===t.readyState&&(200===t.status?_g(JSON.parse(t.responseText).users[0]):fg())},t.send(null)}function _g(e){void 0!==e?(qr.Main_selectedChannelLogo=e.logo,qr.Main_selectedChannel_id=e._id,$v["#"+qr.ChannelVod_vodId]||Ul(),ao()?(Wa=qr.Main_selectedChannel_id,Ya=!0,ci()):np()):(qr.Main_selectedChannelLogo=Oc,qr.Main_selectedChannel_id=""),Ih(document.getElementById("stream_info_icon"),qr.Main_selectedChannelLogo)}function fg(){++Av<Nv?(Hv+=500,window.setTimeout(function(){Uv&&ug()},750)):bv=window.setTimeout(ug,2500)}function mg(){var e="https://api.twitch.tv/kraken/videos/"+qr.ChannelVod_vodId,t=new XMLHttpRequest;t.open("GET",e,!0),t.timeout=Hv,t.setRequestHeader(vc,pc),t.setRequestHeader(gc,wc),t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void pg(t.responseText);hg()}},t.send(null)}function hg(){++Av<Nv&&(Hv+=2e3,mg())}function pg(e){e=JSON.parse(e),Wc("stream_info_title",bk.parse(e.title)),Wc("stream_info_game",en+v+e.game+", "+gu(e.views)+R+", ["+e.language.toUpperCase()+"]"),Kc("stream_live_icon",F+Gu(e.created_at)),Kc("progress_bar_duration",Yh(Dd=parseInt(e.length))),Zv=1e3*qr.vodOffset,Vg(qr.vodOffset,Dd,!0),qr.Main_selectedChannelDisplayname=e.channel.display_name,Kc("stream_info_name",qr.Main_selectedChannelDisplayname),qr.Main_selectedChannelLogo=e.channel.logo,Ih(document.getElementById("stream_info_icon"),qr.Main_selectedChannelLogo),qr.Main_selectedChannel_id=e.channel._id,qr.Main_selectedChannel=e.channel.name,ao()?(Ya=!0,Wa=qr.Main_selectedChannel_id,ci()):np(),Ru(e.increment_view_count_url)}function vg(){document.hidden?qp()?(rp(),Mp(),Tg()):(yg(),Wg(),Ql(),ep(),window.clearInterval(Dv),window.clearInterval(kv)):(Uv=!0,fp(),Uv&&(Sm=Sm=0,navigator.onLine?Pg():Vf=window.setInterval(gg,100),$l(Gl),av(2),kv=window.setInterval(yg,6e4)))}function gg(){(navigator.onLine||200<Sm)&&(window.clearInterval(Vf),Ev=sm,bg()),Sm++}function yg(){qr.vodOffset=Lc?parseInt(Android.gettime()/1e3):0,Iu(),qr.vodOffset=0}function bg(){Gv=0,Wv=2e3,wg()}function wg(){var e,t;if(e=Ev===sm?"https://api.twitch.tv/api/vods/"+qr.ChannelVod_vodId+"/access_token"+(ao()&&Ri[qr.Users_Position].access_token?"?oauth_token="+Ri[qr.Users_Position].access_token:""):"https://usher.ttvnw.net/vod/"+qr.ChannelVod_vodId+".m3u8?&nauth="+encodeURIComponent(Iv.token)+"&nauthsig="+Iv.sig+"&allow_source=true&allow_audi_only=true&allow_spectre=false",Lc){if(!(t=Android.mreadUrl(e,Rm,1,null)))return void kg();200===(t=JSON.parse(t)).status?(Gv=0,Uv&&Cg(t.responseText)):kg()}else(t=new XMLHttpRequest).open("GET",Ac+e,!0),t.timeout=Wv,t.setRequestHeader(vc,pc),t.ontimeout=function(){},t.onreadystatechange=function(){4===t.readyState&&(200===t.status?(Gv=0,Uv&&Cg(t.responseText)):kg())},t.send(null)}function kg(){if(Uv){if(JSON.parse(Iv.token)&&0!==JSON.parse(Iv.token).chansub.restricted_bitrates.length)return void Mg();++Gv<Ov?(Wv+=250,wg()):(ip(),Play_PannelEndStart(2))}}function Cg(e){Ev===sm?(Iv=JSON.parse(e),Ev=dm,bg()):Ev===dm&&(Tv=Oh(Pv=e),Ev=lm,Uv&&Ig())}function Mg(){ao()&&Ri[qr.Users_Position].access_token?(Wa=qr.Main_selectedChannel_id,wi()):(ip(),op(L+Bt),window.setTimeout(function(){Uv&&Tg()},4e3))}function Eg(){ip(),op(L+Gt),window.setTimeout(function(){Uv&&Tg()},4e3)}function Sg(){dg?(ip(),op(L+Ot),window.setTimeout(function(){Uv&&Tg()},4e3)):(dg=!0,Ev=sm,bg())}function Ig(){window.clearInterval(Dv),Lv=Tv[Bv=0].url,-1!==Cv.indexOf("source")&&(Cv="source");for(var e=0;e<qg();e++){if(Tv[e].id===Cv){Lv=Tv[Bv=e].url;break}-1!==Tv[e].id.indexOf(Cv)&&(Lv=Tv[Bv=e].url)}Mv=Cv,Pg()}function Pg(){pr||console.log("PlayVod_onPlayer:",'\n\n"'+Lv+'"\n'),qr.vodOffset?(Il=qr.vodOffset,Ul(),Lc&&Uv&&Android.startVideoOffset(Lv,2,og?-1:1e3*qr.vodOffset),qr.vodOffset=0):Lc&&Uv&&Android.startVideoOffset(Lv,2,og?-1:Android.gettime()),og=!1,vm&&!Ep()&&Cp(),Lc&&(Rv=0,qv=!(ah=7),window.clearInterval(Dv),Dv=window.setInterval(xg,ih))}function xg(){Lc&&(Zv=Android.gettime()),Uv&&Fv===Zv&&!zh()?++Rv>ah&&(qv&&Jv&&Bv<qg()-1?Bv++:!qv&&Jv&&Vv++,navigator.onLine?1<Vv?Jh(Vv,2,Lg):(Rg(),Ig(),Jv=!0):Vh(!1,2)):(Rv=Vv=0,Jv=!1),Fv=Zv}function Lg(e){if(!e){if(!(Bv<qg()-1))return void Vh(!1,2);Bv++}Vv=0,Rg(),Ig(),Jv=!0}function Tg(){Uv&&(Tv=[],Bg(!0),Qh())}function Bg(e){e&&Wg(),Lc&&Android.stopVideo(2),Uv=!1,window.clearInterval(kv),window.clearInterval(bv),qr.Play_WasPlaying=0,tg=!0,er(),zp(),ep(),Gg()}function Gg(){document.body.removeEventListener("keydown",sy),document.removeEventListener("visibilitychange",vg),qr.vodOffset=0,window.clearInterval(Sv),window.clearInterval(Dv),Dd=0}function Og(){jv=!1,Xv=Yv=0,bp(),document.getElementById("scene_channel_panel").style.opacity="0",Lc&&Vg(Android.gettime()/1e3,Dd,!0),Wc("progress_bar_jump_to",Ca),document.getElementById("progress_bar_steps").style.display="none",Cv=Mv,window.clearInterval(wv)}function Ug(e){Ag(),Xh(),rp(),wv=window.setInterval(Ag,1e3),e&&(Ng(),Dg(),Rg(),Fg()),document.getElementById("scene_channel_panel").style.opacity="1"}function Ag(){Lc&&Vg(Android.gettime()/1e3,Dd,!jv)}function Ng(){eg=zh()?1:0,Hg()}function Hg(){eg?1===eg?(jc("pause_button","progress_bar_div_focus"),Yc("progress_bar_div","progress_bar_div_focus"),Hp(),Wc("progress_bar_jump_to",Ca),document.getElementById("progress_bar_steps").style.display="none"):2===eg&&(Yc("pause_button","progress_bar_div_focus"),Yc("progress_bar_div","progress_bar_div_focus"),Np(),Wc("progress_bar_jump_to",Ca),document.getElementById("progress_bar_steps").style.display="none"):(Yc("pause_button","progress_bar_div_focus"),jc("progress_bar_div","progress_bar_div_focus"),Hp(),Xv&&(jg(),document.getElementById("progress_bar_steps").style.display="inline-block"))}function Fg(){em=window.setTimeout(Og,5e3+ng)}function Dg(){for(var e=Bv=0;e<qg();e++){if(Tv[e].id===Cv){Bv=e;break}-1!==Tv[e].id.indexOf(Cv)&&(Bv=e)}}function Rg(){1===qg()?(document.getElementById("quality_arrow_up").style.opacity="0",document.getElementById("quality_arrow_down").style.opacity="0"):Bv?Bv===qg()-1?(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="0.2"):(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="1"):(document.getElementById("quality_arrow_up").style.opacity="0.2",document.getElementById("quality_arrow_down").style.opacity="1"),-1!==(Cv=Tv[Bv].id).indexOf("source")?Kc("quality_name",Cv.replace("source",ye)+Tv[Bv].band):Kc("quality_name",Cv+Tv[Bv].band)}function qg(){return Tv.length}function Vg(e,t,n){Kc("progress_bar_current_time",Yh(e)),n&&(Yf.style.width=e/t*100+"%")}function Jg(){fp(),qp()||(uf=qv=!1,Uv?(Lc&&Android.startVideoOffset(Lv,2,0<ig?1e3*ig:-1),Il=ig):(Il=Qd,Lc&&Android.startVideoOffset(af,3,0<ig?1e3*ig:-1)),rf&&Ul()),Wc("progress_bar_jump_to",Ca),document.getElementById("progress_bar_steps").style.display="none",jv=!1,ig=Xv=Yv=0}function zg(){ag=Yv=0,Xg(dh[1])}function Xg(e){Xv&&!eg&&(document.getElementById("progress_bar_steps").style.display="inline-block"),60<Math.abs(e)?Kc("progress_bar_steps",zn+e/60+jn):Kc("progress_bar_steps",e?zn+e+Xn:zn+dh[1]+Xn)}function jg(){Kc("progress_bar_jump_to",_e+" ("+(Xv<0?"-":"")+Yh(Math.abs(Xv))+")"+fe+Yh(ig))}function Yg(e,t){var n=Lc?Android.gettime()/1e3:0;window.clearTimeout(yv),jv=!0,Yv<dh.length-1&&ag++%6==0&&Yv++,Xv+=dh[Yv]*e,ig=n+Xv,Uv&&(ig=10*Math.floor(ig/10)),t<ig?(Xv=t-n-dh[1],ig=n+Xv,ag=Yv=0):ig<0&&(Xv=0-n,ig=ag=Yv=0),jg(),Yf.style.width=ig/t*100+"%",Xg(dh[Yv]*e),yv=window.setTimeout(zg,1e3)}function Wg(){var e=Lc?parseInt(Android.gettime()/1e3):0,t="#"+qr.ChannelVod_vodId;300<e&&e<Dd-300?($v[t]&&delete $v[t],$v[t]=e,A_("PlayVod_VodIds",JSON.stringify($v))):Dd-300<e&&$v[t]&&(delete $v[t],A_("PlayVod_VodIds",JSON.stringify($v)))}function Kg(){$v=H_("PlayVod_VodIds",{});var e=Zg();250<e&&$g(e-250)}function Zg(){var e=0;for(var t in $v)$v.hasOwnProperty(t)&&e++;return e}function $g(e){var t=0;for(var n in $v){if(!(t<e))break;delete $v[n],t++}A_("PlayVod_VodIds",JSON.stringify($v))}function Qg(){Jc("scene_channel_panel_bottom"),Ug(!1),Wc("dialog_vod_saved_text",Sn+Wh(1e3*$v["#"+qr.ChannelVod_vodId])),zc("dialog_vod_start")}function ey(){Og(),Jc("dialog_vod_start"),ny(),window.setTimeout(function(){zc("scene_channel_panel_bottom")},1e3)}function ty(){return Xc("dialog_vod_start")}function ny(){iy(),Qv=0,ay()}function ay(){jc("dialog_vod_"+Qv,"dialog_end_icons_focus")}function iy(){Yc("dialog_vod_"+Qv,"dialog_end_icons_focus")}function oy(e){ey(),e?(delete $v["#"+qr.ChannelVod_vodId],qr.vodOffset=0,lg()):(qr.vodOffset=$v["#"+qr.ChannelVod_vodId],Zv=1e3*qr.vodOffset,Vg(qr.vodOffset,Dd,!0),rg())}function sy(e){if(Ev===lm||ty())switch(e.keyCode){case Ta:Vp()?om&&(Kp(),om--,Yp()):am&&!pp()&&Ep()?(Wf++,Bp()):pp()&&!ty()?(bp(),eg?(Hp(),5<++Nm&&(Nm=1),Np()):(Yg(-1,Dd),ng=2500),Fg()):ty()?(iy(),Qv?Qv--:Qv++,ay()):qp()?(tv(),Qp(),--Vm<0&&(Vm=3),1===Vm&&(Vm=0),$p()):ty()||Ug(!0);break;case Ga:Vp()?om<TC-1&&(Kp(),om++,Yp()):!am||pp()||qp()?pp()&&!ty()?(bp(),eg?(Hp(),--Nm<1&&(Nm=5),Np()):(Yg(1,Dd),ng=2500),Fg()):ty()?(iy(),Qv?Qv--:Qv++,ay()):qp()?(tv(),Qp(),3<++Vm&&(Vm=0),1===Vm&&(Vm=2),$p()):ty()||Ug(!0):A_("ChatEnable",(vm=Ep()||qp()?(Mp(),!1):(Cp(),!0))?"true":"false");break;case Ba:qp()?tv():pp()&&!ty()?(2===eg&&1!==Nm?(eg--,Hg()):1===eg?(eg--,Hg()):0<Bv&&1===Nm&&(Bv--,Rg()),bp(),Fg()):Vp()?Vp()?jp():ty()||Ug(!0):Jp();break;case Oa:qp()?tv():pp()&&!ty()?(eg?1===eg?(eg++,Hg()):Bv<qg()-1&&1===Nm&&(Bv++,Rg()):(eg++,Hg()),bp(),Fg()):Vp()?zp():am&&Ep()?(4<++Qf?Tp(!(Qf=1)):4===Qf&&Tp(!0),xp(!0)):ty()||Ug(!0);break;case Ua:ty()?oy(Qv):qp()?nv(2):pp()?eg?1===eg?(qr.Play_ChatForceDisable&&(zh()?$l(Gl):Ql()),qp()||Up(2)):lv(2):(bp(),Fg(),Xv&&Jg()):Vp()?(Bg(),i_(om,DC,gv)):Ug(!0);break;case Aa:vv(!0);break;case xa:case Pa:case La:qr.Play_ChatForceDisable&&(zh()?$l(Gl):Ql()),qp()||Up(2)}else switch(e.keyCode){case Aa:cp()?(rp(),Tg()):lp()}}var dy={};function ly(){console.log("InitScreens place holder")}function ry(){Yy(),Wy(),Zy(),$y(),Qy(),tb(),nb()}function cy(e){return[e+"_thumbdiv",e+"_img",e+"_infodiv",e+"_title",e+"_createdon",e+"_game",e+"_viwers",e+"_duration",e+"_cell","cpempty_",e+"_scroll",e+"_lang"]}function uy(){for(var e,t={},n=0;n<arguments.length;n+=1){var a=arguments[n],i=Object.keys(a);for(e=0;e<i.length;e+=1)t[i[e]]=a[i[e]]}return t}function _y(){tc=-1,qr.Main_Go=dy.screen,dy.label_init(),document.body.addEventListener("keydown",Ty,!1),dy.status?(zc(dy.ids[10]),Fu(dy.posY),My(),Iu()):my()}function fy(){tc=0,dy.label_exit(),document.body.removeEventListener("keydown",Ty),Jc(dy.ids[10])}function my(){Zc(),Uu(dy.table),ru(),dy.cursor=null,dy.status=!1,dy.row=document.createElement("div"),dy.MaxOffset=0,dy.TopRowCreated=!1,dy.offset=0,dy.idObject={},dy.FirstLoad=!0,dy.itemsCount=0,dy.posX=0,dy.posY=0,dy.row_id=0,dy.coloumn_id=0,dy.data=null,dy.data_cursor=0,dy.dataEnded=!1,iu(),hy(),py()}function hy(){dy.loadingData=!0,dy.loadingDataTry=0,dy.loadingDataTimeout=3500}function py(){var e;if(dy.set_url(),Lc&&!dy.data){if(!(e=Android.mreadUrl(dy.url,dy.loadingDataTimeout,2,null)))return void vy();200===(e=JSON.parse(e)).status?dy.concatenate(e.responseText):vy()}else(e=new XMLHttpRequest).open("GET",dy.url,!0),e.timeout=dy.loadingDataTimeout,e.setRequestHeader(vc,pc),e.setRequestHeader(gc,wc),e.ontimeout=function(){},e.onreadystatechange=function(){4===e.readyState&&(200===e.status?dy.concatenate(e.responseText):vy())},e.send(null)}function vy(){dy.loadingDataTry++,dy.loadingDataTry<dy.loadingDataTryMax?(dy.loadingDataTimeout+=500,py()):(dy.loadingData=!1,dy.itemsCount?dy.dataEnded=!0:(dy.FirstLoad=!1,$c(),lu(T)))}function gy(){var e=dy.data.length-dy.data_cursor;if(e>dy.ItemsLimit?e=dy.ItemsLimit:dy.loadingData||(dy.dataEnded=!0),e){var t=Math.ceil(e/dy.ColoumnsCount),n=dy.row_id+t,a=document.getElementById(dy.table);if(dy.HasSwitches&&!dy.TopRowCreated){dy.TopRowCreated=!0,dy.row=document.createElement("div");var i='<i class="icon-history stream_channel_fallow_icon"></i>'+Ca+Ca+m;(Zr=document.createElement("div")).setAttribute("id",dy.ids[8]+"y_0"),Zr.className="stream_cell_period",Zr.innerHTML='<div id="'+dy.ids[0]+'y_0" class="stream_thumbnail_channel_vod" ><div id="'+dy.ids[3]+'y_0" class="stream_channel_fallow_game">'+i+"</div></div>",dy.row.appendChild(Zr),a.appendChild(dy.row)}for(dy.row_id;dy.row_id<n;){for(dy.coloumn_id===dy.ColoumnsCount&&(dy.row=document.createElement("div"),dy.coloumn_id=0),dy.coloumn_id;dy.coloumn_id<dy.ColoumnsCount&&dy.data_cursor<dy.data.length;dy.data_cursor++)dy.data[dy.data_cursor]&&dy.addCell(dy.data[dy.data_cursor]);if(a.appendChild(dy.row),dy.coloumn_id===dy.ColoumnsCount)dy.row_id++;else if(dy.data_cursor>=dy.data.length)break}}dy.emptyContent=!e&&!dy.status,Cy()}function yy(e,t,n,a){var i=e+"_"+t;return Hu(n[1]+i,a),e<dy.ColoumnsCount&&Ru(a),(Zr=document.createElement("div")).style.cssText=dy.ThumbCssText,i}function by(e,t,n,a,i,o){var s=yy(e,t,n,a);return Zr.setAttribute("id",n[5]+s),Zr.setAttribute(Ec,i),Zr.innerHTML='<div id="'+n[0]+s+'" class="stream_thumbnail_game"><div><img id="'+n[1]+s+'" class="stream_img"></div><div id="'+n[2]+s+'" class="stream_text2"><div id="<div id="'+n[3]+s+'" class="stream_channel">'+i+"</div>"+(""!==o?'<div id="'+n[4]+s+'"class="stream_info_games" style="width: 100%; display: inline-block;">'+o+"</div>":"")+"</div></div>",Zr}function wy(e,t,n,a,i,o,s,d,l,r,c,u,_,f,m,h){var p=yy(e,t,n,a);return Zr.setAttribute("id",n[8]+p),Zr.setAttribute(Ec,JSON.stringify([c,r,s[2],u,i,_,f,m,h,s[0],l,s[1]+s[2]])),Zr.innerHTML='<div id="'+n[0]+p+'" class="stream_thumbnail_clip"><div><img id="'+n[1]+p+'" class="stream_img"></div><div id="'+n[2]+p+'" class="stream_text2"><div id="'+n[3]+p+'" class="stream_info" style="width: 72%; display: inline-block; font-size: 85%;">'+i+'</div><div id="'+n[7]+p+'"class="stream_info" style="width:27%; float: right; text-align: right; display: inline-block;">'+l+'</div><div  style="line-height: 12px;"><div id="'+n[4]+p+'"class="stream_info" style="width: 59%; display: inline-block;">'+o[0]+o[1]+'</div><div id="'+n[5]+p+'"class="stream_info" style="width: 39%; display: inline-block; float: right; text-align: right;">'+D+Yh(r)+'</div></div><div id="'+n[11]+p+'"class="stream_info">'+s[0]+la+s[1]+s[2]+'</div><div id="'+n[6]+p+'"class="stream_info">'+d+R+"</div></div></div>",Zr}function ky(e,t,n,a,i){var o=yy(e,t,a,i[0]);return Zr.setAttribute("id",a[8]+o),Zr.setAttribute(Ec,JSON.stringify(n)),Zr.innerHTML='<div id="'+a[0]+o+'" class="stream_thumbnail_clip"><div><img id="'+a[1]+o+'" class="stream_img"></div><div id="'+a[2]+o+'" class="stream_text2"><div id="'+a[3]+o+'" class="stream_channel" style="width: 66%; display: inline-block;">'+i[1]+'</div><div id="'+a[7]+o+'"class="stream_info" style="width:33%; float: right; text-align: right; display: inline-block;">'+i[5]+'</div><div id="'+a[4]+o+'"class="stream_info">'+bk.parse(i[2])+'</div><div id="'+a[5]+o+'"class="stream_info">'+v+i[3]+'</div><div id="'+a[6]+o+'"class="stream_info">'+i[4]+"</div></div></div>",Zr}function Cy(){dy.status?(Au(dy.img_404),ou(dy.posX,dy.posY,dy.ColoumnsCount,dy.itemsCount)):(dy.emptyContent?lu(dy.empty_str()):(dy.status=!0,Au(dy.img_404)),nc&&dy.status&&Kw.restor_playback.defaultValue?qr.Play_WasPlaying?(xu(qr.Main_Go),qr.Main_Go=Rr,qr.vodOffset||(qr.vodOffset=1),Dd=qr.vodOffset+1,op(Yn),1===qr.Play_WasPlaying?o_():l_(),Eu(!0),window.setTimeout(function(){Hm||sp()},2e3)):1!==Rr?(xu(qr.Main_Go),qr.Main_Go=Rr,c_(dy.posY+"_"+dy.posX,dy.ids),Eu()):(qr.Never_run&&mu(),qr.Never_run=!1,My(),Iu()):(My(),Iu()),nc=!1,dy.FirstLoad=!1,$c())}function My(){dy.posY<0?Sy():(dy.addFocus(dy.posY,dy.posX,dy.ids,dy.ColoumnsCount,dy.itemsCount),2<dy.posY&&dy.data_cursor+Fy>dy.data.length&&!dy.dataEnded&&!dy.loadingData&&(hy(),py()),dy.posY+dy.ItemsReloadLimit>dy.itemsCount/dy.ColoumnsCount&&dy.data_cursor<dy.data.length&&(Nu(),dy.loadDataSuccess()),zr&&c_(dy.posY+"_"+dy.posX,dy.ids))}function Ey(e,t){c_(dy.posY+"_"+dy.posX,dy.ids),dy.posY+=e,dy.posX=t,My()}function Sy(){jc(dy.ids[0]+"y_0",Mc)}function Iy(){Yc(dy.ids[0]+"y_0",Mc)}function Py(e){pu()?hu():_u()?uu():(e===dy.screen?qr.Main_Go=yr:qr.Main_Go=e,fy())}function xy(e){if(!dy.HasSwitches||dy.posY||-1!==e||dy.emptyContent){if(dy.HasSwitches&&-1===dy.posY)dy.posY=0,My(),Iy();else for(var t=0;t<dy.ColoumnsCount;t++)if(wu(dy.posY+e,dy.posX-t,dy.ids[0]))return void Ey(e,dy.posX-t)}else c_(dy.posY+"_"+dy.posX,dy.ids),dy.posY=-1,Sy()}function Ly(e,t){wu(dy.posY,dy.posX+e,dy.ids[0])?Ey(0,dy.posX+e):wu(dy.posY+e,t,dy.ids[0])&&Ey(e,t)}function Ty(e){if(!dy.FirstLoad&&!e_())switch(Qu(),e.keyCode){case Aa:dy.key_exit();break;case Ta:Ly(-1,dy.ColoumnsCount-1);break;case Ga:Ly(1,0);break;case Ba:xy(-1);break;case Oa:xy(1);break;case xa:case Pa:case La:case Ua:dy.key_play()}}dy.FirstLoad=!1;var By,Gy,Oy,Uy,Ay,Ny,Hy,Fy=100,Dy="",Ry="",qy="",Vy="",Jy="",zy="",Xy={posX:0,posY:0,row_id:0,coloumn_id:0,dataEnded:!1,idObject:{},loadingData:!1,itemsCount:0,loadingDataTryMax:5,loadingDataTimeout:3500,MaxOffset:0,offset:0,status:!1,emptyContent:!1,itemsCountCheck:!1,FirstLoad:!1,row:0,data:null,data_cursor:0,loadDataSuccess:gy,set_ThumbSize:function(){this.ThumbCssText="width: "+this.ThumbSize+"%; display: inline-block; padding: 3px;"},key_exit:function(){pu()?hu():_u()?uu():(this.itemsCount&&c_(this.posY+"_"+this.posX,this.ids),L_(Ty))}},jy={ThumbSize:32.65,ItemsLimit:sc,ItemsReloadLimit:lc,ColoumnsCount:dc,addFocus:n_,key_refresh:my,img_404:Uc,empty_str:function(){return B+K},key_play:function(){i_(this.posY+"_"+this.posX,this.ids,Ty)}};function Yy(){(Ny=uy(Ny=uy({ids:cy("Live"),table:"stream_table_live",screen:yr,base_url:"https://api.twitch.tv/kraken/streams?limit="+Fy,set_url:function(){this.offset&&this.offset+Fy>this.MaxOffset&&(this.dataEnded=!0),this.url=this.base_url+"&offset="+this.offset+(""!==Qr?"&language="+Qr:"")},label_init:function(){qr.Main_CenterLablesVectorPos=0,jc("top_bar_live","icon_center_focus")},label_exit:function(){Yc("top_bar_live","icon_center_focus")},concatenate:function(e){if(this.data){var t=JSON.parse(e);this.MaxOffset=t._total,this.data=this.data.concat(t.streams),this.offset=this.data.length,this.offset>this.MaxOffset&&(this.dataEnded=!0),dy.loadingData=!1}else this.data=JSON.parse(e),this.MaxOffset=this.data._total,this.data=this.data.streams,this.offset=this.data.length,this.offset>this.MaxOffset&&(this.dataEnded=!0),this.loadDataSuccess(),dy.loadingData=!1},addCell:function(e){dy.idObject[e.channel._id]||(dy.itemsCount++,dy.idObject[e.channel._id]=1,dy.row.appendChild(ky(dy.row_id,dy.coloumn_id,[e.channel.name,e.channel._id,e.channel.status],this.ids,[e.preview.template.replace("{width}x{height}",kc),bu(JSON.stringify(e.stream_type))+e.channel.display_name,e.channel.status,e.game,y+Kh(e.created_at)+b+", "+h+gu(e.viewers)+q,yu(e.video_height,e.average_fps,e.channel.language)])),dy.coloumn_id++)}},Xy),jy)).set_ThumbSize()}function Wy(){(Hy=uy(Hy=uy({ids:cy("Featured"),table:"stream_table_featured",screen:Fr,base_url:"https://api.twitch.tv/kraken/streams/featured?limit="+Fy,set_url:function(){this.url=this.base_url+"&offset="+this.offset+(ao()&&Ri[qr.Users_Position].access_token?"&oauth_token="+Ri[qr.Users_Position].access_token:"")},label_init:function(){qr.Main_CenterLablesVectorPos=2,jc("top_bar_featured","icon_center_focus")},label_exit:function(){Yc("top_bar_featured","icon_center_focus")},concatenate:function(e){this.data=JSON.parse(e),this.data=this.data.featured,this.dataEnded=!0,this.loadDataSuccess(),dy.loadingData=!1},addCell:function(e){e=e.stream,dy.idObject[e.channel._id]||(dy.itemsCount++,dy.idObject[e.channel._id]=1,dy.row.appendChild(ky(dy.row_id,dy.coloumn_id,[e.channel.name,e.channel._id,e.channel.status],this.ids,[e.preview.template.replace("{width}x{height}",kc),bu(JSON.stringify(e.stream_type))+e.channel.display_name,e.channel.status,e.game,y+Kh(e.created_at)+b+", "+h+gu(e.viewers)+q,yu(e.video_height,e.average_fps,e.channel.language)])),dy.coloumn_id++)}},Xy),jy)).set_ThumbSize()}var Ky={ThumbSize:32.65,ItemsLimit:sc,HasSwitches:!0,TopRowCreated:!1,ItemsReloadLimit:lc,ColoumnsCount:dc,addFocus:n_,cursor:null,key_refresh:my,period:["day","week","month","all"],img_404:Uc,empty_str:function(){return B+N},key_play:function(){-1===this.posY?this.loadingData||(this.periodPos++,4<this.periodPos&&(this.periodPos=1),this.SetPeriod(),my()):s_(this.posY+"_"+this.posX,this.ids,Ty)},concatenate:function(e){if(this.data){var t=JSON.parse(e);this.cursor=t._cursor,""===this.cursor&&(this.dataEnded=!0),this.data=this.data.concat(t.clips),dy.loadingData=!1}else this.data=JSON.parse(e),this.cursor=this.data._cursor,""===this.cursor&&(this.dataEnded=!0),this.data=this.data.clips,this.loadDataSuccess(),dy.loadingData=!1},addCell:function(e){dy.idObject[e.tracking_id]||(dy.itemsCount++,dy.idObject[e.tracking_id]=1,dy.row.appendChild(wy(dy.row_id,dy.coloumn_id,dy.ids,e.thumbnails.medium,e.broadcaster.display_name,[rn,Gu(e.created_at)],[bk.parse(e.title),v,e.game],gu(e.views),"["+e.language.toUpperCase()+"]",e.duration,e.slug,e.broadcaster.name,e.broadcaster.logo.replace("150x150","300x300"),e.broadcaster.id,null!==e.vod?e.vod.id:null,null!==e.vod?e.vod.offset:null)),dy.coloumn_id++)}};function Zy(){(By=uy(By=uy({ids:cy("Clip"),table:"stream_table_clip",screen:Ar,periodPos:N_("Clip_periodPos",2),base_url:"https://api.twitch.tv/kraken/clips/top?limit="+Fy,set_url:function(){this.url=this.base_url+"&period="+this.period[this.periodPos-1]+(this.cursor?"&cursor="+this.cursor:"")+(""!==Qr?"&language="+Qr:"")},SetPeriod:function(){Wc("top_bar_clip",N+Bu(fr[this.periodPos-1])),A_("Clip_periodPos",this.periodPos)},label_init:function(){qr.Main_CenterLablesVectorPos=5,this.SetPeriod(),jc("top_bar_clip","icon_center_focus"),Vc("label_refresh","icon-refresh",t+Zt)},label_exit:function(){Lu(),Yc("top_bar_clip","icon_center_focus"),Vc("label_refresh","icon-refresh",t+Zt)}},Xy),Ky)).set_ThumbSize()}function $y(){(Gy=uy(Gy=uy({ids:cy("ChannelClip"),table:"stream_table_channel_clip",screen:Tr,periodPos:N_("ChannelClip_periodPos",2),base_url:"https://api.twitch.tv/kraken/clips/top?channel=",set_url:function(){this.url=this.base_url+encodeURIComponent(qr.Main_selectedChannel)+"&limit="+Fy+"&period="+this.period[this.periodPos-1]+(this.cursor?"&cursor="+this.cursor:"")},SetPeriod:function(){Wc("top_bar_game",N+fr[this.periodPos-1]),A_("ChannelClip_periodPos",this.periodPos)},label_init:function(){qr.Main_CenterLablesVectorPos=1,!qr.Search_isSearching&&qr.Main_selectedChannel_id&&Sd(),qr.Main_selectedChannel!==this.lastselectedChannel&&(this.status=!1),Tu(),this.SetPeriod(),Kc("top_bar_user",qr.Main_selectedChannelDisplayname),Vc("label_side_panel","icon-arrow-circle-left",P),this.lastselectedChannel=qr.Main_selectedChannel},label_exit:Lu},Xy),Ky)).set_ThumbSize()}function Qy(){(Oy=uy(Oy=uy({ids:cy("AGameClip"),table:"stream_table_a_game_clip",screen:Hr,periodPos:N_("AGameClip_periodPos",2),base_url:"https://api.twitch.tv/kraken/clips/top?game=",set_url:function(){this.url=this.base_url+encodeURIComponent(qr.Main_gameSelected)+"&limit="+Fy+"&period="+this.period[this.periodPos-1]+(this.cursor?"&cursor="+this.cursor:"")+(""!==Qr?"&language="+Qr:"")},SetPeriod:function(){Wc("top_bar_game",w+Bu(N+fr[this.periodPos-1]+": "+qr.Main_gameSelected)),A_("AGameClip_periodPos",this.periodPos)},label_init:function(){qr.Main_CenterLablesVectorPos=3,this.SetPeriod(),jc("top_bar_game","icon_center_focus"),Vc("label_side_panel","icon-arrow-circle-left",P),this.gameSelected!==qr.Main_gameSelected&&(this.status=!1),this.gameSelected=qr.Main_gameSelected},label_exit:function(){Yc("top_bar_game","icon_center_focus"),Wc("top_bar_game",f),Vc("label_side_panel","icon-ellipsis",Rn)}},Xy),Ky)).set_ThumbSize()}var eb={ThumbSize:19.35,ItemsLimit:rc,ItemsReloadLimit:uc,ColoumnsCount:cc,addFocus:a_,img_404:Gc,empty_str:function(){return B+$},concatenate:function(e){if(this.data){var t=JSON.parse(e);this.MaxOffset=t._total,this.data=this.data.concat(this.screen===Er?t.follows:t.top),this.offset=this.data.length,this.offset>this.MaxOffset&&(this.dataEnded=!0),dy.loadingData=!1}else this.data=JSON.parse(e),this.MaxOffset=this.data._total,this.data=this.screen===Er?this.data.follows:this.data.top,this.offset=this.data.length,this.isLive?this.dataEnded=!0:this.offset>this.MaxOffset&&(this.dataEnded=!0),this.loadDataSuccess(),dy.loadingData=!1},key_play:function(){qr.Main_gameSelected=document.getElementById(this.ids[5]+this.posY+"_"+this.posX).getAttribute(Ec),document.body.removeEventListener("keydown",Ty),qr.Main_BeforeAgame=this.screen,qr.Main_Go=kr,qr.Main_BeforeAgameisSet=!0,Po=!1,fy(),Eu(),c_(this.posY+"_"+this.posX,this.ids)},addCell:function(e){var t=this.isLive||this.screen===wr,n=t?e.game:e;dy.idObject[n._id]||(dy.itemsCount++,dy.idObject[n._id]=1,dy.row.appendChild(by(dy.row_id,dy.coloumn_id,dy.ids,n.box.template.replace("{width}x{height}",Cc),n.name,t?gu(e.channels)+" "+S+h+gu(e.viewers)+q:"")),dy.coloumn_id++)}};function tb(){(Uy=uy(Uy=uy({ids:cy("Game"),table:"stream_table_games",screen:wr,key_refresh:my,base_url:"https://api.twitch.tv/kraken/games/top?limit="+Fy,set_url:function(){this.offset&&this.offset+Fy>this.MaxOffset&&(this.dataEnded=!0),this.url=this.base_url+"&offset="+this.offset},label_init:function(){qr.Main_CenterLablesVectorPos=3,jc("top_bar_game","icon_center_focus")},label_exit:function(){Yc("top_bar_game","icon_center_focus")}},Xy),eb)).set_ThumbSize()}function nb(){(Ay=uy(Ay=uy({ids:cy("UserGames"),table:"stream_table_user_games",screen:Er,isLive:F_("user_Games_live",!0),OldUserName:"",base_url:"https://api.twitch.tv/api/users/",set_url:function(){this.offset&&this.offset+Fy>this.MaxOffset&&(this.dataEnded=!0),this.url=this.base_url+encodeURIComponent(Ri[qr.Users_Position].name)+"/follows/games",this.isLive?this.url+="/live?limit=750":this.url+="?limit="+Fy+"&offset="+this.offset},key_refresh:function(){this.isLive=!this.isLive,Wc("top_bar_user",u+Bu(Ri[qr.Users_Position].name+" "+(this.isLive?$:Wt))),my(),A_("user_Games_live",this.isLive?"true":"false"),RM&&WM()},label_init:function(){qr.Main_CenterLablesVectorPos=1,Vc("label_refresh","icon-refresh",Kt+$+"/"+Wt+":"+Zt),Vc("label_side_panel","icon-arrow-circle-left",P),jc("top_bar_user","icon_center_focus"),this.OldUserName!==Ri[qr.Users_Position].name&&(this.status=!1),this.OldUserName=Ri[qr.Users_Position].name,Wc("top_bar_user",u+Bu(Ri[qr.Users_Position].name+" "+(this.isLive?$:Wt)))},label_exit:function(){qr.Users_Position=0,Yc("top_bar_user","icon_center_focus"),Vc("label_refresh","icon-refresh",t+Zt),Kc("top_bar_user",u),Vc("label_side_panel","icon-ellipsis",Rn)}},Xy),eb)).set_ThumbSize()}var ab=0,ib=0,ob=!1,sb=0,db={},lb=[],rb=!1,cb=0,ub=5,_b=3500,fb=0,mb=0,hb=!1,pb=!1,vb="",gb=!1,yb=["sc_thumbdiv","sc_img","sc_infodiv","sc_displayname","sc_cell","scempty_","search_channel_scroll"];function bb(){qr.Main_CenterLablesVectorPos=1,qr.Main_Go=Or,qr.isLastSChannels=!0,qr.Search_isSearching=!0,vb!==qr.Search_data&&(pb=!1),Tu(),Wc("top_bar_user",n+Bu(S+" '"+qr.Search_data+"'")),document.body.addEventListener("keydown",Ob,!1),pb?(Fu(ab),zc(yb[6]),Bb(),Iu()):kb()}function wb(){Lu(),document.body.removeEventListener("keydown",Ob),Jc(yb[6])}function kb(){Uu("stream_table_search_channel"),Jc(yb[6]),Zc(),ru(),vb=qr.Search_data,pb=!1,db={},sb=mb=fb=0,ab=ib=0,ob=!(P_=!(gb=!(lb=[]))),iu(),Cb(),Mb()}function Cb(){Nu(),rb=!0,cb=0,_b=3500}function Mb(){var e=sb+fb;e&&mb-1<e&&(e=mb-_c,ob=!0),q_("https://api.twitch.tv/kraken/search/channels?query="+encodeURIComponent(qr.Search_data)+"&limit="+_c+"&offset="+e,_b,2,null,Sb,Eb)}function Eb(){++cb<ub?(_b+=500,Mb()):(rb=!1,sb?(ob=!0,Pb()):(P_=!1,$c(),lu(T)))}function Sb(e){var t=JSON.parse(e),n=t.channels.length;mb=parseInt(t._total),n<_c&&(ob=!0);var a=sb;hb=!(sb+=n);var i=n/fc;0<n%fc&&i++;for(var o,s,d,l,r,c=0,u=document.getElementById("stream_table_search_channel"),_=0;_<i;_++){for(s=a/fc+_,d=document.createElement("tr"),o=0;o<fc&&c<n;o++,c++)r=(l=t.channels[c])._id,db[r]?o--:(db[r]=1,d.appendChild(Ib(s,s+"_"+o,[l.name,r,l.logo,l.display_name])));for(;o<fc;o++)ob&&!gb&&(gb=!0,sb=s*fc+o),d.appendChild(qu(yb[5]+s+"_"+o)),lb.push(yb[5]+s+"_"+o);u.appendChild(d)}Pb()}function Ib(e,t,n){return e<4&&Ru(n[2]),Vu(t,yb,n)}function Pb(){if(pb){if(Au(Oc),0<lb.length&&!ob)return Cb(),void xb();ou(ib,ab,fc,sb),lb=[]}else hb?lu(d):(pb=!0,Au(Oc),Bb(),Iu()),zc(yb[6]),P_=!1,$c();rb=!1}function xb(){du(lb.length);var e=sb+fb;e&&mb-1<e&&(e=mb-hc,ob=!0),q_("https://api.twitch.tv/kraken/search/channels?query="+encodeURIComponent(qr.Search_data)+"&limit="+hc+"&offset="+e,_b,2,null,Tb,Lb)}function Lb(){++cb<ub?(_b+=500,xb()):(ob=!0,sb-=lb.length,lb=[],Pb())}function Tb(e){var t,n,a=JSON.parse(e),i=a.channels.length,o=0,s=0,d=[];for(mb=parseInt(a._total),i<hc&&(ob=!0);o<lb.length&&s<i;o++,s++)n=(t=a.channels[s])._id,db[n]?o--:(db[n]=1,Ju(lb[o],[t.name,n,t.logo,t.display_name],yb),d.push(o));for(o=d.length-1;-1<o;o--)lb.splice(d[o],1);fb+=s,ob&&(sb-=lb.length,lb=[]),Pb()}function Bb(){t_(ab,ib,yb,fc,sb),sb/fc<ab+mc&&!ob&&!rb&&(Cb(),Mb()),zr&&Gb()}function Gb(){sb&&c_(ab+"_"+ib,yb)}function Ob(e){var t;if(!P_&&!e_())switch(Qu(),e.keyCode){case Aa:pu()?hu():_u()?uu():(Gb(),L_(Ob));break;case Ta:if(wu(ab,ib-1,yb[0]))Gb(),ib--,Bb();else for(t=fc-1;-1<t;t--)if(wu(ab-1,t,yb[0])){Gb(),ab--,ib=t,Bb();break}break;case Ga:wu(ab,ib+1,yb[0])?(Gb(),ib++,Bb()):wu(ab+1,0,yb[0])&&(Gb(),ab++,ib=0,Bb());break;case Ba:for(t=0;t<fc;t++)if(wu(ab-1,ib-t,yb[0])){Gb(),ab--,ib-=t,Bb();break}break;case Oa:for(t=0;t<fc;t++)if(wu(ab+1,ib-t,yb[0])){Gb(),ab++,ib-=t,Bb();break}break;case xa:case Pa:case La:case Ua:qr.Main_selectedChannel=document.getElementById(yb[4]+ab+"_"+ib).getAttribute(Ec),qr.Main_selectedChannel_id=document.getElementById(yb[4]+ab+"_"+ib).getAttribute("data-id"),qr.Main_selectedChannelDisplayname=document.getElementById(yb[3]+ab+"_"+ib).textContent,document.body.removeEventListener("keydown",Ob),qr.Main_BeforeChannel=Or,qr.Main_Go=xr,qr.Main_BeforeChannelisSet=!0,zs=Xa=!1,Jc(yb[6]),Eu()}}var Ub=!1,Ab=0,Nb=0,Hb=0,Fb=0,Db=5,Rb=3500,qb=0,Vb=0,Jb=!1,zb=!1,Xb="",jb=["sgthumbdiv","sgimg","sginfodiv","sgdisplayname","sgviwers","sgcell","sgempty_","search_games_scroll"];function Yb(){qr.Main_CenterLablesVectorPos=1,qr.Main_Go=Ir,qr.Search_isSearching=!0,Tu(),Xb!==qr.Search_data&&(Ub=!1),Wc("top_bar_user",n+Bu(f+" '"+qr.Search_data+"'")),document.body.addEventListener("keydown",ow,!1),Ub?(Fu(Ab),zc(jb[7]),aw(),Iu()):Kb()}function Wb(){qr.Search_isSearching||Lu(),document.body.removeEventListener("keydown",ow),qr.Games_return=!1,Jc(jb[7])}function Kb(){Uu("stream_table_search_game"),Jc(jb[7]),Zc(),ru(),Xb=qr.Search_data,zb=Ub=!1,Ab=Nb=Hb=Vb=qb=0,iu(),Zb(),$b()}function Zb(){Nu(),P_=!0,Fb=0,Rb=3500}function $b(){q_("https://api.twitch.tv/kraken/search/games?query="+encodeURIComponent(qr.Search_data),Rb,2,null,ew,Qb)}function Qb(){++Fb<Db?(Rb+=500,$b()):(P_=!1,Hb?nw():($c(),lu(T)))}function ew(e){var t=JSON.parse(e),n=0;null!==t.games&&(n=t.games.length);var a=Hb;Jb=!(Hb+=n);var i=n/cc;0<n%cc&&i++;for(var o,s,d,l,r=0,c=document.getElementById("stream_table_search_game"),u=0;u<i;u++){for(s=a/cc+u,d=document.createElement("tr"),o=0;o<cc&&r<n;o++,r++)l=t.games[r],d.appendChild(tw(s,s+"_"+o,[l.name,l.box.template.replace("{width}x{height}",Cc),""]));for(;o<cc;o++)zb||(zb=!0,Hb=s*cc+o),d.appendChild(qu(jb[6]+s+"_"+o));c.appendChild(d)}nw()}function tw(e,t,n){return e<2&&Ru(n[1]),Wu(t,jb,n)}function nw(){Ub||(Jb?lu(d):(Ub=!0,Au(Uc),aw(),Iu()),$c()),zc(jb[7]),P_=!1,ou(Nb,Ab,cc,Hb)}function aw(){a_(Ab,Nb,jb,cc,Hb),zr&&iw()}function iw(){Hb&&c_(Ab+"_"+Nb,jb)}function ow(e){var t;if(!P_&&!e_())switch(Qu(),e.keyCode){case Aa:pu()?hu():_u()?uu():(iw(),L_(ow));break;case Ta:if(wu(Ab,Nb-1,jb[0]))iw(),Nb--,aw();else for(t=cc-1;-1<t;t--)if(wu(Ab-1,t,jb[0])){iw(),Ab--,Nb=t,aw();break}break;case Ga:wu(Ab,Nb+1,jb[0])?(iw(),Nb++,aw()):wu(Ab+1,0,jb[0])&&(iw(),Ab++,Nb=0,aw());break;case Ba:for(t=0;t<cc;t++)if(wu(Ab-1,Nb-t,jb[0])){iw(),Ab--,Nb-=t,aw();break}break;case Oa:for(t=0;t<cc;t++)if(wu(Ab+1,Nb-t,jb[0])){iw(),Ab++,Nb-=t,aw();break}break;case xa:case Pa:case La:case Ua:qr.gameSelectedOld=qr.Main_gameSelected,Wb(),qr.Main_gameSelected=document.getElementById(jb[5]+Ab+"_"+Nb).getAttribute(Ec),document.body.removeEventListener("keydown",ow),qr.Main_Go=kr,qr.Games_return=!0,Eu()}}var sw=0,dw=0,lw=!1;function rw(){ru(),Jc("label_refresh"),Vc("label_side_panel","icon-arrow-circle-left",P),Kc("top_bar_user",n),document.getElementById("top_lables").style.marginLeft="14%",document.getElementById("top_bar_live").style.display="none",document.getElementById("top_bar_featured").style.display="none",document.getElementById("top_bar_game").style.display="none",document.getElementById("top_bar_vod").style.display="none",document.getElementById("top_bar_clip").style.display="none",rr.placeholder=k,jc("top_bar_user","icon_center_focus"),zc("search_scroll"),dw=sw=0,_w(),mw()}function cw(){hw(!1),document.body.removeEventListener("keydown",fw),_w(),qr.Main_Go=qr.Main_BeforeSearch,document.getElementById("top_lables").style.marginLeft="18.5%",Kc("top_bar_user",u),Yc("top_bar_user","icon_center_focus"),Vc("label_side_panel","icon-ellipsis",Rn),zc("label_refresh"),document.getElementById("top_bar_live").style.display="inline-block",document.getElementById("top_bar_featured").style.display="inline-block",document.getElementById("top_bar_game").style.display="inline-block",document.getElementById("top_bar_vod").style.display="inline-block",document.getElementById("top_bar_clip").style.display="inline-block",rr.value="",Jc("search_scroll")}function uw(){cw(),f_(function(){dw?1===dw?Yb():2===dw&&Uw():bb()})}function _w(){Yc("chanel_button","button_search_focused"),Yc("game_button","button_search_focused"),Yc("live_button","button_search_focused"),sw&&(dw?1===dw?jc("game_button","button_search_focused"):2===dw&&jc("live_button","button_search_focused"):jc("chanel_button","button_search_focused"))}function fw(e){if(!lw)switch(e.keyCode){case Aa:pu()?hu():_u()?uu():(cw(),Eu());break;case Ta:1===sw&&(--dw<0&&(dw=2),_w());break;case Ga:1===sw&&(2<++dw&&(dw=0),_w());break;case Ba:1===sw&&(sw=0,_w(),mw());break;case Oa:sw?1===sw&&(sw=0,_w(),mw()):(hw(!1),sw=1,_w());break;case xa:case Pa:case La:case Ua:sw?""!==rr.value&&null!==rr.value?(qr.Search_data=rr.value,rr.value="",uw()):(lu(s),window.setTimeout(function(){ru()},1e3)):mw()}}function mw(){document.body.removeEventListener("keydown",fw),document.body.addEventListener("keydown",vw,!1),rr.placeholder=k,rr.focus(),lw=!0}function hw(e){rr.blur(),pw(),document.body.removeEventListener("keydown",vw),rr.placeholder=E+k,e&&document.body.addEventListener("keydown",fw,!1),lw=!1}function pw(){if(null!==rr){var e=rr.cloneNode(!0);rr.parentNode.replaceChild(e,rr),rr=document.getElementById("search_input")}}function vw(e){switch(e.keyCode){case Aa:_u()?uu():pu()?hu():(cw(),Eu());break;case Da:rr.value="";break;case Ha:case Oa:hw(!0),sw=1,_w();break;case Na:rr.value=rr.value.slice(0,-1);break;case Fa:rr.value+=" "}}var gw=0,yw=0,bw=!1,ww=0,kw={},Cw=[],Mw=!1,Ew=0,Sw=5,Iw=3500,Pw=0,xw=0,Lw=!1,Tw=!1,Bw=!1,Gw="",Ow=["sl_thumbdiv","sl_img","sl_infodiv","sl_displayname","sl_streamtitle","sl_streamgame","sl_viwers","sl_quality","sl_cell","slempty_","search_live_scroll"];function Uw(){qr.Main_CenterLablesVectorPos=1,qr.Main_Go=Pr,qr.Search_isSearching=!0,Tu(),Gw!==qr.Search_data&&(Tw=!1),Wc("top_bar_user",n+Bu(_+" '"+qr.Search_data+"'")),document.body.addEventListener("keydown",Yw,!1),Tw?(Fu(gw),zc(Ow[10]),Xw(),Iu()):Nw()}function Aw(){Lu(),document.body.removeEventListener("keydown",Yw),Jc(Ow[10])}function Nw(){Uu("stream_table_search_live"),Jc(Ow[10]),Zc(),ru(),Gw=qr.Search_data,Tw=!1,xw=Pw=0,kw={},gw=yw=ww=0,bw=!(P_=!(Bw=!(Cw=[]))),iu(),Hw(),Fw()}function Hw(){Nu(),Mw=!0,Ew=0,Iw=3500}function Fw(){var e=ww+Pw;e&&xw-1<e&&(e=xw-sc,bw=!0),q_("https://api.twitch.tv/kraken/search/streams?query="+encodeURIComponent(qr.Search_data)+"&limit="+sc+"&offset="+e,Iw,2,null,Rw,Dw)}function Dw(){++Ew<Sw?(Iw+=500,Fw()):(Mw=!1,ww?(bw=!0,qw()):(P_=!1,$c(),lu(T)))}function Rw(e){var t=JSON.parse(e),n=t.streams.length;xw=parseInt(t._total),n<sc&&(bw=!0);var a=ww;Lw=!(ww+=n);var i=n/dc;0<n%dc&&i++;for(var o,s,d,l,r,c=0,u=document.getElementById("stream_table_search_live"),_=0;_<i;_++){for(s=a/dc+_,d=document.createElement("tr"),o=0;o<dc&&c<n;o++,c++)r=(l=t.streams[c]).channel._id,kw[r]?o--:(kw[r]=1,d.appendChild(Xu(s,s+"_"+o,[l.channel.name,r],Ow,[l.preview.template.replace("{width}x{height}",kc),bu(JSON.stringify(l.stream_type))+l.channel.display_name,l.channel.status,l.game,y+Kh(l.created_at)+b+", "+h+gu(l.viewers)+q,yu(l.video_height,l.average_fps,l.channel.language)])));for(;o<dc;o++)bw&&!Bw&&(Bw=!0,ww=s*dc+o),d.appendChild(qu(Ow[9]+s+"_"+o)),Cw.push(Ow[9]+s+"_"+o);u.appendChild(d)}qw()}function qw(){if(Tw){if(Au(Uc),0<Cw.length&&!bw)return Hw(),void Vw();ou(yw,gw,dc,ww),Cw=[]}else Lw?lu(d):(Tw=!0,Au(Uc),Xw(),Iu()),zc(Ow[10]),P_=!1,$c();Mw=!1}function Vw(){du(Cw.length);var e=ww+Pw;e&&xw-1<e&&(e=xw-hc,bw=!0),q_("https://api.twitch.tv/kraken/search/streams?query="+encodeURIComponent(qr.Search_data)+"&limit="+hc+"&offset="+e,Iw,2,null,zw,Jw)}function Jw(){++Ew<Sw?(Iw+=500,Vw()):(bw=!0,ww-=Cw.length,Cw=[],qw())}function zw(e){var t,n,a=JSON.parse(e),i=a.streams.length,o=0,s=0,d=[];for(xw=parseInt(a._total),i<hc&&(bw=!0);o<Cw.length&&s<i;o++,s++)n=(t=a.streams[s]).channel._id,kw[n]?o--:(kw[n]=1,ju(Cw[o],[t.channel.name,n],[t.preview.template.replace("{width}x{height}",kc),bu(JSON.stringify(t.stream_type))+t.channel.display_name,t.channel.status,t.game,y+Kh(t.created_at)+b+", "+h+gu(t.viewers)+q,yu(t.video_height,t.average_fps,t.channel.language)],Ow),d.push(o));for(o=d.length-1;-1<o;o--)Cw.splice(d[o],1);Pw+=s,bw&&(ww-=Cw.length,Cw=[]),qw()}function Xw(){n_(gw,yw,Ow,dc,ww),ww/dc<gw+lc&&!bw&&!Mw&&(Hw(),Fw()),zr&&jw()}function jw(){ww&&c_(gw+"_"+yw,Ow)}function Yw(e){var t;if(!P_&&!e_())switch(Qu(),e.keyCode){case Aa:pu()?hu():_u()?uu():(jw(),L_(Yw));break;case Ta:if(wu(gw,yw-1,Ow[0]))jw(),yw--,Xw();else for(t=dc-1;-1<t;t--)if(wu(gw-1,t,Ow[0])){jw(),gw--,yw=t,Xw();break}break;case Ga:wu(gw,yw+1,Ow[0])?(jw(),yw++,Xw()):wu(gw+1,0,Ow[0])&&(jw(),gw++,yw=0,Xw());break;case Ba:for(t=0;t<dc;t++)if(wu(gw-1,yw-t,Ow[0])){jw(),gw--,yw-=t,Xw();break}break;case Oa:for(t=0;t<dc;t++)if(wu(gw+1,yw-t,Ow[0])){jw(),gw++,yw-=t,Xw();break}break;case xa:case Pa:case La:case Ua:i_(gw+"_"+yw,Ow,Yw)}}var Ww=0,Kw={restor_playback:{values:["off","on"],defaultValue:2},chat_font_size:{values:["60%","80%","100%","120%","140%"],defaultValue:3},chat_brightness:{values:["0%","5%","10%","15%","20%","25%","30%","35%","40%","45%","50%","55%","60%","65%","70%","75%","80%","85%","90%","95%","100%"],defaultValue:11},force_disable_chat:{values:["off","on"],defaultValue:2},videos_animation:{values:["off","on"],defaultValue:2},clock_offset:{values:Zw(),defaultValue:49},content_lang:{values:["All","Dansk [DA]","Deutsch [DE]","English [EN][EN-GB]","English - USA [EN]","English - UK [EN-GB]","Español [ES][ES-MX]","Español - España [ES]","Español - Latinoamérica [ES-MX]","Français [FR]","Italiano [IT]","Magyar [HU]","Nederlands [NL]","Norsk [NO]","Polski [PL]","Português [PT][PT-BR]","Português -Portugal [PT]","Português - Brasil [PT-BR]","Slovenčina [SK]","Suomi [FI]","Svenska [SV]","Tiếng Việt [VI]","Türkçe [TR]","Čeština [CS]","Ελληνικά [EL]","Български [BG]","Русский [RU]","ภาษาไทย [TH]","中文 [ZH-ALL]","中文 简体 [ZH-CN]","中文 繁體 [ZH-TW]","日本語 [JA]","한국어 [KO]","Română [RO]"],set_values:["","da","de","en,en-gb","en","en-gb","es,es-mx","es","es-mx","fr","it","hu","nl","no","pl","pt,pt-br","pt","pt-br","sk","fi","sv","vi","tr","cs","el","bg","ru","th","zh-cn,zh-tw","zh-cn","zh-tw","ja","ko","ro"],defaultValue:1}};function Zw(){var e=[],t=43200,n=0;for(Km=0;n<48;n++)e.push("-"+Yh(t)),t-=900;for(e.push(Yh(0)),t=900,n=0;n<48;n++)e.push(Yh(t)),t+=900;return e}var $w=[],Qw=0;function ek(){Mu(),document.body.addEventListener("keydown",yk,!1),Vc("label_refresh","icon-arrow-circle-left",P),Kc("top_bar_user",a),document.getElementById("top_lables").style.marginLeft="14%",document.getElementById("top_bar_live").style.display="none",document.getElementById("top_bar_featured").style.display="none",document.getElementById("top_bar_game").style.display="none",document.getElementById("top_bar_vod").style.display="none",document.getElementById("top_bar_clip").style.display="none",jc("top_bar_user","icon_center_focus"),zc("settings_scroll"),fk(Ww=0)}function tk(){document.body.removeEventListener("keydown",yk),mk(),Kc("top_bar_user",u),document.getElementById("top_lables").style.marginLeft="18.5%",document.getElementById("top_bar_live").style.display="inline-block",document.getElementById("top_bar_featured").style.display="inline-block",document.getElementById("top_bar_game").style.display="inline-block",document.getElementById("top_bar_vod").style.display="inline-block",document.getElementById("top_bar_clip").style.display="inline-block",Yc("top_bar_user","icon_center_focus"),Vc("label_refresh","icon-refresh",t+Zt),Jc("settings_scroll")}function nk(){var e,t="";t+=ak("general",kn),e="content_lang",$w.push(e),t+=ik(e,Zn),e="clock_offset",$w.push(e),t+=ik(e,Wn),e="restor_playback",$w.push(e),Kw[e].values=[On,Gn],t+=ok(e,Un,An),e="videos_animation",$w.push(e),Kw[e].values=[On,Gn],t+=ik(e,Dn),t+=ak("play",pn),e="chat_font_size",$w.push(e),t+=ok(e,Nn,Hn),e="chat_brightness",$w.push(e),t+=ik(e,sa),e="force_disable_chat",$w.push(e),Kw[e].values=[On,Gn],Wc("settings_main",t+=ok(e,ia,oa)),Qw=$w.length}function ak(e,t){return'<div id="setting_title_'+e+'" class="settings_section">'+t+"</div>"}function ik(e,t){return'<div id="'+e+'_div" class="settings_div"><div id="'+e+'_name" class="settings_name">'+t+'</div><div class="settings_arraw_div"><div id="'+e+'arrow_left" class="left"></div></div><div id="'+e+'" class="strokedextramini settings_value">'+rk(e)+'</div><div class="settings_arraw_div"><div id="'+e+'arrow_right" class="right"></div></div></div>'}function ok(e,t,n){return'<div id="'+e+'_div" class="settings_div"><div id="'+e+'_name" class="settings_name">'+t+'<div id="'+e+'_summary" class="settings_summary" style="font-size: 65%;">'+n+'</div></div><div class="settings_arraw_div"><div id="'+e+'arrow_left" class="left"></div></div><div id="'+e+'" class="strokedextramini settings_value">'+rk(e)+'</div><div class="settings_arraw_div"><div id="'+e+'arrow_right" class="right"></div></div></div>'}function sk(e,t,n){Wc(e+"_name",t+'<div id="'+e+'_summary" class="settings_summary" style="font-size: 65%;">'+n+"</div>")}function dk(){var e="";for(e in Kc("setting_title_general",kn),Kc((e="clock_offset")+"_name",Wn),Kc((e="content_lang")+"_name",Zn),Kw[e].values[0]=$n,Kc(e,rk(e)),Kc("setting_title_play",pn),sk(e="restor_playback",Un,An),Kw[e].values=[On,Gn],sk(e="chat_font_size",Nn,Hn),sk(e="force_disable_chat",ia,oa),Kw[e].values=[On,Gn],Kc((e="videos_animation")+"_name",Dn),Kw[e].values=[On,Gn],Kc((e="chat_brightness")+"_name",sa),Kw)Kw.hasOwnProperty(e)&&Kc(e,rk(e))}function lk(){for(var e in Kw)Kw[e].defaultValue=N_(e,Kw[e].defaultValue),Kw[e].defaultValue-=1;gk(),$f=(.05*uk("chat_brightness")).toFixed(2),fS=uk("videos_animation"),Qr=ck("content_lang"),qr.Play_ChatForceDisable=uk("force_disable_chat")}function rk(e){return Kw[e].values[uk(e)]}function ck(e){return Kw[e].set_values[uk(e)]}function uk(e){return Kw[e].defaultValue}function _k(e){return Kw[e].values.length-1}function fk(e){var t=$w[Ww];jc(t,"settings_value_focus"),jc(t+"_div","settings_div_focus"),pk(e)}function mk(){var e=$w[Ww];document.getElementById(e+"arrow_left").style.opacity="0",document.getElementById(e+"arrow_right").style.opacity="0",Yc(e,"settings_value_focus"),Yc(e+"_div","settings_div_focus")}function hk(e){var t=$w[e];A_(t,uk(t)+1),Kc(t,rk(t)),pk(e),vk(e)}function pk(e){var t=$w[e],n=uk(t),a=_k(t);0<n&&n<a?(document.getElementById(t+"arrow_left").style.opacity="1",document.getElementById(t+"arrow_right").style.opacity="1"):n===a?(document.getElementById(t+"arrow_left").style.opacity="1",document.getElementById(t+"arrow_right").style.opacity="0.2"):(document.getElementById(t+"arrow_left").style.opacity="0.2",document.getElementById(t+"arrow_right").style.opacity="1")}function vk(e){"content_lang"===(e=$w[e])?Qr=ck("content_lang"):"videos_animation"===e?fS=uk("videos_animation"):"chat_brightness"===e?($f=(.05*uk("chat_brightness")).toFixed(2),Lp(!1)):"force_disable_chat"===e?qr.Play_ChatForceDisable=uk("force_disable_chat"):"chat_font_size"===e?ph():"clock_offset"===e&&(gk(),p_())}function gk(){var e=uk("clock_offset");xc=e<48?-9e5*(48-e):9e5*(e-48)}function yk(e){var t;switch(e.keyCode){case Aa:_u()?uu():pu()?hu():(tk(),Eu());break;case Ta:0<uk(t=$w[Ww])&&(Kw[t].defaultValue-=1,hk(Ww));break;case Ga:uk(t=$w[Ww])<_k(t)&&(Kw[t].defaultValue+=1,hk(Ww));break;case Ba:0<Ww&&(mk(),fk(--Ww));break;case Oa:Ww<Qw-1&&(mk(),fk(++Ww))}}var bk=function(){var e={parse:function(e){return t(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),function(e){var t=function(e){for(var t=e.indexOf(d)<0?e.replace(s,""):e,n=[],a=0,i=0,o=0;o<t.length;)a=t.charCodeAt(o++),i?(n.push((65536+(i-55296<<10)+(a-56320)).toString(16)),i=0):55296<=a&&a<=56319?i=a:n.push(a.toString(16));return n.join("-")}(e);return t?'<img class="emoji" src="https://twemoji.maxcdn.com/2/72x72/'+t+'.png"/>':e})},replace:t},n=/(?:\ud83d[\udc68\udc69])(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddb0-\uddb3])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f)|[\u0023\u002a\u0030-\u0039]\ufe0f?\u20e3|(?:[\u00a9\u00ae\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddb5\uddb6\uddb8\uddb9\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a-\udc6d\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\udeeb\udeec\udef4-\udef9]|\ud83e[\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd40-\udd45\udd47-\udd70\udd73-\udd76\udd7a\udd7c-\udda2\uddb4\uddb7\uddc0-\uddc2\uddd0\uddde-\uddff]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,s=/\uFE0F/g,d=String.fromCharCode(8205);return e;function t(e,t){return String(e).replace(n,t)}}(),wk=0,kk=0,Ck=!1,Mk=0,Ek=!1,Sk=0,Ik=5,Pk=3500,xk=[],Lk=0,Tk=!1,Bk=!1,Gk="",Ok=!1,Uk=["uc_thumbdiv","uc_img","uc_infodiv","uc_displayname","uc_cell","ucempty_","user_channels_scroll"];function Ak(){qr.Main_CenterLablesVectorPos=1,qr.Main_Go=Gr,qr.isLastSChannels=!1,Vc("label_side_panel","icon-arrow-circle-left",P),jc("top_bar_user","icon_center_focus"),Wc("top_bar_user",u+Bu(Ri[qr.Users_Position].name+Q)),document.body.addEventListener("keydown",Yk,!1),Gk!==Ri[qr.Users_Position].name&&(Bk=!1),Bk?(Fu(wk),zc(Uk[6]),Xk(),Iu()):Hk()}function Nk(){qr.Users_Position=0,Yc("top_bar_user","icon_center_focus"),document.body.removeEventListener("keydown",Yk),Kc("top_bar_user",u),Vc("label_side_panel","icon-ellipsis",Rn),Jc(Uk[6])}function Hk(){Uu("stream_table_user_channels"),Jc(Uk[6]),Zc(),ru(),Gk=Ri[qr.Users_Position].name,wk=kk=Mk=Lk=0,Ok=Ck=Bk=!1,P_=!0,iu(),xk=[],Fk(),Dk()}function Fk(){Nu(),Ek=!0,Sk=0,Pk=3500}function Dk(){q_("https://api.twitch.tv/kraken/users/"+encodeURIComponent(Ri[qr.Users_Position].id)+"/follows/channels?limit=100&offset="+Lk+"&sortby=created_at&",Pk,2,null,qk,Rk)}function Rk(){++Sk<Ik?(Pk+=500,Dk()):(Ek=!1,Mk?(Ck=!0,zk()):(P_=!1,$c(),lu(T)))}function qk(e){var t=JSON.parse(e).follows,n=t.length;if(n){for(var a="",i=0;i<n;i++)a=t[i].channel.name+","+t[i].channel._id+","+t[i].channel.logo+","+t[i].channel.display_name,-1===xk.indexOf(a)&&xk.push(a);Lk+=n,Fk(),Dk()}else xk.sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}),Vk()}function Vk(){var e=_c,t=Mk,n=xk.length-t;n<e&&(e=n),e<_c&&(Ck=!0),Tk=!(Mk+=e);var a=e/fc;0<e%fc&&a++;for(var i,o,s,d=t,l=document.getElementById("stream_table_user_channels"),r=0;r<a;r++){for(o=t/fc+r,s=document.createElement("tr"),i=0;i<fc&&d<xk.length;i++,d++)s.appendChild(Jk(o,o+"_"+i,xk[d].split(",")));for(;i<fc;i++)Ck&&!Ok&&(Ok=!0,Mk=o*fc+i),s.appendChild(qu(Uk[5]+o+"_"+i));l.appendChild(s)}zk()}function Jk(e,t,n){return e<4&&Ru(n[2]),Vu(t,Uk,n)}function zk(){Bk?Au(Oc):(Tk?lu(B+Q):(Bk=!0,Au(Oc),Xk(),Iu()),zc(Uk[6]),P_=!1,$c()),Ek=!1,ou(kk,wk,fc,Mk)}function Xk(){t_(wk,kk,Uk,fc,Mk),Mk/fc<wk+mc&&!Ck&&!Ek&&(Fk(),Dk()),zr&&jk()}function jk(){Mk&&c_(wk+"_"+kk,Uk)}function Yk(e){var t;if(!P_&&!e_())switch(Qu(),e.keyCode){case Aa:pu()?hu():_u()?uu():(jk(),L_(Yk));break;case Ta:if(wu(wk,kk-1,Uk[0]))jk(),kk--,Xk();else for(t=fc-1;-1<t;t--)if(wu(wk-1,t,Uk[0])){jk(),wk--,kk=t,Xk();break}break;case Ga:wu(wk,kk+1,Uk[0])?(jk(),kk++,Xk()):wu(wk+1,0,Uk[0])&&(jk(),wk++,kk=0,Xk());break;case Ba:for(t=0;t<fc;t++)if(wu(wk-1,kk-t,Uk[0])){jk(),wk--,kk-=t,Xk();break}break;case Oa:for(t=0;t<fc;t++)if(wu(wk+1,kk-t,Uk[0])){jk(),wk++,kk-=t,Xk();break}break;case xa:case Pa:case La:case Ua:qr.Main_selectedChannel=document.getElementById(Uk[4]+wk+"_"+kk).getAttribute(Ec),qr.Main_selectedChannel_id=document.getElementById(Uk[4]+wk+"_"+kk).getAttribute("data-id"),qr.Main_selectedChannelDisplayname=document.getElementById(Uk[3]+wk+"_"+kk).textContent,qr.Main_selectedChannelLogo=document.getElementById(Uk[1]+wk+"_"+kk).src,document.body.removeEventListener("keydown",Yk),qr.Main_BeforeChannel=Gr,qr.Main_Go=xr,qr.Main_BeforeChannelisSet=!0,zs=Xa=!0,Jc(Uk[6]),Eu()}}var Wk=0,Kk=0,Zk=!1,$k=0,Qk={},eC=[],tC=!1,nC=0,aC=5,iC=3500,oC=0,sC=0,dC=!1,lC=["uh_thumbdiv","uh_img","uh_infodiv","uh_displayname","uh_hosttitle","uh_hostgame","uh_viwers","uh_quality","uh_cell","uhempty_","user_host_scroll"],rC=!1,cC="",uC=!1;function _C(){qr.Main_CenterLablesVectorPos=1,qr.Main_Go=Mr,Vc("label_side_panel","icon-arrow-circle-left",P),jc("top_bar_user","icon_center_focus"),Wc("top_bar_user",u+Bu(Ri[qr.Users_Position].name+Z)),document.body.addEventListener("keydown",EC,!1),cC!==Ri[qr.Users_Position].name&&(rC=!1),rC?(Fu(Wk),zc(lC[10]),CC(),Iu()):mC()}function fC(){qr.Users_Position=0,Yc("top_bar_user","icon_center_focus"),document.body.removeEventListener("keydown",EC),Kc("top_bar_user",u),Vc("label_side_panel","icon-ellipsis",Rn),Jc(lC[10])}function mC(){Uu("stream_table_user_host"),Jc(lC[10]),Zc(),ru(),cC=Ri[qr.Users_Position].name,rC=!1,Qk={},$k=sC=oC=0,Wk=Kk=0,Zk=!(P_=!(uC=!(eC=[]))),iu(),hC(),pC()}function hC(){Nu(),tC=!0,nC=0,iC=3500}function pC(){var e=$k+oC;e&&sC-1<e&&(e=sC-sc,Zk=!0),q_("https://api.twitch.tv/api/users/"+encodeURIComponent(Ri[qr.Users_Position].name)+"/followed/hosting?limit="+sc+"&offset="+e,iC,2,null,gC,vC)}function vC(){++nC<aC?(iC+=500,pC()):(tC=!1,$k?(Zk=!0,yC()):(P_=!1,$c(),lu(T)))}function gC(e){var t=JSON.parse(e),n=t.hosts.length;sC=parseInt(t._total),n<sc&&(Zk=!0);var a=$k;dC=!($k+=n);var i=n/dc;0<n%dc&&i++;for(var o,s,d,l,r,c=0,u=document.getElementById("stream_table_user_host"),_=0;_<i;_++){for(s=a/dc+_,d=document.createElement("tr"),o=0;o<dc&&c<n;o++,c++)r=(l=t.hosts[c]).target._id+""+l._id,Qk[r]?o--:(Qk[r]=1,d.appendChild(Xu(s,s+"_"+o,[l.target.channel.name,l.target._id],lC,[l.target.preview_urls.template.replace("{width}x{height}",kc),l.display_name+ae+l.target.channel.display_name,l.target.title,l.target.meta_game,h.charAt(1).toUpperCase()+h.slice(2)+gu(l.target.viewers)+q,""])));for(;o<dc;o++)Zk&&!uC&&(uC=!0,$k=s*dc+o),d.appendChild(qu(lC[9]+s+"_"+o)),eC.push(lC[9]+s+"_"+o);u.appendChild(d)}yC()}function yC(){if(rC){if(Au(Uc),0<eC.length&&!Zk)return hC(),void bC();ou(Kk,Wk,dc,$k),eC=[]}else dC?lu(B+Z):(rC=!0,CC(),Au(Uc),Iu()),zc(lC[10]),P_=!1,$c();tC=!1}function bC(){du(eC.length);var e=$k+oC;e&&sC-1<e&&(e=sC-hc,Zk=!0),q_("https://api.twitch.tv/api/users/"+encodeURIComponent(Ri[qr.Users_Position].name)+"/followed/hosting?limit="+hc+"&offset="+e,iC,2,null,kC,wC)}function wC(){++nC<aC?(iC+=500,bC()):(Zk=!0,$k-=eC.length,eC=[],yC())}function kC(e){var t,n,a=JSON.parse(e),i=a.streams.length,o=0,s=0,d=[];for(sC=parseInt(a._total),i<hc&&(Zk=!0);o<eC.length&&s<i;o++,s++)n=(t=a.hosts[s]).target._id+""+t._id,Qk[n]?o--:(Qk[n]=1,ju(eC[o],[t.target.channel.name,t.target._id],[t.target.preview_urls.template.replace("{width}x{height}",kc),t.display_name+ae+t.target.channel.display_name,t.target.title,t.target.meta_game,h.charAt(1).toUpperCase()+h.slice(2)+gu(t.target.viewers)+q,""],lC),d.push(o));for(o=d.length-1;-1<o;o--)eC.splice(d[o],1);oC+=s,Zk&&($k-=eC.length,eC=[]),yC()}function CC(){n_(Wk,Kk,lC,dc,$k),$k/dc<Wk+lc&&!Zk&&!tC&&(hC(),pC()),zr&&MC()}function MC(){$k&&c_(Wk+"_"+Kk,lC)}function EC(e){var t;if(!P_&&!e_())switch(Qu(),e.keyCode){case Aa:pu()?hu():_u()?uu():(MC(),L_(EC));break;case Ta:if(wu(Wk,Kk-1,lC[0]))MC(),Kk--,CC();else for(t=dc-1;-1<t;t--)if(wu(Wk-1,t,lC[0])){MC(),Wk--,Kk=t,CC();break}break;case Ga:wu(Wk,Kk+1,lC[0])?(MC(),Kk++,CC()):wu(Wk+1,0,lC[0])&&(MC(),Wk++,Kk=0,CC());break;case Ba:for(t=0;t<dc;t++)if(wu(Wk-1,Kk-t,lC[0])){MC(),Wk--,Kk-=t,CC();break}break;case Oa:for(t=0;t<dc;t++)if(wu(Wk+1,Kk-t,lC[0])){MC(),Wk++,Kk-=t,CC();break}break;case xa:case Pa:case La:case Ua:i_(Wk+"_"+Kk,lC,EC)}}var SC,IC,PC,xC=0,LC=5,TC=0,BC=!1,GC="",OC=0,UC=0,AC={},NC=!1,HC=[],FC=null,DC=["ulf_thumbdiv","ulf_img","ulf_infodiv","ulf_displayname","ulf_streamtitle","ulf_streamgame","ulf_viwers","ulf_quality","ulf_cell","ulempty_","user_live_scroll"];function RC(){ao()&&(FC=NC?JSON.parse(document.getElementById(DC[8]+om).getAttribute(Ec))[0]:null,Uu("user_feed_scroll"),Jc("user_feed_scroll"),SC=!0,zc("dialog_loading_feed"),GC="",UC=OC=TC=xC=0,om=0,AC={},HC=[],f_(function(){JC(),zC()}))}function qC(e){for(var t,n=0;n<HC.length;n++)null!==(t=document.getElementById(HC[n].id))&&Nc(t,HC[n].src+Tc,e)}function VC(e,t){HC.push({id:e,src:t})}function JC(){IC=0,PC=3500}function zC(){var e,t="https://api.twitch.tv/kraken/users/"+encodeURIComponent(Ri[qr.Users_Position].id)+"/follows/channels?limit=100&offset="+xC+"&sortby=created_at";if(Lc){if(!(e=Android.mreadUrl(t,PC,2,null)))return void XC();200===(e=JSON.parse(e)).status?jC(e.responseText):XC()}else(e=new XMLHttpRequest).open("GET",t,!0),e.timeout=PC,e.setRequestHeader(gc,wc),e.setRequestHeader(vc,pc),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void jC(e.responseText);XC()}},e.send(null)}function XC(){++IC<LC?(PC+=500,zC()):(SC=!1,TC?(BC=!0,ZC()):(Jc("dialog_loading_feed"),op(T),window.setTimeout(function(){sp()},2e3)))}function jC(e){var t=JSON.parse(e).follows,n=t.length;if(n){for(var a="",i=0;i<n;i++)a=t[i].channel._id+",",-1===GC.indexOf(a)&&(GC+=a);xC+=n,JC(),zC()}else GC=GC.slice(0,-1),JC(),f_(YC)}function YC(){var e=TC+OC;e&&UC-1<e&&(e=UC-sc,BC=!0);var t,n="https://api.twitch.tv/kraken/streams/?channel="+encodeURIComponent(GC)+"&limit=100&offset="+e+"&stream_type=all";if(Lc){if(!(t=Android.mreadUrl(n,PC,2,null)))return void WC();200===(t=JSON.parse(t)).status?KC(t.responseText):WC()}else(t=new XMLHttpRequest).open("GET",n,!0),t.timeout=PC,t.setRequestHeader(gc,wc),t.setRequestHeader(vc,pc),t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void KC(t.responseText);WC()}},t.send(null)}function WC(){++IC<LC?(PC+=500,YC()):(SC=!1,Jc("dialog_loading_feed"),op(T),window.setTimeout(function(){sp()},2e3))}function KC(e){var t=JSON.parse(e),n=t.streams.length;UC=parseInt(t._total),n<sc&&(BC=!0),TC+=n;for(var a,i,o=document.getElementById("user_feed_scroll"),s=0;s<n;s++)i=(a=t.streams[s]).channel._id,AC[i]||(AC[i]=1,null!==FC&&FC===a.channel.name&&(om=s),o.appendChild($C(s,[a.channel.name,i],DC,[a.preview.template.replace("{width}x{height}",kc),bu(JSON.stringify(a.stream_type))+a.channel.display_name,a.channel.status,a.game,y+Kh(a.created_at)+b+", "+h+gu(a.viewers)+q,yu(a.video_height,a.average_fps,a.channel.language)])));ZC()}function ZC(){qC(Uc),Yp(),NC=!(SC=!1),Jc("dialog_loading_feed"),zc("user_feed_scroll"),Xp()}function $C(e,t,n,a){return VC(n[1]+e,a[0]),(Zr=document.createElement("div")).setAttribute("id",n[8]+e),Zr.setAttribute(Ec,JSON.stringify(t)),Zr.className="user_feed_thumb",Zr.innerHTML='<div id="'+n[0]+e+'" class="stream_thumbnail_clip" ><div><img id="'+n[1]+e+'" class="stream_img"></div><div id="'+n[2]+e+'" class="stream_text2"><div id="'+n[3]+e+'" class="stream_channel" style="width: 66%; display: inline-block;">'+a[1]+'</div><div id="'+n[5]+e+'"class="stream_info">'+v+a[3]+"</div></div></div>",Zr}var QC=0,eM=0,tM=!1,nM=0,aM={},iM=[],oM=!1,sM=0,dM=5,lM=3500,rM=0,cM=0,uM=0,_M=!1,fM=["ul_thumbdiv","ul_img","ul_infodiv","ul_displayname","ul_streamtitle","ul_streamgame","ul_viwers","ul_quality","ul_cell","ulempty_","user_live_scroll"],mM=!1,hM="",pM="",vM=!1;function gM(){qr.Main_CenterLablesVectorPos=1,qr.Main_Go=Cr,Vc("label_side_panel","icon-arrow-circle-left",P),jc("top_bar_user","icon_center_focus"),Wc("top_bar_user",u+Bu(Ri[qr.Users_Position].name+K)),document.body.addEventListener("keydown",OM,!1),pM!==Ri[qr.Users_Position].name&&(mM=!1),mM?(Fu(QC),zc(fM[10]),BM(),Iu()):bM()}function yM(){qr.Users_Position=0,Yc("top_bar_user","icon_center_focus"),document.body.removeEventListener("keydown",OM),Kc("top_bar_user",u),Vc("label_side_panel","icon-ellipsis",Rn),Jc(fM[10])}function bM(){Uu("stream_table_user_live"),Jc(fM[10]),Zc(),ru(),mM=!1,pM=Ri[qr.Users_Position].name,cM=rM=uM=0,aM={},QC=eM=nM=0,tM=!(P_=!(vM=!(iM=[]))),hM="",iu(),wM(),kM()}function wM(){Nu(),oM=!0,sM=0,lM=3500}function kM(){var e,t="https://api.twitch.tv/kraken/users/"+encodeURIComponent(Ri[qr.Users_Position].id)+"/follows/channels?limit=100&offset="+uM+"&sortby=created_at";if(Lc){if(!(e=Android.mreadUrl(t,lM,2,null)))return void CM();200===(e=JSON.parse(e)).status?MM(e.responseText):CM()}else(e=new XMLHttpRequest).open("GET",t,!0),e.timeout=lM,e.setRequestHeader(gc,wc),e.setRequestHeader(vc,pc),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void MM(e.responseText);CM()}},e.send(null)}function CM(){++sM<dM?(lM+=500,kM()):(oM=!1,nM?(tM=!0,PM()):(P_=!1,$c(),lu(T)))}function MM(e){var t=JSON.parse(e).follows,n=t.length;if(n){for(var a="",i=0;i<n;i++)a=t[i].channel._id+",",-1===hM.indexOf(a)&&(hM+=a);uM+=n,wM(),kM()}else hM=hM.slice(0,-1),wM(),EM()}function EM(){var e=nM+rM;e&&cM-1<e&&(e=cM-sc,tM=!0);var t,n="https://api.twitch.tv/kraken/streams/?channel="+encodeURIComponent(hM)+"&limit="+sc+"&offset="+e+"&stream_type=all";if(Lc){if(!(t=Android.mreadUrl(n,lM,2,null)))return void SM();200===(t=JSON.parse(t)).status?IM(t.responseText):SM()}else(t=new XMLHttpRequest).open("GET",n,!0),t.timeout=lM,t.setRequestHeader(gc,wc),t.setRequestHeader(vc,pc),t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void IM(t.responseText);SM()}},t.send(null)}function SM(){++sM<dM?(lM+=500,EM()):(oM=!1,$c(),lu(T))}function IM(e){var t=JSON.parse(e),n=t.streams.length;cM=parseInt(t._total),n<sc&&(tM=!0);var a=nM;_M=!(nM+=n);var i=n/dc;0<n%dc&&i++;for(var o,s,d,l,r,c=0,u=document.getElementById("stream_table_user_live"),_=0;_<i;_++){for(s=a/dc+_,d=document.createElement("tr"),o=0;o<dc&&c<n;o++,c++)r=(l=t.streams[c]).channel._id,aM[r]?o--:(aM[r]=1,d.appendChild(Xu(s,s+"_"+o,[l.channel.name,r],fM,[l.preview.template.replace("{width}x{height}",kc),bu(JSON.stringify(l.stream_type))+l.channel.display_name,l.channel.status,l.game,y+Kh(l.created_at)+b+", "+h+gu(l.viewers)+q,yu(l.video_height,l.average_fps,l.channel.language)])));for(;o<dc;o++)tM&&!vM&&(vM=!0,nM=s*dc+o),d.appendChild(qu(fM[9]+s+"_"+o)),iM.push(fM[9]+s+"_"+o);u.appendChild(d)}PM()}function PM(){if(mM){if(Au(Uc),0<iM.length&&!tM)return wM(),void xM();ou(eM,QC,dc,nM),iM=[]}else _M?lu(B+K):(mM=!0,BM(),Au(Uc),Iu()),zc(fM[10]),P_=!1,$c();oM=!1}function xM(){du(iM.length);var e=nM+rM;e&&cM-1<e&&(e=cM-hc,tM=!0);var t,n="https://api.twitch.tv/kraken/streams/?channel="+encodeURIComponent(hM)+"&limit="+hc+"&offset="+e+"&stream_type=all";if(Lc){if(!(t=Android.mreadUrl(n,lM,2,null)))return void LM();200===(t=JSON.parse(t)).status?TM(t.responseText):LM()}else(t=new XMLHttpRequest).open("GET",+Math.round(1e7*Math.random()),!0),t.timeout=lM,t.setRequestHeader(gc,wc),t.setRequestHeader(vc,pc),t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void TM(t.responseText);LM()}},t.send(null)}function LM(){++sM<dM?(lM+=500,xM()):(tM=!0,nM-=iM.length,iM=[],PM())}function TM(e){var t,n,a=JSON.parse(e),i=a.streams.length,o=0,s=0,d=[];for(cM=parseInt(a._total),i<hc&&(tM=!0);o<iM.length&&s<i;o++,s++)n=(t=a.streams[s]).channel._id,aM[n]?o--:(aM[n]=1,ju(iM[o],[t.channel.name,n],[t.preview.template.replace("{width}x{height}",kc),bu(JSON.stringify(t.stream_type))+t.channel.display_name,t.channel.status,t.game,y+Kh(t.created_at)+b+", "+h+gu(t.viewers)+q,yu(t.video_height,t.average_fps,t.channel.language)],fM),d.push(o));for(o=d.length-1;-1<o;o--)iM.splice(d[o],1);rM+=s,tM&&(nM-=iM.length,iM=[]),PM()}function BM(){n_(QC,eM,fM,dc,nM),nM/dc<QC+lc&&!tM&&!oM&&(wM(),kM()),zr&&GM()}function GM(){nM&&c_(QC+"_"+eM,fM)}function OM(e){var t;if(!P_&&!e_())switch(Qu(),e.keyCode){case Aa:pu()?hu():_u()?uu():(GM(),L_(OM));break;case Ta:if(wu(QC,eM-1,fM[0]))GM(),eM--,BM();else for(t=dc-1;-1<t;t--)if(wu(QC-1,t,fM[0])){GM(),QC--,eM=t,BM();break}break;case Ga:wu(QC,eM+1,fM[0])?(GM(),eM++,BM()):wu(QC+1,0,fM[0])&&(GM(),QC++,eM=0,BM());break;case Ba:for(t=0;t<dc;t++)if(wu(QC-1,eM-t,fM[0])){GM(),QC--,eM-=t,BM();break}break;case Oa:for(t=0;t<dc;t++)if(wu(QC+1,eM-t,fM[0])){GM(),QC++,eM-=t,BM();break}break;case xa:case Pa:case La:case Ua:i_(QC+"_"+eM,fM,OM)}}var UM=0,AM=0,NM=8,HM=0,FM=null,DM=["u_thumbdiv","u_img","u_infodiv","u_displayname","u_cell","user_scroll"],RM=!1,qM=!0;function VM(){return jr?(JM(),void Qa(jr)):co()?(qr.Main_CenterLablesVectorPos=1,qr.Main_Go=Br,document.getElementById("screens_holder").style.top=screen.height/100*7+"px",ru(),jc("top_bar_user","icon_center_focus"),document.body.addEventListener("keydown",oE,!1),void(RM?(Fu(UM),zc(DM[5]),KM(),Iu()):zM())):(qr.Main_Go=yr,JM(),void Eu())}function JM(){qr.Users_Position=0,Yc("top_bar_user","icon_center_focus"),document.body.removeEventListener("keydown",oE),Jc(DM[5]),document.getElementById("screens_holder").style.top="0"}function zM(){Uu("stream_table_user"),Jc(DM[5]),Zc(),ru(),P_=!(RM=!1),qM=!(UM=AM=0),f_(function(){XM()})}function XM(){for(var e,t,n,a=document.createElement("tbody"),i=document.getElementById("stream_table_user"),o=0;o<Ri.length;o++)t=0,n=o%2?"B5B5B5":"FFFFFF",(Zr=document.createElement("tr")).className="follower_header",Zr.innerHTML='<div class="follower_header">'+(o?"":se)+Ri[o].name+H+"</div>",i.appendChild(a),i.appendChild(Zr),(e=document.createElement("tr")).appendChild(jM(o+"_"+t,qr.Main_selectedChannelDisplayname,K,"play",n)),t++,e.appendChild(jM(o+"_"+t,qr.Main_selectedChannelDisplayname,Z,"users",n)),t++,e.appendChild(jM(o+"_"+t,qr.Main_selectedChannelDisplayname,Ay.isLive?$:Wt,"gamepad",n)),t++,e.appendChild(jM(o+"_"+t,qr.Main_selectedChannelDisplayname,nn,"movie-play",n)),t++,e.appendChild(jM(o+"_"+t,qr.Main_selectedChannelDisplayname,Q,"filmstrip",n)),t++,o?e.appendChild(jM(o+"_"+t,qr.Main_selectedChannelDisplayname,oe,"arrow-up",n)):e.appendChild(jM(o+"_"+t,qr.Main_selectedChannelDisplayname,ee,"user-plus",n)),t++,e.appendChild(jM(o+"_"+t,qr.Main_selectedChannelDisplayname,te,"user-times",n)),t++,e.appendChild(jM(o+"_"+t,qr.Main_selectedChannelDisplayname,Ri[o].access_token?Et:Mt,"key",n)),i.appendChild(e);YM()}function jM(e,t,n,a,i){return(Zr=document.createElement("td")).setAttribute("id",DM[4]+e),Zr.setAttribute(Ec,t),Zr.className="stream_cell",Zr.innerHTML='<div id="'+DM[0]+e+'" class="stream_thumbnail_channel" ><div id="'+DM[1]+e+'" class="stream_user_icon" style="color: #'+i+';"><i class="icon-'+a+'"></i></div></div><div id="'+DM[2]+e+'" class="stream_text"><div id="'+DM[3]+e+'" class="stream_info_user" style="text-align: center;">'+n+"</div></div>",Zr}function YM(){f_(function(){RM||(RM=!0,KM(),$c(),Iu()),zc(DM[5]),qM=P_=!1})}function WM(){for(var e=0;e<Ri.length;e++)Kc(DM[3]+e+"_2",Ay.isLive?$:Wt)}function KM(){jc(DM[0]+UM+"_"+AM,"stream_thumbnail_focused"),Du(UM)?1<UM?wu(UM+1,0,DM[0])&&r_(DM[5],-1*document.getElementById(DM[4]+UM+"_"+AM).offsetTop+500):r_(DM[5],screen.height/100*7):Zu(),zr&&ZM()}function ZM(){Jr=!1,Yc(DM[0]+UM+"_"+AM,"stream_thumbnail_focused")}function $M(){return qr.Users_Position=UM,3!==AM||Ri[qr.Users_Position].access_token?7===AM&&Ri[qr.Users_Position].access_token?(lu(Et),void window.setTimeout(ru,1500)):(6!==AM&&7!==AM&&(Jc(DM[5]),document.body.removeEventListener("keydown",oE),document.getElementById("screens_holder").style.top="0"),void f_(function(){AM?1===AM?_C():2===AM?(dy=Ay,_y()):3===AM?SE():4===AM?Ak():5===AM?UM?lo(UM):(qr.Main_Before=Br,zi()):6===AM?tE():7!==AM||Ri[qr.Users_Position].access_token||tE():gM()})):(lu(Tn),void window.setTimeout(ru,5e3))}function QM(){window.clearTimeout(FM)}function eE(){FM=window.setTimeout(nE,2e4)}function tE(){eE(),6===AM?Wc("main_dialog_remove",jt+la+Ri[qr.Users_Position].name+"?"):7===AM&&Wc("main_dialog_remove",vt+" "+Ri[qr.Users_Position].name+"?"),zc("main_remove_dialog")}function nE(){QM(),Jc("main_remove_dialog"),HM=0,iE()}function aE(){return Xc("main_remove_dialog")}function iE(){HM?(Yc("remove_cancel","button_search_focused"),jc("remove_yes","button_search_focused")):(jc("remove_cancel","button_search_focused"),Yc("remove_yes","button_search_focused"))}function oE(e){var t;if(!P_&&!e_())switch(Qu(),e.keyCode){case Aa:aE()?nE():_u()?uu():pu()?hu():(ZM(),L_(oE));break;case Ta:if(aE())--HM<0&&(HM=1),iE(),QM(),eE();else if(wu(UM,AM-1,DM[0]))ZM(),AM--,KM();else if(wu(UM-1,0,DM[0])){for(t=NM-1;-1<t;t--)if(wu(UM-1,t,DM[0])){ZM(),UM--,AM=t,KM();break}}else ZM(),AM=NM-1,KM();break;case Ga:aE()?(1<++HM&&(HM=0),iE(),QM(),eE()):(wu(UM,AM+1,DM[0])?(ZM(),AM++):(wu(UM+1,0,DM[0])?(ZM(),UM++):ZM(),AM=0),KM());break;case Ba:for(t=0;t<NM;t++)if(wu(UM-1,AM-t,DM[0])){ZM(),UM--,AM-=t,KM();break}break;case Oa:for(t=0;t<NM;t++)if(wu(UM+1,AM-t,DM[0])){ZM(),UM++,AM-=t,KM();break}break;case xa:case Pa:case La:case Ua:var n;if(aE()){if(6===AM)n=HM,nE(),n&&(document.body.removeEventListener("keydown",oE),JM(),oo(UM));else if(n=HM,nE(),n){qr.Users_AddcodePosition=qr.Users_Position,Iu();var a=Ka,i="https://id.twitch.tv/oauth2/authorize?response_type=code&client_id="+encodeURIComponent(pc)+"&redirect_uri="+a+"&scope=user_follows_edit+user_subscriptions&force_verify=true";window.location=i}}else $M()}}var sE=0,dE=0,lE=!1,rE=0,cE={},uE=[],_E=!1,fE=0,mE=5,hE=3500,pE=0,vE=0,gE=!1,yE=!1,bE="time",wE=2,kE=!1,CE=["uv_thumbdiv","uv_img","uv_infodiv","uv_title","uv_streamon","uv_duration","uv_viwers","uv_quality","uv_cell","uvempty_","user_vod_scroll","uv_game"],ME=!1,EE=!1;function SE(){qr.Main_CenterLablesVectorPos=1,qr.Main_Go=Dr,jc("top_bar_user","icon_center_focus"),Vc("label_side_panel","icon-arrow-circle-left",P),Wc("top_bar_user",u+Bu(Ri[qr.Users_Position].name+(EE?A:U))),document.body.addEventListener("keydown",JE,!1),ME?(Fu(sE),zc(CE[10]),zE(),DE(),Iu()):PE()}function IE(){qr.Users_Position=0,ME&&RE(),Yc("top_bar_user","icon_center_focus"),Vc("label_side_panel","icon-ellipsis",Rn),document.body.removeEventListener("keydown",JE),Kc("top_bar_user",u),Jc(CE[10])}function PE(){ME&&RE(),Uu("stream_table_user_vod"),Jc(CE[10]),Zc(),zE(),ru(),kE=ME=!1,vE=pE=0,cE={},sE=dE=rE=0,lE=!(P_=!(yE=!(uE=[]))),iu(),LE()}function xE(){Nu(),_E=!0,fE=0,hE=3500}function LE(){xE(),TE()}function TE(){var e=rE+pE;e&&vE-1<e&&(e=vE-sc,lE=!0);var t,n="https://api.twitch.tv/kraken/videos/followed?limit="+sc+"&broadcast_type="+(EE?"highlight":"archive")+"&sort="+bE+"&offset="+e;if(Lc){if(!(t=Android.mreadUrl(n,hE,3,bc+Ri[qr.Users_Position].access_token)))return void BE();if(200===(t=JSON.parse(t)).status)return void OE(t.responseText);401===t.status||403===t.status?ei(qr.Users_Position,0,LE,GE):BE()}else(t=new XMLHttpRequest).open("GET",n,!0),t.timeout=hE,t.setRequestHeader(gc,wc),t.setRequestHeader(vc,pc),t.setRequestHeader(yc,bc+Ri[qr.Users_Position].access_token),t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void OE(t.responseText);401===t.status||403===t.status?ei(qr.Users_Position,0,LE,GE):BE()}},t.send(null)}function BE(){++fE<mE?(hE+=500,TE()):GE()}function GE(){_E=!1,rE?(lE=!0,UE()):(P_=!1,$c(),lu(T))}function OE(e){var t=JSON.parse(e),n=t.videos.length;vE=parseInt(t._total),n<sc&&(lE=!0);var a=rE;gE=!(rE+=n);var i=n/dc;0<n%dc&&i++;var o,s,d,l,r,c=0,u=document.getElementById("stream_table_user_vod");if(!kE){var _;for(kE=!0,d=document.createElement("tr"),f=0;f<2;f++)_=f?'<i class="icon-history stream_channel_fallow_icon"></i>'+Ca+Ca+Bn:'<i class="icon-movie-play stream_channel_fallow_icon"></i>'+Ca+Ca+p,(Zr=document.createElement("td")).setAttribute("id",CE[8]+"y_"+f),Zr.className="stream_cell",Zr.innerHTML='<div id="'+CE[0]+"y_"+f+'" class="stream_thumbnail_channel_vod" ><div id="'+CE[3]+"y_"+f+'" class="stream_channel_fallow_game">'+_+"</div></div>",d.appendChild(Zr);u.appendChild(d)}for(var f=0;f<i;f++){for(s=a/dc+f,d=document.createElement("tr"),o=0;o<dc&&c<n;o++,c++)r=(l=t.videos[c])._id,-1!==(l.preview.template+"").indexOf("404_processing")||cE[r]?o--:(cE[r]=1,d.appendChild(kS(s,s+"_"+o,[r,l.length,l.language,l.game,l.channel.name,l.increment_view_count_url],[l.preview.template.replace("{width}x{height}",kc),l.channel.display_name,F+Gu(l.created_at),bk.parse(l.title)+la+en+v+l.game,gu(l.views)+R,yu(l.resolutions.chunked.slice(-4),parseInt(l.fps.chunked)||0,l.language),D+Yh(l.length),l.animated_preview_url],CE)));for(;o<dc;o++)lE&&!yE&&(yE=!0,rE=s*dc+o),d.appendChild(qu(CE[9]+s+"_"+o)),uE.push(CE[9]+s+"_"+o);u.appendChild(d)}UE()}function UE(){ME?(Au(Uc),ou(dE,sE,dc,rE)):(gE?lu(B+(EE?A:U)+G+I):(ME=!0,DE(),Au(Uc),Iu()),zc(CE[10]),P_=!1,$c()),0<uE.length&&!lE?AE():_E=!(uE=[])}function AE(){xE(),NE()}function NE(){du(uE.length);var e=rE+pE;e&&vE-1<e&&(e=vE-hc,lE=!0);var t,n="https://api.twitch.tv/kraken/videos/followed?limit="+hc+"&broadcast_type="+(EE?"highlight":"archive")+"&sort="+bE+"&offset="+e;if(Lc){if(!(t=Android.mreadUrl(n,hE,3,bc+Ri[qr.Users_Position].access_token)))return void HE();if(200===(t=JSON.parse(t)).status)return void FE(t.responseText);401===t.status||403===t.status?ei(qr.Users_Position,0,LE,GE):HE()}else(t=new XMLHttpRequest).open("GET",n,!0),t.timeout=hE,t.setRequestHeader(gc,wc),t.setRequestHeader(vc,pc),t.setRequestHeader(yc,bc+Ri[qr.Users_Position].access_token),t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void FE(t.responseText);401===t.status||403===t.status?ei(qr.Users_Position,0,LE,GE):HE()}},t.send(null)}function HE(){++fE<mE?(hE+=500,NE()):(lE=!0,rE-=uE.length,uE=[],UE())}function FE(e){var t,n,a=JSON.parse(e),i=a.videos.length,o=0,s=0,d=[];for(vE=parseInt(a._total);o<uE.length&&s<i;o++,s++)n=(t=a.videos[s])._id,-1!==(t.preview.template+"").indexOf("404_processing")||cE[n]?o--:(cE[n]=1,MS(uE[o],[n,t.length,t.language,t.game,t.channel.name,t.increment_view_count_url],[t.preview.template.replace("{width}x{height}",kc),t.channel.display_name,F+Gu(t.created_at),bk.parse(t.title)+la+en+v+t.game,gu(t.views)+R,yu(t.resolutions.chunked.slice(-4),parseInt(t.fps.chunked)||0,t.language),D+Yh(t.length),t.animated_preview_url],CE),d.push(o));for(o=d.length-1;-1<o;o--)uE.splice(d[o],1);pE+=s,lE&&(rE-=uE.length,uE=[]),UE()}function DE(){sE<0?qE():(n_(sE,dE,CE,dc,rE),OS(CE,sE+"_"+dE),rE/dc<sE+lc&&!lE&&!_E&&LE(),zr&&RE())}function RE(){window.clearInterval(XE),-1<sE&&rE?(zc(CE[1]+sE+"_"+dE),c_(sE+"_"+dE,CE)):VE()}function qE(){var e=1<dE?1:dE;jc(CE[0]+"y_"+e,Mc)}function VE(){var e=1<dE?1:dE;Yc(CE[0]+"y_"+e,Mc)}function JE(e){var t;if(!P_&&!e_())switch(Qu(),e.keyCode){case Aa:_u()?uu():_u()?uu():pu()?hu():(RE(),L_(JE));break;case Ta:if(-1===sE)VE(),--dE<0&&(dE=1),qE();else if(sE||dE){if(wu(sE,dE-1,CE[0]))RE(),dE--,DE();else for(t=dc-1;-1<t;t--)if(wu(sE-1,t,CE[0])){RE(),sE--,dE=t,DE();break}}else RE(),VE(),sE=-1,dE=1,qE();break;case Ga:-1===sE?(VE(),1<++dE?(dE=0,gE?qE():(sE=0,DE())):qE()):wu(sE,dE+1,CE[0])?(RE(),dE++,DE()):wu(sE+1,0,CE[0])&&(RE(),sE++,dE=0,DE());break;case Ba:if(-1!==sE||gE)if(sE){for(t=0;t<dc;t++)if(wu(sE-1,dE-t,CE[0])){RE(),sE--,dE-=t,DE();break}}else RE(),sE=-1,qE();else sE=0,VE(),DE();break;case Oa:if(-1!==sE||gE){for(t=0;t<dc;t++)if(wu(sE+1,dE-t,CE[0])){RE(),sE++,dE-=t,DE();break}}else sE=0,VE(),DE();break;case xa:case Pa:case La:case Ua:-1===sE?(0===dE?A_("UserVod_highlight",(EE=!EE)?"true":"false"):1===wE?wE++:wE--,PE()):d_(sE+"_"+dE,CE,JE)}}function zE(){1===wE?(Wc("top_bar_user",u+Bu(Ri[qr.Users_Position].name+" "+(EE?A:U)+xn)),bE="time"):2===wE&&(Wc("top_bar_user",u+Bu(Ri[qr.Users_Position].name+" "+(EE?A:U)+Ln)),bE="views"),A_("UserVod_TypeNumber",wE)}var XE,jE=0,YE=0,WE=!1,KE=0,ZE={},$E=[],QE=!1,eS=0,tS=5,nS=3500,aS=0,iS=0,oS=!1,sS=!1,dS="week",lS=2,rS=!1,cS=["v_thumbdiv","v_img","v_infodiv","v_title","v_streamon","v_duration","v_viwers","v_quality","v_cell","vempty_","vod_scroll","v_game"],uS=!1,_S=!1,fS=1,mS=new Image;function hS(){qr.Main_CenterLablesVectorPos=4,qr.Main_Go=Ur,jc("top_bar_vod","icon_center_focus"),document.body.addEventListener("keydown",US,!1),uS?(Fu(jE),zc(cS[10]),AS(),LS(),Iu()):vS()}function pS(){uS&&TS(),Lu(),document.body.removeEventListener("keydown",US),Yc("top_bar_vod","icon_center_focus"),Kc("top_bar_vod",nn),Jc(cS[10])}function vS(){uS&&TS(),Uu("stream_table_vod"),Jc(cS[10]),Zc(),AS(),ru(),rS=uS=!1,iS=aS=0,ZE={},jE=YE=KE=0,WE=!(P_=!(sS=!($E=[]))),iu(),gS(),yS()}function gS(){Nu(),QE=!0,eS=0,nS=3500}function yS(){var e=KE+aS;e&&iS-1<e&&(e=iS-sc,WE=!0),q_("https://api.twitch.tv/kraken/videos/top?limit="+sc+"&broadcast_type="+(_S?"highlight":"archive")+"&sort=views&offset="+e+"&period="+dS+(""!==Qr?"&language="+Qr:""),nS,2,null,wS,bS)}function bS(){++eS<tS?(nS+=500,yS()):(QE=!1,KE?(WE=!0,SS()):(P_=!1,$c(),lu(T)))}function wS(e){var t=JSON.parse(e),n=t.vods.length;iS=parseInt(t._total),n<sc&&(WE=!0);var a=KE;oS=!(KE+=n);var i=n/dc;0<n%dc&&i++;var o,s,d,l,r,c=0,u=document.getElementById("stream_table_vod");if(!rS){var _;for(rS=!0,d=document.createElement("tr"),f=0;f<2;f++)_=f?'<i class="icon-history stream_channel_fallow_icon"></i>'+Ca+Ca+m:'<i class="icon-movie-play stream_channel_fallow_icon"></i>'+Ca+Ca+p,(Zr=document.createElement("td")).setAttribute("id",cS[8]+"y_"+f),Zr.className="stream_cell",Zr.innerHTML='<div id="'+cS[0]+"y_"+f+'" class="stream_thumbnail_channel_vod" ><div id="'+cS[3]+"y_"+f+'" class="stream_channel_fallow_game">'+_+"</div></div>",d.appendChild(Zr);u.appendChild(d)}for(var f=0;f<i;f++){for(s=a/dc+f,d=document.createElement("tr"),o=0;o<dc&&c<n;o++,c++)r=(l=t.vods[c])._id,-1!==(l.preview.template+"").indexOf("404_processing")||ZE[r]?o--:(ZE[r]=1,d.appendChild(kS(s,s+"_"+o,[r,l.length,l.language,l.game,l.channel.name,l.increment_view_count_url],[l.preview.template.replace("{width}x{height}",kc),l.channel.display_name,F+Gu(l.created_at),bk.parse(l.title)+la+en+v+l.game,gu(l.views)+R,yu(l.resolutions.chunked.slice(-4),parseInt(l.fps.chunked)||0,l.language),D+Yh(l.length),l.animated_preview_url],cS)));for(;o<dc;o++)WE&&!sS&&(sS=!0,KE=s*dc+o),d.appendChild(qu(cS[9]+s+"_"+o)),$E.push(cS[9]+s+"_"+o);u.appendChild(d)}SS()}function kS(e,t,n,a,i){return e<dc&&Ru(a[0]),CS(n,t,a,i)}function CS(e,t,n,a){return(Zr=document.createElement("td")).setAttribute("id",a[8]+t),Zr.setAttribute(Ec,JSON.stringify(e)),Zr.className="stream_cell",Zr.innerHTML=ES(t,n,a),Zr}function MS(e,t,n,a){var i=document.getElementById(e),o=e.split(a[9])[1];i.setAttribute(Ec,JSON.stringify(t)),i.innerHTML=ES(o,n,a),i.setAttribute("id",a[8]+o)}function ES(e,t,n){return Hu(n[1]+e,t[0]),'<div id="'+n[0]+e+'" class="stream_thumbnail_video"'+(t[7]?' style="background-size: 0 0; background-image: url('+t[7]+');"':"")+'><img id="'+n[1]+e+'" class="stream_img"></div><div id="'+n[2]+e+'" class="stream_text"><div id="'+n[3]+e+'" class="stream_info" style="width: 72%; display: inline-block; font-size: 85%;">'+t[1]+'</div><div id="'+n[7]+e+'"class="stream_info" style="width:27%; float: right; text-align: right; display: inline-block;">'+t[5]+'</div><div><div id="'+n[4]+e+'"class="stream_info" style="width: 59%; display: inline-block;">'+t[2]+'</div><div id="'+n[5]+e+'"class="stream_info" style="width: 39%; display: inline-block; float: right; text-align: right;">'+t[6]+'</div></div><div id="'+n[11]+e+'"class="stream_info">'+t[3]+'</div><div id="'+n[6]+e+'"class="stream_info">'+t[4]+"</div></div>"}function SS(){if(uS?(Au(Uc),ou(YE,jE,dc,KE)):(oS?lu(B+(_S?A:U)+G+I):(uS=!0,LS(),Au(Uc),Iu()),zc(cS[10]),P_=!1,$c()),0<$E.length&&!WE)return gS(),void IS();QE=!($E=[])}function IS(){du($E.length);var e=KE+aS;e&&iS-1<e&&(e=iS-hc,WE=!0),q_("https://api.twitch.tv/kraken/videos/top?limit="+hc+"&broadcast_type="+(_S?"highlight":"archive")+"&sort=views&offset="+e+"&period="+dS+(""!==Qr?"&language="+Qr:""),nS,2,null,xS,PS)}function PS(){++eS<tS?(nS+=500,IS()):(WE=!0,KE-=$E.length,$E=[],SS())}function xS(e){var t,n,a=JSON.parse(e),i=a.vods.length,o=0,s=0,d=[];for(iS=parseInt(a._total);o<$E.length&&s<i;o++,s++)n=(t=a.vods[s])._id,-1!==(t.preview.template+"").indexOf("404_processing")||ZE[n]?o--:(ZE[n]=1,MS($E[o],[n,t.length,t.language,t.game,t.channel.name,t.increment_view_count_url],[t.preview.template.replace("{width}x{height}",kc),t.channel.display_name,F+Gu(t.created_at),bk.parse(t.title)+la+en+v+t.game,gu(t.views)+R,yu(t.resolutions.chunked.slice(-4),parseInt(t.fps.chunked)||0,t.language),D+Yh(t.length),t.animated_preview_url],cS),d.push(o));for(o=d.length-1;-1<o;o--)$E.splice(d[o],1);aS+=s,WE&&(KE-=$E.length,$E=[]),SS()}function LS(){jE<0?BS():(n_(jE,YE,cS,dc,KE),OS(cS,jE+"_"+YE),KE/dc<jE+lc&&!WE&&!QE&&(gS(),yS()),zr&&TS())}function TS(){window.clearInterval(XE),-1<jE&&KE?(zc(cS[1]+jE+"_"+YE),c_(jE+"_"+YE,cS)):GS()}function BS(){var e=1<YE?1:YE;jc(cS[0]+"y_"+e,Mc)}function GS(){var e=1<YE?1:YE;Yc(cS[0]+"y_"+e,Mc)}function OS(t,n){if(fS){var a=document.getElementById(t[0]+n);mS.onload=function(){Jc(t[1]+n),a.style.backgroundSize="612px";var e=0;XE=window.setInterval(function(){a.style.backgroundPosition="0px "+ ++e%10*-344+"px"},650)},mS.src=a.style.backgroundImage.replace(/url\(['"]?(.*?)['"]?\)/i,"$1")}}function US(e){var t;if(!P_&&!e_())switch(Qu(),e.keyCode){case Aa:pu()?hu():_u()?uu():(TS(),L_(US));break;case Ta:if(-1===jE)GS(),--YE<0&&(YE=1),BS();else if(jE||YE){if(wu(jE,YE-1,cS[0]))TS(),YE--,LS();else for(t=dc-1;-1<t;t--)if(wu(jE-1,t,cS[0])){TS(),jE--,YE=t,LS();break}}else TS(),GS(),jE=-1,YE=1,BS();break;case Ga:-1===jE?(GS(),1<++YE?(YE=0,oS?BS():(jE=0,LS())):BS()):wu(jE,YE+1,cS[0])?(TS(),YE++,LS()):wu(jE+1,0,cS[0])&&(TS(),jE++,YE=0,LS());break;case Ba:if(-1!==jE||oS)if(jE){for(t=0;t<dc;t++)if(wu(jE-1,YE-t,cS[0])){TS(),jE--,YE-=t,LS();break}}else TS(),jE=-1,BS();else jE=0,GS(),LS();break;case Oa:if(-1!==jE||oS){for(t=0;t<dc;t++)if(wu(jE+1,YE-t,cS[0])){TS(),jE++,YE-=t,LS();break}}else jE=0,GS(),LS();break;case xa:case Pa:case La:case Ua:-1===jE?(0===YE?A_("Vod_highlight",(_S=!_S)?"true":"false"):4<++lS&&(lS=1),vS()):d_(jE+"_"+YE,cS,US)}}function AS(){1===lS?(Wc("top_bar_vod",nn+Bu((_S?A:U)+le)),dS="day"):2===lS?(Wc("top_bar_vod",nn+Bu((_S?A:U)+re)),dS="week"):3===lS?(Wc("top_bar_vod",nn+Bu((_S?A:U)+ce)),dS="month"):4===lS&&(Wc("top_bar_vod",nn+Bu((_S?A:U)+ue)),dS="all"),A_("vod_periodNumber",lS)}