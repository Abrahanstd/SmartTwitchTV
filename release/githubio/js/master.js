var n='<div id="scene1" class="screen_size"><div id="topbar" class="topbar hide"><div class="twitchicon"><img style="float:right;width:100%;" src="https://bhb27.github.io/smarttv-twitch/release/githubio/images/twitchlogo.png" alt="twitchlogo"><div style="text-align:center;"><div id="label_about" class="icon_top_label" style="text-align:center;"></div></div></div><div id="controls_div" class="controls_div"><div id="label_search" class="icon_top_label"></div><div id="label_controls" class="icon_top_label"></div><div id="label_refresh" class="icon_top_label"></div><div id="label_switch" class="icon_top_label"></div></div><div style="position:fixed;text-align:center;width:72%;margin-left:18.5%;"><div id="top_bar_live" class="icon_center_label"></div><div id="top_bar_user" class="icon_center_label"></div><div id="top_bar_featured" class="icon_center_label"></div><div id="top_bar_game" class="icon_center_label"></div><div id="top_bar_vod" class="icon_center_label"></div><div id="top_bar_clip" class="icon_center_label"></div></div></div><div id="scrollbar_size" class="scroll_size"><div id="scrollbar" class="scroll"></div></div><div id="dialog_loading" class="screen_size dialogs" style="z-index:98;margin-top:24%;"><i class="icon icon-circle-o-notch fa fa-spin strokeloading" style="font-size:727%;"></i></div><div id="main_remove_dialog" class="dialog_exit hide" style="width:75%;margin-left:12.5%;"><div id="main_dialog_remove" class="exit_text"></div><div style="text-align:center;margin-bottom:4%;"><div id="remove_cancel" class="button_search_focused button_search" style="margin-left:0%;"></div><div id="remove_yes" class="button_search"></div></div></div><div id="main_dialog_exit" class="dialog_exit hide"><div id="main_dialog_exit_text" class="exit_text"></div><div style="text-align:center;margin-bottom:4%;"><div id="exit_app_cancel" class="button_search_focused button_search" style="margin-left:0%;"></div><div id="exit_app_minimize" class="button_search"></div><div id="exit_app_close" class="button_search"></div></div></div><div id="dialog_warning" class="strokedbig dialogs hide" style="z-index:101;margin-top:31%;"><div id="dialog_warning_text" class="strokedbig" style="font-size:300%;"></div></div><div id="dialog_about" class="info_dialogs hide" style="width:90%;margin-top:5.5%;margin-left:5%;"><div id="dialog_about_text" class="about_text"></div></div><div id="dialog_update" class="info_dialogs hide" style="width:70%;margin-top:6%;margin-left:15%;"><div id="dialog_update_text" class="about_text"></div></div><div id="dialog_controls" class="info_dialogs hide" style="width:70%;margin-top:6%;margin-left:15%;"><div id="dialog_controls_text" class="controls_text"></div></div><div id="dialog_counter" style="position:fixed;z-index:101;width:100%;bottom:0;"><div style="float:right;width:auto;height:auto;display:inline-block;border-radius:12px;background:linear-gradient(to top, black, rgba(0, 0, 0, 0.75));"><div id="dialog_counter_text" class="counter_class"></div></div></div><div id="blank_focus" class="screen_size"></div><div class="screen_size"></div><div id="oauth" class="imput_text_box" style="display:none;"><div id="oauth_text" class="strokedextramini" style="font-size:190%;font-weight:bold;"></div><input id="oauth_input" class="input_class" type="text" placeholder="" /></div><div class="screen_size"></div><div id="search" class="imput_text_box" style="display:none;"><input id="search_input" class="input_class" type="text" placeholder="" /><div id="chanel_button" class="button_search"></div><div id="game_button" class="button_search"></div><div id="live_button" class="button_search"></div></div><div class="screen_size"></div><div id="add_user" class="imput_text_box" style="display:none;"><input id="user_input" class="input_class" type="text" placeholder="" /></div><div class="screen_size"></div><table id="stream_table_live" class="streams_tables"></table><div class="screen_size"></div><table id="stream_table_user" class="streams_tables"></table><div class="screen_size"></div><table id="stream_table_user_live" class="streams_tables"></table><div class="screen_size"></div><table id="stream_table_user_host" class="streams_tables"></table><div class="screen_size"></div><table id="stream_table_featured" class="streams_tables"></table><div class="screen_size"></div><table id="stream_table_user_games" class="streams_tables"></table><div class="screen_size"></div><table id="stream_table_user_channels" class="streams_tables"></table><div class="screen_size"></div><table id="stream_table_games" class="streams_tables"></table><div class="screen_size"></div><table id="stream_table_a_game" class="streams_tables"></table><div class="screen_size"></div><table id="stream_table_search_game" class="streams_tables"></table><div class="screen_size"></div><table id="stream_table_search_channel" class="streams_tables"></table><div class="screen_size"></div><table id="stream_table_search_live" class="streams_tables"></table><div class="screen_size"></div><table id="stream_table_search_channel_a" class="streams_tables"></table><div class="screen_size"></div><table id="stream_table_search_vod" class="streams_tables"></table><div class="screen_size"></div><table id="stream_table_search_clip" class="streams_tables"></table><div class="screen_size"></div><table id="stream_table_vod" class="streams_tables"></table><div class="screen_size"></div><table id="stream_table_clip" class="streams_tables"></table><div class="screen_size"></div><table id="stream_table_gclip" class="streams_tables"></table><div class="screen_size"></div><table id="stream_table_gvod" class="streams_tables"></table><div class="screen_size"></div></div><div id="scene2" class="screen_size hide"><div id="chat_container" class="chat_container hide"></div><div id="scene_channel_panel" class="screen_size" style="position:fixed;z-index:2;opacity:0;transition:0.4s;"><div style="width:100%;background:linear-gradient(to bottom, black, rgba(0, 0, 0, 0.04));"><div class="playsideinfo"><div id="stream_live_icon"></div><div id="stream_live_time"></div><div id="stream_watching_time"></div><div id="stream_clock"></div><div id="stream_controls"></div></div><img id="stream_info_icon" style="padding-left:1%;padding-top:1%;padding-bottom:1%;display:inline-block;width:8%;" alt="stream_info"><div class="playmaininfo"><div id="stream_info_name" style="font-size:130%;font-weight:bold;"></div><div id="stream_info_title"></div><div id="stream_info_game"></div></div></div><div style="z-order:-100;position:absolute;bottom:0;width:100%;height:53px;background:linear-gradient(to top, black, rgba(0, 0, 0, 0.040));text-align:center;"><div id="scene2_search" class="playbotton" style="z-order:6;width:11%;"><div id="ic_search" style="vertical-align:middle;display:inline-block"><i class="icon-search strokicon"></i></div><div id="scene2_search_text" class="strokedextramini playbottontext"></div></div><div id="scene2_channel" class="playbotton" style="z-order:5;width:18%;"><div id="channel_icon" style="vertical-align:middle;display:inline-block"><i class="icon-filmstrip strokicon"></i></div><div id="scene2_channel_text" class="strokedextramini playbottontext"></div></div><div id="scene2_game" class="playbotton" style="z-order:5;width:17%;"><div id="game_icon" style="vertical-align:middle;display:inline-block;overflow:hidden;max-height:43px;"><div style="display:flex;font-size:120%;transform:translate(0,-10%);"><i class="icon-gamepad strokicon"></i></div></div><div id="scene2_game_text" class="strokedextramini playbottontext"></div></div><div id="scene2_heart" class="playbotton" style="z-order:3;width:15%;"><div id="fallow_heart" style="vertical-align:middle;display:inline-block"><i class="icon-heart-o strokicon"></i></div><div id="fallow_text" class="strokedextramini playbottontext"></div></div><div id="scene2_quality" class="playbotton" style="z-order:2;width:28%;"><div id="quality_video" style="vertical-align:middle;display:inline-block"><i class="icon-videocamera strokicon"></i></div><div id="quality_arrows" style="height:auto;display:inline-block;">&nbsp;<div style="display:inline-block;"><div id="quality_arrow_up" class="up"></div><div id="quality_arrow_down" class="down"></div></div>&nbsp;&nbsp;</div><div id="quality_name" class="strokedextramini playmulti" style="font-size:175%;width:80%;"></div></div><div id="scene2_open_vod" class="playbotton" style="z-order:4;width:16%;margin-right:0;"><div id="open_vod_icon" style="vertical-align:middle;display:inline-block"><div style="display:flex;font-size:87%;"><i class="icon-play strokicon"></i></div></div><div id="open_vod_text" class="strokedextramini playbottontext"></div></div></div></div><div id="scene2_dialogs" style="display:flex;position:absolute;width:100%;height:50%;z-index:2;"><div id="dialog_end_stream" class="dialogs hide" style="z-index:4;font-size:250%;height:100%;background-color:rgba(0, 0, 0, 0.8);"><div id="dialog_end_stream_text" class="strokedbig" style="margin-top:25%;font-size:165%;padding-bottom:2%;"></div><div id="dialog_end_replay" class="dialog_end_icons"><i class="icon-refresh strokicon" style="font-size:250%;"></i><div id="dialog_end_replay_text" class="strokedbig"></div></div><div id="dialog_end_vod" class="dialog_end_icons"><i class="icon-play strokicon" style="font-size:250%;"></i><div id="dialog_end_vod_text" class="strokedbig"></div></div><div id="dialog_end_channel" class="dialog_end_icons"><i class="icon-filmstrip strokicon" style="font-size:250%;"></i><div id="dialog_end_channel_text" class="strokedbig"></div></div><div id="dialog_end_game" class="dialog_end_icons"><i class="icon-gamepad strokicon" style="font-size:250%;"></i><div id="dialog_end_game_text" class="strokedbig"></div></div></div><div id="dialog_controls_play" class="info_dialogs hide" style="width:98%;margin-left:1%;"><div id="dialog_controls_play_text" class="controls_text"></div></div><div id="play_dialog_simple_pause" class="dialogs hide" style="z-index:5;margin-top:31%;"><i class="strokedbig icon-pause" style="color:#FFFFFF;font-size:850%;"></i></div><div id="play_dialog_exit" class="dialogs hide" style="z-index:6;margin-top:21%;"><div id="play_dialog_exit_text" class="strokedbig" style="font-size:350%;"></div></div><div id="dialog_warning_play" class="dialogs hide" style="z-index:7;margin-top:17%;"><div id="dialog_warning_play_text" class="strokedbig" style="font-size:350%;"></div></div><div id="dialog_buffer_play" class="dialogs hide" style="z-index:98;margin-top:28%;"><div id="dialog_buffer_play_text" class="strokedbig" style="font-size:400%;"></div></div></div><object id="av-player" type="application/avplayer" style="width:100%;height:100%;position:absolute;"></object></div>',e="Refresh and back to top",t="Search",a="Controls",i="About",o="The text you entered is empty.",s="The search result is empty.",r="Switch screen",c="Switch Past Broadcast and Highlight",l="Switch Period (24h, 7d, 30d, all)",d="Go to ",u="User ",m="Live",f="Games",p="Playing ",_=" for ",v="Watching time ",h="Since ",g=" ago",b="A Game",y="Write yours search...",w="Write yours authentication key...",k="Write user name...",x="Press Enter to ",E="Channels",I="Channel",C="Back to previously screen (Return)",S=" has ended",T="This video is only available to subscribers.",q="Connection failed, unable to load content hit refresh to try again",L="No",R=" for this ",B="Connection failed, unable to load video content exiting...",F=" Past Broadcast",M=" Highlight",O=" Clips",A=" Content",H="Streamed on ",z="Duration ",N=" Views",D="Buffering ",J=" Viewers",U="Click again to exit!",G="Do you wanna to exit Twitch?",P="Exit",X="Close",V="Minimize",j="Cancel",K="Not Live | ",Y=" Channels Live",W=" Hosts Live",Q=" Games Live",Z=" Followed Channels",$=" Add User",ee=" Remove User",te="User doesn't exist",ne=" hosting ",ae=" already set",ie="Make First",oe=" (First user has it's content on SmartHub Preview, can Sub out side User screen when providing a key)",se="Add a Twitch user to display it's Followed Channels content here",re=" (24h)",ce=" (7d)",le=" (30d)",de=" (all)",ue="Jumping ",me=" to ",fe="Jump Canceled",pe=" , jump time bigger then duration",_e=" Sec",ve=" Min",he=" Hr",ge="Source",be="Version: ",ye="Twitch.TV",we="Press return key to close this.",ke="Player Related:",xe="Chat Related:",Ee="General Related:",Ie="Update",Ce="Current Major version ",Se=" Latest Major version ",Te="This are the none players related controls, the player can show it's own controls.",qe="Play a video: Navigate using Directional pad (up/down/left/right), Select or Play/Pause keys to start playing",Le="Refresh screen content: Guide or info (Guide is channel press key on smart remote)",Re="Close the application: from Live screen press return to see the options",Be="Force close the application (in case it freezes or miss behave): Hold return key until it force closes (Works for any application on Samsung TV's)",Fe=" Switch screen: Chanel Up (Move to right screen) or Chanel Down (Move to left screen)",Me="Some screen will change its internal content (channel past broadcast or clips for example) instead of changing to another screen",Oe="Go back to Live from any screen: color button green or B",Ae="Start a search: color button blue or D",He="After setting up the search text press return or click on DONE and use the Directional pad (left/right) to chose the type of search then press Select or Play/Pause, Directional pad (up) goes back to edit the search text",ze="Controls list: color button yellow or C",Ne="About this application: color button red or A",De="This is a unofficial Twitch.Tv application develop by a individual on his free time, for TV's that don't have access to a official application, released for free to any one that wanna to use it.",Je="On 99% on the updates the app can update it self to add fixes and new featuring, the app will warn the user the day there is a need to update manually by reinstalling it via computer in the case you use a computer to install it.",Ue="Developer information:",Ge="This is an open source applicationlication check it on my github",Pe="github.com/bhb27/smarttv-twitch",Xe="This application is licensed under the GNU General Public License v3.0, and uses following dependencies:",Ve="Font Awesome - The iconic font and CSS toolkit by FortAwesome (https://github.com/FortAwesome/Font-Awesome)",je="UglifyJS - is a JavaScript parser, minifier, compressor and beautifier toolkit (https://github.com/mishoo/UglifyJS2)",Ke="JS Beautifier - Beautify, unpack or deobfuscate JavaScript and HTML, make JSON/JSONP readable, etc. (https://github.com/beautify-web/js-beautify)",Ye="JSHint - A Static Code Analysis Tool for JavaScript (https://github.com/jshint/jshint)",We="Samsung WebApi API - this module defines the functionalities that are provides as the Samsung TV for Tizen Platform Product API (http://developer.samsung.com/tv/develop/api-references/samsung-product-api-references/webapi-api)",Qe="Show information panel: Select key if chat is showing or Directional pad (up/down/left/right) if not",Ze="Close the video: press return (click it twice under 3 seconds, click tree times if information panel or controls is open)",$e="Play/Pause a video: Play or Pause keys",et="Jump Forward/Backwards (not availably for live streams): Directional pad (right/left), multiple clicks add more time before jump",tt="Change video quality (not availably for clips): Open information panel, , navigate using use Directional pad (left/right), then use Directional pad (up/down) to choose the new quality after press Select key to confirm the change",nt="Force refresh a video (in case it freezes) (not availably for clips): press select key twice, it will change the video quality to the same you are current watching, by opening information panel (first click) after second click will start re-buffering",at="Show or hide the Chat (Only availably on live streams): Guide or info (Guide is channel press key on smart remote)",it="Change Chat position (if chat it's showing and info panel is not): Chanel Up or Down",ot="Change Chat size (if chat it's showing and info panel is not): Directional pad (up/down)",st="Change Chat background brightness (if chat it's showing and info panel is not): Directional pad (left/right)",rt="Force refresh the Chat (in case it freezes or doesn't load): Force refresh the video by pressing select key twice, it will change the video quality to the same you are current watching, by opening information panel (first click) after second click will start re-buffering and the chat will reload it self",ct="Change the speed (Only availably for clips): Open information panel, navigate using use Directional pad (left/right), then use Directional pad (up/down) to choose the new speed after press Select key to confirm the change",lt="Restart a clip (can also be used in case it freezes): color button blue or D",dt='Start a search: Open information panel, navigate using use Directional pad (left/right) to "Search" and press select',ut='Open Channel content: Open information panel, navigate using use Directional pad (left/right) to "Channel content" and press select',mt="A update is available, and the app can't self update this version ",ft="Major changes:",pt="Temp update 1",_t="Adding a authentication key allows the app to fallow and access subscribed only past broadcast (for channel you are Sub to) for the chosen user, enter the authentication key for user ",vt=" below, fallowing this steps:",ht="Access the site http://tiny.cc/twitchkey (using a computer or a smart phone)",gt='Click on the "Authorize" button it will take you to main Twitch.TV authentication site',bt="Login to Twitch.TV using the user name you are trying to add a key for",yt="Click on Authorize button of Twitch.TV site if you agree with the requested permissions",wt="The web page will update and show a key code, write that key code bellow",kt=" Add Authentication key",xt="Key added OK (Click to test key)",Et="Key test fail, it's needed to add new one",It="Key test return OK",Ct="You try to add a key for user ",St=" but this key is for user ",Tt=" Following",qt=" Follow",Lt=" And you have not set a authentication key the app can't check yours sub status.",Rt=" And you are not a sub of this channel",Bt=" You are a sub of this channel but the app fail to authenticate contact the developer email in about",Ft="Fail authentication check with the provider key, please check and try again",Mt="No user",Ot="Set a user and a authentication key to be able to fallow/unfollow",At="Restart the",Ht=" Clip",zt="Channel content",Nt="Network is disconnect, the application can't work without INTERNET",Dt="Network connection reestablished",Jt=" Followers",Ut=", Can't fallow or unfallow ",Gt="Game content",Pt="Yes",Xt="Are you sure you want to remove the user ",Vt="Press Up to ",jt="Followed Games",Kt="Change between",Yt=" (Guide or Info)",Wt=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"],Qt="Started ",Zt=" (CH Up/Down)",$t="Videos",en=" Video",tn="Replay",nn="Open the broadcast at this clip position",an="exiting in ",on='press "Return" to exit',sn="Featured",rn="Created at ",cn="This clip doesn't have a ",ln="Open Broadcast",dn="No Broadcast",un="fglfgl27@gmail.com",mn="<br>",fn='<i class="icon-circle" style="font-size: 50%; vertical-align: middle; font-weight: bold;"></i>  ',pn='<div class="about_text_title">',_n='<div class="about_text_title" style="text-align: left;">',vn='<div style="text-align: left;">',hn="",gn="",bn="",yn="",wn="",kn="",xn="",En="",In="",Cn="&nbsp;",Sn="";function Tn(){hn=a+" (C)",gn=t+" (D)",bn=i+" (A)",r+=Zt,yn=pn+a+"</div>"+Te+mn+mn+fn+qe+mn+fn+Le+mn+fn+Re+mn+fn+Be+mn+fn+Fe+mn+Me+mn+fn+Oe+mn+fn+Ae+mn+He+mn+fn+ze+mn+fn+Ne+mn+pn+we+"</div>",wn=pn+ye+"</div>",kn=De+mn+Je+mn+mn+pn+Ue+"</div>"+un+mn+mn+Ge+mn+Pe+mn+mn+_n+Xe+"</div>"+vn+fn+Ve+mn+fn+je+mn+fn+Ke+mn+fn+Ye+mn+fn+We+mn+pn+we+"</div></div>",xn=pn+a+"</div>"+pn+Ee+"</div>"+fn+Qe+mn+fn+Ze+mn+fn+dt+mn+fn+ut+pn+ke+"</div>"+fn+$e+mn+fn+et+mn+fn+ct+mn+fn+tt+mn+fn+nt+mn+fn+lt+pn+xe+"</div>"+fn+at+mn+fn+it+mn+fn+ot+mn+fn+st+mn+fn+rt+pn+we+"</div>",En=pn+Ie+"</div>"+mt+mn,Sn=mn+pn+ft+"</div>"+vn+fn+pt+mn+mn+we+"</div>",In=vt+mn+fn+ht+mn+fn+gt+mn+fn+bt+mn+fn+yt+mn+fn+wt}function qn(){console.log("loading language pt_BR"),e="Atualizar e voltar pro topo",t="Pesquisar",a="Controles",i="Sobre",o="Nenhum texto foi inserido.",r="Trocar de tela",c="Transmissões Anteriores/Destaques",l="Período (24h, 7d, 30d, todos)",u="Usuário ",m="Ao Vivo",f="Jogos",p="Jogando ",v="Assistindo há ",h="Desde ",g=" atrás",b="Um jogo",y="entrar com a pesquisa...",k="entrar com usuário...",x="Pressione a tecla selecionar para ",E="Canais",I="Canal",C="Voltar (retornar)",S=" acabou",q="Não foi possível carregar. Atualize para tentar novamente.",B="Não foi possível carregar o conteúdo do vídeo, pois a conexão falhou, encerrando...",L="Não há",F=" Transmissões Anterior",M=" Destaque",O=" Clipes",A=" Conteúdo",H="Transmitido em ",z="Duração ",N=" Visualizações",D="Carregando ",J=" Espectadores",U="Pressione novamente para sair!",G="Quer sair do Twitch?",P="Sair",X="Fechar",V="Minimizar",j="Cancelar",K="Retransmissão | ",Y=" Canais Ao Vivo",W=" Hosts Ao Vivo",Q=" Jogos Ao Vivo",$=" Adicionar Usuário",ee=" Remover Usuário",te="Usuário inexistente",ne=" hospedando ",ae=" já configurado",ie="Tornar o Principal",oe=" (O conteúdo do usuário principal aparece no SmartHub Preview e consegue seguir quando fornece uma chave de acesso)",de=" (todos)",ue="Saltando ",me=_=" para ",fe="Slato cancelado",pe=" , o tempo de salto é maior que a duração",_e=" Seg",ve=" Min",he=" H",ge="Original",be="Versão: ",ye="Twitch.TV",we="Pressione retornar para fechar este.",ke="Relacionado ao Player:",xe="Relacionado ao Chat:",Ee="Gerais:",Ie="Atualização",Ce="Versão Atual ",Se=" Última Versão ",Te="Estes controles não estão relacionados ao player. O player pode mostrar os seus controles.",qe="Reproduzir um Vídeo: Navegue usando as setas direcionais, pressione PLAY/PAUSE para reproduzir.",Le="Atualizar Conteúdo: Pressione GUIDE ou INFO.",Re="Fechar: Durante uma transmissão, pressione retornar pra ver as opções",Be="Forçar Encerramento  do aplicativo (caso necessário): Pressione retornar até o aplicativo seja encerrado.",Fe="Alternar entre Telas: CH Cima (Tela da Direita) ou CH Baixo (Tela da Esquerda).",Me="Algumas telas irão atualizar o conteúdo (como as Transmissões Anteriores, por exemplo), ao invés de mudarem completamente.",Oe="Voltar para Ao Vivo: Botão Verde (B)",Ae="Pesquisar: Botão Azul(D)",He="Após inserir o conteúdo da busca, pressione retornar ou clique em CONCLUÍDO e use as Setas Direcionais (esquerda/direita) para escolher o tipo de busca. Pressione a tecla selecionar ou PLAY/PAUSE para confirmar.",ze="Controles: Botão Amarelo (C)",Ne="Sobre: Botão Vermelho (A)",De="Este é um aplicativo não oficial do Twitch.TV, desenvolvido por um individuo no seu tempo livre, feito para TVs que não possuem uma versão oficial. Seu uso é gratuito.",Je="Em 99% das vezes, o aplicativo se atualizará sozinho para adicionar correções e novas funções. O aplicativo avisará ao usuário quando houver necessidade de ser atualizado manualmente (através de uma nova instalação pelo computador no caso ter ter usado o computar pra instalar).",Ue="Sobre o Desenvolvedor:",Ge="Este é um aplicativo Open Source. Confira no meu GitHub",Pe="github.com/bhb27/smarttv-twitch",Xe="Este aplicativo está licenciado sob a Licença Pública GNU v3.0 e usa as seguintes dependências:",Qe="Exibir Informações: Pressione a tecla selecionar caso o Chat esteja sendo exibido ou use as Setas Direcionais.",Ze="Fechar um vídeo: Pressione retornar duas vezes seguidas em menos de três segundos",$e="Pausar/Reproduzir: Pressione PLAY ou PAUSE.",et="Avançar/Retroceder (indisponível para Transmissões Ao Vivo): Setas Direcionais (esquerda/direita).",tt="Alterar qualidade (indisponível para Clipes): Abra o Painel de Informações, use as Setas Direcionais (Cima/Baixo) para escolher a qualidade e pressione a tecla selecionar para alterar.",nt="Forçar a atualização de um vídeo (indisponível para Clipes): Pressione a tecla selecionar duas vezes. A qualidade do vídeo continuará sendo a mesma, mas após o segundo clique, o vídeo será recarregado.",at="Exibir/Esconder o Chat (Somente disponível em transmissões ao vivo): GUIDE ou INFO.",it="Posição do Chat (Se o chat esta visível): CH Para Cima ou Para Baixo.",ot="Tamanho do Chat (Se o chat esta visível): Setas Direcionais (cima/baixo).",st="Brilho do Chat (Se o chat esta visível): Setas Direcionais (esquerda/direita).",rt="Forçar atualização do Chat (caso necessário): Pressione a tecla selecionar duas vezes. No primeiro clique, a qualidade continuará a mesma, mas após o segundo, o vídeo e o chat serão recarregados.",ct="Altere a velocidade (apenas disponível para clipes): abra o painel de informações, navegue usando o botão Direcional (esquerda / direita), use a tecla direcional (para cima / baixo) para escolher a nova velocidade depois de pressionar a tecla Selecionar para confirmar a alteração",lt="Reinicie um clipe (também pode ser usado no caso do clipe congelar): Botão Azul (D)",dt='Inicie uma pesquisa: abra o painel de informações, navegue usando o botão Direcional (esquerda / direita) para "Pesquisar" e pressione a tecla selecionar',ut='Abra o conteúdo do canal: abra o painel de informações, navegue usando o botão direcional (esquerda / direita) para "Conteúdo do canal" e pressione a tecla selecionar',mt="Há uma atualização disponível, mas o app não pôde ser atualizado automaticamente ",ft="Changelist:",pt="Atualização Temporária 1",_t="Adicionando uma chave de autenticação para um usuário, permite ao aplicativo seguir e assistir a transmissões anteriores reservadas somente para inscritos (Em canais que você é inscrito), entre com a chave de autenticação do usuário ",vt=" abaixo seguidos os passos:",ht="Acesse o site http://tiny.cc/twitchkey (usando um computador ou smart phone)",gt='Clique no botão "Authorize" assim vai abrir o site de autenticação do Twitch.TV',bt="Faço login no Twitch.TV usando o usuário que você esta tentando adicionar a chave",yt="Clique no botão de autorizar no site do Twitch.TV se você esta de acordo com as permissões",wt="A pagina vai atualizar e mostrar a chave de acesso no centro (só tem letra minuscula), escreva esta no aplicativo",kt=" Adicione uma chave de autenticação",xt="Chave adicionada OK (Clique para testar)",Et="O teste da chave falhou, sera necessário adicionar uma nova",It="O teste da chave retornou OK",Ct="Você esta tentando adicionar uma chave para o usuário ",St=" mas esta é para o usuário ",Tt=Z=" Seguindo",qt=" Seguir",Lt=" E você não definiu uma chave de autenticação, o aplicativo não pode verificar se é inscrito.",Rt=" E você não é um inscrito deste canal",Bt=" Você é um inscrito deste canal, mas o aplicativo falha ao tentar autenticar, contate o desenvolvedor através do e-mail no sobre",Ft="Falhou o teste com a chave do informada, verifique e tente novamente",Mt="Sem Usuário",Ot="Adicione um usuário e uma chave de autenticação para poder seguir ou deixar de seguir",At="Reinicie o",zt="Conteúdo do canal",Nt="A rede esta desconectada, o aplicativo não funciona sem INTERNET",Dt="Conexão de rede restabelecida",Jt=" Seguidores",Ut=", Não é possível seguir ou deixar de seguir ",Gt="Conteúdo do jogo",Pt="Sim",Xt="Tem certeza que deseja remover o usuário ",Vt="Pressione a tecla pra cima para ",jt="Jogos seguidos",Kt="Troque entre",Yt=" (Guia ou Info)",Wt=["Jan","Fev","Mar","Abr","Maio","Jun","Jul","Ago","Set","Out","Nov","Dez"],Qt="Começou ",$t="Vídeos",en=" Vídeo",Zt=" (CH Cima/Baixo)",nn="Abrir a transmissão no ponto deste clipe",an="saindo em ",on='pressione "Retornar" para sair',sn="Destaques",rn="Criado em ",cn="Este clipe não tem uma ",ln="Abrir a Transmissão",dn="Sem Transmissão"}var Ln=427,Rn=428,Bn=458,Fn=19,Mn=415,On=10252,An=457,Hn=37,zn=39,Nn=38,Dn=40,Jn=13,Un=403,Gn=404,Pn=405,Xn=406,Vn=10009,jn=8,Kn=65385,Yn=65376,Wn=32,Qn=46,Zn=0,$n=10,ea=1e4,ta=[],na=null,aa=!1,ia=!1,oa="",sa="",ra=!1,ca=!1,la=!1,da="",ua=!1;function ma(){if(""!==sa)return Ga(),Va(),void TS();Bd=Cd,dm("top_bar_user","icon_center_focus"),Tm(),da=document.querySelector("#oauth_input"),od.placeholder=w,pm("oauth_text",_t+Kd+In),_a(),qi("oauth_input")}function fa(){va(),document.body.removeEventListener("keydown",pa),um("top_bar_user","icon_center_focus")}function pa(e){if(!aa&&!ia)switch(e.keyCode){case Vn:Bm()?Rm():Om()?Mm():(Bd=xd,fa(),Pm());break;case Ln:Bd=md,fa(),Pm();break;case Rn:Bd=dd,fa(),Pm();break;case Mn:case Fn:case On:case Jn:_a();break;case Un:Lm();break;case Gn:fa(),ef();break;case Pn:Fm();break;case Xn:Md=Bd,Bd=hd,fa(),Pm()}}function _a(){document.body.removeEventListener("keydown",pa),document.body.addEventListener("keydown",ha,!1),da.addEventListener("input"),da.addEventListener("compositionend"),od.placeholder=w,da.focus(),ia=!0}function va(){da.blur(),document.body.removeEventListener("keydown",ha),document.body.addEventListener("keydown",pa,!1),od.placeholder=x+w,window.setTimeout(function(){ia=!1},250)}function ha(e){if(!aa)switch(e.keyCode){case Qn:od.value="",e.preventDefault();break;case Yn:case Kn:""!==od.value&&null!==od.value&&(sa=od.value,Ga(),vm(),qi("blank_focus"),Ca()),va();break;case jn:od.value=od.value.slice(0,-1),e.preventDefault();break;case Wn:od.value+=" ",e.preventDefault()}}function ga(){ta=[];var e=parseInt(localStorage.getItem("UsercodeArraySize"))||0;if(0<e)for(var t=0;t<e;t++)ta[t]=localStorage.getItem("UsercodeArray"+t);ka()}function ba(){(ta=JSON.parse(localStorage.getItem("userkeys"))||[]).length||ga(),xa(0)}function ya(){ta.push(na+","+oa+","+sa),ka(),hm(),TS(),aa=!1}function wa(e){var t=ta.indexOf(ta[e]);-1<t&&ta.splice(t,1),ka()}function ka(){localStorage.setItem("userkeys",JSON.stringify(ta))}function xa(e){if(0<ci.length&&(Kd=ci[e]),0<ta.length){var t=Ia(ci[e]);if(-1<t){var n=ta[t].split(",");na=n[0],oa=n[1],sa=n[2]}else Ea()}else Ea()}function Ea(){sa=oa=na=""}function Ia(e){for(var t=0;t<ta.length;t++)if(e===ta[t].split(",")[0])return t;return-1}function Ca(){try{var e=new XMLHttpRequest;e.open("GET","https://api.twitch.tv/kraken?oauth_token="+sa,!0),e.timeout=ea,e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void Ta(e.responseText);Sa()}},e.send(null)}catch(e){Sa()}}function Sa(){++Zn<$n?(ea+=Zn<5?250:3500,Ca()):(aa=!1,hm(),Sm(Ft),window.setTimeout(function(){Tm(),_a()},4e3))}function Ta(e){US(e)?(na=JSON.parse(e).token.user_name+"",Ga(),ua=!1,qa()):(hm(),Sm(Ct+Kd+St+na),window.setTimeout(function(){Tm(),_a()},3500))}function qa(){try{var e=new XMLHttpRequest;e.open("GET","https://api.twitch.tv/kraken/users?login="+Kd,!0),e.timeout=ea,e.setRequestHeader(xu,ku),e.setRequestHeader(Eu,Iu),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void(ua?Fa(e.responseText):Ra(e.responseText));La()}},e.send(null)}catch(e){La()}}function La(){++Zn<$n&&(ea+=Zn<5?250:3500,qa())}function Ra(e){oa=JSON.parse(e).users[0]._id,od.value="",document.body.removeEventListener("keydown",pa),GS(!0),ya()}function Ba(){Ga(),ra=!1,""!==oa?Ma():(ua=!0,qa())}function Fa(e){var t=JSON.parse(e).users[0];void 0!==t?(oa=t._id,Ga(),ra=!1,Ma()):(aa=ra=!1,la?xh():Ob())}function Ma(){try{var e=new XMLHttpRequest;e.open("GET","https://api.twitch.tv/kraken/users/"+oa+"/follows/channels/"+Xd,!0),e.timeout=ea,e.setRequestHeader(xu,ku),e.setRequestHeader(Eu,Iu),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return aa=!(ra=!0),void(la?xh():Ob());if(404===e.status){if(-1!==(JSON.parse(e.responseText).error+"").indexOf("Not Found"))return aa=ra=!1,void(la?xh():Ob());Oa()}else Oa()}},e.send(null)}catch(e){Oa()}}function Oa(){++Zn<$n?(ea+=Zn<5?250:3500,Ma()):(aa=!1,la?xh():Ob())}function Aa(){Ga(),Ha()}function Ha(){try{var e=new XMLHttpRequest;e.open("PUT","https://api.twitch.tv/kraken/users/"+oa+"/follows/channels/"+Xd,!0),e.timeout=ea,e.setRequestHeader(xu,ku),e.setRequestHeader(Eu,Iu),e.setRequestHeader("Authorization","OAuth "+sa),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return ra=!(aa=!1),void(la?xh():Ob());za()}},e.send(null)}catch(e){za()}}function za(){++Zn<$n&&(ea+=3500,Ha())}function Na(){Ga(),Da()}function Da(){try{var e=new XMLHttpRequest;e.open("DELETE","https://api.twitch.tv/kraken/users/"+oa+"/follows/channels/"+Xd,!0),e.timeout=ea,e.setRequestHeader(xu,ku),e.setRequestHeader(Eu,Iu),e.setRequestHeader("Authorization","OAuth "+sa),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(204===e.status)return aa=ra=!1,void(la?xh():Ob());Ja()}},e.send(null)}catch(e){Ja()}}function Ja(){++Zn<$n&&(ea+=3500,Da())}function Ua(){Ga(),ca=!1,Pa()}function Ga(){ea=1e4,aa=!(Zn=0)}function Pa(){try{var e=new XMLHttpRequest;e.open("GET","https://api.twitch.tv/kraken/users/"+oa+"/subscriptions/"+Xd,!0),e.timeout=ea,e.setRequestHeader(xu,ku),e.setRequestHeader(Eu,Iu),e.setRequestHeader("Authorization","OAuth "+sa),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return aa=!(ca=!0),void Rg();if(422===e.status)console.log("channel does not have a subscription program");else if(404===e.status){if(-1!==(JSON.parse(e.responseText).error+"").indexOf("Not Found"))return aa=ca=!1,void Lg();Xa()}else Xa()}},e.send(null)}catch(e){Xa()}}function Xa(){++Zn<$n?(ea+=Zn<5?250:3500,Pa()):aa=!1}function Va(){try{var t=new XMLHttpRequest;t.open("GET","https://api.twitch.tv/kraken?oauth_token="+sa,!0),t.timeout=ea,t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status){var e=US(t.responseText);return GS(e),Sm(e?It:Et),window.setTimeout(function(){Tm()},4e3),void(aa=!1)}ja()}},t.send(null)}catch(e){ja()}}function ja(){++Zn<$n?(ea+=Zn<5?250:3500,Va()):(Sm(Et),GS(!1),window.setTimeout(function(){Tm()},4e3),aa=!1)}function Ka(e){try{var t=Ia(ci[e]);if(-1<t){sa=ta[t].split(",")[2],Kd=ci[e];var n=new XMLHttpRequest;n.open("GET","https://api.twitch.tv/kraken?oauth_token="+sa,!0),n.timeout=ea,n.ontimeout=function(){},n.onreadystatechange=function(){if(4===n.readyState){if(200===n.status)return void HS(US(n.responseText),e);Ya(e)}},n.send(null)}else HS(!1,e)}catch(t){Ya(e)}}function Ya(e){++Zn<$n?(ea+=3500,Ka(e)):HS(!1,e)}function Wa(){Ga(),Qa()}function Qa(){try{var e=new XMLHttpRequest;e.open("PUT","https://api.twitch.tv/api/users/"+Kd+"/follows/games/"+encodeURIComponent(Pd)+"?oauth_token="+sa,!0),e.timeout=1e4,e.setRequestHeader(xu,ku),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return Wi=!0,void uo();Za()}},e.send(null)}catch(e){Za()}}function Za(){++Zn<$n&&(ea+=3500,Qa())}function $a(){Ga(),ei()}function ei(){try{var e=new XMLHttpRequest;e.open("DELETE","https://api.twitch.tv/api/users/"+Kd+"/follows/games/"+encodeURIComponent(Pd)+"?oauth_token="+sa,!0),e.timeout=1e4,e.setRequestHeader(xu,ku),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(204===e.status)return Wi=!1,void uo();ti()}},e.send(null)}catch(e){ti()}}function ti(){++Zn<$n&&(ea+=3500,ei())}function ni(){Ga(),ai()}function ai(){try{var e=new XMLHttpRequest;e.open("GET","https://api.twitch.tv/api/users/"+Kd+"/follows/games/"+encodeURIComponent(Pd),!0),e.timeout=1e4,e.setRequestHeader(xu,ku),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState)return 200===e.status?(Wi=!0,void uo()):404===e.status?(Wi=!1,void uo()):void ii()},e.send(null)}catch(e){ii()}}function ii(){++Zn<$n?(ea+=3500,ai()):(Wi=!1,uo())}var oi=0,si=10,ri=3500,ci=[],li=null,di=!1,ui=!1,mi=null;function fi(){Bd=ud,dm("top_bar_user","icon_center_focus"),Tm(),mi=document.querySelector("#user_input"),id.placeholder=k,vi(),qi("user_input")}function pi(){hi(),document.body.removeEventListener("keydown",_i),um("top_bar_user","icon_center_focus")}function _i(e){if(!di&&!ui)switch(e.keyCode){case Vn:Bm()?Rm():Om()?Mm():(Bd=Fd,pi(),Pm());break;case Ln:Bd=Rd,pi(),Pm();break;case Rn:Bd=dd,pi(),Pm();break;case Mn:case Fn:case On:case Jn:vi();break;case Un:Lm();break;case Gn:pi(),ef();break;case Pn:Fm();break;case Xn:Md=Bd,Bd=hd,pi(),Pm()}}function vi(){document.body.removeEventListener("keydown",_i),document.body.addEventListener("keydown",gi,!1),mi.addEventListener("input"),mi.addEventListener("compositionend"),id.placeholder=k,mi.focus(),ui=!0}function hi(){mi.blur(),document.body.removeEventListener("keydown",gi),document.body.addEventListener("keydown",_i,!1),id.placeholder=x+k,window.setTimeout(function(){ui=!1},250)}function gi(e){if(!di)switch(e.keyCode){case Qn:id.value="",e.preventDefault();break;case Yn:case Kn:""!==id.value&&null!==id.value&&(Si(li=rd?id.value:"testtwitch27")?(hm(),Sm(u+li+ae),window.setTimeout(function(){Tm(),vi()},1500)):(ri=3500,di=!(oi=0),vm(),qi("blank_focus"),bi())),hi();break;case jn:id.value=id.value.slice(0,-1),e.preventDefault();break;case Wn:id.value+=" ",e.preventDefault()}}function bi(){try{var e=new XMLHttpRequest;e.open("GET","https://api.twitch.tv/kraken/users/"+encodeURIComponent(li)+"/follows/channels?limit=1&sortby=created_at&"+Math.round(1e7*Math.random()),!0),e.timeout=ri,e.setRequestHeader(xu,ku),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return id.value="",document.body.removeEventListener("keydown",_i),void xi();yi()}},e.send(null)}catch(e){yi()}}function yi(){++oi<si?(ri+=oi<5?250:3500,bi()):(li=null,hm(),Sm(te),window.setTimeout(function(){fi()},1e3),di=!1)}function wi(){ci=[];var e=parseInt(localStorage.getItem("UsernameArraySize"))||0;if(0<e)for(var t=0;t<e;t++)ci[t]=localStorage.getItem("UsernameArray"+t);Ii()}function ki(){(ci=JSON.parse(localStorage.getItem("usernames"))||[]).length||wi(),ci.length&&ba(),(sd=2.4<=parseFloat(tizen.systeminfo.getCapability("http://tizen.org/feature/platform.version")))&&window.setTimeout(function(){vx(),window.addEventListener("appcontrol",Ix,!1),jd=window.setInterval(vx,6e5),document.addEventListener("visibilitychange",nf,!1)},3500)}function xi(){ci.push(li),Ii(),xS=!1,TS(),di=!1,sd&&1===ci.length&&(window.clearInterval(jd),document.removeEventListener("visibilitychange",nf),jd=window.setInterval(vx,6e5),document.addEventListener("visibilitychange",nf,!1),vx())}function Ei(e){var t=Ia(ci[e]);-1<t&&wa(t);var n=ci.indexOf(ci[e]);-1<n&&ci.splice(n,1),0<ci.length?(xS=!1,TS(),e||vx()):(fi(),vx()),xa(e),Ii()}function Ii(){localStorage.setItem("usernames",JSON.stringify(ci))}function Ci(e){li=ci[0],ci[0]=ci[e],ci[e]=li,xS=!1,TS(),vx()}function Si(e){return-1!==ci.indexOf(e)}function Ti(){return 0<ci.length}function qi(e){window.scroll(0,Lf()+Rf(e)-au-ru)}var Li=0,Ri=0,Bi=!1,Fi=0,Mi=[],Oi=[],Ai=!1,Hi=0,zi=10,Ni=3500,Di=0,Ji=0,Ui=!0,Gi=25,Pi=!1,Xi=0,Vi=!1,ji=["ag_thumbdiv","ag_img","ag_infodiv","ag_displayname","ag_streamtitle","ag_streamgame","ag_viwers","ag_quality","ag_cell","agempty_"],Ki=!1,Yi=!1,Wi=!1,Qi=!1,Zi=!1;function $i(){Bd=fd,document.body.addEventListener("keydown",ko,!1),Bw&&um("top_bar_user","icon_center_focus"),dm("top_bar_game","icon_center_focus"),pm("top_bar_game",b+Ym(m+": "+Pd)),uf(Li),Vd===Pd&&Ki?(Tf(ji[0],Li,Ri,fd,au,tu,!1),Em(Ri,Li,fu,Fi)):to()}function eo(){Ki&&(-1===Li&&(Li=0),yo(),ho()),pm("top_bar_game",f),document.body.removeEventListener("keydown",ko),um("top_bar_game","icon_center_focus")}function to(){Tm(),Ki=!1,qf("blank_focus"),vm(),af("stream_table_a_game"),Pi=Zi=!1,Mi=[],Li=Ri=Fi=Xi=Ji=Di=0,Bi=Yi=!(Oi=[]),xm(),no(),ao()}function no(){Ai=!0,Hi=0,Ni=3500}function ao(){try{var e=new XMLHttpRequest,t=Fi+Ji;t&&Xi-1<t&&(t=Xi-mu,Pi=Bi=!0),e.open("GET","https://api.twitch.tv/kraken/streams?game="+encodeURIComponent(Pd)+"&limit="+mu+"&offset="+t+"&"+Math.round(1e7*Math.random()),!0),e.timeout=Ni,e.setRequestHeader(xu,ku),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void oo(e.responseText);io()}},e.send(null)}catch(e){io()}}function io(){++Hi<zi?(Ni+=Hi<5?250:3500,ao()):(Zi=Ai=!1,hm(),Sm(q))}function oo(e){var t=JSON.parse(e),n=t.streams.length;Xi=parseInt(t._total),n<mu&&(Bi=!0);var a=Fi;Vi=!(Fi+=n);var i=n/fu;0<n%fu&&i++;for(var o,s,r,c,l=document.createElement("tr"),d=0,u=0;u<3;u++)c=u?1===u?O:"":$t,(Zd=document.createElement("td")).setAttribute("id",ji[8]+"y_"+u),Zd.className="stream_cell",Zd.innerHTML='<div id="'+ji[0]+"y_"+u+'" class="stream_thumbnail_fallow_game" ><div id="'+ji[3]+"y_"+u+'" class="stream_channel_fallow_game">'+c+"</div></div>",l.appendChild(Zd);for(document.getElementById("stream_table_a_game").appendChild(l),u=0;u<i;u++){for(s=a/fu+u,l=document.createElement("tr"),o=0;o<fu&&d<n;o++,d++)ro((r=t.streams[d]).channel.name)?o--:l.appendChild(so(s,s+"_"+o,r.channel.name,[r.preview.template.replace("{width}x{height}",Cu),Jm(JSON.stringify(r.stream_type))+r.channel.display_name,r.channel.status,r.game,h+bv(r.created_at)+g+", "+_+Nm(r.viewers)+J,Dm(r.video_height,r.average_fps,r.channel.language)]));for(;o<fu;o++)Bi&&!Yi&&(Yi=!0,Fi=s*fu+o),l.appendChild(ff(ji[9]+s+"_"+o)),Oi.push(ji[9]+s+"_"+o);document.getElementById("stream_table_a_game").appendChild(l)}co()}function so(e,t,n,a){return Mi.push(n),e<fu&&mf(a[0]),hf(n,t,ji,a)}function ro(e){for(var t=0;t<Mi.length;t++)if(e===Mi[t])return Di++,!0;return!1}function co(){Mf(function(){if(Ki){if(0<Di&&!Bi)return Zi=!0,no(),void po();Di=0,Zi=Ai=!1}else hm(),lo(),Vi?(Sm(L+Q),Li=-1,Tf(ji[0],"y",0,fd,135,0,!1),bo()):(Ki=!0,ho(),cf(ji[1],9,zu,fu)),Ai=!1})}function lo(){Qi?(Wi=!0,uo()):""!==Kd?ni():(Wi=!1,uo())}function uo(){pm(ji[3]+"y_2",Wi?'<i class="icon-heart" style="color: #00b300; font-size: 100%; text-shadow: #FFFFFF 0 0 10px, #FFFFFF 0 0 10px, #FFFFFF 0 0 8px;"></i>'+Cn+Tt:'<i class="icon-heart-o" style="color: #FFFFFF; font-size: 100%; text-shadow: #000000 0 0 10px, #000000 0 0 10px, #000000 0 0 8px;"></i>'+Cn+(""!==Kd?qt:Mt))}function mo(){""!==sa?Wi?$a():Wa():(Sm(Ot),window.setTimeout(function(){Vi&&Bd===fd?Sm(L+Q):Tm()},2e3))}function fo(){Ri?1===Ri?(Bd=Ld,Vd=Pd,eo(),Pm()):mo():(Bd=qd,Vd=Pd,eo(),Pm())}function po(){try{var e=new XMLHttpRequest;Cm(Di);var t=Fi+Ji;t&&Xi-1<t&&(t=Xi-wu,Pi=!0),e.open("GET","https://api.twitch.tv/kraken/streams?game="+encodeURIComponent(Pd)+"&limit="+wu+"&offset="+t+"&"+Math.round(1e7*Math.random()),!0),e.timeout=Ni,e.setRequestHeader(xu,ku),e.ontimeout=function(){},e.onreadystatechange=function(){4!==e.readyState||200!==e.status||vo(e.responseText)},e.send(null)}catch(e){_o()}}function _o(){++Hi<zi?(Ni+=Hi<5?250:3500,po()):(Pi=!0,Di=0,Oi=[],co())}function vo(e){var t,n,a=JSON.parse(e),i=a.streams.length,o=0,s=Oi.slice();Xi=parseInt(a._total),i<mu&&(Pi=!0);for(var r=0;r<Oi.length&&o<i;r++,o++)ro((t=a.streams[o]).channel.name)?(Di--,r--):(Mi.push(t.channel.name),gf(Oi[r],t.channel.name,[t.preview.template.replace("{width}x{height}",Cu),Jm(JSON.stringify(t.stream_type))+t.channel.display_name,t.channel.status,t.game,h+bv(t.created_at)+g+", "+_+Nm(t.viewers)+J,Dm(t.video_height,t.average_fps,t.channel.language)],ji),Di--,-1<(n=s.indexOf(s[r]))&&s.splice(n,1));Ji+=o,Pi?(Di=0,Oi=[]):Oi=s,co()}function ho(){If(Li,Ri,ji,fd,fu,Fi),3<Li&&lf(ji[1],Li,zu,fu,4),Fi/fu<Li+pu&&!Bi&&!Zi&&(Zi=!0,no(),ao())}function go(){Sf(Li+"_"+Ri,ji)}function bo(){dm(ji[0]+"y_"+Ri,Tu)}function yo(){um(ji[0]+"y_"+Ri,Tu)}function wo(){Ui=!0}function ko(e){var t;if(Ai&&!Zi||!Ui)e.preventDefault();else switch(Ui=!1,window.setTimeout(wo,Gi),e.keyCode){case Vn:Bm()?Rm():Om()?Mm():Zi||(Vd=Pd,Bd=ak?gd:Ad,eo(),Pm());break;case Hn:if(-1===Li)yo(),--Ri<0&&(Ri=2),bo();else if(Li||Ri){if(Um(Li,Ri-1,ji[0]))go(),Ri--,ho();else for(t=fu-1;-1<t;t--)if(Um(Li-1,t,ji[0])){go(),Li--,Ri=t,ho();break}}else go(),yo(),Li=-1,Ri=2,bo();break;case zn:-1===Li?(yo(),2<++Ri?(Ri=0,Vi?bo():(Li=0,ho())):bo()):Um(Li,Ri+1,ji[0])?(go(),Ri++,ho()):Um(Li+1,0,ji[0])&&(go(),Li++,Ri=0,ho());break;case Nn:if(-1!==Li||Vi)if(Li){for(t=0;t<fu;t++)if(Um(Li-1,Ri-t,ji[0])){go(),Li--,Ri-=t,ho();break}}else go(),Li=-1,bo();else Li=0,yo(),ho();break;case Dn:if(-1!==Li||Vi){for(t=0;t<fu;t++)if(Um(Li+1,Ri-t,ji[0])){go(),Li++,Ri-=t,ho();break}}else Li=0,yo(),ho();break;case An:case Bn:Zi||to();break;case Ln:Bw||(Fd=fd,Bd=Sd,Vd=Pd,eo(),Pm());break;case Rn:Bw||(Fd=fd,Bd=Rd,eo(),Pm());break;case Mn:case Fn:case On:case Jn:-1!==Li?(S_=document.getElementById(ji[8]+Li+"_"+Ri).getAttribute(qu),T_=document.getElementById(ji[3]+Li+"_"+Ri).textContent,document.body.removeEventListener("keydown",ko),Vd=Pd,Vm()):fo();break;case Un:Lm();break;case Gn:eo(),ef();break;case Pn:Fm();break;case Xn:Md=fd,Bd=hd,Vd=Pd,eo(),Pm()}}var xo=0,Eo=0,Io=!1,Co=0,So=[],To=[],qo=!1,Lo=0,Ro=10,Bo=3500,Fo=0,Mo=!0,Oo=25,Ao=!1,Ho=0,zo=!1,No=["c_thumbdiv","c_img","c_infodiv","c_title","c_createdon","c_game","c_viwers","c_duration","c_cell","cpempty_","c_lang"],Do=!1,Jo=null,Uo=2,Go="week",Po=!1,Xo=!1;function Vo(){Bd=Td,Wo(),dm("top_bar_clip","icon_center_focus"),sm("label_refresh","icon-refresh",e+Yt),sm("label_controls","icon-calendar",l+" (C)"),document.body.addEventListener("keydown",cs,!1),uf(xo),Do?(Tf(No[0],xo,Eo,Td,au,tu,!1),Em(Eo,xo,fu,Co)):Ko()}function jo(){jm(),document.body.removeEventListener("keydown",cs),um("top_bar_clip","icon_center_focus"),sm("label_refresh","icon-refresh",e+Yt),sm("label_controls","icon-question-circle",hn)}function Ko(){Tm(),qf("blank_focus"),vm(),Jo=null,Do=!1,af("stream_table_clip"),Ao=Xo=!1,So=[],xo=Eo=Co=Ho=Fo=0,Io=Po=!(To=[]),xm(),Yo(),Qo()}function Yo(){qo=!0,Lo=0,Bo=3500}function Wo(){1===Uo?(pm("top_bar_clip",O+Ym(re)),Go="day"):2===Uo?(pm("top_bar_clip",O+Ym(ce)),Go="week"):3===Uo?(pm("top_bar_clip",O+Ym(le)),Go="month"):4===Uo&&(pm("top_bar_clip",O+Ym(de)),Go="all"),localStorage.setItem("Clip_periodNumber",Uo)}function Qo(){try{var e=new XMLHttpRequest;e.open("GET","https://api.twitch.tv/kraken/clips/top?limit="+mu+"&period="+encodeURIComponent(Go)+(null===Jo?"":"&cursor="+encodeURIComponent(Jo))+"&"+Math.round(1e7*Math.random()),!0),e.timeout=Bo,e.setRequestHeader(xu,ku),e.setRequestHeader(Eu,Iu),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void $o(e.responseText);Zo()}},e.send(null)}catch(e){Zo()}}function Zo(){++Lo<Ro?(Bo+=Lo<5?250:3500,Qo()):(Xo=qo=!1,hm(),Sm(q))}function $o(e){var t=JSON.parse(e),n=t.clips.length;Jo=t._cursor,n<mu&&(Io=!0);var a=Co;zo=!(Co+=n);var i=n/fu;0<n%fu&&i++;for(var o,s,r,c,l=0,d=0;d<i;d++){for(s=a/fu+d,r=document.createElement("tr"),o=0;o<fu&&l<n;o++,l++)es((c=t.clips[l]).slug)?o--:(So.push(c.slug),null===c.vod&&console.log(c.broadcaster.name+" "+s+"_"+o),r.appendChild(TT(s,s+"_"+o,c.slug+","+c.duration+","+c.game+","+c.broadcaster.name+","+c.broadcaster.display_name+","+c.broadcaster.logo.replace("150x150","300x300")+","+c.broadcaster.id+","+(null!==c.vod?c.vod.id+","+c.vod.offset:"null,null"),[c.thumbnails.medium,c.broadcaster.display_name,rn+Wm(c.created_at),c.title+mn+p+c.game,Nm(c.views)+N,"["+c.language.toUpperCase()+"]",z+hv(c.duration)],No)));for(;o<fu;o++)Io&&!Po&&(Po=!0,Co=s*fu+o),r.appendChild(ff(No[9]+s+"_"+o)),To.push(No[9]+s+"_"+o);document.getElementById("stream_table_clip").appendChild(r)}ts()}function es(e){for(var t=0;t<So.length;t++)if(e===So[t])return Fo++,!0;return!1}function ts(){Mf(function(){if(Do){if(0<Fo&&!Io)return Xo=!0,Yo(),void ns();Fo=0,Xo=qo=!(To=[])}else hm(),zo?Sm(L+O):(Do=!0,os(),cf(No[1],9,zu,fu)),qo=!1})}function ns(){try{var e=new XMLHttpRequest;e.open("GET","https://api.twitch.tv/kraken/clips/top?limit="+Fo+"&period="+encodeURIComponent(Go)+(null===Jo?"":"&cursor="+encodeURIComponent(Jo))+"&"+Math.round(1e7*Math.random()),!0),e.timeout=Bo,e.setRequestHeader(xu,ku),e.setRequestHeader(Eu,Iu),e.ontimeout=function(){},e.onreadystatechange=function(){4!==e.readyState||200!==e.status||is(e.responseText)},e.send(null)}catch(e){as()}}function as(){++Lo<Ro?(Bo+=Lo<5?250:3500,ns()):(Ao=!0,Fo=0,To=[],ts())}function is(e){var t,n,a=JSON.parse(e),i=a.clips.length,o=0,s=To.slice();Jo=a._cursor,i<Fo&&(Ao=!0);for(var r=0;r<To.length&&o<i;r++,o++)es((t=a.clips[o]).slug)?(Fo--,r--):(So.push(t.slug),LT(To[r],t.slug+","+t.duration+","+t.game+","+t.broadcaster.name+","+t.broadcaster.display_name+","+t.broadcaster.logo.replace("150x150","300x300")+","+t.broadcaster.id+","+(null!==t.vod?t.vod.id+","+t.vod.offset:"null,null"),[t.thumbnails.medium,t.broadcaster.display_name,rn+Wm(t.created_at),t.title+mn+p+t.game,Nm(t.views)+N,"["+t.language.toUpperCase()+"]",z+hv(t.duration)],No),Fo--,-1<(n=s.indexOf(s[r]))&&s.splice(n,1));Ao?(Fo=0,To=[]):To=s,ts()}function os(){If(xo,Eo,No,Td,fu,Co),3<xo&&lf(No[1],xo,zu,fu,4),Co/fu<xo+pu&&!Io&&!Xo&&(Xo=!0,Yo(),Qo())}function ss(){Sf(xo+"_"+Eo,No)}function rs(){Mo=!0}function cs(e){var t;if(!qo||Xo)if(Mo)switch(Mo=!1,window.setTimeout(rs,Oo),e.keyCode){case Vn:Bm()?Rm():(Bd=Fd===Td?dd:Fd,jo(),Pm());break;case Hn:if(Um(xo,Eo-1,No[0]))ss(),Eo--,os();else for(t=fu-1;-1<t;t--)if(Um(xo-1,t,No[0])){ss(),xo--,Eo=t,os();break}break;case zn:Um(xo,Eo+1,No[0])?(ss(),Eo++,os()):Um(xo+1,0,No[0])&&(ss(),xo++,Eo=0,os());break;case Nn:for(t=0;t<fu;t++)if(Um(xo-1,Eo-t,No[0])){ss(),xo--,Eo-=t,os();break}break;case Dn:for(t=0;t<fu;t++)if(Um(xo+1,Eo-t,No[0])){ss(),xo++,Eo-=t,os();break}break;case An:case Bn:Ko();break;case Ln:Fd=Td,Bd=dd,jo(),Pm();break;case Rn:Fd=Td,Bd=Sd,jo(),Pm();break;case Mn:case Fn:case On:case Jn:iw=document.getElementById(No[8]+xo+"_"+Eo).getAttribute(qu).split(","),Vy=parseInt(iw[1]),Pd=iw[2],Nd=iw[3],Dd=iw[4],Jd=iw[5],Xd=iw[6],Qx=iw[7],aE=parseInt(iw[8]),iw=iw[0],nw="",ow=document.getElementById(No[4]+xo+"_"+Eo).textContent,$y=document.getElementById(No[5]+xo+"_"+Eo).textContent,tw=document.getElementById(No[6]+xo+"_"+Eo).textContent,sw=document.getElementById(No[7]+xo+"_"+Eo).textContent,ew=document.getElementById(No[10]+xo+"_"+Eo).innerHTML,ls();break;case Un:Lm();break;case Gn:jo(),ef();break;case Pn:Xo||(4<++Uo&&(Uo=1),Wo(),Ko());break;case Xn:Bw||(Md=Td),Bd=hd,jo(),Pm()}else e.preventDefault();else e.preventDefault()}function ls(){document.body.addEventListener("keydown",Ap,!1),document.body.removeEventListener("keydown",cs),cm("scene2"),jv(),zv(),Rv(),Mv(),rm("scene1"),dp()}var ds=!1,us=["f_thumbdiv","f_img","f_infodiv","f_displayname","f_streamtitle","f_streamgame","f_viwers","f_quality","f_cell","fempty_"],ms=0,fs=0,ps=0,_s=!1,vs=0,hs=[],gs=!1,bs=0,ys=10,ws=3500,ks=0,xs=[],Es=0,Is=!0,Cs=25,Ss=!1,Ts=0,qs=!1,Ls=!1,Rs=0,Bs=!1,Fs=!1;function Ms(){Bd=Rd,dm("top_bar_featured","icon_center_focus"),document.body.addEventListener("keydown",Ws,!1),uf(ms),ds?(Tf(us[0],ms,fs,Rd,au,tu,!1),Em(fs,ms,fu,vs)):As()}function Os(){document.body.removeEventListener("keydown",Ws),um("top_bar_featured","icon_center_focus")}function As(){Tm(),ds=!1,qf("blank_focus"),vm(),af("stream_table_featured"),Fs=!1,Ls=Ss=!(xs=[]),Rs=ms=fs=vs=Ts=Es=ks=0,_s=!(hs=[]),xm(),Hs(),zs()}function Hs(){gs=!0,bs=0,ws=3500}function zs(){try{var e=new XMLHttpRequest,t=vs+Es;e.open("GET","https://api.twitch.tv/kraken/streams/featured?limit="+mu+"&offset="+t+(""!==sa?"&oauth_token="+sa:"")+"&"+Math.round(1e7*Math.random()),!0),e.timeout=ws,e.setRequestHeader(xu,ku),e.setRequestHeader(Eu,Iu),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void Ds(e.responseText);Ns()}},e.send(null)}catch(e){Ns()}}function Ns(){++bs<ys?(ws+=bs<5?250:3500,zs()):Fs?(Ss=_s=!(Fs=!1),Gs()):(gs=!1,hm(),Sm(q))}function Ds(e){var t=JSON.parse(e),n=t.featured.length;Ts=parseInt(t._total),n<mu&&(_s=!0);var a=vs;Bs=!(vs+=n);var i=n/fu;0<n%fu&&i++;for(var o,s,r,c,l=0,d=0;d<i;d++){for(s=a/fu+d,r=document.createElement("tr"),o=0;o<fu&&l<n;o++,l++)Us((c=t.featured[l].stream).channel.name)?o--:r.appendChild(Js(s,s+"_"+o,c.channel.name,[c.preview.template.replace("{width}x{height}",Cu),Jm(JSON.stringify(c.stream_type))+c.channel.display_name,c.channel.status,c.game,h+bv(c.created_at)+g+", "+_+Nm(c.viewers)+J,Dm(c.video_height,c.average_fps,c.channel.language)]));for(;o<fu;o++)_s&&!Ls&&(Ls=!0,vs=s*fu+o),r.appendChild(ff(us[9]+s+"_"+o)),xs.push(us[9]+s+"_"+o);document.getElementById("stream_table_featured").appendChild(r)}Gs()}function Js(e,t,n,a){return hs.push(n),e<fu&&mf(a[0]),hf(n,t,us,a)}function Us(e){for(var t=0;t<hs.length;t++)if(e===hs[t])return ks++,!0;return!1}function Gs(){Mf(function(){if(ds){if(0<ks&&!_s)return Fs=!0,Hs(),void Ps();ks=0,Fs=gs=!(xs=[])}else hm(),Bs?Sm(L+STR_Featured_CHANNELS):(ds=!0,cf(us[1],9,zu,fu),js()),gs=!1})}function Ps(){try{var e=new XMLHttpRequest;Cm(ks);var t=vs+Es;e.open("GET","https://api.twitch.tv/kraken/streams/featured?limit="+wu+"&offset="+t+(""!==sa?"&oauth_token="+sa:"")+"&"+Math.round(1e7*Math.random()),!0),e.timeout=ws,e.setRequestHeader(xu,ku),e.setRequestHeader(Eu,Iu),e.ontimeout=function(){},e.onreadystatechange=function(){4!==e.readyState||200!==e.status||Vs(e.responseText)},e.send(null)}catch(e){Xs()}}function Xs(){++bs<ys?(ws+=bs<5?250:3500,Ps()):(Ss=!0,ks=0,xs=[],Gs())}function Vs(e){var t,n,a=JSON.parse(e),i=a.featured.length,o=0,s=xs.slice();i<mu&&(Ss=!0);for(var r=0;r<xs.length&&o<i;r++,o++)Us((t=a.featured[o].stream).channel.name)?(ks--,r--):(hs.push(t.channel.name),gf(xs[r],t.channel.name,[t.preview.template.replace("{width}x{height}",Cu),Jm(JSON.stringify(t.stream_type))+t.channel.display_name,t.channel.status,t.game,h+bv(t.created_at)+g+", "+_+Nm(t.viewers)+J,Dm(t.video_height,t.average_fps,t.channel.language)],us),ks--,-1<(n=s.indexOf(s[r]))&&s.splice(n,1));Es+=o,Ss?(ks=0,xs=[]):xs=s,Gs()}function js(){If(ms,fs,us,Rd,fu,vs),3<ms&&lf(us[1],ms,zu,fu,4),vs/fu<ms+pu&&!_s&&!Fs&&(Fs=!0,Hs(),zs())}function Ks(){Sf(ms+"_"+fs,us)}function Ys(){Is=!0}function Ws(e){var t;if(gs&&!Fs||!Is)e.preventDefault();else switch(Is=!1,window.setTimeout(Ys,Cs),e.keyCode){case Vn:Bm()?Rm():Om()?Mm():(Bd=Fd===Rd?dd:Fd,Os(),Pm());break;case Hn:if(Um(ms,fs-1,us[0]))Ks(),fs--,js();else for(t=fu-1;-1<t;t--)if(Um(ms-1,t,us[0])){Ks(),ms--,fs=t,js();break}break;case zn:Um(ms,fs+1,us[0])?(Ks(),fs++,js()):Um(ms+1,0,us[0])&&(Ks(),ms++,fs=0,js());break;case Nn:for(t=0;t<fu;t++)if(Um(ms-1,fs-t,us[0])){Ks(),ms--,fs-=t,js();break}break;case Dn:for(t=0;t<fu;t++)if(Um(ms+1,fs-t,us[0])){Ks(),ms++,fs-=t,js();break}break;case An:case Bn:Fs||As();break;case Ln:Fs||(Fd=xd,Bd=md,Os(),Pm());break;case Rn:Fs||(Fd=Rd,Bd=Ti()?xd:ud,Os(),Pm());break;case Mn:case Fn:case On:case Jn:S_=document.getElementById(us[8]+ms+"_"+fs).getAttribute(qu),T_=document.getElementById(us[3]+ms+"_"+fs).textContent,document.body.removeEventListener("keydown",Ws),Vm();break;case Un:Lm();break;case Gn:Os(),ef();break;case Pn:Fm();break;case Xn:Md=Rd,Bd=hd,Os(),Pm()}}var Qs=!1,Zs=0,$s=0,er=!1,tr=0,nr=[],ar=!1,ir=0,or=10,sr=3500,rr=0,cr=[],lr=0,dr=!0,ur=0,mr=!1,fr=0,pr=1,_r=!1,vr=!1,hr=!1,gr=["g_thumbdiv","g_img","g_infodiv","g_displayname","g_viwers","g_cell","gempty_"];function br(){Bd=md,document.body.addEventListener("keydown",Or,!1),dm("top_bar_game","icon_center_focus"),uf(Zs),Qs?(Tf(gr[0],Zs,$s,md,ou,nu,!1),Em($s,Zs,vu,tr)):wr()}function yr(){document.body.removeEventListener("keydown",Or),um("top_bar_game","icon_center_focus")}function wr(){Tm(),Qs=!1,qf("blank_focus"),vm(),af("stream_table_games"),hr=!1,_r=mr=!(cr=[]),Zs=$s=tr=fr=lr=rr=0,er=!(nr=[]),xm(),kr(),xr()}function kr(){ar=!0,ir=0,sr=3500}function xr(){try{var e=new XMLHttpRequest,t=tr+lr;t&&fr-1<t&&(t=fr-_u,mr=er=!0),e.open("GET","https://api.twitch.tv/kraken/games/top?limit="+(_u+(t?0:pr))+"&offset="+t+"&"+Math.round(1e7*Math.random()),!0),e.timeout=sr,e.setRequestHeader(xu,ku),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void Ir(e.responseText);Er()}},e.send(null)}catch(e){Er()}}function Er(){++ir<or?(sr+=ir<5?250:3500,xr()):hr?(mr=er=!(hr=!1),Tr()):(ar=!1,hm(),Sm(q))}function Ir(e){var t=JSON.parse(e),n=t.top.length;if(fr=parseInt(t._total),_u<n)return pr=0,kr(),void xr();n<_u&&(er=!0);var a=tr;vr=!(tr+=n);var i=n/vu;0<n%vu&&i++;for(var o,s,r,c,l=0,d=0;d<i;d++){for(s=a/vu+d,r=document.createElement("tr"),o=0;o<vu&&l<n;o++,l++)Sr((c=t.top[l]).game.name)?o--:r.appendChild(Cr(s,s+"_"+o,[c.game.name,c.game.box.template.replace("{width}x{height}",Su),Nm(c.channels)+" "+E+_+Nm(c.viewers)+J]));for(;o<vu;o++)er&&!_r&&(_r=!0,tr=s*vu+o),r.appendChild(ff(gr[6]+s+"_"+o)),cr.push(gr[6]+s+"_"+o);document.getElementById("stream_table_games").appendChild(r)}Tr()}function Cr(e,t,n){return nr.push(n[0]),e<2&&mf(n[1]),yf(t,gr,n)}function Sr(e){for(var t=0;t<nr.length;t++)if(e===nr[t])return rr++,!0;return!1}function Tr(){Mf(function(){if(Qs){if(0<rr&&!er)return hr=!0,kr(),void qr();rr=0,hr=ar=!(cr=[])}else hm(),vr?Sm(L+Q):(Qs=!0,Br(),cf(gr[1],7,Au,vu)),ar=!1})}function qr(){try{var e=new XMLHttpRequest;Cm(rr);var t=tr+lr;t&&fr-1<t&&(t=fr-wu,mr=!0),e.open("GET","https://api.twitch.tv/kraken/games/top?limit="+wu+"&offset="+t+"&"+Math.round(1e7*Math.random()),!0),e.timeout=sr,e.setRequestHeader(xu,ku),e.ontimeout=function(){},e.onreadystatechange=function(){4!==e.readyState||200!==e.status||Rr(e.responseText)},e.send(null)}catch(e){Lr()}}function Lr(){++ir<or?(sr+=ir<5?250:3500,qr()):(mr=!0,rr=0,cr=[],Tr())}function Rr(e){var t,n,a=JSON.parse(e),i=a.top.length,o=0,s=cr.slice();fr=parseInt(a._total),i<_u&&(mr=!0);for(var r=0;r<cr.length&&o<i;r++,o++)Sr((t=a.top[o]).game.name)?(rr--,r--):(nr.push(t.game.name),wf(cr[r],[t.game.name,t.game.box.template.replace("{width}x{height}",Su),Nm(t.channels)+" "+E+_+Nm(t.viewers)+J],gr),rr--,-1<(n=s.indexOf(s[r]))&&s.splice(n,1));lr+=o,mr?(rr=0,cr=[]):cr=s,Tr()}function Br(){Cf(Zs,$s,gr,md,vu,tr),2<Zs&&lf(gr[1],Zs,Au,vu,3),tr/vu<Zs+hu&&!er&&!hr&&(hr=!0,kr(),xr())}function Fr(){Sf(Zs+"_"+$s,gr)}function Mr(){dr=!0}function Or(e){var t;if(ar&&!hr||!dr)e.preventDefault();else switch(dr=!1,window.setTimeout(Mr,ur),e.keyCode){case Vn:Bm()?Rm():Om()?Mm():(Bd=Bd===Fd||Fd===fd||Fd===hd?dd:Fd,yr(),Pm());break;case Hn:if(Um(Zs,$s-1,gr[0]))Fr(),$s--,Br();else for(t=vu-1;-1<t;t--)if(Um(Zs-1,t,gr[0])){Fr(),Zs--,$s=t,Br();break}break;case zn:Um(Zs,$s+1,gr[0])?(Fr(),$s++,Br()):Um(Zs+1,0,gr[0])&&(Fr(),Zs++,$s=0,Br());break;case Nn:for(t=0;t<vu;t++)if(Um(Zs-1,$s-t,gr[0])){Fr(),Zs--,$s-=t,Br();break}break;case Dn:for(t=0;t<vu;t++)if(Um(Zs+1,$s-t,gr[0])){Fr(),Zs++,$s-=t,Br();break}break;case An:case Bn:hr||wr();break;case Ln:Fd=md,Bd=Sd,yr(),Pm();break;case Rn:Fd=md,Bd=Rd,yr(),Pm();break;case Mn:case Fn:case On:case Jn:hr||(Pd=document.getElementById(gr[5]+Zs+"_"+$s).getAttribute(qu),document.body.removeEventListener("keydown",Or),Ad=Bd,Bd=fd,Qi=!(zd=!0),yr(),Pm());break;case Un:Lm();break;case Gn:yr(),ef();break;case Pn:Fm();break;case Xn:Md=md,Bd=hd,yr(),Pm()}}var Ar=0,Hr=0,zr=!1,Nr=0,Dr=[],Jr=[],Ur=!1,Gr=0,Pr=10,Xr=3500,Vr=0,jr=!0,Kr=25,Yr=!1,Wr=0,Qr=!1,Zr=["gc_thumbdiv","gc_img","gc_infodiv","gc_title","gc_createdon","gc_game","gc_viwers","gc_duration","gc_cell","gcpempty_","gc_lang"],$r=!1,ec=null,tc=2,nc="week",ac=!1,ic=!1,oc="";function sc(){Bd=Ld,dc(),dm("top_bar_game","icon_center_focus"),sm("label_controls","icon-arrow-circle-left",C),sm("label_switch","icon-calendar",l+Zt),document.body.addEventListener("keydown",kc,!1),uf(Ar),oc===Pd&&$r?(Tf(Zr[0],Ar,Hr,Ld,au,tu,!1),Em(Hr,Ar,fu,Nr)):cc()}function rc(){document.body.removeEventListener("keydown",kc),um("top_bar_game","icon_center_focus"),pm("top_bar_game",f),sm("label_controls","icon-question-circle",hn),sm("label_switch","icon-switch",r)}function cc(){oc=Pd,Tm(),qf("blank_focus"),vm(),ec=null,$r=!1,af("stream_table_gclip"),Yr=ic=!1,Dr=[],Ar=Hr=Nr=Wr=Vr=0,zr=ac=!(Jr=[]),xm(),lc(),uc()}function lc(){Ur=!0,Gr=0,Xr=3500}function dc(){1===tc?(pm("top_bar_game",b+Ym(O+re+": "+Pd)),nc="day"):2===tc?(pm("top_bar_game",b+Ym(O+ce+": "+Pd)),nc="week"):3===tc?(pm("top_bar_game",b+Ym(O+le+": "+Pd)),nc="month"):4===tc&&(pm("top_bar_game",b+Ym(O+de+": "+Pd)),nc="all"),localStorage.setItem("Gclip_periodNumber",tc)}function uc(){try{var e=new XMLHttpRequest;e.open("GET","https://api.twitch.tv/kraken/clips/top?game="+encodeURIComponent(Pd)+"&limit="+mu+"&period="+encodeURIComponent(nc)+(null===ec?"":"&cursor="+encodeURIComponent(ec))+"&"+Math.round(1e7*Math.random()),!0),e.timeout=Xr,e.setRequestHeader(xu,ku),e.setRequestHeader(Eu,Iu),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void fc(e.responseText);mc()}},e.send(null)}catch(e){mc()}}function mc(){++Gr<Pr?(Xr+=Gr<5?250:3500,uc()):(ic=Ur=!1,hm(),Sm(q))}function fc(e){var t=JSON.parse(e),n=t.clips.length;ec=t._cursor,n<mu&&(zr=!0);var a=Nr;Qr=!(Nr+=n);var i=n/fu;0<n%fu&&i++;for(var o,s,r,c,l=0,d=0;d<i;d++){for(s=a/fu+d,r=document.createElement("tr"),o=0;o<fu&&l<n;o++,l++)pc((c=t.clips[l]).slug)?o--:(Dr.push(c.slug),r.appendChild(TT(s,s+"_"+o,c.slug+","+c.duration+","+c.game+","+c.broadcaster.name+","+c.broadcaster.display_name+","+c.broadcaster.logo.replace("150x150","300x300")+","+c.broadcaster.id+","+(null!==c.vod?c.vod.id+","+c.vod.offset:"null,null"),[c.thumbnails.medium,c.broadcaster.display_name,rn+Wm(c.created_at),c.title+mn+p+c.game,Nm(c.views)+N,"["+c.language.toUpperCase()+"]",z+hv(c.duration)],Zr)));for(;o<fu;o++)zr&&!ac&&(ac=!0,Nr=s*fu+o),r.appendChild(ff(Zr[9]+s+"_"+o)),Jr.push(Zr[9]+s+"_"+o);document.getElementById("stream_table_gclip").appendChild(r)}_c()}function pc(e){for(var t=0;t<Dr.length;t++)if(e===Dr[t])return Vr++,!0;return!1}function _c(){Mf(function(){if($r){if(0<Vr&&!zr)return ic=!0,lc(),void vc();Vr=0,ic=Ur=!(Jr=[])}else hm(),Qr?Sm(L+O):($r=!0,bc(),cf(Zr[1],9,zu,fu)),Ur=!1})}function vc(){try{var e=new XMLHttpRequest;e.open("GET","https://api.twitch.tv/kraken/clips/top?game="+encodeURIComponent(Pd)+"&limit="+Vr+"&period="+encodeURIComponent(nc)+(null===ec?"":"&cursor="+encodeURIComponent(ec))+"&"+Math.round(1e7*Math.random()),!0),e.timeout=Xr,e.setRequestHeader(xu,ku),e.setRequestHeader(Eu,Iu),e.ontimeout=function(){},e.onreadystatechange=function(){4!==e.readyState||200!==e.status||gc(e.responseText)},e.send(null)}catch(e){hc()}}function hc(){++Gr<Pr?(Xr+=Gr<5?250:3500,vc()):(Yr=!0,Vr=0,Jr=[],_c())}function gc(e){var t,n,a=JSON.parse(e),i=a.clips.length,o=0,s=Jr.slice();ec=a._cursor,i<Vr&&(Yr=!0);for(var r=0;r<Jr.length&&o<i;r++,o++)pc((t=a.clips[o]).slug)?(Vr--,r--):(Dr.push(t.slug),LT(Jr[r],t.slug+","+t.duration+","+t.game+","+t.broadcaster.name+","+t.broadcaster.display_name+","+t.broadcaster.logo.replace("150x150","300x300")+","+t.broadcaster.id+","+(null!==t.vod?t.vod.id+","+t.vod.offset:"null,null"),[t.thumbnails.medium,t.broadcaster.display_name,rn+Wm(t.created_at),t.title+mn+p+t.game,Nm(t.views)+N,"["+t.language.toUpperCase()+"]",z+hv(t.duration)],Zr),Vr--,-1<(n=s.indexOf(s[r]))&&s.splice(n,1));Yr?(Vr=0,Jr=[]):Jr=s,_c()}function bc(){If(Ar,Hr,Zr,Ld,fu,Nr),3<Ar&&lf(Zr[1],Ar,zu,fu,4),Nr/fu<Ar+pu&&!zr&&!ic&&(ic=!0,lc(),uc())}function yc(){Sf(Ar+"_"+Hr,Zr)}function wc(){jr=!0}function kc(e){var t;if(!Ur||ic)if(jr)switch(jr=!1,window.setTimeout(wc,Kr),e.keyCode){case Vn:Bm()?Rm():Om()?Mm():(Bd=fd,rc(),Pm());break;case Hn:if(Um(Ar,Hr-1,Zr[0]))yc(),Hr--,bc();else for(t=fu-1;-1<t;t--)if(Um(Ar-1,t,Zr[0])){yc(),Ar--,Hr=t,bc();break}break;case zn:Um(Ar,Hr+1,Zr[0])?(yc(),Hr++,bc()):Um(Ar+1,0,Zr[0])&&(yc(),Ar++,Hr=0,bc());break;case Nn:for(t=0;t<fu;t++)if(Um(Ar-1,Hr-t,Zr[0])){yc(),Ar--,Hr-=t,bc();break}break;case Dn:for(t=0;t<fu;t++)if(Um(Ar+1,Hr-t,Zr[0])){yc(),Ar++,Hr-=t,bc();break}break;case An:case Bn:cc();break;case Ln:ic||(4<++tc&&(tc=1),dc(),cc());break;case Rn:ic||(--tc<1&&(tc=4),dc(),cc());break;case Mn:case Fn:case On:case Jn:iw=document.getElementById(Zr[8]+Ar+"_"+Hr).getAttribute(qu).split(","),SGclip_DurationSeconds=parseInt(iw[1]),Pd=iw[2],Nd=iw[3],Dd=iw[4],Jd=iw[5],Xd=iw[6],Qx=iw[7],aE=parseInt(iw[8]),iw=iw[0],nw="",ow=document.getElementById(Zr[4]+Ar+"_"+Hr).textContent,$y=document.getElementById(Zr[5]+Ar+"_"+Hr).textContent,tw=document.getElementById(Zr[6]+Ar+"_"+Hr).textContent,sw=document.getElementById(Zr[7]+Ar+"_"+Hr).textContent,ew=document.getElementById(Zr[10]+Ar+"_"+Hr).innerHTML,xc();break;case Un:Lm();break;case Gn:rc(),ef();break;case Pn:Fm();break;case Xn:Bw||(Md=Ld),Bd=hd,rc(),Pm()}else e.preventDefault();else e.preventDefault()}function xc(){document.body.addEventListener("keydown",Ap,!1),document.body.removeEventListener("keydown",kc),cm("scene2"),jv(),zv(),Rv(),Mv(),rm("scene1"),dp()}var Ec=0,Ic=0,Cc=!1,Sc=0,Tc=[],qc=[],Lc=!1,Rc=0,Bc=10,Fc=3500,Mc=0,Oc=0,Ac=!0,Hc=25,zc=!1,Nc=0,Dc=!1,Jc=!1,Uc="week",Gc=2,Pc=!1,Xc=["gv_thumbdiv","gv_img","gv_infodiv","gv_title","gv_streamon","gv_duration","gv_viwers","gv_quality","gv_cell","gsvempty_","gv_game"],Vc=!1,jc=!1,Kc=!1,Yc="";function Wc(){Bd=qd,dm("top_bar_game","icon_center_focus"),document.body.addEventListener("keydown",ul,!1),sm("label_controls","icon-arrow-circle-left",C),sm("label_refresh","icon-refresh",c+Yt),sm("label_switch","icon-calendar",l+Zt),uf(Ec),Yc===Pd&&Vc?(Tf(Xc[0],Ec,Ic,qd,au,tu,!1),Em(Ic,Ec,fu,Sc),fl()):Zc()}function Qc(){document.body.removeEventListener("keydown",ul),um("top_bar_game","icon_center_focus"),pm("top_bar_game",f),sm("label_controls","icon-question-circle",hn),sm("label_refresh","icon-refresh",e+Yt),sm("label_switch","icon-switch",r)}function Zc(){Yc=Pd,fl(),Tm(),Vc=!1,qf("blank_focus"),vm(),af("stream_table_gvod"),zc=Kc=!1,Tc=[],Ec=Ic=Sc=Nc=Oc=Mc=0,Cc=Jc=!(qc=[]),xm(),$c(),el()}function $c(){Lc=!0,Rc=0,Fc=3500}function el(){try{var e=new XMLHttpRequest,t=Sc+Oc;t&&Nc-1<t&&(t=Nc-mu,zc=Cc=!0),e.open("GET","https://api.twitch.tv/kraken/videos/top?game="+encodeURIComponent(Pd)+"&limit="+mu+"&broadcast_type="+(jc?"highlight":"archive")+"&sort=views&offset="+t+"&period="+Uc+"&"+Math.round(1e7*Math.random()),!0),e.timeout=Fc,e.setRequestHeader(xu,ku),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void nl(e.responseText);tl()}},e.send(null)}catch(e){tl()}}function tl(){++Rc<Bc?(Fc+=Rc<5?250:3500,el()):(Kc=Lc=!1,hm(),Sm(q))}function nl(e){var t=JSON.parse(e),n=t.videos.length;Nc=parseInt(t._total),n<mu&&(Cc=!0);var a=Sc;Dc=!(Sc+=n);var i=n/fu;0<n%fu&&i++;for(var o,s,r,c,l=0,d=0;d<i;d++){for(s=a/fu+d,r=document.createElement("tr"),o=0;o<fu&&l<n;o++,l++)c=t.videos[l],-1!==(JSON.stringify(c.preview)+"").indexOf("404_processing_320x240.png")?(Mc++,o--):al(c._id)?o--:(Tc.push(c._id),r.appendChild(TT(s,s+"_"+o,c._id+","+c.length+","+c.language+","+c.game+","+c.channel.name,[c.preview.replace("320x240",Cu),c.channel.display_name,H+Wm(c.created_at),c.title+mn+Qt+p+c.game,Nm(c.views)+N,Dm(c.resolutions.chunked.slice(-4),parseInt(c.fps.chunked)||0,c.language),z+hv(c.length)],Xc)));for(;o<fu;o++)Cc&&!Jc&&(Jc=!0,Sc=s*fu+o),r.appendChild(ff(Xc[9]+s+"_"+o)),qc.push(Xc[9]+s+"_"+o);document.getElementById("stream_table_gvod").appendChild(r)}il()}function al(e){for(var t=0;t<Tc.length;t++)if(e===Tc[t])return Mc++,!0;return!1}function il(){Mf(function(){if(Vc){if(0<Mc&&!Cc)return Kc=!0,$c(),void ol();Mc=0,Kc=Lc=!(qc=[])}else hm(),Dc?Sm(L+(jc?M:F)+R+I):(Vc=!0,cl(),cf(Xc[1],9,zu,fu)),Lc=!1})}function ol(){try{var e=new XMLHttpRequest;Cm(Mc);var t=Sc+Oc;t&&Nc-1<t&&(t=Nc-wu,zc=!0),e.open("GET","https://api.twitch.tv/kraken/videos/top?game="+encodeURIComponent(Pd)+"&limit="+wu+"&broadcast_type="+(jc?"highlight":"archive")+"&sort=views&offset="+t+"&period="+Uc+"&"+Math.round(1e7*Math.random()),!0),e.timeout=Fc,e.setRequestHeader(xu,ku),e.ontimeout=function(){},e.onreadystatechange=function(){4!==e.readyState||200!==e.status||rl(e.responseText)},e.send(null)}catch(e){sl()}}function sl(){++Rc<Bc?(Fc+=Rc<5?250:3500,ol()):(zc=!0,Mc=0,qc=[],il())}function rl(e){var t,n,a=JSON.parse(e),i=a.videos.length,o=0,s=qc.slice();Nc=parseInt(a._total),i<mu&&(zc=!0);for(var r=0;r<qc.length&&o<i;r++,o++)t=a.videos[o],-1!==(JSON.stringify(t.preview)+"").indexOf("404_processing_320x240.png")?r--:al(t._id)?(Mc--,r--):(Tc.push(t._id),LT(qc[r],t._id+","+t.length+","+t.language+","+t.game+","+t.channel.name,[t.preview.replace("320x240",Cu),t.channel.display_name,H+Wm(t.created_at),t.title+mn+Qt+p+t.game,Nm(t.views)+N,Dm(t.resolutions.chunked.slice(-4),parseInt(t.fps.chunked)||0,t.language),z+hv(t.length)],Xc),Mc--,-1<(n=s.indexOf(s[r]))&&s.splice(n,1));Oc+=o,zc?(Mc=0,qc=[]):qc=s,il()}function cl(){If(Ec,Ic,Xc,qd,fu,Sc),3<Ec&&lf(Xc[1],Ec,zu,fu,4),Sc/fu<Ec+pu&&!Cc&&!Kc&&(Kc=!0,$c(),el())}function ll(){Sf(Ec+"_"+Ic,Xc)}function dl(){Ac=!0}function ul(e){var t;if(!Lc||Kc)if(Ac)switch(Ac=!1,window.setTimeout(dl,Hc),e.keyCode){case Vn:Bm()?Rm():Om()?Mm():(Bd=fd,Qc(),Pm());break;case Hn:if(Um(Ec,Ic-1,Xc[0]))ll(),Ic--,cl();else for(t=fu-1;-1<t;t--)if(Um(Ec-1,t,Xc[0])){ll(),Ec--,Ic=t,cl();break}break;case zn:Um(Ec,Ic+1,Xc[0])?(ll(),Ic++,cl()):Um(Ec+1,0,Xc[0])&&(ll(),Ec++,Ic=0,cl());break;case Nn:for(t=0;t<fu;t++)if(Um(Ec-1,Ic-t,Xc[0])){ll(),Ec--,Ic-=t,cl();break}break;case Dn:for(t=0;t<fu;t++)if(Um(Ec+1,Ic-t,Xc[0])){ll(),Ec++,Ic-=t,cl();break}break;case Ln:Kc||(4<++Gc&&(Gc=1),Zc());break;case Rn:Kc||(--Gc<1&&(Gc=4),Zc());break;case An:case Bn:Kc||(jc=!jc,localStorage.setItem("Gvod_highlight",jc?"true":"false"),Zc());break;case Mn:case Fn:case On:case Jn:Qx=document.getElementById(Xc[8]+Ec+"_"+Ic).getAttribute(qu).split(","),Ux=parseInt(Qx[1]),Xx=Qx[2],Vx=Qx[3],Nd=Qx[4],Qx=Qx[0].substr(1),Zx="",Dd=document.getElementById(Xc[3]+Ec+"_"+Ic).textContent,eE=document.getElementById(Xc[4]+Ec+"_"+Ic).textContent,tE=document.getElementById(Xc[5]+Ec+"_"+Ic).textContent,$x=document.getElementById(Xc[10]+Ec+"_"+Ic).innerHTML+", "+document.getElementById(Xc[6]+Ec+"_"+Ic).textContent,ml();break;case Un:Lm();break;case Gn:Qc(),ef();break;case Pn:Fm();break;case Xn:Bw||(Md=qd),Bd=hd,Qc(),Pm()}else e.preventDefault();else e.preventDefault()}function ml(){document.body.addEventListener("keydown",Wg,!1),document.body.removeEventListener("keydown",ul),cm("scene2"),Dg(),jv(),zv(),Rv(),Mv(),Pc=!0,rm("scene1"),_g()}function fl(){1===Gc?(pm("top_bar_game",b+Ym((jc?M:F)+re+": "+Pd)),Uc="day"):2===Gc?(pm("top_bar_game",b+Ym((jc?M:F)+ce+": "+Pd)),Uc="week"):3===Gc?(pm("top_bar_game",b+Ym((jc?M:F)+le+": "+Pd)),Uc="month"):4===Gc&&(pm("top_bar_game",b+Ym((jc?M:F)+de+": "+Pd)),Uc="all"),localStorage.setItem("Gvod_periodNumber",Gc)}var pl=!1,_l=["l_thumbdiv","l_img","l_infodiv","l_displayname","l_streamtitle","l_streamgame","l_viwers","l_quality","l_cell","lempty_"],vl=0,hl=0,gl=0,bl=!1,yl=0,wl=[],kl=!1,xl=0,El=10,Il=3500,Cl=0,Sl=[],Tl=0,ql=!0,Ll=25,Rl=!1,Bl=0,Fl=!1,Ml=!1,Ol=0,Al=!1,Hl=!1;function zl(){Bd=dd,dm("top_bar_live","icon_center_focus"),document.body.addEventListener("keydown",td,!1),uf(vl),pl?(Tf(_l[0],vl,hl,dd,au,tu,!1),Em(hl,vl,fu,yl)):Dl()}function Nl(){document.body.removeEventListener("keydown",td),um("top_bar_live","icon_center_focus"),wm()}function Dl(){Tm(),pl=!1,qf("blank_focus"),vm(),af("stream_table_live"),Hl=!1,Ml=Rl=!(Sl=[]),Ol=vl=hl=yl=Bl=Tl=Cl=0,bl=!(wl=[]),xm(),Jl(),Ul()}function Jl(){kl=!0,xl=0,Il=3500}function Ul(){try{var e=new XMLHttpRequest,t=yl+Tl;t&&Bl-1<t&&(t=Bl-mu,Rl=bl=!0),e.open("GET","https://api.twitch.tv/kraken/streams?limit="+mu+"&offset="+t+"&"+Math.round(1e7*Math.random()),!0),e.timeout=Il,e.setRequestHeader(xu,ku),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void Pl(e.responseText);Gl()}},e.send(null)}catch(e){Gl()}}function Gl(){++xl<El?(Il+=xl<5?250:3500,Ul()):Hl?(Rl=bl=!(Hl=!1),jl()):(kl=!1,hm(),Sm(q),cm("topbar"))}function Pl(e){var t=JSON.parse(e),n=t.streams.length;Bl=parseInt(t._total),n<mu&&(bl=!0);var a=yl;Al=!(yl+=n);var i=n/fu;0<n%fu&&i++;for(var o,s,r,c,l=0,d=0;d<i;d++){for(s=a/fu+d,r=document.createElement("tr"),o=0;o<fu&&l<n;o++,l++)Vl((c=t.streams[l]).channel.name)?o--:r.appendChild(Xl(s,s+"_"+o,c.channel.name,[c.preview.template.replace("{width}x{height}",Cu),Jm(JSON.stringify(c.stream_type))+c.channel.display_name,c.channel.status,c.game,h+bv(c.created_at)+g+", "+_+Nm(c.viewers)+J,Dm(c.video_height,c.average_fps,c.channel.language)]));for(;o<fu;o++)bl&&!Ml&&(Ml=!0,yl=s*fu+o),r.appendChild(ff(_l[9]+s+"_"+o)),Sl.push(_l[9]+s+"_"+o);document.getElementById("stream_table_live").appendChild(r)}jl()}function Xl(e,t,n,a){return wl.push(n),e<fu&&mf(a[0]),hf(n,t,_l,a)}function Vl(e){for(var t=0;t<wl.length;t++)if(e===wl[t])return Cl++,!0;return!1}function jl(){Mf(function(){if(pl){if(0<Cl&&!bl)return Hl=!0,Jl(),void Kl();Cl=0,Hl=kl=!(Sl=[])}else hm(),cm("topbar"),Al?Sm(L+Y):(pl=!0,cf(_l[1],9,zu,fu),Ql()),kl=!1,Fl||(Fl=!0,$m()&&Am(),document.getElementById("oauth").style.display="block",document.getElementById("search").style.display="block",document.getElementById("add_user").style.display="block")})}function Kl(){try{var e=new XMLHttpRequest;Cm(Cl);var t=yl+Tl;t&&Bl-1<t&&(t=Bl-wu,Rl=!0),e.open("GET","https://api.twitch.tv/kraken/streams?limit="+wu+"&offset="+t+"&"+Math.round(1e7*Math.random()),!0),e.timeout=Il,e.setRequestHeader(xu,ku),e.ontimeout=function(){},e.onreadystatechange=function(){4!==e.readyState||200!==e.status||Wl(e.responseText)},e.send(null)}catch(e){Yl()}}function Yl(){++xl<El?(Il+=xl<5?250:3500,Kl()):(Rl=!0,Cl=0,Sl=[],jl())}function Wl(e){var t,n,a=JSON.parse(e),i=a.streams.length,o=0,s=Sl.slice();Bl=parseInt(a._total),i<mu&&(Rl=!0);for(var r=0;r<Sl.length&&o<i;r++,o++)Vl((t=a.streams[o]).channel.name)?(Cl--,r--):(wl.push(t.channel.name),gf(Sl[r],t.channel.name,[t.preview.template.replace("{width}x{height}",Cu),Jm(JSON.stringify(t.stream_type))+t.channel.display_name,t.channel.status,t.game,h+bv(t.created_at)+g+", "+_+Nm(t.viewers)+J,Dm(t.video_height,t.average_fps,t.channel.language)],_l),Cl--,-1<(n=s.indexOf(s[r]))&&s.splice(n,1));Tl+=o,Rl?(Cl=0,Sl=[]):Sl=s,jl()}function Ql(){If(vl,hl,_l,dd,fu,yl),3<vl&&lf(_l[1],vl,zu,fu,4),yl/fu<vl+pu&&!bl&&!Hl&&(Hl=!0,Jl(),Ul())}function Zl(){Sf(vl+"_"+hl,_l)}function $l(){um("exit_app_cancel","button_search_focused"),um("exit_app_minimize","button_search_focused"),um("exit_app_close","button_search_focused"),dm(gl?1===gl?"exit_app_minimize":"exit_app_close":"exit_app_cancel","button_search_focused")}function ed(){ql=!0}function td(e){var t;if(kl&&!Hl||!ql)e.preventDefault();else switch(ql=!1,window.setTimeout(ed,Ll),e.keyCode){case Vn:Bm()?Rm():zm()?Hm():Om()?Mm():km()?wm():ym();break;case Hn:if(km())--gl<0&&(gl=2),$l(),gm(),bm();else if(Um(vl,hl-1,_l[0]))Zl(),hl--,Ql();else for(t=fu-1;-1<t;t--)if(Um(vl-1,t,_l[0])){Zl(),vl--,hl=t,Ql();break}break;case zn:km()?(2<++gl&&(gl=0),$l(),gm(),bm()):Um(vl,hl+1,_l[0])?(Zl(),hl++,Ql()):Um(vl+1,0,_l[0])&&(Zl(),vl++,hl=0,Ql());break;case Nn:if(!km())for(t=0;t<fu;t++)if(Um(vl-1,hl-t,_l[0])){Zl(),vl--,hl-=t,Ql();break}break;case Dn:if(!km())for(t=0;t<fu;t++)if(Um(vl+1,hl-t,_l[0])){Zl(),vl++,hl-=t,Ql();break}break;case An:case Bn:Hl||Dl();break;case Ln:Hl||(Fd=dd,Bd=Ti()?xd:ud,Nl(),Pm());break;case Rn:Hl||(Fd=dd,Bd=Td,Nl(),Pm());break;case Mn:case Fn:case On:case Jn:if(km()){var n=gl;wm();try{1===n?tizen.application.getCurrentApplication().hide():2===n&&tizen.application.getCurrentApplication().exit()}catch(e){}}else S_=document.getElementById(_l[8]+vl+"_"+hl).getAttribute(qu),T_=document.getElementById(_l[3]+vl+"_"+hl).textContent,document.body.removeEventListener("keydown",td),Vm();break;case Un:Lm();break;case Gn:break;case Pn:Fm();break;case Xn:Md=dd,Bd=hd,Nl(),Pm()}}var nd,ad,id,od,sd,rd=!0,cd=-1,ld=new Image,dd=1,ud=2,md=3,fd=4,pd=5,_d=6,vd=7,hd=8,gd=9,bd=10,yd=11,wd=12,kd=13,xd=14,Ed=15,Id=16,Cd=17,Sd=18,Td=19,qd=20,Ld=21,Rd=22,Bd=1,Fd=1,Md=1,Od=1,Ad=1,Hd=!1,zd=!1,Nd="",Dd="",Jd="",Ud=null,Gd=null,Pd="",Xd="",Vd=null,jd=null,Kd="",Yd=!0,Wd=!0,Qd=!1,Zd="",$d="",eu=!1,tu=275,nu=523,au=362,iu=454,ou=557,su=92,ru=60,cu=100,lu=83,du=1.35,uu=1.5,mu=45,fu=3,pu=Math.floor(mu/fu/uu),_u=45,vu=5,hu=Math.floor(_u/vu/du),gu=48,bu=6,yu=Math.floor(gu/bu/uu),wu=6,ku="ypvnuqrh98wqz1sr0ov3fgfu4jh1yx",xu="Client-ID",Eu="Accept",Iu="application/vnd.twitchtv.v5+json",Cu="528x297",Su="340x475",Tu="stream_thumbnail_focused",qu="data_attribute",Lu=400,Ru="4.0.0",Bu="",Fu="051918",Mu="",Ou="https://bhb27.github.io/smarttv-twitch/release/githubio/images/",Au=Ou+"404_game.png",Hu=Ou+"404_logo.png",zu=Ou+"404_video.png",Nu=Ou+"blur_game.png",Du=Ou+"blur_video_1.png",Ju=Ou+"blur_video_2.png",Uu=Ou+"blur_video_1_16.png",Gu=Ou+"blur_video_2_16.png",Pu=Ou+"blur_vod.png",Xu=Ou+"user_minus.png",Vu=Ou+"user_plus.png",ju=Ou+"user_up.png",Ku=Ou+"user_code.png",Yu=Ou+"ch_logo.png",Wu=Ou+"temp.mp4",Qu=Ou+"smart_live.png",Zu=Ou+"smart_games.png",$u=Ou+"smart_users.png",em=Ou+"smart_add_user.png",tm=function(e,t,n){e.onerror=function(){this.src=n},e.src=t},nm=function(e,t){e.onerror=function(){this.src=t},e.src=e.getAttribute("data-src"),e.removeAttribute("data-src")},am=function(e){e.setAttribute("data-src",e.getAttribute("src")),e.removeAttribute("src")};function im(e){var t=e.language.split(".")[0];-1!==t.indexOf("pt_")?(qn(),eu=!0):console.log("language is "+t),Tn(),Bf(),Mf(function(){rd?document.body.innerHTML=n:yn=yn+mn+xf(),Mf(om)})}function om(){sm("label_refresh","icon-refresh",e+Yt),sm("label_search","icon-search",gn),sm("label_switch","icon-switch",r),sm("label_controls","icon-question-circle",hn),sm("label_about","icon-info-circle",bn),_m("top_bar_live",m),_m("top_bar_user",u),_m("top_bar_featured",sn),_m("top_bar_game",f),_m("top_bar_vod",$t),_m("top_bar_clip",O),_m("chanel_button",E),_m("game_button",f),_m("live_button",m),_m("exit_app_cancel",j),_m("exit_app_close",X),_m("remove_cancel",j),_m("remove_yes",Pt),_m("exit_app_minimize",V),_m("main_dialog_exit_text",G),pm("dialog_about_text",wn+kn),pm("dialog_controls_text",yn),nd=document.getElementById("scrollbar"),ad=document.getElementById("search_input"),id=document.getElementById("user_input"),od=document.getElementById("oauth_input"),hI="true"===(localStorage.getItem("user_Games_live")||"true"),bT="true"===(localStorage.getItem("Vod_highlight")||"false"),Yx="true"===(localStorage.getItem("Svod_highlight")||"false"),jc="true"===(localStorage.getItem("Gvod_highlight")||"false"),vT=parseInt(localStorage.getItem("vod_periodNumber"))||2,Qy=parseInt(localStorage.getItem("sclip_periodNumber"))||2,Uo=parseInt(localStorage.getItem("Clip_periodNumber"))||2,tc=parseInt(localStorage.getItem("Gclip_periodNumber"))||2,Gc=parseInt(localStorage.getItem("Gvod_periodNumber"))||2,Mf(function(){X_(),ki(),zl(),mf(zu),mf(Au),mf(Hu),mf(Nu),mf(Du),mf(Ju),mf(Uu),mf(Gu),mf(Pu),mf(Xu),mf(Vu),mf(ju),mf(Ku),window.setTimeout(Qm,5e3),document.addEventListener("visibilitychange",tf,!1)})}function sm(e,t,n){pm(e,'<div style="vertical-align: middle; display: inline-block;"><i class="'+t+'" style="color: #FFFFFF; font-size: 115%; "></i></div><div style="vertical-align: middle; display: inline-block">'+Cn+n+"</div>")}function rm(e){document.getElementById(e).classList.add("hide")}function cm(e){document.getElementById(e).classList.remove("hide")}function lm(e){return-1===document.getElementById(e).className.indexOf("hide")}function dm(e,t){document.getElementById(e).classList.add(t)}function um(e,t){document.getElementById(e).classList.remove(t)}function mm(e,t){document.getElementById(e).style.border=t}function fm(e,t){document.getElementById(e).style.backgroundColor=t}function pm(e,t){document.getElementById(e).innerHTML=t}function _m(e,t){document.getElementById(e).textContent=t}function vm(){wm(),cm("dialog_loading")}function hm(){rm("dialog_loading")}function gm(){window.clearTimeout(Gd)}function bm(){Gd=window.setTimeout(wm,6e3)}function ym(){bm(),cm("main_dialog_exit")}function wm(){gm(),rm("main_dialog_exit"),gl=0,$l()}function km(){return lm("main_dialog_exit")}function xm(){af("dialog_counter_text"),Im(0,0,0)}function Em(e,t,n,a){0<a?(_m("dialog_counter_text",t*n+(e+1)+"/"+a),Im(t,n,a)):xm()}function Im(e,t,n){if(3===t&&9<n||5===t&&10<n||6===t&&12<n){var a=Math.ceil(900/(Math.ceil(n/t)-1)*e+100);nd.style.top=a+"px",Yd&&(Yd=!1,nd.style.backgroundColor="#777777")}else nd.style.backgroundColor="#000000",nd.style.top="100px",Yd=!0}function Cm(e){(wu=12)/3<e&&(wu=3*e),99<wu&&(wu=99)}function Sm(e){Wd||e!==q||(Qd=!0),_m("dialog_warning_text",Wd?e:Nt),cm("dialog_warning")}function Tm(){rm("dialog_warning")}function qm(){return lm("dialog_warning")}function Lm(){wm(),Mm(),Hm(),cm("dialog_about")}function Rm(){rm("dialog_about")}function Bm(){return lm("dialog_about")}function Fm(){wm(),Rm(),Hm(),cm("dialog_controls")}function Mm(){rm("dialog_controls")}function Om(){return lm("dialog_controls")}function Am(){wm(),Rm(),Mm(),cm("dialog_update")}function Hm(){rm("dialog_update")}function zm(){return lm("dialog_update")}function Nm(e){return(e+"").replace(/\B(?=(\d{3})+(?!\d))/g,",")}function Dm(e,t,n){return(e+="").indexOf("x")||(e=e.slice(-3)),e+"p"+(t=58<t?60:t<32?30:Math.ceil(t))+(""!==n?" ["+n.toUpperCase()+"]":"")}function Jm(e){return-1!==e.indexOf("live")?"":K}function Um(e,t,n){return null!==document.getElementById(n+e+"_"+t,0)}function Gm(){Jv(),Pm(),webapis.appcommon.setScreenSaver(webapis.appcommon.AppCommonScreenSaverState.SCREEN_SAVER_ON)}function Pm(){qf("blank_focus"),Wd&&Tm(),Bd!==yd&&Bd!==fd&&(Hd=zd=!1),xm(),Bd===dd?zl():Bd===ud?fi():Bd===md?br():Bd===fd?$i():Bd===hd?Fw():Bd===gd?sk():Bd===bd?Jk():Bd===yd?yb():Bd===wd?iE():Bd===kd?lw():Bd===xd?TS():Bd===pd?YC():Bd===_d?rC():Bd===vd?kI():Bd===Ed?NE():Bd===Id?fy():Bd===Sd?wT():Bd===Td?Vo():Bd===qd?Wc():Bd===Ld?sc():Bd===Rd?Ms():zl()}function Xm(e){e===dd?Nl():e===ud?pi():e===md?yr():e===fd?eo():e===hd?Mw():e===gd?rk():e===bd?Uk():e===yd?wb():e===wd?oE():e===kd?dw():e===xd?qS():e===pd?WC():e===_d?cC():e===vd?xI():e===Ed?DE():e===Id?py():e===Sd?kT():e===Td?jo():e===qd?Qc():e===Ld?rc():e===Rd&&Os()}function Vm(){document.body.addEventListener("keydown",Ih,!1),cm("scene2"),Uv(),jv(),rm("scene1"),V_()}function jm(){sm("label_refresh","icon-refresh",e+Yt),sm("label_search","icon-search",gn),sm("label_switch","icon-switch",r),sm("label_controls","icon-question-circle",hn),um("top_bar_user","icon_center_focus"),_m("top_bar_live",m),_m("top_bar_user",u),_m("top_bar_featured",sn),_m("top_bar_game",f),_m("top_bar_vod",$t),_m("top_bar_clip",O)}function Km(){sm("label_controls","icon-arrow-circle-left",C),af("label_switch"),af("top_bar_live"),af("top_bar_game"),af("top_bar_vod"),af("top_bar_clip"),af("top_bar_featured"),dm("top_bar_user","icon_center_focus")}function Ym(e){return'<div style="font-size: 30%; position: fixed; line-height: 0; text-shadow: #000000 0 0 5.7px, #000000 0 0 5.7px, #000000 0 0 4px">'+e+"</div>"}function Wm(e){return e=new Date(e),eu?e.getDate()+" "+Wt[e.getMonth()]+", "+e.getFullYear():Wt[e.getMonth()]+" "+e.getDate()+", "+e.getFullYear()}function Qm(){try{Ud=webapis.network.addNetworkStateChangeListener(function(e){1===e||4===e?(Wd=!0,qm()&&(Sm(Dt),Qd&&Pm(),Qd=!1),Bv()&&Sm(Dt),window.setTimeout(Tm,1500)):(Wd=!1,window.setTimeout(function(){Wd||(Sm(""),Lv(Nt))},5e3))})}catch(e){}}function Zm(){try{webapis.network.removeNetworkStateChangeListener(Ud)}catch(e){}}function $m(){var e=null,t=null,n=null,a=null,i=0;try{e=tizen.application.getAppInfo().version,t=tizen.systeminfo.getCapability("http://tizen.org/feature/platform.version"),a=webapis.productinfo.getFirmware(),n=webapis.productinfo.getModel()}catch(e){}return null!==e&&null!==t&&null!==n&&null!==a&&(Mu="APP "+be+(Bu=e)+"."+Fu+mn+"Tizen "+be+t+Cn+Cn+"|"+Cn+Cn+"TV: "+n+Cn+Cn+"|"+Cn+Cn+"FW: "+a+mn,e=e.split("."),i=parseInt(e[0]+e[1]+e[2]),pm("dialog_about_text",wn+Mu+kn),pm("dialog_update_text",En+Ce+Bu+Se+Ru+mn+Sn),i<Lu)}function ef(){xa(0),Bd=dd,Pm()}function tf(){document.hidden?Zm():window.setTimeout(function(){Qm()},2e4)}function nf(){document.hidden?window.clearInterval(jd):window.setTimeout(function(){0<ci.length?((new Date).getTime()-59e4>ux&&vx(),jd=window.setInterval(vx,6e5)):(window.clearInterval(jd),document.removeEventListener("visibilitychange",nf))},1e4)}function af(e){for(e=document.getElementById(e);e.firstChild;)e.removeChild(e.firstChild)}function of(){this.val=0}function sf(e,t,n){for(var a=0;a<t.length;a++)if(e===t[a])return n.val++,!0;return!1}function rf(e,t,n){for(var a=0;a<e.length;a++)tm(document.getElementById(t[a]),e[a],n)}function cf(e,t,n,a){for(var i,o,s=0;s<t;s++)for(i=0;i<a;i++)null!==(o=document.getElementById(e+s+"_"+i))&&nm(o,n);df(0)}function lf(e,t,n,a,i){var o,s=df(t);if(t===i&&1===s&&(s=0),s){var r,c,l=0;for(o=0<s;l<a;l++)r=o?t+i:t-i,null!==(c=document.getElementById(e+r+"_"+l))&&nm(c,n),r=o?t-i-1:t+i+1,null!==(c=document.getElementById(e+r+"_"+l))&&am(c)}}function df(e){var t=0;return cd<e?t=1:e<cd&&(t=-1),cd=e,t}function uf(e){cd=e}function mf(e){ld.src=e}function ff(e){return(Zd=document.createElement("td")).setAttribute("id",e),Zd.className="stream_cell",Zd}function pf(e,t,n){return(Zd=document.createElement("td")).setAttribute("id",t[4]+e),Zd.setAttribute(qu,n[0]),Zd.setAttribute("data-id",n[1]),Zd.className="stream_cell",Zd.innerHTML=vf(e,t,n),Zd}function _f(e,t,n){var a=e.split(n[5])[1];(e=document.getElementById(e)).setAttribute(qu,t[0]),e.setAttribute("data-id",t[1]),e.innerHTML=vf(a,n,t),e.setAttribute("id",n[4]+a)}function vf(e,t,n){return'<div id="'+t[0]+e+'" class="stream_thumbnail_channel" ><img id="'+t[1]+e+'" class="stream_img" data-src="'+n[2]+'"></div><div id="'+t[2]+e+'" class="stream_text"><div id="'+t[3]+e+'" class="stream_channel">'+n[3]+"</div></div>"}function hf(e,t,n,a){return(Zd=document.createElement("td")).setAttribute("id",n[8]+t),Zd.setAttribute(qu,e),Zd.className="stream_cell",Zd.innerHTML=bf(t,n,a),Zd}function gf(e,t,n,a){var i=e.split(a[9])[1];(e=document.getElementById(e)).setAttribute(qu,t),e.innerHTML=bf(i,a,n),e.setAttribute("id",a[8]+i)}function bf(e,t,n){return'<div id="'+t[0]+e+'" class="stream_thumbnail_video" ><img id="'+t[1]+e+'" class="stream_img" data-src="'+n[0]+'"></div><div id="'+t[2]+e+'" class="stream_text"><div id="'+t[3]+e+'" class="stream_channel" style="width: 66%; display: inline-block;">'+n[1]+'</div><div id="'+t[7]+e+'"class="stream_info" style="width:33%; float: right; text-align: right; display: inline-block;">'+n[5]+'</div><div id="'+t[4]+e+'"class="stream_info">'+n[2]+'</div><div id="'+t[5]+e+'"class="stream_info">'+p+n[3]+'</div><div id="'+t[6]+e+'"class="stream_info">'+n[4]+"</div></div>"}function yf(e,t,n){return(Zd=document.createElement("td")).setAttribute("id",t[5]+e),Zd.setAttribute(qu,n[0]),Zd.className="stream_cell",Zd.innerHTML=kf(e,t,n),Zd}function wf(e,t,n){var a=e.split(n[6])[1];(e=document.getElementById(e)).setAttribute(qu,t[0]),e.innerHTML=kf(a,n,t),e.setAttribute("id",n[5]+a)}function kf(e,t,n){return'<div id="'+t[0]+e+'" class="stream_thumbnail_game" ><img id="'+t[1]+e+'" class="stream_img" data-src="'+n[1]+'"></div><div id="'+t[2]+e+'" class="stream_text"><div id="'+t[3]+e+'" class="stream_channel">'+n[0]+'</div><div id="'+t[4]+e+'"class="stream_info_games" style="width: 100%; display: inline-block;">'+n[2]+"</div></div>"}function xf(){var e=mn+"Html5 mp4 video support:"+mn+fn;if(document.createElement("video").canPlayType){var t=document.createElement("video"),n=t.canPlayType('video/mp4; codecs="avc1.42E01E"');e+=n?"probably"===n?" Full support for avc1.":" Some support for avc1.("+n+")":"No video support for avc1.",e+=mn+fn,e+=(n=t.canPlayType('video/mp4; codecs="mp4a.40.2"'))?"probably"===n?" Full support for mp4a.":" Some support for mp4a.("+n+")":" No video support for mp4a."}else e+="No video support at all, createElement video fail.";return e}function Ef(t,n,a,i,o,s){Mf(function(){var e=t+"_"+n;dm(a[0]+e,Tu),Mf(function(){Tf(a[0],t,n,i,iu,tu,!0)}),Em(n,t,o,s)})}function If(t,n,a,i,o,s){Mf(function(){var e=t+"_"+n;dm(a[0]+e,Tu),Mf(function(){Tf(a[0],t,n,i,au,tu,!1)}),Em(n,t,o,s)})}function Cf(t,n,a,i,o,s){Mf(function(){var e=t+"_"+n;dm(a[0]+e,Tu),Mf(function(){Tf(a[0],t,n,i,ou,nu,!1)}),Em(n,t,o,s)})}function Sf(e,t){um(t[0]+e,Tu)}function Tf(e,t,n,a,i,o,s){var r=e+t+"_"+n;null!==document.getElementById(r)?(a===Ed||a===Id?Um(t+1,0,e)||(2<t?r=e+(t-1)+"_"+n:t=0):1<t&&o!==nu&&!Um(t+1,0,e)?r=e+(t-1)+"_"+n:1!==t||o===nu||Um(t+1,0,e)||(r=e+(t-1)+"_"+n,t=0),t||a!==fd||(o-=lu),s?(s=!t||1===t)&&(r=e+"0_"+n,i-=su):s=!t,Bd===a&&window.scroll(0,Lf()+Rf(r)-i+(s?o:0))):t||n||qf("blank_focus")}function qf(e){window.scroll(0,Lf()+Rf(e)-au)}function Lf(){return document.body.scrollTop}function Rf(e){return document.getElementById(e).getBoundingClientRect().top}function Bf(){for(var e=document.styleSheets,t=0;t<e.length;t++)null!==e[t].href&&-1===e[t].href.indexOf("video-js")&&(e[t].cssRules.length||Ff(e[t].href))}function Ff(e){var t=document.createElement("link");t.rel="stylesheet",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)}function Mf(e){"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?window.setTimeout(e):document.addEventListener("DOMContentLoaded",e)}tizen.tvinputdevice.registerKey("ChannelUp"),tizen.tvinputdevice.registerKey("ChannelDown"),tizen.tvinputdevice.registerKey("MediaPlayPause"),tizen.tvinputdevice.registerKey("MediaPlay"),tizen.tvinputdevice.registerKey("MediaPause"),tizen.tvinputdevice.registerKey("ColorF0Red"),tizen.tvinputdevice.registerKey("ColorF1Green"),tizen.tvinputdevice.registerKey("ColorF2Yellow"),tizen.tvinputdevice.registerKey("ColorF3Blue"),tizen.tvinputdevice.registerKey("Guide"),tizen.tvinputdevice.registerKey("Info"),document.addEventListener("DOMContentLoaded",function(){tizen.systeminfo.getPropertyValue("LOCALE",im)});var Of=0,Af=null,Hf=0,zf=!1,Nf=0,Df=null,Jf=0,Uf=-12,Gf=12,Pf=!1,Xf=2,Vf=2,jf=null,Kf=0,Yf=3500,Wf=10,Qf=0,Zf=!0,$f="source",ep=$f,tp=(Xf=0,[]),np="",ap=0,ip=!1,op=0,sp=0,rp=1,cp=!1,lp=!1;function dp(){webapis.appcommon.setScreenSaver(webapis.appcommon.AppCommonScreenSaverState.SCREEN_SAVER_OFF),Sv(),jv(),Q_(document.getElementById("stream_info_icon"),Jd),_m("stream_info_name",Dd),_m("stream_info_title",nw),pm("stream_info_game",ew+", "+tw+", "+sw),_m("stream_live_icon",ow),_m("stream_live_time",$y),af("dialog_buffer_play_percentage"),lp="null"!==Qx,Mp(),_m("stream_watching_time",v+gv(G_=0)),Qf=ap=sp=0,Vf=Xf=2,vh(3),L_=!1,q_=0,rh(),""!==Kd?(la=!0,Ba(),Cv()):Iv(),document.addEventListener("visibilitychange",bp,!1),zf=!1,Uf=-12,Gf=12,Pf=!(Jf=Nf=0),up()}function up(){Kf=0,Yf=3500,mp()}function mp(){try{var e=new XMLHttpRequest;e.open("GET","https://clips.twitch.tv/api/v2/clips/"+iw+"/status",!0),e.timeout=Yf,e.setRequestHeader(xu,ku),e.ontimeout=function(){},e.onreadystatechange=function(){4===e.readyState&&(200===e.status?_p(e.responseText):fp())},e.send(null)}catch(e){fp()}}function fp(){++Kf<Wf?(Yf+=1e3,mp()):(Tv(),kh(3))}var pp={onbufferingstart:function(){Sv(),cp=!1},onbufferingcomplete:function(){Tv(),cp=!0,af("dialog_buffer_play_percentage"),ap=0},onbufferingprogress:function(e){e<98?(_m("dialog_buffer_play_percentage",(P_=e)+3),qv()||Sv()):(P_=0,Tv(),U_=!0,af("dialog_buffer_play_percentage"),x_=!1,ap=0)},oncurrentplaytime:function(e){Qf!==e&&xp(e)},onstreamcompleted:function(){kh(3)}};function _p(e){tp=[],e=JSON.parse(e).quality_options;for(var t=0;t<e.length;t++)tp.length?tp.push({id:e[t].quality+"p"+vp(e[t].frame_rate),url:e[t].source}):tp.push({id:e[t].quality+"p"+vp(e[t].frame_rate)+" (source)",url:e[t].source});P_=0,sp=rp,hp()}function vp(e){return 40<e?60:""}function hp(){np=tp[Xf=0].url,-1!==$f.indexOf("source")&&($f="source");for(var e=0;e<Sp();e++){if(tp[e].id===$f){np=tp[Xf=e].url;break}-1!==tp[e].id.indexOf($f)&&(np=tp[Xf=e].url)}ep=$f,Pf&&gp()}function gp(){Sv(),console.log("PlayClip_onPlayer:","\n\n"+np+"\n");try{Hp.stop(),Hp.open(np),0<ap&&ap!==Hp.getCurrentTime()&&(Hp.seekTo(ap-3500),zv()),Hp.setDisplayRect(0,0,screen.width,screen.height),Hp.setListener(pp)}catch(e){console.log(e)}Zf=!0,Hp.prepareAsync(function(){Hp.play()}),Mf(function(){Rv(),Ep(),window.clearInterval(Af),Hf=0,Af=window.setInterval(yp,1500)})}function bp(){document.hidden&&(wp(),window.clearInterval(Af))}function yp(){dv()&&Of===Qf?(op=0,ip&&(op=-3),91<P_&&(op=2),10+op<++Hf&&(Xf<Sp()-1?(ip&&Xf++,Tp(),ap||(ap=Hp.getCurrentTime()),hp(),ip=!0):(Hp.stop(),kh(3)))):Hf=0,Of=Qf}function wp(){Pf&&(kp(),Mv(),kv())}function kp(){xv(),document.body.removeEventListener("keydown",Ap),document.removeEventListener("visibilitychange",bp),Ep(),document.getElementById("scene2_open_vod").style.display="none",document.getElementById("scene2_quality").style.width="28%",document.getElementById("quality_name").style.width="80%",window.clearInterval(Af),Pf=!1}function xp(e){Qf=e,zf||L_||!Bv()||Rv(),cp&&qv()&&Tv(),Jv()&&_m("stream_watching_time",v+gv(e))}function Ep(){qp(),$f=ep,document.getElementById("scene_channel_panel").style.opacity="0"}function Ip(){_v(),q_=0,rh(),Cp(),Tp(),_m("stream_watching_time",v+gv(Qf)),document.getElementById("scene_channel_panel").style.opacity="1",Lp()}function Cp(){for(var e=Xf=0;e<Sp();e++){if(tp[e].id===$f){Xf=e;break}-1!==tp[e].id.indexOf($f)&&(Xf=e)}}function Sp(){return tp.length}function Tp(){Xf?Xf===Sp()-1?(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="0.2"):(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="1"):(document.getElementById("quality_arrow_up").style.opacity="0.2",document.getElementById("quality_arrow_down").style.opacity="1"),-1!==($f=tp[Xf].id).indexOf("source")?_m("quality_name",$f.replace("source",ge)):_m("quality_name",$f)}function qp(){window.clearTimeout(jf)}function Lp(){jf=window.setTimeout(Ep,5e3)}function Rp(){if(dv()&&Hp.pause(),0<Jf)try{Hp.jumpForward(1e3*Jf)}catch(e){Rv(),console.log(e)}else try{Hp.jumpBackward(-1e3*Jf)}catch(e){Rv(),console.log(e)}Nf=0,Uf=-12,zf=!(Gf=12),dv()||Hp.play()}function Bp(){Jf=0,Uf=-12,Gf=12,Lv(fe),window.setTimeout(function(){zf=!1},1500)}function Fp(){window.clearTimeout(Df),zf=!0;var e="",t="";if(Nf){if(Nf<0)e=(Jf=-1===Nf?-5:-2===Nf?-10:-3===Nf?-15:-4===Nf?-20:-5===Nf?-25:-6===Nf?-30:-7===Nf?-35:-8===Nf?-40:-9===Nf?-45:-10===Nf?-50:-11===Nf?-55:-60)+_e,(t=Hp.getCurrentTime()/1e3+Jf)<0&&(Uf=Nf,t=0),t=hv(t);else{if(e=(Jf=1===Nf?5:2===Nf?10:3===Nf?15:4===Nf?20:5===Nf?25:6===Nf?30:7===Nf?35:8===Nf?40:9===Nf?45:10===Nf?50:11===Nf?55:60)+_e,(t=Hp.getCurrentTime()/1e3+Jf)>Vy)return Jf=0,Gf=Nf,Lv(fe+pe),void(Df=window.setTimeout(function(){Nf=0,zf=!(Gf=16)},1500));t=hv(t)}Lv(ue+e+me+t),Df=window.setTimeout(Rp,1500)}else Bp()}function Mp(){document.getElementById("scene2_quality").style.width="19%",document.getElementById("quality_name").style.width="72%",_m("open_vod_text",lp?ln:dn),document.getElementById("scene2_open_vod").style.display="inline-block"}function Op(){lp?(kp(),document.body.addEventListener("keydown",Wg,!1),_g()):(L_=!0,Lv(cn+F),window.setTimeout(function(){L_=!1,Rv()},2e3))}function Ap(e){if(sp!==rp)switch(e.keyCode){case Vn:Ov()?(Mv(),Mf(wp)):Fv()}else switch(e.keyCode){case Hn:Jv()?(4<++q_&&(q_=-1),rh(),qp(),Lp()):uh()?(ph(),--A_<0&&(A_=3),mh(3)):qv()||(Uf<Nf&&Nf--,Fp());break;case zn:Jv()?(--q_<-1&&(q_=4),rh(),qp(),Lp()):uh()?(ph(),3<++A_&&(A_=0),mh(3)):qv()||(Nf<Gf&&Nf++,Fp());break;case Nn:uh()?ph():Jv()?(0<Xf&&!q_&&(Xf--,Tp()),qp(),Lp()):Ip();break;case Dn:uh()?ph():Jv()?(Xf<Sp()-1&&!q_&&(Xf++,Tp()),qp(),Lp()):Ip();break;case Jn:uh()?_h(3):Jv()?wh(3):Ip();break;case Vn:Bv()&&zf?(window.clearTimeout(Df),Nf=0,Bp()):Qv()?Wv():Jv()?Ep():Ov()?(Mv(),Mf(wp)):Fv();break;case Mn:case Fn:case On:uh()||sh(3);break;case An:case Bn:jv(),n_=!1,localStorage.setItem("ChatEnable","false");break;case Pn:uh()||Yv();break;case Xn:Op()}}var Hp,zp=1,Np=.55,Dp=3,Jp="",Up="source",Gp=Up,Pp=0,Xp=0,Vp=1,jp=2,Kp=Xp,Yp="",Wp=0,Qp=0,Zp=0,$p="",e_=[],t_=0,n_=!1,a_="",i_="",o_="",s_=0,r_="",c_=0,l_=10,d_=0,u_=15,m_=!1,f_=null,p_=0,__=0,v_=0,h_=[],g_=[],b_=!1,y_=0,w_=null,k_=0,x_=!1,E_=0,I_=!1,C_=!1,S_="",T_="",q_=0,L_=!1,R_="",B_=!1,F_=1e4,M_=3500,O_="",A_=0,H_=3,z_=null,N_="",D_=0,J_=!0,U_=!1,G_=0,P_=0;function X_(){Hp=window.tizen&&window.webapis.avplay||{},xv(),pm("scene2_search_text",Cn+t),pm("scene2_channel_text",Cn+zt),pm("scene2_game_text",Cn+Gt),_m("dialog_end_replay_text",tn),_m("dialog_end_vod_text",nn),_m("dialog_end_channel_text",zt),_m("dialog_end_game_text",Gt),zp=parseInt(localStorage.getItem("ChatPositionsValue"))||1,Np=parseFloat(localStorage.getItem("ChatBackgroundValue"))||.55,Dp=parseInt(localStorage.getItem("ChatSizeValue"))||3,n_="true"===localStorage.getItem("ChatEnable"),_m("play_dialog_exit_text",U),pm("dialog_buffer_play_text",D+'<div style="height: 45px; vertical-align: middle; display: inline-block; "><i class="fa icon-circle-o-notch fa-spin"></i><div id="dialog_buffer_play_percentage" style="display:flex; font-weight: bold; font-size: 38%; transform: translate(0,-220%);">0</div></div>'),pm("chat_container",'<iframe id="chat_frame" width="100%" height="100%" frameborder="0" scrolling="no" style="position: absolute; overflow: hidden;" src="about:blank"></iframe><div id="scene_channel_dialog_chat" style="position: absolute; text-align: center; width: 100%; margin-top: 50%;"><div id="scene_channel_dialog_chat_text" class="strokedbig" style="display: inline-block; font-size: 216%; color: white;"></div></div>'),pm("dialog_controls_play_text",xn),pm("stream_controls",'<div style="vertical-align: middle; display: inline-block"><i class="icon-question-circle" style="color: #FFFFFF; font-size: 105%; "></i></div><div style="vertical-align: middle; display: inline-block">'+Cn+hn+"</div>")}function V_(){webapis.appcommon.setScreenSaver(webapis.appcommon.AppCommonScreenSaverState.SCREEN_SAVER_OFF),Sv(),pm("stream_live_icon",'<div style="vertical-align: middle; display: inline-block"><i class="icon-circle" style="color: red; font-size: 105%; "></i></div><div style="vertical-align: middle; display: inline-block">'+Cn+m.toUpperCase()+"</div>"),af("stream_info_title"),B_=!1,document.getElementById("stream_info_icon").setAttribute("data-src",Yu),_m("stream_info_name",T_),af("dialog_buffer_play_percentage"),th(!1),nh(!1),_m("stream_watching_time",v+gv(G_=0)),_m("stream_live_time",h+gv(0)+g),L_=!1,d_=D_=0,F_=1e4,K_(),Yp=window.setInterval(W_,6e4),Kp=Xp,m_=!(Zp=Qp=Wp=b_=0),document.addEventListener("visibilitychange",j_,!1),C_=!1,Z_(),vh(1)}function j_(){document.hidden?(xv(),C_=!1,document.getElementById("chat_frame").src="about:blank",window.clearInterval(Yp),window.clearInterval(w_)):(m_=!0,cm("scene2"),rm("scene1"),zv(),Sv(),window.setTimeout(function(){fx||m_&&(x_=!0,I_=!(E_=80),lv(),d_=0,F_=1e4,window.setTimeout(K_,7500),Yp=window.setInterval(W_,6e4),w_=window.setInterval(uv,1500))},500))}function K_(){try{var t=new XMLHttpRequest;t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status){var e=JSON.parse(t.responseText);_m("stream_info_title",e.stream.channel.status),R_=e.stream.game,O_=", ["+e.stream.channel.language.toUpperCase()+"]",_m("stream_info_game",p+R_+_+Nm(e.stream.viewers)+" "+J+O_),Jd=e.stream.channel.logo,Q_(document.getElementById("stream_info_icon"),Jd),r_=e.stream.created_at,B_=!0,Xd=e.stream.channel._id,""!==Kd?(la=!0,Ba(),Cv()):Iv()}else Y_()},t.open("GET","https://api.twitch.tv/kraken/streams/"+S_+"?"+Math.round(1e7*Math.random()),!0),t.timeout=F_,t.setRequestHeader(xu,ku),t.send(null)}catch(e){Y_()}}function Y_(){++d_<u_&&(F_+=2e3,K_())}function W_(){var t=new XMLHttpRequest;t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState&&200===t.status)try{var e=JSON.parse(t.responseText);_m("stream_info_title",e.stream.channel.status),_m("stream_info_game",p+e.stream.game+_+Nm(e.stream.viewers)+" "+J+O_),B_||Q_(document.getElementById("stream_info_icon"),e.stream.channel.logo)}catch(e){}},t.open("GET","https://api.twitch.tv/kraken/streams/"+S_+"?"+Math.round(1e7*Math.random()),!0),t.timeout=1e4,t.setRequestHeader(xu,ku),t.send(null)}function Q_(e,t){e.onerror=function(){this.src=Hu,B_=!1},e.src=t}function Z_(){c_=0,M_=3500,$_()}function $_(){try{var e,t=new XMLHttpRequest;e=Kp===Xp?"https://api.twitch.tv/api/channels/"+S_+"/access_token":"http://usher.twitch.tv/api/channel/hls/"+S_+".m3u8?player=twitchweb&&type=any&sig="+Wp.sig+"&token="+escape(Wp.token)+"&allow_source=true&allow_audi_only=true&"+Math.round(1e7*Math.random()),t.open("GET",e,!0),t.timeout=M_,t.setRequestHeader(xu,ku),t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status)try{c_=0,m_&&av(t.responseText)}catch(e){}else-1!==t.responseText.indexOf("Bad auth token")?nv():ev()},t.send(null)}catch(e){ev()}}function ev(){m_&&(++c_<l_?(M_+=c_<5?250:3500,$_()):(Tv(),kh(1)))}function tv(){h_[v_]=S_,g_[v_]=e_,v_++}function nv(){for(var e=0;e<h_.length;e++)h_[e]===S_&&(e_=g_[e],b_=!0);b_?(Kp=jp,m_&&rv()):(Tv(),kh(1))}function av(e){Kp===Xp?(Wp=JSON.parse(e),Kp=Vp,Z_()):Kp===Vp&&(e_=iv(Qp=e),Kp=jp,fx=!1,m_&&rv(),tv())}function iv(e){for(var t,n=[],a="",i=1,o=sv(e),s=0;s<o.length;s++)a=o[s].split('NAME="')[1].split('"')[0],t=ov(o[s].split("BANDWIDTH=")[1].split(",")[0]),n.length?n[s-i].id!==a&&n[s-i].id!==a+" (source)"?n.push({id:a+t,url:o[s].split("\n")[2]}):i++:(-1===a.indexOf("ource")&&(a+=" (source)"),n.push({id:a+t,url:o[s].split("\n")[2]}));return n}function ov(e){return 0<(e=parseInt(e))?" ("+parseFloat(e/1e6).toFixed(2)+"Mbps)":""}function sv(e){for(var t,n=[],a=/#EXT-X-MEDIA:(.)*\n#EXT-X-STREAM-INF:(.)*\n(.)*/g;t=a.exec(e);)n.push(t[0]);return n}function rv(){$p=e_[t_=0].url,-1!==Up.indexOf("source")&&(Up="source");for(var e=0;e<eh();e++){if(e_[e].id===Up){$p=e_[t_=e].url;break}-1!==e_[e].id.indexOf(Up)&&($p=e_[t_=e].url)}P_=0,Gp=Up,m_&&lv()}var cv={onbufferingstart:function(){Sv(),U_=!1},onbufferingcomplete:function(){Tv(),U_=!0,af("dialog_buffer_play_percentage"),x_=!1},onbufferingprogress:function(e){e<98?(_m("dialog_buffer_play_percentage",(P_=e)+3),qv()||Sv()):(P_=0,Tv(),U_=!0,af("dialog_buffer_play_percentage"),x_=!1)},oncurrentplaytime:function(e){D_!==e&&pv(e)},onstreamcompleted:function(){kh(1)}};function lv(){Sv(),console.log("Play_onPlayer:","\n\n"+$p+"\n");try{Hp.stop(),Hp.open($p),Hp.setDisplayRect(0,0,screen.width,screen.height),Hp.setListener(cv)}catch(e){console.log(e)}J_=!0,Hp.prepareAsync(function(){Hp.play(),C_=!0}),Mf(function(){document.getElementById("chat_frame").src="https://www.nightdev.com/hosted/obschat/?theme=bttv_blackchat&channel="+S_+"&fade=false&bot_activity=true&prevent_clipping=false",__=p_,Rv(),Uv(),n_&&!Kv()&&Vv(),window.clearInterval(w_),k_=0,w_=window.setInterval(uv,1500)})}function dv(){var e=Hp.getState();return!uh()&&("IDLE"===e||"PLAYING"===e)}function uv(){dv()&&y_===D_?(E_=0,I_&&!x_&&(E_=-3),91<P_&&(E_=2),10+E_<++k_&&(t_<eh()-1?(I_&&t_++,$v(),rv(),I_=!0):(Hp.stop(),kh(1)))):k_=0,y_=D_}function mv(){return"PLAYING"===Hp.getState()}function fv(){Hp.stop()}function pv(e){D_=e,!L_&&Bv()&&Rv(),U_&&qv()&&Tv(),p_=e+__-14e3,Jv()&&_m("stream_watching_time",v+gv(p_))}function _v(e){var t=new Date;_m("stream_clock",(eu?t.getDate()+"/"+Wt[t.getMonth()]:Wt[t.getMonth()]+"/"+t.getDate())+" "+vv(t.getHours())+":"+vv(t.getMinutes()))}function vv(e){return e<10?"0"+e:e}function hv(e){var t,n,a;return e+=G_/1e3,t=vv(parseInt(e)%60),n=vv((e=Math.floor(e/60))%60),a=vv(e=Math.floor(e/60)),e?a+":"+n+":"+t:n+":"+t}function gv(e){var t,n,a;return e<0&&!G_&&(G_=-1*e),e+=G_,t=vv(parseInt(e/1e3)%60),n=vv((e=Math.floor(e/1e3/60))%60),a=vv(e=Math.floor(e/60)),e?a+":"+n+":"+t:n+":"+t}function bv(e){return gv((new Date).getTime()-new Date(e).getTime())}function yv(){m_&&(wv(),kv())}function wv(){xv(),Ev(),m_=!1}function kv(){cm("scene1"),rm("scene2"),Gm()}function xv(){fv(),zv(),Rv(),dh()}function Ev(){C_=!1,document.body.removeEventListener("keydown",Ih),document.removeEventListener("visibilitychange",j_),__=p_=0,document.getElementById("chat_frame").src="about:blank",window.clearInterval(Yp),window.clearInterval(w_),E_=0,I_=x_=!1}function Iv(){pm("fallow_text",Cn+Mt),ra=!1}function Cv(){cm("scene2_heart")}function Sv(){cm("dialog_buffer_play")}function Tv(){rm("dialog_buffer_play")}function qv(){return lm("dialog_buffer_play")}function Lv(e){_m("dialog_warning_play_text",e),cm("dialog_warning_play")}function Rv(){rm("dialog_warning_play")}function Bv(){return lm("dialog_warning_play")}function Fv(){Ov()?Mv():(cm("play_dialog_exit"),a_=window.setTimeout(Fv,3e3))}function Mv(){window.clearTimeout(a_),rm("play_dialog_exit")}function Ov(){return lm("play_dialog_exit")}function Av(){window.clearTimeout(i_)}function Hv(){window.clearTimeout(o_)}function zv(){Av(),Hv(),rm("play_dialog_simple_pause")}function Nv(){mv()?zv():Dv()?(rm("play_dialog_simple_pause"),o_=window.setTimeout(Nv,8e3)):(cm("play_dialog_simple_pause"),i_=window.setTimeout(Nv,1500))}function Dv(){return lm("play_dialog_simple_pause")}function Jv(){return"1"===document.getElementById("scene_channel_panel").style.opacity}function Uv(){Pv(),document.getElementById("scene_channel_panel").style.opacity="0",Up=Gp,Pp=0,1!==zp&&7!==zp&&8!==zp||ah()}function Gv(){q_=0,rh(),Zv(),$v(),_m("stream_live_time",h+bv(r_)+g),_m("stream_watching_time",v+gv(p_)),_v(),Mv(),document.getElementById("scene_channel_panel").style.opacity="1",Xv(),Pp=-5,1!==zp&&7!==zp&&8!==zp||ah()}function Pv(){window.clearTimeout(Jp)}function Xv(){Jp=window.setTimeout(Uv,5e3)}function Vv(){ah(),cm("chat_container")}function jv(){rm("chat_container")}function Kv(){return lm("chat_container")}function Yv(){Mv(),cm("dialog_controls_play")}function Wv(){rm("dialog_controls_play")}function Qv(){return lm("dialog_controls_play")}function Zv(){for(var e=t_=0;e<eh();e++){if(e_[e].id===Up){t_=e;break}-1!==e_[e].id.indexOf(Up)&&(t_=e)}}function $v(){t_?t_===eh()-1?(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="0.2"):(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="1"):(document.getElementById("quality_arrow_up").style.opacity="0.2",document.getElementById("quality_arrow_down").style.opacity="1"),-1!==(Up=e_[t_].id).indexOf("source")?_m("quality_name",Up.replace("source",ge)):_m("quality_name",Up)}function eh(){return e_.length}function th(e){var t=48,n=100,a=50;s_=0,2===Dp?(t=32,n=66,a=25,s_=16):1===Dp&&(t=17,n=33,a=12.5,s_=31),document.getElementById("chat_container").style.height=t+"%",document.getElementById("scene_channel_dialog_chat").style.marginTop=a+"%",ah(),e&&ih("Size "+n+"%"),localStorage.setItem("ChatSizeValue",Dp)}function nh(e){var t=Np-.05;t=t<.05?0:t.toFixed(2),document.getElementById("chat_container").style.backgroundColor="rgba(0, 0, 0, "+t+")",e&&ih("Brightness "+(100*t).toFixed(0)+"%"),localStorage.setItem("ChatBackgroundValue",Np)}function ah(){var e="75.3%",t=52+s_+Pp+"%";zp||(zp=8),zp<9?(1<zp&&(t="33%"),2<zp&&(t="0%"),3<zp&&(e="38.3%"),4<zp&&(e="0%"),5<zp&&(t="33%"),6<zp&&(t=52+s_+Pp+"%"),7<zp&&(e="38.3%")):zp=1,document.getElementById("chat_container").style.top=t,document.getElementById("chat_container").style.left=e,localStorage.setItem("ChatPositionsValue",zp)}function ih(e){window.clearTimeout(f_),_m("scene_channel_dialog_chat_text",e),cm("scene_channel_dialog_chat"),f_=window.setTimeout(oh,1e3)}function oh(){rm("scene_channel_dialog_chat")}function sh(e){mv()?(1===e?window.clearInterval(w_):2===e?window.clearInterval(Qh):3===e&&window.clearInterval(Af),Hp.pause(),webapis.appcommon.setScreenSaver(webapis.appcommon.AppCommonScreenSaverState.SCREEN_SAVER_ON),Nv()):(zv(),Hp.play(),webapis.appcommon.setScreenSaver(webapis.appcommon.AppCommonScreenSaverState.SCREEN_SAVER_OFF),Jv()&&Uv(),1===e?w_=window.setInterval(uv,1500):2===e?Qh=window.setInterval(Og,1500):3===e&&(Af=window.setInterval(yp,1500)))}function rh(){mm("scene2_quality","3.5px solid rgba(0, 0, 0, 0)"),fm("scene2_quality","rgba(0, 0, 0, 0)"),mm("scene2_heart","3.5px solid rgba(0, 0, 0, 0)"),fm("scene2_heart","rgba(0, 0, 0, 0)"),mm("scene2_channel","3.5px solid rgba(0, 0, 0, 0)"),fm("scene2_channel","rgba(0, 0, 0, 0)"),mm("scene2_game","3.5px solid rgba(0, 0, 0, 0)"),fm("scene2_game","rgba(0, 0, 0, 0)"),mm("scene2_search","3.5px solid rgba(0, 0, 0, 0)"),fm("scene2_search","rgba(0, 0, 0, 0)"),mm("scene2_open_vod","3.5px solid rgba(0, 0, 0, 0)"),fm("scene2_open_vod","rgba(0, 0, 0, 0)"),q_?1===q_?(mm("scene2_heart","3.5px solid #FFFFFF"),fm("scene2_heart","rgba(0, 0, 0, 0.7)")):2===q_?(mm("scene2_game","3.5px solid #FFFFFF"),fm("scene2_game","rgba(0, 0, 0, 0.7)")):3===q_?(mm("scene2_channel","3.5px solid #FFFFFF"),fm("scene2_channel","rgba(0, 0, 0, 0.7)")):4===q_?(mm("scene2_search","3.5px solid #FFFFFF"),fm("scene2_search","rgba(0, 0, 0, 0.7)")):-1===q_&&(mm("scene2_open_vod","3.5px solid #FFFFFF"),fm("scene2_open_vod","rgba(0, 0, 0, 0.7)")):(mm("scene2_quality","3.5px solid #FFFFFF"),fm("scene2_quality","rgba(0, 0, 0, 0.7)"))}function ch(e){Bh=Kp=jp,sp=rp,jv(),Uv(),Ep(),Dg(),Rv(),Tv(),Mv(),Wv(),mh(e)}function lh(e){cm("dialog_end_stream")}function dh(){rm("dialog_end_stream"),ph(),A_=0}function uh(){return lm("dialog_end_stream")}function mh(e){mm("dialog_end_replay","3.5px solid rgba(0, 0, 0, 0)"),fm("dialog_end_replay","rgba(0, 0, 0, 0)"),mm("dialog_end_vod","3.5px solid rgba(0, 0, 0, 0)"),fm("dialog_end_vod","rgba(0, 0, 0, 0)"),mm("dialog_end_channel","3.5px solid rgba(0, 0, 0, 0)"),fm("dialog_end_channel","rgba(0, 0, 0, 0)"),mm("dialog_end_game","3.5px solid rgba(0, 0, 0, 0)"),fm("dialog_end_game","rgba(0, 0, 0, 0)"),1===e&&A_<2&&(A_+=2),A_?1===A_?(mm("dialog_end_vod","3.5px solid #FFFFFF"),fm("dialog_end_vod","rgba(150,150,150, 0.7)")):2===A_?(mm("dialog_end_channel","3.5px solid #FFFFFF"),fm("dialog_end_channel","rgba(150,150,150, 0.7)")):3===A_&&(mm("dialog_end_game","3.5px solid #FFFFFF"),fm("dialog_end_game","rgba(150,150,150, 0.7)")):(mm("dialog_end_replay","3.5px solid #FFFFFF"),fm("dialog_end_replay","rgba(150,150,150, 0.7)"))}function fh(e){1===e?N_=T_+" "+m:2===e?N_=Dd+en:3===e&&(N_=Dd+Ht),pm("dialog_end_stream_text",N_+S+mn+an+H_+"..."),-1==--H_?(pm("dialog_end_stream_text",N_+S+mn+an+"0..."),Mv(),jv(),1===e?Mf(yv):2===e?Mf(Hg):3===e&&Mf(wp)):z_=window.setTimeout(function(){fh(e)},1e3)}function ph(){window.clearTimeout(z_),pm("dialog_end_stream_text",N_+S+mn+on)}function _h(e){A_?1===A_?Op():2===A_?hh(e):3===A_&&bh(e):2===e?(Gh=0,tg=!1,Bg(),zv()):3===e&&(ap=0,ip=!1,hp(),zv()),1!==A_&&dh()}function vh(e){document.getElementById("dialog_end_replay").style.display="inline-block",document.getElementById("dialog_end_vod").style.display="inline-block",1===e?(document.getElementById("dialog_end_replay").style.display="none",document.getElementById("dialog_end_vod").style.display="none"):2===e?document.getElementById("dialog_end_vod").style.display="none":3===e&&_m("dialog_end_vod_text",lp?nn:cn+F)}function hh(e){Hd||Bd===wd||Bd===kd||(Od=zd&&Bd!==fd?Ad:Bd,Hd=!0),Xm(Bd),Bd=yd,1===e?(Nd=S_,Dd=T_,mb=ra,jv(),Mf(yv)):2===e?Mf(Hg):3===e&&Mf(wp)}function gh(e){Bw||(Md=Bd),Xm(Bd),Bd=hd,1===e?(jv(),Mf(yv)):2===e?Mf(Hg):3===e&&Mf(wp)}function bh(e){zd||Bd===qd||Bd===Ld||(Ad=Hd&&Bd!==yd&&Bd!==wd&&Bd!==kd?Od:Bd,zd=!0),Xm(Bd),Bd=fd,Qi=!1,1===e?(Pd=R_,jv(),Mf(yv)):2===e?(Pd=Vx,Mf(Hg)):3===e&&Mf(wp)}function yh(){""!==sa?ra?Na():Aa():(Lv(Ot),L_=!0,window.setTimeout(function(){Rv(),L_=!1},2e3))}function wh(e){q_?-1===q_?Op():1===q_?(yh(),1===e?(Pv(),Xv()):2===e?(Ug(),Gg()):3===e&&(qp(),Lp())):2===q_?bh(e):3===q_?hh(e):4===q_&&gh(e):(1===e?(I_=!1,rv()):2===e?(Gh||(Gh=Hp.getCurrentTime()),tg=!1,Bg()):3===e&&(ap||(ap=Hp.getCurrentTime()),ip=!1,hp()),zv())}function kh(e){ch(e),H_=3,Mf(function(){fh(e),lh(e)})}function xh(){ra?(pm("fallow_heart",'<i class="icon-heart" style="color: #00b300; font-size: 210%; text-shadow: #FFFFFF 0 0 3px, #FFFFFF 0 0 3px, #FFFFFF 0 0 2px;"></i>'),pm("fallow_text",Cn+Tt)):(pm("fallow_heart",'<i class="icon-heart-o" style="color: #FFFFFF; font-size: 210%; text-shadow: #000000 0 0 3px, #000000 0 0 3px, #000000 0 0 2px;"></i>'),pm("fallow_text",Cn+qt))}function Eh(e){Qv()?Wv():uh()&&!Ov()?(ph(),Fv()):Jv()?Uv():e&&Bv()&&sg?(window.clearTimeout(ig),rg=0,Kg()):Ov()?(Mv(),jv(),Mf(e?Hg:yv)):(Bv()&&Rv(),Fv())}function Ih(e){if(Kp!==jp)switch(e.keyCode){case Vn:Ov()?(Mv(),jv(),Mf(yv)):Fv()}else switch(e.keyCode){case An:case Bn:Kv()||uh()?(jv(),n_=!1,localStorage.setItem("ChatEnable","false")):(Vv(),n_=!0,localStorage.setItem("ChatEnable","true"));break;case Ln:Kv()&&(zp++,ah());break;case Rn:Kv()&&(zp--,ah());break;case Hn:!Jv()&&Kv()?((Np-=.05)<.05&&(Np=.05),nh(!0)):Jv()?(4<++q_&&(q_=0),rh(),Pv(),Xv()):uh()?(ph(),--A_<0&&(A_=3),mh(1)):Gv();break;case zn:!Jv()&&Kv()?(1.05<(Np+=.05)&&(Np=1.05),nh(!0)):Jv()?(--q_<0&&(q_=4),rh(),Pv(),Xv()):uh()?(ph(),3<++A_&&(A_=0),mh(1)):Gv();break;case Nn:Jv()?(0<t_&&!q_&&(t_--,$v()),Pv(),Xv()):Kv()?Dp<3?(Dp++,th(!0)):ih("Size 100%"):uh()?ph():Gv();break;case Dn:Jv()?(t_<eh()-1&&!q_&&(t_++,$v()),Pv(),Xv()):Kv()?1<Dp?(Dp--,th(!0)):ih("Size 33%"):uh()?ph():Gv();break;case Jn:uh()?_h(1):Jv()?wh(1):Gv();break;case Vn:Eh(!1);break;case Mn:case Fn:case On:uh()||sh(1);break;case Pn:uh()||Yv()}}var Ch="",Sh="source",Th=Sh,qh=0,Lh=1,Rh=2,Bh=qh,Fh="",Mh=0,Oh=0,Ah=0,Hh="",zh=[],Nh=0,Dh=0,Jh=10,Uh=!1,Gh=0,Ph=0,Xh=15,Vh=1e4,jh=[],Kh=[],Yh=0,Wh=0,Qh=null,Zh=0,$h=!1,eg=0,tg=!1,ng=!1,ag=!1,ig=null,og=0,sg=!1,rg=0,cg=-16,lg=16,dg=3500,ug=!1,mg=0,fg=!0,pg=!1;function _g(){webapis.appcommon.setScreenSaver(webapis.appcommon.AppCommonScreenSaverState.SCREEN_SAVER_OFF),Sv(),jv(),aE?(vg(),bg()):(Pc?(vg(),hg()):Q_(document.getElementById("stream_info_icon"),Jd),_m("stream_info_name",Dd),_m("stream_info_title",Zx),pm("stream_info_game",$x+", ["+Xx.toUpperCase()+"]"),_m("stream_live_icon",eE),_m("stream_live_time",tE)),af("dialog_buffer_play_percentage"),""!==Kd?(la=!0,Ba(),Cv()):Iv(),_m("stream_watching_time",v+gv(G_=0)),sg=L_=ug=!1,Ah=Oh=Mh=rg=mg=0,cg=-16,lg=16,Bh=qh,document.addEventListener("visibilitychange",kg,!1),Uh=!(ag=ng=!1),xg(),vh(2)}function vg(){Ph=0,Xh=15,Vh=1e4}function hg(){try{var t=new XMLHttpRequest;t.open("GET","https://api.twitch.tv/kraken/users?login="+Nd,!0),t.timeout=Vh,t.setRequestHeader(xu,ku),t.setRequestHeader(Eu,Iu),t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status){var e=JSON.parse(t.responseText).users[0];return void 0!==e?(Jd=e.logo,Xd=e._id):(Jd=Hu,Xd=""),void Q_(document.getElementById("stream_info_icon"),Jd)}gg()}},t.send(null)}catch(e){gg()}}function gg(){++Ph<Xh?(Vh+=2e3,hg()):Q_(document.getElementById("stream_info_icon"),Hu)}function bg(){try{var e=new XMLHttpRequest;e.open("GET","https://api.twitch.tv/kraken/videos/"+Qx,!0),e.timeout=Vh,e.setRequestHeader(xu,ku),e.setRequestHeader(Eu,Iu),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void wg(e.responseText);yg()}},e.send(null)}catch(e){yg()}}function yg(){++Ph<Xh&&(Vh+=2e3,bg())}function wg(e){e=JSON.parse(e),Ux=parseInt(e.length),_m("stream_info_title",e.title),pm("stream_info_game",Qt+p+e.game+", "+Nm(e.views)+N+", ["+e.language.toUpperCase()+"]"),_m("stream_live_icon",H+Wm(e.created_at)),_m("stream_live_time",z+hv(Ux))}function kg(){document.hidden?(Hp.pause(),Gh=Hp.getCurrentTime(),xv(),window.clearInterval(Qh),zv()):(Uh=!0,cm("scene2"),rm("scene1"),zv(),Sv(),window.setTimeout(function(){Uh&&(ng=!1,Mg(),eg=80,tg=!($h=!0),Qh=window.setInterval(Og,1500))},500))}function xg(){Dh=0,dg=3500,Eg()}function Eg(){try{var e,t=new XMLHttpRequest;e=Bh===qh?"https://api.twitch.tv/api/vods/"+Qx+"/access_token"+(""!==sa?"?oauth_token="+sa:""):"http://usher.twitch.tv/vod/"+Qx+".m3u8?player=twitchweb&&type=any&nauthsig="+Mh.sig+"&nauth="+escape(Mh.token)+"&allow_source=true&allow_audi_only=true&"+Math.round(1e7*Math.random()),t.open("GET",e,!0),t.timeout=dg,t.setRequestHeader(xu,ku),t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status)try{Dh=0,Uh&&Tg(t.responseText)}catch(e){}else-1!==t.responseText.indexOf("Bad auth token")?Sg():Ig()},t.send(null)}catch(e){Ig()}}function Ig(){if(Uh){if(0!==JSON.parse(Mh.token).chansub.restricted_bitrates.length)return void qg();++Dh<Jh?(dg+=Dh<5?250:3500,Eg()):(Tv(),Play_PannelEnterStart(2))}}function Cg(){jh[Yh]=Qx,Kh[Yh]=zh,Yh++}function Sg(){for(var e=0;e<jh.length;e++)jh[e]===Nd&&(zh=Kh[e],ug=!0);ug?(Bh=Rh,Uh&&Bg()):(Tv(),Play_PannelEnterStart(2))}function Tg(e){Bh===qh?(Mh=JSON.parse(e),Bh=Lh,xg()):Bh===Lh&&(zh=iv(Oh=e),Bh=jp,Uh&&Bg(),Cg())}function qg(){""!==sa?Ua():(Tv(),Lv(T+Lt),window.setTimeout(function(){Uh&&Hg()},4e3))}function Lg(){Tv(),Lv(T+Rt),window.setTimeout(function(){Uh&&Hg()},4e3)}function Rg(){Tv(),Lv(T+Bt),window.setTimeout(function(){Uh&&Hg()},4e3)}function Bg(){Hh=zh[Nh=0].url,-1!==Sh.indexOf("source")&&(Sh="source");for(var e=0;e<Vg();e++){if(zh[e].id===Sh){Hh=zh[Nh=e].url;break}-1!==zh[e].id.indexOf(Sh)&&(Hh=zh[Nh=e].url)}P_=0,Th=Sh,Uh&&Mg()}var Fg={onbufferingstart:function(){Sv(),pg=!1},onbufferingcomplete:function(){Tv(),pg=!0,af("dialog_buffer_play_percentage"),$h=!1,Gh=aE=0},onbufferingprogress:function(e){e<98?(_m("dialog_buffer_play_percentage",(P_=e)+3),qv()||Sv()):(P_=0,Tv(),U_=!0,af("dialog_buffer_play_percentage"),x_=!1,Gh=aE=0)},oncurrentplaytime:function(e){mg!==e&&Ag(e)},onstreamcompleted:function(){Play_PannelEnterStart(2)}};function Mg(){Sv(),console.log("PlayVod_onPlayer:","\n\n"+Hh+"\n");try{Hp.stop(),Hp.open(Hh),Ux<aE&&(aE=0),aE?Hp.seekTo(1e3*aE):0<Gh&&Gh!==Hp.getCurrentTime()&&(Hp.seekTo(Gh-3500),zv()),Hp.setDisplayRect(0,0,screen.width,screen.height),Hp.setListener(Fg)}catch(e){console.log(e)}fg=!0,Hp.prepareAsync(function(){Hp.play(),ng=!0}),Mf(function(){Rv(),Dg(),window.clearInterval(Qh),Zh=0,Qh=window.setInterval(Og,1500)})}function Og(){dv()&&Wh===mg?(eg=0,tg&&!$h&&(eg=-3),91<P_&&(eg=2),10+eg<++Zh&&(Nh<Vg()-1?(tg&&Nh++,Xg(),Gh||(Gh=Hp.getCurrentTime()),Bg(),tg=!0):(Hp.stop(),kh(2)))):Zh=0,Wh=mg}function Ag(e){mg=e,sg||L_||!Bv()||Rv(),pg&&qv()&&Tv(),Jv()&&_m("stream_watching_time",v+gv(mg))}function Hg(){Uh&&(zg(),kv())}function zg(){xv(),Ng(),Pc=Uh=!1}function Ng(){ng=!1,document.body.removeEventListener("keydown",Wg),document.removeEventListener("visibilitychange",kg),aE=Gh=0,window.clearInterval(Fh),window.clearInterval(Qh),Ux=eg=0,tg=$h=!1}function Dg(){Ug(),document.getElementById("scene_channel_panel").style.opacity="0",Sh=Th}function Jg(){q_=0,rh(),Pg(),_v(),Mv(),_m("stream_watching_time",v+gv(mg)),Xg(),document.getElementById("scene_channel_panel").style.opacity="1",Gg()}function Ug(){window.clearTimeout(Ch)}function Gg(){Ch=window.setTimeout(Dg,5e3)}function Pg(){for(var e=Nh=0;e<Vg();e++){if(zh[e].id===Sh){Nh=e;break}-1!==zh[e].id.indexOf(Sh)&&(Nh=e)}}function Xg(){Nh?Nh===Vg()-1?(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="0.2"):(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="1"):(document.getElementById("quality_arrow_up").style.opacity="0.2",document.getElementById("quality_arrow_down").style.opacity="1"),-1!==(Sh=zh[Nh].id).indexOf("source")?_m("quality_name",Sh.replace("source",ge)):_m("quality_name",Sh)}function Vg(){return zh.length}function jg(){if(dv()&&Hp.pause(),0<og)try{Hp.jumpForward(1e3*og)}catch(e){Rv(),console.log(e)}else try{Hp.jumpBackward(-1e3*og)}catch(e){Rv(),console.log(e)}rg=0,cg=-16,sg=!(lg=16),dv()||Hp.play(),zv()}function Kg(){og=0,cg=-16,lg=16,Lv(fe),ig=window.setTimeout(function(){sg=!1},1500)}function Yg(){window.clearTimeout(ig),sg=!0;var e="",t="";if(rg){if(rg<0)e=(og=-1===rg?-5:-2===rg?-10:-3===rg?-15:-4===rg?-30:-5===rg?-60:-6===rg?-120:-7===rg?-300:-8===rg?-600:-9===rg?-900:-10===rg?-1800:-11===rg?-3600:-12===rg?-7200:-13===rg?-10800:-14===rg?-14400:-15===rg?-18e3:-36e3)+_e,og<-30&&(e=og/60+ve),og<-1800&&(e=og/60/60+he),(t=Hp.getCurrentTime()/1e3+og)<0&&(cg=rg,t=0),t=hv(t);else{if(e=(og=1===rg?5:2===rg?10:3===rg?15:4===rg?30:5===rg?60:6===rg?120:7===rg?300:8===rg?600:9===rg?900:10===rg?1800:11===rg?3600:12===rg?7200:13===rg?10800:14===rg?14400:15===rg?18e3:36e3)+_e,30<og&&(e=og/60+ve),1800<og&&(e=og/60/60+he),(t=Hp.getCurrentTime()/1e3+og)>Ux)return og=0,lg=rg,Lv(fe+pe),void(ig=window.setTimeout(function(){rg=0,sg=!(lg=16)},1500));t=hv(t)}Lv(ue+e+me+t),ig=window.setTimeout(jg,1500)}else Kg()}function Wg(e){if(Bh!==Rh)switch(e.keyCode){case Vn:Ov()?(Mv(),Mf(Hg)):Fv()}else switch(e.keyCode){case An:case Bn:jv(),n_=!1,localStorage.setItem("ChatEnable","false");break;case Hn:Jv()?(4<++q_&&(q_=0),rh(),Ug(),Gg()):uh()?(ph(),--A_<0&&(A_=3),1===A_&&(A_=0),mh(2)):qv()||(cg<rg&&rg--,Yg());break;case zn:Jv()?(--q_<0&&(q_=4),rh(),Ug(),Gg()):uh()?(ph(),3<++A_&&(A_=0),1===A_&&(A_=2),mh(2)):qv()||(rg<lg&&rg++,Yg());break;case Nn:Jv()?(0<Nh&&!q_&&(Nh--,Xg()),Ug(),Gg()):uh()?ph():Jg();break;case Dn:Jv()?(Nh<Vg()-1&&!q_&&(Nh++,Xg()),Ug(),Gg()):uh()?ph():Jg();break;case Jn:uh()?_h(2):Jv()?wh(2):Jg();break;case Vn:Eh(!0);break;case Mn:case Fn:case On:uh()||sh(2);break;case Pn:uh()||Yv()}}var Qg,Zg=0,$g=0,eb=!1,tb=0,nb="",ab="",ib=!1,ob=0,sb=10,rb=3500,cb=0,lb=!0,db=25,ub=!1,mb=!1,fb=["scc_thumbdiv","scc_img","scc_infodiv","scc_name","scc_createdon","scc_game","scc_viwers","scc_duration","scc_cell","sccempty_"],pb=!1,_b="",vb=null,hb="",gb="",bb="";function yb(){Bd=yd,_b!==Nd&&(pb=!1),Km(),_m("top_bar_user",Dd=Dd.replace(K,"")),_m("top_bar_game",zt),document.body.addEventListener("keydown",Ub,!1),la=!1,pb?(Gb("scdescription"),Hb()):kb()}function wb(){jm(),document.body.removeEventListener("keydown",Ub)}function kb(){Tm(),_b=Nd,ub=pb=!1,Gb("blank_focus"),vm(),af("stream_table_search_channel_a"),eb=!1,Qg=void(Zg=$g=tb=cb=0),xb(),Eb()}function xb(){nb=[],ab=[],ib=!0,ob=0,rb=3500}function Eb(){try{var e=new XMLHttpRequest;e.open("GET","https://api.twitch.tv/kraken/streams/"+encodeURIComponent(void 0!==Qg?Qg:Nd)+"?"+Math.round(1e7*Math.random()),!0),e.timeout=rb,e.setRequestHeader(xu,ku),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void(null!==JSON.parse(e.responseText).stream?(vb=e.responseText,xb(),qb()):(xb(),Cb()));Ib()}},e.send(null)}catch(e){Ib()}}function Ib(){++ob<sb?(rb+=ob<5?250:3500,Eb()):(vb=null,xb(),qb())}function Cb(){try{var e=new XMLHttpRequest;e.open("GET","http://tmi.twitch.tv/hosts?include_logins=1&host="+encodeURIComponent(Xd)+"&"+Math.round(1e7*Math.random()),!0),e.timeout=rb,e.setRequestHeader(xu,ku),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void Tb(e.responseText);Sb()}},e.send(null)}catch(e){Sb()}}function Sb(){++ob<sb?(rb+=3500,Cb()):(vb=null,xb(),qb())}function Tb(e){var t=JSON.parse(e);void 0!==(Qg=t.hosts[0].target_login)?(xb(),Eb()):(vb=null,xb(),qb())}function qb(){try{var t=new XMLHttpRequest;t.open("GET","https://api.twitch.tv/kraken/channels/"+Xd,!0),t.timeout=Vh,t.setRequestHeader(xu,ku),t.setRequestHeader(Eu,Iu),t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status){var e=JSON.parse(t.responseText);return hb=e.views,gb=e.followers,bb=e.description,void Rb()}Lb()}},t.send(null)}catch(e){Lb()}}function Lb(){++ob<sb?(rb+=3500,qb()):(bb=gb=hb="",Rb())}function Rb(){var e=document.createElement("tr"),t=document.createElement("tbody"),n=0;if((Zd=document.createElement("tr")).className="follower_header",Zd.innerHTML='<div id="scdescription" class="follower_header">'+bb+"</div>",document.getElementById("stream_table_search_channel_a").appendChild(t),document.getElementById("stream_table_search_channel_a").appendChild(Zd),null!==vb){var a=JSON.parse(vb);if(null!==a.stream){var i=void 0!==Qg?Dd+ne:"",o=a.stream;e.appendChild(Bb("0_"+n,o.channel.name,o.preview.template,o.channel.status,o.game,Jm(JSON.stringify(o.stream_type))+i+o.channel.display_name,h+bv(o.created_at)+g+", "+_+Nm(o.viewers)+J,Dm(o.video_height,o.average_fps,o.channel.language))),n++}else ub=!0}else ub=!0;e.appendChild(Fb("0_"+n,Dd,Dd+F,Uu)),n++,e.appendChild(Fb("0_"+n,Dd,Dd+O,Gu)),n<2&&(n++,e.appendChild(ff(fb[9]+"0_"+n))),document.getElementById("stream_table_search_channel_a").appendChild(e),(e=document.createElement("tr")).appendChild(Mb("1_0",Dd,Dd,Jd)),document.getElementById("stream_table_search_channel_a").appendChild(e),Ab()}function Bb(e,t,n,a,i,o,s,r){return n=n.replace("{width}x{height}",Cu),nb.push(n),ab.push(fb[1]+e),(Zd=document.createElement("td")).setAttribute("id",fb[8]+e),Zd.setAttribute(qu,t),Zd.className="stream_cell",Zd.innerHTML='<div id="'+fb[0]+e+'" class="stream_thumbnail_video" ><img id="'+fb[1]+e+'" class="stream_img"></div><div id="'+fb[2]+e+'" class="stream_text"><div id="'+fb[3]+e+'" class="stream_channel" style="width: 66%; display: inline-block;"><i class="icon-circle" style="color: '+(void 0!==Qg?"#FED000":"red")+'; font-size: 90%; aria-hidden="true"></i> '+Cn+o+'</div><div id="'+fb[7]+e+'"class="stream_info" style="width:33%; float: right; text-align: right; display: inline-block;">'+r+'</div><div id="'+fb[4]+e+'"class="stream_info">'+a+'</div><div id="'+fb[5]+e+'"class="stream_info">'+p+i+'</div><div id="'+fb[6]+e+'"class="stream_info">'+s+"</div></div>",Zd}function Fb(e,t,n,a){return nb.push(a),ab.push(fb[1]+e),(Zd=document.createElement("td")).setAttribute("id",fb[8]+e),Zd.setAttribute(qu,t),Zd.className="stream_cell",Zd.innerHTML='<div id="'+fb[0]+e+'" class="stream_thumbnail_video" ><img id="'+fb[1]+e+'" class="stream_img"></div><div id="'+fb[2]+e+'" class="stream_text"><div id="'+fb[3]+e+'" class="stream_channel">'+n+'</div><div id="'+fb[4]+e+'"class="stream_info hide"></div><div id="'+fb[5]+e+'"class="stream_info hide"></div><div id="'+fb[6]+e+'"class="stream_info hide" ></div><div id="'+fb[7]+e+'"class="stream_info hide"></div></div>',Zd}function Mb(e,t,n,a){return nb.push(a),ab.push(fb[1]+e),(Zd=document.createElement("td")).setAttribute("id",fb[8]+e),Zd.setAttribute(qu,t),Zd.className="stream_cell",Zd.innerHTML='<div id="'+fb[0]+e+'" class="stream_thumbnail_video" ><div id="schannel_cont_heart" style="position: absolute; top: 5%; left: 6%;"></div><img id="'+fb[1]+e+'" class="stream_img_fallow"></div><div id="'+fb[2]+e+'" class="stream_text"><div id="'+fb[3]+e+'" class="stream_channel">'+n+'</div><div id="'+fb[4]+e+'"class="stream_channel hide"></div><div id="'+fb[5]+e+'"class="stream_info">'+Nm(hb)+N+'</div><div id="'+fb[6]+e+'"class="stream_info" >'+Nm(gb)+Jt+'</div><div id="'+fb[7]+e+'"class="stream_info hide"></div></div>',Zd}function Ob(){ra?(pm("schannel_cont_heart",'<i class="icon-heart" style="color: #00b300; font-size: 1200%; text-shadow: #FFFFFF 0 0 10px, #FFFFFF 0 0 10px, #FFFFFF 0 0 8px;"></i>'),_m(fb[3]+"1_0",Dd+Tt)):(pm("schannel_cont_heart",'<i class="icon-heart-o" style="color: #FFFFFF; font-size: 1200%; text-shadow: #000000 0 0 10px, #000000 0 0 10px, #000000 0 0 8px;"></i>'),_m(fb[3]+"1_0",""!==Kd?Dd+qt:Dd+Ut))}function Ab(){Mf(function(){pb||(hm(),pb=!0,zb(),Gb("scdescription")),Hb(),rf(nb,ab,zu),ib=!1})}function Hb(){mb?Ob():""!==Kd?(la=!1,Ba()):(ra=!1,Ob())}function zb(){var e=Zg+"_"+(Zg?0:$g);dm(fb[0]+e,Tu)}function Nb(){Sf(Zg+"_"+(Zg?0:$g),fb)}function Db(){lb=!0}function Jb(){if(Zg)""!==sa?(la=!1,ra?Na():Aa()):(Sm(Ot),window.setTimeout(Tm,2e3));else{document.body.removeEventListener("keydown",Ub);var e=ub?1:0;$g===0-e?(S_=document.getElementById(fb[8]+Zg+"_"+$g).getAttribute(qu),-1!==(T_=document.getElementById(fb[3]+Zg+"_"+$g).textContent).indexOf(ne)&&(T_=T_.split(ne)[1]),Vm()):$g===1-e?iE():$g===2-e&&lw()}}function Ub(e){if(ib)e.preventDefault();else if(lb)switch(lb=!1,window.setTimeout(Db,db),e.keyCode){case Vn:Bm()?Rm():Om()?Mm():(Bd=Od,wb(),Pm());break;case Hn:Zg||(Nb(),--$g<0&&($g=ub?1:2),zb());break;case zn:Zg||(Nb(),(ub?1:2)<++$g&&($g=0),zb());break;case Nn:case Dn:Nb(),Zg=Zg?0:1,zb();break;case An:case Bn:kb();break;case Mn:case Fn:case On:case Jn:Jb();break;case Un:Lm();break;case Gn:wb(),ef();break;case Pn:Fm();break;case Xn:Bw||(Md=yd),Bd=hd,jm(),document.body.removeEventListener("keydown",Ub),Pm()}else e.preventDefault()}function Gb(e){window.scroll(0,Lf()+Rf(e)-cu)}var Pb=0,Xb=0,Vb=!1,jb=0,Kb=[],Yb=[],Wb=!1,Qb=0,Zb=10,$b=3500,ey=0,ty=0,ny=!0,ay=25,iy=!1,oy=0,sy=!1,ry=!1,cy="",ly=!1,dy=!1,uy=!1,my=["sc_thumbdiv","sc_img","sc_infodiv","sc_displayname","sc_cell","scempty_"];function fy(){Bd=Id,Bw=dy=!0,cy!==qw&&(ry=!1),Km(),pm("top_bar_user",t+Ym(E+" '"+qw+"'")),document.body.addEventListener("keydown",Ly,!1),uf(Pb),ry?(Tf(my[0],Pb,Xb,Id,iu,tu,!0),Em(Xb,Pb,bu,jb)):vy()}function py(){jm(),document.body.removeEventListener("keydown",Ly)}function _y(){Pm()}function vy(){cy=qw,Tm(),ry=!1,qf("blank_focus"),vm(),af("stream_table_search_channel"),iy=uy=!1,Kb=[],Pb=Xb=jb=oy=ty=ey=0,Vb=ly=!(Yb=[]),xm(),hy(),gy()}function hy(){Wb=!0,Qb=0,$b=3500}function gy(){try{var e=new XMLHttpRequest,t=jb+ty;t&&oy-1<t&&(t=oy-gu,iy=Vb=!0),e.open("GET","https://api.twitch.tv/kraken/search/channels?query="+encodeURIComponent(qw)+"&limit="+gu+"&offset="+t+"&"+Math.round(1e7*Math.random()),!0),e.timeout=$b,e.setRequestHeader(xu,ku),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void yy(e.responseText);by()}},e.send(null)}catch(e){by()}}function by(){++Qb<Zb?($b+=Qb<5?250:3500,gy()):(uy=Wb=!1,hm(),Sm(q))}function yy(e){var t=JSON.parse(e),n=t.channels.length;oy=parseInt(t._total),n<gu&&(Vb=!0);var a=jb;sy=!(jb+=n);var i=n/bu;0<n%bu&&i++;for(var o,s,r,c,l=0,d=0;d<i;d++){for(s=a/bu+d,r=document.createElement("tr"),o=0;o<bu&&l<n;o++,l++)ky((c=t.channels[l])._id)?o--:r.appendChild(wy(s,s+"_"+o,[c.name,c._id,c.logo,c.display_name]));for(;o<bu;o++)Vb&&!ly&&(ly=!0,jb=s*bu+o),r.appendChild(ff(my[5]+s+"_"+o)),Yb.push(my[5]+s+"_"+o);document.getElementById("stream_table_search_channel").appendChild(r)}xy()}function wy(e,t,n){return Kb.push(n[1]),e<4&&mf(n[2]),pf(t,my,n)}function ky(e){for(var t=0;t<Kb.length;t++)if(e===Kb[t])return ey++,!0;return!1}function xy(){Mf(function(){if(ry){if(0<ey&&!Vb)return uy=!0,hy(),void Ey();ey=0,uy=Wb=!(Yb=[])}else hm(),sy?Sm(s):(ry=!0,Sy(),cf(my[1],9,Hu,bu)),Wb=!1})}function Ey(){try{var e=new XMLHttpRequest;Cm(ey);var t=jb+ty;t&&oy-1<t&&(t=oy-wu,iy=!0),e.open("GET","https://api.twitch.tv/kraken/search/channels?query="+encodeURIComponent(qw)+"&limit="+wu+"&offset="+t+"&"+Math.round(1e7*Math.random()),!0),e.timeout=$b,e.setRequestHeader(xu,ku),e.ontimeout=function(){},e.onreadystatechange=function(){4!==e.readyState||200!==e.status||Cy(e.responseText)},e.send(null)}catch(e){Iy()}}function Iy(){++Qb<Zb?($b+=Qb<5?250:3500,Ey()):(iy=!0,ey=0,Yb=[],xy())}function Cy(e){var t,n,a=JSON.parse(e),i=a.channels.length,o=0,s=Yb.slice();oy=parseInt(a._total),i<mu&&(iy=!0);for(var r=0;r<Yb.length&&o<i;r++,o++)ky((t=a.channels[o]).name)?(ey--,r--):(Kb.push(t.name),SChannels_replaceCellEmpty(Yb[r],[t.name,t._id,t.logo,t.display_name],my),ey--,-1<(n=s.indexOf(s[r]))&&s.splice(n,1));ty+=o,iy?(ey=0,Yb=[]):Yb=s,xy()}function Sy(){Ef(Pb,Xb,my,Id,bu,jb),3<Pb&&lf(my[1],Pb,Hu,bu,4),jb/bu<Pb+yu&&!Vb&&!uy&&(uy=!0,hy(),gy())}function Ty(){Sf(Pb+"_"+Xb,my)}function qy(){ny=!0}function Ly(e){var t;if(!Wb||uy)if(ny)switch(ny=!1,window.setTimeout(qy,ay),e.keyCode){case Vn:Bm()?Rm():Om()?Mm():(Bd=Bd===Md?dd:Md,py(),Bw=!1,_y());break;case Hn:if(Um(Pb,Xb-1,my[0]))Ty(),Xb--,Sy();else for(t=bu-1;-1<t;t--)if(Um(Pb-1,t,my[0])){Ty(),Pb--,Xb=t,Sy();break}break;case zn:Um(Pb,Xb+1,my[0])?(Ty(),Xb++,Sy()):Um(Pb+1,0,my[0])&&(Ty(),Pb++,Xb=0,Sy());break;case Nn:for(t=0;t<bu;t++)if(Um(Pb-1,Xb-t,my[0])){Ty(),Pb--,Xb-=t,Sy();break}break;case Dn:for(t=0;t<bu;t++)if(Um(Pb+1,Xb-t,my[0])){Ty(),Pb++,Xb-=t,Sy();break}break;case An:case Bn:uy||vy();break;case Mn:case Fn:case On:case Jn:uy||(Nd=document.getElementById(my[4]+Pb+"_"+Xb).getAttribute(qu),Xd=document.getElementById(my[4]+Pb+"_"+Xb).getAttribute("data-id"),Dd=document.getElementById(my[3]+Pb+"_"+Xb).textContent,Jd=document.getElementById(my[1]+Pb+"_"+Xb).src,document.body.removeEventListener("keydown",Ly),Od=Id,Bd=yd,mb=ra=!(Hd=!0),Pm());break;case Un:Lm();break;case Gn:py(),Bw=!1,ef();break;case Pn:Fm();break;case Xn:Bd=hd,py(),_y()}else e.preventDefault();else e.preventDefault()}var Ry=0,By=0,Fy=!1,My=0,Oy=[],Ay=[],Hy=!1,zy=0,Ny=10,Dy=3500,Jy=0,Uy=!0,Gy=25,Py=!1,Xy=0,Vy=0,jy=!1,Ky=["sp_thumbdiv","sp_img","sp_infodiv","sp_title","sp_createdon","sp_game","sp_viwers","sp_duration","sp_cell","spempty_","sp_lang"],Yy=!1,Wy=null,Qy=2,Zy="week",$y=0,ew="",tw="",nw="",aw="",iw="",ow="",sw="",rw=!1,cw=!1;function lw(){Bd=kd,Nd!==aw&&(Yy=!1),Km(),fw(),_m("top_bar_user",Dd),sm("label_switch","icon-calendar",l+Zt),document.body.addEventListener("keydown",Iw,!1),uf(Ry),Yy?(Tf(Ky[0],Ry,By,kd,au,tu,!1),Em(By,Ry,fu,My)):uw()}function dw(){jm(),document.body.removeEventListener("keydown",Iw)}function uw(){Tm(),qf("blank_focus"),vm(),aw=Nd,Wy=null,Yy=!1,af("stream_table_search_clip"),Py=cw=!1,Oy=[],Ry=By=My=Xy=Jy=0,Fy=rw=!(Ay=[]),xm(),mw(),pw()}function mw(){Hy=!0,zy=0,Dy=3500}function fw(){1===Qy?(_m("top_bar_game",O+re),Zy="day"):2===Qy?(_m("top_bar_game",O+ce),Zy="week"):3===Qy?(_m("top_bar_game",O+le),Zy="month"):4===Qy&&(_m("top_bar_game",O+de),Zy="all"),localStorage.setItem("sclip_periodNumber",Qy)}function pw(){try{var e=new XMLHttpRequest;e.open("GET","https://api.twitch.tv/kraken/clips/top?channel="+encodeURIComponent(Nd)+"&limit="+mu+"&period="+encodeURIComponent(Zy)+(null===Wy?"":"&cursor="+encodeURIComponent(Wy))+"&"+Math.round(1e7*Math.random()),!0),e.timeout=Dy,e.setRequestHeader(xu,ku),e.setRequestHeader(Eu,Iu),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void vw(e.responseText);_w()}},e.send(null)}catch(e){_w()}}function _w(){++zy<Ny?(Dy+=zy<5?250:3500,pw()):(cw=Hy=!1,hm(),Sm(q))}function vw(e){var t=JSON.parse(e),n=t.clips.length;Wy=t._cursor,n<mu&&(Fy=!0);var a=My;jy=!(My+=n);var i=n/fu;0<n%fu&&i++;for(var o,s,r,c,l=0,d=0;d<i;d++){for(s=a/fu+d,r=document.createElement("tr"),o=0;o<fu&&l<n;o++,l++)hw((c=t.clips[l]).slug)?o--:(Oy.push(c.slug),r.appendChild(TT(s,s+"_"+o,c.slug+","+c.duration+","+c.game+","+(null!==c.vod?c.vod.id+","+c.vod.offset:"null,null"),[c.thumbnails.medium,c.title,rn+Wm(c.created_at),p+c.game,Nm(c.views)+N,"["+c.language.toUpperCase()+"]",z+hv(c.duration)],Ky)));for(;o<fu;o++)Fy&&!rw&&(rw=!0,My=s*fu+o),r.appendChild(ff(Ky[9]+s+"_"+o)),Ay.push(Ky[9]+s+"_"+o);document.getElementById("stream_table_search_clip").appendChild(r)}gw()}function hw(e){for(var t=0;t<Oy.length;t++)if(e===Oy[t])return Jy++,!0;return!1}function gw(){Mf(function(){if(Yy){if(0<Jy&&!Fy)return cw=!0,mw(),void bw();Jy=0,cw=Hy=!(Ay=[])}else hm(),jy?Sm(L+O):(Yy=!0,kw(),cf(Ky[1],9,zu,fu)),Hy=!1})}function bw(){try{var e=new XMLHttpRequest;e.open("GET","https://api.twitch.tv/kraken/clips/top?channel="+encodeURIComponent(Nd)+"&limit="+Jy+"&period="+Zy+(null===Wy?"":"&cursor="+encodeURIComponent(Wy))+"&"+Math.round(1e7*Math.random()),!0),e.timeout=Dy,e.setRequestHeader(xu,ku),e.setRequestHeader(Eu,Iu),e.ontimeout=function(){},e.onreadystatechange=function(){4!==e.readyState||200!==e.status||ww(e.responseText)},e.send(null)}catch(e){yw()}}function yw(){++zy<Ny?(Dy+=zy<5?250:3500,bw()):(Py=!0,Jy=0,Ay=[],gw())}function ww(e){var t,n,a=JSON.parse(e),i=a.clips.length,o=0,s=Ay.slice();Wy=a._cursor,i<Jy&&(Py=!0);for(var r=0;r<Ay.length&&o<i;r++,o++)hw((t=a.clips[o]).slug)?(Jy--,r--):(Oy.push(t.slug),LT(Ay[r],t.slug+","+t.duration+","+t.game+","+(null!==t.vod?t.vod.id+","+t.vod.offset:"null,null"),[t.thumbnails.medium,t.title,rn+Wm(t.created_at),p+t.game,Nm(t.views)+N,"["+t.language.toUpperCase()+"]",z+hv(t.duration)],Ky),Jy--,-1<(n=s.indexOf(s[r]))&&s.splice(n,1));Py?(Jy=0,Ay=[]):Ay=s,gw()}function kw(){If(Ry,By,Ky,kd,fu,My),3<Ry&&lf(Ky[1],Ry,zu,fu,4),My/fu<Ry+pu&&!Fy&&!cw&&(cw=!0,mw(),pw())}function xw(){Sf(Ry+"_"+By,Ky)}function Ew(){Uy=!0}function Iw(e){var t;if(!Hy||cw)if(Uy)switch(Uy=!1,window.setTimeout(Ew,Gy),e.keyCode){case Vn:Bm()?Rm():Om()?Mm():(Bd=yd,dw(),Pm());break;case Hn:if(Um(Ry,By-1,Ky[0]))xw(),By--,kw();else for(t=fu-1;-1<t;t--)if(Um(Ry-1,t,Ky[0])){xw(),Ry--,By=t,kw();break}break;case zn:Um(Ry,By+1,Ky[0])?(xw(),By++,kw()):Um(Ry+1,0,Ky[0])&&(xw(),Ry++,By=0,kw());break;case Nn:for(t=0;t<fu;t++)if(Um(Ry-1,By-t,Ky[0])){xw(),Ry--,By-=t,kw();break}break;case Dn:for(t=0;t<fu;t++)if(Um(Ry+1,By-t,Ky[0])){xw(),Ry++,By-=t,kw();break}break;case An:case Bn:uw();break;case Ln:cw||(4<++Qy&&(Qy=1),fw(),uw());break;case Rn:cw||(--Qy<1&&(Qy=4),fw(),uw());break;case Mn:case Fn:case On:case Jn:iw=document.getElementById(Ky[8]+Ry+"_"+By).getAttribute(qu).split(","),Vy=parseInt(iw[1]),Pd=iw[2],Qx=iw[3],aE=parseInt(iw[4]),iw=iw[0],nw=document.getElementById(Ky[3]+Ry+"_"+By).textContent,ow=document.getElementById(Ky[4]+Ry+"_"+By).textContent,$y=document.getElementById(Ky[5]+Ry+"_"+By).textContent,tw=document.getElementById(Ky[6]+Ry+"_"+By).textContent,sw=document.getElementById(Ky[7]+Ry+"_"+By).textContent,ew=document.getElementById(Ky[10]+Ry+"_"+By).textContent,Cw();break;case Un:Lm();break;case Gn:dw(),ef();break;case Pn:Fm();break;case Xn:Bw||(Md=kd),Bd=hd,dw(),Pm()}else e.preventDefault();else e.preventDefault()}function Cw(){document.body.addEventListener("keydown",Ap,!1),document.body.removeEventListener("keydown",Iw),cm("scene2"),jv(),zv(),Rv(),Mv(),rm("scene1"),dp()}var Sw=0,Tw=0,qw="",Lw=!1,Rw="",Bw=!1;function Fw(){Tm(),sm("label_refresh","icon-arrow-circle-left",C),document.getElementById("label_search").style.display="none",document.getElementById("label_switch").style.display="none",document.getElementById("top_bar_live").style.display="none",document.getElementById("top_bar_featured").style.display="none",document.getElementById("top_bar_game").style.display="none",document.getElementById("top_bar_vod").style.display="none",document.getElementById("top_bar_clip").style.display="none",_m("top_bar_user",t),ad.placeholder=y,dm("top_bar_user","icon_center_focus"),Tw=Sw=0,Rw=document.querySelector("#search_input"),Aw(),Nw(),zw("search_input")}function Mw(){Dw(),document.body.removeEventListener("keydown",Hw),Aw(),Bd=Md,document.getElementById("label_search").style.display="block",document.getElementById("label_switch").style.display="block",document.getElementById("top_bar_live").style.display="inline-block",document.getElementById("top_bar_featured").style.display="inline-block",document.getElementById("top_bar_game").style.display="inline-block",document.getElementById("top_bar_vod").style.display="inline-block",document.getElementById("top_bar_clip").style.display="inline-block",_m("top_bar_user",u),um("top_bar_user","icon_center_focus"),sm("label_refresh","icon-refresh",e+Yt),ad.value=""}function Ow(){Mw(),Tw?1===Tw?sk():2===Tw&&Jk():fy()}function Aw(){um("chanel_button","button_search_focused"),um("game_button","button_search_focused"),um("live_button","button_search_focused"),Sw&&(Tw?1===Tw?dm("game_button","button_search_focused"):2===Tw&&dm("live_button","button_search_focused"):dm("chanel_button","button_search_focused"))}function Hw(e){if(!Lw)switch(e.keyCode){case Vn:Bm()?Rm():Om()?Mm():(Mw(),Pm());break;case Hn:1===Sw&&(--Tw<0&&(Tw=2),Aw());break;case zn:1===Sw&&(2<++Tw&&(Tw=0),Aw());break;case Nn:1===Sw&&(Sw=0,Aw(),Nw());break;case Dn:Sw?1===Sw&&(Sw=0,Aw(),Nw()):(Dw(),Sw=1,Aw());break;case An:case Bn:break;case Ln:case Rn:Mw(),Pm();break;case Mn:case Fn:case On:case Jn:Sw?""!==ad.value&&null!==ad.value?(qw=ad.value,ad.value="",Ow()):(Sm(o),window.setTimeout(function(){Tm()},1e3)):Nw();break;case Un:Lm();break;case Gn:Mw(),ef();break;case Pn:Fm()}}function zw(e){window.scroll(0,Lf()+Rf(e)-au+cu)}function Nw(){document.body.removeEventListener("keydown",Hw),document.body.addEventListener("keydown",Jw,!1),Rw.addEventListener("input"),Rw.addEventListener("compositionend"),ad.placeholder=y,Rw.focus(),Lw=!0}function Dw(){Rw.blur(),document.body.removeEventListener("keydown",Jw),document.body.addEventListener("keydown",Hw,!1),ad.placeholder=x+y,window.setTimeout(function(){Lw=!1},500)}function Jw(e){switch(e.keyCode){case Qn:ad.value="",e.preventDefault();break;case Yn:case Kn:Dw(),Sw=1,Aw();break;case jn:ad.value=ad.value.slice(0,-1),e.preventDefault();break;case Wn:ad.value+=" ",e.preventDefault()}}var Uw=!1,Gw=0,Pw=0,Xw=0,Vw=!1,jw=0,Kw=10,Yw=3500,Ww=0,Qw=!0,Zw=25,$w=0,ek=!1,tk=!1,nk="",ak=!1,ik="",ok=["sgthumbdiv","sgimg","sginfodiv","sgdisplayname","sgviwers","sgcell","sgempty_"];function sk(){Bd=gd,Bw=!0,Km(),nk!==qw&&(Uw=!1),pm("top_bar_user",t+Ym(f+" '"+qw+"'")),document.body.addEventListener("keydown",gk,!1),uf(Gw),Uw?(Tf(ok[0],Gw,Pw,gd,ou,nu,!1),Em(Pw,Gw,vu,Xw)):ck()}function rk(){Bw||jm(),document.body.removeEventListener("keydown",gk),ak=!1,Pd=ik}function ck(){nk=qw,Tm(),Uw=!1,qf("blank_focus"),vm(),af("stream_table_search_game"),tk=!1,Gw=Pw=Xw=$w=Ww=0,xm(),lk(),dk()}function lk(){Vw=!0,jw=0,Yw=3500}function dk(){try{var e=new XMLHttpRequest;e.open("GET","https://api.twitch.tv/kraken/search/games?query="+encodeURIComponent(qw)+"&"+Math.round(1e7*Math.random()),!0),e.timeout=Yw,e.setRequestHeader(xu,ku),e.setRequestHeader(Eu,Iu),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void mk(e.responseText);uk()}},e.send(null)}catch(e){uk()}}function uk(){++jw<Kw?(Yw+=jw<5?250:3500,dk()):(Vw=!1,hm(),Sm(q))}function mk(e){var t=JSON.parse(e),n=0;null!==t.games&&(n=t.games.length);var a=Xw;ek=!(Xw+=n);var i=n/vu;0<n%vu&&i++;for(var o,s,r,c,l=0,d=0;d<i;d++){for(s=a/vu+d,r=document.createElement("tr"),o=0;o<vu&&l<n;o++,l++)c=t.games[l],r.appendChild(fk(s,s+"_"+o,[c.name,c.box.template.replace("{width}x{height}",Su),""]));for(;o<vu;o++)tk||(tk=!0,Xw=s*vu+o),r.appendChild(ff(ok[6]+s+"_"+o));document.getElementById("stream_table_search_game").appendChild(r)}pk()}function fk(e,t,n){return e<2&&mf(n[1]),yf(t,ok,n)}function pk(){Mf(function(){Uw||(hm(),ek?Sm(s):(Uw=!0,_k())),cf(ok[1],7,Au,vu),Vw=!1})}function _k(){Cf(Gw,Pw,ok,gd,vu,tr),2<Gw&&lf(ok[1],Gw,Au,vu,3)}function vk(){Sf(Gw+"_"+Pw,ok)}function hk(){Qw=!0}function gk(e){var t;if(Vw)e.preventDefault();else if(Qw)switch(Qw=!1,window.setTimeout(hk,Zw),e.keyCode){case Vn:Bm()?Rm():Om()?Mm():(Bd=Bd===Md?dd:Md,Bw=!1,rk(),Pm());break;case Hn:if(Um(Gw,Pw-1,ok[0]))vk(),Pw--,_k();else for(t=vu-1;-1<t;t--)if(Um(Gw-1,t,ok[0])){vk(),Gw--,Pw=t,_k();break}break;case zn:Um(Gw,Pw+1,ok[0])?(vk(),Pw++,_k()):Um(Gw+1,0,ok[0])&&(vk(),Gw++,Pw=0,_k());break;case Nn:for(t=0;t<vu;t++)if(Um(Gw-1,Pw-t,ok[0])){vk(),Gw--,Pw-=t,_k();break}break;case Dn:for(t=0;t<vu;t++)if(Um(Gw+1,Pw-t,ok[0])){vk(),Gw++,Pw-=t,_k();break}break;case An:case Bn:ck();break;case Mn:case Fn:case On:case Jn:ik=Pd,rk(),Pd=document.getElementById(ok[5]+Gw+"_"+Pw).getAttribute(qu),document.body.removeEventListener("keydown",gk),Bd=fd,ak=!0,Pm();break;case Un:Lm();break;case Gn:Bw=!1,rk(),ef();break;case Pn:Fm();break;case Xn:Bd=hd,rk(),Pm()}else e.preventDefault()}var bk=0,yk=0,wk=!1,kk=0,xk=[],Ek=[],Ik=!1,Ck=0,Sk=10,Tk=3500,qk=0,Lk=0,Rk=!0,Bk=25,Fk=!1,Mk=0,Ok=!1,Ak=!1,Hk=!1,zk="",Nk=!1,Dk=["sl_thumbdiv","sl_img","sl_infodiv","sl_displayname","sl_streamtitle","sl_streamgame","sl_viwers","sl_quality","sl_cell","slempty_"];function Jk(){Bd=bd,Bw=!0,Km(),zk!==qw&&(Ak=!1),pm("top_bar_user",t+Ym(m+" '"+qw+"'")),document.body.addEventListener("keydown",ax,!1),uf(bk),Ak?(Tf(Dk[0],bk,yk,bd,au,tu,!1),Em(yk,bk,fu,kk)):Gk()}function Uk(){jm(),document.body.removeEventListener("keydown",ax)}function Gk(){zk=qw,Tm(),Ak=!1,qf("blank_focus"),vm(),af("stream_table_search_live"),Fk=Nk=!1,xk=[],bk=yk=kk=Mk=Lk=qk=0,wk=Hk=!(Ek=[]),xm(),Pk(),Xk()}function Pk(){Ik=!0,Ck=0,Tk=3500}function Xk(){try{var e=new XMLHttpRequest,t=kk+Lk;t&&Mk-1<t&&(t=Mk-mu,Fk=wk=!0),e.open("GET","https://api.twitch.tv/kraken/search/streams?query="+encodeURIComponent(qw)+"&limit="+mu+"&offset="+t+"&"+Math.round(1e7*Math.random()),!0),e.timeout=Tk,e.setRequestHeader(xu,ku),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void jk(e.responseText);Vk()}},e.send(null)}catch(e){Vk()}}function Vk(){++Ck<Sk?(Tk+=Ck<5?250:3500,Xk()):(Nk=Ik=!1,hm(),Sm(q))}function jk(e){var t=JSON.parse(e),n=t.streams.length;Mk=parseInt(t._total),n<mu&&(wk=!0);var a=kk;Ok=!(kk+=n);var i=n/fu;0<n%fu&&i++;for(var o,s,r,c,l=0,d=0;d<i;d++){for(s=a/fu+d,r=document.createElement("tr"),o=0;o<fu&&l<n;o++,l++)Yk((c=t.streams[l]).channel.name)?o--:r.appendChild(Kk(s,s+"_"+o,c.channel.name,[c.preview.template.replace("{width}x{height}",Cu),Jm(JSON.stringify(c.stream_type))+c.channel.display_name,c.channel.status,c.game,h+bv(c.created_at)+g+", "+_+Nm(c.viewers)+J,Dm(c.video_height,c.average_fps,c.channel.language)]));for(;o<fu;o++)wk&&!Hk&&(Hk=!0,kk=s*fu+o),r.appendChild(ff(Dk[9]+s+"_"+o)),Ek.push(Dk[9]+s+"_"+o);document.getElementById("stream_table_search_live").appendChild(r)}Wk()}function Kk(e,t,n,a){return xk.push(n),e<fu&&mf(a[0]),hf(n,t,Dk,a)}function Yk(e){for(var t=0;t<xk.length;t++)if(e===xk[t])return qk++,!0;return!1}function Wk(){Mf(function(){if(Ak){if(0<qk&&!wk)return Nk=!0,Pk(),void Qk();qk=0,Nk=Ik=!(Ek=[])}else hm(),Ok?Sm(s):(Ak=!0,ex(),cf(Dk[1],9,zu,fu)),Ik=!1})}function Qk(){try{var e=new XMLHttpRequest;Cm(qk);var t=kk+Lk;t&&Mk-1<t&&(t=Mk-wu,Fk=!0),e.open("GET","https://api.twitch.tv/kraken/search/streams?query="+encodeURIComponent(qw)+"&limit="+wu+"&offset="+t+"&"+Math.round(1e7*Math.random()),!0),e.timeout=Tk,e.setRequestHeader(xu,"anwtqukxvrtwxb4flazs2lqlabe3hqv"),e.ontimeout=function(){},e.onreadystatechange=function(){4!==e.readyState||200!==e.status||$k(e.responseText)},e.send(null)}catch(e){Zk()}}function Zk(){++Ck<Sk?(Tk+=Ck<5?250:3500,Qk()):(Fk=!0,qk=0,Ek=[],Wk())}function $k(e){var t,n,a=JSON.parse(e),i=a.streams.length,o=0,s=Ek.slice();Mk=parseInt(a._total),i<mu&&(Fk=!0);for(var r=0;r<Ek.length&&o<i;r++,o++)Yk((t=a.streams[o]).channel.name)?(qk--,r--):(xk.push(t.channel.name),gf(Sl[r],t.channel.name,[t.preview.template.replace("{width}x{height}",Cu),Jm(JSON.stringify(t.stream_type))+t.channel.display_name,t.channel.status,t.game,h+bv(t.created_at)+g+", "+_+Nm(t.viewers)+J,Dm(t.video_height,t.average_fps,t.channel.language)],Dk),qk--,-1<(n=s.indexOf(s[r]))&&s.splice(n,1));Lk+=o,Fk?(qk=0,Ek=[]):Ek=s,Wk()}function ex(){If(bk,yk,Dk,bd,fu,kk),3<bk&&lf(Dk[1],bk,zu,fu,4),kk/fu<bk+pu&&!wk&&!Nk&&(Nk=!0,Pk(),Xk())}function tx(){Sf(bk+"_"+yk,Dk)}function nx(){Rk=!0}function ax(e){var t;if(!Ik||Nk)if(Rk)switch(Rk=!1,window.setTimeout(nx,Bk),e.keyCode){case Vn:Bm()?Rm():Om()?Mm():(Bd=Bd===Md?dd:Md,Uk(),Bw=!1,Pm());break;case Hn:if(Um(bk,yk-1,Dk[0]))tx(),yk--,ex();else for(t=fu-1;-1<t;t--)if(Um(bk-1,t,Dk[0])){tx(),bk--,yk=t,ex();break}break;case zn:Um(bk,yk+1,Dk[0])?(tx(),yk++,ex()):Um(bk+1,0,Dk[0])&&(tx(),bk++,yk=0,ex());break;case Nn:for(t=0;t<fu;t++)if(Um(bk-1,yk-t,Dk[0])){tx(),bk--,yk-=t,ex();break}break;case Dn:for(t=0;t<fu;t++)if(Um(bk+1,yk-t,Dk[0])){tx(),bk++,yk-=t,ex();break}break;case An:case Bn:Nk||Gk();break;case Mn:case Fn:case On:case Jn:S_=document.getElementById(Dk[8]+bk+"_"+yk).getAttribute(qu),T_=document.getElementById(Dk[3]+bk+"_"+yk).textContent,document.body.removeEventListener("keydown",ax),Vm();break;case Un:Lm();break;case Gn:Uk(),Bw=!1,ef();break;case Pn:Fm();break;case Xn:Bd=hd,Uk(),Pm()}else e.preventDefault();else e.preventDefault()}var ix=0,ox=10,sx=3500,rx=[],cx=[],lx=[],dx="",ux=0,mx=!1,fx=!1,px="",_x=0;function vx(){ci.length?mx=!1:(window.clearInterval(jd),document.removeEventListener("visibilitychange",nf),mx=!0),px=ci[0],hx(),gx(),_x=0,mx?webapis.preview.setPreviewData(kx()):bx()}function hx(){rx=[],cx=[],lx=[]}function gx(){ix=0,ox=10,sx=1e4}function bx(){try{var e,t=new XMLHttpRequest;_x?1===_x?e="https://api.twitch.tv/kraken/streams/?channel="+encodeURIComponent(dx)+"&limit=21&"+Math.round(1e7*Math.random()):2===_x?e="https://api.twitch.tv/api/users/"+encodeURIComponent(px)+"/follows/games/live?limit=6&"+Math.round(1e7*Math.random()):3===_x&&(e="https://api.twitch.tv/api/users/"+encodeURIComponent(px)+"/followed/hosting?limit=10&"+Math.round(1e7*Math.random())):e="https://api.twitch.tv/kraken/users/"+encodeURIComponent(px)+"/follows/channels?limit=100&sortby=last_broadcast&"+Math.round(1e7*Math.random()),t.open("GET",e,!0),t.timeout=sx,t.setRequestHeader(xu,ku),t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status)try{wx(t.responseText)}catch(e){}else yx()},t.send(null)}catch(e){yx()}}function yx(){++ix<ox?(sx+=1e3,bx()):hx()}function wx(e){var t=JSON.parse(e);if(_x)1===_x?rx=t.streams:2===_x?cx=t.follows:3===_x&&(lx=t.hosts);else{dx="";for(var n=0;n<t.follows.length;n++)dx+=t.follows[n].channel.name+",";dx=dx.slice(0,-1)}_x<3?(_x++,gx(),bx()):(ux=(new Date).getTime(),webapis.preview.setPreviewData(xx()),window.setTimeout(hx,1e3))}function kx(){return'{"sections":['+Ex(!0)}function xx(){var e,t,n,a='{"sections":[';if(t=rx.length){for(a+='{"title":"'+Y+" "+px+'","tiles":[',e=0;e<t;e++)a+=(e?",":"")+'{"title":"'+(n=Jm(JSON.stringify(rx[e].stream_type))+rx[e].channel.display_name)+'","subtitle":"'+p+rx[e].game+'","image_ratio":"16by9","image_url":"'+rx[e].preview.template.replace("{width}x{height}",Cu)+'","action_data":"{\\"videoIdx\\": \\"'+rx[e].channel.name+'\\",\\"videoTitleIdx\\": \\"'+n+'\\"}","is_playable":true}';a+="]},"}if(t=lx.length){for(a+='{"title":"'+W+" "+px+'","tiles":[',e=0;e<t;e++)a+=(e?",":"")+'{"title":"'+(lx[e].display_name+ne+lx[e].target.channel.display_name)+'","subtitle":"'+p+lx[e].target.meta_game+'","image_ratio":"16by9","image_url":"'+lx[e].target.preview_urls.template.replace("{width}x{height}",Cu)+'","action_data":"{\\"videoIdx\\": \\"'+lx[e].target.channel.name+'\\",\\"videoTitleIdx\\": \\"'+lx[e].target.channel.display_name+'\\"}","is_playable":true}';a+="]},"}if(t=cx.length){for(a+='{"title":"'+Q+" "+px+'","tiles":[',e=0;e<t;e++)a+=(e?",":"")+'{"title":"'+cx[e].game.name+'","image_ratio":"2by3","image_url":"'+cx[e].game.box.template.replace("{width}x{height}",Su)+'","action_data":"{\\"gameIdx\\": \\"'+cx[e].game.name+'\\"}","is_playable":false}';a+="]},"}return a+Ex(!1)}function Ex(e){return'{"title":"'+m+'","tiles":[{"title":"'+d+m+'","image_ratio":"16by9","image_url":"'+Qu+'","action_data":"{\\"screenIdx\\": '+dd+'}","is_playable":false}]},'+(e?'{"title":"'+$+'","tiles":[{"title":"'+d+$+'","subtitle":"'+se+'","image_ratio":"16by9","image_url":"'+em+'","action_data":"{\\"screenIdx\\": '+ud+'}","is_playable":false}]},':'{"title":"'+u+'","tiles":[{"title":"'+d+u+'","image_ratio":"16by9","image_url":"'+$u+'","action_data":"{\\"screenIdx\\": '+xd+'}","is_playable":false}]},')+'{"title":"'+f+'","tiles":[{"title":"'+d+f+'","image_ratio":"16by9","image_url":"'+Zu+'","action_data":"{\\"screenIdx\\": '+md+'}","is_playable":false}]}]}'}function Ix(){var e;try{e=tizen.application.getCurrentApplication().getRequestedAppControl()}catch(e){}var t,n,a,i,o,s,r,c=!1;if(e){fx=!0,t=e.appControl.data;for(var l=0;l<t.length;l++)if("PAYLOAD"===t[l].key)if(n=JSON.parse(t[l].value[0]).values,JSON.parse(n).videoIdx){if(a=JSON.parse(n).videoIdx,i=JSON.parse(n).videoTitleIdx,C_&&S_===a)return;S_=a,T_=i,m_?wv():Uh?zg():Pf?kp():Xm(Bd),window.setTimeout(Vm,10)}else JSON.parse(n).gameIdx?(c=(o=JSON.parse(n).gameIdx)!==Pd,r=Bd,Pd=o,Bd=fd,Xm(r),m_?window.setTimeout(yv,10):Uh?window.setTimeout(Hg,10):Pf?window.setTimeout(wp,10):c&&Pm()):JSON.parse(n).screenIdx&&(c=(s=JSON.parse(n).screenIdx)!==Bd,r=Bd,Bd=s,Xm(r),m_?window.setTimeout(yv,10):Uh?window.setTimeout(Hg,10):Pf?window.setTimeout(wp,10):c&&Pm())}}var Cx=0,Sx=0,Tx=!1,qx=0,Lx=[],Rx=[],Bx=!1,Fx=0,Mx=10,Ox=3500,Ax=0,Hx=0,zx=!0,Nx=25,Dx=!1,Jx=0,Ux=0,Gx=!1,Px=!1,Xx="",Vx="",jx=["sv_thumbdiv","sv_img","sv_infodiv","sv_title","sv_streamon","sv_duration","sv_viwers","sv_quality","sv_cell","svempty_","sv_game"],Kx=!1,Yx=!1,Wx="",Qx="",Zx="",$x="",eE="",tE="",nE=!1,aE=0;function iE(){Bd=wd,Nd!==Wx&&(Kx=!1),Km(),sm("label_switch","icon-switch",c+Zt),_m("top_bar_user",Dd),document.body.addEventListener("keydown",bE,!1),uf(Cx),Kx?(_m("top_bar_game",Yx?M:F),Tf(jx[0],Cx,Sx,wd,au,tu,!1),Em(Sx,Cx,fu,qx)):sE()}function oE(){jm(),document.body.removeEventListener("keydown",bE)}function sE(){_m("top_bar_game",Yx?M:F),Tm(),Wx=Nd,Kx=!1,qf("blank_focus"),vm(),af("stream_table_search_vod"),Dx=nE=!1,Lx=[],Cx=Sx=qx=Jx=Hx=Ax=0,Tx=Px=!(Rx=[]),xm(),rE(),cE()}function rE(){Bx=!0,Fx=0,Ox=3500}function cE(){try{var e=new XMLHttpRequest,t=qx+Hx;t&&Jx-1<t&&(t=Jx-mu,Dx=Tx=!0),e.open("GET","https://api.twitch.tv/kraken/channels/"+encodeURIComponent(Nd)+"/videos?limit="+mu+"&broadcast_type="+(Yx?"highlight":"archive")+"&sort=time&offset="+t+"&"+Math.round(1e7*Math.random()),!0),e.timeout=Ox,e.setRequestHeader(xu,ku),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void dE(e.responseText);lE()}},e.send(null)}catch(e){lE()}}function lE(){++Fx<Mx?(Ox+=Fx<5?250:3500,cE()):(nE=Bx=!1,hm(),Sm(q))}function dE(e){var t=JSON.parse(e),n=t.videos.length;Jx=parseInt(t._total),n<mu&&(Tx=!0);var a=qx;Gx=!(qx+=n);var i=n/fu;0<n%fu&&i++;for(var o,s,r,c,l=0,d=0;d<i;d++){for(s=a/fu+d,r=document.createElement("tr"),o=0;o<fu&&l<n;o++,l++)c=t.videos[l],-1!==(JSON.stringify(c.preview)+"").indexOf("404_processing_320x240.png")?(Ax++,o--):uE(c._id)?o--:(Lx.push(c._id),r.appendChild(TT(s,s+"_"+o,c._id+","+c.length+","+c.language+","+c.game,[c.preview.replace("320x240",Cu),c.title,H+Wm(c.created_at),Qt+p+c.game,Nm(c.views)+N,Dm(c.resolutions.chunked.slice(-4),parseInt(c.fps.chunked)||0,c.language),z+hv(c.length)],jx)));for(;o<fu;o++)Tx&&!Px&&(Px=!0,qx=s*fu+o),r.appendChild(ff(jx[9]+s+"_"+o)),Rx.push(jx[9]+s+"_"+o);document.getElementById("stream_table_search_vod").appendChild(r)}mE()}function uE(e){for(var t=0;t<Lx.length;t++)if(e===Lx[t])return Ax++,!0;return!1}function mE(){Mf(function(){if(Kx){if(0<Ax&&!Tx)return nE=!0,rE(),void fE();Ax=0,nE=Bx=!(Rx=[])}else hm(),Gx?Sm(L+(Yx?M:F)+R+I):(Kx=!0,vE(),cf(jx[1],9,zu,fu)),Bx=!1})}function fE(){try{var e=new XMLHttpRequest;Cm(Ax);var t=qx+Hx;t&&Jx-1<t&&(t=Jx-wu,Dx=!0),e.open("GET","https://api.twitch.tv/kraken/channels/"+encodeURIComponent(Nd)+"/videos?limit="+wu+"&broadcast_type="+(Yx?"highlight":"archive")+"&sort=time&offset="+t+"&"+Math.round(1e7*Math.random()),!0),e.timeout=Ox,e.setRequestHeader(xu,ku),e.ontimeout=function(){},e.onreadystatechange=function(){4!==e.readyState||200!==e.status||_E(e.responseText)},e.send(null)}catch(e){pE()}}function pE(){++Fx<Mx?(Ox+=Fx<5?250:3500,fE()):(Dx=!0,Ax=0,Rx=[],mE())}function _E(e){var t,n,a=JSON.parse(e),i=a.videos.length,o=0,s=Rx.slice();Jx=parseInt(a._total),i<mu&&(Dx=!0);for(var r=0;r<Rx.length&&o<i;r++,o++)t=a.videos[o],-1!==(JSON.stringify(t.preview)+"").indexOf("404_processing_320x240.png")?r--:uE(t._id)?(Ax--,r--):(Lx.push(t._id),LT(Rx[r],t._id+","+t.length+","+t.language+","+t.game,[t.preview.replace("320x240",Cu),t.title,H+Wm(t.created_at),Qt+p+t.game,Nm(t.views)+N,Dm(t.resolutions.chunked.slice(-4),parseInt(t.fps.chunked)||0,t.language),z+hv(t.length)],jx),Ax--,-1<(n=s.indexOf(s[r]))&&s.splice(n,1));Hx+=o,Dx?(Ax=0,Rx=[]):Rx=s,mE()}function vE(){If(Cx,Sx,jx,wd,fu,qx),3<Cx&&lf(jx[1],Cx,zu,fu,4),qx/fu<Cx+pu&&!Tx&&!nE&&(nE=!0,rE(),cE())}function hE(){Sf(Cx+"_"+Sx,jx)}function gE(){zx=!0}function bE(e){var t;if(!Bx||nE)if(zx)switch(zx=!1,window.setTimeout(gE,Nx),e.keyCode){case Vn:Bm()?Rm():Om()?Mm():(Bd=yd,oE(),Pm());break;case Hn:if(Um(Cx,Sx-1,jx[0]))hE(),Sx--,vE();else for(t=fu-1;-1<t;t--)if(Um(Cx-1,t,jx[0])){hE(),Cx--,Sx=t,vE();break}break;case zn:Um(Cx,Sx+1,jx[0])?(hE(),Sx++,vE()):Um(Cx+1,0,jx[0])&&(hE(),Cx++,Sx=0,vE());break;case Nn:for(t=0;t<fu;t++)if(Um(Cx-1,Sx-t,jx[0])){hE(),Cx--,Sx-=t,vE();break}break;case Dn:for(t=0;t<fu;t++)if(Um(Cx+1,Sx-t,jx[0])){hE(),Cx++,Sx-=t,vE();break}break;case Ln:case Rn:nE||(Yx=!Yx,localStorage.setItem("Svod_highlight",Yx?"true":"false"),sE());break;case An:case Bn:nE||sE();break;case Mn:case Fn:case On:case Jn:Qx=document.getElementById(jx[8]+Cx+"_"+Sx).getAttribute(qu).split(","),Ux=parseInt(Qx[1]),Xx=Qx[2],Vx=Qx[3],Qx=Qx[0].substr(1),Zx=document.getElementById(jx[3]+Cx+"_"+Sx).textContent,eE=document.getElementById(jx[4]+Cx+"_"+Sx).textContent,tE=document.getElementById(jx[5]+Cx+"_"+Sx).textContent,$x=document.getElementById(jx[10]+Cx+"_"+Sx).textContent+", "+document.getElementById(jx[6]+Cx+"_"+Sx).textContent,yE();break;case Un:Lm();break;case Gn:oE(),ef();break;case Pn:Fm();break;case Xn:Bw||(Md=wd),Bd=hd,oE(),Pm()}else e.preventDefault();else e.preventDefault()}function yE(){document.body.addEventListener("keydown",Wg,!1),document.body.removeEventListener("keydown",bE),cm("scene2"),Dg(),jv(),zv(),Rv(),Mv(),rm("scene1"),_g()}var wE=0,kE=0,xE=!1,EE=0,IE=!1,CE=0,SE=10,TE=3500,qE=!0,LE=25,RE=[],BE=0,FE=!1,ME=!1,OE="",AE=!1,HE=!1,zE=["uc_thumbdiv","uc_img","uc_infodiv","uc_displayname","uc_cell","ucempty_"];function NE(){Bd=Ed,dy=!1,dm("top_bar_user","icon_center_focus"),pm("top_bar_user",u+Ym(Kd+Z)),document.body.addEventListener("keydown",ZE,!1),uf(wE),OE!==Kd&&(ME=!1),ME?(Tf(zE[0],wE,kE,Ed,iu,tu,!0),Em(kE,wE,bu,EE)):JE()}function DE(){um("top_bar_user","icon_center_focus"),document.body.removeEventListener("keydown",ZE),_m("top_bar_user",u)}function JE(){Tm(),qf("blank_focus"),vm(),OE=Kd,ME=!1,af("stream_table_user_channels"),wE=kE=EE=BE=0,AE=xE=HE=!1,xm(),RE=[],UE(),GE()}function UE(){IE=!0,CE=0,TE=3500}function GE(){try{var e=new XMLHttpRequest;e.open("GET","https://api.twitch.tv/kraken/users/"+encodeURIComponent(Kd)+"/follows/channels?limit=100&offset="+BE+"&sortby=created_at&"+Math.round(1e7*Math.random()),!0),e.timeout=TE,e.setRequestHeader(xu,ku),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void XE(e.responseText);PE()}},e.send(null)}catch(e){PE()}}function PE(){++CE<SE?(TE+=CE<5?250:3500,GE()):(ME=HE=IE=!1,hm(),Sm(q))}function XE(e){var t=JSON.parse(e).follows,n=t.length;if(n){for(var a="",i=0;i<n;i++)a=t[i].channel.name+","+t[i].channel._id+","+t[i].channel.logo+","+t[i].channel.display_name,-1===RE.indexOf(a)&&RE.push(a);BE+=n,UE(),GE()}else RE.sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}),VE()}function VE(){var e=gu,t=EE,n=RE.length-t;n<e&&(e=n),e<gu&&(xE=!0),FE=!(EE+=e);var a=e/bu;0<e%bu&&a++;for(var i,o,s,r=t,c=0;c<a;c++){for(o=t/bu+c,s=document.createElement("tr"),i=0;i<bu&&r<RE.length;i++,r++)s.appendChild(jE(o,o+"_"+i,RE[r].split(",")));for(;i<bu;i++)xE&&!AE&&(AE=!0,EE=o*bu+i),s.appendChild(ff(zE[5]+o+"_"+i));document.getElementById("stream_table_user_channels").appendChild(s)}KE()}function jE(e,t,n){return e<4&&mf(n[2]),pf(t,zE,n)}function KE(){Mf(function(){ME?HE=IE=!1:(hm(),FE?Sm(L+Z):(ME=!0,YE(),cf(zE[1],9,Hu,bu)),IE=!1)})}function YE(){Ef(wE,kE,zE,Ed,bu,EE),3<wE&&lf(zE[1],wE,Hu,bu,4),EE/bu<wE+yu&&!xE&&!HE&&(HE=!0,UE(),GE())}function WE(){Sf(wE+"_"+kE,zE)}function QE(){qE=!0}function ZE(e){var t;if(IE&&!HE||!qE)e.preventDefault();else switch(qE=!1,window.setTimeout(QE,LE),e.keyCode){case Vn:Bm()?Rm():Om()?Mm():HE||(Bd=xd,DE(),Pm());break;case Hn:if(Um(wE,kE-1,zE[0]))WE(),kE--,YE();else for(t=bu-1;-1<t;t--)if(Um(wE-1,t,zE[0])){WE(),wE--,kE=t,YE();break}break;case zn:Um(wE,kE+1,zE[0])?(WE(),kE++,YE()):Um(wE+1,0,zE[0])&&(WE(),wE++,kE=0,YE());break;case Nn:for(t=0;t<bu;t++)if(Um(wE-1,kE-t,zE[0])){WE(),wE--,kE-=t,YE();break}break;case Dn:for(t=0;t<bu;t++)if(Um(wE+1,kE-t,zE[0])){WE(),wE++,kE-=t,YE();break}break;case An:case Bn:HE||JE();break;case Ln:Bd=pd,DE(),Pm();break;case Rn:Bd=vd,DE(),Pm();break;case Mn:case Fn:case On:case Jn:HE||(Nd=document.getElementById(zE[4]+wE+"_"+kE).getAttribute(qu),Xd=document.getElementById(zE[4]+wE+"_"+kE).getAttribute("data-id"),Dd=document.getElementById(zE[3]+wE+"_"+kE).textContent,Jd=document.getElementById(zE[1]+wE+"_"+kE).src,document.body.removeEventListener("keydown",ZE),Od=Ed,Bd=yd,mb=ra=Hd=!0,Pm());break;case Un:Lm();break;case Gn:DE(),ef();break;case Pn:Fm();break;case Xn:Md=Ed,Bd=hd,DE(),Pm()}}var $E=0,eI=0,tI=!1,nI=0,aI=[],iI=[],oI=!1,sI=0,rI=10,cI=3500,lI=0,dI=0,uI=!0,mI=25,fI=!1,pI=0,_I=!1,vI=!1,hI=!0,gI=!1,bI="",yI=!1,wI=["ug_thumbdiv","ug_img","ug_infodiv","ug_displayname","ug_viwers","ug_cell","ugempty_"];function kI(){Bd=vd,sm("label_refresh","icon-refresh",Kt+Q+"/"+jt+Yt),dm("top_bar_user","icon_center_focus"),document.body.addEventListener("keydown",zI,!1),uf($E),bI!==Kd&&(gI=!1),gI?(pm("top_bar_user",u+Ym(Kd+" "+(hI?Q:jt))),Tf(wI[0],$E,eI,vd,ou,nu,!1),Em(eI,$E,vu,nI)):EI()}function xI(){sm("label_refresh","icon-refresh",e+Yt),um("top_bar_user","icon_center_focus"),_m("top_bar_user",u),document.body.removeEventListener("keydown",zI)}function EI(){Tm(),qf("blank_focus"),pm("top_bar_user",u+Ym(Kd+" "+(hI?Q:jt))),vm(),bI=Kd,gI=!1,af("stream_table_user_games"),fI=yI=!1,aI=[],$E=eI=nI=pI=dI=lI=0,tI=vI=!(iI=[]),xm(),II(),CI()}function II(){oI=!0,sI=0,cI=3500}function CI(){try{var e=new XMLHttpRequest,t=nI+dI;t&&pI-1<t&&(t=pI-_u,fI=tI=!0),e.open("GET","https://api.twitch.tv/api/users/"+encodeURIComponent(Kd)+"/follows/games"+(hI?"/live":"")+"?limit="+_u+"&offset="+t+"&"+Math.round(1e7*Math.random()),!0),e.timeout=cI,e.setRequestHeader(xu,ku),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void TI(e.responseText);SI()}},e.send(null)}catch(e){SI()}}function SI(){++sI<rI?(cI+=sI<5?250:3500,CI()):(yI=oI=!1,hm(),Sm(q))}function TI(e){var t=JSON.parse(e),n=t.follows.length;pI=parseInt(t._total),n<_u&&(tI=!0);var a=nI;_I=!(nI+=n);var i=n/vu;0<n%vu&&i++;for(var o,s,r,c,l=0,d=0;d<i;d++){for(s=a/vu+d,r=document.createElement("tr"),o=0;o<vu&&l<n;o++,l++)c=t.follows[l],hI?LI(c.game.name)?o--:r.appendChild(qI(s,s+"_"+o,[c.game.name,c.game.box.template.replace("{width}x{height}",Su),Nm(c.channels)+" "+E+_+Nm(c.viewers)+J])):LI(c.name)?o--:r.appendChild(qI(s,s+"_"+o,[c.name,c.box.template.replace("{width}x{height}",Su),""]));for(;o<vu;o++)tI&&!vI&&(vI=!0,nI=s*vu+o),r.appendChild(ff(wI[6]+s+"_"+o)),iI.push(wI[6]+s+"_"+o);document.getElementById("stream_table_user_games").appendChild(r)}RI()}function qI(e,t,n){return aI.push(n[0]),e<2&&mf(n[1]),yf(t,wI,n)}function LI(e){for(var t=0;t<aI.length;t++)if(e===aI[t])return lI++,!0;return!1}function RI(){Mf(function(){if(gI){if(0<lI&&!tI)return yI=!0,II(),void BI();lI=0,yI=oI=!(iI=[])}else hm(),_I?Sm(L+Q):(gI=!0,OI(),cf(wI[1],7,Au,vu)),oI=!1})}function BI(){try{var e=new XMLHttpRequest;Cm(lI);var t=nI+dI;t&&pI-1<t&&(t=pI-wu,fI=!0),e.open("GET","https://api.twitch.tv/api/users/"+encodeURIComponent(Kd)+"/follows/games"+(hI?"/live":"")+"?limit="+_u+"&offset="+t+"&"+Math.round(1e7*Math.random()),!0),e.timeout=cI,e.setRequestHeader(xu,ku),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void MI(e.responseText);FI()}},e.send(null)}catch(e){FI()}}function FI(){++sI<rI?(cI+=sI<5?250:3500,BI()):(fI=!0,lI=0,iI=[],RI())}function MI(e){var t,n,a=JSON.parse(e),i=a.follows.length,o=0,s=iI.slice();pI=parseInt(a._total),i<_u&&(fI=!0);for(var r=0;r<iI.length&&o<i;r++,o++)t=a.follows[o],hI?LI(t.game.name)?(lI--,r--):(aI.push(t.game.name),wf(iI[r],[t.game.name,t.game.box.template.replace("{width}x{height}",Su),Nm(t.channels)+" "+E+_+Nm(t.viewers)+J],wI),lI--,-1<(n=s.indexOf(s[r]))&&s.splice(n,1)):LI(t.name)?(lI--,r--):(aI.push(t.name),wf(iI[r],[t.name,t.box.template.replace("{width}x{height}",Su),""],wI),lI--,-1<(n=s.indexOf(s[r]))&&s.splice(n,1));dI+=o,fI?(lI=0,iI=[]):iI=s,RI()}function OI(){Cf($E,eI,wI,vd,vu,nI),2<$E&&lf(wI[1],$E,Au,vu,3),nI/vu<$E+hu&&!tI&&!yI&&(yI=!0,II(),CI())}function AI(){Sf($E+"_"+eI,wI)}function HI(){uI=!0}function zI(e){var t;if(!oI||yI)if(uI)switch(uI=!1,window.setTimeout(HI,mI),e.keyCode){case Vn:Bm()?Rm():Om()?Mm():(Bd=xd,xI(),Pm());break;case Hn:if(Um($E,eI-1,wI[0]))AI(),eI--,OI();else for(t=vu-1;-1<t;t--)if(Um($E-1,t,wI[0])){AI(),$E--,eI=t,OI();break}break;case zn:Um($E,eI+1,wI[0])?(AI(),eI++,OI()):Um($E+1,0,wI[0])&&(AI(),$E++,eI=0,OI());break;case Nn:for(t=0;t<vu;t++)if(Um($E-1,eI-t,wI[0])){AI(),$E--,eI-=t,OI();break}break;case Dn:for(t=0;t<vu;t++)if(Um($E+1,eI-t,wI[0])){AI(),$E++,eI-=t,OI();break}break;case An:case Bn:yI||(hI=!hI,EI(),localStorage.setItem("user_Games_live",hI?"true":"false"),MS());break;case Ln:yI||(Bd=Ed,xI(),Pm());break;case Rn:Bd=_d,xI(),Pm();break;case Mn:case Fn:case On:case Jn:Pd=document.getElementById(wI[5]+$E+"_"+eI).getAttribute(qu),Ad=vd,Bd=fd,Qi=zd=!0,xI(),Pm();break;case Un:Lm();break;case Gn:xI(),ef();break;case Pn:Fm();break;case Xn:Md=vd,Bd=hd,Qi=!1,xI(),Pm()}else e.preventDefault();else e.preventDefault()}var NI=0,DI=0,JI=!1,UI=0,GI=[],PI=[],XI=!1,VI=0,jI=10,KI=3500,YI=0,WI=0,QI=!0,ZI=25,$I=!1,eC=0,tC=!1,nC=["uh_thumbdiv","uh_img","uh_infodiv","uh_displayname","uh_hosttitle","uh_hostgame","uh_viwers","uh_quality","uh_cell","uhempty_"],aC=!1,iC="",oC=!1,sC=!1;function rC(){Bd=_d,dm("top_bar_user","icon_center_focus"),pm("top_bar_user",u+Ym(Kd+W)),document.body.addEventListener("keydown",xC,!1),uf(NI),iC!==Kd&&(aC=!1),aC?(Tf(nC[0],NI,DI,_d,au,tu,!1),Em(DI,NI,fu,UI)):lC()}function cC(){um("top_bar_user","icon_center_focus"),document.body.removeEventListener("keydown",xC),_m("top_bar_user",u)}function lC(){Tm(),qf("blank_focus"),vm(),iC=Kd,aC=!1,af("stream_table_user_host"),$I=sC=!1,GI=[],NI=DI=UI=eC=WI=YI=0,JI=oC=!(PI=[]),xm(),dC(),uC()}function dC(){XI=!0,VI=0,KI=3500}function uC(){try{var e=new XMLHttpRequest,t=UI+WI;t&&eC-1<t&&(t=eC-mu,$I=JI=!0),e.open("GET","https://api.twitch.tv/api/users/"+encodeURIComponent(Kd)+"/followed/hosting?limit="+mu+"&offset="+t+"&"+Math.round(1e7*Math.random()),!0),e.timeout=KI,e.setRequestHeader(xu,ku),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void fC(e.responseText);mC()}},e.send(null)}catch(e){mC()}}function mC(){++VI<jI?(KI+=VI<5?250:3500,uC()):(sC=XI=!1,hm(),Sm(q))}function fC(e){var t=JSON.parse(e),n=t.hosts.length;eC=parseInt(t._total),n<mu&&(JI=!0);var a=UI;tC=!(UI+=n);var i=n/fu;0<n%fu&&i++;for(var o,s,r,c,l=0,d=0;d<i;d++){for(s=a/fu+d,r=document.createElement("tr"),o=0;o<fu&&l<n;o++,l++)_C((c=t.hosts[l]).display_name+ne+c.target.channel.display_name)?o--:r.appendChild(pC(s,s+"_"+o,c.display_name+ne+c.target.channel.display_name,[c.target.preview_urls.template.replace("{width}x{height}",Cu),c.display_name+ne+c.target.channel.display_name,c.target.title,c.target.meta_game,_.charAt(1).toUpperCase()+_.slice(2)+Nm(c.target.viewers)+J,""]));for(;o<fu;o++)JI&&!oC&&(oC=!0,UI=s*fu+o),r.appendChild(ff(nC[9]+s+"_"+o)),PI.push(nC[9]+s+"_"+o);document.getElementById("stream_table_user_host").appendChild(r)}vC()}function pC(e,t,n,a){return GI.push(n),e<fu&&mf(a[0]),hf(n,t,nC,a)}function _C(e){for(var t=0;t<GI.length;t++)if(e===GI[t])return YI++,!0;return!1}function vC(){Mf(function(){if(aC){if(0<YI&&!JI)return sC=!0,dC(),void hC();YI=0,sC=XI=!(PI=[])}else hm(),tC?Sm(L+W):(aC=!0,yC(),cf(nC[1],9,zu,fu)),XI=!1})}function hC(){try{var e=new XMLHttpRequest;Cm(YI);var t=UI+WI;t&&eC-1<t&&(t=eC-wu,$I=!0),e.open("GET","https://api.twitch.tv/kraken/hosts?game="+encodeURIComponent(Pd)+"&limit="+wu+"&offset="+t+"&"+Math.round(1e7*Math.random()),!0),e.timeout=KI,e.setRequestHeader(xu,ku),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void bC(e.responseText);gC()}},e.send(null)}catch(e){gC()}}function gC(){++VI<jI?(KI+=VI<5?250:3500,hC()):($I=!0,YI=0,PI=[],vC())}function bC(e){var t,n,a=JSON.parse(e),i=a.streams.length,o=0,s=PI.slice();eC=parseInt(a._total),i<mu&&($I=!0);for(var r=0;r<PI.length&&o<i;r++,o++)_C((t=a.hosts[o]).display_name+ne+t.target.channel.display_name)?(YI--,r--):(GI.push(t.display_name+ne+t.target.channel.display_name),gf(PI[r],t.target.channel.name,[t.target.preview_urls.template.replace("{width}x{height}",Cu),t.display_name+ne+t.target.channel.display_name,t.target.title,t.target.meta_game,_.charAt(1).toUpperCase()+_.slice(2)+Nm(t.target.viewers)+J,""],nC),YI--,-1<(n=s.indexOf(s[r]))&&s.splice(n,1));WI+=o,$I?(YI=0,PI=[]):PI=s,vC()}function yC(){If(NI,DI,nC,_d,fu,UI),3<NI&&lf(nC[1],NI,zu,fu,4),UI/fu<NI+pu&&!JI&&!sC&&(sC=!0,dC(),uC())}function wC(){Sf(NI+"_"+DI,nC)}function kC(){QI=!0}function xC(e){var t;if(!XI||sC)if(QI)switch(QI=!1,window.setTimeout(kC,ZI),e.keyCode){case Vn:Bm()?Rm():Om()?Mm():(Bd=xd,cC(),Pm());break;case Hn:if(Um(NI,DI-1,nC[0]))wC(),DI--,yC();else for(t=fu-1;-1<t;t--)if(Um(NI-1,t,nC[0])){wC(),NI--,DI=t,yC();break}break;case zn:Um(NI,DI+1,nC[0])?(wC(),DI++,yC()):Um(NI+1,0,nC[0])&&(wC(),NI++,DI=0,yC());break;case Nn:for(t=0;t<fu;t++)if(Um(NI-1,DI-t,nC[0])){wC(),NI--,DI-=t,yC();break}break;case Dn:for(t=0;t<fu;t++)if(Um(NI+1,DI-t,nC[0])){wC(),NI++,DI-=t,yC();break}break;case An:case Bn:sC||lC();break;case Ln:sC||(Bd=vd,cC(),Pm());break;case Rn:Bd=pd,cC(),Pm();break;case Mn:case Fn:case On:case Jn:S_=document.getElementById(nC[8]+NI+"_"+DI).getAttribute(qu),T_=document.getElementById(nC[3]+NI+"_"+DI).textContent.split(ne)[1],document.body.removeEventListener("keydown",xC),Vm();break;case Un:Lm();break;case Gn:cC(),ef();break;case Pn:Fm();break;case Xn:Md=_d,Bd=hd,cC(),Pm()}else e.preventDefault();else e.preventDefault()}var EC=0,IC=0,CC=!1,SC=0,TC=[],qC=0,LC=[],RC=!1,BC=0,FC=10,MC=3500,OC=0,AC=0,HC=!0,zC=25,NC=!1,DC=0,JC=0,UC=!1,GC=["ul_thumbdiv","ul_img","ul_infodiv","ul_displayname","ul_streamtitle","ul_streamgame","ul_viwers","ul_quality","ul_cell","ulempty_"],PC=!1,XC="",VC="",jC=!1,KC=!1;function YC(){Bd=pd,dm("top_bar_user","icon_center_focus"),pm("top_bar_user",u+Ym(Kd+Y)),document.body.addEventListener("keydown",pS,!1),VC!==Kd&&(PC=!1),PC?(Tf(GC[0],EC,IC,pd,au,tu,!1),Em(IC,EC,fu,SC)):QC()}function WC(){um("top_bar_user","icon_center_focus"),document.body.removeEventListener("keydown",pS),_m("top_bar_user",u)}function QC(){Tm(),qf("blank_focus"),vm(),PC=!1,VC=Kd,af("stream_table_user_live"),NC=KC=!1,TC=[],EC=IC=SC=qC=DC=AC=OC=JC=0,CC=jC=!(LC=[]),XC="",xm(),ZC(),$C()}function ZC(){RC=!0,BC=0,MC=3500}function $C(){try{var e=new XMLHttpRequest;e.open("GET","https://api.twitch.tv/kraken/users/"+encodeURIComponent(Kd)+"/follows/channels?limit=100&offset="+JC+"&sortby=created_at&"+Math.round(1e7*Math.random()),!0),e.timeout=MC,e.setRequestHeader(xu,ku),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void tS(e.responseText);eS()}},e.send(null)}catch(e){eS()}}function eS(){++BC<FC?(MC+=BC<5?250:3500,$C()):(KC=RC=!1,hm(),Sm(q))}function tS(e){var t=JSON.parse(e).follows,n=t.length;if(n){for(var a="",i=0;i<n;i++)a=t[i].channel.name+",",-1===XC.indexOf(a)&&(XC+=a);JC+=n,ZC(),$C()}else XC=XC.slice(0,-1),ZC(),nS()}function nS(){try{var e=new XMLHttpRequest,t=SC+AC;t&&DC-1<t&&(t=DC-mu,NC=CC=!0),e.open("GET","https://api.twitch.tv/kraken/streams/?channel="+encodeURIComponent(XC)+"&limit="+mu+"&offset="+t+"&stream_type=all&"+Math.round(1e7*Math.random()),!0),e.timeout=MC,e.setRequestHeader(xu,ku),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void iS(e.responseText);aS()}},e.send(null)}catch(e){aS()}}function aS(){++BC<FC?(MC+=BC<5?250:3500,nS()):(KC=RC=!1,hm(),Sm(q))}function iS(e){var t=JSON.parse(e),n=t.streams.length;DC=parseInt(t._total),n<mu&&(CC=!0);var a=SC;UC=!(SC+=n);var i=n/fu;0<n%fu&&i++;for(var o,s,r,c,l=0,d=0;d<i;d++){for(s=a/fu+d,r=document.createElement("tr"),o=0;o<fu&&l<n;o++,l++)sS((c=t.streams[l]).channel.name)?o--:r.appendChild(oS(s,s+"_"+o,c.channel.name,[c.preview.template.replace("{width}x{height}",Cu),Jm(JSON.stringify(c.stream_type))+c.channel.display_name,c.channel.status,c.game,h+bv(c.created_at)+g+", "+_+Nm(c.viewers)+J,Dm(c.video_height,c.average_fps,c.channel.language)]));for(;o<fu;o++)CC&&!jC&&(jC=!0,SC=s*fu+o),r.appendChild(ff(GC[9]+s+"_"+o)),LC.push(GC[9]+s+"_"+o);document.getElementById("stream_table_user_live").appendChild(r)}rS()}function oS(e,t,n,a){return TC.push(n),e<fu&&mf(a[0]),hf(n,t,GC,a)}function sS(e){for(var t=0;t<TC.length;t++)if(e===TC[t])return OC++,!0;return!1}function rS(){Mf(function(){if(PC){if(0<OC&&!CC)return KC=!0,ZC(),void cS();OC=0,KC=RC=!(LC=[])}else hm(),UC?Sm(L+Y):(PC=!0,uS(),cf(GC[1],9,zu,fu)),RC=!1})}function cS(){try{var e=new XMLHttpRequest;Cm(OC);var t=SC+AC;t&&DC-1<t&&(t=DC-wu,NC=!0),e.open("GET","https://api.twitch.tv/kraken/streams?game="+encodeURIComponent(Pd)+"&limit="+wu+"&offset="+t,!0),e.timeout=MC,e.setRequestHeader(xu,ku),e.ontimeout=function(){},e.onreadystatechange=function(){4!==e.readyState||200!==e.status||dS(e.responseText)},e.send(null)}catch(e){lS()}}function lS(){++BC<FC?(MC+=BC<5?250:3500,cS()):(NC=!0,OC=0,LC=[],rS())}function dS(e){var t,n,a=JSON.parse(e),i=a.streams.length,o=0,s=LC.slice();DC=parseInt(a._total),i<mu&&(NC=!0);for(var r=0;r<LC.length&&o<i;r++,o++)sS((t=a.streams[o]).channel.name)?(OC--,r--):(TC.push(t.channel.name),gf(LC[r],t.channel.name,[t.preview.template.replace("{width}x{height}",Cu),Jm(JSON.stringify(t.stream_type))+t.channel.display_name,t.channel.status,t.game,h+bv(t.created_at)+g+", "+_+Nm(t.viewers)+J,Dm(t.video_height,t.average_fps,t.channel.language)],GC),OC--,-1<(n=s.indexOf(s[r]))&&s.splice(n,1));AC+=o,NC?(OC=0,LC=[]):LC=s,rS()}function uS(){If(EC,IC,GC,pd,fu,SC),3<EC&&lf(GC[1],EC,zu,fu,4),SC/fu<EC+pu&&!CC&&!KC&&(KC=!0,ZC(),$C())}function mS(){Sf(EC+"_"+IC,GC)}function fS(){HC=!0}function pS(e){var t;if(!RC||KC)if(HC)switch(HC=!1,window.setTimeout(fS,zC),e.keyCode){case Vn:Bm()?Rm():Om()?Mm():(Bd=xd,WC(),Pm());break;case Hn:if(Um(EC,IC-1,GC[0]))mS(),IC--,uS();else for(t=fu-1;-1<t;t--)if(Um(EC-1,t,GC[0])){mS(),EC--,IC=t,uS();break}break;case zn:Um(EC,IC+1,GC[0])?(mS(),IC++,uS()):Um(EC+1,0,GC[0])&&(mS(),EC++,IC=0,uS());break;case Nn:for(t=0;t<fu;t++)if(Um(EC-1,IC-t,GC[0])){mS(),EC--,IC-=t,uS();break}break;case Dn:for(t=0;t<fu;t++)if(Um(EC+1,IC-t,GC[0])){mS(),EC++,IC-=t,uS();break}break;case An:case Bn:KC||QC();break;case Ln:KC||(Bd=_d,WC(),Pm());break;case Rn:KC||(Bd=Ed,WC(),Pm());break;case Mn:case Fn:case On:case Jn:S_=document.getElementById(GC[8]+EC+"_"+IC).getAttribute(qu),T_=document.getElementById(GC[3]+EC+"_"+IC).textContent,document.body.removeEventListener("keydown",pS),Vm();break;case Un:Lm();break;case Gn:WC(),ef();break;case Pn:Fm();break;case Xn:Md=pd,Bd=hd,WC(),Pm()}else e.preventDefault();else e.preventDefault()}var _S=0,vS=0,hS=!0,gS=25,bS=7,yS=0,wS=null,kS=["u_thumbdiv","u_img","u_infodiv","u_displayname","u_cell"],xS=!1,ES=!0,IS=[],CS=[],SS=0;function TS(){Bd=xd,Tm(),dm("top_bar_user","icon_center_focus"),document.body.addEventListener("keydown",WS,!1),xS?Tf(kS[0],_S,vS,xd,iu,160,!0):LS()}function qS(){xa(0),um("top_bar_user","icon_center_focus"),document.body.removeEventListener("keydown",WS)}function LS(){Tm(),xS=!1,qf("blank_focus"),vm(),af("stream_table_user"),IS=[],CS=[],ES=!(_S=vS=SS=0),RS()}function RS(){for(var e,t,n=document.createElement("tbody"),a=0;a<ci.length;a++)t=0,Kd=ci[a],(Zd=document.createElement("tr")).className="follower_header",Zd.innerHTML='<div class="follower_header">'+Kd+A+(a?"":oe)+"</div>",document.getElementById("stream_table_user").appendChild(n),document.getElementById("stream_table_user").appendChild(Zd),(e=document.createElement("tr")).appendChild(BS(a+"_"+t,Dd,Y,Du)),t++,e.appendChild(BS(a+"_"+t,Dd,W,Ju)),t++,e.appendChild(BS(a+"_"+t,Dd,hI?Q:jt,Nu)),t++,e.appendChild(BS(a+"_"+t,Dd,Z,Pu)),t++,a?e.appendChild(BS(a+"_"+t,Dd,ie,ju)):e.appendChild(BS(a+"_"+t,Dd,$,Vu)),t++,e.appendChild(BS(a+"_"+t,Dd,ee,Xu)),t++,e.appendChild(BS(a+"_"+t,Dd,-1<Ia(Kd)?xt:kt,Ku)),document.getElementById("stream_table_user").appendChild(e);FS()}function BS(e,t,n,a){return IS[SS]=a,CS[SS]=kS[1]+e,SS++,mf(a),(Zd=document.createElement("td")).setAttribute("id",kS[4]+e),Zd.setAttribute(qu,t),Zd.className="stream_cell",Zd.innerHTML='<div id="'+kS[0]+e+'" class="stream_thumbnail_channel" ><img id="'+kS[1]+e+'" class="stream_img"></div><div id="'+kS[2]+e+'" class="stream_text"><div id="'+kS[3]+e+'" class="stream_info_user">'+n+"</div></div>",Zd}function FS(){Mf(function(){xS||(hm(),xS=!0,0<ta.length&&OS(),zS()),rf(IS,CS,zu),ES=!1})}function MS(){for(var e=0;e<ci.length;e++)_m(kS[3]+e+"_2",hI?Q:jt)}function OS(){for(var e=0;e<ci.length;e++)AS(e)}function AS(e){Zn=0,ea=1e4,Ka(e)}function HS(e,t){if(_m(kS[3]+t+"_6",e?xt:kt),!e){var n=Ia(ci[t]);-1<n&&wa(n)}}function zS(){dm(kS[0]+_S+"_"+vS,"stream_thumbnail_focused"),Tf(kS[0],_S,vS,xd,iu,160,!0)}function NS(){um(kS[0]+_S+"_"+vS,"stream_thumbnail_focused")}function DS(){hS=!0}function JS(){5!==vS&&document.body.removeEventListener("keydown",WS),Kd=ci[_S],xa(_S),vS?1===vS?rC():2===vS?kI():3===vS?NE():4===vS?_S?Ci(_S):(Fd=xd,fi()):5===vS?VS():6===vS&&ma():YC()}function US(e){for(var t=JSON.parse(e),n=t.token.authorization.scopes,a="",i=0;i<n.length;i++)a+=n[i];return-1!==a.indexOf("user_follows_edit")&&-1!==a.indexOf("user_subscriptions")&&t.token.user_name+""===Kd&&t.token.valid+""=="true"}function GS(e){if(_m(kS[3]+_S+"_"+vS,e?xt:kt),!e){var t=Ia(ci[_S]);-1<t&&wa(t)}}function PS(){window.clearTimeout(wS)}function XS(){wS=window.setTimeout(jS,6e3)}function VS(){XS(),pm("main_dialog_remove",Xt+mn+Kd+"?"),cm("main_remove_dialog")}function jS(){PS(),rm("main_remove_dialog"),yS=0,YS()}function KS(){return lm("main_remove_dialog")}function YS(){yS?(um("remove_cancel","button_search_focused"),dm("remove_yes","button_search_focused")):(dm("remove_cancel","button_search_focused"),um("remove_yes","button_search_focused"))}function WS(e){var t;if(ES)e.preventDefault();else if(hS)switch(hS=!1,window.setTimeout(DS,gS),e.keyCode){case Vn:KS()?jS():Bm()?Rm():Om()?Mm():(Bd=Fd===xd?dd:Fd,qS(),Pm());break;case Hn:if(KS())--yS<0&&(yS=1),YS(),PS(),XS();else if(Um(_S,vS-1,kS[0]))NS(),vS--,zS();else if(Um(_S-1,0,kS[0])){for(t=bS-1;-1<t;t--)if(Um(_S-1,t,kS[0])){NS(),_S--,vS=t,zS();break}}else NS(),vS=bS-1,zS();break;case zn:KS()?(1<++yS&&(yS=0),YS(),PS(),XS()):(Um(_S,vS+1,kS[0])?(NS(),vS++):(Um(_S+1,0,kS[0])?(NS(),_S++):NS(),vS=0),zS());break;case Nn:for(t=0;t<bS;t++)if(Um(_S-1,vS-t,kS[0])){NS(),_S--,vS-=t,zS();break}break;case Dn:for(t=0;t<bS;t++)if(Um(_S+1,vS-t,kS[0])){NS(),_S++,vS-=t,zS();break}break;case An:case Bn:LS();break;case Ln:Fd=xd,Bd=Rd,qS(),Pm();break;case Rn:Fd=xd,Bd=dd,qS(),Pm();break;case Mn:case Fn:case On:case Jn:if(KS()){var n=yS;jS(),n&&(document.body.removeEventListener("keydown",WS),Ei(_S))}else JS();break;case Un:Lm();break;case Gn:qS(),ef();break;case Pn:Fm();break;case Xn:Md=xd,Bd=hd,qS(),Pm()}else e.preventDefault()}var QS=0,ZS=0,$S=!1,eT=0,tT=[],nT=[],aT=!1,iT=0,oT=10,sT=3500,rT=0,cT=0,lT=!0,dT=25,uT=!1,mT=0,fT=!1,pT=!1,_T="week",vT=2,hT=(Pc=!1,["v_thumbdiv","v_img","v_infodiv","v_title","v_streamon","v_duration","v_viwers","v_quality","v_cell","svempty_","v_game"]),gT=!1,bT=!1,yT=!1;function wT(){Bd=Sd,dm("top_bar_vod","icon_center_focus"),document.body.addEventListener("keydown",DT,!1),sm("label_refresh","icon-refresh",c+Yt),sm("label_controls","icon-calendar",l+" (C)"),uf(QS),gT?(Tf(hT[0],QS,ZS,Sd,au,tu,!1),Em(ZS,QS,fu,eT),UT()):xT()}function kT(){jm(),document.body.removeEventListener("keydown",DT),um("top_bar_vod","icon_center_focus"),_m("top_bar_vod",$t),sm("label_refresh","icon-refresh",e+Yt),sm("label_controls","icon-question-circle",hn)}function xT(){UT(),Tm(),gT=!1,qf("blank_focus"),vm(),af("stream_table_vod"),uT=yT=!1,tT=[],QS=ZS=eT=mT=cT=rT=0,$S=pT=!(nT=[]),xm(),ET(),IT()}function ET(){aT=!0,iT=0,sT=3500}function IT(){try{var e=new XMLHttpRequest,t=eT+cT;t&&mT-1<t&&(t=mT-mu,uT=$S=!0),e.open("GET","https://api.twitch.tv/kraken/videos/top?limit="+mu+"&broadcast_type="+(bT?"highlight":"archive")+"&sort=views&offset="+t+"&period="+_T+"&"+Math.round(1e7*Math.random()),!0),e.timeout=sT,e.setRequestHeader(xu,ku),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void ST(e.responseText);CT()}},e.send(null)}catch(e){CT()}}function CT(){++iT<oT?(sT+=iT<5?250:3500,IT()):(yT=aT=!1,hm(),Sm(q))}function ST(e){var t=JSON.parse(e),n=t.videos.length;mT=parseInt(t._total),n<mu&&($S=!0);var a=eT;fT=!(eT+=n);var i=n/fu;0<n%fu&&i++;for(var o,s,r,c,l=0,d=0;d<i;d++){for(s=a/fu+d,r=document.createElement("tr"),o=0;o<fu&&l<n;o++,l++)c=t.videos[l],-1!==(JSON.stringify(c.preview)+"").indexOf("404_processing_320x240.png")?(rT++,o--):BT(c._id)?o--:(tT.push(c._id),r.appendChild(TT(s,s+"_"+o,c._id+","+c.length+","+c.language+","+c.game+","+c.channel.name,[c.preview.replace("320x240",Cu),c.channel.display_name,H+Wm(c.created_at),c.title+mn+Qt+p+c.game,Nm(c.views)+N,Dm(c.resolutions.chunked.slice(-4),parseInt(c.fps.chunked)||0,c.language),z+hv(c.length)],hT)));for(;o<fu;o++)$S&&!pT&&(pT=!0,eT=s*fu+o),r.appendChild(ff(hT[9]+s+"_"+o)),nT.push(hT[9]+s+"_"+o);document.getElementById("stream_table_vod").appendChild(r)}FT()}function TT(e,t,n,a,i){return e<fu&&mf(a[0]),qT(n,t,a,i)}function qT(e,t,n,a){return(Zd=document.createElement("td")).setAttribute("id",a[8]+t),Zd.setAttribute(qu,e),Zd.className="stream_cell",Zd.innerHTML=RT(t,n,a),Zd}function LT(e,t,n,a){splitedId=e.split(a[9])[1],(e=document.getElementById(e)).setAttribute(qu,t),e.innerHTML=RT(splitedId,n,a),e.setAttribute("id",a[8]+splitedId)}function RT(e,t,n){return'<div id="'+n[0]+e+'" class="stream_thumbnail_video" ><img id="'+n[1]+e+'" class="stream_img" data-src="'+t[0]+'"></div><div id="'+n[2]+e+'" class="stream_text"><div id="'+n[3]+e+'" class="stream_info" style="width: 72%; display: inline-block; font-size: 155%;">'+t[1]+'</div><div id="'+n[7]+e+'"class="stream_info" style="width:27%; float: right; text-align: right; display: inline-block;">'+t[5]+'</div><div><div id="'+n[4]+e+'"class="stream_info" style="width: 59%; display: inline-block;">'+t[2]+'</div><div id="'+n[5]+e+'"class="stream_info" style="width: 39%; display: inline-block; float: right; text-align: right;">'+t[6]+'</div></div><div id="'+n[10]+e+'"class="stream_info">'+t[3]+'</div><div id="'+n[6]+e+'"class="stream_info">'+t[4]+"</div></div>"}function BT(e){for(var t=0;t<tT.length;t++)if(e===tT[t])return rT++,!0;return!1}function FT(){Mf(function(){if(gT){if(0<rT&&!$S)return yT=!0,ET(),void MT();rT=0,yT=aT=!(nT=[])}else hm(),fT?Sm(L+(bT?M:F)+R+I):(gT=!0,HT(),cf(hT[1],9,zu,fu)),aT=!1})}function MT(){try{var e=new XMLHttpRequest;Cm(rT);var t=eT+cT;t&&mT-1<t&&(t=mT-wu,uT=!0),e.open("GET","https://api.twitch.tv/kraken/videos/top?limit="+wu+"&broadcast_type="+(bT?"highlight":"archive")+"&sort=views&offset="+t+"&period="+_T+"&"+Math.round(1e7*Math.random()),!0),e.timeout=sT,e.setRequestHeader(xu,ku),e.ontimeout=function(){},e.onreadystatechange=function(){4!==e.readyState||200!==e.status||AT(e.responseText)},e.send(null)}catch(e){OT()}}function OT(){++iT<oT?(sT+=iT<5?250:3500,MT()):(uT=!0,rT=0,nT=[],FT())}function AT(e){var t,n,a=JSON.parse(e),i=a.videos.length,o=0,s=nT.slice();mT=parseInt(a._total),i<mu&&(uT=!0);for(var r=0;r<nT.length&&o<i;r++,o++)t=a.videos[o],-1!==(JSON.stringify(t.preview)+"").indexOf("404_processing_320x240.png")?r--:BT(t._id)?(rT--,r--):(tT.push(t._id),LT(nT[r],t._id+","+t.length+","+t.language+","+t.game+","+t.channel.name,[t.preview.replace("320x240",Cu),t.channel.display_name,H+Wm(t.created_at),t.title+mn+Qt+p+t.game,Nm(t.views)+N,Dm(t.resolutions.chunked.slice(-4),parseInt(t.fps.chunked)||0,t.language),z+hv(t.length)],hT),rT--,-1<(n=s.indexOf(s[r]))&&s.splice(n,1));cT+=o,uT?(rT=0,nT=[]):nT=s,FT()}function HT(){If(QS,ZS,hT,Sd,fu,eT),3<QS&&lf(hT[1],QS,zu,fu,4),eT/fu<QS+pu&&!$S&&!yT&&(yT=!0,ET(),IT())}function zT(){Sf(QS+"_"+ZS,hT)}function NT(){lT=!0}function DT(e){var t;if(!aT||yT)if(lT)switch(lT=!1,window.setTimeout(NT,dT),e.keyCode){case Vn:Bm()?Rm():Om()?Mm():(Bd=Fd===Sd?dd:Fd,kT(),Pm());break;case Hn:if(Um(QS,ZS-1,hT[0]))zT(),ZS--,HT();else for(t=fu-1;-1<t;t--)if(Um(QS-1,t,hT[0])){zT(),QS--,ZS=t,HT();break}break;case zn:Um(QS,ZS+1,hT[0])?(zT(),ZS++,HT()):Um(QS+1,0,hT[0])&&(zT(),QS++,ZS=0,HT());break;case Nn:for(t=0;t<fu;t++)if(Um(QS-1,ZS-t,hT[0])){zT(),QS--,ZS-=t,HT();break}break;case Dn:for(t=0;t<fu;t++)if(Um(QS+1,ZS-t,hT[0])){zT(),QS++,ZS-=t,HT();break}break;case Ln:Fd=Sd,Bd=Td,kT(),Pm();break;case Rn:Fd=Sd,Bd=md,kT(),Pm();break;case An:case Bn:yT||(bT=!bT,localStorage.setItem("Vod_highlight",bT?"true":"false"),xT());break;case Mn:case Fn:case On:case Jn:Qx=document.getElementById(hT[8]+QS+"_"+ZS).getAttribute(qu).split(","),Ux=parseInt(Qx[1]),Xx=Qx[2],Vx=Qx[3],Nd=Qx[4],Qx=Qx[0].substr(1),Zx="",Dd=document.getElementById(hT[3]+QS+"_"+ZS).textContent,eE=document.getElementById(hT[4]+QS+"_"+ZS).textContent,tE=document.getElementById(hT[5]+QS+"_"+ZS).textContent,$x=document.getElementById(hT[10]+QS+"_"+ZS).innerHTML+", "+document.getElementById(hT[6]+QS+"_"+ZS).textContent,JT();break;case Un:Lm();break;case Gn:kT(),ef();break;case Pn:yT||(4<++vT&&(vT=1),xT());break;case Xn:Bw||(Md=Sd),Bd=hd,kT(),Pm()}else e.preventDefault();else e.preventDefault()}function JT(){document.body.addEventListener("keydown",Wg,!1),document.body.removeEventListener("keydown",DT),cm("scene2"),Dg(),jv(),zv(),Rv(),Mv(),Pc=!0,rm("scene1"),_g()}function UT(){1===vT?(pm("top_bar_vod",$t+Ym((bT?M:F)+re)),_T="day"):2===vT?(pm("top_bar_vod",$t+Ym((bT?M:F)+ce)),_T="week"):3===vT?(pm("top_bar_vod",$t+Ym((bT?M:F)+le)),_T="month"):4===vT&&(pm("top_bar_vod",$t+Ym((bT?M:F)+de)),_T="all"),localStorage.setItem("vod_periodNumber",vT)}