var t,n,a,e,i,o,s,d,c,r,p,m,l,u,_,f,g,h,v,y,b,w,k,C,M,E,I,S,x,P,L,T,B,O,G,A,N,U,F,D,R,V,H,J,q,z,j,X,W,Y,K,$,Q,Z,ee,te,ne,ae,ie,oe,se,de,ce,re,le,ue,_e,fe,me,he,pe,ge,ve,ye,be,we,ke,Ce,Me,Ee,Ie,Se,xe,Pe,Le,Te,Be,Oe,Ge,Ae,Ne,Ue,Fe,De,Re,Ve,He,Je,qe,ze,je,Xe,We,Ye,Ke,$e,Qe,Ze,et,tt,nt,at,it,ot,st,dt,ct,rt,lt,ut,_t,ft,mt,ht,pt,gt,vt,yt,bt,wt,kt,Ct,Mt,Et,It,St,xt,Pt,Lt,Tt,Bt,Ot,Gt,At,Nt,Ut,Ft,Dt,Rt,Vt,Ht,Jt,qt,zt,jt,Xt,Wt,Yt,Kt,$t,Qt,Zt,en,tn,nn,an,on,sn,dn,cn,rn,ln,un,_n,fn,mn,hn,pn,gn,vn,yn,bn,wn,kn,Cn,Mn,En,In,Sn,xn,Pn,Ln,Tn,Bn,On,Gn,An,Nn,Un,Fn,Dn,Rn,Vn,Hn,Jn,qn,zn,jn,Xn,Wn,Yn,Kn,$n,Qn,Zn,ea,ta,na,aa,ia="fglfgl27@gmail.com",oa="<br>",sa='<i class="icon-circle" style="font-size: 50%; vertical-align: middle; font-weight: bold;"></i>  ',da='<div class="about_text_title">',ca='<div class="about_text_title" style="text-align: left;">',ra='<div style="text-align: left;">',la="",ua="",_a="",fa="",ma="",ha="",pa="",ga="",va="",ya="&nbsp;";function ba(){la=e+" (C)",ua=n+" (D)",fa=a+" (A)",_a=i+" (A)",c+=Qt,r+=Qt,ma=da+e+"</div>"+da+Ee+"</div>"+oa+ra+sa+Le+oa+sa+(Te+=Wt)+oa+sa+Be+oa+sa+Oe+oa+Ge+oa+sa+Ae+oa+ya+ya+ya+Ne+oa+sa+Ue+oa+"</div>"+oa+(ga=da+Ce+"</div>"+ra+sa+at+oa+sa+et+oa+sa+tt+oa+"</div>"+ra+sa+nt+oa+sa+it+oa+sa+ot+oa+oa+da+Me+"</div>"+ra+sa+st+oa+sa+dt+oa+sa+ct+oa+sa+rt+oa+sa+lt)+oa+oa+da+ke+"</div>",ha=da+we+"</div></div>",pa=ra+oa+Fe+oa+(zr?oa+'<div style="display: inline-block; color: #FF0000; font-size: 110%; font-weight: bold;">'+$n+"</div>":"")+"</div>"+oa+da+De+"</div>"+ia+oa+oa+Re+oa+Ve+oa+oa+ca+He+"</div>"+ra+Ke+oa+sa+Je+oa+sa+qe+oa+sa+ze+oa+sa+je+oa+sa+Xe+oa+sa+We+oa+sa+Ye+oa+$e+oa+sa+Qe+oa+sa+Ze+oa+da+ke+"</div></div>",va=ht+oa+sa+pt.replace("link_link",'<div style="display: inline-block; color: #FF0000; font-size: 110%; font-weight: bold;">http://tiny.cc/twitchkeycode</div>')+oa+sa+gt+oa+sa+vt+oa+sa+yt+oa+sa+bt}function wa(){xl=!1,document.getElementById("side_panel").style.width="17%",t="Refresh:",n="Search",a="Settings",e="Controls",i="About",o="Hide",s="The text you entered is empty.",d="The search result is empty.",c="Switch screen",r="Switch user screen",p="Switch: Past Broadcast or Highlight",m="Switch: Period (24h, 7d, 30d, all)",l="Go to ",u="User ",_="Live",f="Games",g="Playing ",h=" for ",v="Watching time ",y="Since ",b=" ago",w="A Game",k="Type your search...",C="Type your authentication key...",M="Type your user name...",E="Press Enter or Select key to, ",I="Channels",S="Channel",x="Back to previously screen: Back key twice",P=" has ended",L="This video is only available to subscribers.",T="Connection failed, unable to load content hit refresh to try again",B="No",O=" for this ",G="Connection failed, unable to load video content exiting...",A=" Past Broadcast",N=" Highlight",U=" Clips",F=" Content",D="Streamed on ",R="Duration ",V=" Views",H=" Viewers",J="Click again to exit!",q="Do you wanna to exit Twitch?",z="Exit",j="Close",X="Minimize",W="Cancel",Y="Not Live | ",K=" Channels Live",$=" Hosts Live",Q=" Games Live",Z=" Followed Channels",ee=" Add User",te=" Remove User",ne="User doesn't exist",ae=" hosting ",ie=" already set",oe="Make First",se="First user can fallow (when providing a key) and see live channels feed outside of the user screen<br>",de="Add a Twitch user to display it's Followed Channels content here",ce=" (24h)",re=" (7d)",le=" (30d)",ue=" (all)",_e="Jumping",fe=" to ",me="Jump Canceled",he=" , jump time bigger then duration",pe=" Sec",ge=" Min",ve=" Hr",ye="Source",be="Version: ",we="SmartTV Twitch",ke="Press back key to close this.",Ce="Player Related:",Me="Chat Related:",Ee="General Related:",Ie="Update",Se="Current installed version ",xe=" latest available version ",Pe="This are the none players related controls, the player can show it's own controls.",Le="Play a video: Navigate using Directional pad (up/down/left/right), press enter to start playing",Te="Refresh screen content: ",Be="Exit the application: from side pannel click exit",Oe=" Switch screen: Back key then D-Pad left or right",Ge="Some screen will change its internal content (channel past broadcast or clips for example) instead of changing to another screen",Ae="Start a search: from side pannel click search",Ne="After writing the search text press key Enter on the virtual keyboard then choose a search option",Ue="About this application: from side pannel click about",Fe="This is a SmartTV Twitch client develop by a individual on his free time, for TV's that don't have access to a good official application, released for free to any one that wanna to use it.",$n="This version of the app is for test in a browser only!",De="Developer information:",Re="This is an open source application licensed under the GNU General Public License v3.0, check it on github",Ve="github.com/fgl27/SmartTwitchTV",He="This application uses following dependencies:",Je="Nightdev KapChat - KapChat captures Twitch chat directly into OBS or XSplit (https://www.nightdev.com/kapchat/)",qe="Fontastic - Create your customized icon fonts in seconds (http://app.fontastic.me)",ze="Twemoji - A simple library that provides standard Unicode emoji support across all platforms (https://github.com/twitter/twemoji)",je="UglifyJS - is a JavaScript parser, minifier, compressor and beautifier toolkit (https://github.com/mishoo/UglifyJS2)",Xe="JS Beautifier - Beautify, unpack or deobfuscate JavaScript and HTML, make JSON/JSONP readable, etc. (https://github.com/beautify-web/js-beautify)",We="HTMLMinifier - A highly configurable, well-tested, JavaScript-based HTML minifier (https://github.com/kangax/html-minifier)",Ye="JSHint - A Static Code Analysis Tool for JavaScript (https://github.com/jshint/jshint)",Ke="Web:",$e="Android:",Qe="Google: Leanback v17 (https://developer.android.com/reference/android/support/v17/leanback/package-summary)",Ze="Google: ExoPlayer (https://github.com/google/ExoPlayer)",et="Show information panel: Press enter key or D-pad keys if chat and live channel feed is not showing",tt="Close the video: press back key twice",nt="Play/Pause a video: open information panel and click on pause simbol (not available to Live streams)",at="Show user live channels feed: D-pad up",it="Change video quality: Open information panel, , navigate using use Directional pad (left/right), then use Directional pad (up/down) to choose the new quality after press Enter key to confirm the change",ot="Force refresh a video (in case it freezes): Change video quality to the same",st="Show or hide the Chat : D-pad right",dt="Change Chat position : D-pad left",ct="Change Chat size : D-pad down",rt="Change Chat background brightness: Change in side panel settings",lt="Force refresh the Chat (in case it freezes or doesn't load): Change video quality to the same will reset and sync it",ut='Start a search: open information panel, navigate using use Directional pad (left/right) to "Search" and press enter',_t="Chat and video (Side by side): Color button red (A)",ta="Force disable the chat",na="with this the chat will not load content, this is useful on a stream with too many viewers were the chat can lag the app.",ft="Update available, check google play store",mt='Adding a key allows the app to fallow and access subscribed only past broadcast (for channel you are Sub to and block VOD access to none subscribers). On the authentication page if you already added a key for another user, you need to click up two to tree time and click over "not you?" to authenticate for a different users <br> <br> add key for',ht=" below, fallowing this steps:",pt="Access the site link_link (using a computer or a smart phone)",gt='Click on the "Authorize" button it will take you to main Twitch.TV authentication site',vt="Login to Twitch.TV using the user name you are trying to add a key for",yt="Click on Authorize button of Twitch.TV site if you agree with the requested permissions",bt="The web page will update and show a key code, the key only has lower case letters and nubers.",wt=" Add Authentication key",kt="Key added OK",Ct="Key test fail, it's needed to add new one",Mt="Key test return OK",Et="You try to add a key for user ",It=" but this key is for user ",St=" Following",xt=" Follow",Pt=" And you have not set a authentication key the app can't check yours sub status.",Lt=" And you are not a sub of this channel",Tt=" You are a sub of this channel but the app fail to authenticate contact the developer email in about",Bt="Fail authentication check with the provider key, please check and try again",Nn="The added key doesn't belong to the user ",Ot="No user",Gt="Set a user and a authentication key to be able to fallow/unfollow",At="Restart the",Nt=" Clip",Ut="Channel content",Ft="Network is disconnect, the application can't work without INTERNET",Dt="Network connection reestablished",Rt=" Followers",Vt=", Can't fallow or unfallow ",Ht="Game content",Jt="Yes",qt="Are you sure you want to remove the user ",zt="Press Up to ",jt="Followed Games",Xt="Change between",Wt=" Back key then Enter",Yt=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"],Kt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],$t="Started ",Qt=" (PG Up/Down)",Zt="Videos",en=" Video",tn="Replay",nn="exiting in ",an='press "Return" to exit',on="Featured",sn="Created at ",dn="Open the Broadcast",cn="No Broadcast",rn="There is no Past Broadcast for this clip",ln="And because of that no chat",un=" is now",_n="Open the Hosting",fn="Player related",mn="Buffer size:",hn="A lower value here will make the player to start playing sooner, but it may cause re-buffer with will cause the player to pause to buffer.",pn="Live streams buffer",gn="Videos (Past Broadcast and Highlight) buffer",vn="Clips buffer",yn="General related",bn="Language",wn="Chat: Connecting to chat server..."+oa+"Chat: Connected."+oa+"Chat: Joined channel ",kn="Play from the start or from where you stop watching last time?",Mn=(Cn="From:"+oa)+"Start",En="Chat: The Chat has ended!",In=": Most recent",Sn=": Most views",xn="Set a authentication key to be able to see fallowed videos",Pn="Switch: Most recent or views",Ln="Enable",Tn="Disable",zn="The app was closed willing playing, restoring playback",Bn="Restore playback",On="When changing apps, the app may be closed by the system to free memory. In this case the app saves what it was playing and restores the playback when reopened",Gn="Chat font size",An="Change the chat lines font size, applies to text and emotes",Un="Videos animated thumbnails",Fn="Side panel: Back key twice",Dn="Size ",Rn="Brightness ",Vn="Forbidden content, this Live must be for Prime only subscribers or lock to Twitch official app only",Hn="Jump step ",Jn=" seconds",qn=" minutes",jn="Clock offset",Xn="Application language",Wn="Content language",Yn="All",Kn="Empty game fro this",Qn="Isn't possible to jump during a buffering",Zn="Chat is disabled, enable in side pannel settings",ea="This clip/video fail to load can't replay",aa="Chat backgroung brightness "}var ka=51,Ca=52,Ma=179,Ea=37,Ia=38,Sa=39,xa=40,Pa=13,La=49,Ta=8,Ba=13,Oa=32,Ga=46,Aa=0,Na=5,Ua=1e4,Fa=0,Da=!1,Ra=!1,Va=!1,Ha=!1,Ja="",qa="https://fgl27.github.io/SmartTwitchTV/release/index.min.html",za="elsu5d09k0xomu7cggx3qg5ybdwu7g",ja="https://id.twitch.tv/oauth2/token?";function Xa(e){vl.Users_Position=vl.Users_AddcodePosition,Fa=e,pi(),Lu(),$a()}function Wa(e,t,n,a){var i=new XMLHttpRequest,o=ja+"grant_type=refresh_token&client_id="+encodeURIComponent(Xl)+"&client_secret="+encodeURIComponent(za)+"&refresh_token="+encodeURIComponent(Ai[e].refresh_token)+"&redirect_uri="+qa;i.open("POST",o,!0),i.timeout=Ua,i.ontimeout=function(){},i.onreadystatechange=function(){4!==i.readyState||(200===i.status?Ka(i.responseText,e,n):Ya(e,t,n,a))},i.send(null)}function Ya(e,t,n,a){++t<10?Wa(e,t,n):a&&a()}function Ka(e,t,n){var a=JSON.parse(e);Ai[t].access_token=a.access_token,Ai[t].refresh_token=a.refresh_token,eo(),n&&n()}function $a(){var e=new XMLHttpRequest,t=ja+"grant_type=authorization_code&client_id="+encodeURIComponent(Xl)+"&client_secret="+encodeURIComponent(za)+"&code="+encodeURIComponent(Fa)+"&redirect_uri="+qa;e.open("POST",t,!0),e.timeout=Ua,e.ontimeout=function(){},e.onreadystatechange=function(){4!==e.readyState||(200===e.status?ei(e.responseText):Qa())},e.send(null)}function Qa(){++Aa<Na?$a():Za()}function Za(){Tu(),Vu(Bt),window.setTimeout(function(){Hu(),Cl=0,o_(),vl.Main_Go=cl,window.location=qa},4e3),Ai[vl.Users_Position].access_token=0,Ai[vl.Users_Position].refresh_token=0}function ei(e){var t=JSON.parse(e);Ai[vl.Users_Position].access_token=t.access_token,Ai[vl.Users_Position].refresh_token=t.refresh_token,pi(),ti()}function ti(){kf("https://api.twitch.tv/kraken?oauth_token="+Ai[vl.Users_Position].access_token,Ua,0,null,ni,ai)}function ni(e){var t=JSON.parse(e).token;t.user_name&&-1!==t.user_name.indexOf(Ai[vl.Users_Position].name)?(eo(),Cl=0,Tu(),Da=ME=!1,vl.Main_Go=cl,o_(),Vu(kt),window.setTimeout(function(){window.location=qa},3e3)):(Ai[vl.Users_Position].access_token=0,Ai[vl.Users_Position].refresh_token=0,Da=!1,Vu(Nn+Ai[vl.Users_Position].name),window.setTimeout(function(){Hu(),Cl=0,o_(),vl.Main_Go=cl,window.location=qa},4e3))}function ai(){++Aa<Na?(Ua+=500,ti()):Za()}function ii(){pi(),Ra=!1,oi()}function oi(){var e="https://api.twitch.tv/kraken/users/"+Ai[vl.Users_Position].id+"/follows/channels/"+Ja,t=new XMLHttpRequest;t.open("GET",e,!0),t.timeout=Ua,t.setRequestHeader(Wl,Xl),t.setRequestHeader(Yl,Ql),t.ontimeout=function(){},t.onreadystatechange=function(){4===t.readyState&&(200===t.status?si():404===t.status?di(t.responseText):ci())},t.send(null)}function si(){Da=!(Ra=!0),Ha?Ug():md()}function di(e){-1!==(JSON.parse(e).error+"").indexOf("Not Found")?(Da=Ra=!1,Ha?Ug():md()):ci()}function ci(){++Aa<Na?(Ua+=500,oi()):(Da=!1,Ha?Ug():md())}function ri(){pi(),li()}function li(){var e=new XMLHttpRequest;e.open("PUT","https://api.twitch.tv/kraken/users/"+Ai[vl.Users_Position].id+"/follows/channels/"+Ja,!0),e.timeout=Ua,e.setRequestHeader(Wl,Xl),e.setRequestHeader(Yl,Ql),e.setRequestHeader("Authorization","OAuth "+Ai[vl.Users_Position].access_token),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return Ra=!(Da=!1),void(Ha?Ug():md());401===e.status||403===e.status?Wa(vl.Users_Position,0,ri,null):ui()}},e.send(null)}function ui(){++Aa<Na&&(Ua+=500,li())}function _i(){pi(),fi()}function fi(){var e=new XMLHttpRequest;e.open("DELETE","https://api.twitch.tv/kraken/users/"+Ai[vl.Users_Position].id+"/follows/channels/"+Ja,!0),e.timeout=Ua,e.setRequestHeader(Wl,Xl),e.setRequestHeader(Yl,Ql),e.setRequestHeader("Authorization","OAuth "+Ai[vl.Users_Position].access_token),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(204===e.status)return Da=Ra=!1,void(Ha?Ug():md());401===e.status||403===e.status?Wa(vl.Users_Position,0,_i,null):mi()}},e.send(null)}function mi(){++Aa<Na&&(Ua+=500,fi())}function hi(){pi(),Va=!1,gi()}function pi(){Ua=1e4,Da=!(Aa=0)}function gi(){var e,t="https://api.twitch.tv/kraken/users/"+Ai[vl.Users_Position].id+"/subscriptions/"+Ja;if(cu){if(!(e=Android.mreadUrl(t,Ua,3,Ai[vl.Users_Position].access_token)))return void vi();if(200===(e=JSON.parse(e)).status)Da=!(Va=!0),Yv();else if(422===e.status)Da=Va=!1,Wv();else if(404===e.status){if(-1!==(JSON.parse(e.responseText).error+"").indexOf("Not Found"))return Da=Va=!1,void Wv();vi()}else 401===e.status||403===e.status?Wa(vl.Users_Position,0,hi,yi):vi()}else(e=new XMLHttpRequest).open("GET",t,!0),e.timeout=Ua,e.setRequestHeader(Wl,Xl),e.setRequestHeader(Yl,Ql),e.setRequestHeader("Authorization","OAuth "+Ai[vl.Users_Position].access_token),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState)if(200===e.status)Da=!(Va=!0),Yv();else if(422===e.status)Da=Va=!1,Wv();else if(404===e.status){if(-1!==(JSON.parse(e.responseText).error+"").indexOf("Not Found"))return Da=Va=!1,void Wv();vi()}else 401===e.status||403===e.status?Wa(vl.Users_Position,0,hi,yi):vi()},e.send(null)}function vi(){++Aa<Na?(Ua+=500,gi()):yi()}function yi(){Da=Va=!1,Wv()}function bi(e){pi(),wi(e,0)}function wi(e,t){var n="https://api.twitch.tv/kraken?oauth_token="+Ai[e].access_token,a=new XMLHttpRequest;a.open("GET",n,!0),a.timeout=1e4,a.ontimeout=function(){},a.onreadystatechange=function(){if(4===a.readyState){if(200===a.status)return void(JSON.parse(a.responseText).token.valid?Da=!1:(pi(),Wa(e,0,null,null)));400===a.status?(pi(),Wa(e,0,null,null)):ki(e,t)}},a.send(null)}function ki(e,t){++t<Na&&wi(e,t)}function Ci(){pi(),Mi()}function Mi(){var e=new XMLHttpRequest;e.open("PUT","https://api.twitch.tv/api/users/"+Ai[vl.Users_Position].name+"/follows/games/"+encodeURIComponent(vl.Main_gameSelected)+"?oauth_token="+Ai[vl.Users_Position].access_token,!0),e.timeout=1e4,e.setRequestHeader(Wl,Xl),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return wo=!0,void Oo();401===e.status||403===e.status?Wa(vl.Users_Position,0,Ci,null):Ei()}},e.send(null)}function Ei(){++Aa<Na&&(Ua+=500,Mi())}function Ii(){pi(),Si()}function Si(){var e=new XMLHttpRequest;e.open("DELETE","https://api.twitch.tv/api/users/"+Ai[vl.Users_Position].name+"/follows/games/"+encodeURIComponent(vl.Main_gameSelected)+"?oauth_token="+Ai[vl.Users_Position].access_token,!0),e.timeout=1e4,e.setRequestHeader(Wl,Xl),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(204===e.status)return wo=!1,void Oo();401===e.status||403===e.status?Wa(vl.Users_Position,0,Ii,null):xi()}},e.send(null)}function xi(){++Aa<Na&&(Ua+=500,Si())}function Pi(){pi(),Li()}function Li(){var e,t="https://api.twitch.tv/api/users/"+Ai[vl.Users_Position].name+"/follows/games/"+encodeURIComponent(vl.Main_gameSelected);(e=new XMLHttpRequest).open("GET",t,!0),e.timeout=1e4,e.setRequestHeader(Wl,Xl),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState)return 200===e.status?(wo=!0,void Oo()):404===e.status?(wo=!1,void Oo()):void Ti()},e.send(null)}function Ti(){++Aa<Na?(Ua+=500,Li()):(wo=!1,Oo())}var Bi=0,Oi=5,Gi=3500,Ai=[],Ni=null,Ui=!1,Fi=!1;function Di(){vl.Main_Go=Kr,Iu("top_bar_user","icon_center_focus"),Hu(),Dr.placeholder=M,Mu("add_user_scroll"),Hi()}function Ri(){qi(!1),document.body.removeEventListener("keydown",Vi),document.body.removeEventListener("keydown",zi),Su("top_bar_user","icon_center_focus"),Cu("add_user_scroll")}function Vi(e){if(!Ui&&!Fi&&vl.Main_Go===Kr)switch(e.keyCode){case La:zu()?qu():Yu()?Wu():(0<Ai.length&&vl.Main_Go!==cl?vl.Main_Go=vl.Main_Before:vl.Main_Go=Yr,Ri(),a_());break;case Ca:case ka:case Ma:case Pa:Hi()}}function Hi(){document.body.removeEventListener("keydown",Vi),document.body.addEventListener("keydown",zi,!1),Dr.placeholder=M,Dr.focus(),Fi=!0}function Ji(){if(null!==Dr){var e=Dr.cloneNode(!0);Dr.parentNode.replaceChild(e,Dr),Dr=document.getElementById("user_input")}}function qi(e){Dr.blur(),Ji(),document.body.removeEventListener("keydown",zi),Dr.placeholder=E+M,e&&document.body.addEventListener("keydown",Vi,!1),Fi=!1}function zi(e){if(!Ui&&vl.Main_Go===Kr)switch(e.keyCode){case La:zu()?qu():Yu()?Wu():(0<Ai.length&&vl.Main_Go!==cl?vl.Main_Go=vl.Main_Before:vl.Main_Go=Yr,Ri(),a_());break;case Ga:Dr.value="";break;case Ba:case xa:""!==Dr.value&&null!==Dr.value?no(Ni=zr&&!$i()?"testtwitch27":Dr.value)?(Tu(),Vu(u+Ni+ie),window.setTimeout(function(){Hu(),Hi()},1500)):(Gi=3500,Ui=!(Bi=0),Cu("add_user_scroll"),Lu(),ji()):Hi();break;case Ta:Dr.value=Dr.value.slice(0,-1);break;case Oa:Dr.value+=" "}}function ji(){kf("https://api.twitch.tv/kraken/users?login="+encodeURIComponent(Ni),Gi,2,null,Xi,Wi)}function Xi(e){JSON.parse(e)._total?(Dr.value="",document.body.removeEventListener("keydown",Vi),Qi(e)):Yi()}function Wi(){++Bi<Oi?(Gi+=500,ji()):Yi()}function Yi(){Ni=null,Tu(),Vu(ne),window.setTimeout(function(){Di()},1e3),Ui=!1}function Ki(){if(0<(Ai=vf("AddUser_UsernameArray",[])).length)for(var e=0;e<Ai.length;e++)Ai[e].access_token&&bi(e)}function $i(){return 0<Ai.length}function Qi(e){Ni=JSON.parse(e).users[0],Ai.push({name:Ni.name,id:Ni._id,access_token:0,refresh_token:0}),eo(),ME=!1,Ri(),IE(),Ui=!1}function Zi(e){var t=Ai.indexOf(Ai[e]);-1<t&&Ai.splice(t,1),0<Ai.length?(ME=!1,IE()):Di(),eo()}function eo(){pf("AddUser_UsernameArray",JSON.stringify(Ai))}function to(e){Ni=Ai[0],Ai[0]=Ai[e],Ai[e]=Ni,ME=!1,IE(),eo()}function no(e){return-1!==Ai.indexOf(e)}function ao(){return 0<Ai.length}var io=0,oo=0,so=!1,co=0,ro={},lo=[],uo=!1,_o=0,fo=5,mo=3500,ho=0,po=0,go=!1,vo=["ag_thumbdiv","ag_img","ag_infodiv","ag_displayname","ag_streamtitle","ag_streamgame","ag_viwers","ag_quality","ag_cell","agempty_","a_games_scroll"],yo=!1,bo=!1,wo=!1,ko=!1,Co=!1;function Mo(){vl.Main_CenterLablesVectorPos=3,vl.Main_Go=Qr,document.body.addEventListener("keydown",qo,!1),Iu("top_bar_game","icon_center_focus"),ku("label_side_panel","icon-arrow-circle-left",x),vl.Search_isSearching&&(r_(),xu("top_bar_user",n+l_(f+" '"+vl.Search_data+"'"))),xu("top_bar_game",w+l_(_+": "+vl.Main_gameSelected)),vl.Main_OldgameSelected===vl.Main_gameSelected&&yo?(v_(io),Mu(vo[10]),Ro(),o_()):Io()}function Eo(){yo&&-1===io&&(Jo(),oo=io=0,Iu(vo[0]+"0_"+oo,tu)),ku("label_side_panel","icon-ellipsis",Fn),xu("top_bar_game",f),document.body.removeEventListener("keydown",qo),Su("top_bar_game","icon_center_focus"),Cu(vo[10])}function Io(){null===vl.Main_OldgameSelected&&(vl.Main_OldgameSelected=vl.Main_gameSelected),m_("stream_table_a_game"),Cu(vo[10]),Lu(),Hu(),Co=yo=!1,ro={},cf=!(co=po=ho=0),io=oo=0,so=bo=!(lo=[]),Uu(),So(),xo()}function So(){p_(),uo=!0,_o=0,mo=3500}function xo(){var e=co+ho;e&&po-1<e&&(e=po-Ul,so=!0),kf("https://api.twitch.tv/kraken/streams?game="+encodeURIComponent(vl.Main_gameSelected)+"&limit="+Ul+"&offset="+e+(""!==Pl?"&broadcaster_language="+Pl:""),mo,2,null,Lo,Po)}function Po(){++_o<fo?(mo+=500,xo()):(uo=!1,co?(so=!0,To()):(cf=!1,Tu(),Vu(T)))}function Lo(e){var t=JSON.parse(e),n=t.streams.length;po=parseInt(t._total),n<Ul&&(so=!0);var a=co;go=!(co+=n);var i=n/Fl;0<n%Fl&&i++;var o,s,d,c,r,l,u=0,_=document.getElementById("stream_table_a_game");if(!Co){var f;for(Co=!0,d=document.createElement("tr"),c=0;c<3;c++)f=c?1===c?'<i class="icon-movie stream_channel_fallow_icon"></i>'+ya+U:"":'<i class="icon-movie-play stream_channel_fallow_icon"></i>'+ya+ya+Zt,(Sl=document.createElement("td")).setAttribute("id",vo[8]+"y_"+c),Sl.className="stream_cell",Sl.innerHTML='<div id="'+vo[0]+"y_"+c+'" class="stream_thumbnail_fallow_game" ><div id="'+vo[3]+"y_"+c+'" class="stream_channel_fallow_game">'+f+"</div></div>",d.appendChild(Sl);_.appendChild(d)}for(c=0;c<i;c++){for(s=a/Fl+c,d=document.createElement("tr"),o=0;o<Fl&&u<n;o++,u++)l=(r=t.streams[u]).channel._id,ro[l]?o--:(ro[l]=1,d.appendChild(E_(s,s+"_"+o,[r.channel.name,l],vo,[r.preview.template.replace("{width}x{height}",Zl),Qu(JSON.stringify(r.stream_type))+r.channel.display_name,r.channel.status,r.game,y+Ep(r.created_at)+b+", "+h+Ku(r.viewers)+H,$u(r.video_height,r.average_fps,r.channel.broadcaster_language)])));for(;o<Fl;o++)so&&!bo&&(bo=!0,co=s*Fl+o),d.appendChild(w_(vo[9]+s+"_"+o)),lo.push(vo[9]+s+"_"+o);_.appendChild(d)}To()}function To(){if(yo){if(h_(fu),0<lo.length&&!so)return So(),void Uo();Fu(oo,io,Fl,co),lo=[]}else Bo(),go?(Vu(B+Q),io=-1,Ho()):(yo=!0,h_(fu),Ro(),o_()),Mu(vo[10]),cf=!1,Tu();uo=!1}function Bo(){ko?(wo=!0,Oo()):$i()?Pi():(wo=!1,Oo())}function Oo(){xu(vo[3]+"y_2",wo?'<i class="icon-heart" style="color: #00b300; font-size: 100%; text-shadow: #FFFFFF 0 0 10px, #FFFFFF 0 0 10px, #FFFFFF 0 0 8px;"></i>'+ya+ya+St:'<i class="icon-heart-o" style="color: #FFFFFF; font-size: 100%; text-shadow: #000000 0 0 10px, #000000 0 0 10px, #000000 0 0 8px;"></i>'+ya+ya+($i()?xt:Ot))}function Go(){$i()&&Ai[vl.Users_Position].access_token?wo?Ii():Ci():(Vu(Gt),window.setTimeout(function(){go&&vl.Main_Go===Qr?Vu(B+Q):Hu()},2e3))}function Ao(){oo?1===oo?(vl.Main_Go=ml,vl.Main_OldgameSelected=vl.Main_gameSelected,No(),i_()):Go():(vl.Main_Go=fl,vl.Main_OldgameSelected=vl.Main_gameSelected,No(),i_())}function No(){yo&&-1===io&&(Jo(),oo=io=0,Iu(vo[0]+"0_"+oo,tu)),document.body.removeEventListener("keydown",qo),Cu(vo[10])}function Uo(){Ru(lo.length);var e=co+ho;e&&po-1<e&&(e=po-jl,so=!0),kf("https://api.twitch.tv/kraken/streams?game="+encodeURIComponent(vl.Main_gameSelected)+"&limit="+jl+"&offset="+e+(""!==Pl?"&broadcaster_language="+Pl:""),mo,2,null,Do,Fo)}function Fo(){++_o<fo?(mo+=500,Uo()):(so=!0,co-=lo.length,lo=[],To())}function Do(e){var t,n,a=JSON.parse(e),i=a.streams.length,o=0,s=0,d=[];for(po=parseInt(a._total),i<jl&&(so=!0);o<lo.length&&s<i;o++,s++)n=(t=a.streams[s]).channel._id,ro[n]?o--:(ro[n]=1,I_(lo[o],[t.channel.name,n],[t.preview.template.replace("{width}x{height}",Zl),Qu(JSON.stringify(t.stream_type))+t.channel.display_name,t.channel.status,t.game,y+Ep(t.created_at)+b+", "+h+Ku(t.viewers)+H,$u(t.video_height,t.average_fps,t.channel.broadcaster_language)],vo),d.push(o));for(o=d.length-1;-1<o;o--)lo.splice(d[o],1);ho+=s,so&&(co-=lo.length,lo=[]),To()}function Ro(){io<0?Ho():(A_(io,oo,vo,Fl,co),co/Fl<io+Dl&&!so&&!uo&&(So(),xo()),wl&&Vo())}function Vo(){-1<io&&co?J_(io+"_"+oo,vo):Jo()}function Ho(){Iu(vo[0]+"y_"+oo,tu)}function Jo(){Su(vo[0]+"y_"+oo,tu)}function qo(e){var t;if(!cf&&!O_())switch(B_(),e.keyCode){case La:Yu()?Wu():zu()?qu():(vl.Main_OldgameSelected=vl.Main_gameSelected,Vo(),Jo(),lf(qo));break;case Ea:if(-1===io)Jo(),--oo<0&&(oo=2),Ho();else if(io||oo){if(Zu(io,oo-1,vo[0]))Vo(),oo--,Ro();else for(t=Fl-1;-1<t;t--)if(Zu(io-1,t,vo[0])){Vo(),io--,oo=t,Ro();break}}else Vo(),Jo(),io=-1,oo=2,Ho();break;case Sa:-1===io?(Jo(),2<++oo?(oo=0,go?Ho():(io=0,Ro())):Ho()):Zu(io,oo+1,vo[0])?(Vo(),oo++,Ro()):Zu(io+1,0,vo[0])&&(Vo(),io++,oo=0,Ro());break;case Ia:if(-1!==io||go)if(io){for(t=0;t<Fl;t++)if(Zu(io-1,oo-t,vo[0])){Vo(),io--,oo-=t,Ro();break}}else Vo(),io=-1,Ho();else io=0,Jo(),Ro();break;case xa:if(-1!==io||go){for(t=0;t<Fl;t++)if(Zu(io+1,oo-t,vo[0])){Vo(),io++,oo-=t,Ro();break}}else io=0,Jo(),Ro();break;case Ca:case ka:case Ma:case Pa:-1!==io?U_(io+"_"+oo,vo,qo):Ao()}}var zo=0,jo=0,Xo=!1,Wo=0,Yo={},Ko=[],$o=!1,Qo=0,Zo=5,es=3500,ts=0,ns=0,as=!1,is=!1,os="week",ss=2,ds=!1,cs=["agv_thumbdiv","agv_img","agv_infodiv","agv_title","agv_streamon","agv_duration","agv_viwers","agv_quality","agv_cell","gvempty_","a_games_vod_scroll","agv_game"],rs=!1,ls=!1,us="";function _s(){vl.Main_CenterLablesVectorPos=3,vl.Main_Go=fl,Iu("top_bar_game","icon_center_focus"),document.body.addEventListener("keydown",Ss,!1),ku("label_side_panel","icon-arrow-circle-left",x),us===vl.Main_gameSelected&&rs?(v_(zo),Mu(cs[10]),xs(),Cs(),o_()):ms()}function fs(){rs&&Ms(),document.body.removeEventListener("keydown",Ss),Su("top_bar_game","icon_center_focus"),xu("top_bar_game",f),ku("label_side_panel","icon-ellipsis",Fn),Cu(cs[10])}function ms(){rs&&Ms(),m_("stream_table_a_game_vod"),Cu(cs[10]),Lu(),xs(),us=vl.Main_gameSelected,Hu(),ds=rs=!1,cf=!(is=!(Ko=[])),zo=jo=Wo=ns=ts=0,Xo=!(Yo={}),Uu(),hs(),ps()}function hs(){p_(),$o=!0,Qo=0,es=3500}function ps(){var e=Wo+ts;e&&ns-1<e&&(e=ns-Ul,Xo=!0),kf("https://api.twitch.tv/kraken/videos/top?game="+encodeURIComponent(vl.Main_gameSelected)+"&limit="+Ul+"&broadcast_type="+(ls?"highlight":"archive")+"&sort=views&offset="+e+"&period="+os+(""!==Pl?"&language="+Pl:""),es,2,null,vs,gs)}function gs(){++Qo<Zo?(es+=500,ps()):($o=!1,Wo?(Xo=!0,ys()):(cf=!1,Tu(),Vu(T)))}function vs(e){var t=JSON.parse(e),n=t.vods.length;ns=parseInt(t._total),n<Ul&&(Xo=!0);var a=Wo;as=!(Wo+=n);var i=n/Fl;0<n%Fl&&i++;var o,s,d,c,r,l=0,u=document.getElementById("stream_table_a_game_vod");if(!ds){var _;for(ds=!0,d=document.createElement("tr"),f=0;f<2;f++)_=f?'<i class="icon-history stream_channel_fallow_icon"></i>'+ya+ya+m:'<i class="icon-movie-play stream_channel_fallow_icon"></i>'+ya+ya+p,(Sl=document.createElement("td")).setAttribute("id",cs[8]+"y_"+f),Sl.className="stream_cell",Sl.innerHTML='<div id="'+cs[0]+"y_"+f+'" class="stream_thumbnail_channel_vod" ><div id="'+cs[3]+"y_"+f+'" class="stream_channel_fallow_game">'+_+"</div></div>",d.appendChild(Sl);u.appendChild(d)}for(var f=0;f<i;f++){for(s=a/Fl+f,d=document.createElement("tr"),o=0;o<Fl&&l<n;o++,l++)r=(c=t.vods[l])._id,-1!==(c.preview.template+"").indexOf("404_processing")||Yo[r]?o--:(Yo[r]=1,d.appendChild(oS(s,s+"_"+o,[r,c.length,c.channel.broadcaster_language,c.game,c.channel.name,c.increment_view_count_url],[c.preview.template.replace("{width}x{height}",Zl),c.channel.display_name,D+u_(c.created_at),xS.parse(c.title)+oa+$t+g+c.game,Ku(c.views)+V,$u(c.resolutions.chunked.slice(-4),parseInt(c.fps.chunked)||0,c.channel.broadcaster_language),R+Cp(c.length),c.animated_preview_url],cs)));for(;o<Fl;o++)Xo&&!is&&(is=!0,Wo=s*Fl+o),d.appendChild(w_(cs[9]+s+"_"+o)),Ko.push(cs[9]+s+"_"+o);u.appendChild(d)}ys()}function ys(){if(rs?h_(fu):(as?Vu(B+(ls?N:A)+O+S):(rs=!0,h_(fu),Cs(),o_()),Mu(cs[10]),cf=!1,Tu()),0<Ko.length&&!Xo)return hs(),void bs();Fu(jo,zo,Fl,Wo),$o=!(Ko=[])}function bs(){Ru(Ko.length);var e=Wo+ts;e&&ns-1<e&&(e=ns-jl,Xo=!0),kf("https://api.twitch.tv/kraken/videos/top?game="+encodeURIComponent(vl.Main_gameSelected)+"&limit="+jl+"&broadcast_type="+(ls?"highlight":"archive")+"&sort=views&offset="+e+"&period="+os+(""!==Pl?"&language="+Pl:""),es,2,null,ks,ws)}function ws(){++Qo<Zo?(es+=500,bs()):(Xo=!0,Ko=[],ys())}function ks(e){var t,n,a=JSON.parse(e),i=a.vods.length,o=0,s=0,d=[];for(ns=parseInt(a._total);o<Ko.length&&s<i;o++,s++)n=(t=a.vods[s])._id,-1!==(t.preview.template+"").indexOf("404_processing")||Yo[n]?o--:(Yo[n]=1,dS(Ko[o],[n,t.length,t.channel.broadcaster_language,t.game,t.channel.name,t.increment_view_count_url],[t.preview.template.replace("{width}x{height}",Zl),t.channel.display_name,D+u_(t.created_at),xS.parse(t.title)+oa+$t+g+t.game,Ku(t.views)+V,$u(t.resolutions.chunked.slice(-4),parseInt(t.fps.chunked)||0,t.channel.broadcaster_language),R+Cp(t.length),t.animated_preview_url],cs),d.push(o));for(o=d.length-1;-1<o;o--)Ko.splice(d[o],1);ts+=s,Xo&&(Wo-=Ko.length,Ko=[]),ys()}function Cs(){zo<0?Es():(A_(zo,jo,cs,Fl,Wo),gS(cs,zo+"_"+jo),Wo/Fl<zo+Dl&&!Xo&&!$o&&(hs(),ps()),wl&&Ms())}function Ms(){window.clearInterval(PI),-1<zo&&Wo?(Mu(cs[1]+zo+"_"+jo),J_(zo+"_"+jo,cs)):Is()}function Es(){var e=1<jo?1:jo;Iu(cs[0]+"y_"+e,tu)}function Is(){var e=1<jo?1:jo;Su(cs[0]+"y_"+e,tu)}function Ss(e){var t;if(!cf&&!O_())switch(B_(),e.keyCode){case La:Yu()?Wu():zu()?qu():(Ms(),lf(Ss));break;case Ea:if(-1===zo)Is(),--jo<0&&(jo=1),Es();else if(zo||jo){if(Zu(zo,jo-1,cs[0]))Ms(),jo--,Cs();else for(t=Fl-1;-1<t;t--)if(Zu(zo-1,t,cs[0])){Ms(),zo--,jo=t,Cs();break}}else Ms(),Is(),zo=-1,jo=1,Es();break;case Sa:-1===zo?(Is(),1<++jo?(jo=0,as?Es():(zo=0,Cs())):Es()):Zu(zo,jo+1,cs[0])?(Ms(),jo++,Cs()):Zu(zo+1,0,cs[0])&&(Ms(),zo++,jo=0,Cs());break;case Ia:if(-1!==zo||as)if(zo){for(t=0;t<Fl;t++)if(Zu(zo-1,jo-t,cs[0])){Ms(),zo--,jo-=t,Cs();break}}else Ms(),zo=-1,Es();else zo=0,Is(),Cs();break;case xa:if(-1!==zo||as){for(t=0;t<Fl;t++)if(Zu(zo+1,jo-t,cs[0])){Ms(),zo++,jo-=t,Cs();break}}else zo=0,Is(),Cs();break;case Ca:case ka:case Ma:case Pa:-1===zo?(0===jo?pf("AGameVod_highlight",(ls=!ls)?"true":"false"):4<++ss&&(ss=1),ms()):R_(zo+"_"+jo,cs,Ss)}}function xs(){1===ss?(xu("top_bar_game",w+l_((ls?N:A)+ce+": "+vl.Main_gameSelected)),os="day"):2===ss?(xu("top_bar_game",w+l_((ls?N:A)+re+": "+vl.Main_gameSelected)),os="week"):3===ss?(xu("top_bar_game",w+l_((ls?N:A)+le+": "+vl.Main_gameSelected)),os="month"):4===ss&&(xu("top_bar_game",w+l_((ls?N:A)+ue+": "+vl.Main_gameSelected)),os="all"),pf("AGameVod_periodNumber",ss)}var Ps,Ls=0,Ts=0,Bs=!1,Os=0,Gs=0,As=5,Ns=3500,Us=0,Fs=!1,Ds=!1,Rs=["cc_thumbdiv","cc_img","cc_infodiv","cc_name","cc_createdon","cc_game","cc_viwers","cc_duration","cc_cell","sccempty_","channel_content_scroll"],Vs=!1,Hs="",Js=null,qs="",zs="",js="",Xs="",Ws="",Ys={},Ks=!1;function $s(){vl.Main_CenterLablesVectorPos=1,vl.Main_Go=ol,Ks&&!vl.Search_isSearching&&vl.Main_selectedChannel_id&&wd(),Hs!==vl.Main_selectedChannel&&(Vs=!1),r_(),vl.Main_selectedChannelDisplayname=vl.Main_selectedChannelDisplayname.replace(Y,""),Pu("top_bar_user",vl.Main_selectedChannelDisplayname),Pu("top_bar_game",Ut),document.body.addEventListener("keydown",kd,!1),Ha=!1,Vs?(v_(Ls),Mu(Rs[10]),pd(),gd(),o_()):Zs()}function Qs(){c_(),document.body.removeEventListener("keydown",kd),Cu(Rs[10])}function Zs(){m_("stream_table_channel_content"),Cu(Rs[10]),Lu(),Hu(),Hs=vl.Main_selectedChannel,Xs="",Bs=Fs=Vs=!1,Ps=void(Ls=Ts=Os=Us=0),ed(),td()}function ed(){cf=!0,Gs=0,Ns=3500}function td(){kf("https://api.twitch.tv/kraken/streams/"+encodeURIComponent(void 0!==Ps?Ps:vl.Main_selectedChannel_id),Ns,2,null,nd,ad)}function nd(e){null!==JSON.parse(e).stream?(Js=e,ed(),dd()):Ps?(Js=null,ed(),dd()):(ed(),id())}function ad(){++Gs<As?(Ns+=500,td()):(Js=null,ed(),dd())}function id(){kf("https://tmi.twitch.tv/hosts?include_logins=1&host="+encodeURIComponent(vl.Main_selectedChannel_id),Ns,1,null,sd,od,!0)}function od(){++Gs<As?(Ns+=500,id()):(Js=null,ed(),dd())}function sd(e){var t=JSON.parse(e);void 0!==(Ps=t.hosts[0].target_id)?(ed(),td()):(Js=null,ed(),dd())}function dd(){kf("https://api.twitch.tv/kraken/channels/"+vl.Main_selectedChannel_id,sv,2,null,cd,rd)}function cd(e){var t=JSON.parse(e);qs=t.views,zs=t.followers,js=t.description,vl.Main_selectedChannelLogo=t.logo,ld()}function rd(){++Gs<As?(Ns+=500,dd()):(js=zs=qs="",vl.Main_selectedChannelLogo=_u,ld())}function ld(){var e=document.createElement("tr"),t=document.createElement("tbody"),n=0,a=document.getElementById("stream_table_channel_content");if((Sl=document.createElement("tr")).className="follower_header",Sl.innerHTML='<div class="follower_header">'+xS.parse(js)+"</div>",a.appendChild(t),a.appendChild(Sl),null!==Js){var i=JSON.parse(Js);if(null!==i.stream){var o=void 0!==Ps?vl.Main_selectedChannelDisplayname+ae:"",s=i.stream;e.appendChild(ud("0_"+n,s.channel.name,s.preview.template,xS.parse(s.channel.status),s.game,Qu(JSON.stringify(s.stream_type))+o+s.channel.display_name,y+Ep(s.created_at)+b+", "+h+Ku(s.viewers)+H,$u(s.video_height,s.average_fps,s.channel.broadcaster_language))),n++}else Fs=!0}else Fs=!0;e.appendChild(_d("0_"+n,vl.Main_selectedChannelDisplayname,vl.Main_selectedChannelDisplayname+A,"movie-play")),n++,e.appendChild(_d("0_"+n,vl.Main_selectedChannelDisplayname,vl.Main_selectedChannelDisplayname+U,"movie")),n<2&&(n++,e.appendChild(w_(Rs[9]+"0_"+n))),a.appendChild(e),(e=document.createElement("tr")).appendChild(fd("1_0",vl.Main_selectedChannelDisplayname,vl.Main_selectedChannelDisplayname,vl.Main_selectedChannelLogo)),a.appendChild(e),hd()}function ud(e,t,n,a,i,o,s,d){return Xs=n.replace("{width}x{height}",Zl),(Sl=document.createElement("td")).setAttribute("id",Rs[8]+e),Sl.setAttribute(nu,t),Sl.className="stream_cell",Sl.innerHTML='<div id="'+Rs[0]+e+'" class="stream_thumbnail_video" ><img id="'+Rs[1]+e+'" class="stream_img"></div><div id="'+Rs[2]+e+'" class="stream_text"><div id="'+Rs[3]+e+'" class="stream_channel" style="width: 66%; display: inline-block;"><i class="icon-circle" style="color: '+(void 0!==Ps?"#FED000":"red")+'; font-size: 90%; aria-hidden="true"></i> '+ya+o+'</div><div id="'+Rs[7]+e+'"class="stream_info" style="width:33%; float: right; text-align: right; display: inline-block;">'+d+'</div><div id="'+Rs[4]+e+'"class="stream_info">'+a+'</div><div id="'+Rs[5]+e+'"class="stream_info">'+g+i+'</div><div id="'+Rs[6]+e+'"class="stream_info">'+s+"</div></div>",Sl}function _d(e,t,n,a){return(Sl=document.createElement("td")).setAttribute("id",Rs[8]+e),Sl.setAttribute(nu,t),Sl.className="stream_cell",Sl.innerHTML='<div id="'+Rs[0]+e+'" class="stream_thumbnail_video" ><div id="'+Rs[1]+e+'" class="stream_channel_content_icon"><i class="icon-'+a+'"></i></div></div><div id="'+Rs[2]+e+'" class="stream_text"><div id="'+Rs[3]+e+'" class="stream_channel" style="text-align: center">'+n+"</div></div>",Sl}function fd(e,t,n,a){return Ws=a,(Sl=document.createElement("td")).setAttribute("id",Rs[8]+e),Sl.setAttribute(nu,t),Sl.className="stream_cell",Sl.innerHTML='<div id="'+Rs[0]+e+'" class="stream_thumbnail_video" ><div id="schannel_cont_heart" style="position: absolute; top: 5%; left: 6%;"></div><img id="'+Rs[1]+e+'" class="stream_img_fallow"></div><div id="'+Rs[2]+e+'" class="stream_text"><div id="'+Rs[3]+e+'" class="stream_channel">'+n+'</div><div id="'+Rs[5]+e+'"class="stream_info">'+Ku(qs)+V+'</div><div id="'+Rs[6]+e+'"class="stream_info" >'+Ku(zs)+Rt+"</div></div>",Sl}function md(){Ra?(xu("schannel_cont_heart",'<i class="icon-heart" style="color: #00b300; font-size: 600%; text-shadow: #FFFFFF 0 0 10px, #FFFFFF 0 0 10px, #FFFFFF 0 0 8px;"></i>'),Pu(Rs[3]+"1_0",vl.Main_selectedChannelDisplayname+St)):(xu("schannel_cont_heart",'<i class="icon-heart-o" style="color: #FFFFFF; font-size: 600%; text-shadow: #000000 0 0 10px, #000000 0 0 10px, #000000 0 0 8px;"></i>'),$i()?Pu(Rs[3]+"1_0",vl.Main_selectedChannelDisplayname+xt):Pu(Rs[3]+"1_0",vl.Main_selectedChannelDisplayname+Vt))}function hd(){Vs||(Vs=!0,""!==Xs&&hu(document.getElementById(Rs[1]+"0_0"),Xs,fu),hu(document.getElementById(Rs[1]+"1_0"),Ws,_u),gd(),o_(),Mu(Rs[10]),Tu()),pd(),cf=!1}function pd(){Ds?md():$i()?(Ja=vl.Main_selectedChannel_id,Ha=!1,ii()):(Ra=!1,md())}function gd(){Iu(Rs[0]+Ls+"_"+(Ls?0:Ts),tu),wl&&vd(),L_()}function vd(){J_(Ls+"_"+(Ls?0:Ts),Rs)}function yd(){if(Ls)$i()&&Ai[vl.Users_Position].access_token?(Ha=!1,Ja=vl.Main_selectedChannel_id,Ra?_i():ri()):(Vu(Gt),window.setTimeout(Hu,2e3));else{document.body.removeEventListener("keydown",kd),Cu(Rs[10]);var e=Fs?1:0;Ts===0-e?(vl.Play_selectedChannel=document.getElementById(Rs[8]+Ls+"_"+Ts).getAttribute(nu),vl.Play_selectedChannelDisplayname=document.getElementById(Rs[3]+Ls+"_"+Ts).textContent,-1!==vl.Play_selectedChannelDisplayname.indexOf(ae)?(vl.Play_isHost=!0,vl.Play_DisplaynameHost=vl.Play_selectedChannelDisplayname,vl.Play_selectedChannelDisplayname=vl.Play_selectedChannelDisplayname.split(ae)[1],vl.Play_selectedChannel_id=Ps):vl.Play_selectedChannel_id=vl.Main_selectedChannel_id,vl.Play_gameSelected=document.getElementById(Rs[5]+Ls+"_"+Ts).textContent.split(g)[1],j_(F_)):Ts===1-e?j_(Yd):Ts===2-e&&(Ly=ab,j_(Ay))}}function bd(){Ys={"Main_values.Main_selectedChannel_id":vl.Main_selectedChannel_id,"Main_values.Main_selectedChannelLogo":vl.Main_selectedChannelLogo,"Main_values.Main_selectedChannel":vl.Main_selectedChannel,"Main_values.Main_selectedChannelDisplayname":vl.Main_selectedChannelDisplayname,ChannelContent_UserChannels:Ds,"Main_values.Main_BeforeChannel":vl.Main_BeforeChannel}}function wd(){vl.Main_selectedChannel_id=vl.Main_selectedChannel_id,vl.Main_selectedChannelLogo=vl.Main_selectedChannelLogo,vl.Main_selectedChannel=vl.Main_selectedChannel,vl.Main_selectedChannelDisplayname=vl.Main_selectedChannelDisplayname,Ds=Ys.ChannelContent_UserChannels,vl.Main_BeforeChannel=vl.Main_BeforeChannel,Ks=!(Ys={})}function kd(e){if(!cf&&!O_())switch(B_(),e.keyCode){case La:Yu()?Wu():zu()?qu():(vd(),lf(kd));break;case Ea:Ls||(vd(),--Ts<0&&(Ts=Fs?1:2),gd());break;case Sa:Ls||(vd(),(Fs?1:2)<++Ts&&(Ts=0),gd());break;case Ia:case xa:vd(),Ls=Ls?0:1,gd();break;case Ca:case ka:case Ma:case Pa:yd()}}var Cd=0,Md=0,Ed=!1,Id=0,Sd={},xd=[],Pd=!1,Ld=0,Td=5,Bd=3500,Od=0,Gd=0,Ad=0,Nd=!1,Ud=!1,Fd="",Dd=!1,Rd=["cv_thumbdiv","cv_img","cv_infodiv","cv_title","cv_streamon","cv_duration","cv_viwers","cv_quality","cv_cell","cvempty_","channel_vod_scroll","cv_game"],Vd=!1,Hd=!1,Jd="",qd="",zd="",jd="",Xd="",Wd=0;function Yd(){vl.Main_CenterLablesVectorPos=1,vl.Main_Go=sl,!vl.Search_isSearching&&vl.Main_selectedChannel_id&&wd(),vl.Main_selectedChannel!==Jd&&(Vd=!1),r_(),ku("label_side_panel","icon-arrow-circle-left",x),Pu("top_bar_user",vl.Main_selectedChannelDisplayname),document.body.addEventListener("keydown",lc,!1),Vd?(v_(Cd),Pu("top_bar_game",Hd?N:A),Mu(Rd[10]),sc(),o_()):$d()}function Kd(){Vd&&dc(),c_(),document.body.removeEventListener("keydown",lc),Cu(Rd[10])}function $d(){Vd&&dc(),m_("stream_table_channel_vod"),Cu(Rd[10]),Pu("top_bar_game",Hd?N:A),Lu(),Hu(),Jd=vl.Main_selectedChannel,Dd=Vd=!1,cf=!(Ud=!(xd=[])),Cd=Md=Id=Gd=Od=0,Ed=!(Sd={}),Uu(),Qd(),Zd()}function Qd(){p_(),Pd=!0,Ld=0,Bd=3500}function Zd(){var e=Id+Od;e&&Gd-1<e&&(e=Gd-Ul,Ed=!0),kf("https://api.twitch.tv/kraken/channels/"+encodeURIComponent(vl.Main_selectedChannel_id)+"/videos?limit="+Ul+"&broadcast_type="+(Hd?"highlight":"archive")+"&sort=time&offset="+e,Bd,2,null,tc,ec)}function ec(){++Ld<Td?(Bd+=500,Zd()):(Pd=!1,Id?(Ed=!0,nc()):(cf=!1,Tu(),Vu(T)))}function tc(e){var t=JSON.parse(e),n=t.videos.length;Gd=parseInt(t._total),n<Ul&&(Ed=!0);var a=Id;Nd=!(Id+=n);var i=n/Fl;0<n%Fl&&i++;var o,s,d,c,r,l,u,_=0,f=document.getElementById("stream_table_channel_vod");if(!Dd){Dd=!0,d=document.createElement("tr");var m='<i class="icon-movie-play stream_channel_fallow_icon"></i>'+ya+ya+p;(Sl=document.createElement("td")).setAttribute("id",Rd[8]+"y_0"),Sl.className="stream_cell",Sl.innerHTML='<div id="'+Rd[0]+'y_0" class="stream_thumbnail_channel_vod" ><div id="'+Rd[3]+'y_0" class="stream_channel_fallow_game">'+m+"</div></div>",d.appendChild(Sl),f.appendChild(d)}for(var h=0;h<i;h++){for(s=a/Fl+h,d=document.createElement("tr"),o=0;o<Fl&&_<n;o++,_++)r=(c=t.videos[_])._id,l=-1!==((u=c.preview.template)+"").indexOf("404_processing"),s||o||!l||(l=!1,u=fu),l||Sd[r]?o--:(Sd[r]=1,d.appendChild(oS(s,s+"_"+o,[r,c.length,c.channel.broadcaster_language,c.game,c.channel.name,c.increment_view_count_url],[u.replace("{width}x{height}",Zl),xS.parse(c.title),D+u_(c.created_at),$t+g+c.game,Ku(c.views)+V,$u(c.resolutions.chunked.slice(-4),parseInt(c.fps.chunked)||0,c.channel.broadcaster_language),R+Cp(c.length),c.animated_preview_url],Rd)));for(;o<Fl;o++)Ed&&!Ud&&(Ud=!0,Id=s*Fl+o),d.appendChild(w_(Rd[9]+s+"_"+o)),xd.push(Rd[9]+s+"_"+o);f.appendChild(d)}nc()}function nc(){if(Vd?(Fu(Md,Cd,Fl,Id),h_(fu)):(Nd?Vu(B+(Hd?N:A)+O+S):(Vd=!0,h_(fu),sc(),o_()),Mu(Rd[10]),cf=!1,Tu()),0<xd.length&&!Ed)return Qd(),void ac();Pd=!(xd=[])}function ac(){Ru(xd.length);var e=Id+Od;e&&Gd-1<e&&(e=Gd-jl,Ed=!0),kf("https://api.twitch.tv/kraken/channels/"+encodeURIComponent(vl.Main_selectedChannel_id)+"/videos?limit="+jl+"&broadcast_type="+(Hd?"highlight":"archive")+"&sort=time&offset="+e,Bd,2,null,oc,ic)}function ic(){++Ld<Td?(Bd+=500,ac()):(Ed=!0,Id-=xd.length,xd=[],nc())}function oc(e){var t,n,a=JSON.parse(e),i=a.videos.length,o=0,s=0,d=[];for(Gd=parseInt(a._total);o<xd.length&&s<i;o++,s++)n=(t=a.videos[s])._id,-1!==(t.preview.template+"").indexOf("404_processing")||Sd[n]?o--:(Sd[n]=1,dS(xd[o],[n,t.length,t.channel.broadcaster_language,t.game,t.channel.name,t.increment_view_count_url],[t.preview.template.replace("{width}x{height}",Zl),xS.parse(t.title),D+u_(t.created_at),$t+g+t.game,Ku(t.views)+V,$u(t.resolutions.chunked.slice(-4),parseInt(t.fps.chunked)||0,t.channel.broadcaster_language),R+Cp(t.length),t.animated_preview_url],Rd),d.push(o));for(o=d.length-1;-1<o;o--)xd.splice(d[o],1);Od+=s,Ed&&(Id-=xd.length,xd=[]),nc()}function sc(){Cd<0?cc():(A_(Cd,Md,Rd,Fl,Id),gS(Rd,Cd+"_"+Md),Id/Fl<Cd+Dl&&!Ed&&!Pd&&(Qd(),Zd()),wl&&dc())}function dc(){window.clearInterval(PI),-1<Cd&&Id?(Mu(Rd[1]+Cd+"_"+Md),J_(Cd+"_"+Md,Rd)):rc()}function cc(){Iu(Rd[0]+"y_0",tu)}function rc(){Su(Rd[0]+"y_0",tu)}function lc(e){var t;if(!cf&&!O_())switch(B_(),e.keyCode){case La:Yu()?Wu():zu()?qu():(dc(),lf(lc));break;case Ea:if(Zu(Cd,Md-1,Rd[0]))dc(),Md--,sc();else for(t=Fl-1;-1<t;t--)if(Zu(Cd-1,t,Rd[0])){dc(),Cd--,Md=t,sc();break}break;case Sa:Zu(Cd,Md+1,Rd[0])?(dc(),Md++,sc()):Zu(Cd+1,0,Rd[0])&&(dc(),Cd++,Md=0,sc());break;case Ia:if(-1!==Cd||Nd)if(Cd){for(t=0;t<Fl;t++)if(Zu(Cd-1,Md-t,Rd[0])){dc(),Cd--,Md-=t,sc();break}}else dc(),Cd=-1,cc();else Cd=0,rc(),sc();break;case xa:if(-1!==Cd||Nd){for(t=0;t<Fl;t++)if(Zu(Cd+1,Md-t,Rd[0])){dc(),Cd++,Md-=t,sc();break}}else Cd=0,rc(),sc();break;case Ca:case ka:case Ma:case Pa:-1===Cd?(pf("ChannelVod_highlight",(Hd=!Hd)?"true":"false"),$d()):R_(Cd+"_"+Md,Rd,lc)}}var uc,_c,fc,mc,hc=0,pc=10,gc=!1,vc=0,yc=null,bc=!1,wc=0,kc={},Cc={};function Mc(){Vc(),vl.Play_ChatForceDisable?(Xc||cr(),bc=!1,j_(function(){Ec(vc=(new Date).getTime())})):Gr()}function Ec(e){hc=0,Ic(e)}function Ic(e){var t="https://badges.twitch.tv/v1/badges/channels/"+vl.Play_selectedChannel_id+"/display",n=new XMLHttpRequest;n.open("GET",t,!0),n.timeout=1e4,n.ontimeout=function(){},n.onreadystatechange=function(){if(4===n.readyState){if(200===n.status)return void(vc===e&&xc(n.responseText,e));vc===e&&Sc(e)}},n.send(null)}function Sc(e){hc++,vc===e&&(hc<pc?Ic(e):_c=window.setTimeout(function(){Ic(e)},1e3))}function xc(e,t){IS(JSON.parse(e).badge_sets).forEach(function(t){t.versions.forEach(function(e){SS(t.type,e.type,e.image_url_4x,zc)})}),kc[vl.Play_selectedChannel_id]?vc===t&&Oc():Pc(t)}function Pc(e){hc=0,Lc(e)}function Lc(e){var t="https://api.betterttv.net/2/channels/"+encodeURIComponent(vl.Play_selectedChannel),n=new XMLHttpRequest;n.open("GET",t,!0),n.timeout=1e4,n.ontimeout=function(){},n.onreadystatechange=function(){4===n.readyState&&(200===n.status?vc===e&&Bc(n.responseText,e):404===n.status?(kc[vl.Play_selectedChannel_id]=1,vc===e&&Oc()):vc===e&&Tc(e))},n.send(null)}function Tc(e){hc++,vc===e&&(hc<pc?Lc(e):vc===e&&Oc())}function Bc(t,e){(t=JSON.parse(t)).emotes.forEach(function(e){Cc[e.code]={restrictions:e.restrictions,code:e.code,source:"bttv",id:e.id,"1x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","1x"),"2x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","2x"),"3x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","3x")}}),kc[vl.Play_selectedChannel_id]=1,vc===e&&Oc()}function Oc(){Nc(),Gc()}function Gc(){(yc=new ReconnectingWebSocket("wss://irc-ws.chat.twitch.tv","irc",{reconnectInterval:3e3})).onopen=function(){yc.send("PASS blah\r\n"),yc.send("NICK justinfan12345\r\n"),yc.send("CAP REQ :twitch.tv/commands twitch.tv/tags\r\n"),yc.send("JOIN #"+vl.Play_selectedChannel+"\r\n")},yc.onclose=function(){gc=!0},yc.onmessage=function(e){var t=window.parseIRC(e.data.trim());if(t.command)switch(t.command){case"PING":yc.send("PONG "+t.params[0]);break;case"JOIN":bc=!0,Fc('&nbsp;<span class="message">'+oa+wn+vl.Play_selectedChannelDisplayname+" "+_+"</span>");break;case"PRIVMSG":Uc(t)}},fc=window.setTimeout(Ac,5e3)}function Ac(){bc?mc=window.setInterval(Dc,1e3):(yc.close(1e3),Oc())}function Nc(){window.clearTimeout(fc)}function Uc(e){var t="",n=e.tags;if(n.hasOwnProperty("badges")&&"string"==typeof n.badges&&n.badges.split(",").forEach(function(e){e=e.split("/"),t+='<span class="'+e[0]+"-"+e[1]+' tag"></span>'}),n.hasOwnProperty("display-name")){var a=n["display-name"];"string"==typeof a&&(t+='<span class="nick" style="color: #'+tr[a.charCodeAt(0)%nr]+';">'+a+"</span>&#58;&nbsp;")}var i=e.params[1];i=i.replace(/</g,"&lt;").replace(/>/g,"&gt;"),/^\x01ACTION.*\x01$/.test(i)&&(i=i.replace(/^\x01ACTION/,"").replace(/\x01$/,"").trim());var o={};n.hasOwnProperty("emotes")&&"string"==typeof n.emotes&&(n.emotes=n.emotes.split("/"),n.emotes.forEach(function(t){t=t.split(":"),o[t[0]]||(o[t[0]]=[]),t[1].split(",").forEach(function(e){e=e.split("-"),o[t[0]].push([parseInt(e[0]),parseInt(e[1])])})}));for(var s=ES(i,o),d=0;d<s.length;d++)"string"==typeof s[d]?s[d]=MS(n,s[d]):s[d]=s[d][0];e=s.join(" "),e=xS.parse(e,!0,!0),Fc(t+='<span class="message">'+e+"</span>")}function Fc(e){var t=document.createElement("div");t.className="chat_line",t.innerHTML=e,zc.appendChild(t),Dc(),100<++wc&&(wc=0,Nr())}function Dc(){zc.scrollTop=zc.scrollHeight}function Rc(){Nc(),window.clearTimeout(_c),window.clearTimeout(uc),window.clearInterval(mc)}function Vc(){Rc(),yc&&yc.close(1e3),vc=0,m_("chat_box"),bc=gc=!1}var Hc,Jc,qc,zc,jc,Xc=!1,Wc=0,Yc=[],Kc=[],$c=10,Qc=null,Zc=0,er="",tr=["ff0000","ff4000","ff8000","ffbf00","ffff00","bfff00","80ff00","40ff00","00ff00","00ff40","00ff80","00ffbf","00ffff","00bfff","0080ff","0040ff","ff00ff","ff00bf","ff0080","ff0040"],nr=tr.length,ar=0,ir=!1,or=0;function sr(){zc=document.getElementById("chat_box"),cr()}function dr(){xr(),cu&&vl.Play_ChatForceDisable?(Xc||cr(),j_(function(){pr(or=(new Date).getTime())})):Gr()}function cr(){Wc=0,Xc=!(Cc={}),rr()}function rr(){Mf("https://badges.twitch.tv/v1/badges/global/display",1e4,0,null,ur,lr,!1)}function lr(){++Wc<$c?rr():Xc=!1}function ur(e){IS(JSON.parse(e).badge_sets).forEach(function(t){t.versions.forEach(function(e){SS(t.type,e.type,e.image_url_4x,null)})}),_r()}function _r(){Wc=0,fr()}function fr(){Mf("https://api.betterttv.net/2/emotes",1e4,0,null,hr,mr,!1)}function mr(){++Wc<$c?fr():Xc=!1}function hr(t){(t=JSON.parse(t)).emotes.forEach(function(e){Cc[e.code]={restrictions:e.restrictions,code:e.code,source:"bttv",id:e.id,"1x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","1x"),"2x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","2x"),"3x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","3x")}}),Xc=!0}function pr(e){Wc=0,gr(e)}function gr(e){var t="https://badges.twitch.tv/v1/badges/channels/"+vl.Main_selectedChannel_id+"/display",n=new XMLHttpRequest;n.open("GET",t,!0),n.timeout=1e4,n.ontimeout=function(){},n.onreadystatechange=function(){if(4===n.readyState){if(200===n.status)return void(or===e&&yr(n.responseText,e));or===e&&vr(e)}},n.send(null)}function vr(e){Wc++,or===e&&(Wc<$c?gr(e):jc=window.setTimeout(function(){gr(e)},1e3))}function yr(e,t){IS(JSON.parse(e).badge_sets).forEach(function(t){t.versions.forEach(function(e){SS(t.type,e.type,e.image_url_4x,zc)})}),or===t&&br(t)}function br(e){Wc=0,or===e&&wr(e)}function wr(e){var t="https://api.twitch.tv/v5/videos/"+vl.ChannelVod_vodId+"/comments?client_id="+Xl+(Zc?"&content_offset_seconds="+parseInt(Zc):""),n=new XMLHttpRequest;n.open("GET",t,!0),n.timeout=1e4,n.ontimeout=function(){},n.onreadystatechange=function(){if(4===n.readyState){if(200===n.status)return void(or===e&&Cr(n.responseText,e));or===e&&kr(e)}},n.send(null)}function kr(e){Wc++,or===e&&(Wc<$c?wr(e):Jc=window.setTimeout(function(){wr(e)},2500))}function Cr(e,t){e=JSON.parse(e);var n,a,i=null===Qc;i&&(n="&nbsp;",n+='<span class="message">',n+=oa+wn+vl.Main_selectedChannelDisplayname+" "+er,Mr(n+="</span>",0)),Zc=0,Qc=e._next,e.comments.forEach(function(e){n="",(a=e.message).hasOwnProperty("user_badges")&&a.user_badges.forEach(function(e){n+='<span class="'+e._id+"-"+e.version+' tag"></span>'}),n+='<span class="nick" style="color: #'+tr[e.commenter.display_name.charCodeAt(0)%nr]+';">'+e.commenter.display_name+"</span>&#58;&nbsp;",n+='<span class="message">',a.fragments.forEach(function(e){e.hasOwnProperty("emoticon")?n+='<img class="emoticon" src="https://static-cdn.jtvnw.net/emoticons/v1/'+e.emoticon.emoticon_id+'/1.0" srcset="https://static-cdn.jtvnw.net/emoticons/v1/'+e.emoticon.emoticon_id+"/2.0 2x, https://static-cdn.jtvnw.net/emoticons/v1/"+e.emoticon.emoticon_id+'/3.0 4x">':n+=xS.parse(e.text,!1,!0)}),n+="</span>",i?Mr(n,e.content_offset_seconds):void 0!==Qc&&Er(n,e.content_offset_seconds)}),i&&or===t&&(Ir(t),void 0!==Qc&&Lr(t))}function Mr(e,t){Yc.push({time:t,message:e})}function Er(e,t){Kc.push({time:t,message:e})}function Ir(e){ir||or!==e||(Hc=window.setInterval(function(){Pr(e),zc.scrollTop=zc.scrollHeight},1e3))}function Sr(){ir||(window.clearTimeout(jc),window.clearTimeout(Jc),window.clearTimeout(qc),window.clearInterval(Hc))}function xr(){Sr(),or=0,m_("chat_box"),ir=!1,Qc=null,Yc=[],Kc=[],ar=0}function Pr(e){var t;if(ar<Yc.length-1)for(var n=ar;n<Yc.length&&Yc[n].time<Wd+Android.gettime()/1e3;n++,ar++)(t=document.createElement("div")).className="chat_line",t.innerHTML=Yc[n].message,zc.appendChild(t);else if(Sr(),void 0!==Qc)Yc=Kc.slice(),ar=0,Ir(e),Kc=[],or===e&&Lr(e),Nr();else{var a="&nbsp;";a+='<span class="message">',a+=oa+oa+En+oa+oa,a+="</span>",(t=document.createElement("div")).className="chat_line",t.innerHTML=a,zc.appendChild(t),ir=!0,zc.scrollTop=zc.scrollHeight,window.clearInterval(Hc),Hc=window.setInterval(function(){zc.scrollTop=zc.scrollHeight},1e3)}}function Lr(e){Wc=0,ir||or!==e||Tr(e)}function Tr(e){var t="https://api.twitch.tv/v5/videos/"+vl.ChannelVod_vodId+"/comments?client_id="+Xl+(null!==Qc?"&cursor="+Qc:""),n=new XMLHttpRequest;n.open("GET",t,!0),n.timeout=1e4,n.ontimeout=function(){},n.onreadystatechange=function(){if(4===n.readyState){if(200===n.status)return void(ir||or!==e||Cr(n.responseText,e));ir||or!==e||Br(e)}},n.send(null)}function Br(e){Wc++,or===e&&(Wc<$c?Tr(e):qc=window.setTimeout(function(){Tr(e)},2500))}function Or(){xr(),Ar(rn+oa+ln)}function Gr(){xr(),Ar(Zn)}function Ar(e){var t="&nbsp;";t+='<span class="message">',t+=oa+oa+oa+oa+oa+oa+oa+oa+oa+oa,t+=e,t+="</span>";var n=document.createElement("div");n.className="chat_line",n.innerHTML=t,zc.appendChild(n)}function Nr(){var e=document.getElementsByClassName("chat_line");if(0<e.length-100)for(var t=0;t<e.length-100;t++)e[0].parentNode.removeChild(e[0]);Dc()}var Ur,Fr,Dr,Rr,Vr,Hr,Jr,qr=!0,zr=!1,jr=!1,Xr=-1,Wr=new Image,Yr=1,Kr=2,$r=3,Qr=4,Zr=5,el=6,tl=7,nl=8,al=9,il=10,ol=11,sl=12,dl=13,cl=14,rl=15,ll=16,ul=17,_l=18,fl=19,ml=20,hl=21,pl=22,gl="",vl={Main_Go:1,Main_Before:1,Main_BeforeSearch:1,Main_BeforeChannel:1,Main_BeforeAgame:$r,Main_BeforeChannelisSet:!1,Main_BeforeAgameisSet:!1,Main_selectedChannel:"",Main_selectedChannelDisplayname:"",Main_selectedChannelLogo:"",Main_selectedChannel_id:"",Main_gameSelected:"",Main_OldgameSelected:null,Play_isHost:!1,Play_DisplaynameHost:"",Play_selectedChannelDisplayname:"",Play_selectedChannel:"",Play_gameSelected:"",Users_Position:0,Users_AddcodePosition:0,Play_WasPlaying:0,ChannelVod_vodId:"",vodOffset:0,Search_data:"",isLastSChannels:!1,gameSelectedOld:"",Games_return:!1,Search_isSearching:!1,Play_ChatForceDisable:!1,Never_run:!0,Main_CenterLablesVectorPos:0},yl=!0,bl=!0,wl=!1,kl=[],Cl=0,Ml=0,El=null,Il=!0,Sl="",xl=!1,Pl="",Ll=["label_side_panel","label_refresh","top_bar_live","top_bar_user","top_bar_featured","top_bar_game","top_bar_vod","top_bar_clip"],Tl=[],Bl=0,Ol=!0,Gl=0,Al=1.35,Nl=1.5,Ul=45,Fl=3,Dl=Math.floor(Ul/Fl/Nl),Rl=45,Vl=5,Hl=Math.floor(Rl/Vl/Al),Jl=48,ql=6,zl=Math.floor(Jl/ql/Nl),jl=6,Xl="5seja5ptej058mxqy7gh5tcudjqtm9",Wl="Client-ID",Yl="Accept",Kl="Authorization",$l="OAuth ",Ql="application/vnd.twitchtv.v5+json",Zl="528x297",eu="340x475",tu="stream_thumbnail_focused",nu="data_attribute",au="1.0",iu=".15",ou="042919",su=au+iu+"-"+ou,du=0,cu=0,ru="?"+Math.random(),lu="https://fgl27.github.io/SmartTwitchTV/release/githubio/images/",uu=lu+"404_game.png",_u=lu+"404_logo.png",fu=lu+"404_video.png",mu="https://cors-anywhere.herokuapp.com/",hu=function(e,t,n){e.onerror=function(){this.src=n},e.src=t};function pu(){(jr=yf("Main_isDebug",!1))&&qr?gu():"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){vu(window.navigator.userLanguage||window.navigator.language)}):vu(window.navigator.userLanguage||window.navigator.language)}function gu(){console.log("Debug mod start");var e=document.createElement("script");e.src="https://fgl27.github.io/SmartTwitchTV/release/githubio/js/masterdebug.js",document.head.appendChild(e)}function vu(e){q_(),j_(function(){try{(cu=Android.getAndroid())&&(uu=(lu="file:///android_asset/")+"404_game.png",_u=lu+"404_logo.png",fu=lu+"404_video.png")}catch(e){cu=0,document.body.style.backgroundColor="rgba(0, 0, 0, 1)",zr=jr=!0,console.log("Main_isReleased: "+qr),console.log("Main_isDebug: "+jr),console.log("Main_isBrowser: "+zr)}Bk(),wa(),console.log("language is "+e),ba(),-1!==window.location.href.indexOf("code")&&wf(window.location.href),yu()})}function yu(){Ty(),bu(!0),Ur=document.getElementById("scrollbar"),s_(),gl=vl.Main_Go,j_(function(){sr(),Jh(),Ki(),$i()&&(Jr=window.setInterval(K_,6e5),K_()),document.body.addEventListener("keyup",L_,!1),By(),document.getElementById("side_panel").style.marginLeft="",__(),wu(),YI=yf("Vod_highlight",!1),Hd=yf("ChannelVod_highlight",!1),ls=yf("AGameVod_highlight",!1),cI=yf("UserVod_highlight",!1),zI=gf("vod_periodNumber",2),ss=gf("AGameVod_periodNumber",2),iI=gf("UserVod_TypeNumber",1),yy(),Fr=document.getElementById("search_input"),Dr=document.getElementById("user_input"),b_(fu),b_(uu),b_(_u),document.addEventListener("visibilitychange",W_,!1),Vr=window.setInterval(Y_,6e4),Ly=db,Ay(),Rr=window.setTimeout(t_,5e3),Mu("topbar")})}function bu(e){Y_(),ku("label_refresh","icon-refresh",t+Wt),xu("label_update",'<div class="strokedextramini" style="vertical-align: middle; display: inline-block;"><i class="icon-arrow-up" style="color: #FF0000; font-size: 115%; "></i></div><div class="strokedextramini" style="vertical-align: middle; display: inline-block; color: #FF0000">'+ya+ft+"</div>"),ku("label_side_panel","icon-ellipsis",Fn),ku("icon_feed_refresh","icon-refresh",t+" Press up"),Pu("top_bar_live",_),Pu("top_bar_user",e?u:a),Pu("top_bar_featured",on),Pu("top_bar_game",f),Pu("top_bar_vod",Zt),Pu("top_bar_clip",U),xu("scene2_search_text",ya+n),xu("scene2_channel_text",ya+Ut),xu("scene2_game_text",ya+Ht),Pu("dialog_end_replay_text",tn),Pu("dialog_end_vod_text",dn),Pu("dialog_end_channel_text",Ut),Pu("dialog_end_game_text",Ht),xu("dialog_about_text",ha+pa),Tl=[ce,re,le,ue],e?Ik():(Tk(),__())}function wu(){Pu("play_dialog_exit_text",J),Pu("side_panel_search",n),Pu("side_panel_settings",a),Pu("side_panel_about",i),Pu("side_panel_controls",e),Pu("side_panel_exit",z),Pu("side_panel_live",_),Pu("side_panel_user",u),Pu("side_panel_featured",on),Pu("side_panel_games",f),Pu("side_panel_videos",Zt),Pu("side_panel_clips",U),Pu("side_panel_hide",o),Pu("chanel_button",I),Pu("game_button",f),Pu("live_button",_),Pu("exit_app_cancel",W),Pu("exit_app_close",j),Pu("remove_cancel",W),Pu("remove_yes",Jt),Pu("exit_app_minimize",X),Pu("main_dialog_exit_text",q),xu("dialog_controls_text",ma),Pu("dialog_vod_text",kn),xu("dialog_vod_start_text",Mn)}function ku(e,t,n){xu(e,'<div class="strokedextramini" style="vertical-align: middle; display: inline-block;"><i class="'+t+'" style="color: #FFFFFF; font-size: 115%; "></i></div><div class="strokedextramini" style="vertical-align: middle; display: inline-block">'+ya+n+"</div>")}function Cu(e){document.getElementById(e).classList.add("hide")}function Mu(e){document.getElementById(e).classList.remove("hide")}function Eu(e){return-1===document.getElementById(e).className.indexOf("hide")}function Iu(e,t){document.getElementById(e).classList.add(t)}function Su(e,t){document.getElementById(e).classList.remove(t)}function xu(e,t){document.getElementById(e).innerHTML=t}function Pu(e,t){document.getElementById(e).textContent=t}function Lu(){v_(-1),cu?Android.mshowLoading(!0):Mu("dialog_loading")}function Tu(){cu?Android.mshowLoading(!1):Cu("dialog_loading")}function Bu(){window.clearTimeout(El)}function Ou(){El=window.setTimeout(Au,6e3)}function Gu(){Ou(),Mu("main_dialog_exit"),document.body.addEventListener("keydown",of,!1)}function Au(){document.body.removeEventListener("keydown",of,!1),lf(Hr),Bu(),Cu("main_dialog_exit"),Ml=0,Nu()}function Nu(){Su("exit_app_cancel","button_search_focused"),Su("exit_app_minimize","button_search_focused"),Su("exit_app_close","button_search_focused"),Iu(Ml?1===Ml?"exit_app_minimize":"exit_app_close":"exit_app_cancel","button_search_focused")}function Uu(){m_("dialog_counter_text"),Du(0,0,0)}function Fu(e,t,n,a){0<a?(Pu("dialog_counter_text",t*n+(e+1)+"/"+a),Du(t,n,a)):Uu()}function Du(e,t,n){var a=screen.height/100*7;if(3===t&&9<n||5===t&&10<n||6===t&&12<n){var i=vl.Main_Go===Qr||vl.Main_Go===fl||vl.Main_Go===ml||vl.Main_Go===sl||vl.Main_Go===pl||vl.Main_Go===ul||vl.Main_Go===_l||vl.Main_Go===dl,o=Math.ceil((screen.height-3*a)/(Math.ceil(n/t)-1)*e+a*(i?1.8:1));Ur.style.top=o+"px",Il&&(Il=!1,Ur.style.backgroundColor="#777777")}else Ur.style.backgroundColor="#000000",Ur.style.top=a+"px",Il=!0}function Ru(e){(jl=12)/3<e&&(jl=3*e),99<jl&&(jl=99)}function Vu(e){Pu("dialog_warning_text",e),Mu("dialog_warning")}function Hu(){Cu("dialog_warning")}function Ju(){Wu(),Mu("dialog_about")}function qu(){Cu("dialog_about")}function zu(){return Eu("dialog_about")}function ju(){Wu(),Hu(),d_(vl.Main_Go),Uu(),Mk()}function Xu(){qu(),Mu("dialog_controls")}function Wu(){Cu("dialog_controls")}function Yu(){return Eu("dialog_controls")}function Ku(e){return(e+"").replace(/\B(?=(\d{3})+(?!\d))/g,",")}function $u(e,t,n){return(e+="").indexOf("x")||(e=e.slice(-3)),e+"p"+(t=58<t?60:t<32?30:Math.ceil(t))+(""!==n?" ["+n.toUpperCase()+"]":"")}function Qu(e){return-1!==e.indexOf("live")?"":Y}function Zu(e,t,n){return null!==document.getElementById(n+e+"_"+t)}function e_(){Y_(),a_(),document.body.addEventListener("keyup",L_,!1)}function t_(){for(var e,t=0;t<Ll.length;t++)t<2?document.getElementById(Ll[t]).style.opacity="0.5":-1===(e=document.getElementById(Ll[t])).className.indexOf("icon_center_focus")&&(e.style.opacity="0.5");Iu("topbar","topbar_dim")}function n_(){for(var e=0;e<Ll.length;e++)document.getElementById(Ll[e]).style.opacity="1";Su("topbar","topbar_dim")}function a_(e){window.clearTimeout(Rr),n_(),j_(function(){i_(e)})}function i_(e){vl.Main_Go!==ol&&(vl.Main_BeforeChannelisSet=!1),vl.Main_Go!==Qr&&(vl.Main_BeforeAgameisSet=!1),Uu(),vl.Main_Go===Yr?(Ly=db,Ay()):vl.Main_Go===Kr?Di():vl.Main_Go===$r?(Ly=ob,Ay()):vl.Main_Go===Qr?Mo():vl.Main_Go===nl?Ow():vl.Main_Go===al?vw():vl.Main_Go===il?ok():vl.Main_Go===ol?$s():vl.Main_Go===sl?Yd():vl.Main_Go===dl?(Ly=ab,Ay()):vl.Main_Go===cl?IE():vl.Main_Go===Zr?tE():vl.Main_Go===el?NC():vl.Main_Go===tl?(Ly=sb,Ay()):vl.Main_Go===rl?sC():vl.Main_Go===ll?qb():vl.Main_Go===ul?QI():vl.Main_Go===_l?(Ly=nb,Ay()):vl.Main_Go===fl?_s():vl.Main_Go===ml?(Ly=ib,Ay()):vl.Main_Go===hl?(Ly=cb,Ay()):vl.Main_Go===pl&&rI(),Rr=window.setTimeout(t_,3e3),e&&mf()}function o_(){pf("Main_values",JSON.stringify(vl))}function s_(){vl=Gy(vl,vf("Main_values",{}))}function d_(e){e===Yr?Ny():e===Kr?Ri():e===$r?Ny():e===Qr?Eo():e===nl?Gw():e===al?yw():e===il?sk():e===ol?Qs():e===sl?Kd():e===dl?Ny():e===cl?SE():e===Zr?nE():e===el?UC():e===tl?Ny():e===rl?dC():e===ll?zb():e===ul?ZI():e===_l?Ny():e===fl?fs():e===ml?Ny():e===hl?Ny():e===pl&&lI(),Eu("settings_scroll")&&Ek()}function c_(){ku("label_refresh","icon-refresh",t+Wt),ku("label_side_panel","icon-ellipsis",Fn),Su("top_bar_user","icon_center_focus"),Pu("top_bar_live",_),Pu("top_bar_user",u),Pu("top_bar_featured",on),Pu("top_bar_game",f),Pu("top_bar_vod",Zt),Pu("top_bar_clip",U)}function r_(){ku("label_side_panel","icon-arrow-circle-left",x),m_("top_bar_live"),m_("top_bar_game"),m_("top_bar_vod"),m_("top_bar_clip"),m_("top_bar_featured"),Iu("top_bar_user","icon_center_focus")}function l_(e){return'<div style="font-size: 30%; position: fixed; line-height: 0; text-shadow: #000000 0 0 5.7px, #000000 0 0 5.7px, #000000 0 0 4px">'+e+"</div>"}function u_(e){return e=new Date(e),xl?e.getDate()+" "+Yt[e.getMonth()]+", "+e.getFullYear():Yt[e.getMonth()]+" "+e.getDate()+", "+e.getFullYear()}function __(){if(cu)try{var e=Android.getversion();su="Android: "+e+" Web: "+ou,f_(e)&&Mu("label_update")}catch(e){}xu("dialog_about_text",ha+be+su+pa)}function f_(e){return e=e.split("."),parseFloat(e[0]+"."+e[1])<parseFloat(au)||parseInt(e[2])<parseInt(iu.split(".")[1])}function m_(e){for(e=document.getElementById(e);e.firstChild;)e.removeChild(e.firstChild)}function h_(e){for(var t,n=0;n<kl.length;n++)null!==(t=document.getElementById(kl[n].id))&&hu(t,kl[n].src+ru,e)}function p_(){kl=[]}function g_(e,t){kl.push({id:e,src:t})}function v_(e){Xr=e}function y_(e){var t=0;return Xr<e?t=-1:e<Xr&&(t=1),Xr=e,t}function b_(e){Wr.src=e}function w_(e){return(Sl=document.createElement("td")).setAttribute("id",e),Sl.className="stream_cell",Sl}function k_(e,t,n){return(Sl=document.createElement("td")).setAttribute("id",t[4]+e),Sl.setAttribute(nu,n[0]),Sl.setAttribute("data-id",n[1]),Sl.className="stream_cell",Sl.innerHTML=M_(e,t,n),Sl}function C_(e,t,n){var a=document.getElementById(e),i=e.split(n[5])[1];a.setAttribute(nu,t[0]),a.setAttribute("data-id",t[1]),a.innerHTML=M_(i,n,t),a.setAttribute("id",n[4]+i)}function M_(e,t,n){return g_(t[1]+e,n[2]),'<div id="'+t[0]+e+'" class="stream_thumbnail_channel" ><img id="'+t[1]+e+'" class="stream_img"></div><div id="'+t[2]+e+'" class="stream_text"><div id="'+t[3]+e+'" class="stream_channel">'+n[3]+"</div></div>"}function E_(e,t,n,a,i){return e<Fl&&b_(i[0]),(Sl=document.createElement("td")).setAttribute("id",a[8]+t),Sl.setAttribute(nu,JSON.stringify(n)),Sl.className="stream_cell",Sl.innerHTML=S_(t,a,i),Sl}function I_(e,t,n,a){var i=document.getElementById(e),o=e.split(a[9])[1];i.setAttribute(nu,JSON.stringify(t)),i.innerHTML=S_(o,a,n),i.setAttribute("id",a[8]+o)}function S_(e,t,n){return g_(t[1]+e,n[0]),'<div id="'+t[0]+e+'" class="stream_thumbnail_video" ><img id="'+t[1]+e+'" class="stream_img"></div><div id="'+t[2]+e+'" class="stream_text"><div id="'+t[3]+e+'" class="stream_channel" style="width: 66%; display: inline-block;">'+n[1]+'</div><div id="'+t[7]+e+'"class="stream_info" style="width:33%; float: right; text-align: right; display: inline-block;">'+n[5]+'</div><div id="'+t[4]+e+'"class="stream_info">'+xS.parse(n[2])+'</div><div id="'+t[5]+e+'"class="stream_info">'+g+n[3]+'</div><div id="'+t[6]+e+'"class="stream_info">'+n[4]+"</div></div>"}function x_(e,t,n){return(Sl=document.createElement("td")).setAttribute("id",t[5]+e),Sl.setAttribute(nu,n[0]),Sl.className="stream_cell",Sl.innerHTML=P_(e,t,n),Sl}function P_(e,t,n){return g_(t[1]+e,n[1]),'<div id="'+t[0]+e+'" class="stream_thumbnail_game" ><img id="'+t[1]+e+'" class="stream_img"></div><div id="'+t[2]+e+'" class="stream_text"><div id="'+t[3]+e+'" class="stream_channel">'+n[0]+'</div><div id="'+t[4]+e+'"class="stream_info_games" style="width: 100%; display: inline-block;">'+n[2]+"</div></div>"}function L_(){bl=!0}function T_(){yl=!0}function B_(){yl=!1,window.setTimeout(T_)}function O_(){return!yl||!bl}function G_(e,t,n,a,i){Iu(n[0]+e+"_"+t,tu),Fu(t,e,a,i),y_(e)?1<e?Zu(e+1,0,n[0])?H_(n[6],-1*document.getElementById(n[4]+e+"_"+t).offsetTop+.42*screen.height):L_():H_(n[6],.07*screen.height):L_()}function A_(e,t,n,a,i){Iu(n[0]+e+"_"+t,tu),Fu(t,e,a,i),y_(e)?e?Zu(e+1,0,n[0])&&H_(n[10],-1*document.getElementById(n[8]+(e-1)+"_"+t).offsetTop):H_(n[10],.07*screen.height):L_()}function N_(e,t,n,a,i){Iu(n[0]+e+"_"+t,tu),Fu(t,e,a,i),y_(e)?H_(n[10]?n[10]:n[7],e?-1*document.getElementById(n[5]+(e-1)+"_"+t).offsetTop+.025*screen.height:-1*document.getElementById(n[5]+e+"_"+t).offsetTop+.025*screen.height):L_()}function U_(e,t,n){document.body.removeEventListener("keydown",n),vl.Play_selectedChannel=JSON.parse(document.getElementById(t[8]+e).getAttribute(nu)),vl.Play_selectedChannel_id=vl.Play_selectedChannel[1],vl.Play_selectedChannel=vl.Play_selectedChannel[0],vl.Main_Go===el?(vl.Play_DisplaynameHost=document.getElementById(t[3]+e).textContent,vl.Play_selectedChannelDisplayname=vl.Play_DisplaynameHost.split(ae)[1],vl.Play_isHost=!0):vl.Play_selectedChannelDisplayname=document.getElementById(t[3]+e).textContent,vl.Play_gameSelected=document.getElementById(t[5]+e).textContent.split(g)[1],vl.Main_Go===Qr&&(vl.Main_OldgameSelected=vl.Main_gameSelected),F_()}function F_(){document.body.addEventListener("keydown",Dg,!1),Cu("scene1"),Mu("scene2"),jp(),Qp(),hg(),$i()&&!$C&&dM&&OM(),j_(jh)}function D_(e,t,n){document.body.removeEventListener("keydown",n),fb=JSON.parse(document.getElementById(t[8]+e).getAttribute(nu)),Kf=parseInt(fb[1]),vl.Play_gameSelected=fb[2],vl.Main_selectedChannel=fb[3],vl.Main_selectedChannelDisplayname=fb[4],vl.Main_selectedChannelLogo=fb[5],vl.Main_selectedChannel_id=fb[6],vl.ChannelVod_vodId=fb[7],Wd=parseInt(fb[8]),_b=fb[9],hb=fb[10],lb=fb[11],fb=fb[0],mb=document.getElementById(t[4]+e).textContent,ub=document.getElementById(t[6]+e).textContent,document.body.addEventListener("keydown",ym,!1),Cu("scene1"),Mu("scene2"),Qp(),Hp(),Ap(),Fp(),$i()&&!$C&&dM&&OM(),j_($f)}function R_(e,t,n){document.body.removeEventListener("keydown",n),vl.ChannelVod_vodId=JSON.parse(document.getElementById(t[8]+e).getAttribute(nu)),Ad=parseInt(vl.ChannelVod_vodId[1]),Fd=vl.ChannelVod_vodId[2],vl.Play_gameSelected=vl.ChannelVod_vodId[3],vl.Main_selectedChannel=vl.ChannelVod_vodId[4],Ah=vl.ChannelVod_vodId[5],vl.ChannelVod_vodId=vl.ChannelVod_vodId[0].substr(1),vl.Main_Go===sl?qd=document.getElementById(t[3]+e).innerHTML:(qd="",vl.Main_selectedChannelDisplayname=document.getElementById(t[3]+e).textContent),jd=document.getElementById(t[4]+e).textContent,Xd=document.getElementById(t[5]+e).textContent,zd=document.getElementById(t[11]+e).innerHTML+", "+document.getElementById(t[6]+e).textContent,V_()}function V_(){document.body.addEventListener("keydown",Py,!1),Cu("scene1"),Mu("scene2"),ay(),Qp(),Hp(),Fp(),Cv=!1,$i()&&!$C&&dM&&OM(),j_(Lv)}function H_(e,t){document.getElementById(e).style.top=t+"px",window.setTimeout(L_,10)}function J_(e,t){bl=!1,Su(t[0]+e,tu)}function q_(){var e=document.createElement("span");e.className="fa",e.style.display="none",document.body.insertBefore(e,document.body.firstChild),"icons"!==window.getComputedStyle(e,null).getPropertyValue("font-family")?(jr&&console.log("Main_Checktylesheet reloading"),z_("https://fgl27.github.io/SmartTwitchTV/release/githubio/css/icons.min.css")):jr&&console.log("Main_Checktylesheet loaded OK"),document.body.removeChild(e)}function z_(e){var t=document.createElement("link");t.rel="stylesheet",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)}function j_(e){"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?window.setTimeout(e):document.addEventListener("DOMContentLoaded",e)}function X_(){var e=(new Date).getTime()+du;return e=new Date(e),(xl?Kt[e.getDay()]+" "+e.getDate()+"/"+Yt[e.getMonth()]:Kt[e.getDay()]+" "+Yt[e.getMonth()]+"/"+e.getDate())+" "+kp(e.getHours())+":"+kp(e.getMinutes())}function W_(){document.hidden||(Y_(),window.setTimeout(Y_,2e4))}function Y_(){document.hidden||(Pu("label_clock",X_()),ru="?"+Math.random())}function K_(){document.hidden||$i()&&window.setTimeout(function(){CM()||$C||(Nm=Ai[vl.Users_Position].name,uM())},5e3)}function $_(){Iu("side_panel_"+Gl,"side_panel_text_focus")}function Q_(){Su("side_panel_"+Gl,"side_panel_text_focus")}function Z_(){Gl?1===Gl?ju():2===Gl?(document.body.addEventListener("keydown",Hr,!1),Ju()):3===Gl?(document.body.addEventListener("keydown",Hr,!1),Xu()):4===Gl?Gu(Hr):5===Gl?ef(Yr):6===Gl?ef(ao()?cl:Kr):7===Gl?ef(hl):8===Gl?ef($r):9===Gl?ef(ul):10===Gl&&ef(_l):vl.Main_Go!==nl?(vl.Search_isSearching||vl.Main_Go!==ol&&vl.Main_Go!==dl&&vl.Main_Go!==sl||bd(),vl.Main_BeforeSearch=vl.Main_Go,vl.Main_Go=nl,d_(vl.Main_BeforeSearch),a_()):document.body.addEventListener("keydown",Hr,!1),nf()}function ef(e){e===vl.Main_Go?document.body.addEventListener("keydown",Hr,!1):(vl.Main_Before=vl.Main_Go,vl.Main_Go=e,d_(vl.Main_Before),a_())}function tf(e){Hr=e,document.body.removeEventListener("keydown",Hr),document.body.addEventListener("keydown",af,!1),Su("side_panel","side_panel_hide")}function nf(){document.body.removeEventListener("keydown",af),Iu("side_panel","side_panel_hide"),Q_(),Gl=0,$_()}function af(e){switch(e.keyCode){case La:case Ea:document.body.addEventListener("keydown",Hr,!1),nf(),_f();break;case Ia:Gl&&(Q_(),Gl--,$_());break;case xa:Gl<10&&(Q_(),Gl++,$_());break;case Pa:Z_()}}function of(e){switch(e.keyCode){case La:Au();break;case Sa:2<++Ml&&(Ml=0),Nu(),Bu(),Ou();break;case Ea:--Ml<0&&(Ml=2),Nu(),Bu(),Ou();break;case Pa:Ml?cu&&1===Ml?Android.mclose(!1):cu&&2===Ml&&Android.mclose(!0):Au()}}pu();var sf=["top_bar_live","top_bar_user","top_bar_featured","top_bar_game","top_bar_vod","top_bar_clip"],df=[Yr,cl,hl,$r,ul,_l],cf=!1;function rf(e){if(!(cf||Ly.FirstLoad||O_()))switch(e.keyCode){case La:Yu()?(_f(),Wu()):zu()?(_f(),qu()):vl.Main_Go===Qr?(vl.Main_OldgameSelected=vl.Main_gameSelected,vl.Games_return?(vl.Main_Go=al,vl.Main_gameSelected=vl.gameSelectedOld):(vl.Main_Go=vl.Main_BeforeAgame,vl.Main_BeforeAgame=Yr),Eo(),uf(),i_()):vl.Main_Go===ml?(Qy(Qr),uf(),i_()):vl.Main_Go===tl?(Qy(cl),uf(),i_()):vl.Main_Go===dl?(Qy(ol),uf(),i_()):vl.Main_Go===fl?(vl.Main_Go=Qr,fs(),uf(),i_()):vl.Main_Go===Zr?(vl.Main_Go=cl,nE(),uf(),i_()):vl.Main_Go===el?(vl.Main_Go=cl,UC(),uf(),i_()):vl.Main_Go===pl?(vl.Main_Go=cl,lI(),uf(),i_()):vl.Main_Go===rl?(vl.Main_Go=cl,dC(),uf(),i_()):vl.Main_Go===ol?(vl.Main_Go=vl.Main_BeforeChannel,vl.Main_BeforeChannel=Yr,Qs(),vl.Main_selectedChannel_id="",uf(),i_()):vl.Main_Go===sl?(vl.Main_Go=ol,Kd(),uf(),i_()):vl.Main_Go===il?(vl.Main_Go===vl.Main_BeforeSearch?vl.Main_Go=Yr:vl.Main_Go=vl.Main_BeforeSearch,sk(),vl.Search_isSearching=!1,uf(),i_()):vl.Main_Go===al?(vl.Main_Go===vl.Main_BeforeSearch?vl.Main_Go=Yr:vl.Main_Go=vl.Main_BeforeSearch,vl.Search_isSearching=!1,yw(),uf(),i_()):vl.Main_Go===ll?(vl.Main_Go===vl.Main_BeforeSearch?vl.Main_Go=Yr:vl.Main_Go=vl.Main_BeforeSearch,vl.Main_selectedChannel_id&&wd(),zb(),vl.Search_isSearching=!1,uf(),i_()):(uf(),tf(rf));break;case Sa:if(vl.Search_isSearching||vl.Main_Go===ol||vl.Main_Go===sl||vl.Main_Go===dl||vl.Main_Go===il||vl.Main_Go===al||vl.Main_Go===ll)break;Su(sf[vl.Main_CenterLablesVectorPos],"icon_center_line"),vl.Main_CenterLablesVectorPos++,5<vl.Main_CenterLablesVectorPos&&(vl.Main_CenterLablesVectorPos=0),_f(),ff();break;case Ea:if(vl.Search_isSearching||vl.Main_Go===ol||vl.Main_Go===sl||vl.Main_Go===dl||vl.Main_Go===il||vl.Main_Go===al||vl.Main_Go===ll)break;Su(sf[vl.Main_CenterLablesVectorPos],"icon_center_line"),vl.Main_CenterLablesVectorPos--,vl.Main_CenterLablesVectorPos<0&&(vl.Main_CenterLablesVectorPos=5),_f(),ff();break;case xa:Su(sf[vl.Main_CenterLablesVectorPos],"icon_center_line"),document.body.removeEventListener("keydown",rf),wl=!1,i_();break;case Pa:hf()}}function lf(e){window.clearTimeout(Rr),n_(),document.body.removeEventListener("keydown",e),document.body.removeEventListener("keydown",rf),document.body.addEventListener("keydown",rf,!1),_f()}function uf(){Su(sf[vl.Main_CenterLablesVectorPos],"icon_center_line"),document.body.removeEventListener("keydown",rf),wl=!1}function _f(){wl=!0,Iu(sf[vl.Main_CenterLablesVectorPos],"icon_center_line")}function ff(){d_(vl.Main_Go),vl.Main_Go=df[vl.Main_CenterLablesVectorPos],vl.Main_Go!==cl||ao()?a_(!0):(vl.Main_Go=Kr,uf(),a_())}function mf(){vl.Main_Go===Yr?(Ly=db,document.body.removeEventListener("keydown",tb)):vl.Main_Go===cl?document.body.removeEventListener("keydown",HE):vl.Main_Go===Qr?document.body.removeEventListener("keydown",qo):vl.Main_Go===hl?(Ly=cb,document.body.removeEventListener("keydown",tb)):vl.Main_Go===il?document.body.removeEventListener("keydown",vk):vl.Main_Go===al?document.body.removeEventListener("keydown",Pw):vl.Main_Go===ll?document.body.removeEventListener("keydown",iw):vl.Main_Go===sl?document.body.removeEventListener("keydown",lc):vl.Main_Go===ol?document.body.removeEventListener("keydown",kd):vl.Main_Go===el?document.body.removeEventListener("keydown",YC):vl.Main_Go===pl?document.body.removeEventListener("keydown",SI):vl.Main_Go===rl?document.body.removeEventListener("keydown",vC):vl.Main_Go===$r?(Ly=ob,document.body.removeEventListener("keydown",tb)):vl.Main_Go===dl?(Ly=ab,document.body.removeEventListener("keydown",tb)):vl.Main_Go===ul?document.body.removeEventListener("keydown",vS):vl.Main_Go===_l?(Ly=nb,document.body.removeEventListener("keydown",tb)):vl.Main_Go===ml?(Ly=ib,document.body.removeEventListener("keydown",tb)):vl.Main_Go===tl?(Ly=sb,document.body.removeEventListener("keydown",tb)):vl.Main_Go===fl?document.body.removeEventListener("keydown",Ss):vl.Main_Go===Zr&&document.body.removeEventListener("keydown",gE)}function hf(){window.clearTimeout(Rr),n_(),vl.Main_Go!==ol&&(vl.Main_BeforeChannelisSet=!1),vl.Main_Go!==Qr&&(vl.Main_BeforeAgameisSet=!1),Uu(),vl.Main_Go===Yr?(Ly=db,Uy()):vl.Main_Go===cl?xE():vl.Main_Go===hl?(Ly=cb,Uy()):vl.Main_Go===Qr?Io():vl.Main_Go===rl?cC():vl.Main_Go===ol?Zs():vl.Main_Go===sl?$d():vl.Main_Go===il?dk():vl.Main_Go===al?bw():vl.Main_Go===ll?jb():vl.Main_Go===$r?(Ly=ob,Uy()):vl.Main_Go===tl?(Ly=sb).loadingData||Ly.key_refresh():vl.Main_Go===ul?eS():vl.Main_Go===_l?(Ly=nb,Uy()):vl.Main_Go===ml?(Ly=ib,Uy()):vl.Main_Go===dl?(Ly=ab,Uy()):vl.Main_Go===fl?ms():vl.Main_Go===Zr?aE():vl.Main_Go===el?FC():vl.Main_Go===pl&&uI(),Rr=window.setTimeout(t_,3e3)}function pf(e,t){localStorage.setItem(e,t)}function gf(e,t){return parseInt(localStorage.getItem(e))||t}function vf(e,t){return JSON.parse(localStorage.getItem(e))||t}function yf(e,t){var n=t.toString();return(localStorage.getItem(e)||n)===n?t:!t}function bf(e){console.log(e);for(var t=0;t<e.length;t++)console.log("Character is: "+e.charAt(t)+" it's Unicode is: \\u"+e.charCodeAt(t).toString(16).toUpperCase())}function wf(e){console.log("processCode");var t="";t=e.match(/code=(\w+)/),Cl=t?(t=t[1],console.log("if code "+t),t):(console.log("else code "+t),0)}function kf(e,t,n,a,i,o,s){cu?Cf(e,t,n,a,i,o):Mf(e,t,n,a,i,o,s)}function Cf(e,t,n,a,i,o){var s=Android.mreadUrl(e,t,n,a);s&&200===(s=JSON.parse(s)).status?i(s.responseText):o()}function Mf(e,t,n,a,i,o,s){var d=new XMLHttpRequest;d.open("GET",(s?mu:"")+e,!0),d.timeout=t,0<n&&d.setRequestHeader(Wl,Xl),1<n&&d.setRequestHeader(Yl,Ql),2<n&&d.setRequestHeader(Kl,a),d.ontimeout=function(){},d.onreadystatechange=function(){if(4===d.readyState){if(200===d.status)return void i(d.responseText);o()}},d.send(null)}var Ef=0,If=null,Sf=0,xf=!1,Pf=0,Lf=0,Tf=!1,Bf=0,Of=2e3,Gf=5,Af="source",Nf=Af,Uf=0,Ff=[],Df="",Rf=!1,Vf=0,Hf=0,Jf=1,qf=!1,zf=0,jf=!1,Xf=!1,Wf=2e3,Yf=[0,5],Kf=0;function $f(){Bp(),hg(),np(document.getElementById("stream_info_icon"),vl.Main_selectedChannelLogo),Pu("stream_info_name",vl.Main_selectedChannelDisplayname),xu("stream_info_title",_b),xu("stream_info_game",lb+", "+ub+", "+hb),Pu("stream_live_icon",mb),Pu("progress_bar_duration",Cp(Kf)),hy((Nh=Yf)[1]),vl.Play_isHost=!1,Pu("progress_bar_current_time",Cp(0)),Pu("stream_live_time",""),Pu("stream_watching_time",""),qf=null!==vl.ChannelVod_vodId,er=Nt+".",qf?(Zc=Wd,dr()):Or(),xu("pause_button",'<i class="strokedbig icon-pause" style="color: #FFFFFF; font-size: 180%;"></i>'),Mu("progress_pause_holder"),gm(),Mu("scene_channel_panel_bottom"),Sf=zf=0,window.clearInterval(If),Xf=!1,xm=-13,Vf=Hf=0,Uf=2,Cg(3),gh=!1,lg(),$i()?(Ha=!0,Ja=vl.Main_selectedChannel_id,ii()):Tp(),document.addEventListener("visibilitychange",om,!1),xf=!1,Tf=!(Lf=Pf=0),Qf(),document.body.removeEventListener("keyup",L_)}function Qf(){Bf=0,Of=2e3,Zf()}function Zf(){kf("https://clips.twitch.tv/api/v2/clips/"+fb+"/status",Of,1,null,tm,em,!0)}function em(){++Bf<Gf?(Of+=250,Zf()):(Op(),Pg(3))}function tm(e){Ff=[],e=JSON.parse(e).quality_options;for(var t=0;t<e.length;t++)Ff.length?Ff.push({id:e[t].quality+"p"+nm(e[t].frame_rate),url:e[t].source}):Ff.push({id:e[t].quality+"p"+nm(e[t].frame_rate)+" (source)",url:e[t].source});Hf=Jf,am()}function nm(e){return 40<e?60:""}function am(){window.clearInterval(If),Df=Ff[Uf=0].url,-1!==Af.indexOf("source")&&(Af="source");for(var e=0;e<mm();e++){if(Ff[e].id===Af){Df=Ff[Uf=e].url;break}-1!==Ff[e].id.indexOf(Af)&&(Df=Ff[Uf=e].url)}Nf=Af,jr&&console.log("PlayClip_onPlayer:",'\n\n"'+Df+'"\n'),Hf=Jf,cu&&Tf&&Android.startVideoOffset(Df,3,Rf?-1:Android.gettime()),Rf=!1,im()}function im(){Km&&!Zp()&&$p(),cu&&(Sf=0,Bh=1+Wf/1e3,jf=!1,window.clearInterval(If),If=window.setInterval(sm,Oh))}function om(){document.hidden&&cm()}function sm(){cu&&(Vf=Android.gettime()),Tf&&Ef===Vf&&!bp()?++Sf>Bh&&(jf&&Xf&&Uf<mm()-1?Uf++:!jf&&Xf&&zf++,navigator.onLine?1<zf?yp(zf,3,dm):(hm(),am(),Xf=!0):vp(!1,3)):(Sf=zf=0,Xf=!1),Ef=Vf}function dm(e){if(!e){if(!(Uf<mm()-1))return void vp(!1,3);Uf++}zf=0,hm(),am(),Xf=!0}function cm(){Tf&&(Ff=[],rm(),Fp(),xp())}function rm(){window.clearInterval(If),cu&&Android.stopVideo(3),Tf=!1,xr(),Pp(),EM(),document.body.removeEventListener("keydown",ym),document.removeEventListener("visibilitychange",om),lm(),document.getElementById("scene2_pannel_0").style.display="none",document.getElementById("scene2_pannel_1").style.width="30%",document.getElementById("quality_name").style.width="77%",document.getElementById("quality_name").style.fontSize="87.5%",Wd=0}function lm(){hv=!1,mv=pv=0,Yp(),Af=Nf,document.getElementById("scene_channel_panel").style.opacity="0",cu&&_y(Android.gettime()/1e3,Kf,!0),xu("progress_bar_jump_to",ya),document.getElementById("progress_bar_steps").style.display="none",window.clearInterval(Hg)}function um(){_m(),wp(),Hg=window.setInterval(_m,1e3),Fp(),sy(),fm(),hm(),document.getElementById("scene_channel_panel").style.opacity="1",pm()}function _m(){cu&&_y(Android.gettime()/1e3,Kf,!hv)}function fm(){for(var e=Uf=0;e<mm();e++){if(Ff[e].id===Af){Uf=e;break}-1!==Ff[e].id.indexOf(Af)&&(Uf=e)}}function mm(){return Ff.length}function hm(){1===mm()?(document.getElementById("quality_arrow_up").style.opacity="0",document.getElementById("quality_arrow_down").style.opacity="0"):Uf?Uf===mm()-1?(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="0.2"):(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="1"):(document.getElementById("quality_arrow_up").style.opacity="0.2",document.getElementById("quality_arrow_down").style.opacity="1"),-1!==(Af=Ff[Uf].id).indexOf("source")?Pu("quality_name",Af.replace("source",ye)):Pu("quality_name",Af)}function pm(){Tm=window.setTimeout(lm,5e3+Mv)}function gm(){document.getElementById("scene2_pannel_1").style.width="18%",document.getElementById("quality_name").style.width="60%",document.getElementById("quality_name").style.fontSize="72%",Pu("open_vod_text",qf?dn:cn),document.getElementById("scene2_pannel_0").style.display="inline-block"}function vm(){qf?(vl.vodOffset=Wd,rm(),document.body.addEventListener("keydown",Py,!1),lg(),j_(Lv)):(gh=!0,Gp(rn),window.setTimeout(function(){gh=!1,Ap()},2e3))}function ym(e){if(Hf!==Jf)switch(e.keyCode){case La:Dp()?(Fp(),cm()):Up()}else switch(e.keyCode){case Ea:CM()?Um&&!$C&&(AM(),Um--,LM()):Gm&&!zp()&&Zp()?(Im++,sg()):zp()?(Yp(),kv?(_g(),5<++ph&&(ph=0),ug()):(gy(-1,Kf),Mv=2500),pm()):pg()?(wg(),yg(),--kh<0&&(kh=3),vg()):um();break;case Sa:CM()?Um<nM-1&&!$C&&(AM(),Um++,LM()):!Gm||zp()||pg()?zp()?(Yp(),kv?(_g(),--ph<0&&(ph=5),ug()):(gy(1,Kf),Mv=2500),pm()):pg()?(wg(),yg(),3<++kh&&(kh=0),vg()):um():pf("ChatEnable",(Km=Zp()||pg()?(Qp(),!1):($p(),!0))?"true":"false");break;case Ia:pg()?wg():zp()?(2===kv&&1!==ph?(kv--,dy()):1===kv?(kv--,dy()):0<Uf&&1===ph&&(Uf--,hm()),Yp(),pm()):CM()?CM()?PM():um():MM();break;case xa:pg()?wg():zp()?(kv?1===kv?(kv++,dy()):Uf<mm()-1&&1===ph&&(Uf++,hm()):(kv++,dy()),Yp(),pm()):CM()?EM():Gm&&Zp()?(4<++Lm?og(!(Lm=1)):4===Lm&&og(!0),ag(!0)):um();break;case Pa:pg()?kg(3):zp()?kv?1===kv?(qf&&vl.Play_ChatForceDisable&&(bp()?Ir(or):Sr()),pg()||rg(3)):xg(3):(Yp(),pm(),mv&&fy()):CM()?(rm(),U_(Um,lM,Dg)):um();break;case La:zp()?lm():CM()?EM():Dp()?(Fp(),cm()):Up();break;case Ca:case ka:case Ma:qf&&!vl.Play_ChatForceDisable&&(bp()?Ir(or):Sr()),pg()||rg(3)}}var bm,wm,km,Cm,Mm,Em,Im=0,Sm=Im,xm=-5,Pm=.55,Lm=3,Tm=null,Bm="source",Om=Bm,Gm=!0,Am=!1,Nm="",Um=0,Fm=2e3,Dm=0,Rm=1,Vm=2,Hm=0,Jm=null,qm=0,zm=0,jm=0,Xm="",Wm=[],Ym=0,Km=!1,$m=null,Qm=null,Zm=null,eh="",th=0,nh=5,ah=0,ih=5,oh=0,sh=!1,dh=null,ch=!1,rh=0,lh=null,uh=0,_h=0,fh=!1,mh=!1,hh=!1,ph=1,gh=!1,vh=!1,yh=1e4,bh=2e3,wh="",kh=0,Ch=3,Mh=null,Eh="",Ih=0,Sh=0,xh="",Ph=!0,Lh=!1,Th=!1,Bh=7,Oh=1e3,Gh=0,Ah="",Nh=[],Uh=[{top:51.8,left:75.1,sizeOffset:[31,16,0,0]},{top:33,left:75.1,sizeOffset:[12.5,0,-6.25,0]},{top:.2,left:75.1,sizeOffset:[0,0,0,0]},{top:.2,left:38.3,sizeOffset:[0,0,0,0]},{top:.2,left:.2,sizeOffset:[0,0,0,0]},{top:33,left:.2,sizeOffset:[12.5,0,-6.25,0]},{top:51.8,left:.2,sizeOffset:[31,16,0,0]},{top:51.8,left:38.3,sizeOffset:[31,16,0,0]}],Fh=[0,0,0,1,2,2,2,1],Dh=[[0,1,2,2,2,1,0,0],[7,3,3,3,3,3,7,7],[6,5,4,4,4,5,6,6]],Rh=[{containerHeight:17,percentage:"12.5%",dialogTop:15},{containerHeight:32,percentage:"25%",dialogTop:30},{containerHeight:48,percentage:"50%",dialogTop:50},{containerHeight:99.6,percentage:"100%",dialogTop:115}],Vh=1,Hh=["chat_extra_small","chat_size_small","chat_size_default","chat_size_biger","chat_size_bigest"];function Jh(){Mm=document.getElementById("chat_container"),Em=document.getElementById("inner_progress_bar"),Im=gf("ChatPositionsValue",0),Lm=gf("ChatSizeValue",3),Km=yf("ChatEnable",!1),Gm=yf("Play_isFullScreen",!0),ag(!1),ig(!1),zh()}function qh(e){e?void 0!==bm&&(Im=bm,Lm=km,(Km=wm)||Qp(),ag(!1)):(bm=Im,wm=Km,km=Lm,Im=0,$p(),Lm=4,og(Km=!0),ag(!1),zc&&(zc.scrollTop=zc.scrollHeight)),pf("Play_isFullScreen",Gm)}function zh(){Vh=Ak("chat_font_size");for(var e=0;e<Hh.length;e++)Su("chat_inner_container",Hh[e]);Iu("chat_inner_container",Hh[Vh])}function jh(){Bp(),xu("stream_live_icon",'<div style="vertical-align: middle; display: inline-block"><i class="icon-circle" style="color: red; font-size: 105%; "></i></div><div style="vertical-align: middle; display: inline-block">'+ya+_.toUpperCase()+"</div>"),m_("stream_info_title"),qf=!(vh=!1),np(document.getElementById("stream_info_icon"),_u),vl.Play_isHost?Pu("stream_info_name",vl.Play_DisplaynameHost):Pu("stream_info_name",vl.Play_selectedChannelDisplayname),vl.Play_WasPlaying=1,o_(),Am=vl.Play_isHost,vl.Play_isHost=!1,Lh=!1,Mu("scene_channel_panel_bottom"),Sh=Ih=0,Pu("stream_watching_time",v+Cp(0)),eh=Mp(0),Pu("stream_live_time",y+eh+b),Cu("progress_pause_holder"),Cg(1),xm=-5,uh=_h=Gh=0,window.clearInterval(lh),mh=!1,yh=3e3,Ph=!(ah=0),Hm=Dm,hh=!(sh=!(jm=zm=qm=ch=0)),document.addEventListener("visibilitychange",Wh,!1),Kh(),ap(),document.body.removeEventListener("keyup",L_),Jm=window.setInterval(Zh,6e4)}function Xh(e){Gp(e)}function Play_CheckResume(){sh&&Wh(),nv&&Dv(),Tf&&(cm(),window.clearInterval(If))}function Wh(){document.hidden?pg()?(Fp(),Qp(),Ip()):(Pp(),hh=!1,Vc(),window.clearInterval(Jm)):(sh=!0,Hp(),sh&&(Bp(),yh=3e3,Lh=!(ah=0),vh?Zh():Kh(),Hm=Dm,oh=0,navigator.onLine?ap():Cm=window.setInterval(Yh,100),Jm=window.setInterval(Zh,6e4)))}function Yh(){(navigator.onLine||200<oh)&&(window.clearInterval(Cm),ap()),oh++}function Kh(){Mf("https://api.twitch.tv/kraken/streams/"+vl.Play_selectedChannel_id,yh,2,null,$h,Qh,!1)}function $h(e){null!==(e=JSON.parse(e)).stream&&(Pu("stream_info_name",Am?vl.Play_DisplaynameHost:vl.Play_selectedChannelDisplayname),vl.Play_selectedChannel_id=e.stream.channel._id,xu("stream_info_title",xS.parse(e.stream.channel.status)),vl.Play_gameSelected=e.stream.game,wh=", ["+e.stream.channel.broadcaster_language.toUpperCase()+"]",Pu("stream_info_game",g+vl.Play_gameSelected+h+Ku(e.stream.viewers)+" "+H+wh),vl.Play_selectedChannelLogo=e.stream.channel.logo,vh=!0,np(document.getElementById("stream_info_icon"),vl.Play_selectedChannelLogo),eh=e.stream.created_at,$i()?(Ha=!0,Ja=vl.Play_selectedChannel_id,ii()):Tp())}function Qh(){ah<ih&&(yh+=500,window.setTimeout(function(){sh&&Kh()},750)),ah++}function Zh(){Mf("https://api.twitch.tv/kraken/streams/"+vl.Play_selectedChannel_id,3e3,2,null,ep,tp,!1)}function ep(e){null!==(e=JSON.parse(e)).stream&&(xu("stream_info_title",xS.parse(e.stream.channel.status)),vl.Play_gameSelected=e.stream.game,Pu("stream_info_game",g+vl.Play_gameSelected+h+Ku(e.stream.viewers)+" "+H+wh),vh||np(document.getElementById("stream_info_icon"),e.stream.channel.logo))}function tp(){Gh<ih?(window.setTimeout(function(){sh&&Zh()},2500),Gh++):Gh=0}function np(e,t){e.onerror=function(){this.src=_u,vh=!1},e.src=t}function ap(){th=0,bh=2e3+(Lh?3e3:0),ip()}function ip(){var e,t;if(e=Hm===Dm?"https://api.twitch.tv/api/channels/"+vl.Play_selectedChannel+"/access_token"+($i()&&Ai[vl.Users_Position].access_token?"?oauth_token="+Ai[vl.Users_Position].access_token:""):"https://usher.ttvnw.net/api/channel/hls/"+vl.Play_selectedChannel+".m3u8?&token="+encodeURIComponent(qm.token)+"&sig="+qm.sig+"&allow_source=true&allow_audi_only=true&fast_bread=true&allow_spectre=false",cu){if(!(t=Android.mreadUrl(e,bh,1,null)))return void sp();200===(t=JSON.parse(t)).status?(th=0,sh&&rp(t.responseText)):403===t.status?dp():404===t.status?Lg():sp()}else(t=new XMLHttpRequest).open("GET",mu+e,!0),t.timeout=bh,t.setRequestHeader(Wl,Xl),t.ontimeout=function(){},t.onreadystatechange=function(){4===t.readyState&&(200===t.status?(th=0,sh&&rp(t.responseText)):403===t.status?(op(t),zr?cp():dp()):404===t.status?(op(t),zr?cp():Lg()):(op(t),sp()))},t.send(null)}function op(e){jr&&(console.log(e.status),console.log(e.responseText))}function sp(){sh&&Ph&&(++th<nh+(Lh?8:0)?(bh+=250,Lh?window.setTimeout(ip,500):ip()):zr?cp():Lg())}function dp(){Op(),Gp(Vn),window.setTimeout(function(){sh&&Lg()},4e3)}function cp(){Wm=[{id:"1080p60(Source)",band:"(10.00Mbps)",url:"http://fake"}],Hm=Vm,sh&&fp()}function rp(e){Hm===Dm?(qm=JSON.parse(e),Hm=Rm,ap()):Hm===Rm&&(Wm=lp(zm=e),Hm=Vm,sh&&fp())}function lp(e){for(var t,n=[],a="",i=1,o=_p(e),s=0;s<o.length;s++)a=o[s].split('NAME="')[1].split('"')[0],t=up(o[s].split("BANDWIDTH=")[1].split(",")[0]),n.length?n[s-i].id!==a&&n[s-i].id!==a+" (source)"?n.push({id:a,band:t,url:o[s].split("\n")[2]}):i++:(-1===a.indexOf("ource")&&(a+=" (source)"),n.push({id:a,band:t,url:o[s].split("\n")[2]}));return n}function up(e){return 0<(e=parseInt(e))?" ("+parseFloat(e/1e6).toFixed(2)+"Mbps)":""}function _p(e){for(var t,n=[],a=/#EXT-X-MEDIA:(.)*\n#EXT-X-STREAM-INF:(.)*\n(.)*/g;t=a.exec(e);)n.push(t[0]);return n}function fp(){window.clearInterval(lh),Xm=Wm[Ym=0].url,-1!==Bm.indexOf("source")&&(Bm="source");for(var e=0;e<ng();e++){if(Wm[e].id===Bm){Xm=Wm[Ym=e].url;break}-1!==Wm[e].id.indexOf(Bm)&&(Xm=Wm[Ym=e].url)}Om=Bm,Hm=Vm,jr&&console.log("Play_onPlayer:",'\n\n"'+Xm+'"\n'),cu&&sh&&Android.startVideo(Xm,1),mp()}function mp(){Th=!1,Km&&!Zp()&&$p(),hh=!0,hp(),cu&&(uh=0,Bh=1+Fm/1e3,fh=!1,window.clearInterval(lh),lh=window.setInterval(pp,Oh))}function hp(){vl.Play_ChatForceDisable?Mc():Gr()}function pp(){var e=!bp();cu&&(Ih=Android.gettime()),sh&&rh===Ih&&e?Bh<++uh&&(fh&&mh&&Ym<ng()-1?Ym++:!fh&&mh&&_h++,navigator.onLine?1<_h?yp(_h,1,gp):(tg(),fp(),mh=!0):vp(!1,1)):(uh=_h=0,mh=!1),rh=Ih,e&&Sh++}function gp(e){if(!e){if(!(Ym<ng()-1))return void Lg();Ym++}_h=0,tg(),fp(),mh=!0}function vp(e,t){vl.Play_isHost=e,Cg(t),Pg(t)}function yp(e,t,n){var a=new XMLHttpRequest;a.timeout=1e3,a.open("GET","https://static-cdn.jtvnw.net/jtv-static/404_preview-10x10.png?"+Math.random(),!0),a.onreadystatechange=function(){4===a.readyState&&(200===a.status?n(2<e):12<e&&vp(!1,t))},a.send(null)}function bp(){return!!cu&&!Android.getPlaybackState()}function wp(){var e=X_();Pu("stream_clock",e),Pu("label_clock",e)}function kp(e){return e<10?"0"+e:e}function Cp(e){var t,n,a;return t=kp(parseInt(e)%60),n=kp((e=Math.floor(e/60))%60),a=kp(e=Math.floor(e/60)),e?a+":"+n+":"+t:n+":"+t}function Mp(e){var t,n,a;return t=kp(parseInt(e/1e3)%60),n=kp((e=Math.floor(e/1e3/60))%60),a=kp(e=Math.floor(e/60)),e?a+":"+n+":"+t:n+":"+t}function Ep(e){return Mp((new Date).getTime()-new Date(e).getTime())}function Ip(){sh&&(Sp(),vl.Play_WasPlaying=0,xp())}function Sp(){cu&&Android.stopVideo(1),sh=!1,EM(),xr(),Pp(),Lp(),vl.Play_selectedChannel_id=""}function xp(){_y(0,0),Mu("scene1"),Cu("scene2"),e_()}function Pp(){jp(),Hp(),Ap(),hg(),Ah="",Ym===ng()-1&&(Om=Wm[0].id),Zg===uy()-1&&(zg=Qg[0].id),Uf===mm()-1&&(Nf=Ff[0].id)}function Lp(){hh=!1,document.body.removeEventListener("keydown",Dg),document.removeEventListener("visibilitychange",Wh),Vc(),window.clearInterval(Jm),window.clearInterval(lh),gh=!1}function Tp(){xu("fallow_text",ya+Ot),Ra=!1}function Bp(){cu?Android.mshowLoading(!0):Mu("dialog_loading_play")}function Op(){cu?Android.mshowLoading(!1):Cu("dialog_loading_play")}function Gp(e){Pu("dialog_warning_play_text",e),Mu("dialog_warning_play")}function Ap(){Cu("dialog_warning_play")}function Np(){return Eu("dialog_warning_play")}function Up(){Dp()?Fp():(Mu("play_dialog_exit"),$m=window.setTimeout(Up,3e3))}function Fp(){window.clearTimeout($m),Cu("play_dialog_exit")}function Dp(){return Eu("play_dialog_exit")}function Rp(){window.clearTimeout(Qm)}function Vp(){window.clearTimeout(Zm)}function Hp(){Rp(),Vp(),Cu("play_dialog_simple_pause")}function Jp(){bp()?qp()?(Cu("play_dialog_simple_pause"),Zm=window.setTimeout(Jp,8e3)):(Mu("play_dialog_simple_pause"),Qm=window.setTimeout(Jp,1500)):Hp()}function qp(){return Eu("play_dialog_simple_pause")}function zp(){return"1"===document.getElementById("scene_channel_panel").style.opacity}function jp(){Yp(),document.getElementById("scene_channel_panel").style.opacity="0",Bm=Om,window.clearInterval(Hg)}function Xp(){lg(),eg(),tg(),Wp(),Hg=window.setInterval(Wp,1e3),wp(),Fp(),document.getElementById("scene_channel_panel").style.opacity="1",Kp()}function Wp(){Pu("stream_watching_time",v+Cp(Sh)),Pu("stream_live_time",y+(-1===eh.indexOf("00:00")?Ep(eh):eh)+b)}function Yp(){window.clearTimeout(Tm),Mv=0}function Kp(){Tm=window.setTimeout(jp,5e3)}function $p(){sg(),Mu("chat_container")}function Qp(){Cu("chat_container")}function Zp(){return Eu("chat_container")}function eg(){for(var e=Ym=0;e<ng();e++){if(Wm[e].id===Bm){Ym=e;break}-1!==Wm[e].id.indexOf(Bm)&&(Ym=e)}}function tg(){1===ng()?(document.getElementById("quality_arrow_up").style.opacity="0",document.getElementById("quality_arrow_down").style.opacity="0"):Ym?Ym===ng()-1?(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="0.2"):(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="1"):(document.getElementById("quality_arrow_up").style.opacity="0.2",document.getElementById("quality_arrow_down").style.opacity="1"),-1!==(Bm=Wm[Ym].id).indexOf("source")?Pu("quality_name",Bm.replace("source",ye)+Wm[Ym].band):Pu("quality_name",Bm+Wm[Ym].band)}function ng(){return Wm.length}function ag(e){Mm.style.height=Rh[Lm-1].containerHeight+"%",document.getElementById("play_chat_dialog").style.marginTop=Rh[Lm-1].dialogTop+"%",sg(),Dc(),e&&dg(Dn+Rh[Lm-1].percentage),window.setTimeout(function(){zc&&(zc.scrollTop=zc.scrollHeight)},500),pf("ChatSizeValue",Lm)}function ig(e){Mm.style.backgroundColor="rgba(0, 0, 0, "+Pm+")",e&&dg(Rn+(100*Pm).toFixed(0)+"%")}function og(e){Im=e?Fh[Sm=Im]:Dh[Im][Sm]}function sg(){var e=4===Lm;Im<0?Im=e?2:7:(e?2:7)<Im&&(Im=0),Mm.style.top=(e?.2:Uh[Im].top+Uh[Im].sizeOffset[Lm-1])+"%",Mm.style.left=Uh[Im+(e?2:0)].left+"%",pf("ChatPositionsValue",Im)}function dg(e){window.clearTimeout(dh),Pu("play_chat_dialog_text",e),Mu("play_chat_dialog"),dh=window.setTimeout(cg,1e3)}function cg(){Cu("play_chat_dialog")}function rg(e){bp()?(Hp(),cu&&Android.play(!0),xu("pause_button",'<i class="strokedbig icon-pause" style="color: #FFFFFF; font-size: 180%;"></i>'),1===e?(zp()&&jp(),window.clearInterval(lh),lh=window.setInterval(pp,Oh)):2===e?(zp()&&ay(),window.clearInterval(cv),cv=window.setInterval(Qv,Oh)):3===e&&(zp()&&lm(),window.clearInterval(If),If=window.setInterval(sm,Oh))):(window.clearInterval(lh),window.clearInterval(cv),window.clearInterval(If),xu("pause_button",'<i class="strokedbig icon-play-1" style="color: #FFFFFF; font-size: 180%;"></i>'),cu&&Android.play(!1),Jp())}function lg(){_g(),ph=1,ug()}function ug(){Iu("scene2_pannel_"+ph,"playbotton_focus")}function _g(){Su("scene2_pannel_"+ph,"playbotton_focus")}function fg(){jg=Hm=-1,Hf=-1,Qp(),jp(),lm(),ay(),gh||Ap(),Op(),Fp(),vg()}function mg(){Mu("dialog_end_stream")}function hg(){Cu("dialog_end_stream"),wg(),gg()}function pg(){return Eu("dialog_end_stream")}function gg(){yg(),kh=0,vg()}function vg(){Iu("dialog_end_"+kh,"dialog_end_icons_focus")}function yg(){Su("dialog_end_"+kh,"dialog_end_icons_focus")}function bg(e){1===e?Eh=vl.Play_selectedChannelDisplayname+" "+_:2===e?Eh=vl.Main_selectedChannelDisplayname+en:3===e&&(Eh=vl.Main_selectedChannelDisplayname+Nt),xu("dialog_end_stream_text",Eh+P+oa+nn+Ch+"..."),pg()?(jg=Hm=Vm,Hf=Jf,-1===--Ch?(xu("dialog_end_stream_text",Eh+P+oa+nn+"0..."),Fp(),Qp(),1===e?Ip():2===e?ey():3===e&&cm()):Mh=window.setTimeout(function(){bg(e)},1e3)):Mh=window.setTimeout(function(){bg(e)},50)}function wg(){window.clearTimeout(Mh),xu("dialog_end_stream_text",Eh+P+oa+an)}function kg(e){var t=!0;kh?1===kh?vl.Play_isHost?(vl.Play_DisplaynameHost=vl.Play_selectedChannelDisplayname+ae,vl.Play_selectedChannel=xh.target_login,vl.Play_selectedChannelDisplayname=xh.target_display_name,vl.Play_DisplaynameHost=vl.Play_DisplaynameHost+vl.Play_selectedChannelDisplayname,Sp(),document.body.addEventListener("keydown",Dg,!1),vl.Play_selectedChannel_id=xh.target_id,j_(jh)):vm():2===kh?Mg(e):3===kh&&Ig(e):2===e?Qg.length?(lv=!(Sv=!0),Kv(),Hp(),Zc=yv=0,dr()):(t=!1,Gp(ea),window.setTimeout(function(){Ap()},2e3)):3===e&&(Ff.length?(jf=!(Rf=!0),am(),Hp(),qf?(yv=0,Zc=Wd,dr()):Or()):(t=!1,Gp(ea),window.setTimeout(function(){Ap()},2e3))),1!==kh&&3===kh&&""===vl.Play_gameSelected&&(t=!1),t&&hg()}function Cg(e){e?1===e?(yg(),kh=2,vg(),document.getElementById("dialog_end_0").style.display="none",document.getElementById("dialog_end_1").style.display="none"):2===e?(gg(),document.getElementById("dialog_end_0").style.display="inline-block",document.getElementById("dialog_end_1").style.display="none"):3===e&&(gg(),document.getElementById("dialog_end_0").style.display="inline-block",document.getElementById("dialog_end_1").style.display="inline-block",Pu("dialog_end_vod_text",qf?dn:cn)):(yg(),kh=1,vg(),document.getElementById("dialog_end_0").style.display="none",document.getElementById("dialog_end_1").style.display="inline-block",Pu("dialog_end_vod_text",_n))}function Mg(e){vl.Main_BeforeChannelisSet||vl.Main_Go===sl||vl.Main_Go===dl||(vl.Main_BeforeChannel=vl.Main_BeforeAgameisSet&&vl.Main_Go!==Qr?vl.Main_BeforeAgame:vl.Main_Go,vl.Main_BeforeChannelisSet=!0),d_(vl.Main_Go),vl.Main_Go=ol,1===e?(vl.Main_selectedChannel_id=vl.Play_selectedChannel_id,vl.Main_selectedChannel=vl.Play_selectedChannel,vl.Main_selectedChannelDisplayname=vl.Play_selectedChannelDisplayname,Ds=Ra,Qp(),Ip()):2===e?ey():3===e&&cm()}function Eg(e){vl.Search_isSearching||(vl.Main_BeforeSearch=vl.Main_Go),d_(vl.Main_Go),vl.Main_Go=nl,1===e?(Qp(),Ip()):2===e?ey():3===e&&cm()}function Ig(e){if(""===vl.Play_gameSelected)return gh=!0,Gp(Kn),void window.setTimeout(function(){gh=!1,Ap()},2e3);vl.Main_BeforeAgameisSet||vl.Main_Go===fl||vl.Main_Go===ml||(vl.Main_BeforeAgame=vl.Main_BeforeChannelisSet&&vl.Main_Go!==ol&&vl.Main_Go!==sl&&vl.Main_Go!==dl?vl.Main_BeforeChannel:vl.Main_Go,vl.Main_BeforeAgameisSet=!0),d_(vl.Main_Go),vl.Main_Go=Qr,ko=!1,vl.Main_gameSelected=vl.Play_gameSelected,Qp(),1===e?Ip():2===e?ey():3===e&&cm()}function Sg(){$i()&&Ai[vl.Users_Position].access_token?Ra?_i():ri():(Gp(Gt),gh=!0,window.setTimeout(function(){Ap(),gh=!1},2e3))}function xg(e){ph?1===ph?(1===e?(fp(),jp()):2===e?(lv=!1,Kv(),ay()):3===e&&(jf=!1,am(),lm()),Hp()):2===ph?(Ja=1===e?vl.Play_selectedChannel_id:vl.Main_selectedChannel_id,Sg(),Yp(),1===e?Kp():2===e?cy():3===e&&pm()):3===ph?Ig(e):4===ph?Mg(e):5===ph&&Eg(e):vm()}function Play_PannelEndStart(e){1===e?(window.clearInterval(lh),Lg()):Pg(e)}function Pg(e){window.clearInterval(lh),window.clearInterval(If),window.clearInterval(cv),fg(),Ch=3,bg(e),mg(e)}function Lg(){Bp(),Hm=-1,th=0,bh=2e3,Vc(),window.clearInterval(Jm),window.clearInterval(lh),""!==vl.Play_selectedChannel_id?Gg():Tg()}function Tg(){Mf("https://api.twitch.tv/kraken/users?login="+vl.Play_selectedChannel,bh,2,null,Bg,Og,!1)}function Bg(e){void 0!==(e=JSON.parse(e).users[0])?(vl.Play_selectedChannel_id=e._id,th=0,bh=2e3,Gg()):Pg(1)}function Og(){++th<nh?(bh+=250,Tg()):vp(!1,1)}function Gg(){kf("https://tmi.twitch.tv/hosts?include_logins=1&host="+encodeURIComponent(vl.Play_selectedChannel_id),bh,1,null,Ng,Ag,!0)}function Ag(){++th<nh?(bh+=250,Gg()):vp(!1,1)}function Ng(e){void 0!==(xh=JSON.parse(e).hosts[0]).target_login?(gh=!0,Gp(vl.Play_selectedChannelDisplayname+un+ae+xh.target_display_name),window.setTimeout(function(){gh=!1},4e3),Cg(0),vl.Play_isHost=!0):(Cg(1),vl.Play_isHost=!1),Pg(1)}function Ug(){Ra?(xu("fallow_heart",'<i class="icon-heart strokicon" style="color: #00b300; font-size: 210%;"></i>'),xu("fallow_text",ya+St)):(xu("fallow_heart",'<i class="icon-heart-o strokicon" style="color: #FFFFFF; font-size: 210%;"></i>'),xu("fallow_text",ya+xt))}function Fg(e){pg()&&!Dp()?(wg(),Up()):CM()?EM():zp()&&!My()?e?ay():jp():My()&&Dp()?(Cy(),ty(!1),xp()):Dp()?(Fp(),Qp(),e?ey():Ip()):(Np()&&Ap(),Up())}function Dg(e){if(Hm!==Vm)switch(e.keyCode){case La:Dp()?(Fp(),Qp(),Ip()):Up()}else switch(e.keyCode){case Ea:CM()?Um&&!$C&&(AM(),Um--,LM()):Gm&&!zp()&&Zp()?(Im++,sg()):zp()?(_g(),5<++ph&&(ph=1),ug(),Yp(),Kp()):pg()?(wg(),yg(),--kh<(vl.Play_isHost?1:2)&&(kh=3),vg()):Xp();break;case Sa:CM()?Um<nM-1&&!$C&&(AM(),Um++,LM()):!Gm||zp()||pg()?zp()?(_g(),--ph<1&&(ph=5),ug(),Yp(),Kp()):pg()?(wg(),yg(),3<++kh&&(kh=vl.Play_isHost?1:2),vg()):Xp():pf("ChatEnable",(Km=Zp()||pg()?(Qp(),!1):($p(),!0))?"true":"false");break;case Ia:zp()?(0<Ym&&1===ph&&(Ym--,tg()),Yp(),Kp()):!CM()&&$i()?MM():pg()?wg():CM()&&PM();break;case xa:zp()?(Ym<ng()-1&&1===ph&&(Ym++,tg()),Yp(),Kp()):CM()?EM():Gm&&Zp()?(4<++Lm?og(!(Lm=1)):4===Lm&&og(!0),ag(!0)):pg()?wg():Xp();break;case Pa:pg()?kg(1):zp()?xg(1):CM()?vl.Play_selectedChannel!==JSON.parse(document.getElementById(lM[8]+Um).getAttribute(nu))[0]?(Sp(),U_(Um,lM,Dg)):IM():Xp();break;case La:Fg(!1);break;case Ca:case ka:case Ma:pg()||rg(1)}}var Rg,Vg,Hg,Jg,qg="source",zg=qg,jg=0,Xg=null,Wg=0,Yg=0,Kg=0,$g="",Qg=[],Zg=0,ev=0,tv=5,nv=!1,av=2e3,iv=0,ov=5,sv=1e4,dv=0,cv=null,rv=0,lv=!1,uv=0,_v=!1,fv=!1,mv=0,hv=!1,pv=0,gv=2e3,vv=!1,yv=0,bv={},wv=0,kv=0,Cv=!0,Mv=0,Ev=0,Iv=0,Sv=!1,xv=[0,10,30,60,120,300,600,900,1200,1800],Pv=!1;function Lv(){Bp(),hg(),yv=0,Pu("stream_live_time",""),Pu("stream_watching_time",""),Pu("progress_bar_current_time",Cp(0)),er=A+".",xu("pause_button",'<i class="strokedbig icon-pause" style="color: #FFFFFF; font-size: 180%;"></i>'),Cu("progress_pause_holder"),Ev=0,hy((Nh=xv)[1]),jg=Dm,qf=!0,Wd=0,vl.Play_isHost=!1,vl.vodOffset?(Bv(),Nv()):(Cv&&""!==vl.Main_selectedChannel_id?(np(document.getElementById("stream_info_icon"),vl.Main_selectedChannelLogo),bv["#"+vl.ChannelVod_vodId]||dr(),$i()?(Ja=vl.Main_selectedChannel_id,Ha=!0,ii()):Tp()):(Bv(),Ov()),Pu("stream_info_name",vl.Main_selectedChannelDisplayname),xu("stream_info_title",qd),xu("stream_info_game",zd+", ["+Fd.toUpperCase()+"]"),Pu("stream_live_icon",jd)),bv["#"+vl.ChannelVod_vodId]&&!vl.vodOffset?(Op(),ky()):Tv()}function Tv(){window.setTimeout(function(){Mu("scene_channel_panel_bottom"),xu("pause_button",'<i class="strokedbig icon-pause" style="color: #FFFFFF; font-size: 180%;"></i>'),Mu("progress_pause_holder")},1e3),Pu("progress_bar_duration",Cp(Ad)),vl.Play_WasPlaying=2,o_(),Jg=window.setInterval(Vv,6e4),b_(Ah),rv=uv=0,window.clearInterval(cv),gh=vv=_v=!(xm=-13),hv=!1,Kg=Yg=Wg=pv=0,document.addEventListener("visibilitychange",Dv,!1),Pv=!(nv=!(fv=!1)),Hv(),Cg(2),document.body.removeEventListener("keyup",L_)}function Bv(){iv=0,ov=5,sv=1e4}function Ov(){Mf("https://api.twitch.tv/kraken/users?login="+encodeURIComponent(vl.Main_selectedChannel),sv,2,null,Gv,Av,!1)}function Gv(e){void 0!==(e=JSON.parse(e).users[0])?(vl.Main_selectedChannelLogo=e.logo,vl.Main_selectedChannel_id=e._id,bv["#"+vl.ChannelVod_vodId]||dr(),$i()?(Ja=vl.Main_selectedChannel_id,Ha=!0,ii()):Tp()):(vl.Main_selectedChannelLogo=_u,vl.Main_selectedChannel_id=""),np(document.getElementById("stream_info_icon"),vl.Main_selectedChannelLogo)}function Av(){++iv<ov?(sv+=500,window.setTimeout(function(){nv&&Ov()},750)):Vg=window.setTimeout(Ov,2500)}function Nv(){Mf("https://api.twitch.tv/kraken/videos/"+vl.ChannelVod_vodId,sv,2,null,Fv,Uv,!1)}function Uv(){++iv<ov&&(sv+=2e3,Nv())}function Fv(e){e=JSON.parse(e),xu("stream_info_title",xS.parse(e.title)),xu("stream_info_game",$t+g+e.game+", "+Ku(e.views)+V+", ["+e.channel.broadcaster_language.toUpperCase()+"]"),Pu("stream_live_icon",D+u_(e.created_at)),Pu("progress_bar_duration",Cp(Ad=parseInt(e.length))),yv=1e3*vl.vodOffset,_y(vl.vodOffset,Ad,!0),vl.Main_selectedChannelDisplayname=e.channel.display_name,Pu("stream_info_name",vl.Main_selectedChannelDisplayname),vl.Main_selectedChannelLogo=e.channel.logo,np(document.getElementById("stream_info_icon"),vl.Main_selectedChannelLogo),vl.Main_selectedChannel_id=e.channel._id,vl.Main_selectedChannel=e.channel.name,$i()?(Ha=!0,Ja=vl.Main_selectedChannel_id,ii()):Tp(),b_(e.increment_view_count_url)}function Dv(){document.hidden?pg()?(Fp(),Qp(),ey()):(Vv(),vy(),Sr(),Pp(),window.clearInterval(cv),window.clearInterval(Jg)):(nv=!0,Hp(),nv&&(Bp(),oh=oh=0,navigator.onLine?$v():Cm=window.setInterval(Rv,100),Ir(or),Cg(2),Jg=window.setInterval(Vv,6e4)))}function Rv(){(navigator.onLine||200<oh)&&(window.clearInterval(Cm),jg=Dm,Hv()),oh++}function Vv(){vl.vodOffset=cu?parseInt(Android.gettime()/1e3):0,o_(),vl.vodOffset=0}function Hv(){ev=0,gv=2e3,Jv()}function Jv(){kf(jg===Dm?"https://api.twitch.tv/api/vods/"+vl.ChannelVod_vodId+"/access_token"+($i()&&Ai[vl.Users_Position].access_token?"?oauth_token="+Ai[vl.Users_Position].access_token:""):"https://usher.ttvnw.net/vod/"+vl.ChannelVod_vodId+".m3u8?&nauth="+encodeURIComponent(Wg.token)+"&nauthsig="+Wg.sig+"&allow_source=true&allow_audi_only=true&allow_spectre=false",bh,1,null,jv,qv,!0)}function qv(){if(nv){var e;if(Wg.token&&(e=JSON.parse(Wg.token)),e&&0!==JSON.parse(Wg.token).chansub.restricted_bitrates.length)return void Xv();++ev<tv?(gv+=250,Jv()):zr?zv():(Op(),Pg(2))}}function zv(){Qg=[{id:"1080p60(Source)",band:"(10.00Mbps)",url:"http://fake"}],jg=Vm,nv&&Kv()}function jv(e){jg===Dm?(Wg=JSON.parse(e),jg=Rm,Hv()):jg===Rm&&(Qg=lp(Yg=e),jg=Vm,nv&&Kv())}function Xv(){$i()&&Ai[vl.Users_Position].access_token?(Ja=vl.Main_selectedChannel_id,hi()):(Op(),Gp(L+Pt),window.setTimeout(function(){nv&&ey()},4e3))}function Wv(){Op(),Gp(L+Lt),window.setTimeout(function(){nv&&ey()},4e3)}function Yv(){Pv?(Op(),Gp(L+Tt),window.setTimeout(function(){nv&&ey()},4e3)):(Pv=!0,jg=Dm,Hv())}function Kv(){window.clearInterval(cv),$g=Qg[Zg=0].url,-1!==qg.indexOf("source")&&(qg="source");for(var e=0;e<uy();e++){if(Qg[e].id===qg){$g=Qg[Zg=e].url;break}-1!==Qg[e].id.indexOf(qg)&&($g=Qg[Zg=e].url)}zg=qg,$v()}function $v(){jr&&console.log("PlayVod_onPlayer:",'\n\n"'+$g+'"\n'),vl.vodOffset?(Zc=vl.vodOffset,dr(),cu&&nv&&Android.startVideoOffset($g,2,Sv?-1:1e3*vl.vodOffset),vl.vodOffset=0):cu&&nv&&Android.startVideoOffset($g,2,Sv?-1:Android.gettime()),Sv=!1,Km&&!Zp()&&$p(),cu&&(rv=0,Bh=3+av/1e3,lv=!1,window.clearInterval(cv),cv=window.setInterval(Qv,Oh))}function Qv(){cu&&(yv=Android.gettime()),nv&&dv===yv&&!bp()?++rv>Bh&&(lv&&_v&&Zg<uy()-1?Zg++:!lv&&_v&&uv++,navigator.onLine?1<uv?yp(uv,2,Zv):(ly(),Kv(),_v=!0):vp(!1,2)):(rv=uv=0,_v=!1),dv=yv}function Zv(e){if(!e){if(!(Zg<uy()-1))return void vp(!1,2);Zg++}uv=0,ly(),Kv(),_v=!0}function ey(){nv&&(Qg=[],ty(!0),xp())}function ty(e){e&&vy(),cu&&Android.stopVideo(2),nv=!1,window.clearInterval(Jg),window.clearInterval(Vg),vl.Play_WasPlaying=0,Cv=!0,xr(),EM(),Pp(),ny()}function ny(){document.body.removeEventListener("keydown",Py),document.removeEventListener("visibilitychange",Dv),vl.vodOffset=0,window.clearInterval(Xg),window.clearInterval(cv),Ad=0}function ay(){hv=!1,mv=pv=0,Yp(),document.getElementById("scene_channel_panel").style.opacity="0",cu&&_y(Android.gettime()/1e3,Ad,!0),xu("progress_bar_jump_to",ya),document.getElementById("progress_bar_steps").style.display="none",qg=zg,window.clearInterval(Hg)}function iy(e){oy(),wp(),Fp(),Hg=window.setInterval(oy,1e3),e&&(sy(),ry(),ly(),cy()),document.getElementById("scene_channel_panel").style.opacity="1"}function oy(){cu&&_y(Android.gettime()/1e3,Ad,!hv)}function sy(){kv=bp()?1:0,dy()}function dy(){kv?1===kv?(Iu("pause_button","progress_bar_div_focus"),Su("progress_bar_div","progress_bar_div_focus"),_g(),xu("progress_bar_jump_to",ya),document.getElementById("progress_bar_steps").style.display="none"):2===kv&&(Su("pause_button","progress_bar_div_focus"),Su("progress_bar_div","progress_bar_div_focus"),ug(),xu("progress_bar_jump_to",ya),document.getElementById("progress_bar_steps").style.display="none"):(Su("pause_button","progress_bar_div_focus"),Iu("progress_bar_div","progress_bar_div_focus"),_g(),mv&&(py(),document.getElementById("progress_bar_steps").style.display="inline-block"))}function cy(){Tm=window.setTimeout(ay,5e3+Mv)}function ry(){for(var e=Zg=0;e<uy();e++){if(Qg[e].id===qg){Zg=e;break}-1!==Qg[e].id.indexOf(qg)&&(Zg=e)}}function ly(){1===uy()?(document.getElementById("quality_arrow_up").style.opacity="0",document.getElementById("quality_arrow_down").style.opacity="0"):Zg?Zg===uy()-1?(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="0.2"):(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="1"):(document.getElementById("quality_arrow_up").style.opacity="0.2",document.getElementById("quality_arrow_down").style.opacity="1"),-1!==(qg=Qg[Zg].id).indexOf("source")?Pu("quality_name",qg.replace("source",ye)+Qg[Zg].band):Pu("quality_name",qg+Qg[Zg].band)}function uy(){return Qg.length}function _y(e,t,n){Pu("progress_bar_current_time",Cp(e)),n&&(Em.style.width=e/t*100+"%")}function fy(){Hp(),pg()||(jf=lv=!1,nv?(cu&&Android.startVideoOffset($g,2,0<Iv?1e3*Iv:-1),Zc=Iv):(Zc=Wd,cu&&Android.startVideoOffset(Df,3,0<Iv?1e3*Iv:-1)),qf&&dr()),xu("progress_bar_jump_to",ya),document.getElementById("progress_bar_steps").style.display="none",hv=!1,Iv=mv=pv=0}function my(){Ev=pv=0,hy(Nh[1])}function hy(e){mv&&!kv&&(document.getElementById("progress_bar_steps").style.display="inline-block"),60<Math.abs(e)?Pu("progress_bar_steps",Hn+e/60+qn):Pu("progress_bar_steps",e?Hn+e+Jn:Hn+Nh[1]+Jn)}function py(){Pu("progress_bar_jump_to",_e+" ("+(mv<0?"-":"")+Cp(Math.abs(mv))+")"+fe+Cp(Iv))}function gy(e,t){var n=cu?Android.gettime()/1e3:0;window.clearTimeout(Rg),hv=!0,pv<Nh.length-1&&Ev++%6==0&&pv++,mv+=Nh[pv]*e,Iv=n+mv,nv&&(Iv=10*Math.floor(Iv/10)),t<Iv?(mv=t-n-Nh[1],Iv=n+mv,Ev=pv=0):Iv<0&&(mv=0-n,Iv=Ev=pv=0),py(),Em.style.width=Iv/t*100+"%",hy(Nh[pv]*e),Rg=window.setTimeout(my,1e3)}function vy(){var e=cu?parseInt(Android.gettime()/1e3):0,t="#"+vl.ChannelVod_vodId;300<e&&e<Ad-300?(bv[t]&&delete bv[t],bv[t]=e,pf("PlayVod_VodIds",JSON.stringify(bv))):Ad-300<e&&bv[t]&&(delete bv[t],pf("PlayVod_VodIds",JSON.stringify(bv)))}function yy(){bv=vf("PlayVod_VodIds",{});var e=by();250<e&&wy(e-250)}function by(){var e=0;for(var t in bv)bv.hasOwnProperty(t)&&e++;return e}function wy(e){var t=0;for(var n in bv){if(!(t<e))break;delete bv[n],t++}pf("PlayVod_VodIds",JSON.stringify(bv))}function ky(){Cu("scene_channel_panel_bottom"),iy(!1),xu("dialog_vod_saved_text",Cn+Mp(1e3*bv["#"+vl.ChannelVod_vodId])),Mu("dialog_vod_start")}function Cy(){ay(),Cu("dialog_vod_start"),Ey(),window.setTimeout(function(){Mu("scene_channel_panel_bottom")},1e3)}function My(){return Eu("dialog_vod_start")}function Ey(){Sy(),wv=0,Iy()}function Iy(){Iu("dialog_vod_"+wv,"dialog_end_icons_focus")}function Sy(){Su("dialog_vod_"+wv,"dialog_end_icons_focus")}function xy(e){Cy(),e?(delete bv["#"+vl.ChannelVod_vodId],vl.vodOffset=0,Lv()):(vl.vodOffset=bv["#"+vl.ChannelVod_vodId],yv=1e3*vl.vodOffset,_y(vl.vodOffset,Ad,!0),Tv())}function Py(e){if(jg===Vm||My())switch(e.keyCode){case Ea:CM()?Um&&!$C&&(AM(),Um--,LM()):Gm&&!zp()&&Zp()?(Im++,sg()):zp()&&!My()?(Yp(),kv?(_g(),5<++ph&&(ph=1),ug()):(gy(-1,Ad),Mv=2500),cy()):My()?(Sy(),wv?wv--:wv++,Iy()):pg()?(wg(),yg(),--kh<0&&(kh=3),1===kh&&(kh=0),vg()):My()||iy(!0);break;case Sa:CM()?Um<nM-1&&!$C&&(AM(),Um++,LM()):!Gm||zp()||pg()?zp()&&!My()?(Yp(),kv?(_g(),--ph<1&&(ph=5),ug()):(gy(1,Ad),Mv=2500),cy()):My()?(Sy(),wv?wv--:wv++,Iy()):pg()?(wg(),yg(),3<++kh&&(kh=0),1===kh&&(kh=2),vg()):My()||iy(!0):pf("ChatEnable",(Km=Zp()||pg()?(Qp(),!1):($p(),!0))?"true":"false");break;case Ia:pg()?wg():zp()&&!My()?(2===kv&&1!==ph?(kv--,dy()):1===kv?(kv--,dy()):0<Zg&&1===ph&&(Zg--,ly()),Yp(),cy()):CM()?CM()?PM():My()||iy(!0):MM();break;case xa:pg()?wg():zp()&&!My()?(kv?1===kv?(kv++,dy()):Zg<uy()-1&&1===ph&&(Zg++,ly()):(kv++,dy()),Yp(),cy()):CM()?EM():Gm&&Zp()?(4<++Lm?og(!(Lm=1)):4===Lm&&og(!0),ag(!0)):My()||iy(!0);break;case Pa:My()?xy(wv):pg()?kg(2):zp()?kv?1===kv?(vl.Play_ChatForceDisable&&(bp()?Ir(or):Sr()),pg()||rg(2)):xg(2):(Yp(),cy(),mv&&fy()):CM()?(ty(!0),U_(Um,lM,Dg)):iy(!0);break;case La:Fg(!0);break;case Ca:case ka:case Ma:vl.Play_ChatForceDisable&&(bp()?Ir(or):Sr()),pg()||rg(2)}else switch(e.keyCode){case La:Dp()?(Fp(),ey()):Up()}}var Ly={};function Ty(){console.log("InitScreens place holder")}function By(){vb(),yb(),wb(),kb(),Cb(),Eb(),Ib()}function Oy(e){return[e+"_thumbdiv",e+"_img",e+"_infodiv",e+"_title",e+"_createdon",e+"_game",e+"_viwers",e+"_duration",e+"_cell","cpempty_",e+"_scroll",e+"_lang"]}function Gy(){for(var e,t={},n=0;n<arguments.length;n+=1){var a=arguments[n],i=Object.keys(a);for(e=0;e<i.length;e+=1)t[i[e]]=a[i[e]]}return t}function Ay(){Bl=-1,vl.Main_Go=Ly.screen,Ly.label_init(),document.body.addEventListener("keydown",tb,!1),Ly.status?(Mu(Ly.ids[10]),v_(Ly.posY),Wy(),o_()):Uy()}function Ny(){Bl=0,Ly.label_exit(),document.body.removeEventListener("keydown",tb),Cu(Ly.ids[10])}function Uy(){Lu(),m_(Ly.table),Hu(),Ly.cursor=null,Ly.status=!1,Ly.row=document.createElement("div"),Ly.MaxOffset=0,Ly.TopRowCreated=!1,Ly.offset=0,Ly.idObject={},Ly.FirstLoad=!0,Ly.itemsCount=0,Ly.posX=0,Ly.posY=0,Ly.row_id=0,Ly.coloumn_id=0,Ly.data=null,Ly.data_cursor=0,Ly.dataEnded=!1,Uu(),Fy(),Dy()}function Fy(){Ly.loadingData=!0,Ly.loadingDataTry=0,Ly.loadingDataTimeout=3500}function Dy(){Ly.set_url(),kf(Ly.url,Ly.loadingDataTimeout,2,null,Vy,Ry)}function Ry(){Ly.loadingDataTry++,Ly.loadingDataTry<Ly.loadingDataTryMax?(Ly.loadingDataTimeout+=500,Dy()):(Ly.loadingData=!1,Ly.itemsCount?Ly.dataEnded=!0:(Ly.FirstLoad=!1,Tu(),Vu(T)))}function Vy(e){Ly.concatenate(e)}function Hy(){var e=Ly.data.length-Ly.data_cursor;if(e>Ly.ItemsLimit?e=Ly.ItemsLimit:Ly.loadingData||(Ly.dataEnded=!0),e){var t=Math.ceil(e/Ly.ColoumnsCount),n=Ly.row_id+t,a=document.getElementById(Ly.table);if(Ly.HasSwitches&&!Ly.TopRowCreated){Ly.TopRowCreated=!0,Ly.row=document.createElement("div");var i='<i class="icon-history stream_channel_fallow_icon"></i>'+ya+ya+m;(Sl=document.createElement("div")).setAttribute("id",Ly.ids[8]+"y_0"),Sl.className="stream_cell_period",Sl.innerHTML='<div id="'+Ly.ids[0]+'y_0" class="stream_thumbnail_channel_vod" ><div id="'+Ly.ids[3]+'y_0" class="stream_channel_fallow_game">'+i+"</div></div>",Ly.row.appendChild(Sl),a.appendChild(Ly.row)}for(Ly.row_id;Ly.row_id<n;){for(Ly.coloumn_id===Ly.ColoumnsCount&&(Ly.row=document.createElement("div"),Ly.coloumn_id=0),Ly.coloumn_id;Ly.coloumn_id<Ly.ColoumnsCount&&Ly.data_cursor<Ly.data.length;Ly.data_cursor++)Ly.data[Ly.data_cursor]&&Ly.addCell(Ly.data[Ly.data_cursor]);if(a.appendChild(Ly.row),Ly.coloumn_id===Ly.ColoumnsCount)Ly.row_id++;else if(Ly.data_cursor>=Ly.data.length)break}}Ly.emptyContent=!e&&!Ly.status,Xy()}function Jy(e,t,n,a){var i=e+"_"+t;return g_(n[1]+i,a),e<Ly.ColoumnsCount&&b_(a),(Sl=document.createElement("div")).style.cssText=Ly.ThumbCssText,i}function qy(e,t,n,a,i,o){var s=Jy(e,t,n,a);return Sl.setAttribute("id",n[5]+s),Sl.setAttribute(nu,i),Sl.innerHTML='<div id="'+n[0]+s+'" class="stream_thumbnail_game"><div><img id="'+n[1]+s+'" class="stream_img"></div><div id="'+n[2]+s+'" class="stream_text2"><div id="<div id="'+n[3]+s+'" class="stream_channel">'+i+"</div>"+(""!==o?'<div id="'+n[4]+s+'"class="stream_info_games" style="width: 100%; display: inline-block;">'+o+"</div>":"")+"</div></div>",Sl}function zy(e,t,n,a,i,o,s,d,c,r,l,u,_,f,m,h){var p=Jy(e,t,n,a);return Sl.setAttribute("id",n[8]+p),Sl.setAttribute(nu,JSON.stringify([l,r,s[2],u,i,_,f,m,h,s[0],c,s[1]+s[2]])),Sl.innerHTML='<div id="'+n[0]+p+'" class="stream_thumbnail_clip"><div><img id="'+n[1]+p+'" class="stream_img"></div><div id="'+n[2]+p+'" class="stream_text2"><div style="line-height: 14px;"><div id="'+n[3]+p+'" class="stream_info" style="width: 72%; display: inline-block; font-size: 85%;">'+i+'</div><div id="'+n[7]+p+'"class="stream_info" style="width:27%; float: right; text-align: right; display: inline-block;">'+c+'</div></div><div  style="line-height: 12px;"><div id="'+n[4]+p+'"class="stream_info" style="width: 59%; display: inline-block;">'+o[0]+o[1]+'</div><div id="'+n[5]+p+'"class="stream_info" style="width: 39%; display: inline-block; float: right; text-align: right;">'+R+Cp(r)+'</div></div><div id="'+n[11]+p+'"class="stream_info">'+s[0]+oa+s[1]+s[2]+'</div><div id="'+n[6]+p+'"class="stream_info">'+d+V+"</div></div></div>",Sl}function jy(e,t,n,a,i){var o=Jy(e,t,a,i[0]);return Sl.setAttribute("id",a[8]+o),Sl.setAttribute(nu,JSON.stringify(n)),Sl.innerHTML='<div id="'+a[0]+o+'" class="stream_thumbnail_clip"><div><img id="'+a[1]+o+'" class="stream_img"></div><div id="'+a[2]+o+'" class="stream_text2"><div style="line-height: 14px;"><div id="'+a[3]+o+'" class="stream_channel" style="width: 66%; display: inline-block;">'+i[1]+'</div><div id="'+a[7]+o+'"class="stream_info" style="width:33%; float: right; text-align: right; display: inline-block;">'+i[5]+'</div></div><div id="'+a[4]+o+'"class="stream_info">'+xS.parse(i[2])+'</div><div id="'+a[5]+o+'"class="stream_info">'+g+i[3]+'</div><div id="'+a[6]+o+'"class="stream_info">'+i[4]+"</div></div></div>",Sl}function Xy(){Ly.status?(h_(Ly.img_404),Fu(Ly.posX,Ly.posY,Ly.ColoumnsCount,Ly.itemsCount)):(Ly.emptyContent?Vu(Ly.empty_str()):(Ly.status=!0,h_(Ly.img_404)),Ol&&Ly.status&&bk.restor_playback.defaultValue?vl.Play_WasPlaying?(d_(vl.Main_Go),vl.Main_Go=gl,vl.vodOffset||(vl.vodOffset=1),Ad=vl.vodOffset+1,Gp(zn),1===vl.Play_WasPlaying?F_():V_(),a_(!0),window.setTimeout(function(){gh||Ap()},2e3)):1!==gl?(d_(vl.Main_Go),vl.Main_Go=gl,J_(Ly.posY+"_"+Ly.posX,Ly.ids),a_()):(vl.Never_run&&Xu(),vl.Never_run=!1,Wy(),o_()):(Wy(),o_()),Ol=!1,Ly.FirstLoad=!1,Tu())}function Wy(){Ly.posY<0?Ky():(Ly.addFocus(Ly.posY,Ly.posX,Ly.ids,Ly.ColoumnsCount,Ly.itemsCount),2<Ly.posY&&Ly.data_cursor+rb>Ly.data.length&&!Ly.dataEnded&&!Ly.loadingData&&(Fy(),Dy()),Ly.posY+Ly.ItemsReloadLimit>Ly.itemsCount/Ly.ColoumnsCount&&Ly.data_cursor<Ly.data.length&&(p_(),Ly.loadDataSuccess()),wl&&J_(Ly.posY+"_"+Ly.posX,Ly.ids))}function Yy(e,t){J_(Ly.posY+"_"+Ly.posX,Ly.ids),Ly.posY+=e,Ly.posX=t,Wy()}function Ky(){Iu(Ly.ids[0]+"y_0",tu)}function $y(){Su(Ly.ids[0]+"y_0",tu)}function Qy(e){Yu()?Wu():zu()?qu():(e===Ly.screen?vl.Main_Go=Yr:vl.Main_Go=e,Ny())}function Zy(e){if(!Ly.HasSwitches||Ly.posY||-1!==e||Ly.emptyContent){if(Ly.HasSwitches&&-1===Ly.posY)Ly.posY=0,Wy(),$y();else for(var t=0;t<Ly.ColoumnsCount;t++)if(Zu(Ly.posY+e,Ly.posX-t,Ly.ids[0]))return void Yy(e,Ly.posX-t)}else J_(Ly.posY+"_"+Ly.posX,Ly.ids),Ly.posY=-1,Ky()}function eb(e,t){Zu(Ly.posY,Ly.posX+e,Ly.ids[0])?Yy(0,Ly.posX+e):Zu(Ly.posY+e,t,Ly.ids[0])&&Yy(e,t)}function tb(e){if(!Ly.FirstLoad&&!O_())switch(B_(),e.keyCode){case La:Ly.key_exit();break;case Ea:eb(-1,Ly.ColoumnsCount-1);break;case Sa:eb(1,0);break;case Ia:Zy(-1);break;case xa:Zy(1);break;case Ca:case ka:case Ma:case Pa:Ly.key_play()}}Ly.FirstLoad=!1;var nb,ab,ib,ob,sb,db,cb,rb=100,lb="",ub="",_b="",fb="",mb="",hb="",pb={posX:0,posY:0,row_id:0,coloumn_id:0,dataEnded:!1,idObject:{},loadingData:!1,itemsCount:0,loadingDataTryMax:5,loadingDataTimeout:3500,MaxOffset:0,offset:0,status:!1,emptyContent:!1,itemsCountCheck:!1,FirstLoad:!1,row:0,data:null,data_cursor:0,loadDataSuccess:Hy,set_ThumbSize:function(){this.ThumbCssText="width: "+this.ThumbSize+"%; display: inline-block; padding: 3px;"},key_exit:function(){Yu()?Wu():zu()?qu():(this.itemsCount&&J_(this.posY+"_"+this.posX,this.ids),lf(tb))}},gb={ThumbSize:32.65,ItemsLimit:Ul,ItemsReloadLimit:Dl,ColoumnsCount:Fl,addFocus:A_,img_404:fu,empty_str:function(){return B+K},key_play:function(){U_(this.posY+"_"+this.posX,this.ids,tb)}};function vb(){(db=Gy(db=Gy({ids:Oy("Live"),table:"stream_table_live",screen:Yr,base_url:"https://api.twitch.tv/kraken/streams?limit="+rb,set_url:function(){this.offset&&this.offset+rb>this.MaxOffset&&(this.dataEnded=!0),this.url=this.base_url+"&offset="+this.offset+(""!==Pl?"&broadcaster_language="+Pl:"")},label_init:function(){vl.Main_CenterLablesVectorPos=0,Iu("top_bar_live","icon_center_focus")},label_exit:function(){Su("top_bar_live","icon_center_focus")},concatenate:function(e){if(this.data){var t=JSON.parse(e);this.MaxOffset=t._total,this.data=this.data.concat(t.streams),this.offset=this.data.length,this.offset>this.MaxOffset&&(this.dataEnded=!0),Ly.loadingData=!1}else this.data=JSON.parse(e),this.MaxOffset=this.data._total,this.data=this.data.streams,this.offset=this.data.length,this.offset>this.MaxOffset&&(this.dataEnded=!0),this.loadDataSuccess(),Ly.loadingData=!1},addCell:function(e){Ly.idObject[e.channel._id]||(Ly.itemsCount++,Ly.idObject[e.channel._id]=1,Ly.row.appendChild(jy(Ly.row_id,Ly.coloumn_id,[e.channel.name,e.channel._id,e.channel.status],this.ids,[e.preview.template.replace("{width}x{height}",Zl),Qu(JSON.stringify(e.stream_type))+e.channel.display_name,e.channel.status,e.game,y+Ep(e.created_at)+b+", "+h+Ku(e.viewers)+H,$u(e.video_height,e.average_fps,e.channel.broadcaster_language)])),Ly.coloumn_id++)}},pb),gb)).set_ThumbSize()}function yb(){(cb=Gy(cb=Gy({ids:Oy("Featured"),table:"stream_table_featured",screen:hl,base_url:"https://api.twitch.tv/kraken/streams/featured?limit="+rb,set_url:function(){this.url=this.base_url+"&offset="+this.offset+($i()&&Ai[vl.Users_Position].access_token?"&oauth_token="+Ai[vl.Users_Position].access_token:"")},label_init:function(){vl.Main_CenterLablesVectorPos=2,Iu("top_bar_featured","icon_center_focus")},label_exit:function(){Su("top_bar_featured","icon_center_focus")},concatenate:function(e){this.data=JSON.parse(e),this.data=this.data.featured,this.dataEnded=!0,this.loadDataSuccess(),Ly.loadingData=!1},addCell:function(e){e=e.stream,Ly.idObject[e.channel._id]||(Ly.itemsCount++,Ly.idObject[e.channel._id]=1,Ly.row.appendChild(jy(Ly.row_id,Ly.coloumn_id,[e.channel.name,e.channel._id,e.channel.status],this.ids,[e.preview.template.replace("{width}x{height}",Zl),Qu(JSON.stringify(e.stream_type))+e.channel.display_name,e.channel.status,e.game,y+Ep(e.created_at)+b+", "+h+Ku(e.viewers)+H,$u(e.video_height,e.average_fps,e.channel.broadcaster_language)])),Ly.coloumn_id++)}},pb),gb)).set_ThumbSize()}var bb={ThumbSize:32.65,ItemsLimit:Ul,HasSwitches:!0,TopRowCreated:!1,ItemsReloadLimit:Dl,ColoumnsCount:Fl,addFocus:A_,cursor:null,period:["day","week","month","all"],img_404:fu,empty_str:function(){return B+U},key_play:function(){-1===this.posY?this.loadingData||(this.periodPos++,4<this.periodPos&&(this.periodPos=1),this.SetPeriod(),Uy()):D_(this.posY+"_"+this.posX,this.ids,tb)},concatenate:function(e){if(this.data){var t=JSON.parse(e);this.cursor=t._cursor,""===this.cursor&&(this.dataEnded=!0),this.data=this.data.concat(t.clips),Ly.loadingData=!1}else this.data=JSON.parse(e),this.cursor=this.data._cursor,""===this.cursor&&(this.dataEnded=!0),this.data=this.data.clips,this.loadDataSuccess(),Ly.loadingData=!1},addCell:function(e){Ly.idObject[e.tracking_id]||(Ly.itemsCount++,Ly.idObject[e.tracking_id]=1,Ly.row.appendChild(zy(Ly.row_id,Ly.coloumn_id,Ly.ids,e.thumbnails.medium,e.broadcaster.display_name,[sn,u_(e.created_at)],[xS.parse(e.title),g,e.game],Ku(e.views),"["+e.language.toUpperCase()+"]",e.duration,e.slug,e.broadcaster.name,e.broadcaster.logo.replace("150x150","300x300"),e.broadcaster.id,null!==e.vod?e.vod.id:null,null!==e.vod?e.vod.offset:null)),Ly.coloumn_id++)}};function wb(){(nb=Gy(nb=Gy({ids:Oy("Clip"),table:"stream_table_clip",screen:_l,periodPos:gf("Clip_periodPos",2),base_url:"https://api.twitch.tv/kraken/clips/top?limit="+rb,set_url:function(){this.url=this.base_url+"&period="+this.period[this.periodPos-1]+(this.cursor?"&cursor="+this.cursor:"")+(""!==Pl?"&language="+Pl:"")},SetPeriod:function(){xu("top_bar_clip",U+l_(Tl[this.periodPos-1])),pf("Clip_periodPos",this.periodPos)},label_init:function(){vl.Main_CenterLablesVectorPos=5,this.SetPeriod(),Iu("top_bar_clip","icon_center_focus"),ku("label_refresh","icon-refresh",t+Wt)},label_exit:function(){c_(),Su("top_bar_clip","icon_center_focus"),ku("label_refresh","icon-refresh",t+Wt)}},pb),bb)).set_ThumbSize()}function kb(){(ab=Gy(ab=Gy({ids:Oy("ChannelClip"),table:"stream_table_channel_clip",screen:dl,periodPos:gf("ChannelClip_periodPos",2),base_url:"https://api.twitch.tv/kraken/clips/top?channel=",set_url:function(){this.url=this.base_url+encodeURIComponent(vl.Main_selectedChannel)+"&limit="+rb+"&period="+this.period[this.periodPos-1]+(this.cursor?"&cursor="+this.cursor:"")},SetPeriod:function(){xu("top_bar_game",U+Tl[this.periodPos-1]),pf("ChannelClip_periodPos",this.periodPos)},label_init:function(){vl.Main_CenterLablesVectorPos=1,!vl.Search_isSearching&&vl.Main_selectedChannel_id&&wd(),vl.Main_selectedChannel!==this.lastselectedChannel&&(this.status=!1),r_(),this.SetPeriod(),Pu("top_bar_user",vl.Main_selectedChannelDisplayname),ku("label_side_panel","icon-arrow-circle-left",x),this.lastselectedChannel=vl.Main_selectedChannel},label_exit:c_},pb),bb)).set_ThumbSize()}function Cb(){(ib=Gy(ib=Gy({ids:Oy("AGameClip"),table:"stream_table_a_game_clip",screen:ml,periodPos:gf("AGameClip_periodPos",2),base_url:"https://api.twitch.tv/kraken/clips/top?game=",set_url:function(){this.url=this.base_url+encodeURIComponent(vl.Main_gameSelected)+"&limit="+rb+"&period="+this.period[this.periodPos-1]+(this.cursor?"&cursor="+this.cursor:"")+(""!==Pl?"&language="+Pl:"")},SetPeriod:function(){xu("top_bar_game",w+l_(U+Tl[this.periodPos-1]+": "+vl.Main_gameSelected)),pf("AGameClip_periodPos",this.periodPos)},label_init:function(){vl.Main_CenterLablesVectorPos=3,this.SetPeriod(),Iu("top_bar_game","icon_center_focus"),ku("label_side_panel","icon-arrow-circle-left",x),this.gameSelected!==vl.Main_gameSelected&&(this.status=!1),this.gameSelected=vl.Main_gameSelected},label_exit:function(){Su("top_bar_game","icon_center_focus"),xu("top_bar_game",f),ku("label_side_panel","icon-ellipsis",Fn)}},pb),bb)).set_ThumbSize()}var Mb={ThumbSize:19.35,ItemsLimit:Rl,ItemsReloadLimit:Hl,ColoumnsCount:Vl,addFocus:N_,img_404:uu,empty_str:function(){return B+Q},concatenate:function(e){if(this.data){var t=JSON.parse(e);this.MaxOffset=t._total,this.data=this.data.concat(this.screen===tl?t.follows:t.top),this.offset=this.data.length,this.offset>this.MaxOffset&&(this.dataEnded=!0),Ly.loadingData=!1}else this.data=JSON.parse(e),this.MaxOffset=this.data._total,this.data=this.screen===tl?this.data.follows:this.data.top,this.offset=this.data.length,this.isLive?this.dataEnded=!0:this.offset>this.MaxOffset&&(this.dataEnded=!0),this.loadDataSuccess(),Ly.loadingData=!1},key_play:function(){vl.Main_gameSelected=document.getElementById(this.ids[5]+this.posY+"_"+this.posX).getAttribute(nu),document.body.removeEventListener("keydown",tb),vl.Main_BeforeAgame=this.screen,vl.Main_Go=Qr,vl.Main_BeforeAgameisSet=!0,ko=!1,Bl=0,document.body.removeEventListener("keydown",tb),Cu(this.ids[10]),i_(),J_(this.posY+"_"+this.posX,this.ids)},addCell:function(e){var t=this.isLive||this.screen===$r,n=t?e.game:e;Ly.idObject[n._id]||(Ly.itemsCount++,Ly.idObject[n._id]=1,Ly.row.appendChild(qy(Ly.row_id,Ly.coloumn_id,Ly.ids,n.box.template.replace("{width}x{height}",eu),n.name,t?Ku(e.channels)+" "+I+h+Ku(e.viewers)+H:"")),Ly.coloumn_id++)}};function Eb(){(ob=Gy(ob=Gy({ids:Oy("Game"),table:"stream_table_games",screen:$r,base_url:"https://api.twitch.tv/kraken/games/top?limit="+rb,set_url:function(){this.offset&&this.offset+rb>this.MaxOffset&&(this.dataEnded=!0),this.url=this.base_url+"&offset="+this.offset},label_init:function(){vl.Main_CenterLablesVectorPos=3,Iu("top_bar_game","icon_center_focus")},label_exit:function(){Su("top_bar_game","icon_center_focus")}},pb),Mb)).set_ThumbSize()}function Ib(){(sb=Gy(sb=Gy({ids:Oy("UserGames"),table:"stream_table_user_games",screen:tl,isLive:yf("user_Games_live",!0),OldUserName:"",base_url:"https://api.twitch.tv/api/users/",set_url:function(){this.offset&&this.offset+rb>this.MaxOffset&&(this.dataEnded=!0),this.url=this.base_url+encodeURIComponent(Ai[vl.Users_Position].name)+"/follows/games",this.isLive?this.url+="/live?limit=750":this.url+="?limit="+rb+"&offset="+this.offset},key_refresh:function(){this.isLive=!this.isLive,xu("top_bar_user",u+l_(Ai[vl.Users_Position].name+" "+(this.isLive?Q:jt))),Uy(),pf("user_Games_live",this.isLive?"true":"false"),ME&&BE()},label_init:function(){vl.Main_CenterLablesVectorPos=1,ku("label_refresh","icon-refresh",Xt+Q+"/"+jt+":"+Wt),ku("label_side_panel","icon-arrow-circle-left",x),Iu("top_bar_user","icon_center_focus"),this.OldUserName!==Ai[vl.Users_Position].name&&(this.status=!1),this.OldUserName=Ai[vl.Users_Position].name,xu("top_bar_user",u+l_(Ai[vl.Users_Position].name+" "+(this.isLive?Q:jt)))},label_exit:function(){vl.Users_Position=0,Su("top_bar_user","icon_center_focus"),ku("label_refresh","icon-refresh",t+Wt),Pu("top_bar_user",u),ku("label_side_panel","icon-ellipsis",Fn)}},pb),Mb)).set_ThumbSize()}var Sb=0,xb=0,Pb=!1,Lb=0,Tb={},Bb=[],Ob=!1,Gb=0,Ab=5,Nb=3500,Ub=0,Fb=0,Db=!1,Rb=!1,Vb="",Hb=!1,Jb=["sc_thumbdiv","sc_img","sc_infodiv","sc_displayname","sc_cell","scempty_","search_channel_scroll"];function qb(){vl.Main_CenterLablesVectorPos=1,vl.Main_Go=ll,vl.isLastSChannels=!0,vl.Search_isSearching=!0,Vb!==vl.Search_data&&(Rb=!1),r_(),xu("top_bar_user",n+l_(I+" '"+vl.Search_data+"'")),document.body.addEventListener("keydown",iw,!1),Rb?(v_(Sb),Mu(Jb[6]),nw(),o_()):jb()}function zb(){c_(),document.body.removeEventListener("keydown",iw),Cu(Jb[6])}function jb(){m_("stream_table_search_channel"),Cu(Jb[6]),Lu(),Hu(),Vb=vl.Search_data,Rb=!1,Tb={},cf=!(Lb=Fb=Ub=0),Sb=xb=0,Pb=Hb=!(Bb=[]),Uu(),Xb(),Wb()}function Xb(){p_(),Ob=!0,Gb=0,Nb=3500}function Wb(){var e=Lb+Ub;e&&Fb-1<e&&(e=Fb-Jl,Pb=!0),kf("https://api.twitch.tv/kraken/search/channels?query="+encodeURIComponent(vl.Search_data)+"&limit="+Jl+"&offset="+e,Nb,2,null,Kb,Yb)}function Yb(){++Gb<Ab?(Nb+=500,Wb()):(Ob=!1,Lb?(Pb=!0,Qb()):(cf=!1,Tu(),Vu(T)))}function Kb(e){var t=JSON.parse(e),n=t.channels.length;Fb=parseInt(t._total),n<Jl&&(Pb=!0);var a=Lb;Db=!(Lb+=n);var i=n/ql;0<n%ql&&i++;for(var o,s,d,c,r,l=0,u=document.getElementById("stream_table_search_channel"),_=0;_<i;_++){for(s=a/ql+_,d=document.createElement("tr"),o=0;o<ql&&l<n;o++,l++)r=(c=t.channels[l])._id,Tb[r]?o--:(Tb[r]=1,d.appendChild($b(s,s+"_"+o,[c.name,r,c.logo,c.display_name])));for(;o<ql;o++)Pb&&!Hb&&(Hb=!0,Lb=s*ql+o),d.appendChild(w_(Jb[5]+s+"_"+o)),Bb.push(Jb[5]+s+"_"+o);u.appendChild(d)}Qb()}function $b(e,t,n){return e<4&&b_(n[2]),k_(t,Jb,n)}function Qb(){if(Rb){if(h_(_u),0<Bb.length&&!Pb)return Xb(),void Zb();Fu(xb,Sb,ql,Lb),Bb=[]}else Db?Vu(d):(Rb=!0,h_(_u),nw(),o_()),Mu(Jb[6]),cf=!1,Tu();Ob=!1}function Zb(){Ru(Bb.length);var e=Lb+Ub;e&&Fb-1<e&&(e=Fb-jl,Pb=!0),kf("https://api.twitch.tv/kraken/search/channels?query="+encodeURIComponent(vl.Search_data)+"&limit="+jl+"&offset="+e,Nb,2,null,tw,ew)}function ew(){++Gb<Ab?(Nb+=500,Zb()):(Pb=!0,Lb-=Bb.length,Bb=[],Qb())}function tw(e){var t,n,a=JSON.parse(e),i=a.channels.length,o=0,s=0,d=[];for(Fb=parseInt(a._total),i<jl&&(Pb=!0);o<Bb.length&&s<i;o++,s++)n=(t=a.channels[s])._id,Tb[n]?o--:(Tb[n]=1,C_(Bb[o],[t.name,n,t.logo,t.display_name],Jb),d.push(o));for(o=d.length-1;-1<o;o--)Bb.splice(d[o],1);Ub+=s,Pb&&(Lb-=Bb.length,Bb=[]),Qb()}function nw(){G_(Sb,xb,Jb,ql,Lb),Lb/ql<Sb+zl&&!Pb&&!Ob&&(Xb(),Wb()),wl&&aw()}function aw(){Lb&&J_(Sb+"_"+xb,Jb)}function iw(e){var t;if(!cf&&!O_())switch(B_(),e.keyCode){case La:Yu()?Wu():zu()?qu():(aw(),lf(iw));break;case Ea:if(Zu(Sb,xb-1,Jb[0]))aw(),xb--,nw();else for(t=ql-1;-1<t;t--)if(Zu(Sb-1,t,Jb[0])){aw(),Sb--,xb=t,nw();break}break;case Sa:Zu(Sb,xb+1,Jb[0])?(aw(),xb++,nw()):Zu(Sb+1,0,Jb[0])&&(aw(),Sb++,xb=0,nw());break;case Ia:for(t=0;t<ql;t++)if(Zu(Sb-1,xb-t,Jb[0])){aw(),Sb--,xb-=t,nw();break}break;case xa:for(t=0;t<ql;t++)if(Zu(Sb+1,xb-t,Jb[0])){aw(),Sb++,xb-=t,nw();break}break;case Ca:case ka:case Ma:case Pa:vl.Main_selectedChannel=document.getElementById(Jb[4]+Sb+"_"+xb).getAttribute(nu),vl.Main_selectedChannel_id=document.getElementById(Jb[4]+Sb+"_"+xb).getAttribute("data-id"),vl.Main_selectedChannelDisplayname=document.getElementById(Jb[3]+Sb+"_"+xb).textContent,document.body.removeEventListener("keydown",iw),vl.Main_BeforeChannel=ll,vl.Main_Go=ol,vl.Main_BeforeChannelisSet=!0,Ds=Ra=!1,Cu(Jb[6]),a_()}}var ow=!1,sw=0,dw=0,cw=0,rw=0,lw=5,uw=3500,_w=0,fw=0,mw=!1,hw=!1,pw="",gw=["sgthumbdiv","sgimg","sginfodiv","sgdisplayname","sgviwers","sgcell","sgempty_","search_games_scroll"];function vw(){vl.Main_CenterLablesVectorPos=1,vl.Main_Go=al,vl.Search_isSearching=!0,r_(),pw!==vl.Search_data&&(ow=!1),xu("top_bar_user",n+l_(f+" '"+vl.Search_data+"'")),document.body.addEventListener("keydown",Pw,!1),ow?(v_(sw),Mu(gw[7]),Sw(),o_()):bw()}function yw(){vl.Search_isSearching||c_(),document.body.removeEventListener("keydown",Pw),vl.Games_return=!1,Cu(gw[7])}function bw(){m_("stream_table_search_game"),Cu(gw[7]),Lu(),Hu(),pw=vl.Search_data,hw=ow=!1,sw=dw=cw=fw=_w=0,Uu(),ww(),kw()}function ww(){p_(),cf=!0,rw=0,uw=3500}function kw(){kf("https://api.twitch.tv/kraken/search/games?query="+encodeURIComponent(vl.Search_data),uw,2,null,Mw,Cw)}function Cw(){++rw<lw?(uw+=500,kw()):(cf=!1,cw?Iw():(Tu(),Vu(T)))}function Mw(e){var t=JSON.parse(e),n=0;null!==t.games&&(n=t.games.length);var a=cw;mw=!(cw+=n);var i=n/Vl;0<n%Vl&&i++;for(var o,s,d,c,r=0,l=document.getElementById("stream_table_search_game"),u=0;u<i;u++){for(s=a/Vl+u,d=document.createElement("tr"),o=0;o<Vl&&r<n;o++,r++)c=t.games[r],d.appendChild(Ew(s,s+"_"+o,[c.name,c.box.template.replace("{width}x{height}",eu),""]));for(;o<Vl;o++)hw||(hw=!0,cw=s*Vl+o),d.appendChild(w_(gw[6]+s+"_"+o));l.appendChild(d)}Iw()}function Ew(e,t,n){return e<2&&b_(n[1]),x_(t,gw,n)}function Iw(){ow||(mw?Vu(d):(ow=!0,h_(fu),Sw(),o_()),Tu()),Mu(gw[7]),cf=!1,Fu(dw,sw,Vl,cw)}function Sw(){N_(sw,dw,gw,Vl,cw),wl&&xw()}function xw(){cw&&J_(sw+"_"+dw,gw)}function Pw(e){var t;if(!cf&&!O_())switch(B_(),e.keyCode){case La:Yu()?Wu():zu()?qu():(xw(),lf(Pw));break;case Ea:if(Zu(sw,dw-1,gw[0]))xw(),dw--,Sw();else for(t=Vl-1;-1<t;t--)if(Zu(sw-1,t,gw[0])){xw(),sw--,dw=t,Sw();break}break;case Sa:Zu(sw,dw+1,gw[0])?(xw(),dw++,Sw()):Zu(sw+1,0,gw[0])&&(xw(),sw++,dw=0,Sw());break;case Ia:for(t=0;t<Vl;t++)if(Zu(sw-1,dw-t,gw[0])){xw(),sw--,dw-=t,Sw();break}break;case xa:for(t=0;t<Vl;t++)if(Zu(sw+1,dw-t,gw[0])){xw(),sw++,dw-=t,Sw();break}break;case Ca:case ka:case Ma:case Pa:vl.gameSelectedOld=vl.Main_gameSelected,yw(),vl.Main_gameSelected=document.getElementById(gw[5]+sw+"_"+dw).getAttribute(nu),document.body.removeEventListener("keydown",Pw),vl.Main_Go=Qr,vl.Games_return=!0,a_()}}var Lw=0,Tw=0,Bw=!1;function Ow(){Hu(),Cu("label_refresh"),ku("label_side_panel","icon-arrow-circle-left",x),Pu("top_bar_user",n),document.getElementById("top_lables").style.marginLeft="14%",document.getElementById("top_bar_live").style.display="none",document.getElementById("top_bar_featured").style.display="none",document.getElementById("top_bar_game").style.display="none",document.getElementById("top_bar_vod").style.display="none",document.getElementById("top_bar_clip").style.display="none",Fr.placeholder=k,Iu("top_bar_user","icon_center_focus"),Mu("search_scroll"),Tw=Lw=0,Nw(),Fw()}function Gw(){Dw(!1),document.body.removeEventListener("keydown",Uw),Nw(),vl.Main_Go=vl.Main_BeforeSearch,document.getElementById("top_lables").style.marginLeft="18.5%",Pu("top_bar_user",u),Su("top_bar_user","icon_center_focus"),ku("label_side_panel","icon-ellipsis",Fn),Mu("label_refresh"),document.getElementById("top_bar_live").style.display="inline-block",document.getElementById("top_bar_featured").style.display="inline-block",document.getElementById("top_bar_game").style.display="inline-block",document.getElementById("top_bar_vod").style.display="inline-block",document.getElementById("top_bar_clip").style.display="inline-block",Fr.value="",Cu("search_scroll")}function Aw(){Gw(),j_(function(){Tw?1===Tw?vw():2===Tw&&ok():qb()})}function Nw(){Su("chanel_button","button_search_focused"),Su("game_button","button_search_focused"),Su("live_button","button_search_focused"),Lw&&(Tw?1===Tw?Iu("game_button","button_search_focused"):2===Tw&&Iu("live_button","button_search_focused"):Iu("chanel_button","button_search_focused"))}function Uw(e){if(!Bw)switch(e.keyCode){case La:Yu()?Wu():zu()?qu():(Gw(),a_());break;case Ea:1===Lw&&(--Tw<0&&(Tw=2),Nw());break;case Sa:1===Lw&&(2<++Tw&&(Tw=0),Nw());break;case Ia:1===Lw&&(Lw=0,Nw(),Fw());break;case xa:Lw?1===Lw&&(Lw=0,Nw(),Fw()):(Dw(!1),Lw=1,Nw());break;case Ca:case ka:case Ma:case Pa:Lw?""!==Fr.value&&null!==Fr.value?(vl.Search_data=Fr.value,Fr.value="",Aw()):(Vu(s),window.setTimeout(function(){Hu()},1e3)):Fw()}}function Fw(){document.body.removeEventListener("keydown",Uw),document.body.addEventListener("keydown",Vw,!1),Fr.placeholder=k,Fr.focus(),Bw=!0}function Dw(e){Fr.blur(),Rw(),document.body.removeEventListener("keydown",Vw),Fr.placeholder=E+k,e&&document.body.addEventListener("keydown",Uw,!1),Bw=!1}function Rw(){if(null!==Fr){var e=Fr.cloneNode(!0);Fr.parentNode.replaceChild(e,Fr),Fr=document.getElementById("search_input")}}function Vw(e){switch(e.keyCode){case La:zu()?qu():Yu()?Wu():(Gw(),a_());break;case Ga:Fr.value="";break;case Ba:case xa:Dw(!0),Lw=1,Nw();break;case Ta:Fr.value=Fr.value.slice(0,-1);break;case Oa:Fr.value+=" "}}var Hw=0,Jw=0,qw=!1,zw=0,jw={},Xw=[],Ww=!1,Yw=0,Kw=5,$w=3500,Qw=0,Zw=0,ek=!1,tk=!1,nk=!1,ak="",ik=["sl_thumbdiv","sl_img","sl_infodiv","sl_displayname","sl_streamtitle","sl_streamgame","sl_viwers","sl_quality","sl_cell","slempty_","search_live_scroll"];function ok(){vl.Main_CenterLablesVectorPos=1,vl.Main_Go=il,vl.Search_isSearching=!0,r_(),ak!==vl.Search_data&&(tk=!1),xu("top_bar_user",n+l_(_+" '"+vl.Search_data+"'")),document.body.addEventListener("keydown",vk,!1),tk?(v_(Hw),Mu(ik[10]),pk(),o_()):dk()}function sk(){c_(),document.body.removeEventListener("keydown",vk),Cu(ik[10])}function dk(){m_("stream_table_search_live"),Cu(ik[10]),Lu(),Hu(),ak=vl.Search_data,tk=!1,cf=!(nk=!(Xw=[])),Hw=Jw=zw=Zw=Qw=0,qw=!(jw={}),Uu(),ck(),rk()}function ck(){p_(),Ww=!0,Yw=0,$w=3500}function rk(){var e=zw+Qw;e&&Zw-1<e&&(e=Zw-Ul,qw=!0),kf("https://api.twitch.tv/kraken/search/streams?query="+encodeURIComponent(vl.Search_data)+"&limit="+Ul+"&offset="+e,$w,2,null,uk,lk)}function lk(){++Yw<Kw?($w+=500,rk()):(Ww=!1,zw?(qw=!0,_k()):(cf=!1,Tu(),Vu(T)))}function uk(e){var t=JSON.parse(e),n=t.streams.length;Zw=parseInt(t._total),n<Ul&&(qw=!0);var a=zw;ek=!(zw+=n);var i=n/Fl;0<n%Fl&&i++;for(var o,s,d,c,r,l=0,u=document.getElementById("stream_table_search_live"),_=0;_<i;_++){for(s=a/Fl+_,d=document.createElement("tr"),o=0;o<Fl&&l<n;o++,l++)r=(c=t.streams[l]).channel._id,jw[r]?o--:(jw[r]=1,d.appendChild(E_(s,s+"_"+o,[c.channel.name,r],ik,[c.preview.template.replace("{width}x{height}",Zl),Qu(JSON.stringify(c.stream_type))+c.channel.display_name,c.channel.status,c.game,y+Ep(c.created_at)+b+", "+h+Ku(c.viewers)+H,$u(c.video_height,c.average_fps,c.channel.broadcaster_language)])));for(;o<Fl;o++)qw&&!nk&&(nk=!0,zw=s*Fl+o),d.appendChild(w_(ik[9]+s+"_"+o)),Xw.push(ik[9]+s+"_"+o);u.appendChild(d)}_k()}function _k(){if(tk){if(h_(fu),0<Xw.length&&!qw)return ck(),void fk();Fu(Jw,Hw,Fl,zw),Xw=[]}else ek?Vu(d):(tk=!0,h_(fu),pk(),o_()),Mu(ik[10]),cf=!1,Tu();Ww=!1}function fk(){Ru(Xw.length);var e=zw+Qw;e&&Zw-1<e&&(e=Zw-jl,qw=!0),kf("https://api.twitch.tv/kraken/search/streams?query="+encodeURIComponent(vl.Search_data)+"&limit="+jl+"&offset="+e,$w,2,null,hk,mk)}function mk(){++Yw<Kw?($w+=500,fk()):(qw=!0,zw-=Xw.length,Xw=[],_k())}function hk(e){var t,n,a=JSON.parse(e),i=a.streams.length,o=0,s=0,d=[];for(Zw=parseInt(a._total),i<jl&&(qw=!0);o<Xw.length&&s<i;o++,s++)n=(t=a.streams[s]).channel._id,jw[n]?o--:(jw[n]=1,I_(Xw[o],[t.channel.name,n],[t.preview.template.replace("{width}x{height}",Zl),Qu(JSON.stringify(t.stream_type))+t.channel.display_name,t.channel.status,t.game,y+Ep(t.created_at)+b+", "+h+Ku(t.viewers)+H,$u(t.video_height,t.average_fps,t.channel.broadcaster_language)],ik),d.push(o));for(o=d.length-1;-1<o;o--)Xw.splice(d[o],1);Qw+=s,qw&&(zw-=Xw.length,Xw=[]),_k()}function pk(){A_(Hw,Jw,ik,Fl,zw),zw/Fl<Hw+Dl&&!qw&&!Ww&&(ck(),rk()),wl&&gk()}function gk(){zw&&J_(Hw+"_"+Jw,ik)}function vk(e){var t;if(!cf&&!O_())switch(B_(),e.keyCode){case La:Yu()?Wu():zu()?qu():(gk(),lf(vk));break;case Ea:if(Zu(Hw,Jw-1,ik[0]))gk(),Jw--,pk();else for(t=Fl-1;-1<t;t--)if(Zu(Hw-1,t,ik[0])){gk(),Hw--,Jw=t,pk();break}break;case Sa:Zu(Hw,Jw+1,ik[0])?(gk(),Jw++,pk()):Zu(Hw+1,0,ik[0])&&(gk(),Hw++,Jw=0,pk());break;case Ia:for(t=0;t<Fl;t++)if(Zu(Hw-1,Jw-t,ik[0])){gk(),Hw--,Jw-=t,pk();break}break;case xa:for(t=0;t<Fl;t++)if(Zu(Hw+1,Jw-t,ik[0])){gk(),Hw++,Jw-=t,pk();break}break;case Ca:case ka:case Ma:case Pa:U_(Hw+"_"+Jw,ik,vk)}}var yk=0,bk={restor_playback:{values:["off","on"],defaultValue:2},chat_font_size:{values:["60%","80%","100%","120%","140%"],defaultValue:3},chat_brightness:{values:["0%","5%","10%","15%","20%","25%","30%","35%","40%","45%","50%","55%","60%","65%","70%","75%","80%","85%","90%","95%","100%"],defaultValue:11},force_disable_chat:{values:["off","on"],defaultValue:2},buffer_live:{values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],defaultValue:4},buffer_vod:{values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],defaultValue:4},buffer_clip:{values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],defaultValue:3},videos_animation:{values:["off","on"],defaultValue:2},clock_offset:{values:wk(),defaultValue:49},content_lang:{values:["All","Dansk [DA]","Deutsch [DE]","English - USA [EN]","Español [ES]","Français [FR]","Italiano [IT]","Magyar [HU]","Nederlands [NL]","Norsk [NO]","Polski [PL]","Português [PT]","Slovenčina [SK]","Suomi [FI]","Svenska [SV]","Tiếng Việt [VI]","Türkçe [TR]","Čeština [CS]","Ελληνικά [EL]","Български [BG]","Русский [RU]","ภาษาไทย [TH]","中文 [ZH]","日本語 [JA]","한국어 [KO]","Română [RO]"],set_values:["","da","de","en,en-gb","es,es-mx","fr","it","hu","nl","no","pl","pt,pt-br","sk","fi","sv","vi","tr","cs","el","bg","ru","th","zh-cn,zh-tw","ja","ko","ro"],defaultValue:1}};function wk(){for(var e=[],t=43200,n=0;n<48;n++)e.push("-"+Cp(t)),t-=900;for(e.push(Cp(0)),t=900,n=0;n<48;n++)e.push(Cp(t)),t+=900;return e}var kk=[],Ck=0;function Mk(){n_(),document.body.addEventListener("keydown",qk,!1),ku("label_refresh","icon-arrow-circle-left",x),Pu("top_bar_user",a),document.getElementById("top_lables").style.marginLeft="14%",document.getElementById("top_bar_live").style.display="none",document.getElementById("top_bar_featured").style.display="none",document.getElementById("top_bar_game").style.display="none",document.getElementById("top_bar_vod").style.display="none",document.getElementById("top_bar_clip").style.display="none",Iu("top_bar_user","icon_center_focus"),Mu("settings_scroll"),Uk(yk=0)}function Ek(){document.body.removeEventListener("keydown",qk),Fk(),Pu("top_bar_user",u),document.getElementById("top_lables").style.marginLeft="18.5%",document.getElementById("top_bar_live").style.display="inline-block",document.getElementById("top_bar_featured").style.display="inline-block",document.getElementById("top_bar_game").style.display="inline-block",document.getElementById("top_bar_vod").style.display="inline-block",document.getElementById("top_bar_clip").style.display="inline-block",Su("top_bar_user","icon_center_focus"),ku("label_refresh","icon-refresh",t+Wt),Cu("settings_scroll")}function Ik(){var e,t="";t+=Sk("general",yn),e="content_lang",kk.push(e),t+=xk(e,Wn),e="clock_offset",kk.push(e),t+=xk(e,jn),e="restor_playback",kk.push(e),bk[e].values=[Tn,Ln],t+=Pk(e,Bn,On),e="videos_animation",kk.push(e),bk[e].values=[Tn,Ln],t+=xk(e,Un),t+=Sk("play",fn),e="chat_font_size",kk.push(e),t+=Pk(e,Gn,An),e="chat_brightness",kk.push(e),t+=xk(e,aa),e="force_disable_chat",kk.push(e),bk[e].values=[Jt,B],t+=Pk(e,ta,na),t+='<div id="setting_title_buffers" class="settings_title">'+mn+'</div><div id="setting_title_buffers_summary" class="settings_summary">'+hn+"</div>",e="buffer_live",kk.push(e),t+=xk(e,pn),e="buffer_vod",kk.push(e),t+=xk(e,gn),e="buffer_clip",kk.push(e),xu("settings_main",t+=xk(e,vn)),Ck=kk.length}function Sk(e,t){return'<div id="setting_title_'+e+'" class="settings_section">'+t+"</div>"}function xk(e,t){return'<div id="'+e+'_div" class="settings_div"><div id="'+e+'_name" class="settings_name">'+t+'</div><div class="settings_arraw_div"><div id="'+e+'arrow_left" class="left"></div></div><div id="'+e+'" class="strokedextramini settings_value">'+Ok(e)+'</div><div class="settings_arraw_div"><div id="'+e+'arrow_right" class="right"></div></div></div>'}function Pk(e,t,n){return'<div id="'+e+'_div" class="settings_div"><div id="'+e+'_name" class="settings_name">'+t+'<div id="'+e+'_summary" class="settings_summary" style="font-size: 65%;">'+n+'</div></div><div class="settings_arraw_div"><div id="'+e+'arrow_left" class="left"></div></div><div id="'+e+'" class="strokedextramini settings_value">'+Ok(e)+'</div><div class="settings_arraw_div"><div id="'+e+'arrow_right" class="right"></div></div></div>'}function Lk(e,t,n){xu(e+"_name",t+'<div id="'+e+'_summary" class="settings_summary" style="font-size: 65%;">'+n+"</div>")}function Tk(){var e="";for(e in Pu("setting_title_general",yn),Pu((e="clock_offset")+"_name",jn),Pu((e="content_lang")+"_name",Wn),bk[e].values[0]=Yn,Pu(e,Ok(e)),Pu("setting_title_play",fn),Pu("setting_title_buffers",mn),Pu("setting_title_buffers_summary",hn),Pu((e="buffer_live")+"_name",pn),Pu((e="buffer_vod")+"_name",gn),Pu((e="buffer_clip")+"_name",vn),Lk(e="restor_playback",Bn,On),bk[e].values=[Tn,Ln],Lk(e="chat_font_size",Gn,An),Lk(e="force_disable_chat",ta,na),bk[e].values=[Tn,Ln],Pu((e="videos_animation")+"_name",Un),bk[e].values=[Tn,Ln],Pu((e="chat_brightness")+"_name",aa),bk)bk.hasOwnProperty(e)&&Pu(e,Ok(e))}function Bk(){for(var e in bk)bk[e].defaultValue=gf(e,bk[e].defaultValue),bk[e].defaultValue-=1;Hk(0),Jk(),Pm=(.05*Ak("chat_brightness")).toFixed(2),KI=Ak("videos_animation"),Pl=Gk("content_lang"),vl.Play_ChatForceDisable=Ak("force_disable_chat")}function Ok(e){return bk[e].values[Ak(e)]}function Gk(e){return bk[e].set_values[Ak(e)]}function Ak(e){return bk[e].defaultValue}function Nk(e){return bk[e].values.length-1}function Uk(e){var t=kk[yk];Iu(t,"settings_value_focus"),Iu(t+"_div","settings_div_focus"),Rk(e)}function Fk(){var e=kk[yk];document.getElementById(e+"arrow_left").style.opacity="0",document.getElementById(e+"arrow_right").style.opacity="0",Su(e,"settings_value_focus"),Su(e+"_div","settings_div_focus")}function Dk(e){var t=kk[e];pf(t,Ak(t)+1),Pu(t,Ok(t)),Rk(e),Vk(e)}function Rk(e){var t=kk[e],n=Ak(t),a=Nk(t);0<n&&n<a?(document.getElementById(t+"arrow_left").style.opacity="1",document.getElementById(t+"arrow_right").style.opacity="1"):n===a?(document.getElementById(t+"arrow_left").style.opacity="1",document.getElementById(t+"arrow_right").style.opacity="0.2"):(document.getElementById(t+"arrow_left").style.opacity="0.2",document.getElementById(t+"arrow_right").style.opacity="1")}function Vk(e){"content_lang"===(e=kk[e])?Pl=Gk("content_lang"):"videos_animation"===e?KI=Ak("videos_animation"):"buffer_live"===e?Hk(1):"buffer_vod"===e?Hk(2):"buffer_clip"===e?Hk(3):"chat_brightness"===e?(Pm=(.05*Ak("chat_brightness")).toFixed(2),ig(!1)):"force_disable_chat"===e?vl.Play_ChatForceDisable=Ak("force_disable_chat"):"chat_font_size"===e?zh():"clock_offset"===e&&(Jk(),Y_())}function Hk(e){try{e?1===e?(Fm=1e3*Ok("buffer_live"),cu&&Android.SetBuffer(1,Fm)):2===e?(av=1e3*Ok("buffer_vod"),cu&&Android.SetBuffer(2,av)):3===e&&(Wf=1e3*Ok("buffer_clip"),cu&&Android.SetBuffer(3,Wf)):(Fm=1e3*Ok("buffer_live"),av=1e3*Ok("buffer_vod"),Wf=1e3*Ok("buffer_clip"),cu&&(Android.SetBuffer(1,Fm),Android.SetBuffer(2,av),Android.SetBuffer(3,Wf)))}catch(e){}}function Jk(){var e=Ak("clock_offset");du=e<48?-9e5*(48-e):9e5*(e-48)}function qk(e){var t;switch(e.keyCode){case La:zu()?qu():Yu()?Wu():(Ek(),a_());break;case Ea:0<Ak(t=kk[yk])&&(bk[t].defaultValue-=1,Dk(yk));break;case Sa:Ak(t=kk[yk])<Nk(t)&&(bk[t].defaultValue+=1,Dk(yk));break;case Ia:0<yk&&(Fk(),Uk(--yk));break;case xa:yk<Ck-1&&(Fk(),Uk(++yk))}}var zk=0,jk=0,Xk=!1,Wk=0,Yk=!1,Kk=0,$k=5,Qk=3500,Zk=[],eC=0,tC=!1,nC=!1,aC="",iC=!1,oC=["uc_thumbdiv","uc_img","uc_infodiv","uc_displayname","uc_cell","ucempty_","user_channels_scroll"];function sC(){vl.Main_CenterLablesVectorPos=1,vl.Main_Go=rl,vl.isLastSChannels=!1,ku("label_side_panel","icon-arrow-circle-left",x),Iu("top_bar_user","icon_center_focus"),xu("top_bar_user",u+l_(Ai[vl.Users_Position].name+Z)),document.body.addEventListener("keydown",vC,!1),aC!==Ai[vl.Users_Position].name&&(nC=!1),nC?(v_(zk),Mu(oC[6]),pC(),o_()):cC()}function dC(){vl.Users_Position=0,Su("top_bar_user","icon_center_focus"),document.body.removeEventListener("keydown",vC),Pu("top_bar_user",u),ku("label_side_panel","icon-ellipsis",Fn),Cu(oC[6])}function cC(){m_("stream_table_user_channels"),Cu(oC[6]),Lu(),Hu(),aC=Ai[vl.Users_Position].name,zk=jk=Wk=eC=0,cf=!(iC=Xk=nC=!1),Uu(),Zk=[],rC(),lC()}function rC(){p_(),Yk=!0,Kk=0,Qk=3500}function lC(){kf("https://api.twitch.tv/kraken/users/"+encodeURIComponent(Ai[vl.Users_Position].id)+"/follows/channels?limit=100&offset="+eC+"&sortby=created_at&",Qk,2,null,_C,uC)}function uC(){++Kk<$k?(Qk+=500,lC()):(Yk=!1,Wk?(Xk=!0,hC()):(cf=!1,Tu(),Vu(T)))}function _C(e){var t=JSON.parse(e).follows,n=t.length;if(n){for(var a="",i=0;i<n;i++)a=t[i].channel.name+","+t[i].channel._id+","+t[i].channel.logo+","+t[i].channel.display_name,-1===Zk.indexOf(a)&&Zk.push(a);eC+=n,rC(),lC()}else Zk.sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}),fC()}function fC(){var e=Jl,t=Wk,n=Zk.length-t;n<e&&(e=n),e<Jl&&(Xk=!0),tC=!(Wk+=e);var a=e/ql;0<e%ql&&a++;for(var i,o,s,d=t,c=document.getElementById("stream_table_user_channels"),r=0;r<a;r++){for(o=t/ql+r,s=document.createElement("tr"),i=0;i<ql&&d<Zk.length;i++,d++)s.appendChild(mC(o,o+"_"+i,Zk[d].split(",")));for(;i<ql;i++)Xk&&!iC&&(iC=!0,Wk=o*ql+i),s.appendChild(w_(oC[5]+o+"_"+i));c.appendChild(s)}hC()}function mC(e,t,n){return e<4&&b_(n[2]),k_(t,oC,n)}function hC(){nC?h_(_u):(tC?Vu(B+Z):(nC=!0,h_(_u),pC(),o_()),Mu(oC[6]),cf=!1,Tu()),Yk=!1,Fu(jk,zk,ql,Wk)}function pC(){G_(zk,jk,oC,ql,Wk),Wk/ql<zk+zl&&!Xk&&!Yk&&(rC(),lC()),wl&&gC()}function gC(){Wk&&J_(zk+"_"+jk,oC)}function vC(e){var t;if(!cf&&!O_())switch(B_(),e.keyCode){case La:Yu()?Wu():zu()?qu():(gC(),lf(vC));break;case Ea:if(Zu(zk,jk-1,oC[0]))gC(),jk--,pC();else for(t=ql-1;-1<t;t--)if(Zu(zk-1,t,oC[0])){gC(),zk--,jk=t,pC();break}break;case Sa:Zu(zk,jk+1,oC[0])?(gC(),jk++,pC()):Zu(zk+1,0,oC[0])&&(gC(),zk++,jk=0,pC());break;case Ia:for(t=0;t<ql;t++)if(Zu(zk-1,jk-t,oC[0])){gC(),zk--,jk-=t,pC();break}break;case xa:for(t=0;t<ql;t++)if(Zu(zk+1,jk-t,oC[0])){gC(),zk++,jk-=t,pC();break}break;case Ca:case ka:case Ma:case Pa:vl.Main_selectedChannel=document.getElementById(oC[4]+zk+"_"+jk).getAttribute(nu),vl.Main_selectedChannel_id=document.getElementById(oC[4]+zk+"_"+jk).getAttribute("data-id"),vl.Main_selectedChannelDisplayname=document.getElementById(oC[3]+zk+"_"+jk).textContent,vl.Main_selectedChannelLogo=document.getElementById(oC[1]+zk+"_"+jk).src,document.body.removeEventListener("keydown",vC),vl.Main_BeforeChannel=rl,vl.Main_Go=ol,vl.Main_BeforeChannelisSet=!0,Ds=Ra=!0,Cu(oC[6]),a_()}}var yC=0,bC=0,wC=!1,kC=0,CC={},MC=[],EC=!1,IC=0,SC=5,xC=3500,PC=0,LC=0,TC=!1,BC=["uh_thumbdiv","uh_img","uh_infodiv","uh_displayname","uh_hosttitle","uh_hostgame","uh_viwers","uh_quality","uh_cell","uhempty_","user_host_scroll"],OC=!1,GC="",AC=!1;function NC(){vl.Main_CenterLablesVectorPos=1,vl.Main_Go=el,ku("label_side_panel","icon-arrow-circle-left",x),Iu("top_bar_user","icon_center_focus"),xu("top_bar_user",u+l_(Ai[vl.Users_Position].name+$)),document.body.addEventListener("keydown",YC,!1),GC!==Ai[vl.Users_Position].name&&(OC=!1),OC?(v_(yC),Mu(BC[10]),XC(),o_()):FC()}function UC(){vl.Users_Position=0,Su("top_bar_user","icon_center_focus"),document.body.removeEventListener("keydown",YC),Pu("top_bar_user",u),ku("label_side_panel","icon-ellipsis",Fn),Cu(BC[10])}function FC(){m_("stream_table_user_host"),Cu(BC[10]),Lu(),Hu(),GC=Ai[vl.Users_Position].name,OC=!1,CC={},cf=!(kC=LC=PC=0),yC=bC=0,wC=AC=!(MC=[]),Uu(),DC(),RC()}function DC(){p_(),EC=!0,IC=0,xC=3500}function RC(){var e=kC+PC;e&&LC-1<e&&(e=LC-Ul,wC=!0),kf("https://api.twitch.tv/api/users/"+encodeURIComponent(Ai[vl.Users_Position].name)+"/followed/hosting?limit="+Ul+"&offset="+e,xC,2,null,HC,VC)}function VC(){++IC<SC?(xC+=500,RC()):(EC=!1,kC?(wC=!0,JC()):(cf=!1,Tu(),Vu(T)))}function HC(e){var t=JSON.parse(e),n=t.hosts.length;LC=parseInt(t._total),n<Ul&&(wC=!0);var a=kC;TC=!(kC+=n);var i=n/Fl;0<n%Fl&&i++;for(var o,s,d,c,r,l=0,u=document.getElementById("stream_table_user_host"),_=0;_<i;_++){for(s=a/Fl+_,d=document.createElement("tr"),o=0;o<Fl&&l<n;o++,l++)r=(c=t.hosts[l]).target._id+""+c._id,CC[r]?o--:(CC[r]=1,d.appendChild(E_(s,s+"_"+o,[c.target.channel.name,c.target._id],BC,[c.target.preview_urls.template.replace("{width}x{height}",Zl),c.display_name+ae+c.target.channel.display_name,c.target.title,c.target.meta_game,h.charAt(1).toUpperCase()+h.slice(2)+Ku(c.target.viewers)+H,""])));for(;o<Fl;o++)wC&&!AC&&(AC=!0,kC=s*Fl+o),d.appendChild(w_(BC[9]+s+"_"+o)),MC.push(BC[9]+s+"_"+o);u.appendChild(d)}JC()}function JC(){if(OC){if(h_(fu),0<MC.length&&!wC)return DC(),void qC();Fu(bC,yC,Fl,kC),MC=[]}else TC?Vu(B+$):(OC=!0,XC(),h_(fu),o_()),Mu(BC[10]),cf=!1,Tu();EC=!1}function qC(){Ru(MC.length);var e=kC+PC;e&&LC-1<e&&(e=LC-jl,wC=!0),kf("https://api.twitch.tv/api/users/"+encodeURIComponent(Ai[vl.Users_Position].name)+"/followed/hosting?limit="+jl+"&offset="+e,xC,2,null,jC,zC)}function zC(){++IC<SC?(xC+=500,qC()):(wC=!0,kC-=MC.length,MC=[],JC())}function jC(e){var t,n,a=JSON.parse(e),i=a.streams.length,o=0,s=0,d=[];for(LC=parseInt(a._total),i<jl&&(wC=!0);o<MC.length&&s<i;o++,s++)n=(t=a.hosts[s]).target._id+""+t._id,CC[n]?o--:(CC[n]=1,I_(MC[o],[t.target.channel.name,t.target._id],[t.target.preview_urls.template.replace("{width}x{height}",Zl),t.display_name+ae+t.target.channel.display_name,t.target.title,t.target.meta_game,h.charAt(1).toUpperCase()+h.slice(2)+Ku(t.target.viewers)+H,""],BC),d.push(o));for(o=d.length-1;-1<o;o--)MC.splice(d[o],1);PC+=s,wC&&(kC-=MC.length,MC=[]),JC()}function XC(){A_(yC,bC,BC,Fl,kC),kC/Fl<yC+Dl&&!wC&&!EC&&(DC(),RC()),wl&&WC()}function WC(){kC&&J_(yC+"_"+bC,BC)}function YC(e){var t;if(!cf&&!O_())switch(B_(),e.keyCode){case La:Yu()?Wu():zu()?qu():(WC(),lf(YC));break;case Ea:if(Zu(yC,bC-1,BC[0]))WC(),bC--,XC();else for(t=Fl-1;-1<t;t--)if(Zu(yC-1,t,BC[0])){WC(),yC--,bC=t,XC();break}break;case Sa:Zu(yC,bC+1,BC[0])?(WC(),bC++,XC()):Zu(yC+1,0,BC[0])&&(WC(),yC++,bC=0,XC());break;case Ia:for(t=0;t<Fl;t++)if(Zu(yC-1,bC-t,BC[0])){WC(),yC--,bC-=t,XC();break}break;case xa:for(t=0;t<Fl;t++)if(Zu(yC+1,bC-t,BC[0])){WC(),yC++,bC-=t,XC();break}break;case Ca:case ka:case Ma:case Pa:U_(yC+"_"+bC,BC,YC)}}var KC,$C=!1,QC=0,ZC=3500,eM=0,tM=5,nM=0,aM=!1,iM="",oM=0,sM={},dM=!1,cM=[],rM=null,lM=["ulf_thumbdiv","ulf_img","ulf_infodiv","ulf_displayname","ulf_streamtitle","ulf_streamgame","ulf_viwers","ulf_quality","ulf_cell","ulempty_","user_live_scroll"];function uM(){$i()&&(SM(),dM?GM(Um,lM[0])&&(rM=JSON.parse(document.getElementById(lM[8]+Um).getAttribute(nu))[0]):rM=null,m_("user_feed_scroll"),dM=!1,document.getElementById("user_feed_scroll").style.left="2.5px",document.getElementById("user_feed").style.bottom="0.1%",Mu("dialog_loading_feed"),iM="",Um=oM=nM=eM=0,sM={},cM=[],j_(function(){mM(),hM()}))}function _M(e){for(var t,n=0;n<cM.length;n++)null!==(t=document.getElementById(cM[n].id))&&hu(t,cM[n].src+ru,e)}function fM(e,t){cM.push({id:e,src:t})}function mM(){$C=!0,QC=0,ZC=3500}function hM(){kf("https://api.twitch.tv/kraken/users/"+encodeURIComponent(Ai[vl.Users_Position].id)+"/follows/channels?limit=100&offset="+eM+"&sortby=created_at",ZC,2,null,gM,pM)}function pM(){++QC<tM?(ZC+=500,hM()):($C=!1,nM?(aM=!0,wM()):(Cu("dialog_loading_feed"),CM()&&(Gp(T),window.setTimeout(function(){Ap()},2e3))))}function gM(e){var t=JSON.parse(e).follows,n=t.length;if(n){for(var a="",i=0;i<n;i++)a=t[i].channel._id+",",-1===iM.indexOf(a)&&(iM+=a);eM+=n,mM(),hM()}else iM=iM.slice(0,-1),mM(),j_(vM)}function vM(){kf("https://api.twitch.tv/kraken/streams/?channel="+encodeURIComponent(iM)+"&limit=100&offset=0&stream_type=all",ZC,2,null,bM,yM)}function yM(){++QC<tM?(ZC+=500,vM()):($C=!1,Cu("dialog_loading_feed"),CM()&&(Gp(T),window.setTimeout(function(){Ap()},2e3)))}function bM(e){var t=JSON.parse(e),n=t.streams.length;n<Ul&&(aM=!0),nM+=n;for(var a,i,o=document.getElementById("user_feed_scroll"),s=0;s<n;s++)i=(a=t.streams[s]).channel._id,sM[i]||(sM[i]=1,null!==rM&&rM===a.channel.name&&(Um=s),o.appendChild(kM(s,[a.channel.name,i],lM,[a.preview.template.replace("{width}x{height}",Zl),Qu(JSON.stringify(a.stream_type))+a.channel.display_name,a.channel.status,a.game,y+Ep(a.created_at)+b+", "+h+Ku(a.viewers)+H,$u(a.video_height,a.average_fps,a.channel.broadcaster_language)])));wM()}function wM(){dM=!($C=!1),_M(fu),j_(function(){Cu("dialog_loading_feed"),LM()})}function kM(e,t,n,a){return fM(n[1]+e,a[0]),(Sl=document.createElement("div")).setAttribute("id",n[8]+e),Sl.setAttribute(nu,JSON.stringify(t)),Sl.className="user_feed_thumb",Sl.innerHTML='<div id="'+n[0]+e+'" class="stream_thumbnail_clip" ><div><img id="'+n[1]+e+'" class="stream_img"></div><div id="'+n[2]+e+'" class="stream_text2"><div id="'+n[3]+e+'" class="stream_channel" style="width: 66%; display: inline-block;">'+a[1]+'</div><div id="'+n[5]+e+'"class="stream_info">'+g+a[3]+"</div></div></div>",Sl}function CM(){return Eu("user_feed")}function MM(){var e=$i();e&&(Nm!==Ai[vl.Users_Position].name&&(dM=!1),Nm=Ai[vl.Users_Position].name),e&&GM(0,lM[0])||(dM=!1),dM||$C||uM(),e&&(document.getElementById("user_feed").style.bottom="0.1%",Mu("user_feed"),LM())}function EM(){Cu("user_feed")}function IM(){SM(),xM()}function SM(){window.clearTimeout(KC)}function xM(){CM()&&(KC=window.setTimeout(EM,5500))}function PM(){SM(),$C?window.setTimeout(function(){$C=!1},15e3):uM()}function LM(){IM(),GM(Um,lM[0])&&(Iu(lM[0]+Um,"feed_thumbnail_focused"),CM()?BM():Eu("scene2")&&OM())}function TM(){return Um<3?2.5:GM(Um+2,lM[0])?-1*document.getElementById(lM[8]+(Um-2)).offsetLeft:GM(Um+1,lM[0])?-1*document.getElementById(lM[8]+(Um-3)).offsetLeft:-1*document.getElementById(lM[8]+(Um-(3<Um?4:3))).offsetLeft}function BM(){var e=TM();e&&(document.getElementById("user_feed_scroll").style.left=e+"px")}function OM(){document.getElementById("user_feed").style.bottom="-1000%",Mu("user_feed");var e=BM();e&&(document.getElementById("user_feed_scroll").style.left=e+"px"),document.getElementById("user_feed").style.bottom="0.1%",Cu("user_feed")}function GM(e,t){return null!==document.getElementById(t+e)}function AM(){GM(Um,lM[0])&&Su(lM[0]+Um,"feed_thumbnail_focused")}var NM=0,UM=0,FM=!1,DM=0,RM={},VM=[],HM=!1,JM=0,qM=5,zM=3500,jM=0,XM=0,WM=0,YM=!1,KM=["ul_thumbdiv","ul_img","ul_infodiv","ul_displayname","ul_streamtitle","ul_streamgame","ul_viwers","ul_quality","ul_cell","ulempty_","user_live_scroll"],$M=!1,QM="",ZM="",eE=!1;function tE(){vl.Main_CenterLablesVectorPos=1,vl.Main_Go=Zr,ku("label_side_panel","icon-arrow-circle-left",x),Iu("top_bar_user","icon_center_focus"),xu("top_bar_user",u+l_(Ai[vl.Users_Position].name+K)),document.body.addEventListener("keydown",gE,!1),ZM!==Ai[vl.Users_Position].name&&($M=!1),$M?(v_(NM),Mu(KM[10]),hE(),o_()):aE()}function nE(){vl.Users_Position=0,Su("top_bar_user","icon_center_focus"),document.body.removeEventListener("keydown",gE),Pu("top_bar_user",u),ku("label_side_panel","icon-ellipsis",Fn),Cu(KM[10])}function aE(){m_("stream_table_user_live"),Cu(KM[10]),Lu(),Hu(),$M=!1,ZM=Ai[vl.Users_Position].name,cf=!(eE=!(VM=[])),NM=UM=DM=XM=jM=WM=0,FM=!(RM={}),QM="",Uu(),iE(),oE()}function iE(){p_(),HM=!0,JM=0,zM=3500}function oE(){kf("https://api.twitch.tv/kraken/users/"+encodeURIComponent(Ai[vl.Users_Position].id)+"/follows/channels?limit=100&offset="+WM+"&sortby=created_at",zM,2,null,dE,sE)}function sE(){++JM<qM?(zM+=500,oE()):(HM=!1,DM?(FM=!0,uE()):(cf=!1,Tu(),Vu(T)))}function dE(e){var t=JSON.parse(e).follows,n=t.length;if(n){for(var a="",i=0;i<n;i++)a=t[i].channel._id+",",-1===QM.indexOf(a)&&(QM+=a);WM+=n,iE(),oE()}else QM=QM.slice(0,-1),iE(),cE()}function cE(){var e=DM+jM;e&&XM-1<e&&(e=XM-Ul,FM=!0),kf("https://api.twitch.tv/kraken/streams/?channel="+encodeURIComponent(QM)+"&limit="+Ul+"&offset="+e+"&stream_type=all",zM,2,null,lE,rE)}function rE(){++JM<qM?(zM+=500,cE()):(HM=!1,Tu(),Vu(T))}function lE(e){var t=JSON.parse(e),n=t.streams.length;XM=parseInt(t._total),n<Ul&&(FM=!0);var a=DM;YM=!(DM+=n);var i=n/Fl;0<n%Fl&&i++;for(var o,s,d,c,r,l=0,u=document.getElementById("stream_table_user_live"),_=0;_<i;_++){for(s=a/Fl+_,d=document.createElement("tr"),o=0;o<Fl&&l<n;o++,l++)r=(c=t.streams[l]).channel._id,RM[r]?o--:(RM[r]=1,d.appendChild(E_(s,s+"_"+o,[c.channel.name,r],KM,[c.preview.template.replace("{width}x{height}",Zl),Qu(JSON.stringify(c.stream_type))+c.channel.display_name,c.channel.status,c.game,y+Ep(c.created_at)+b+", "+h+Ku(c.viewers)+H,$u(c.video_height,c.average_fps,c.channel.broadcaster_language)])));for(;o<Fl;o++)FM&&!eE&&(eE=!0,DM=s*Fl+o),d.appendChild(w_(KM[9]+s+"_"+o)),VM.push(KM[9]+s+"_"+o);u.appendChild(d)}uE()}function uE(){if($M){if(h_(fu),0<VM.length&&!FM)return iE(),void _E();Fu(UM,NM,Fl,DM),VM=[]}else YM?Vu(B+K):($M=!0,hE(),h_(fu),o_()),Mu(KM[10]),cf=!1,Tu();HM=!1}function _E(){Ru(VM.length);var e=DM+jM;e&&XM-1<e&&(e=XM-jl,FM=!0),kf("https://api.twitch.tv/kraken/streams/?channel="+encodeURIComponent(QM)+"&limit="+jl+"&offset="+e+"&stream_type=all",zM,2,null,mE,fE)}function fE(){++JM<qM?(zM+=500,_E()):(FM=!0,DM-=VM.length,VM=[],uE())}function mE(e){var t,n,a=JSON.parse(e),i=a.streams.length,o=0,s=0,d=[];for(XM=parseInt(a._total),i<jl&&(FM=!0);o<VM.length&&s<i;o++,s++)n=(t=a.streams[s]).channel._id,RM[n]?o--:(RM[n]=1,I_(VM[o],[t.channel.name,n],[t.preview.template.replace("{width}x{height}",Zl),Qu(JSON.stringify(t.stream_type))+t.channel.display_name,t.channel.status,t.game,y+Ep(t.created_at)+b+", "+h+Ku(t.viewers)+H,$u(t.video_height,t.average_fps,t.channel.broadcaster_language)],KM),d.push(o));for(o=d.length-1;-1<o;o--)VM.splice(d[o],1);jM+=s,FM&&(DM-=VM.length,VM=[]),uE()}function hE(){A_(NM,UM,KM,Fl,DM),DM/Fl<NM+Dl&&!FM&&!HM&&(iE(),oE()),wl&&pE()}function pE(){DM&&J_(NM+"_"+UM,KM)}function gE(e){var t;if(!cf&&!O_())switch(B_(),e.keyCode){case La:Yu()?Wu():zu()?qu():(pE(),lf(gE));break;case Ea:if(Zu(NM,UM-1,KM[0]))pE(),UM--,hE();else for(t=Fl-1;-1<t;t--)if(Zu(NM-1,t,KM[0])){pE(),NM--,UM=t,hE();break}break;case Sa:Zu(NM,UM+1,KM[0])?(pE(),UM++,hE()):Zu(NM+1,0,KM[0])&&(pE(),NM++,UM=0,hE());break;case Ia:for(t=0;t<Fl;t++)if(Zu(NM-1,UM-t,KM[0])){pE(),NM--,UM-=t,hE();break}break;case xa:for(t=0;t<Fl;t++)if(Zu(NM+1,UM-t,KM[0])){pE(),NM++,UM-=t,hE();break}break;case Ca:case ka:case Ma:case Pa:U_(NM+"_"+UM,KM,gE)}}var vE=0,yE=0,bE=8,wE=0,kE=null,CE=["u_thumbdiv","u_img","u_infodiv","u_displayname","u_cell","user_scroll"],ME=!1,EE=!0;function IE(){return Cl?(SE(),void Xa(Cl)):ao()?(vl.Main_CenterLablesVectorPos=1,vl.Main_Go=cl,document.getElementById("screens_holder").style.top=screen.height/100*7+"px",Hu(),Iu("top_bar_user","icon_center_focus"),document.body.addEventListener("keydown",HE,!1),void(ME?(v_(vE),Mu(CE[5]),OE(),o_()):xE())):(vl.Main_Go=Yr,SE(),void a_())}function SE(){vl.Users_Position=0,Su("top_bar_user","icon_center_focus"),document.body.removeEventListener("keydown",HE),Cu(CE[5]),document.getElementById("screens_holder").style.top="0"}function xE(){m_("stream_table_user"),Cu(CE[5]),Lu(),Hu(),cf=!(ME=!1),EE=!(vE=yE=0),j_(function(){PE()})}function PE(){for(var e,t,n,a=document.createElement("tbody"),i=document.getElementById("stream_table_user"),o=0;o<Ai.length;o++)t=0,n=o%2?"B5B5B5":"FFFFFF",(Sl=document.createElement("tr")).className="follower_header",Sl.innerHTML='<div class="follower_header">'+(o?"":se)+Ai[o].name+F+"</div>",i.appendChild(a),i.appendChild(Sl),(e=document.createElement("tr")).appendChild(LE(o+"_"+t,vl.Main_selectedChannelDisplayname,K,"play",n)),t++,e.appendChild(LE(o+"_"+t,vl.Main_selectedChannelDisplayname,$,"users",n)),t++,e.appendChild(LE(o+"_"+t,vl.Main_selectedChannelDisplayname,sb.isLive?Q:jt,"gamepad",n)),t++,e.appendChild(LE(o+"_"+t,vl.Main_selectedChannelDisplayname,Zt,"movie-play",n)),t++,e.appendChild(LE(o+"_"+t,vl.Main_selectedChannelDisplayname,Z,"filmstrip",n)),t++,o?e.appendChild(LE(o+"_"+t,vl.Main_selectedChannelDisplayname,oe,"arrow-up",n)):e.appendChild(LE(o+"_"+t,vl.Main_selectedChannelDisplayname,ee,"user-plus",n)),t++,e.appendChild(LE(o+"_"+t,vl.Main_selectedChannelDisplayname,te,"user-times",n)),t++,e.appendChild(LE(o+"_"+t,vl.Main_selectedChannelDisplayname,Ai[o].access_token?kt:wt,"key",n)),i.appendChild(e);TE()}function LE(e,t,n,a,i){return(Sl=document.createElement("td")).setAttribute("id",CE[4]+e),Sl.setAttribute(nu,t),Sl.className="stream_cell",Sl.innerHTML='<div id="'+CE[0]+e+'" class="stream_thumbnail_channel" ><div id="'+CE[1]+e+'" class="stream_user_icon" style="color: #'+i+';"><i class="icon-'+a+'"></i></div></div><div id="'+CE[2]+e+'" class="stream_text"><div id="'+CE[3]+e+'" class="stream_info_user" style="text-align: center;">'+n+"</div></div>",Sl}function TE(){j_(function(){ME||(ME=!0,OE(),Tu(),o_()),Mu(CE[5]),EE=cf=!1})}function BE(){for(var e=0;e<Ai.length;e++)Pu(CE[3]+e+"_2",sb.isLive?Q:jt)}function OE(){Iu(CE[0]+vE+"_"+yE,"stream_thumbnail_focused"),y_(vE)?1<vE?Zu(vE+1,0,CE[0])&&H_(CE[5],-1*document.getElementById(CE[4]+vE+"_"+yE).offsetTop+500):H_(CE[5],screen.height/100*7):L_(),wl&&GE()}function GE(){bl=!1,Su(CE[0]+vE+"_"+yE,"stream_thumbnail_focused")}function AE(){return vl.Users_Position=vE,3!==yE||Ai[vl.Users_Position].access_token?7===yE&&Ai[vl.Users_Position].access_token?(Vu(kt),void window.setTimeout(Hu,1500)):(6!==yE&&7!==yE&&(Cu(CE[5]),document.body.removeEventListener("keydown",HE),document.getElementById("screens_holder").style.top="0"),void j_(function(){yE?1===yE?NC():2===yE?(Ly=sb,Ay()):3===yE?rI():4===yE?sC():5===yE?vE?to(vE):(vl.Main_Before=cl,Di()):6===yE?FE():7!==yE||Ai[vl.Users_Position].access_token||FE():tE()})):(Vu(xn),void window.setTimeout(Hu,5e3))}function NE(){window.clearTimeout(kE)}function UE(){kE=window.setTimeout(DE,2e4)}function FE(){UE(),6===yE?xu("main_dialog_remove",qt+oa+Ai[vl.Users_Position].name+"?"):7===yE&&xu("main_dialog_remove",mt+" "+Ai[vl.Users_Position].name+"?"),Mu("main_remove_dialog")}function DE(){NE(),Cu("main_remove_dialog"),wE=0,VE()}function RE(){return Eu("main_remove_dialog")}function VE(){wE?(Su("remove_cancel","button_search_focused"),Iu("remove_yes","button_search_focused")):(Iu("remove_cancel","button_search_focused"),Su("remove_yes","button_search_focused"))}function HE(e){var t;if(!cf&&!O_())switch(B_(),e.keyCode){case La:RE()?DE():zu()?qu():Yu()?Wu():(GE(),lf(HE));break;case Ea:if(RE())--wE<0&&(wE=1),VE(),NE(),UE();else if(Zu(vE,yE-1,CE[0]))GE(),yE--,OE();else if(Zu(vE-1,0,CE[0])){for(t=bE-1;-1<t;t--)if(Zu(vE-1,t,CE[0])){GE(),vE--,yE=t,OE();break}}else GE(),yE=bE-1,OE();break;case Sa:RE()?(1<++wE&&(wE=0),VE(),NE(),UE()):(Zu(vE,yE+1,CE[0])?(GE(),yE++):(Zu(vE+1,0,CE[0])?(GE(),vE++):GE(),yE=0),OE());break;case Ia:for(t=0;t<bE;t++)if(Zu(vE-1,yE-t,CE[0])){GE(),vE--,yE-=t,OE();break}break;case xa:for(t=0;t<bE;t++)if(Zu(vE+1,yE-t,CE[0])){GE(),vE++,yE-=t,OE();break}break;case Ca:case ka:case Ma:case Pa:var n;if(RE()){if(6===yE)n=wE,DE(),n&&(document.body.removeEventListener("keydown",HE),SE(),Zi(vE));else if(n=wE,DE(),n){vl.Users_AddcodePosition=vl.Users_Position,o_();var a=qa,i="https://id.twitch.tv/oauth2/authorize?response_type=code&client_id="+encodeURIComponent(Xl)+"&redirect_uri="+a+"&scope=user_follows_edit+user_subscriptions&force_verify=true";window.location=i}}else AE()}}var JE=0,qE=0,zE=!1,jE=0,XE={},WE=[],YE=!1,KE=0,$E=5,QE=3500,ZE=0,eI=0,tI=!1,nI=!1,aI="time",iI=2,oI=!1,sI=["uv_thumbdiv","uv_img","uv_infodiv","uv_title","uv_streamon","uv_duration","uv_viwers","uv_quality","uv_cell","uvempty_","user_vod_scroll","uv_game"],dI=!1,cI=!1;function rI(){vl.Main_CenterLablesVectorPos=1,vl.Main_Go=pl,Iu("top_bar_user","icon_center_focus"),ku("label_side_panel","icon-arrow-circle-left",x),xu("top_bar_user",u+l_(Ai[vl.Users_Position].name+(cI?N:A))),document.body.addEventListener("keydown",SI,!1),dI?(v_(JE),Mu(sI[10]),xI(),CI(),o_()):uI()}function lI(){vl.Users_Position=0,dI&&MI(),Su("top_bar_user","icon_center_focus"),ku("label_side_panel","icon-ellipsis",Fn),document.body.removeEventListener("keydown",SI),Pu("top_bar_user",u),Cu(sI[10])}function uI(){dI&&MI(),m_("stream_table_user_vod"),Cu(sI[10]),Lu(),xI(),Hu(),oI=dI=!1,cf=!(nI=!(WE=[])),JE=qE=jE=eI=ZE=0,zE=!(XE={}),Uu(),fI()}function _I(){p_(),YE=!0,KE=0,QE=3500}function fI(){_I(),mI()}function mI(){var e=jE+ZE;e&&eI-1<e&&(e=eI-Ul,zE=!0);var t,n="https://api.twitch.tv/kraken/videos/followed?limit="+Ul+"&broadcast_type="+(cI?"highlight":"archive")+"&sort="+aI+"&offset="+e;if(cu){if(!(t=Android.mreadUrl(n,QE,3,$l+Ai[vl.Users_Position].access_token)))return void hI();if(200===(t=JSON.parse(t)).status)return void gI(t.responseText);401===t.status||403===t.status?Wa(vl.Users_Position,0,fI,pI):hI()}else(t=new XMLHttpRequest).open("GET",n,!0),t.timeout=QE,t.setRequestHeader(Yl,Ql),t.setRequestHeader(Wl,Xl),t.setRequestHeader(Kl,$l+Ai[vl.Users_Position].access_token),t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void gI(t.responseText);401===t.status||403===t.status?Wa(vl.Users_Position,0,fI,pI):hI()}},t.send(null)}function hI(){++KE<$E?(QE+=500,mI()):pI()}function pI(){YE=!1,jE?(zE=!0,vI()):(cf=!1,Tu(),Vu(T))}function gI(e){var t=JSON.parse(e),n=t.videos.length;eI=parseInt(t._total),n<Ul&&(zE=!0);var a=jE;tI=!(jE+=n);var i=n/Fl;0<n%Fl&&i++;var o,s,d,c,r,l=0,u=document.getElementById("stream_table_user_vod");if(!oI){var _;for(oI=!0,d=document.createElement("tr"),f=0;f<2;f++)_=f?'<i class="icon-history stream_channel_fallow_icon"></i>'+ya+ya+Pn:'<i class="icon-movie-play stream_channel_fallow_icon"></i>'+ya+ya+p,(Sl=document.createElement("td")).setAttribute("id",sI[8]+"y_"+f),Sl.className="stream_cell",Sl.innerHTML='<div id="'+sI[0]+"y_"+f+'" class="stream_thumbnail_channel_vod" ><div id="'+sI[3]+"y_"+f+'" class="stream_channel_fallow_game">'+_+"</div></div>",d.appendChild(Sl);u.appendChild(d)}for(var f=0;f<i;f++){for(s=a/Fl+f,d=document.createElement("tr"),o=0;o<Fl&&l<n;o++,l++)r=(c=t.videos[l])._id,-1!==(c.preview.template+"").indexOf("404_processing")||XE[r]?o--:(XE[r]=1,d.appendChild(oS(s,s+"_"+o,[r,c.length,c.channel.broadcaster_language,c.game,c.channel.name,c.increment_view_count_url],[c.preview.template.replace("{width}x{height}",Zl),c.channel.display_name,D+u_(c.created_at),xS.parse(c.title)+oa+$t+g+c.game,Ku(c.views)+V,$u(c.resolutions.chunked.slice(-4),parseInt(c.fps.chunked)||0,c.channel.broadcaster_language),R+Cp(c.length),c.animated_preview_url],sI)));for(;o<Fl;o++)zE&&!nI&&(nI=!0,jE=s*Fl+o),d.appendChild(w_(sI[9]+s+"_"+o)),WE.push(sI[9]+s+"_"+o);u.appendChild(d)}vI()}function vI(){dI?(h_(fu),Fu(qE,JE,Fl,jE)):(tI?Vu(B+(cI?N:A)+O+S):(dI=!0,CI(),h_(fu),o_()),Mu(sI[10]),cf=!1,Tu()),0<WE.length&&!zE?yI():YE=!(WE=[])}function yI(){_I(),bI()}function bI(){Ru(WE.length);var e=jE+ZE;e&&eI-1<e&&(e=eI-jl,zE=!0);var t,n="https://api.twitch.tv/kraken/videos/followed?limit="+jl+"&broadcast_type="+(cI?"highlight":"archive")+"&sort="+aI+"&offset="+e;if(cu){if(!(t=Android.mreadUrl(n,QE,3,$l+Ai[vl.Users_Position].access_token)))return void wI();if(200===(t=JSON.parse(t)).status)return void kI(t.responseText);401===t.status||403===t.status?Wa(vl.Users_Position,0,fI,pI):wI()}else(t=new XMLHttpRequest).open("GET",n,!0),t.timeout=QE,t.setRequestHeader(Yl,Ql),t.setRequestHeader(Wl,Xl),t.setRequestHeader(Kl,$l+Ai[vl.Users_Position].access_token),t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void kI(t.responseText);401===t.status||403===t.status?Wa(vl.Users_Position,0,fI,pI):wI()}},t.send(null)}function wI(){++KE<$E?(QE+=500,bI()):(zE=!0,jE-=WE.length,WE=[],vI())}function kI(e){var t,n,a=JSON.parse(e),i=a.videos.length,o=0,s=0,d=[];for(eI=parseInt(a._total);o<WE.length&&s<i;o++,s++)n=(t=a.videos[s])._id,-1!==(t.preview.template+"").indexOf("404_processing")||XE[n]?o--:(XE[n]=1,dS(WE[o],[n,t.length,t.channel.broadcaster_language,t.game,t.channel.name,t.increment_view_count_url],[t.preview.template.replace("{width}x{height}",Zl),t.channel.display_name,D+u_(t.created_at),xS.parse(t.title)+oa+$t+g+t.game,Ku(t.views)+V,$u(t.resolutions.chunked.slice(-4),parseInt(t.fps.chunked)||0,t.channel.broadcaster_language),R+Cp(t.length),t.animated_preview_url],sI),d.push(o));for(o=d.length-1;-1<o;o--)WE.splice(d[o],1);ZE+=s,zE&&(jE-=WE.length,WE=[]),vI()}function CI(){JE<0?EI():(A_(JE,qE,sI,Fl,jE),gS(sI,JE+"_"+qE),jE/Fl<JE+Dl&&!zE&&!YE&&fI(),wl&&MI())}function MI(){window.clearInterval(PI),-1<JE&&jE?(Mu(sI[1]+JE+"_"+qE),J_(JE+"_"+qE,sI)):II()}function EI(){var e=1<qE?1:qE;Iu(sI[0]+"y_"+e,tu)}function II(){var e=1<qE?1:qE;Su(sI[0]+"y_"+e,tu)}function SI(e){var t;if(!cf&&!O_())switch(B_(),e.keyCode){case La:zu()?qu():zu()?qu():Yu()?Wu():(MI(),lf(SI));break;case Ea:if(-1===JE)II(),--qE<0&&(qE=1),EI();else if(JE||qE){if(Zu(JE,qE-1,sI[0]))MI(),qE--,CI();else for(t=Fl-1;-1<t;t--)if(Zu(JE-1,t,sI[0])){MI(),JE--,qE=t,CI();break}}else MI(),II(),JE=-1,qE=1,EI();break;case Sa:-1===JE?(II(),1<++qE?(qE=0,tI?EI():(JE=0,CI())):EI()):Zu(JE,qE+1,sI[0])?(MI(),qE++,CI()):Zu(JE+1,0,sI[0])&&(MI(),JE++,qE=0,CI());break;case Ia:if(-1!==JE||tI)if(JE){for(t=0;t<Fl;t++)if(Zu(JE-1,qE-t,sI[0])){MI(),JE--,qE-=t,CI();break}}else MI(),JE=-1,EI();else JE=0,II(),CI();break;case xa:if(-1!==JE||tI){for(t=0;t<Fl;t++)if(Zu(JE+1,qE-t,sI[0])){MI(),JE++,qE-=t,CI();break}}else JE=0,II(),CI();break;case Ca:case ka:case Ma:case Pa:-1===JE?(0===qE?pf("UserVod_highlight",(cI=!cI)?"true":"false"):1===iI?iI++:iI--,uI()):R_(JE+"_"+qE,sI,SI)}}function xI(){1===iI?(xu("top_bar_user",u+l_(Ai[vl.Users_Position].name+" "+(cI?N:A)+In)),aI="time"):2===iI&&(xu("top_bar_user",u+l_(Ai[vl.Users_Position].name+" "+(cI?N:A)+Sn)),aI="views"),pf("UserVod_TypeNumber",iI)}var PI,LI=0,TI=0,BI=!1,OI=0,GI={},AI=[],NI=!1,UI=0,FI=5,DI=3500,RI=0,VI=0,HI=!1,JI=!1,qI="week",zI=2,jI=!1,XI=["v_thumbdiv","v_img","v_infodiv","v_title","v_streamon","v_duration","v_viwers","v_quality","v_cell","vempty_","vod_scroll","v_game"],WI=!1,YI=!1,KI=1,$I=new Image;function QI(){vl.Main_CenterLablesVectorPos=4,vl.Main_Go=ul,Iu("top_bar_vod","icon_center_focus"),document.body.addEventListener("keydown",vS,!1),WI?(v_(LI),Mu(XI[10]),yS(),fS(),o_()):eS()}function ZI(){WI&&mS(),c_(),document.body.removeEventListener("keydown",vS),Su("top_bar_vod","icon_center_focus"),Pu("top_bar_vod",Zt),Cu(XI[10])}function eS(){WI&&mS(),m_("stream_table_vod"),Cu(XI[10]),Lu(),yS(),Hu(),jI=WI=!1,cf=!(JI=!(AI=[])),LI=TI=OI=VI=RI=0,BI=!(GI={}),Uu(),tS(),nS()}function tS(){p_(),NI=!0,UI=0,DI=3500}function nS(){var e=OI+RI;e&&VI-1<e&&(e=VI-Ul,BI=!0),kf("https://api.twitch.tv/kraken/videos/top?limit="+Ul+"&broadcast_type="+(YI?"highlight":"archive")+"&sort=views&offset="+e+"&period="+qI+(""!==Pl?"&language="+Pl:""),DI,2,null,iS,aS)}function aS(){++UI<FI?(DI+=500,nS()):(NI=!1,OI?(BI=!0,rS()):(cf=!1,Tu(),Vu(T)))}function iS(e){var t=JSON.parse(e),n=t.vods.length;VI=parseInt(t._total),n<Ul&&(BI=!0);var a=OI;HI=!(OI+=n);var i=n/Fl;0<n%Fl&&i++;var o,s,d,c,r,l=0,u=document.getElementById("stream_table_vod");if(!jI){var _;for(jI=!0,d=document.createElement("tr"),f=0;f<2;f++)_=f?'<i class="icon-history stream_channel_fallow_icon"></i>'+ya+ya+m:'<i class="icon-movie-play stream_channel_fallow_icon"></i>'+ya+ya+p,(Sl=document.createElement("td")).setAttribute("id",XI[8]+"y_"+f),Sl.className="stream_cell",Sl.innerHTML='<div id="'+XI[0]+"y_"+f+'" class="stream_thumbnail_channel_vod" ><div id="'+XI[3]+"y_"+f+'" class="stream_channel_fallow_game">'+_+"</div></div>",d.appendChild(Sl);u.appendChild(d)}for(var f=0;f<i;f++){for(s=a/Fl+f,d=document.createElement("tr"),o=0;o<Fl&&l<n;o++,l++)r=(c=t.vods[l])._id,-1!==(c.preview.template+"").indexOf("404_processing")||GI[r]?o--:(GI[r]=1,d.appendChild(oS(s,s+"_"+o,[r,c.length,c.channel.broadcaster_language,c.game,c.channel.name,c.increment_view_count_url],[c.preview.template.replace("{width}x{height}",Zl),c.channel.display_name,D+u_(c.created_at),xS.parse(c.title)+oa+$t+g+c.game,Ku(c.views)+V,$u(c.resolutions.chunked.slice(-4),parseInt(c.fps.chunked)||0,c.channel.broadcaster_language),R+Cp(c.length),c.animated_preview_url],XI)));for(;o<Fl;o++)BI&&!JI&&(JI=!0,OI=s*Fl+o),d.appendChild(w_(XI[9]+s+"_"+o)),AI.push(XI[9]+s+"_"+o);u.appendChild(d)}rS()}function oS(e,t,n,a,i){return e<Fl&&b_(a[0]),sS(n,t,a,i)}function sS(e,t,n,a){return(Sl=document.createElement("td")).setAttribute("id",a[8]+t),Sl.setAttribute(nu,JSON.stringify(e)),Sl.className="stream_cell",Sl.innerHTML=cS(t,n,a),Sl}function dS(e,t,n,a){var i=document.getElementById(e),o=e.split(a[9])[1];i.setAttribute(nu,JSON.stringify(t)),i.innerHTML=cS(o,n,a),i.setAttribute("id",a[8]+o)}function cS(e,t,n){return g_(n[1]+e,t[0]),'<div id="'+n[0]+e+'" class="stream_thumbnail_clip"'+(t[7]?' style="background-size: 0 0; background-image: url('+t[7]+');"':"")+'><div><img id="'+n[1]+e+'" class="stream_img"></div><div id="'+n[2]+e+'" class="stream_text2"><div style="line-height: 14px;"><div id="'+n[3]+e+'" class="stream_info" style="width: 72%; display: inline-block; font-size: 85%;">'+t[1]+'</div><div id="'+n[7]+e+'"class="stream_info" style="width:27%; float: right; text-align: right; display: inline-block;">'+t[5]+'</div></div><div style="line-height: 12px;"><div id="'+n[4]+e+'"class="stream_info" style="width: 59%; display: inline-block;">'+t[2]+'</div><div id="'+n[5]+e+'"class="stream_info" style="width: 39%; display: inline-block; float: right; text-align: right;">'+t[6]+'</div></div><div id="'+n[11]+e+'"class="stream_info">'+t[3]+'</div><div id="'+n[6]+e+'"class="stream_info">'+t[4]+"</div></div></div>"}function rS(){if(WI?(h_(fu),Fu(TI,LI,Fl,OI)):(HI?Vu(B+(YI?N:A)+O+S):(WI=!0,fS(),h_(fu),o_()),Mu(XI[10]),cf=!1,Tu()),0<AI.length&&!BI)return tS(),void lS();NI=!(AI=[])}function lS(){Ru(AI.length);var e=OI+RI;e&&VI-1<e&&(e=VI-jl,BI=!0),kf("https://api.twitch.tv/kraken/videos/top?limit="+jl+"&broadcast_type="+(YI?"highlight":"archive")+"&sort=views&offset="+e+"&period="+qI+(""!==Pl?"&language="+Pl:""),DI,2,null,_S,uS)}function uS(){++UI<FI?(DI+=500,lS()):(BI=!0,OI-=AI.length,AI=[],rS())}function _S(e){var t,n,a=JSON.parse(e),i=a.vods.length,o=0,s=0,d=[];for(VI=parseInt(a._total);o<AI.length&&s<i;o++,s++)n=(t=a.vods[s])._id,-1!==(t.preview.template+"").indexOf("404_processing")||GI[n]?o--:(GI[n]=1,dS(AI[o],[n,t.length,t.channel.broadcaster_language,t.game,t.channel.name,t.increment_view_count_url],[t.preview.template.replace("{width}x{height}",Zl),t.channel.display_name,D+u_(t.created_at),xS.parse(t.title)+oa+$t+g+t.game,Ku(t.views)+V,$u(t.resolutions.chunked.slice(-4),parseInt(t.fps.chunked)||0,t.channel.broadcaster_language),R+Cp(t.length),t.animated_preview_url],XI),d.push(o));for(o=d.length-1;-1<o;o--)AI.splice(d[o],1);RI+=s,BI&&(OI-=AI.length,AI=[]),rS()}function fS(){LI<0?hS():(A_(LI,TI,XI,Fl,OI),gS(XI,LI+"_"+TI),OI/Fl<LI+Dl&&!BI&&!NI&&(tS(),nS()),wl&&mS())}function mS(){window.clearInterval(PI),-1<LI&&OI?(Mu(XI[1]+LI+"_"+TI),J_(LI+"_"+TI,XI)):pS()}function hS(){var e=1<TI?1:TI;Iu(XI[0]+"y_"+e,tu)}function pS(){var e=1<TI?1:TI;Su(XI[0]+"y_"+e,tu)}function gS(t,n){if(KI){var a=document.getElementById(t[0]+n);$I.onload=function(){Cu(t[1]+n),a.style.backgroundSize="612px";var e=0;PI=window.setInterval(function(){a.style.backgroundPosition="0px "+ ++e%10*-344+"px"},650)},$I.src=a.style.backgroundImage.replace(/url\(['"]?(.*?)['"]?\)/i,"$1")}}function vS(e){var t;if(!cf&&!O_())switch(B_(),e.keyCode){case La:Yu()?Wu():zu()?qu():(mS(),lf(vS));break;case Ea:if(-1===LI)pS(),--TI<0&&(TI=1),hS();else if(LI||TI){if(Zu(LI,TI-1,XI[0]))mS(),TI--,fS();else for(t=Fl-1;-1<t;t--)if(Zu(LI-1,t,XI[0])){mS(),LI--,TI=t,fS();break}}else mS(),pS(),LI=-1,TI=1,hS();break;case Sa:-1===LI?(pS(),1<++TI?(TI=0,HI?hS():(LI=0,fS())):hS()):Zu(LI,TI+1,XI[0])?(mS(),TI++,fS()):Zu(LI+1,0,XI[0])&&(mS(),LI++,TI=0,fS());break;case Ia:if(-1!==LI||HI)if(LI){for(t=0;t<Fl;t++)if(Zu(LI-1,TI-t,XI[0])){mS(),LI--,TI-=t,fS();break}}else mS(),LI=-1,hS();else LI=0,pS(),fS();break;case xa:if(-1!==LI||HI){for(t=0;t<Fl;t++)if(Zu(LI+1,TI-t,XI[0])){mS(),LI++,TI-=t,fS();break}}else LI=0,pS(),fS();break;case Ca:case ka:case Ma:case Pa:-1===LI?(0===TI?pf("Vod_highlight",(YI=!YI)?"true":"false"):4<++zI&&(zI=1),eS()):R_(LI+"_"+TI,XI,vS)}}function yS(){1===zI?(xu("top_bar_vod",Zt+l_((YI?N:A)+ce)),qI="day"):2===zI?(xu("top_bar_vod",Zt+l_((YI?N:A)+re)),qI="week"):3===zI?(xu("top_bar_vod",Zt+l_((YI?N:A)+le)),qI="month"):4===zI&&(xu("top_bar_vod",Zt+l_((YI?N:A)+ue)),qI="all"),pf("vod_periodNumber",zI)}function bS(e,t,n){if(n.restrictions){if(n.restrictions.channels&&n.restrictions.channels.length&&-1===n.restrictions.channels.indexOf(vl.Play_selectedChannel))return t;if(n.restrictions.games&&n.restrictions.games.length)return t}return t.replace(n.code,wS(n))}function wS(e){return'<img class="emoticon" src="'+e["1x"]+'" srcset="'+e["2x"]+" 2x, "+e["3x"]+' 4x" />'}function kS(e){return'<img class="emoticon" src="https://static-cdn.jtvnw.net/emoticons/v1/'+e+'/1.0" srcset="https://static-cdn.jtvnw.net/emoticons/v1/'+e+"/2.0 2x, https://static-cdn.jtvnw.net/emoticons/v1/"+e+'/3.0 4x" />'}function CS(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function MS(e,t){for(var n=t.split(" "),a=0;a<n.length;a++){var i=n[a],o=i.replace(/(^[~!@#$%\^&\*\(\)]+|[~!@#$%\^&\*\(\)]+$)/g,""),s=Cc[o]||Cc[i];i=s?bS(e,i,s):CS(i),n[a]=i}return n.join(" ")}function ES(t,a){if(!a)return[t];var n=[],e=Object.keys(a),i=[];return e.forEach(function(e){for(var t=a[e],n=t.length-1;0<=n;n--)i.push({id:e,first:t[n][0],last:t[n][1]})}),i.sort(function(e,t){return t.first-e.first}),t=punycode.ucs2.decode(t),i.forEach(function(e){n.unshift(punycode.ucs2.encode(t.slice(e.last+1))),n.unshift([kS(e.id)]),t=t.slice(0,e.first)}),n.unshift(punycode.ucs2.encode(t)),n}function IS(a){return Object.keys(a).map(function(n){var e=a[n];return e.type=n,e.versions=Object.keys(a[n].versions).map(function(e){var t=a[n].versions[e];return t.type=e,t}),e})}function SS(e,t,n,a){var i=document.createElement("style");i.type="text/css",i.innerHTML="."+e+"-"+t+' { background-image: url("'+n.replace("http:","https:")+'"); }',a?a.appendChild(i):document.head.appendChild(i)}window.parseIRC=function(e){var t={raw:e,tags:{},prefix:null,command:null,params:[]},n=0,a=0;if(64===e.charCodeAt(0)){if(-1===(a=e.indexOf(" ")))return null;for(var i=e.slice(1,a).split(";"),o=0;o<i.length;o++){var s=i[o].split("=");t.tags[s[0]]=s[1]||!0}n=a+1}for(;32===e.charCodeAt(n);)n++;if(58===e.charCodeAt(n)){if(-1===(a=e.indexOf(" ",n)))return null;for(t.prefix=e.slice(n+1,a),n=a+1;32===e.charCodeAt(n);)n++}if(-1===(a=e.indexOf(" ",n)))return e.length>n?(t.command=e.slice(n),t):null;for(t.command=e.slice(n,a),n=a+1;32===e.charCodeAt(n);)n++;for(;n<e.length;){if(a=e.indexOf(" ",n),58===e.charCodeAt(n)){t.params.push(e.slice(n+1));break}if(-1===a){if(-1===a){t.params.push(e.slice(n));break}}else for(t.params.push(e.slice(n,a)),n=a+1;32===e.charCodeAt(n);)n++}return t},function(e){var t="object"==typeof global&&global;t.global!==t&&t.window!==t&&t.self!==t||(e=t);var n,g=2147483647,v=36,y=26,i=38,o=700,a=/^xn--/,s=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,c={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},r=v-1,b=Math.floor,w=String.fromCharCode;function k(e){throw new RangeError(c[e])}function l(e,t){for(var n=e.length,a=[];n--;)a[n]=t(e[n]);return a}function u(e,t){var n=e.split("@"),a="";return 1<n.length&&(a=n[0]+"@",e=n[1]),a+l((e=e.replace(d,".")).split("."),t).join(".")}function C(e){for(var t,n,a=[],i=0,o=e.length;i<o;)55296<=(t=e.charCodeAt(i++))&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?a.push(((1023&t)<<10)+(1023&n)+65536):(a.push(t),i--):a.push(t);return a}function M(e){return l(e,function(e){var t="";return 65535<e&&(t+=w((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+w(e)}).join("")}function E(e,t){return e+22+75*(e<26)-((0!==t)<<5)}function I(e,t,n){var a=0;for(e=n?b(e/o):e>>1,e+=b(e/t);r*y>>1<e;a+=v)e=b(e/r);return b(a+(r+1)*e/(e+i))}function _(e){var t,n,a,i,o,s,d,c,r,l,u,_=[],f=e.length,m=0,h=128,p=72;for((n=e.lastIndexOf("-"))<0&&(n=0),a=0;a<n;++a)128<=e.charCodeAt(a)&&k("not-basic"),_.push(e.charCodeAt(a));for(i=0<n?n+1:0;i<f;){for(o=m,s=1,d=v;f<=i&&k("invalid-input"),u=e.charCodeAt(i++),(v<=(c=u-48<10?u-22:u-65<26?u-65:u-97<26?u-97:v)||c>b((g-m)/s))&&k("overflow"),m+=c*s,!(c<(r=d<=p?1:p+y<=d?y:d-p));d+=v)s>b(g/(l=v-r))&&k("overflow"),s*=l;p=I(m-o,t=_.length+1,0===o),b(m/t)>g-h&&k("overflow"),h+=b(m/t),m%=t,_.splice(m++,0,h)}return M(_)}function f(e){var t,n,a,i,o,s,d,c,r,l,u,_,f,m,h,p=[];for(_=(e=C(e)).length,t=128,o=72,s=n=0;s<_;++s)(u=e[s])<128&&p.push(w(u));for(a=i=p.length,i&&p.push("-");a<_;){for(d=g,s=0;s<_;++s)t<=(u=e[s])&&u<d&&(d=u);for(d-t>b((g-n)/(f=a+1))&&k("overflow"),n+=(d-t)*f,t=d,s=0;s<_;++s)if((u=e[s])<t&&++n>g&&k("overflow"),u===t){for(c=n,r=v;!(c<(l=r<=o?1:o+y<=r?y:r-o));r+=v)h=c-l,m=v-l,p.push(w(E(l+h%m,0))),c=b(h/m);p.push(w(E(c,0))),o=I(n,f,a===i),n=0,++a}++n,++t}return p.join("")}n={version:"1.4.1",ucs2:{decode:C,encode:M},decode:_,encode:f,toASCII:function(e){return u(e,function(e){return s.test(e)?"xn--"+f(e):e})},toUnicode:function(e){return u(e,function(e){return a.test(e)?_(e.slice(4).toLowerCase()):e})}},e.punycode=n}(this),function(e,t){e.ReconnectingWebSocket=function(){if("WebSocket"in window)return u.prototype.onopen=function(){},u.prototype.onclose=function(){},u.prototype.onconnecting=function(){},u.prototype.onmessage=function(){},u.prototype.onerror=function(){},u.debugAll=!1,u.CONNECTING=WebSocket.CONNECTING,u.OPEN=WebSocket.OPEN,u.CLOSING=WebSocket.CLOSING,u.CLOSED=WebSocket.CLOSED,u;function u(e,t,n){var a={debug:!1,automaticOpen:!0,reconnectInterval:1e3,maxReconnectInterval:3e4,reconnectDecay:1.5,timeoutInterval:3e3,maxReconnectAttempts:null,binaryType:"blob"};for(var i in n||(n={}),a)void 0!==n[i]?this[i]=n[i]:this[i]=a[i];this.url=e,this.reconnectAttempts=0,this.readyState=WebSocket.CONNECTING,this.protocol=null;var o,s=this,d=!1,c=!1,r=document.createElement("div");function l(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}r.addEventListener("open",function(e){s.onopen(e)}),r.addEventListener("close",function(e){s.onclose(e)}),r.addEventListener("connecting",function(e){s.onconnecting(e)}),r.addEventListener("message",function(e){s.onmessage(e)}),r.addEventListener("error",function(e){s.onerror(e)}),this.addEventListener=r.addEventListener.bind(r),this.removeEventListener=r.removeEventListener.bind(r),this.dispatchEvent=r.dispatchEvent.bind(r),this.open=function(a){if((o=new WebSocket(s.url,t||[])).binaryType=this.binaryType,a){if(this.maxReconnectAttempts&&this.reconnectAttempts>this.maxReconnectAttempts)return}else r.dispatchEvent(l("connecting")),this.reconnectAttempts=0;(s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","attempt-connect",s.url);var e=o,i=setTimeout(function(){(s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","connection-timeout",s.url),c=!0,e.close(),c=!1},s.timeoutInterval);o.onopen=function(){clearTimeout(i),(s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","onopen",s.url),s.protocol=o.protocol,s.readyState=WebSocket.OPEN,s.reconnectAttempts=0;var e=l("open");e.isReconnect=a,a=!1,r.dispatchEvent(e)},o.onclose=function(e){if(clearTimeout(i),o=null,d)s.readyState=WebSocket.CLOSED,r.dispatchEvent(l("close"));else{s.readyState=WebSocket.CONNECTING;var t=l("connecting");t.code=e.code,t.reason=e.reason,t.wasClean=e.wasClean,r.dispatchEvent(t),a||c||((s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","onclose",s.url),r.dispatchEvent(l("close")));var n=s.reconnectInterval*Math.pow(s.reconnectDecay,s.reconnectAttempts);setTimeout(function(){s.reconnectAttempts++,s.open(!0)},n>s.maxReconnectInterval?s.maxReconnectInterval:n)}},o.onmessage=function(e){(s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","onmessage",s.url,e.data);var t=l("message");t.data=e.data,r.dispatchEvent(t)},o.onerror=function(e){(s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","onerror",s.url,e),r.dispatchEvent(l("error"))}},!0===this.automaticOpen&&this.open(!1),this.send=function(e){if(o)return(s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","send",s.url,e),o.send(e);throw"INVALID_STATE_ERR : Pausing to reconnect websocket"},this.close=function(e,t){void 0===e&&(e=1e3),d=!0,o&&o.close(e,t)},this.refresh=function(){o&&o.close()}}}()}(this);var xS=function(){var e={parse:function(e,t,n){return t||(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;")),a(e,function(e){var t=function(e){for(var t=e.indexOf(d)<0?e.replace(s,""):e,n=[],a=0,i=0,o=0;o<t.length;)a=t.charCodeAt(o++),i?(n.push((65536+(i-55296<<10)+(a-56320)).toString(16)),i=0):55296<=a&&a<=56319?i=a:n.push(a.toString(16));return n.join("-")}(e);return t?'<img class="'+(n?"emojichat":"emoji")+'" src="https://twemoji.maxcdn.com/2/72x72/'+t+'.png"/>':e})},replace:a},n=/(?:\ud83d[\udc68\udc69])(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddb0-\uddb3])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f)|[\u0023\u002a\u0030-\u0039]\ufe0f?\u20e3|(?:[\u00a9\u00ae\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddb5\uddb6\uddb8\uddb9\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a-\udc6d\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\udeeb\udeec\udef4-\udef9]|\ud83e[\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd40-\udd45\udd47-\udd70\udd73-\udd76\udd7a\udd7c-\udda2\uddb4\uddb7\uddc0-\uddc2\uddd0\uddde-\uddff]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,s=/\uFE0F/g,d=String.fromCharCode(8205);return e;function a(e,t){return String(e).replace(n,t)}}();