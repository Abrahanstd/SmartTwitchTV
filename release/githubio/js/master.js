var t,n,a,e,i,o,s,d,r,c,p,m,l,u,_,f,g,h,v,y,b,w,k,C,M,E,S,I,x,P,T,L,B,O,G,A,N,U,R,F,H,D,q,V,J,z,X,j,W,Y,K,$,Z,Q,ee,te,ne,ae,ie,oe,se,de,re,ce,le,ue,_e,fe,me,he,pe,ge,ve,ye,be,we,ke,Ce,Me,Ee,Se,Ie,xe,Pe,Te,Le,Be,Oe,Ge,Ae,Ne,Ue,Re,Fe,He,De,qe,Ve,Je,ze,Xe,je,We,Ye,Ke,$e,Ze,Qe,et,tt,nt,at,it,ot,st,dt,rt,ct,lt,ut,_t,ft,mt,ht,pt,gt,vt,yt,bt,wt,kt,Ct,Mt,Et,St,It,xt,Pt,Tt,Lt,Bt,Ot,Gt,At,Nt,Ut,Rt,Ft,Ht,Dt,qt,Vt,Jt,zt,Xt,jt,Wt,Yt,Kt,$t,Zt,Qt,en,tn,nn,an,on,sn,dn,rn,cn,ln,un,_n,fn,mn,hn,pn,gn,vn,yn,bn,wn,kn,Cn,Mn,En,Sn,In,xn,Pn,Tn,Ln,Bn,On,Gn,An,Nn,Un,Rn,Fn,Hn,Dn,qn,Vn,Jn,zn,Xn,jn,Wn,Yn,Kn,$n,Zn,Qn,ea,ta,na,aa,ia,oa,sa,da="fglfgl27@gmail.com",ra="<br>",ca='<i class="icon-circle" style="font-size: 50%; vertical-align: middle; font-weight: bold;"></i>  ',la='<div class="about_text_title">',ua='<div class="about_text_title" style="text-align: left;">',_a='<div style="text-align: left;">',fa="",ma="",ha="",pa="",ga="",va="",ya="",ba="",wa="",ka="",Ca="&nbsp;",Ma="",Ea='<div style="vertical-align: middle; display: inline-block;"><i class="icon-twitch" style="color: #FFFFFF; font-size: 115%; "></i></div><div style="vertical-align: middle; display: inline-block">'+Ca;function Sa(){fa=e+" (C)",ma=n+" (D)",pa=a+" (A)",ha=i+" (A)",r+=tn,c+=tn,ga=la+e+"</div>"+la+Ee+"</div>"+ra+_a+ca+Te+ra+ca+(Le+=$t)+ra+ca+Be+ra+ca+Oe+ra+Ge+ra+ca+Ae+ra+Ca+Ca+Ca+Ne+ra+ca+Ue+ra+"</div>"+ra+(ba=la+Ce+"</div>"+_a+ca+at+ra+ca+et+ra+ca+tt+ra+"</div>"+_a+ca+nt+ra+ca+it+ra+ca+ot+ra+ra+la+Me+"</div>"+_a+ca+st+ra+ca+dt+ra+ca+rt+ra+ca+ct+ra+ca+lt)+ra+ra+la+ke+"</div>",va=la+Ea+we+"</div></div>",ya=_a+ra+Re+ra+($c?ra+'<div style="display: inline-block; color: #FF0000; font-size: 110%; font-weight: bold;">'+ea+"</div>":"")+"</div>"+ra+la+Fe+"</div>"+da+ra+ra+He+ra+De+ra+ra+ua+qe+"</div>"+_a+Ke+ra+ca+Ve+ra+ca+Je+ra+ca+ze+ra+ca+Xe+ra+ca+je+ra+ca+We+ra+ca+Ye+ra+$e+ra+ca+Ze+ra+ca+Qe+ra+la+ke+"</div></div>",wa=la+Se+"</div>"+mt+ra,Ma=ra+la+ht+"</div>"+_a+ca+pt+ra+ra+la+Ma+"</div>"+ra+ra+ke+"</div>",ka=vt+ra+ca+yt.replace("link_link",'<div style="display: inline-block; color: #FF0000; font-size: 110%; font-weight: bold;">http://tiny.cc/twitchkeycode</div>')+ra+ca+bt+ra+ca+wt+ra+ca+kt+ra+ca+Ct}function Ia(){Gl=!1,document.getElementById("side_panel").style.width="17%",t="Refresh:",n="Search",a="Settings",e="Controls",i="About",o="Hide",s="The text you entered is empty.",d="The search result is empty.",r="Switch screen",c="Switch user screen",p="Switch: Past Broadcast or Highlight",m="Switch: Period (24h, 7d, 30d, all)",l="Go to ",u="User ",_="Live",f="Games",g="Playing ",h=" for ",v="Watching time ",y="Since ",b=" ago",w="A Game",k="Type your search...",C="Type your authentication key...",M="Type your user name...",E="Press Enter or Select key to, ",S="Channels",I="Channel",x="Back to previously screen: Back key twice",P=" has ended",T="This video is only available to subscribers.",L="Connection failed, unable to load content hit refresh to try again",B="No",O=" for this ",G="Connection failed, unable to load video content exiting...",A=" Past Broadcast",N=" Highlight",U=" Clips",R=" Content",F="Streamed on ",H="Duration ",D=" Views",q=" Viewers",V="Click again to exit!",J="Do you wanna to exit Twitch?",z="Exit",X="Close",j="Minimize",W="Cancel",Y="Not Live | ",K=" Channels Live",$=" Hosts Live",Z=" Games Live",Q=" Followed Channels",ee=" Add User",te=" Remove User",ne="User doesn't exist",ae=" hosting ",ie=" already set",oe="Make First",se="First user can fallow (when providing a key) and see live channels feed outside of the user screen<br>",de="Add a Twitch user to display it's Followed Channels content here",re=" (24h)",ce=" (7d)",le=" (30d)",ue=" (all)",_e="Jumping",fe=" to ",me="Jump Canceled",he=" , jump time bigger then duration",pe=" Sec",ge=" Min",ve=" Hr",ye="Source",be="Version: ",we="SmartTV Twitch",ke="Press back key to close this.",Ce="Player Related:",Me="Chat Related:",Ee="General Related:",Se="Update",Ie="Current installed version ",xe=" latest available version ",Pe="This are the none players related controls, the player can show it's own controls.",Te="Play a video: Navigate using Directional pad (up/down/left/right), press enter to start playing",Le="Refresh screen content: ",Be="Exit the application: from side pannel click exit",Oe=" Switch screen: Back key then D-Pad left or right",Ge="Some screen will change its internal content (channel past broadcast or clips for example) instead of changing to another screen",Ae="Start a search: from side pannel click search",Ne="After writing the search text press key Enter on the virtual keyboard then choose a search option",Ue="About this application: from side pannel click about",Re="This is a SmartTV Twitch client develop by a individual on his free time, for TV's that don't have access to a good official application, released for free to any one that wanna to use it.",ea="This version of the app is for test in a browser only!",Fe="Developer information:",He="This is an open source application licensed under the GNU General Public License v3.0, check it on github",De="github.com/fgl27/SmartTwitchTV",qe="This application uses following dependencies:",Ve="Nightdev KapChat - KapChat captures Twitch chat directly into OBS or XSplit (https://www.nightdev.com/kapchat/)",Je="Fontastic - Create your customized icon fonts in seconds (http://app.fontastic.me)",ze="Twemoji - A simple library that provides standard Unicode emoji support across all platforms (https://github.com/twitter/twemoji)",Xe="UglifyJS - is a JavaScript parser, minifier, compressor and beautifier toolkit (https://github.com/mishoo/UglifyJS2)",je="JS Beautifier - Beautify, unpack or deobfuscate JavaScript and HTML, make JSON/JSONP readable, etc. (https://github.com/beautify-web/js-beautify)",We="HTMLMinifier - A highly configurable, well-tested, JavaScript-based HTML minifier (https://github.com/kangax/html-minifier)",Ye="JSHint - A Static Code Analysis Tool for JavaScript (https://github.com/jshint/jshint)",Ke="Web:",$e="Android:",Ze="Google: Leanback v17 (https://developer.android.com/reference/android/support/v17/leanback/package-summary)",Qe="Google: ExoPlayer (https://github.com/google/ExoPlayer)",et="Show information panel: Press enter key or D-pad keys if chat and live channel feed is not showing",tt="Close the video: press back key twice",nt="Play/Pause a video: open information panel and click on pause simbol (not available to Live streams)",at="Show user live channels feed: D-pad up",it="Change video quality: Open information panel, , navigate using use Directional pad (left/right), then use Directional pad (up/down) to choose the new quality after press Enter key to confirm the change",ot="Force refresh a video (in case it freezes): Change video quality to the same",st="Show or hide the Chat : D-pad right",dt="Change Chat position : D-pad left",rt="Change Chat size : D-pad down",ct="Change Chat background brightness: Change in side panel settings",lt="Force refresh the Chat (in case it freezes or doesn't load): Change video quality to the same will reset and sync it",ut='Start a search: open information panel, navigate using use Directional pad (left/right) to "Search" and press enter',_t="Chat and video (Side by side): Color button red (A)",ia="Force disable the chat",oa="with this the chat will not load content, this is useful on a stream with too many viewers were the chat can lag the app.",ft="There is a update available, check it in the app github releases ",Ma="Be aware that after the update (reinstall of the app using latest release) all saved users, keys or etc configuration of the app is lost",mt="A update is available, and the app can't self update this version ",ht="Major changes:",pt="Improves how the app runs in the background",gt='Adding a key allows the app to fallow and access subscribed only past broadcast (for channel you are Sub to and block VOD access to none subscribers). On the authentication page if you already added a key for another user, you need to click up two to tree time and click over "not you?" to authenticate for a different users <br> <br> add key for',vt=" below, fallowing this steps:",yt="Access the site link_link (using a computer or a smart phone)",bt='Click on the "Authorize" button it will take you to main Twitch.TV authentication site',wt="Login to Twitch.TV using the user name you are trying to add a key for",kt="Click on Authorize button of Twitch.TV site if you agree with the requested permissions",Ct="The web page will update and show a key code, the key only has lower case letters and nubers.",Mt=" Add Authentication key",Et="Key added OK",St="Key test fail, it's needed to add new one",It="Key test return OK",xt="You try to add a key for user ",Pt=" but this key is for user ",Tt=" Following",Lt=" Follow",Bt=" And you have not set a authentication key the app can't check yours sub status.",Ot=" And you are not a sub of this channel",Gt=" You are a sub of this channel but the app fail to authenticate contact the developer email in about",At="Fail authentication check with the provider key, please check and try again",Fn="The added key doesn't belong to the user ",Nt="No user",Ut="Set a user and a authentication key to be able to fallow/unfollow",Rt="Restart the",Ft=" Clip",Ht="Channel content",Dt="Network is disconnect, the application can't work without INTERNET",qt="Network connection reestablished",Vt=" Followers",Jt=", Can't fallow or unfallow ",zt="Game content",Xt="Yes",jt="Are you sure you want to remove the user ",Wt="Press Up to ",Yt="Followed Games",Kt="Change between",$t=" Back key then Enter",Zt=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"],Qt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],en="Started ",tn=" (PG Up/Down)",nn="Videos",an=" Video",on="Replay",sn="exiting in ",dn='press "Return" to exit',rn="Featured",cn="Created at ",ln="Open the Broadcast",un="No Broadcast",_n="There is no Past Broadcast for this clip",fn="And because of that no chat",mn=" is now",hn="Open the Hosting",pn="Player related",gn="Buffer size:",vn="A lower value here will make the player to start playing sooner, but it may cause re-buffer with will cause the player to pause to buffer.",yn="Live streams buffer",bn="Videos (Past Broadcast and Highlight) buffer",wn="Clips buffer",kn="General related",Cn="Language",Mn="Chat: Connecting to chat server..."+ra+"Chat: Connected."+ra+"Chat: Joined channel ",En="Play from the start or from where you stop watching last time?",In=(Sn="From:"+ra)+"Start",xn="Chat: The Chat has ended!",Pn=": Most recent",Tn=": Most views",Ln="Set a authentication key to be able to see fallowed videos",Bn="Switch: Most recent or views",On="Enable",Gn="Disable",Wn="The app was closed willing playing, restoring playback",An="Restore playback",Nn="When changing apps, the app may be closed by the system to free memory. In this case the app saves what it was playing and restores the playback when reopened",Un="Chat font size",Rn="Change the chat lines font size, applies to text and emotes",Hn="Videos animated thumbnails",Dn="Side panel: Back key twice",qn="Size ",Vn="Brightness ",Jn="Forbidden content, this Live must be for Prime only subscribers or lock to Twitch official app only",zn="Jump step ",Xn=" seconds",jn=" minutes",Yn="Clock offset",Kn="Application language",$n="Content language",Zn="All",Qn="Empty game fro this",ta="Isn't possible to jump during a buffering",na="Chat is disabled, enable in side pannel settings",aa="This clip/video fail to load can't replay",sa="Chat backgroung brightness "}var xa=51,Pa=52,Ta=179,La=37,Ba=38,Oa=39,Ga=40,Aa=13,Na=49,Ua=8,Ra=13,Fa=32,Ha=46,Da=0,qa=5,Va=1e4,Ja=0,za=!1,Xa=!1,ja=!1,Wa=!1,Ya="",Ka="https://fgl27.github.io/SmartTwitchTV/release/index.min.html",$a="elsu5d09k0xomu7cggx3qg5ybdwu7g",Za="https://id.twitch.tv/oauth2/token?";function Qa(e){Ml.Users_Position=Ml.Users_AddcodePosition,Ja=e,ki(),Nu(),ai()}function ei(e,t,n,a){var i=new XMLHttpRequest,o=Za+"grant_type=refresh_token&client_id="+encodeURIComponent(Ql)+"&client_secret="+encodeURIComponent($a)+"&refresh_token="+encodeURIComponent(Di[e].refresh_token)+"&redirect_uri="+Ka;i.open("POST",o,!0),i.timeout=Va,i.ontimeout=function(){},i.onreadystatechange=function(){4!==i.readyState||(200===i.status?ni(i.responseText,e,n):ti(e,t,n,a))},i.send(null)}function ti(e,t,n,a){++t<10?ei(e,t,n):a&&a()}function ni(e,t,n){var a=JSON.parse(e);Di[t].access_token=a.access_token,Di[t].refresh_token=a.refresh_token,so(),n&&n()}function ai(){var e=new XMLHttpRequest,t=Za+"grant_type=authorization_code&client_id="+encodeURIComponent(Ql)+"&client_secret="+encodeURIComponent($a)+"&code="+encodeURIComponent(Ja)+"&redirect_uri="+Ka;e.open("POST",t,!0),e.timeout=Va,e.ontimeout=function(){},e.onreadystatechange=function(){4!==e.readyState||(200===e.status?si(e.responseText):ii())},e.send(null)}function ii(){++Da<qa?ai():oi()}function oi(){Uu(),ju(At),window.setTimeout(function(){Wu(),Pl=0,__(),Ml.Main_Go=ml,window.location=Ka},4e3),Di[Ml.Users_Position].access_token=0,Di[Ml.Users_Position].refresh_token=0}function si(e){var t=JSON.parse(e);Di[Ml.Users_Position].access_token=t.access_token,Di[Ml.Users_Position].refresh_token=t.refresh_token,ki(),di()}function di(){xf("https://api.twitch.tv/kraken?oauth_token="+Di[Ml.Users_Position].access_token,Va,0,null,ri,ci)}function ri(e){var t=JSON.parse(e).token;t.user_name&&-1!==t.user_name.indexOf(Di[Ml.Users_Position].name)?(so(),Pl=0,Uu(),za=IE=!1,Ml.Main_Go=ml,__(),ju(Et),window.setTimeout(function(){window.location=Ka},3e3)):(Di[Ml.Users_Position].access_token=0,Di[Ml.Users_Position].refresh_token=0,za=!1,ju(Fn+Di[Ml.Users_Position].name),window.setTimeout(function(){Wu(),Pl=0,__(),Ml.Main_Go=ml,window.location=Ka},4e3))}function ci(){++Da<qa?(Va+=500,di()):oi()}function li(){ki(),Xa=!1,ui()}function ui(){var e="https://api.twitch.tv/kraken/users/"+Di[Ml.Users_Position].id+"/follows/channels/"+Ya,t=new XMLHttpRequest;t.open("GET",e,!0),t.timeout=Va,t.setRequestHeader(eu,Ql),t.setRequestHeader(tu,iu),t.ontimeout=function(){},t.onreadystatechange=function(){4===t.readyState&&(200===t.status?_i():404===t.status?fi(t.responseText):mi())},t.send(null)}function _i(){za=!(Xa=!0),Wa?Dg():bd()}function fi(e){-1!==(JSON.parse(e).error+"").indexOf("Not Found")?(za=Xa=!1,Wa?Dg():bd()):mi()}function mi(){++Da<qa?(Va+=500,ui()):(za=!1,Wa?Dg():bd())}function hi(){ki(),pi()}function pi(){var e=new XMLHttpRequest;e.open("PUT","https://api.twitch.tv/kraken/users/"+Di[Ml.Users_Position].id+"/follows/channels/"+Ya,!0),e.timeout=Va,e.setRequestHeader(eu,Ql),e.setRequestHeader(tu,iu),e.setRequestHeader("Authorization","OAuth "+Di[Ml.Users_Position].access_token),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return Xa=!(za=!1),void(Wa?Dg():bd());401===e.status||403===e.status?ei(Ml.Users_Position,0,hi,null):gi()}},e.send(null)}function gi(){++Da<qa&&(Va+=500,pi())}function vi(){ki(),yi()}function yi(){var e=new XMLHttpRequest;e.open("DELETE","https://api.twitch.tv/kraken/users/"+Di[Ml.Users_Position].id+"/follows/channels/"+Ya,!0),e.timeout=Va,e.setRequestHeader(eu,Ql),e.setRequestHeader(tu,iu),e.setRequestHeader("Authorization","OAuth "+Di[Ml.Users_Position].access_token),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(204===e.status)return za=Xa=!1,void(Wa?Dg():bd());401===e.status||403===e.status?ei(Ml.Users_Position,0,vi,null):bi()}},e.send(null)}function bi(){++Da<qa&&(Va+=500,yi())}function wi(){ki(),ja=!1,Ci()}function ki(){Va=1e4,za=!(Da=0)}function Ci(){var e,t="https://api.twitch.tv/kraken/users/"+Di[Ml.Users_Position].id+"/subscriptions/"+Ya;if(mu){if(!(e=Android.mreadUrl(t,Va,3,Di[Ml.Users_Position].access_token)))return void Mi();if(200===(e=JSON.parse(e)).status)za=!(ja=!0),Qv();else if(422===e.status)za=ja=!1,Zv();else if(404===e.status){if(-1!==(JSON.parse(e.responseText).error+"").indexOf("Not Found"))return za=ja=!1,void Zv();Mi()}else 401===e.status||403===e.status?ei(Ml.Users_Position,0,wi,Ei):Mi()}else(e=new XMLHttpRequest).open("GET",t,!0),e.timeout=Va,e.setRequestHeader(eu,Ql),e.setRequestHeader(tu,iu),e.setRequestHeader("Authorization","OAuth "+Di[Ml.Users_Position].access_token),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState)if(200===e.status)za=!(ja=!0),Qv();else if(422===e.status)za=ja=!1,Zv();else if(404===e.status){if(-1!==(JSON.parse(e.responseText).error+"").indexOf("Not Found"))return za=ja=!1,void Zv();Mi()}else 401===e.status||403===e.status?ei(Ml.Users_Position,0,wi,Ei):Mi()},e.send(null)}function Mi(){++Da<qa?(Va+=500,Ci()):Ei()}function Ei(){za=ja=!1,Zv()}function Si(e){ki(),Ii(e,0)}function Ii(e,t){var n="https://api.twitch.tv/kraken?oauth_token="+Di[e].access_token,a=new XMLHttpRequest;a.open("GET",n,!0),a.timeout=1e4,a.ontimeout=function(){},a.onreadystatechange=function(){if(4===a.readyState){if(200===a.status)return void(JSON.parse(a.responseText).token.valid?za=!1:(ki(),ei(e,0,null,null)));400===a.status?(ki(),ei(e,0,null,null)):xi(e,t)}},a.send(null)}function xi(e,t){++t<qa&&Ii(e,t)}function Pi(){ki(),Ti()}function Ti(){var e=new XMLHttpRequest;e.open("PUT","https://api.twitch.tv/api/users/"+Di[Ml.Users_Position].name+"/follows/games/"+encodeURIComponent(Ml.Main_gameSelected)+"?oauth_token="+Di[Ml.Users_Position].access_token,!0),e.timeout=1e4,e.setRequestHeader(eu,Ql),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return Io=!0,void Fo();401===e.status||403===e.status?ei(Ml.Users_Position,0,Pi,null):Li()}},e.send(null)}function Li(){++Da<qa&&(Va+=500,Ti())}function Bi(){ki(),Oi()}function Oi(){var e=new XMLHttpRequest;e.open("DELETE","https://api.twitch.tv/api/users/"+Di[Ml.Users_Position].name+"/follows/games/"+encodeURIComponent(Ml.Main_gameSelected)+"?oauth_token="+Di[Ml.Users_Position].access_token,!0),e.timeout=1e4,e.setRequestHeader(eu,Ql),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(204===e.status)return Io=!1,void Fo();401===e.status||403===e.status?ei(Ml.Users_Position,0,Bi,null):Gi()}},e.send(null)}function Gi(){++Da<qa&&(Va+=500,Oi())}function Ai(){ki(),Ni()}function Ni(){var e,t="https://api.twitch.tv/api/users/"+Di[Ml.Users_Position].name+"/follows/games/"+encodeURIComponent(Ml.Main_gameSelected);(e=new XMLHttpRequest).open("GET",t,!0),e.timeout=1e4,e.setRequestHeader(eu,Ql),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState)return 200===e.status?(Io=!0,void Fo()):404===e.status?(Io=!1,void Fo()):void Ui()},e.send(null)}function Ui(){++Da<qa?(Va+=500,Ni()):(Io=!1,Fo())}var Ri=0,Fi=5,Hi=3500,Di=[],qi=null,Vi=!1,Ji=!1;function zi(){Ml.Main_Go=nl,Bu("top_bar_user","icon_center_focus"),Wu(),zc.placeholder=M,Tu("add_user_scroll"),Wi()}function Xi(){Ki(!1),document.body.removeEventListener("keydown",ji),document.body.removeEventListener("keydown",$i),Ou("top_bar_user","icon_center_focus"),Pu("add_user_scroll")}function ji(e){if(!Vi&&!Ji&&Ml.Main_Go===nl)switch(e.keyCode){case Na:$u()?Ku():t_()?e_():(0<Di.length&&Ml.Main_Go!==ml?Ml.Main_Go=Ml.Main_Before:Ml.Main_Go=tl,Xi(),l_());break;case Pa:case xa:case Ta:case Aa:Wi()}}function Wi(){document.body.removeEventListener("keydown",ji),document.body.addEventListener("keydown",$i,!1),zc.placeholder=M,zc.focus(),Ji=!0}function Yi(){if(null!==zc){var e=zc.cloneNode(!0);zc.parentNode.replaceChild(e,zc),zc=document.getElementById("user_input")}}function Ki(e){zc.blur(),Yi(),document.body.removeEventListener("keydown",$i),zc.placeholder=E+M,e&&document.body.addEventListener("keydown",ji,!1),Ji=!1}function $i(e){if(!Vi&&Ml.Main_Go===nl)switch(e.keyCode){case Na:$u()?Ku():t_()?e_():(0<Di.length&&Ml.Main_Go!==ml?Ml.Main_Go=Ml.Main_Before:Ml.Main_Go=tl,Xi(),l_());break;case Ha:zc.value="";break;case Ra:case Ga:""!==zc.value&&null!==zc.value?co(qi=$c&&!ao()?"testtwitch27":zc.value)?(Uu(),ju(u+qi+ie),window.setTimeout(function(){Wu(),Wi()},1500)):(Hi=3500,Vi=!(Ri=0),Pu("add_user_scroll"),Nu(),Zi()):Wi();break;case Ua:zc.value=zc.value.slice(0,-1);break;case Fa:zc.value+=" "}}function Zi(){xf("https://api.twitch.tv/kraken/users?login="+encodeURIComponent(qi),Hi,2,null,Qi,eo)}function Qi(e){JSON.parse(e)._total?(zc.value="",document.body.removeEventListener("keydown",ji),io(e)):to()}function eo(){++Ri<Fi?(Hi+=500,Zi()):to()}function to(){qi=null,Uu(),ju(ne),window.setTimeout(function(){zi()},1e3),Vi=!1}function no(){if(0<(Di=Mf("AddUser_UsernameArray",[])).length)for(var e=0;e<Di.length;e++)Di[e].access_token&&Si(e)}function ao(){return 0<Di.length}function io(e){qi=JSON.parse(e).users[0],Di.push({name:qi.name,id:qi._id,access_token:0,refresh_token:0}),so(),IE=!1,Xi(),PE(),Vi=!1}function oo(e){var t=Di.indexOf(Di[e]);-1<t&&Di.splice(t,1),0<Di.length?(IE=!1,PE()):zi(),so()}function so(){kf("AddUser_UsernameArray",JSON.stringify(Di))}function ro(e){qi=Di[0],Di[0]=Di[e],Di[e]=qi,IE=!1,PE(),so()}function co(e){return-1!==Di.indexOf(e)}function lo(){return 0<Di.length}var uo=0,_o=0,fo=!1,mo=0,ho={},po=[],go=!1,vo=0,yo=5,bo=3500,wo=0,ko=0,Co=!1,Mo=["ag_thumbdiv","ag_img","ag_infodiv","ag_displayname","ag_streamtitle","ag_streamgame","ag_viwers","ag_quality","ag_cell","agempty_","a_games_scroll"],Eo=!1,So=!1,Io=!1,xo=!1,Po=!1;function To(){Ml.Main_CenterLablesVectorPos=3,Ml.Main_Go=il,document.body.addEventListener("keydown",Ko,!1),Bu("top_bar_game","icon_center_focus"),xu("label_side_panel","icon-arrow-circle-left",x),Ml.Search_isSearching&&(p_(),Gu("top_bar_user",n+g_(f+" '"+Ml.Search_data+"'"))),Gu("top_bar_game",w+g_(_+": "+Ml.Main_gameSelected)),Ml.Main_OldgameSelected===Ml.Main_gameSelected&&Eo?(M_(uo),Tu(Mo[10]),Xo(),__()):Bo()}function Lo(){Eo&&-1===uo&&(Yo(),_o=uo=0,Bu(Mo[0]+"0_"+_o,du)),xu("label_side_panel","icon-ellipsis",Dn),Gu("top_bar_game",f),document.body.removeEventListener("keydown",Ko),Ou("top_bar_game","icon_center_focus"),Pu(Mo[10])}function Bo(){null===Ml.Main_OldgameSelected&&(Ml.Main_OldgameSelected=Ml.Main_gameSelected),b_("stream_table_a_game"),Pu(Mo[10]),Nu(),Wu(),Po=Eo=!1,ho={},mo=ko=wo=0,uo=_o=0,fo=!(mf=!(So=!(po=[]))),Vu(),Oo(),Go()}function Oo(){k_(),go=!0,vo=0,bo=3500}function Go(){var e=mo+wo;e&&ko-1<e&&(e=ko-Vl,fo=!0),xf("https://api.twitch.tv/kraken/streams?game="+encodeURIComponent(Ml.Main_gameSelected)+"&limit="+Vl+"&offset="+e+(""!==Al?"&language="+Al:""),bo,2,null,No,Ao)}function Ao(){++vo<yo?(bo+=500,Go()):(go=!1,mo?(fo=!0,Uo()):(mf=!1,Uu(),ju(L)))}function No(e){var t=JSON.parse(e),n=t.streams.length;ko=parseInt(t._total),n<Vl&&(fo=!0);var a=mo;Co=!(mo+=n);var i=n/Jl;0<n%Jl&&i++;var o,s,d,r,c,l,u=0,_=document.getElementById("stream_table_a_game");if(!Po){var f;for(Po=!0,d=document.createElement("tr"),r=0;r<3;r++)f=r?1===r?'<i class="icon-movie stream_channel_fallow_icon"></i>'+Ca+U:"":'<i class="icon-movie-play stream_channel_fallow_icon"></i>'+Ca+Ca+nn,(Ol=document.createElement("td")).setAttribute("id",Mo[8]+"y_"+r),Ol.className="stream_cell",Ol.innerHTML='<div id="'+Mo[0]+"y_"+r+'" class="stream_thumbnail_fallow_game" ><div id="'+Mo[3]+"y_"+r+'" class="stream_channel_fallow_game">'+f+"</div></div>",d.appendChild(Ol);_.appendChild(d)}for(r=0;r<i;r++){for(s=a/Jl+r,d=document.createElement("tr"),o=0;o<Jl&&u<n;o++,u++)l=(c=t.streams[u]).channel._id,ho[l]?o--:(ho[l]=1,d.appendChild(L_(s,s+"_"+o,[c.channel.name,l],Mo,[c.preview.template.replace("{width}x{height}",ou),o_(JSON.stringify(c.stream_type))+c.channel.display_name,c.channel.status,c.game,y+Pp(c.created_at)+b+", "+h+a_(c.viewers)+q,i_(c.video_height,c.average_fps,c.channel.language)])));for(;o<Jl;o++)fo&&!So&&(So=!0,mo=s*Jl+o),d.appendChild(I_(Mo[9]+s+"_"+o)),po.push(Mo[9]+s+"_"+o);_.appendChild(d)}Uo()}function Uo(){if(Eo){if(w_(yu),0<po.length&&!fo)return Oo(),void Vo();Ju(_o,uo,Jl,mo),po=[]}else Ro(),Co?(ju(B+Z),uo=-1,Wo()):(Eo=!0,w_(yu),Xo(),__()),Tu(Mo[10]),mf=!1,Uu();go=!1}function Ro(){xo?(Io=!0,Fo()):ao()?Ai():(Io=!1,Fo())}function Fo(){Gu(Mo[3]+"y_2",Io?'<i class="icon-heart" style="color: #00b300; font-size: 100%; text-shadow: #FFFFFF 0 0 10px, #FFFFFF 0 0 10px, #FFFFFF 0 0 8px;"></i>'+Ca+Ca+Tt:'<i class="icon-heart-o" style="color: #FFFFFF; font-size: 100%; text-shadow: #000000 0 0 10px, #000000 0 0 10px, #000000 0 0 8px;"></i>'+Ca+Ca+(ao()?Lt:Nt))}function Ho(){ao()&&Di[Ml.Users_Position].access_token?Io?Bi():Pi():(ju(Ut),window.setTimeout(function(){Co&&Ml.Main_Go===il?ju(B+Z):Wu()},2e3))}function Do(){_o?1===_o?(Ml.Main_Go=bl,Ml.Main_OldgameSelected=Ml.Main_gameSelected,qo(),u_()):Ho():(Ml.Main_Go=yl,Ml.Main_OldgameSelected=Ml.Main_gameSelected,qo(),u_())}function qo(){Eo&&-1===uo&&(Yo(),_o=uo=0,Bu(Mo[0]+"0_"+_o,du)),document.body.removeEventListener("keydown",Ko),Pu(Mo[10])}function Vo(){Xu(po.length);var e=mo+wo;e&&ko-1<e&&(e=ko-Zl,fo=!0),xf("https://api.twitch.tv/kraken/streams?game="+encodeURIComponent(Ml.Main_gameSelected)+"&limit="+Zl+"&offset="+e+(""!==Al?"&language="+Al:""),bo,2,null,zo,Jo)}function Jo(){++vo<yo?(bo+=500,Vo()):(fo=!0,mo-=po.length,po=[],Uo())}function zo(e){var t,n,a=JSON.parse(e),i=a.streams.length,o=0,s=0,d=[];for(ko=parseInt(a._total),i<Zl&&(fo=!0);o<po.length&&s<i;o++,s++)n=(t=a.streams[s]).channel._id,ho[n]?o--:(ho[n]=1,B_(po[o],[t.channel.name,n],[t.preview.template.replace("{width}x{height}",ou),o_(JSON.stringify(t.stream_type))+t.channel.display_name,t.channel.status,t.game,y+Pp(t.created_at)+b+", "+h+a_(t.viewers)+q,i_(t.video_height,t.average_fps,t.channel.language)],Mo),d.push(o));for(o=d.length-1;-1<o;o--)po.splice(d[o],1);wo+=s,fo&&(mo-=po.length,po=[]),Uo()}function Xo(){uo<0?Wo():(D_(uo,_o,Mo,Jl,mo),mo/Jl<uo+zl&&!fo&&!go&&(Oo(),Go()),Il&&jo())}function jo(){-1<uo&&mo?Y_(uo+"_"+_o,Mo):Yo()}function Wo(){Bu(Mo[0]+"y_"+_o,du)}function Yo(){Ou(Mo[0]+"y_"+_o,du)}function Ko(e){var t;if(!mf&&!F_())switch(R_(),e.keyCode){case Na:t_()?e_():$u()?Ku():(Ml.Main_OldgameSelected=Ml.Main_gameSelected,jo(),Yo(),pf(Ko));break;case La:if(-1===uo)Yo(),--_o<0&&(_o=2),Wo();else if(uo||_o){if(s_(uo,_o-1,Mo[0]))jo(),_o--,Xo();else for(t=Jl-1;-1<t;t--)if(s_(uo-1,t,Mo[0])){jo(),uo--,_o=t,Xo();break}}else jo(),Yo(),uo=-1,_o=2,Wo();break;case Oa:-1===uo?(Yo(),2<++_o?(_o=0,Co?Wo():(uo=0,Xo())):Wo()):s_(uo,_o+1,Mo[0])?(jo(),_o++,Xo()):s_(uo+1,0,Mo[0])&&(jo(),uo++,_o=0,Xo());break;case Ba:if(-1!==uo||Co)if(uo){for(t=0;t<Jl;t++)if(s_(uo-1,_o-t,Mo[0])){jo(),uo--,_o-=t,Xo();break}}else jo(),uo=-1,Wo();else uo=0,Yo(),Xo();break;case Ga:if(-1!==uo||Co){for(t=0;t<Jl;t++)if(s_(uo+1,_o-t,Mo[0])){jo(),uo++,_o-=t,Xo();break}}else uo=0,Yo(),Xo();break;case Pa:case xa:case Ta:case Aa:-1!==uo?V_(uo+"_"+_o,Mo,Ko):Do()}}var $o=0,Zo=0,Qo=!1,es=0,ts={},ns=[],as=!1,is=0,os=5,ss=3500,ds=0,rs=0,cs=!1,ls=!1,us="week",_s=2,fs=!1,ms=["agv_thumbdiv","agv_img","agv_infodiv","agv_title","agv_streamon","agv_duration","agv_viwers","agv_quality","agv_cell","gvempty_","a_games_vod_scroll","agv_game"],hs=!1,ps=!1,gs="";function vs(){Ml.Main_CenterLablesVectorPos=3,Ml.Main_Go=yl,Bu("top_bar_game","icon_center_focus"),document.body.addEventListener("keydown",Os,!1),xu("label_side_panel","icon-arrow-circle-left",x),gs===Ml.Main_gameSelected&&hs?(M_($o),Tu(ms[10]),Gs(),Ps(),__()):bs()}function ys(){hs&&Ts(),document.body.removeEventListener("keydown",Os),Ou("top_bar_game","icon_center_focus"),Gu("top_bar_game",f),xu("label_side_panel","icon-ellipsis",Dn),xu("label_switch","icon-switch",r),Pu(ms[10])}function bs(){hs&&Ts(),b_("stream_table_a_game_vod"),Pu(ms[10]),Nu(),Gs(),gs=Ml.Main_gameSelected,Wu(),fs=hs=!1,rs=ds=0,ts={},$o=Zo=es=0,Qo=!(mf=!(ls=!(ns=[]))),Vu(),ws(),ks()}function ws(){k_(),as=!0,is=0,ss=3500}function ks(){var e=es+ds;e&&rs-1<e&&(e=rs-Vl,Qo=!0),xf("https://api.twitch.tv/kraken/videos/top?game="+encodeURIComponent(Ml.Main_gameSelected)+"&limit="+Vl+"&broadcast_type="+(ps?"highlight":"archive")+"&sort=views&offset="+e+"&period="+us+(""!==Al?"&language="+Al:""),ss,2,null,Ms,Cs)}function Cs(){++is<os?(ss+=500,ks()):(as=!1,es?(Qo=!0,Es()):(mf=!1,Uu(),ju(L)))}function Ms(e){var t=JSON.parse(e),n=t.vods.length;rs=parseInt(t._total),n<Vl&&(Qo=!0);var a=es;cs=!(es+=n);var i=n/Jl;0<n%Jl&&i++;var o,s,d,r,c,l=0,u=document.getElementById("stream_table_a_game_vod");if(!fs){var _;for(fs=!0,d=document.createElement("tr"),f=0;f<2;f++)_=f?'<i class="icon-history stream_channel_fallow_icon"></i>'+Ca+Ca+m:'<i class="icon-movie-play stream_channel_fallow_icon"></i>'+Ca+Ca+p,(Ol=document.createElement("td")).setAttribute("id",ms[8]+"y_"+f),Ol.className="stream_cell",Ol.innerHTML='<div id="'+ms[0]+"y_"+f+'" class="stream_thumbnail_channel_vod" ><div id="'+ms[3]+"y_"+f+'" class="stream_channel_fallow_game">'+_+"</div></div>",d.appendChild(Ol);u.appendChild(d)}for(var f=0;f<i;f++){for(s=a/Jl+f,d=document.createElement("tr"),o=0;o<Jl&&l<n;o++,l++)c=(r=t.vods[l])._id,-1!==(r.preview.template+"").indexOf("404_processing")||ts[c]?o--:(ts[c]=1,d.appendChild(rI(s,s+"_"+o,[c,r.length,r.language,r.game,r.channel.name,r.increment_view_count_url],[r.preview.template.replace("{width}x{height}",ou),r.channel.display_name,F+v_(r.created_at),LI.parse(r.title)+ra+en+g+r.game,a_(r.views)+D,i_(r.resolutions.chunked.slice(-4),parseInt(r.fps.chunked)||0,r.language),H+Ip(r.length),r.animated_preview_url],ms)));for(;o<Jl;o++)Qo&&!ls&&(ls=!0,es=s*Jl+o),d.appendChild(I_(ms[9]+s+"_"+o)),ns.push(ms[9]+s+"_"+o);u.appendChild(d)}Es()}function Es(){if(hs?w_(yu):(cs?ju(B+(ps?N:A)+O+I):(hs=!0,w_(yu),Ps(),__()),Tu(ms[10]),mf=!1,Uu()),0<ns.length&&!Qo)return ws(),void Ss();Ju(Zo,$o,Jl,es),as=!(ns=[])}function Ss(){Xu(ns.length);var e=es+ds;e&&rs-1<e&&(e=rs-Zl,Qo=!0),xf("https://api.twitch.tv/kraken/videos/top?game="+encodeURIComponent(Ml.Main_gameSelected)+"&limit="+Zl+"&broadcast_type="+(ps?"highlight":"archive")+"&sort=views&offset="+e+"&period="+us+(""!==Al?"&language="+Al:""),ss,2,null,xs,Is)}function Is(){++is<os?(ss+=500,Ss()):(Qo=!0,ns=[],Es())}function xs(e){var t,n,a=JSON.parse(e),i=a.vods.length,o=0,s=0,d=[];for(rs=parseInt(a._total);o<ns.length&&s<i;o++,s++)n=(t=a.vods[s])._id,-1!==(t.preview.template+"").indexOf("404_processing")||ts[n]?o--:(ts[n]=1,lI(ns[o],[n,t.length,t.language,t.game,t.channel.name,t.increment_view_count_url],[t.preview.template.replace("{width}x{height}",ou),t.channel.display_name,F+v_(t.created_at),LI.parse(t.title)+ra+en+g+t.game,a_(t.views)+D,i_(t.resolutions.chunked.slice(-4),parseInt(t.fps.chunked)||0,t.language),H+Ip(t.length),t.animated_preview_url],ms),d.push(o));for(o=d.length-1;-1<o;o--)ns.splice(d[o],1);ds+=s,Qo&&(es-=ns.length,ns=[]),Es()}function Ps(){$o<0?Ls():(D_($o,Zo,ms,Jl,es),bI(ms,$o+"_"+Zo),es/Jl<$o+zl&&!Qo&&!as&&(ws(),ks()),Il&&Ts())}function Ts(){window.clearInterval(BS),-1<$o&&es?(Tu(ms[1]+$o+"_"+Zo),Y_($o+"_"+Zo,ms)):Bs()}function Ls(){var e=1<Zo?1:Zo;Bu(ms[0]+"y_"+e,du)}function Bs(){var e=1<Zo?1:Zo;Ou(ms[0]+"y_"+e,du)}function Os(e){var t;if(!mf&&!F_())switch(R_(),e.keyCode){case Na:t_()?e_():$u()?Ku():(Ts(),pf(Os));break;case La:if(-1===$o)Bs(),--Zo<0&&(Zo=1),Ls();else if($o||Zo){if(s_($o,Zo-1,ms[0]))Ts(),Zo--,Ps();else for(t=Jl-1;-1<t;t--)if(s_($o-1,t,ms[0])){Ts(),$o--,Zo=t,Ps();break}}else Ts(),Bs(),$o=-1,Zo=1,Ls();break;case Oa:-1===$o?(Bs(),1<++Zo?(Zo=0,cs?Ls():($o=0,Ps())):Ls()):s_($o,Zo+1,ms[0])?(Ts(),Zo++,Ps()):s_($o+1,0,ms[0])&&(Ts(),$o++,Zo=0,Ps());break;case Ba:if(-1!==$o||cs)if($o){for(t=0;t<Jl;t++)if(s_($o-1,Zo-t,ms[0])){Ts(),$o--,Zo-=t,Ps();break}}else Ts(),$o=-1,Ls();else $o=0,Bs(),Ps();break;case Ga:if(-1!==$o||cs){for(t=0;t<Jl;t++)if(s_($o+1,Zo-t,ms[0])){Ts(),$o++,Zo-=t,Ps();break}}else $o=0,Bs(),Ps();break;case Pa:case xa:case Ta:case Aa:-1===$o?(0===Zo?kf("AGameVod_highlight",(ps=!ps)?"true":"false"):4<++_s&&(_s=1),bs()):X_($o+"_"+Zo,ms,Os)}}function Gs(){1===_s?(Gu("top_bar_game",w+g_((ps?N:A)+re+": "+Ml.Main_gameSelected)),us="day"):2===_s?(Gu("top_bar_game",w+g_((ps?N:A)+ce+": "+Ml.Main_gameSelected)),us="week"):3===_s?(Gu("top_bar_game",w+g_((ps?N:A)+le+": "+Ml.Main_gameSelected)),us="month"):4===_s&&(Gu("top_bar_game",w+g_((ps?N:A)+ue+": "+Ml.Main_gameSelected)),us="all"),kf("AGameVod_periodNumber",_s)}var As,Ns=0,Us=0,Rs=!1,Fs=0,Hs=0,Ds=5,qs=3500,Vs=0,Js=!1,zs=!1,Xs=["cc_thumbdiv","cc_img","cc_infodiv","cc_name","cc_createdon","cc_game","cc_viwers","cc_duration","cc_cell","sccempty_","channel_content_scroll"],js=!1,Ws="",Ys=null,Ks="",$s="",Zs="",Qs="",ed="",td={},nd=!1;function ad(){Ml.Main_CenterLablesVectorPos=1,Ml.Main_Go=ul,nd&&!Ml.Search_isSearching&&Ml.Main_selectedChannel_id&&Id(),Ws!==Ml.Main_selectedChannel&&(js=!1),p_(),Ml.Main_selectedChannelDisplayname=Ml.Main_selectedChannelDisplayname.replace(Y,""),Au("top_bar_user",Ml.Main_selectedChannelDisplayname),Au("top_bar_game",Ht),document.body.addEventListener("keydown",xd,!1),Wa=!1,js?(M_(Ns),Tu(Xs[10]),kd(),Cd(),__()):od()}function id(){h_(),document.body.removeEventListener("keydown",xd),Pu(Xs[10])}function od(){b_("stream_table_channel_content"),Pu(Xs[10]),Nu(),Wu(),Ws=Ml.Main_selectedChannel,Qs="",Rs=Js=js=!1,As=void(Ns=Us=Fs=Vs=0),sd(),dd()}function sd(){mf=!0,Hs=0,qs=3500}function dd(){xf("https://api.twitch.tv/kraken/streams/"+encodeURIComponent(void 0!==As?As:Ml.Main_selectedChannel_id),qs,2,null,rd,cd)}function rd(e){null!==JSON.parse(e).stream?(Ys=e,sd(),fd()):As?(Ys=null,sd(),fd()):(sd(),ld())}function cd(){++Hs<Ds?(qs+=500,dd()):(Ys=null,sd(),fd())}function ld(){var e,t="https://tmi.twitch.tv/hosts?include_logins=1&host="+encodeURIComponent(Ml.Main_selectedChannel_id);if(mu){if(!(e=Android.mreadUrl(t,qs,1,null)))return void ud();200===(e=JSON.parse(e)).status?_d(e.responseText):ud()}else(e=new XMLHttpRequest).open("GET",bu+t,!0),e.timeout=qs,e.setRequestHeader(eu,Ql),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void _d(e.responseText);ud()}},e.send(null)}function ud(){++Hs<Ds?(qs+=500,ld()):(Ys=null,sd(),fd())}function _d(e){var t=JSON.parse(e);void 0!==(As=t.hosts[0].target_id)?(sd(),dd()):(Ys=null,sd(),fd())}function fd(){xf("https://api.twitch.tv/kraken/channels/"+Ml.Main_selectedChannel_id,lv,2,null,md,hd)}function md(e){var t=JSON.parse(e);Ks=t.views,$s=t.followers,Zs=t.description,Ml.Main_selectedChannelLogo=t.logo,pd()}function hd(){++Hs<Ds?(qs+=500,fd()):(Zs=$s=Ks="",Ml.Main_selectedChannelLogo=vu,pd())}function pd(){var e=document.createElement("tr"),t=document.createElement("tbody"),n=0,a=document.getElementById("stream_table_channel_content");if((Ol=document.createElement("tr")).className="follower_header",Ol.innerHTML='<div class="follower_header">'+LI.parse(Zs)+"</div>",a.appendChild(t),a.appendChild(Ol),null!==Ys){var i=JSON.parse(Ys);if(null!==i.stream){var o=void 0!==As?Ml.Main_selectedChannelDisplayname+ae:"",s=i.stream;e.appendChild(gd("0_"+n,s.channel.name,s.preview.template,LI.parse(s.channel.status),s.game,o_(JSON.stringify(s.stream_type))+o+s.channel.display_name,y+Pp(s.created_at)+b+", "+h+a_(s.viewers)+q,i_(s.video_height,s.average_fps,s.channel.language))),n++}else Js=!0}else Js=!0;e.appendChild(vd("0_"+n,Ml.Main_selectedChannelDisplayname,Ml.Main_selectedChannelDisplayname+A,"movie-play")),n++,e.appendChild(vd("0_"+n,Ml.Main_selectedChannelDisplayname,Ml.Main_selectedChannelDisplayname+U,"movie")),n<2&&(n++,e.appendChild(I_(Xs[9]+"0_"+n))),a.appendChild(e),(e=document.createElement("tr")).appendChild(yd("1_0",Ml.Main_selectedChannelDisplayname,Ml.Main_selectedChannelDisplayname,Ml.Main_selectedChannelLogo)),a.appendChild(e),wd()}function gd(e,t,n,a,i,o,s,d){return Qs=n.replace("{width}x{height}",ou),(Ol=document.createElement("td")).setAttribute("id",Xs[8]+e),Ol.setAttribute(ru,t),Ol.className="stream_cell",Ol.innerHTML='<div id="'+Xs[0]+e+'" class="stream_thumbnail_video" ><img id="'+Xs[1]+e+'" class="stream_img"></div><div id="'+Xs[2]+e+'" class="stream_text"><div id="'+Xs[3]+e+'" class="stream_channel" style="width: 66%; display: inline-block;"><i class="icon-circle" style="color: '+(void 0!==As?"#FED000":"red")+'; font-size: 90%; aria-hidden="true"></i> '+Ca+o+'</div><div id="'+Xs[7]+e+'"class="stream_info" style="width:33%; float: right; text-align: right; display: inline-block;">'+d+'</div><div id="'+Xs[4]+e+'"class="stream_info">'+a+'</div><div id="'+Xs[5]+e+'"class="stream_info">'+g+i+'</div><div id="'+Xs[6]+e+'"class="stream_info">'+s+"</div></div>",Ol}function vd(e,t,n,a){return(Ol=document.createElement("td")).setAttribute("id",Xs[8]+e),Ol.setAttribute(ru,t),Ol.className="stream_cell",Ol.innerHTML='<div id="'+Xs[0]+e+'" class="stream_thumbnail_video" ><div id="'+Xs[1]+e+'" class="stream_channel_content_icon"><i class="icon-'+a+'"></i></div></div><div id="'+Xs[2]+e+'" class="stream_text"><div id="'+Xs[3]+e+'" class="stream_channel" style="text-align: center">'+n+"</div></div>",Ol}function yd(e,t,n,a){return ed=a,(Ol=document.createElement("td")).setAttribute("id",Xs[8]+e),Ol.setAttribute(ru,t),Ol.className="stream_cell",Ol.innerHTML='<div id="'+Xs[0]+e+'" class="stream_thumbnail_video" ><div id="schannel_cont_heart" style="position: absolute; top: 5%; left: 6%;"></div><img id="'+Xs[1]+e+'" class="stream_img_fallow"></div><div id="'+Xs[2]+e+'" class="stream_text"><div id="'+Xs[3]+e+'" class="stream_channel">'+n+'</div><div id="'+Xs[5]+e+'"class="stream_info">'+a_(Ks)+D+'</div><div id="'+Xs[6]+e+'"class="stream_info" >'+a_($s)+Vt+"</div></div>",Ol}function bd(){Xa?(Gu("schannel_cont_heart",'<i class="icon-heart" style="color: #00b300; font-size: 600%; text-shadow: #FFFFFF 0 0 10px, #FFFFFF 0 0 10px, #FFFFFF 0 0 8px;"></i>'),Au(Xs[3]+"1_0",Ml.Main_selectedChannelDisplayname+Tt)):(Gu("schannel_cont_heart",'<i class="icon-heart-o" style="color: #FFFFFF; font-size: 600%; text-shadow: #000000 0 0 10px, #000000 0 0 10px, #000000 0 0 8px;"></i>'),ao()?Au(Xs[3]+"1_0",Ml.Main_selectedChannelDisplayname+Lt):Au(Xs[3]+"1_0",Ml.Main_selectedChannelDisplayname+Jt))}function wd(){js||(js=!0,""!==Qs&&wu(document.getElementById(Xs[1]+"0_0"),Qs,yu),wu(document.getElementById(Xs[1]+"1_0"),ed,vu),Cd(),__(),Tu(Xs[10]),Uu()),kd(),mf=!1}function kd(){zs?bd():ao()?(Ya=Ml.Main_selectedChannel_id,Wa=!1,li()):(Xa=!1,bd())}function Cd(){Bu(Xs[0]+Ns+"_"+(Ns?0:Us),du),Il&&Md(),N_()}function Md(){Y_(Ns+"_"+(Ns?0:Us),Xs)}function Ed(){if(Ns)ao()&&Di[Ml.Users_Position].access_token?(Wa=!1,Ya=Ml.Main_selectedChannel_id,Xa?vi():hi()):(ju(Ut),window.setTimeout(Wu,2e3));else{document.body.removeEventListener("keydown",xd),Pu(Xs[10]);var e=Js?1:0;Us===0-e?(Ml.Play_selectedChannel=document.getElementById(Xs[8]+Ns+"_"+Us).getAttribute(ru),Ml.Play_selectedChannelDisplayname=document.getElementById(Xs[3]+Ns+"_"+Us).textContent,-1!==Ml.Play_selectedChannelDisplayname.indexOf(ae)?(Ml.Play_isHost=!0,Ml.Play_DisplaynameHost=Ml.Play_selectedChannelDisplayname,Ml.Play_selectedChannelDisplayname=Ml.Play_selectedChannelDisplayname.split(ae)[1],Ml.Play_selectedChannel_id=As):Ml.Play_selectedChannel_id=Ml.Main_selectedChannel_id,Ml.Play_gameSelected=document.getElementById(Xs[5]+Ns+"_"+Us).textContent.split(g)[1],Z_(J_)):Us===1-e?Z_(tr):Us===2-e&&(Gy=sb,Z_(Fy))}}function Sd(){td={"Main_values.Main_selectedChannel_id":Ml.Main_selectedChannel_id,"Main_values.Main_selectedChannelLogo":Ml.Main_selectedChannelLogo,"Main_values.Main_selectedChannel":Ml.Main_selectedChannel,"Main_values.Main_selectedChannelDisplayname":Ml.Main_selectedChannelDisplayname,ChannelContent_UserChannels:zs,"Main_values.Main_BeforeChannel":Ml.Main_BeforeChannel}}function Id(){Ml.Main_selectedChannel_id=Ml.Main_selectedChannel_id,Ml.Main_selectedChannelLogo=Ml.Main_selectedChannelLogo,Ml.Main_selectedChannel=Ml.Main_selectedChannel,Ml.Main_selectedChannelDisplayname=Ml.Main_selectedChannelDisplayname,zs=td.ChannelContent_UserChannels,Ml.Main_BeforeChannel=Ml.Main_BeforeChannel,nd=!(td={})}function xd(e){if(!mf&&!F_())switch(R_(),e.keyCode){case Na:t_()?e_():$u()?Ku():(Md(),pf(xd));break;case La:Ns||(Md(),--Us<0&&(Us=Js?1:2),Cd());break;case Oa:Ns||(Md(),(Js?1:2)<++Us&&(Us=0),Cd());break;case Ba:case Ga:Md(),Ns=Ns?0:1,Cd();break;case Pa:case xa:case Ta:case Aa:Ed()}}var Pd=0,Td=0,Ld=!1,Bd=0,Od={},Gd=[],Ad=!1,Nd=0,Ud=5,Rd=3500,Fd=0,Hd=0,Dd=0,qd=!1,Vd=!1,Jd="",zd=!1,Xd=["cv_thumbdiv","cv_img","cv_infodiv","cv_title","cv_streamon","cv_duration","cv_viwers","cv_quality","cv_cell","cvempty_","channel_vod_scroll","cv_game"],jd=!1,Wd=!1,Yd="",Kd="",$d="",Zd="",Qd="",er=0;function tr(){Ml.Main_CenterLablesVectorPos=1,Ml.Main_Go=_l,!Ml.Search_isSearching&&Ml.Main_selectedChannel_id&&Id(),Ml.Main_selectedChannel!==Yd&&(jd=!1),p_(),xu("label_side_panel","icon-arrow-circle-left",x),Au("top_bar_user",Ml.Main_selectedChannelDisplayname),document.body.addEventListener("keydown",pr,!1),jd?(M_(Pd),Au("top_bar_game",Wd?N:A),Tu(Xd[10]),_r(),__()):ar()}function nr(){jd&&fr(),h_(),document.body.removeEventListener("keydown",pr),Pu(Xd[10])}function ar(){jd&&fr(),b_("stream_table_channel_vod"),Pu(Xd[10]),Au("top_bar_game",Wd?N:A),Nu(),Wu(),Yd=Ml.Main_selectedChannel,Hd=Fd=0,zd=jd=!1,Od={},Pd=Td=Bd=0,Ld=!(mf=!(Vd=!(Gd=[]))),Vu(),ir(),or()}function ir(){k_(),Ad=!0,Nd=0,Rd=3500}function or(){var e=Bd+Fd;e&&Hd-1<e&&(e=Hd-Vl,Ld=!0),xf("https://api.twitch.tv/kraken/channels/"+encodeURIComponent(Ml.Main_selectedChannel_id)+"/videos?limit="+Vl+"&broadcast_type="+(Wd?"highlight":"archive")+"&sort=time&offset="+e,Rd,2,null,dr,sr)}function sr(){++Nd<Ud?(Rd+=500,or()):(Ad=!1,Bd?(Ld=!0,rr()):(mf=!1,Uu(),ju(L)))}function dr(e){var t=JSON.parse(e),n=t.videos.length;Hd=parseInt(t._total),n<Vl&&(Ld=!0);var a=Bd;qd=!(Bd+=n);var i=n/Jl;0<n%Jl&&i++;var o,s,d,r,c,l,u,_=0,f=document.getElementById("stream_table_channel_vod");if(!zd){zd=!0,d=document.createElement("tr");var m='<i class="icon-movie-play stream_channel_fallow_icon"></i>'+Ca+Ca+p;(Ol=document.createElement("td")).setAttribute("id",Xd[8]+"y_0"),Ol.className="stream_cell",Ol.innerHTML='<div id="'+Xd[0]+'y_0" class="stream_thumbnail_channel_vod" ><div id="'+Xd[3]+'y_0" class="stream_channel_fallow_game">'+m+"</div></div>",d.appendChild(Ol),f.appendChild(d)}for(var h=0;h<i;h++){for(s=a/Jl+h,d=document.createElement("tr"),o=0;o<Jl&&_<n;o++,_++)c=(r=t.videos[_])._id,l=-1!==((u=r.preview.template)+"").indexOf("404_processing"),s||o||!l||(l=!1,u=yu),l||Od[c]?o--:(Od[c]=1,d.appendChild(rI(s,s+"_"+o,[c,r.length,r.language,r.game,r.channel.name,r.increment_view_count_url],[u.replace("{width}x{height}",ou),LI.parse(r.title),F+v_(r.created_at),en+g+r.game,a_(r.views)+D,i_(r.resolutions.chunked.slice(-4),parseInt(r.fps.chunked)||0,r.language),H+Ip(r.length),r.animated_preview_url],Xd)));for(;o<Jl;o++)Ld&&!Vd&&(Vd=!0,Bd=s*Jl+o),d.appendChild(I_(Xd[9]+s+"_"+o)),Gd.push(Xd[9]+s+"_"+o);f.appendChild(d)}rr()}function rr(){if(jd?(Ju(Td,Pd,Jl,Bd),w_(yu)):(qd?ju(B+(Wd?N:A)+O+I):(jd=!0,w_(yu),_r(),__()),Tu(Xd[10]),mf=!1,Uu()),0<Gd.length&&!Ld)return ir(),void cr();Ad=!(Gd=[])}function cr(){Xu(Gd.length);var e=Bd+Fd;e&&Hd-1<e&&(e=Hd-Zl,Ld=!0),xf("https://api.twitch.tv/kraken/channels/"+encodeURIComponent(Ml.Main_selectedChannel_id)+"/videos?limit="+Zl+"&broadcast_type="+(Wd?"highlight":"archive")+"&sort=time&offset="+e,Rd,2,null,ur,lr)}function lr(){++Nd<Ud?(Rd+=500,cr()):(Ld=!0,Bd-=Gd.length,Gd=[],rr())}function ur(e){var t,n,a=JSON.parse(e),i=a.videos.length,o=0,s=0,d=[];for(Hd=parseInt(a._total);o<Gd.length&&s<i;o++,s++)n=(t=a.videos[s])._id,-1!==(t.preview.template+"").indexOf("404_processing")||Od[n]?o--:(Od[n]=1,lI(Gd[o],[n,t.length,t.language,t.game,t.channel.name,t.increment_view_count_url],[t.preview.template.replace("{width}x{height}",ou),LI.parse(t.title),F+v_(t.created_at),en+g+t.game,a_(t.views)+D,i_(t.resolutions.chunked.slice(-4),parseInt(t.fps.chunked)||0,t.language),H+Ip(t.length),t.animated_preview_url],Xd),d.push(o));for(o=d.length-1;-1<o;o--)Gd.splice(d[o],1);Fd+=s,Ld&&(Bd-=Gd.length,Gd=[]),rr()}function _r(){Pd<0?mr():(D_(Pd,Td,Xd,Jl,Bd),bI(Xd,Pd+"_"+Td),Bd/Jl<Pd+zl&&!Ld&&!Ad&&(ir(),or()),Il&&fr())}function fr(){window.clearInterval(BS),-1<Pd&&Bd?(Tu(Xd[1]+Pd+"_"+Td),Y_(Pd+"_"+Td,Xd)):hr()}function mr(){Bu(Xd[0]+"y_0",du)}function hr(){Ou(Xd[0]+"y_0",du)}function pr(e){var t;if(!mf&&!F_())switch(R_(),e.keyCode){case Na:t_()?e_():$u()?Ku():(fr(),pf(pr));break;case La:if(s_(Pd,Td-1,Xd[0]))fr(),Td--,_r();else for(t=Jl-1;-1<t;t--)if(s_(Pd-1,t,Xd[0])){fr(),Pd--,Td=t,_r();break}break;case Oa:s_(Pd,Td+1,Xd[0])?(fr(),Td++,_r()):s_(Pd+1,0,Xd[0])&&(fr(),Pd++,Td=0,_r());break;case Ba:if(-1!==Pd||qd)if(Pd){for(t=0;t<Jl;t++)if(s_(Pd-1,Td-t,Xd[0])){fr(),Pd--,Td-=t,_r();break}}else fr(),Pd=-1,mr();else Pd=0,hr(),_r();break;case Ga:if(-1!==Pd||qd){for(t=0;t<Jl;t++)if(s_(Pd+1,Td-t,Xd[0])){fr(),Pd++,Td-=t,_r();break}}else Pd=0,hr(),_r();break;case Pa:case xa:case Ta:case Aa:-1===Pd?(kf("ChannelVod_highlight",(Wd=!Wd)?"true":"false"),ar()):X_(Pd+"_"+Td,Xd,pr)}}var gr,vr,yr,br,wr=0,kr=10,Cr=!1,Mr=0,Er=null,Sr=!1,Ir=0,xr={},Pr={};function Tr(){jr(),Ml.Play_ChatForceDisable?(Qr||mc(),Sr=!1,Z_(function(){Lr(Mr=(new Date).getTime())})):Hc()}function Lr(e){wr=0,Br(e)}function Br(e){var t="https://badges.twitch.tv/v1/badges/channels/"+Ml.Play_selectedChannel_id+"/display",n=new XMLHttpRequest;n.open("GET",t,!0),n.timeout=1e4,n.ontimeout=function(){},n.onreadystatechange=function(){if(4===n.readyState){if(200===n.status)return void(Mr===e&&Gr(n.responseText,e));Mr===e&&Or(e)}},n.send(null)}function Or(e){wr++,Mr===e&&(wr<kr?Br(e):vr=window.setTimeout(function(){Br(e)},1e3))}function Gr(e,t){PI(JSON.parse(e).badge_sets).forEach(function(t){t.versions.forEach(function(e){TI(t.type,e.type,e.image_url_4x,$r)})}),xr[Ml.Play_selectedChannel_id]?Mr===t&&Fr():Ar(t)}function Ar(e){wr=0,Nr(e)}function Nr(e){var t="https://api.betterttv.net/2/channels/"+encodeURIComponent(Ml.Play_selectedChannel),n=new XMLHttpRequest;n.open("GET",t,!0),n.timeout=1e4,n.ontimeout=function(){},n.onreadystatechange=function(){4===n.readyState&&(200===n.status?Mr===e&&Rr(n.responseText,e):404===n.status?(xr[Ml.Play_selectedChannel_id]=1,Mr===e&&Fr()):Mr===e&&Ur(e))},n.send(null)}function Ur(e){wr++,Mr===e&&(wr<kr?Nr(e):Mr===e&&Fr())}function Rr(t,e){(t=JSON.parse(t)).emotes.forEach(function(e){Pr[e.code]={restrictions:e.restrictions,code:e.code,source:"bttv",id:e.id,"1x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","1x"),"2x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","2x"),"3x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","3x")}}),xr[Ml.Play_selectedChannel_id]=1,Mr===e&&Fr()}function Fr(){qr(),Hr()}function Hr(){(Er=new ReconnectingWebSocket("wss://irc-ws.chat.twitch.tv","irc",{reconnectInterval:3e3})).onopen=function(){Er.send("PASS blah\r\n"),Er.send("NICK justinfan12345\r\n"),Er.send("CAP REQ :twitch.tv/commands twitch.tv/tags\r\n"),Er.send("JOIN #"+Ml.Play_selectedChannel+"\r\n")},Er.onclose=function(){Cr=!0},Er.onmessage=function(e){var t=window.parseIRC(e.data.trim());if(t.command)switch(t.command){case"PING":Er.send("PONG "+t.params[0]);break;case"JOIN":Sr=!0,Jr('&nbsp;<span class="message">'+ra+Mn+Ml.Play_selectedChannelDisplayname+" "+_+"</span>");break;case"PRIVMSG":Vr(t)}},yr=window.setTimeout(Dr,5e3)}function Dr(){Sr?br=window.setInterval(zr,1e3):(Er.close(1e3),Fr())}function qr(){window.clearTimeout(yr)}function Vr(e){var t="",n=e.tags;if(n.hasOwnProperty("badges")&&"string"==typeof n.badges&&n.badges.split(",").forEach(function(e){e=e.split("/"),t+='<span class="'+e[0]+"-"+e[1]+' tag"></span>'}),n.hasOwnProperty("display-name")){var a=n["display-name"];"string"==typeof a&&(t+='<span class="nick" style="color: #'+dc[a.charCodeAt(0)%rc]+';">'+a+"</span>&#58;&nbsp;")}var i=e.params[1];i=i.replace(/</g,"&lt;").replace(/>/g,"&gt;"),/^\x01ACTION.*\x01$/.test(i)&&(i=i.replace(/^\x01ACTION/,"").replace(/\x01$/,"").trim());var o={};n.hasOwnProperty("emotes")&&"string"==typeof n.emotes&&(n.emotes=n.emotes.split("/"),n.emotes.forEach(function(t){t=t.split(":"),o[t[0]]||(o[t[0]]=[]),t[1].split(",").forEach(function(e){e=e.split("-"),o[t[0]].push([parseInt(e[0]),parseInt(e[1])])})}));for(var s=xI(i,o),d=0;d<s.length;d++)"string"==typeof s[d]?s[d]=SI(n,s[d]):s[d]=s[d][0];e=s.join(" "),e=LI.parse(e,!0),Jr(t+='<span class="message">'+e+"</span>")}function Jr(e){var t=document.createElement("div");t.className="chat_line",t.innerHTML=e,$r.appendChild(t),zr(),100<++Ir&&(Ir=0,qc())}function zr(){$r.scrollTop=$r.scrollHeight}function Xr(){qr(),window.clearTimeout(vr),window.clearTimeout(gr),window.clearInterval(br)}function jr(){Xr(),Er&&Er.close(1e3),Mr=0,b_("chat_box"),Sr=Cr=!1}var Wr,Yr,Kr,$r,Zr,Qr=!1,ec=0,tc=[],nc=[],ac=10,ic=null,oc=0,sc="",dc=["ff0000","ff4000","ff8000","ffbf00","ffff00","bfff00","80ff00","40ff00","00ff00","00ff40","00ff80","00ffbf","00ffff","00bfff","0080ff","0040ff","ff00ff","ff00bf","ff0080","ff0040"],rc=dc.length,cc=0,lc=!1,uc=0;function _c(){$r=document.getElementById("chat_box"),mc()}function fc(){Gc(),mu&&Ml.Play_ChatForceDisable?(Qr||mc(),Z_(function(){kc(uc=(new Date).getTime())})):Hc()}function mc(){ec=0,Qr=!(Pr={}),hc()}function hc(){var e=new XMLHttpRequest;e.open("GET","https://badges.twitch.tv/v1/badges/global/display",!0),e.timeout=1e4,e.ontimeout=function(){},e.onreadystatechange=function(){4===e.readyState&&(200===e.status?gc(e.responseText):pc())},e.send(null)}function pc(){++ec<ac?hc():Qr=!1}function gc(e){PI(JSON.parse(e).badge_sets).forEach(function(t){t.versions.forEach(function(e){TI(t.type,e.type,e.image_url_4x,null)})}),vc()}function vc(){ec=0,yc()}function yc(){var e=new XMLHttpRequest;e.open("GET","https://api.betterttv.net/2/emotes",!0),e.timeout=1e4,e.ontimeout=function(){},e.onreadystatechange=function(){4===e.readyState&&(200===e.status?wc(e.responseText):bc())},e.send(null)}function bc(){++ec<ac?yc():Qr=!1}function wc(t){(t=JSON.parse(t)).emotes.forEach(function(e){Pr[e.code]={restrictions:e.restrictions,code:e.code,source:"bttv",id:e.id,"1x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","1x"),"2x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","2x"),"3x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","3x")}}),Qr=!0}function kc(e){ec=0,Cc(e)}function Cc(e){var t,n="https://badges.twitch.tv/v1/badges/channels/"+Ml.Main_selectedChannel_id+"/display";if(mu){if(!(t=Android.mreadUrl(n,1e4,0,null)))return void(uc===e&&Mc(e));if(200===(t=JSON.parse(t)).status)return void(uc===e&&Ec(t.responseText,e));uc===e&&Mc(e)}else(t=new XMLHttpRequest).open("GET",n,!0),t.timeout=1e4,t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void(uc===e&&Ec(t.responseText,e));uc===e&&Mc(e)}},t.send(null)}function Mc(e){ec++,uc===e&&(ec<ac?Cc(e):Zr=window.setTimeout(function(){Cc(e)},1e3))}function Ec(e,t){PI(JSON.parse(e).badge_sets).forEach(function(t){t.versions.forEach(function(e){TI(t.type,e.type,e.image_url_4x,$r)})}),uc===t&&Sc(t)}function Sc(e){ec=0,uc===e&&Ic(e)}function Ic(e){var t,n="https://api.twitch.tv/v5/videos/"+Ml.ChannelVod_vodId+"/comments?client_id="+Ql+(oc?"&content_offset_seconds="+parseInt(oc):"");if(mu){if(!(t=Android.mreadUrl(n,1e4,0,null)))return void(uc===e&&xc(e));if(200===(t=JSON.parse(t)).status)return void(uc===e&&Pc(t.responseText,e));uc===e&&xc(e)}else(t=new XMLHttpRequest).open("GET",n,!0),t.timeout=1e4,t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void(uc===e&&Pc(t.responseText,e));uc===e&&xc(e)}},t.send(null)}function xc(e){ec++,uc===e&&(ec<ac?Ic(e):Yr=window.setTimeout(function(){Ic(e)},2500))}function Pc(e,t){e=JSON.parse(e);var n,a,i=null===ic;i&&(n="&nbsp;",n+='<span class="message">',n+=ra+Mn+Ml.Main_selectedChannelDisplayname+" "+sc,Tc(n+="</span>",0)),oc=0,ic=e._next,e.comments.forEach(function(e){n="",(a=e.message).hasOwnProperty("user_badges")&&a.user_badges.forEach(function(e){n+='<span class="'+e._id+"-"+e.version+' tag"></span>'}),n+='<span class="nick" style="color: #'+dc[e.commenter.display_name.charCodeAt(0)%rc]+';">'+e.commenter.display_name+"</span>&#58;&nbsp;",n+='<span class="message">',a.fragments.forEach(function(e){e.hasOwnProperty("emoticon")?n+='<img class="emoticon" src="https://static-cdn.jtvnw.net/emoticons/v1/'+e.emoticon.emoticon_id+'/1.0" srcset="https://static-cdn.jtvnw.net/emoticons/v1/'+e.emoticon.emoticon_id+"/2.0 2x, https://static-cdn.jtvnw.net/emoticons/v1/"+e.emoticon.emoticon_id+'/3.0 4x">':n+=LI.parse(e.text)}),n+="</span>",i?Tc(n,e.content_offset_seconds):void 0!==ic&&Lc(n,e.content_offset_seconds)}),i&&uc===t&&(Bc(t),void 0!==ic&&Nc(t))}function Tc(e,t){tc.push({time:t,message:e})}function Lc(e,t){nc.push({time:t,message:e})}function Bc(e){lc||uc!==e||(Wr=window.setInterval(function(){Ac(e),$r.scrollTop=$r.scrollHeight},1e3))}function Oc(){lc||(window.clearTimeout(Zr),window.clearTimeout(Yr),window.clearTimeout(Kr),window.clearInterval(Wr))}function Gc(){Oc(),uc=0,b_("chat_box"),lc=!1,ic=null,tc=[],nc=[],cc=0}function Ac(e){var t;if(cc<tc.length-1)for(var n=cc;n<tc.length&&tc[n].time<er+Android.gettime()/1e3;n++,cc++)(t=document.createElement("div")).className="chat_line",t.innerHTML=tc[n].message,$r.appendChild(t);else if(Oc(),void 0!==ic)tc=nc.slice(),cc=0,Bc(e),nc=[],uc===e&&Nc(e),qc();else{var a="&nbsp;";a+='<span class="message">',a+=ra+ra+xn+ra+ra,a+="</span>",(t=document.createElement("div")).className="chat_line",t.innerHTML=a,$r.appendChild(t),lc=!0,$r.scrollTop=$r.scrollHeight,window.clearInterval(Wr),Wr=window.setInterval(function(){$r.scrollTop=$r.scrollHeight},1e3)}}function Nc(e){ec=0,lc||uc!==e||Uc(e)}function Uc(e){var t,n="https://api.twitch.tv/v5/videos/"+Ml.ChannelVod_vodId+"/comments?client_id="+Ql+(null!==ic?"&cursor="+ic:"");if(mu){if(!(t=Android.mreadUrl(n,1e4,0,null)))return void(lc||uc!==e||Rc(e));if(200===(t=JSON.parse(t)).status)return void(lc||uc!==e||Pc(t.responseText,e));lc||uc!==e||Rc(e)}else(t=new XMLHttpRequest).open("GET",n,!0),t.timeout=1e4,t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void(lc||uc!==e||Pc(t.responseText,e));lc||uc!==e||Rc(e)}},t.send(null)}function Rc(e){ec++,uc===e&&(ec<ac?Uc(e):Kr=window.setTimeout(function(){Uc(e)},2500))}function Fc(){uc=0,Dc(_n+ra+fn)}function Hc(){Gc(),Tu("chat_box"),Dc(na)}function Dc(e){var t="&nbsp;";t+='<span class="message">',t+=ra+ra+ra+ra+ra+ra+ra+ra+ra+ra,t+=e,t+="</span>";var n=document.createElement("div");n.className="chat_line",n.innerHTML=t,$r.appendChild(n)}function qc(){var e=document.getElementsByClassName("chat_line");if(0<e.length-100)for(var t=0;t<e.length-100;t++)e[0].parentNode.removeChild(e[0]);zr()}var Vc,Jc,zc,Xc,jc,Wc,Yc,Kc=!0,$c=!1,Zc=!1,Qc=-1,el=new Image,tl=1,nl=2,al=3,il=4,ol=5,sl=6,dl=7,rl=8,cl=9,ll=10,ul=11,_l=12,fl=13,ml=14,hl=15,pl=16,gl=17,vl=18,yl=19,bl=20,wl=21,kl=22,Cl="",Ml={Main_Go:1,Main_Before:1,Main_BeforeSearch:1,Main_BeforeChannel:1,Main_BeforeAgame:al,Main_BeforeChannelisSet:!1,Main_BeforeAgameisSet:!1,Main_selectedChannel:"",Main_selectedChannelDisplayname:"",Main_selectedChannelLogo:"",Main_selectedChannel_id:"",Main_gameSelected:"",Main_OldgameSelected:null,Play_isHost:!1,Play_DisplaynameHost:"",Play_selectedChannelDisplayname:"",Play_selectedChannel:"",Play_gameSelected:"",Users_Position:0,Users_AddcodePosition:0,Play_WasPlaying:0,ChannelVod_vodId:"",vodOffset:0,Search_data:"",isLastSChannels:!1,gameSelectedOld:"",Games_return:!1,Search_isSearching:!1,Play_ChatForceDisable:!1,Never_run:!0,Main_CenterLablesVectorPos:0},El=!0,Sl=!0,Il=!1,xl=[],Pl=0,Tl=0,Ll=null,Bl=!0,Ol="",Gl=!1,Al="",Nl=["label_side_panel","label_extra","label_refresh","label_switch","top_bar_live","top_bar_user","top_bar_featured","top_bar_game","top_bar_vod","top_bar_clip"],Ul=[],Rl=0,Fl=!0,Hl=0,Dl=1.35,ql=1.5,Vl=45,Jl=3,zl=Math.floor(Vl/Jl/ql),Xl=45,jl=5,Wl=Math.floor(Xl/jl/Dl),Yl=48,Kl=6,$l=Math.floor(Yl/Kl/ql),Zl=6,Ql="5seja5ptej058mxqy7gh5tcudjqtm9",eu="Client-ID",tu="Accept",nu="Authorization",au="OAuth ",iu="application/vnd.twitchtv.v5+json",ou="528x297",su="340x475",du="stream_thumbnail_focused",ru="data_attribute",cu="1.0",lu=".10",uu="042419",_u=cu+lu+"-"+uu,fu=0,mu=0,hu="?"+Math.random(),pu="https://fgl27.github.io/SmartTwitchTV/release/githubio/images/",gu=pu+"404_game.png",vu=pu+"404_logo.png",yu=pu+"404_video.png",bu="https://cors-anywhere.herokuapp.com/",wu=function(e,t,n){e.onerror=function(){this.src=n},e.src=t};function ku(){(Zc=Ef("Main_isDebug",!1))&&Kc?Cu():"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){Mu(window.navigator.userLanguage||window.navigator.language)}):Mu(window.navigator.userLanguage||window.navigator.language)}function Cu(){console.log("Debug mod start");var e=document.createElement("script");e.src="https://fgl27.github.io/SmartTwitchTV/release/githubio/js/masterdebug.js",document.head.appendChild(e)}function Mu(e){K_(),Z_(function(){try{mu=Android.getAndroid()}catch(e){mu=0,document.body.style.backgroundColor="rgba(0, 0, 0, 1)",$c=Zc=!0,console.log("Main_isReleased: "+Kc),console.log("Main_isDebug: "+Zc),console.log("Main_isBrowser: "+$c)}Ak(),Ia(),console.log("language is "+e),Sa(),-1!==window.location.href.indexOf("code")&&If(window.location.href),Eu()})}function Eu(){Ay(),Su(!0),Vc=document.getElementById("scrollbar"),f_(),Cl=Ml.Main_Go,Z_(function(){_c(),jh(),no(),ao()&&(Yc=window.setInterval(nf,6e5),nf()),document.body.addEventListener("keyup",N_,!1),Ny(),document.getElementById("side_panel").style.marginLeft="",y_(),Iu(),ZS=Ef("Vod_highlight",!1),Wd=Ef("ChannelVod_highlight",!1),ps=Ef("AGameVod_highlight",!1),uS=Ef("UserVod_highlight",!1),WS=Cf("vod_periodNumber",2),_s=Cf("AGameVod_periodNumber",2),dS=Cf("UserVod_TypeNumber",1),Cy(),Jc=document.getElementById("search_input"),zc=document.getElementById("user_input"),S_(yu),S_(gu),S_(vu),document.addEventListener("visibilitychange",ef,!1),jc=window.setInterval(tf,6e4),Gy=lb,Fy(),Xc=window.setTimeout(r_,5e3),Tu("topbar")})}function Su(e){tf(),xu("label_refresh","icon-refresh",t+$t),xu("label_switch","icon-switch",r),xu("label_side_panel","icon-ellipsis",Dn),xu("icon_feed_refresh","icon-refresh",t+" Press up"),Au("top_bar_live",_),Au("top_bar_user",e?u:a),Au("top_bar_featured",rn),Au("top_bar_game",f),Au("top_bar_vod",nn),Au("top_bar_clip",U),Gu("scene2_search_text",Ca+n),Gu("scene2_channel_text",Ca+Ht),Gu("scene2_game_text",Ca+zt),Au("dialog_end_replay_text",on),Au("dialog_end_vod_text",ln),Au("dialog_end_channel_text",Ht),Au("dialog_end_game_text",zt),Gu("dialog_about_text",va+ya),Ul=[re,ce,le,ue],e?Pk():(Gk(),y_())}function Iu(){Au("play_dialog_exit_text",V),Au("side_panel_search",n),Au("side_panel_settings",a),Au("side_panel_about",i),Au("side_panel_controls",e),Au("side_panel_exit",z),Au("side_panel_live",_),Au("side_panel_user",u),Au("side_panel_featured",rn),Au("side_panel_games",f),Au("side_panel_videos",nn),Au("side_panel_clips",U),Au("side_panel_hide",o),Au("chanel_button",S),Au("game_button",f),Au("live_button",_),Au("exit_app_cancel",W),Au("exit_app_close",X),Au("remove_cancel",W),Au("remove_yes",Xt),Au("exit_app_minimize",j),Au("main_dialog_exit_text",J),Gu("dialog_controls_text",ga),Au("dialog_vod_text",En),Gu("dialog_vod_start_text",In)}function xu(e,t,n){Gu(e,'<div class="strokedextramini" style="vertical-align: middle; display: inline-block;"><i class="'+t+'" style="color: #FFFFFF; font-size: 115%; "></i></div><div class="strokedextramini" style="vertical-align: middle; display: inline-block">'+Ca+n+"</div>")}function Pu(e){document.getElementById(e).classList.add("hide")}function Tu(e){document.getElementById(e).classList.remove("hide")}function Lu(e){return-1===document.getElementById(e).className.indexOf("hide")}function Bu(e,t){document.getElementById(e).classList.add(t)}function Ou(e,t){document.getElementById(e).classList.remove(t)}function Gu(e,t){document.getElementById(e).innerHTML=t}function Au(e,t){document.getElementById(e).textContent=t}function Nu(){M_(-1),mu?Android.mshowLoading(!0):Tu("dialog_loading")}function Uu(){mu?Android.mshowLoading(!1):Pu("dialog_loading")}function Ru(){window.clearTimeout(Ll)}function Fu(){Ll=window.setTimeout(Du,6e3)}function Hu(){Fu(),Tu("main_dialog_exit"),document.body.addEventListener("keydown",uf,!1)}function Du(){document.body.removeEventListener("keydown",uf,!1),pf(Wc),Ru(),Pu("main_dialog_exit"),Tl=0,qu()}function qu(){Ou("exit_app_cancel","button_search_focused"),Ou("exit_app_minimize","button_search_focused"),Ou("exit_app_close","button_search_focused"),Bu(Tl?1===Tl?"exit_app_minimize":"exit_app_close":"exit_app_cancel","button_search_focused")}function Vu(){b_("dialog_counter_text"),zu(0,0,0)}function Ju(e,t,n,a){0<a?(Au("dialog_counter_text",t*n+(e+1)+"/"+a),zu(t,n,a)):Vu()}function zu(e,t,n){var a=screen.height/100*7;if(3===t&&9<n||5===t&&10<n||6===t&&12<n){var i=Ml.Main_Go===il||Ml.Main_Go===yl||Ml.Main_Go===bl||Ml.Main_Go===_l||Ml.Main_Go===kl||Ml.Main_Go===gl||Ml.Main_Go===vl||Ml.Main_Go===fl,o=Math.ceil((screen.height-3*a)/(Math.ceil(n/t)-1)*e+a*(i?1.8:1));Vc.style.top=o+"px",Bl&&(Bl=!1,Vc.style.backgroundColor="#777777")}else Vc.style.backgroundColor="#000000",Vc.style.top=a+"px",Bl=!0}function Xu(e){(Zl=12)/3<e&&(Zl=3*e),99<Zl&&(Zl=99)}function ju(e){Au("dialog_warning_text",e),Tu("dialog_warning")}function Wu(){Pu("dialog_warning")}function Yu(){e_(),n_(),Tu("dialog_about")}function Ku(){Pu("dialog_about")}function $u(){return Lu("dialog_about")}function Zu(){e_(),n_(),Wu(),m_(Ml.Main_Go),Vu(),Ik()}function Qu(){Ku(),n_(),Tu("dialog_controls")}function e_(){Pu("dialog_controls")}function t_(){return Lu("dialog_controls")}function n_(){Pu("dialog_update")}function a_(e){return(e+"").replace(/\B(?=(\d{3})+(?!\d))/g,",")}function i_(e,t,n){return(e+="").indexOf("x")||(e=e.slice(-3)),e+"p"+(t=58<t?60:t<32?30:Math.ceil(t))+(""!==n?" ["+n.toUpperCase()+"]":"")}function o_(e){return-1!==e.indexOf("live")?"":Y}function s_(e,t,n){return null!==document.getElementById(n+e+"_"+t)}function d_(){tf(),l_(),document.body.addEventListener("keyup",N_,!1)}function r_(){for(var e,t=0;t<Nl.length;t++)t<4?document.getElementById(Nl[t]).style.opacity="0.5":-1===(e=document.getElementById(Nl[t])).className.indexOf("icon_center_focus")&&(e.style.opacity="0.5");Bu("topbar","topbar_dim")}function c_(){for(var e=0;e<Nl.length;e++)document.getElementById(Nl[e]).style.opacity="1";Ou("topbar","topbar_dim")}function l_(e){window.clearTimeout(Xc),c_(),Z_(function(){u_(e)})}function u_(e){Ml.Main_Go!==ul&&(Ml.Main_BeforeChannelisSet=!1),Ml.Main_Go!==il&&(Ml.Main_BeforeAgameisSet=!1),Vu(),Ml.Main_Go===tl?(Gy=lb,Fy()):Ml.Main_Go===nl?zi():Ml.Main_Go===al?(Gy=rb,Fy()):Ml.Main_Go===il?To():Ml.Main_Go===rl?Nw():Ml.Main_Go===cl?ww():Ml.Main_Go===ll?rk():Ml.Main_Go===ul?ad():Ml.Main_Go===_l?tr():Ml.Main_Go===fl?(Gy=sb,Fy()):Ml.Main_Go===ml?PE():Ml.Main_Go===ol?iE():Ml.Main_Go===sl?FC():Ml.Main_Go===dl?(Gy=cb,Fy()):Ml.Main_Go===hl?cC():Ml.Main_Go===pl?jb():Ml.Main_Go===gl?tI():Ml.Main_Go===vl?(Gy=ob,Fy()):Ml.Main_Go===yl?vs():Ml.Main_Go===bl?(Gy=db,Fy()):Ml.Main_Go===wl?(Gy=ub,Fy()):Ml.Main_Go===kl&&_S(),Xc=window.setTimeout(r_,3e3),e&&bf()}function __(){kf("Main_values",JSON.stringify(Ml))}function f_(){Ml=Ry(Ml,Mf("Main_values",{}))}function m_(e){e===tl?Hy():e===nl?Xi():e===al?Hy():e===il?Lo():e===rl?Uw():e===cl?kw():e===ll?ck():e===ul?id():e===_l?nr():e===fl?Hy():e===ml?TE():e===ol?oE():e===sl?HC():e===dl?Hy():e===hl?lC():e===pl?Wb():e===gl?nI():e===vl?Hy():e===yl?ys():e===bl?Hy():e===wl?Hy():e===kl&&fS(),Lu("settings_scroll")&&xk()}function h_(){xu("label_refresh","icon-refresh",t+$t),xu("label_side_panel","icon-ellipsis",Dn),Pu("label_switch"),Ou("top_bar_user","icon_center_focus"),Au("top_bar_live",_),Au("top_bar_user",u),Au("top_bar_featured",rn),Au("top_bar_game",f),Au("top_bar_vod",nn),Au("top_bar_clip",U)}function p_(){xu("label_side_panel","icon-arrow-circle-left",x),b_("top_bar_live"),b_("top_bar_game"),b_("top_bar_vod"),b_("top_bar_clip"),b_("top_bar_featured"),Bu("top_bar_user","icon_center_focus")}function g_(e){return'<div style="font-size: 30%; position: fixed; line-height: 0; text-shadow: #000000 0 0 5.7px, #000000 0 0 5.7px, #000000 0 0 4px">'+e+"</div>"}function v_(e){return e=new Date(e),Gl?e.getDate()+" "+Zt[e.getMonth()]+", "+e.getFullYear():Zt[e.getMonth()]+" "+e.getDate()+", "+e.getFullYear()}function y_(){if(mu)try{_u="Android: "+Android.getversion()+" Web: "+uu}catch(e){}Gu("dialog_about_text",va+be+_u+ya)}function b_(e){for(e=document.getElementById(e);e.firstChild;)e.removeChild(e.firstChild)}function w_(e){for(var t,n=0;n<xl.length;n++)null!==(t=document.getElementById(xl[n].id))&&wu(t,xl[n].src+hu,e)}function k_(){xl=[]}function C_(e,t){xl.push({id:e,src:t})}function M_(e){Qc=e}function E_(e){var t=0;return Qc<e?t=-1:e<Qc&&(t=1),Qc=e,t}function S_(e){el.src=e}function I_(e){return(Ol=document.createElement("td")).setAttribute("id",e),Ol.className="stream_cell",Ol}function x_(e,t,n){return(Ol=document.createElement("td")).setAttribute("id",t[4]+e),Ol.setAttribute(ru,n[0]),Ol.setAttribute("data-id",n[1]),Ol.className="stream_cell",Ol.innerHTML=T_(e,t,n),Ol}function P_(e,t,n){var a=document.getElementById(e),i=e.split(n[5])[1];a.setAttribute(ru,t[0]),a.setAttribute("data-id",t[1]),a.innerHTML=T_(i,n,t),a.setAttribute("id",n[4]+i)}function T_(e,t,n){return C_(t[1]+e,n[2]),'<div id="'+t[0]+e+'" class="stream_thumbnail_channel" ><img id="'+t[1]+e+'" class="stream_img"></div><div id="'+t[2]+e+'" class="stream_text"><div id="'+t[3]+e+'" class="stream_channel">'+n[3]+"</div></div>"}function L_(e,t,n,a,i){return e<Jl&&S_(i[0]),(Ol=document.createElement("td")).setAttribute("id",a[8]+t),Ol.setAttribute(ru,JSON.stringify(n)),Ol.className="stream_cell",Ol.innerHTML=O_(t,a,i),Ol}function B_(e,t,n,a){var i=document.getElementById(e),o=e.split(a[9])[1];i.setAttribute(ru,JSON.stringify(t)),i.innerHTML=O_(o,a,n),i.setAttribute("id",a[8]+o)}function O_(e,t,n){return C_(t[1]+e,n[0]),'<div id="'+t[0]+e+'" class="stream_thumbnail_video" ><img id="'+t[1]+e+'" class="stream_img"></div><div id="'+t[2]+e+'" class="stream_text"><div id="'+t[3]+e+'" class="stream_channel" style="width: 66%; display: inline-block;">'+n[1]+'</div><div id="'+t[7]+e+'"class="stream_info" style="width:33%; float: right; text-align: right; display: inline-block;">'+n[5]+'</div><div id="'+t[4]+e+'"class="stream_info">'+LI.parse(n[2])+'</div><div id="'+t[5]+e+'"class="stream_info">'+g+n[3]+'</div><div id="'+t[6]+e+'"class="stream_info">'+n[4]+"</div></div>"}function G_(e,t,n){return(Ol=document.createElement("td")).setAttribute("id",t[5]+e),Ol.setAttribute(ru,n[0]),Ol.className="stream_cell",Ol.innerHTML=A_(e,t,n),Ol}function A_(e,t,n){return C_(t[1]+e,n[1]),'<div id="'+t[0]+e+'" class="stream_thumbnail_game" ><img id="'+t[1]+e+'" class="stream_img"></div><div id="'+t[2]+e+'" class="stream_text"><div id="'+t[3]+e+'" class="stream_channel">'+n[0]+'</div><div id="'+t[4]+e+'"class="stream_info_games" style="width: 100%; display: inline-block;">'+n[2]+"</div></div>"}function N_(){Sl=!0}function U_(){El=!0}function R_(){El=!1,window.setTimeout(U_)}function F_(){return!El||!Sl}function H_(e,t,n,a,i){Bu(n[0]+e+"_"+t,du),Ju(t,e,a,i),E_(e)?1<e?s_(e+1,0,n[0])?W_(n[6],-1*document.getElementById(n[4]+e+"_"+t).offsetTop+.42*screen.height):N_():W_(n[6],.07*screen.height):N_()}function D_(e,t,n,a,i){Bu(n[0]+e+"_"+t,du),Ju(t,e,a,i),E_(e)?e?s_(e+1,0,n[0])&&W_(n[10],-1*document.getElementById(n[8]+(e-1)+"_"+t).offsetTop):W_(n[10],.07*screen.height):N_()}function q_(e,t,n,a,i){Bu(n[0]+e+"_"+t,du),Ju(t,e,a,i),E_(e)?W_(n[10]?n[10]:n[7],e?-1*document.getElementById(n[5]+(e-1)+"_"+t).offsetTop+.025*screen.height:-1*document.getElementById(n[5]+e+"_"+t).offsetTop+.025*screen.height):N_()}function V_(e,t,n){document.body.removeEventListener("keydown",n),Ml.Play_selectedChannel=JSON.parse(document.getElementById(t[8]+e).getAttribute(ru)),Ml.Play_selectedChannel_id=Ml.Play_selectedChannel[1],Ml.Play_selectedChannel=Ml.Play_selectedChannel[0],Ml.Main_Go===sl?(Ml.Play_DisplaynameHost=document.getElementById(t[3]+e).textContent,Ml.Play_selectedChannelDisplayname=Ml.Play_DisplaynameHost.split(ae)[1],Ml.Play_isHost=!0):Ml.Play_selectedChannelDisplayname=document.getElementById(t[3]+e).textContent,Ml.Play_gameSelected=document.getElementById(t[5]+e).textContent.split(g)[1],Ml.Main_Go===il&&(Ml.Main_OldgameSelected=Ml.Main_gameSelected),J_()}function J_(){document.body.addEventListener("keydown",Vg,!1),Pu("scene1"),Tu("scene2"),Kp(),ng(),yg(),ao()&&!eM&&lM&&NM(),Z_(Kh)}function z_(e,t,n){document.body.removeEventListener("keydown",n),pb=JSON.parse(document.getElementById(t[8]+e).getAttribute(ru)),em=parseInt(pb[1]),Ml.Play_gameSelected=pb[2],Ml.Main_selectedChannel=pb[3],Ml.Main_selectedChannelDisplayname=pb[4],Ml.Main_selectedChannelLogo=pb[5],Ml.Main_selectedChannel_id=pb[6],Ml.ChannelVod_vodId=pb[7],er=parseInt(pb[8]),hb=pb[9],vb=pb[10],fb=pb[11],pb=pb[0],gb=document.getElementById(t[4]+e).textContent,mb=document.getElementById(t[6]+e).textContent,document.body.addEventListener("keydown",Cm,!1),Pu("scene1"),Tu("scene2"),ng(),Xp(),Fp(),qp(),ao()&&!eM&&lM&&NM(),Z_(tm)}function X_(e,t,n){document.body.removeEventListener("keydown",n),Ml.ChannelVod_vodId=JSON.parse(document.getElementById(t[8]+e).getAttribute(ru)),Dd=parseInt(Ml.ChannelVod_vodId[1]),Jd=Ml.ChannelVod_vodId[2],Ml.Play_gameSelected=Ml.ChannelVod_vodId[3],Ml.Main_selectedChannel=Ml.ChannelVod_vodId[4],Fh=Ml.ChannelVod_vodId[5],Ml.ChannelVod_vodId=Ml.ChannelVod_vodId[0].substr(1),Ml.Main_Go===_l?Kd=document.getElementById(t[3]+e).innerHTML:(Kd="",Ml.Main_selectedChannelDisplayname=document.getElementById(t[3]+e).textContent),Zd=document.getElementById(t[4]+e).textContent,Qd=document.getElementById(t[5]+e).textContent,$d=document.getElementById(t[11]+e).innerHTML+", "+document.getElementById(t[6]+e).textContent,j_()}function j_(){document.body.addEventListener("keydown",Oy,!1),Pu("scene1"),Tu("scene2"),dy(),ng(),Xp(),qp(),Iv=!1,ao()&&!eM&&lM&&NM(),Z_(Gv)}function W_(e,t){document.getElementById(e).style.top=t+"px",window.setTimeout(N_,10)}function Y_(e,t){Sl=!1,Ou(t[0]+e,du)}function K_(){var e=document.createElement("span");e.className="fa",e.style.display="none",document.body.insertBefore(e,document.body.firstChild),"icons"!==window.getComputedStyle(e,null).getPropertyValue("font-family")?(Zc&&console.log("Main_Checktylesheet reloading"),$_("https://fgl27.github.io/SmartTwitchTV/release/githubio/css/icons.min.css")):Zc&&console.log("Main_Checktylesheet loaded OK"),document.body.removeChild(e)}function $_(e){var t=document.createElement("link");t.rel="stylesheet",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)}function Z_(e){"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?window.setTimeout(e):document.addEventListener("DOMContentLoaded",e)}function Q_(){var e=(new Date).getTime()+fu;return e=new Date(e),(Gl?Qt[e.getDay()]+" "+e.getDate()+"/"+Zt[e.getMonth()]:Qt[e.getDay()]+" "+Zt[e.getMonth()]+"/"+e.getDate())+" "+Sp(e.getHours())+":"+Sp(e.getMinutes())}function ef(){document.hidden||(tf(),window.setTimeout(tf,2e4))}function tf(){document.hidden||(Au("label_clock",Q_()),hu="?"+Math.random())}function nf(){document.hidden||ao()&&window.setTimeout(function(){SM()||eM||(Hm=Di[Ml.Users_Position].name,mM())},5e3)}function af(){Bu("side_panel_"+Hl,"side_panel_text_focus")}function of(){Ou("side_panel_"+Hl,"side_panel_text_focus")}function sf(){Hl?1===Hl?Zu():2===Hl?(document.body.addEventListener("keydown",Wc,!1),Yu()):3===Hl?(document.body.addEventListener("keydown",Wc,!1),Qu()):4===Hl?Hu(Wc):5===Hl?df(tl):6===Hl?df(lo()?ml:nl):7===Hl?df(wl):8===Hl?df(al):9===Hl?df(gl):10===Hl&&df(vl):Ml.Main_Go!==rl?(Ml.Search_isSearching||Ml.Main_Go!==ul&&Ml.Main_Go!==fl&&Ml.Main_Go!==_l||Sd(),Ml.Main_BeforeSearch=Ml.Main_Go,Ml.Main_Go=rl,m_(Ml.Main_BeforeSearch),l_()):document.body.addEventListener("keydown",Wc,!1),cf()}function df(e){e===Ml.Main_Go?document.body.addEventListener("keydown",Wc,!1):(Ml.Main_Before=Ml.Main_Go,Ml.Main_Go=e,m_(Ml.Main_Before),l_())}function rf(e){Wc=e,document.body.removeEventListener("keydown",Wc),document.body.addEventListener("keydown",lf,!1),Ou("side_panel","side_panel_hide")}function cf(){document.body.removeEventListener("keydown",lf),Bu("side_panel","side_panel_hide"),of(),Hl=0,af()}function lf(e){switch(e.keyCode){case Na:case La:document.body.addEventListener("keydown",Wc,!1),cf(),vf();break;case Ba:Hl&&(of(),Hl--,af());break;case Ga:Hl<10&&(of(),Hl++,af());break;case Aa:sf()}}function uf(e){switch(e.keyCode){case Na:Du();break;case Oa:2<++Tl&&(Tl=0),qu(),Ru(),Fu();break;case La:--Tl<0&&(Tl=2),qu(),Ru(),Fu();break;case Aa:Tl?mu&&1===Tl?Android.mclose(!1):mu&&2===Tl&&Android.mclose(!0):Du()}}ku();var _f=["top_bar_live","top_bar_user","top_bar_featured","top_bar_game","top_bar_vod","top_bar_clip"],ff=[tl,ml,wl,al,gl,vl],mf=!1;function hf(e){if(!(mf||Gy.FirstLoad||F_()))switch(e.keyCode){case Na:t_()?(vf(),e_()):$u()?(vf(),Ku()):Ml.Main_Go===il?(Ml.Main_OldgameSelected=Ml.Main_gameSelected,Ml.Games_return?(Ml.Main_Go=cl,Ml.Main_gameSelected=Ml.gameSelectedOld):(Ml.Main_Go=Ml.Main_BeforeAgame,Ml.Main_BeforeAgame=tl),Lo(),gf(),u_()):Ml.Main_Go===bl?(tb(il),gf(),u_()):Ml.Main_Go===dl?(tb(ml),gf(),u_()):Ml.Main_Go===fl?(tb(ul),gf(),u_()):Ml.Main_Go===yl?(Ml.Main_Go=il,ys(),gf(),u_()):Ml.Main_Go===ol?(Ml.Main_Go=ml,oE(),gf(),u_()):Ml.Main_Go===sl?(Ml.Main_Go=ml,HC(),gf(),u_()):Ml.Main_Go===kl?(Ml.Main_Go=ml,fS(),gf(),u_()):Ml.Main_Go===hl?(Ml.Main_Go=ml,lC(),gf(),u_()):Ml.Main_Go===ul?(Ml.Main_Go=Ml.Main_BeforeChannel,Ml.Main_BeforeChannel=tl,id(),Ml.Main_selectedChannel_id="",gf(),u_()):Ml.Main_Go===_l?(Ml.Main_Go=ul,nr(),gf(),u_()):Ml.Main_Go===ll?(Ml.Main_Go===Ml.Main_BeforeSearch?Ml.Main_Go=tl:Ml.Main_Go=Ml.Main_BeforeSearch,ck(),Ml.Search_isSearching=!1,gf(),u_()):Ml.Main_Go===cl?(Ml.Main_Go===Ml.Main_BeforeSearch?Ml.Main_Go=tl:Ml.Main_Go=Ml.Main_BeforeSearch,Ml.Search_isSearching=!1,kw(),gf(),u_()):Ml.Main_Go===pl?(Ml.Main_Go===Ml.Main_BeforeSearch?Ml.Main_Go=tl:Ml.Main_Go=Ml.Main_BeforeSearch,Ml.Main_selectedChannel_id&&Id(),Wb(),Ml.Search_isSearching=!1,gf(),u_()):(gf(),rf(hf));break;case Oa:if(Ml.Search_isSearching||Ml.Main_Go===ul||Ml.Main_Go===_l||Ml.Main_Go===fl||Ml.Main_Go===ll||Ml.Main_Go===cl||Ml.Main_Go===pl)break;Ou(_f[Ml.Main_CenterLablesVectorPos],"icon_center_line"),Ml.Main_CenterLablesVectorPos++,5<Ml.Main_CenterLablesVectorPos&&(Ml.Main_CenterLablesVectorPos=0),vf(),yf();break;case La:if(Ml.Search_isSearching||Ml.Main_Go===ul||Ml.Main_Go===_l||Ml.Main_Go===fl||Ml.Main_Go===ll||Ml.Main_Go===cl||Ml.Main_Go===pl)break;Ou(_f[Ml.Main_CenterLablesVectorPos],"icon_center_line"),Ml.Main_CenterLablesVectorPos--,Ml.Main_CenterLablesVectorPos<0&&(Ml.Main_CenterLablesVectorPos=5),vf(),yf();break;case Ga:Ou(_f[Ml.Main_CenterLablesVectorPos],"icon_center_line"),document.body.removeEventListener("keydown",hf),Il=!1,u_();break;case Aa:wf()}}function pf(e){window.clearTimeout(Xc),c_(),document.body.removeEventListener("keydown",e),document.body.removeEventListener("keydown",hf),document.body.addEventListener("keydown",hf,!1),vf()}function gf(){Ou(_f[Ml.Main_CenterLablesVectorPos],"icon_center_line"),document.body.removeEventListener("keydown",hf),Il=!1}function vf(){Il=!0,Bu(_f[Ml.Main_CenterLablesVectorPos],"icon_center_line")}function yf(){m_(Ml.Main_Go),Ml.Main_Go=ff[Ml.Main_CenterLablesVectorPos],Ml.Main_Go!==ml||lo()?l_(!0):(Ml.Main_Go=nl,gf(),l_())}function bf(){Ml.Main_Go===tl?(Gy=lb,document.body.removeEventListener("keydown",ib)):Ml.Main_Go===ml?document.body.removeEventListener("keydown",zE):Ml.Main_Go===il?document.body.removeEventListener("keydown",Ko):Ml.Main_Go===wl?(Gy=ub,document.body.removeEventListener("keydown",ib)):Ml.Main_Go===ll?document.body.removeEventListener("keydown",wk):Ml.Main_Go===cl?document.body.removeEventListener("keydown",Bw):Ml.Main_Go===pl?document.body.removeEventListener("keydown",dw):Ml.Main_Go===_l?document.body.removeEventListener("keydown",pr):Ml.Main_Go===ul?document.body.removeEventListener("keydown",xd):Ml.Main_Go===sl?document.body.removeEventListener("keydown",ZC):Ml.Main_Go===kl?document.body.removeEventListener("keydown",TS):Ml.Main_Go===hl?document.body.removeEventListener("keydown",wC):Ml.Main_Go===al?(Gy=rb,document.body.removeEventListener("keydown",ib)):Ml.Main_Go===fl?(Gy=sb,document.body.removeEventListener("keydown",ib)):Ml.Main_Go===gl?document.body.removeEventListener("keydown",wI):Ml.Main_Go===vl?(Gy=ob,document.body.removeEventListener("keydown",ib)):Ml.Main_Go===bl?(Gy=db,document.body.removeEventListener("keydown",ib)):Ml.Main_Go===dl?(Gy=cb,document.body.removeEventListener("keydown",ib)):Ml.Main_Go===yl?document.body.removeEventListener("keydown",Os):Ml.Main_Go===ol&&document.body.removeEventListener("keydown",bE)}function wf(){window.clearTimeout(Xc),c_(),Ml.Main_Go!==ul&&(Ml.Main_BeforeChannelisSet=!1),Ml.Main_Go!==il&&(Ml.Main_BeforeAgameisSet=!1),Vu(),Ml.Main_Go===tl?(Gy=lb,Dy()):Ml.Main_Go===ml?LE():Ml.Main_Go===wl?(Gy=ub,Dy()):Ml.Main_Go===il?Bo():Ml.Main_Go===hl?uC():Ml.Main_Go===ul?od():Ml.Main_Go===_l?ar():Ml.Main_Go===ll?lk():Ml.Main_Go===cl?Cw():Ml.Main_Go===pl?Yb():Ml.Main_Go===al?(Gy=rb,Dy()):Ml.Main_Go===dl?(Gy=cb).loadingData||Gy.key_refresh():Ml.Main_Go===gl?aI():Ml.Main_Go===vl?(Gy=ob,Dy()):Ml.Main_Go===bl?(Gy=db,Dy()):Ml.Main_Go===fl?(Gy=sb,Dy()):Ml.Main_Go===yl?bs():Ml.Main_Go===ol?sE():Ml.Main_Go===sl?DC():Ml.Main_Go===kl&&mS(),Xc=window.setTimeout(r_,3e3)}function kf(e,t){localStorage.setItem(e,t)}function Cf(e,t){return parseInt(localStorage.getItem(e))||t}function Mf(e,t){return JSON.parse(localStorage.getItem(e))||t}function Ef(e,t){var n=t.toString();return(localStorage.getItem(e)||n)===n?t:!t}function Sf(e){console.log(e);for(var t=0;t<e.length;t++)console.log("Character is: "+e.charAt(t)+" it's Unicode is: \\u"+e.charCodeAt(t).toString(16).toUpperCase())}function If(e){console.log("processCode");var t="";t=e.match(/code=(\w+)/),Pl=t?(t=t[1],console.log("if code "+t),t):(console.log("else code "+t),0)}function xf(e,t,n,a,i,o,s){var d;if(mu){if(!(d=Android.mreadUrl(e,t,n,a)))return void o();200===(d=JSON.parse(d)).status?i(d.responseText):o()}else(d=new XMLHttpRequest).open("GET",(s?bu:"")+e,!0),d.timeout=t,0<n&&d.setRequestHeader(eu,Ql),1<n&&d.setRequestHeader(tu,iu),2<n&&d.setRequestHeader(nu,a),d.ontimeout=function(){},d.onreadystatechange=function(){if(4===d.readyState){if(200===d.status)return void i(d.responseText);o()}},d.send(null)}var Pf=0,Tf=null,Lf=0,Bf=!1,Of=0,Gf=0,Af=!1,Nf=0,Uf=2e3,Rf=5,Ff="source",Hf=Ff,Df=0,qf=[],Vf="",Jf=!1,zf=0,Xf=0,jf=1,Wf=!1,Yf=0,Kf=!1,$f=!1,Zf=2e3,Qf=[0,5],em=0;function tm(){Np(),yg(),sp(document.getElementById("stream_info_icon"),Ml.Main_selectedChannelLogo),Au("stream_info_name",Ml.Main_selectedChannelDisplayname),Gu("stream_info_title",hb),Gu("stream_info_game",fb+", "+mb+", "+vb),Au("stream_live_icon",gb),Au("progress_bar_duration",Ip(em)),yy((Hh=Qf)[1]),Ml.Play_isHost=!1,Au("progress_bar_current_time",Ip(0)),Au("stream_live_time",""),Au("stream_watching_time",""),Wf=null!==Ml.ChannelVod_vodId,sc=Ft+".",Wf?(oc=er,fc()):Fc(),Gu("pause_button",'<i class="strokedbig icon-pause" style="color: #FFFFFF; font-size: 180%;"></i>'),Tu("progress_pause_holder"),wm(),Tu("scene_channel_panel_bottom"),Tu("chat_box"),Lf=Yf=0,window.clearInterval(Tf),$f=!1,Bm=-13,zf=Xf=0,Df=2,Ig(3),wh=!1,mg(),ao()?(Wa=!0,Ya=Ml.Main_selectedChannel_id,li()):Ap(),document.addEventListener("visibilitychange",cm,!1),Bf=!1,Af=!(Gf=Of=0),nm(),document.body.removeEventListener("keyup",N_)}function nm(){Nf=0,Uf=2e3,am()}function am(){xf("https://clips.twitch.tv/api/v2/clips/"+pb+"/status",Uf,1,null,om,im,!0)}function im(){++Nf<Rf?(Uf+=250,am()):(Up(),Og(3))}function om(e){qf=[],e=JSON.parse(e).quality_options;for(var t=0;t<e.length;t++)qf.length?qf.push({id:e[t].quality+"p"+sm(e[t].frame_rate),url:e[t].source}):qf.push({id:e[t].quality+"p"+sm(e[t].frame_rate)+" (source)",url:e[t].source});Xf=jf,dm()}function sm(e){return 40<e?60:""}function dm(){window.clearInterval(Tf),Vf=qf[Df=0].url,-1!==Ff.indexOf("source")&&(Ff="source");for(var e=0;e<vm();e++){if(qf[e].id===Ff){Vf=qf[Df=e].url;break}-1!==qf[e].id.indexOf(Ff)&&(Vf=qf[Df=e].url)}Hf=Ff,Zc&&console.log("PlayClip_onPlayer:",'\n\n"'+Vf+'"\n'),Xf=jf,mu&&Af&&Android.startVideoOffset(Vf,3,Jf?-1:Android.gettime()),Jf=!1,rm()}function rm(){eh&&!ag()&&tg(),mu&&(Lf=0,Nh=1+Zf/1e3,Kf=!1,window.clearInterval(Tf),Tf=window.setInterval(lm,Uh))}function cm(){document.hidden&&_m()}function lm(){mu&&(zf=Android.gettime()),Af&&Pf===zf&&!Mp()?++Lf>Nh&&(Kf&&$f&&Df<vm()-1?Df++:!Kf&&$f&&Yf++,navigator.onLine?1<Yf?Cp(Yf,3,um):(ym(),dm(),$f=!0):kp(!1,3)):(Lf=Yf=0,$f=!1),Pf=zf}function um(e){if(!e){if(!(Df<vm()-1))return void kp(!1,3);Df++}Yf=0,ym(),dm(),$f=!0}function _m(){Af&&(qf=[],fm(),qp(),Bp())}function fm(){window.clearInterval(Tf),mu&&Android.stopVideo(3),Af=!1,Gc(),Op(),xM(),document.body.removeEventListener("keydown",Cm),document.removeEventListener("visibilitychange",cm),mm(),document.getElementById("scene2_pannel_0").style.display="none",document.getElementById("scene2_pannel_1").style.width="30%",document.getElementById("quality_name").style.width="77%",document.getElementById("quality_name").style.fontSize="87.5%",er=0}function mm(){yv=!1,vv=bv=0,Qp(),Ff=Hf,document.getElementById("scene_channel_panel").style.opacity="0",mu&&py(Android.gettime()/1e3,em,!0),Gu("progress_bar_jump_to",Ca),document.getElementById("progress_bar_steps").style.display="none",window.clearInterval(Xg)}function hm(){pm(),Ep(),Xg=window.setInterval(pm,1e3),qp(),ly(),gm(),ym(),document.getElementById("scene_channel_panel").style.opacity="1",bm()}function pm(){mu&&py(Android.gettime()/1e3,em,!yv)}function gm(){for(var e=Df=0;e<vm();e++){if(qf[e].id===Ff){Df=e;break}-1!==qf[e].id.indexOf(Ff)&&(Df=e)}}function vm(){return qf.length}function ym(){1===vm()?(document.getElementById("quality_arrow_up").style.opacity="0",document.getElementById("quality_arrow_down").style.opacity="0"):Df?Df===vm()-1?(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="0.2"):(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="1"):(document.getElementById("quality_arrow_up").style.opacity="0.2",document.getElementById("quality_arrow_down").style.opacity="1"),-1!==(Ff=qf[Df].id).indexOf("source")?Au("quality_name",Ff.replace("source",ye)):Au("quality_name",Ff)}function bm(){Am=window.setTimeout(mm,5e3+xv)}function wm(){document.getElementById("scene2_pannel_1").style.width="18%",document.getElementById("quality_name").style.width="60%",document.getElementById("quality_name").style.fontSize="72%",Au("open_vod_text",Wf?ln:un),document.getElementById("scene2_pannel_0").style.display="inline-block"}function km(){Wf?(Ml.vodOffset=er,fm(),document.body.addEventListener("keydown",Oy,!1),mg(),Z_(Gv)):(wh=!0,Rp(_n),window.setTimeout(function(){wh=!1,Fp()},2e3))}function Cm(e){if(Xf!==jf)switch(e.keyCode){case Na:Vp()?(qp(),_m()):Dp()}else switch(e.keyCode){case La:SM()?Dm&&!eM&&(RM(),Dm--,OM()):Rm&&!Yp()&&ag()?(Tm++,lg()):Yp()?(Qp(),Sv?(pg(),5<++bh&&(bh=0),hg()):(wy(-1,em),xv=2500),bm()):bg()?(Eg(),Cg(),--Sh<0&&(Sh=3),kg()):hm();break;case Oa:SM()?Dm<oM-1&&!eM&&(RM(),Dm++,OM()):!Rm||Yp()||bg()?Yp()?(Qp(),Sv?(pg(),--bh<0&&(bh=5),hg()):(wy(1,em),xv=2500),bm()):bg()?(Eg(),Cg(),3<++Sh&&(Sh=0),kg()):hm():kf("ChatEnable",(eh=ag()||bg()?(ng(),!1):(tg(),!0))?"true":"false");break;case Ba:bg()?Eg():Yp()?(2===Sv&&1!==bh?(Sv--,uy()):1===Sv?(Sv--,uy()):0<Df&&1===bh&&(Df--,ym()),Qp(),bm()):SM()?SM()?BM():hm():IM();break;case Ga:bg()?Eg():Yp()?(Sv?1===Sv?(Sv++,uy()):Df<vm()-1&&1===bh&&(Df++,ym()):(Sv++,uy()),Qp(),bm()):SM()?xM():Rm&&ag()?(4<++Gm?cg(!(Gm=1)):4===Gm&&cg(!0),dg(!0)):hm();break;case Aa:bg()?Sg(3):Yp()?Sv?1===Sv?(Wf&&Ml.Play_ChatForceDisable&&(Mp()?Bc(uc):Oc()),bg()||fg(3)):Bg(3):(Qp(),bm(),vv&&gy()):SM()?(fm(),V_(Dm,fM,Vg)):hm();break;case Na:Yp()?mm():SM()?xM():Vp()?(qp(),_m()):Dp();break;case Pa:case xa:case Ta:Wf&&!Ml.Play_ChatForceDisable&&(Mp()?Bc(uc):Oc()),bg()||fg(3)}}var Mm,Em,Sm,Im,xm,Pm,Tm=0,Lm=Tm,Bm=-5,Om=.55,Gm=3,Am=null,Nm="source",Um=Nm,Rm=!0,Fm=!1,Hm="",Dm=0,qm=2e3,Vm=0,Jm=1,zm=2,Xm=0,jm=null,Wm=0,Ym=0,Km=0,$m="",Zm=[],Qm=0,eh=!1,th=null,nh=null,ah=null,ih="",oh=0,sh=5,dh=0,rh=5,ch=0,lh=!1,uh=null,_h=!1,fh=0,mh=null,hh=0,ph=0,gh=!1,vh=!1,yh=!1,bh=1,wh=!1,kh=!1,Ch=1e4,Mh=2e3,Eh="",Sh=0,Ih=3,xh=null,Ph="",Th=0,Lh=0,Bh="",Oh=!0,Gh=!1,Ah=!1,Nh=7,Uh=1e3,Rh=0,Fh="",Hh=[],Dh=[{top:51.8,left:75.1,sizeOffset:[31,16,0,0]},{top:33,left:75.1,sizeOffset:[12.5,0,-6.25,0]},{top:.2,left:75.1,sizeOffset:[0,0,0,0]},{top:.2,left:38.3,sizeOffset:[0,0,0,0]},{top:.2,left:.2,sizeOffset:[0,0,0,0]},{top:33,left:.2,sizeOffset:[12.5,0,-6.25,0]},{top:51.8,left:.2,sizeOffset:[31,16,0,0]},{top:51.8,left:38.3,sizeOffset:[31,16,0,0]}],qh=[0,0,0,1,2,2,2,1],Vh=[[0,1,2,2,2,1,0,0],[7,3,3,3,3,3,7,7],[6,5,4,4,4,5,6,6]],Jh=[{containerHeight:17,percentage:"12.5%",dialogTop:15},{containerHeight:32,percentage:"25%",dialogTop:30},{containerHeight:48,percentage:"50%",dialogTop:50},{containerHeight:99.6,percentage:"100%",dialogTop:115}],zh=1,Xh=["chat_extra_small","chat_size_small","chat_size_default","chat_size_biger","chat_size_bigest"];function jh(){xm=document.getElementById("chat_container"),Pm=document.getElementById("inner_progress_bar"),Tm=Cf("ChatPositionsValue",0),Gm=Cf("ChatSizeValue",3),eh=Ef("ChatEnable",!1),Rm=Ef("Play_isFullScreen",!0),dg(!1),rg(!1),Yh()}function Wh(e){e?void 0!==Mm&&(Tm=Mm,Gm=Sm,(eh=Em)||ng(),dg(!1)):(Mm=Tm,Em=eh,Sm=Gm,Tm=0,tg(),Gm=4,cg(eh=!0),dg(!1),$r&&($r.scrollTop=$r.scrollHeight)),kf("Play_isFullScreen",Rm)}function Yh(){zh=Rk("chat_font_size");for(var e=0;e<Xh.length;e++)Ou("chat_inner_container",Xh[e]);Bu("chat_inner_container",Xh[zh])}function Kh(){Np(),Gu("stream_live_icon",'<div style="vertical-align: middle; display: inline-block"><i class="icon-circle" style="color: red; font-size: 105%; "></i></div><div style="vertical-align: middle; display: inline-block">'+Ca+_.toUpperCase()+"</div>"),b_("stream_info_title"),Wf=!(kh=!1),sp(document.getElementById("stream_info_icon"),vu),Ml.Play_isHost?Au("stream_info_name",Ml.Play_DisplaynameHost):Au("stream_info_name",Ml.Play_selectedChannelDisplayname),Ml.Play_WasPlaying=1,__(),Fm=Ml.Play_isHost,Ml.Play_isHost=!1,Gh=!1,Tu("scene_channel_panel_bottom"),Lh=Th=0,Au("stream_watching_time",v+Ip(0)),ih=xp(0),Au("stream_live_time",y+ih+b),Tu("chat_box"),Pu("progress_pause_holder"),Ig(1),Bm=-5,hh=ph=Rh=0,window.clearInterval(mh),vh=!1,Ch=3e3,Oh=!(dh=0),Xm=Vm,yh=!(lh=!(Km=Ym=Wm=_h=0)),document.addEventListener("visibilitychange",Zh,!1),ep(),dp(),document.body.removeEventListener("keyup",N_),jm=window.setInterval(ap,6e4)}function $h(e){Rp(e)}function Play_CheckResume(){lh&&Zh(),sv&&Vv(),Af&&(_m(),window.clearInterval(Tf))}function Zh(){document.hidden?bg()?(qp(),ng(),Tp()):(Op(),yh=!1,jr(),window.clearInterval(jm)):(lh=!0,Xp(),lh&&(Np(),Ch=3e3,Gh=!(dh=0),kh?ap():ep(),Xm=Vm,ch=0,navigator.onLine?dp():Im=window.setInterval(Qh,100),jm=window.setInterval(ap,6e4)))}function Qh(){(navigator.onLine||200<ch)&&(window.clearInterval(Im),dp()),ch++}function ep(){var e="https://api.twitch.tv/kraken/streams/"+Ml.Play_selectedChannel_id,t=new XMLHttpRequest;t.open("GET",e,!0),t.timeout=Ch,t.setRequestHeader(tu,iu),t.setRequestHeader(eu,Ql),t.ontimeout=function(){},t.onreadystatechange=function(){4===t.readyState&&(200===t.status?tp(JSON.parse(t.responseText)):np())},t.send(null)}function tp(e){null!==e.stream&&(Au("stream_info_name",Fm?Ml.Play_DisplaynameHost:Ml.Play_selectedChannelDisplayname),Ml.Play_selectedChannel_id=e.stream.channel._id,Gu("stream_info_title",LI.parse(e.stream.channel.status)),Ml.Play_gameSelected=e.stream.game,Eh=", ["+e.stream.channel.language.toUpperCase()+"]",Au("stream_info_game",g+Ml.Play_gameSelected+h+a_(e.stream.viewers)+" "+q+Eh),Ml.Play_selectedChannelLogo=e.stream.channel.logo,kh=!0,sp(document.getElementById("stream_info_icon"),Ml.Play_selectedChannelLogo),ih=e.stream.created_at,ao()?(Wa=!0,Ya=Ml.Play_selectedChannel_id,li()):Ap())}function np(){dh<rh&&(Ch+=500,window.setTimeout(function(){lh&&ep()},750)),dh++}function ap(){var e="https://api.twitch.tv/kraken/streams/"+Ml.Play_selectedChannel_id;Mh=3e3;var t=new XMLHttpRequest;t.ontimeout=function(){},t.onreadystatechange=function(){4===t.readyState&&(200===t.status?(Rh=0,ip(JSON.parse(t.responseText))):op())},t.open("GET",e,!0),t.timeout=Mh,t.setRequestHeader(tu,iu),t.setRequestHeader(eu,Ql),t.send(null)}function ip(e){null!==e.stream&&(Gu("stream_info_title",LI.parse(e.stream.channel.status)),Ml.Play_gameSelected=e.stream.game,Au("stream_info_game",g+Ml.Play_gameSelected+h+a_(e.stream.viewers)+" "+q+Eh),kh||sp(document.getElementById("stream_info_icon"),e.stream.channel.logo))}function op(){Rh<rh?(window.setTimeout(function(){lh&&ap()},2500),Rh++):Rh=0}function sp(e,t){e.onerror=function(){this.src=vu,kh=!1},e.src=t}function dp(){oh=0,Mh=2e3+(Gh?3e3:0),rp()}function rp(){var e,t;if(e=Xm===Vm?"https://api.twitch.tv/api/channels/"+Ml.Play_selectedChannel+"/access_token"+(ao()&&Di[Ml.Users_Position].access_token?"?oauth_token="+Di[Ml.Users_Position].access_token:""):"https://usher.ttvnw.net/api/channel/hls/"+Ml.Play_selectedChannel+".m3u8?&token="+encodeURIComponent(Wm.token)+"&sig="+Wm.sig+"&allow_source=true&allow_audi_only=true&fast_bread=true&allow_spectre=false",mu){if(!(t=Android.mreadUrl(e,Mh,1,null)))return void lp();200===(t=JSON.parse(t)).status?(oh=0,lh&&fp(t.responseText)):403===t.status?up():404===t.status?Gg():lp()}else(t=new XMLHttpRequest).open("GET",bu+e,!0),t.timeout=Mh,t.setRequestHeader(eu,Ql),t.ontimeout=function(){},t.onreadystatechange=function(){4===t.readyState&&(200===t.status?(oh=0,lh&&fp(t.responseText)):403===t.status?(cp(t),$c?_p():up()):404===t.status?(cp(t),$c?_p():Gg()):(cp(t),lp()))},t.send(null)}function cp(e){Zc&&(console.log(e.status),console.log(e.responseText))}function lp(){lh&&Oh&&(++oh<sh+(Gh?8:0)?(Mh+=250,Gh?window.setTimeout(rp,500):rp()):$c?_p():Gg())}function up(){Up(),Rp(Jn),window.setTimeout(function(){lh&&Gg()},4e3)}function _p(){Zm=[{id:"1080p60(Source)",band:"(10.00Mbps)",url:"http://fake"}],Xm=zm,lh&&gp()}function fp(e){Xm===Vm?(Wm=JSON.parse(e),Xm=Jm,dp()):Xm===Jm&&(Zm=mp(Ym=e),Xm=zm,lh&&gp())}function mp(e){for(var t,n=[],a="",i=1,o=pp(e),s=0;s<o.length;s++)a=o[s].split('NAME="')[1].split('"')[0],t=hp(o[s].split("BANDWIDTH=")[1].split(",")[0]),n.length?n[s-i].id!==a&&n[s-i].id!==a+" (source)"?n.push({id:a,band:t,url:o[s].split("\n")[2]}):i++:(-1===a.indexOf("ource")&&(a+=" (source)"),n.push({id:a,band:t,url:o[s].split("\n")[2]}));return n}function hp(e){return 0<(e=parseInt(e))?" ("+parseFloat(e/1e6).toFixed(2)+"Mbps)":""}function pp(e){for(var t,n=[],a=/#EXT-X-MEDIA:(.)*\n#EXT-X-STREAM-INF:(.)*\n(.)*/g;t=a.exec(e);)n.push(t[0]);return n}function gp(){window.clearInterval(mh),$m=Zm[Qm=0].url,-1!==Nm.indexOf("source")&&(Nm="source");for(var e=0;e<sg();e++){if(Zm[e].id===Nm){$m=Zm[Qm=e].url;break}-1!==Zm[e].id.indexOf(Nm)&&($m=Zm[Qm=e].url)}Um=Nm,Xm=zm,Zc&&console.log("Play_onPlayer:",'\n\n"'+$m+'"\n'),mu&&lh&&Android.startVideo($m,1),vp()}function vp(){Ah=!1,eh&&!ag()&&tg(),yh=!0,yp(),mu&&(hh=0,Nh=1+qm/1e3,gh=!1,window.clearInterval(mh),mh=window.setInterval(bp,Uh))}function yp(){Ml.Play_ChatForceDisable?Tr():Hc()}function bp(){var e=!Mp();mu&&(Th=Android.gettime()),lh&&fh===Th&&e?Nh<++hh&&(gh&&vh&&Qm<sg()-1?Qm++:!gh&&vh&&ph++,navigator.onLine?1<ph?Cp(ph,1,wp):(og(),gp(),vh=!0):kp(!1,1)):(hh=ph=0,vh=!1),fh=Th,e&&Lh++}function wp(e){if(!e){if(!(Qm<sg()-1))return void Gg();Qm++}ph=0,og(),gp(),vh=!0}function kp(e,t){Ml.Play_isHost=e,Ig(t),Og(t)}function Cp(e,t,n){var a=new XMLHttpRequest;a.timeout=1e3,a.open("GET","https://static-cdn.jtvnw.net/jtv-static/404_preview-10x10.png?"+Math.random(),!0),a.onreadystatechange=function(){4===a.readyState&&(200===a.status?n(2<e):12<e&&kp(!1,t))},a.send(null)}function Mp(){return!!mu&&!Android.getPlaybackState()}function Ep(){var e=Q_();Au("stream_clock",e),Au("label_clock",e)}function Sp(e){return e<10?"0"+e:e}function Ip(e){var t,n,a;return t=Sp(parseInt(e)%60),n=Sp((e=Math.floor(e/60))%60),a=Sp(e=Math.floor(e/60)),e?a+":"+n+":"+t:n+":"+t}function xp(e){var t,n,a;return t=Sp(parseInt(e/1e3)%60),n=Sp((e=Math.floor(e/1e3/60))%60),a=Sp(e=Math.floor(e/60)),e?a+":"+n+":"+t:n+":"+t}function Pp(e){return xp((new Date).getTime()-new Date(e).getTime())}function Tp(){lh&&(Lp(),Ml.Play_WasPlaying=0,Bp())}function Lp(){mu&&Android.stopVideo(1),lh=!1,xM(),Gc(),Op(),Gp(),Ml.Play_selectedChannel_id=""}function Bp(){py(0,0),Tu("scene1"),Pu("scene2"),d_()}function Op(){Kp(),Xp(),Fp(),yg(),Fh="",Qm===sg()-1&&(Um=Zm[0].id),av===hy()-1&&(Yg=nv[0].id),Df===vm()-1&&(Hf=qf[0].id)}function Gp(){yh=!1,document.body.removeEventListener("keydown",Vg),document.removeEventListener("visibilitychange",Zh),jr(),window.clearInterval(jm),window.clearInterval(mh),wh=!1}function Ap(){Gu("fallow_text",Ca+Nt),Xa=!1}function Np(){mu?Android.mshowLoading(!0):Tu("dialog_loading_play")}function Up(){mu?Android.mshowLoading(!1):Pu("dialog_loading_play")}function Rp(e){Au("dialog_warning_play_text",e),Tu("dialog_warning_play")}function Fp(){Pu("dialog_warning_play")}function Hp(){return Lu("dialog_warning_play")}function Dp(){Vp()?qp():(Tu("play_dialog_exit"),th=window.setTimeout(Dp,3e3))}function qp(){window.clearTimeout(th),Pu("play_dialog_exit")}function Vp(){return Lu("play_dialog_exit")}function Jp(){window.clearTimeout(nh)}function zp(){window.clearTimeout(ah)}function Xp(){Jp(),zp(),Pu("play_dialog_simple_pause")}function jp(){Mp()?Wp()?(Pu("play_dialog_simple_pause"),ah=window.setTimeout(jp,8e3)):(Tu("play_dialog_simple_pause"),nh=window.setTimeout(jp,1500)):Xp()}function Wp(){return Lu("play_dialog_simple_pause")}function Yp(){return"1"===document.getElementById("scene_channel_panel").style.opacity}function Kp(){Qp(),document.getElementById("scene_channel_panel").style.opacity="0",Nm=Um,window.clearInterval(Xg)}function $p(){mg(),ig(),og(),Zp(),Xg=window.setInterval(Zp,1e3),Ep(),qp(),document.getElementById("scene_channel_panel").style.opacity="1",eg()}function Zp(){Au("stream_watching_time",v+Ip(Lh)),Au("stream_live_time",y+(-1===ih.indexOf("00:00")?Pp(ih):ih)+b)}function Qp(){window.clearTimeout(Am),xv=0}function eg(){Am=window.setTimeout(Kp,5e3)}function tg(){lg(),Tu("chat_container")}function ng(){Pu("chat_container")}function ag(){return Lu("chat_container")}function ig(){for(var e=Qm=0;e<sg();e++){if(Zm[e].id===Nm){Qm=e;break}-1!==Zm[e].id.indexOf(Nm)&&(Qm=e)}}function og(){1===sg()?(document.getElementById("quality_arrow_up").style.opacity="0",document.getElementById("quality_arrow_down").style.opacity="0"):Qm?Qm===sg()-1?(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="0.2"):(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="1"):(document.getElementById("quality_arrow_up").style.opacity="0.2",document.getElementById("quality_arrow_down").style.opacity="1"),-1!==(Nm=Zm[Qm].id).indexOf("source")?Au("quality_name",Nm.replace("source",ye)+Zm[Qm].band):Au("quality_name",Nm+Zm[Qm].band)}function sg(){return Zm.length}function dg(e){xm.style.height=Jh[Gm-1].containerHeight+"%",document.getElementById("play_chat_dialog").style.marginTop=Jh[Gm-1].dialogTop+"%",lg(),zr(),e&&ug(qn+Jh[Gm-1].percentage),window.setTimeout(function(){$r&&($r.scrollTop=$r.scrollHeight)},500),kf("ChatSizeValue",Gm)}function rg(e){xm.style.backgroundColor="rgba(0, 0, 0, "+Om+")",e&&ug(Vn+(100*Om).toFixed(0)+"%")}function cg(e){Tm=e?qh[Lm=Tm]:Vh[Tm][Lm]}function lg(){var e=4===Gm;Tm<0?Tm=e?2:7:(e?2:7)<Tm&&(Tm=0),xm.style.top=(e?.2:Dh[Tm].top+Dh[Tm].sizeOffset[Gm-1])+"%",xm.style.left=Dh[Tm+(e?2:0)].left+"%",kf("ChatPositionsValue",Tm)}function ug(e){window.clearTimeout(uh),Au("play_chat_dialog_text",e),Tu("play_chat_dialog"),uh=window.setTimeout(_g,1e3)}function _g(){Pu("play_chat_dialog")}function fg(e){Mp()?(Xp(),mu&&Android.play(!0),Gu("pause_button",'<i class="strokedbig icon-pause" style="color: #FFFFFF; font-size: 180%;"></i>'),1===e?(Yp()&&Kp(),window.clearInterval(mh),mh=window.setInterval(bp,Uh)):2===e?(Yp()&&dy(),window.clearInterval(_v),_v=window.setInterval(ny,Uh)):3===e&&(Yp()&&mm(),window.clearInterval(Tf),Tf=window.setInterval(lm,Uh))):(window.clearInterval(mh),window.clearInterval(_v),window.clearInterval(Tf),Gu("pause_button",'<i class="strokedbig icon-play-1" style="color: #FFFFFF; font-size: 180%;"></i>'),mu&&Android.play(!1),jp())}function mg(){pg(),bh=1,hg()}function hg(){Bu("scene2_pannel_"+bh,"playbotton_focus")}function pg(){Ou("scene2_pannel_"+bh,"playbotton_focus")}function gg(){Xf=Kg=Xm=-1,ng(),Kp(),mm(),dy(),wh||Fp(),Up(),qp(),kg()}function vg(){Tu("dialog_end_stream")}function yg(){Pu("dialog_end_stream"),Eg(),wg()}function bg(){return Lu("dialog_end_stream")}function wg(){Cg(),Sh=0,kg()}function kg(){Bu("dialog_end_"+Sh,"dialog_end_icons_focus")}function Cg(){Ou("dialog_end_"+Sh,"dialog_end_icons_focus")}function Mg(e){1===e?Ph=Ml.Play_selectedChannelDisplayname+" "+_:2===e?Ph=Ml.Main_selectedChannelDisplayname+an:3===e&&(Ph=Ml.Main_selectedChannelDisplayname+Ft),Gu("dialog_end_stream_text",Ph+P+ra+sn+Ih+"..."),bg()?(Kg=Xm=zm,Xf=jf,-1===--Ih?(Gu("dialog_end_stream_text",Ph+P+ra+sn+"0..."),qp(),ng(),1===e?Tp():2===e?iy():3===e&&_m()):xh=window.setTimeout(function(){Mg(e)},1e3)):xh=window.setTimeout(function(){Mg(e)},50)}function Eg(){window.clearTimeout(xh),Gu("dialog_end_stream_text",Ph+P+ra+dn)}function Sg(e){var t=!0;Sh?1===Sh?Ml.Play_isHost?(Ml.Play_DisplaynameHost=Ml.Play_selectedChannelDisplayname+ae,Ml.Play_selectedChannel=Bh.target_login,Ml.Play_selectedChannelDisplayname=Bh.target_display_name,Ml.Play_DisplaynameHost=Ml.Play_DisplaynameHost+Ml.Play_selectedChannelDisplayname,Lp(),document.body.addEventListener("keydown",Vg,!1),Ml.Play_selectedChannel_id=Bh.target_id,Z_(Kh)):km():2===Sh?xg(e):3===Sh&&Tg(e):2===e?nv.length?(mv=!(Lv=!0),ey(),Xp(),oc=Cv=0,fc()):(t=!1,Rp(aa),window.setTimeout(function(){Fp()},2e3)):3===e&&(qf.length?(Kf=!(Jf=!0),dm(),Xp(),Wf?(Cv=0,oc=er,fc()):Fc()):(t=!1,Rp(aa),window.setTimeout(function(){Fp()},2e3))),1!==Sh&&3===Sh&&""===Ml.Play_gameSelected&&(t=!1),t&&yg()}function Ig(e){e?1===e?(Cg(),Sh=2,kg(),document.getElementById("dialog_end_0").style.display="none",document.getElementById("dialog_end_1").style.display="none"):2===e?(wg(),document.getElementById("dialog_end_0").style.display="inline-block",document.getElementById("dialog_end_1").style.display="none"):3===e&&(wg(),document.getElementById("dialog_end_0").style.display="inline-block",document.getElementById("dialog_end_1").style.display="inline-block",Au("dialog_end_vod_text",Wf?ln:un)):(Cg(),Sh=1,kg(),document.getElementById("dialog_end_0").style.display="none",document.getElementById("dialog_end_1").style.display="inline-block",Au("dialog_end_vod_text",hn))}function xg(e){Ml.Main_BeforeChannelisSet||Ml.Main_Go===_l||Ml.Main_Go===fl||(Ml.Main_BeforeChannel=Ml.Main_BeforeAgameisSet&&Ml.Main_Go!==il?Ml.Main_BeforeAgame:Ml.Main_Go,Ml.Main_BeforeChannelisSet=!0),m_(Ml.Main_Go),Ml.Main_Go=ul,1===e?(Ml.Main_selectedChannel_id=Ml.Play_selectedChannel_id,Ml.Main_selectedChannel=Ml.Play_selectedChannel,Ml.Main_selectedChannelDisplayname=Ml.Play_selectedChannelDisplayname,zs=Xa,ng(),Tp()):2===e?iy():3===e&&_m()}function Pg(e){Ml.Search_isSearching||(Ml.Main_BeforeSearch=Ml.Main_Go),m_(Ml.Main_Go),Ml.Main_Go=rl,1===e?(ng(),Tp()):2===e?iy():3===e&&_m()}function Tg(e){if(""===Ml.Play_gameSelected)return wh=!0,Rp(Qn),void window.setTimeout(function(){wh=!1,Fp()},2e3);Ml.Main_BeforeAgameisSet||Ml.Main_Go===yl||Ml.Main_Go===bl||(Ml.Main_BeforeAgame=Ml.Main_BeforeChannelisSet&&Ml.Main_Go!==ul&&Ml.Main_Go!==_l&&Ml.Main_Go!==fl?Ml.Main_BeforeChannel:Ml.Main_Go,Ml.Main_BeforeAgameisSet=!0),m_(Ml.Main_Go),Ml.Main_Go=il,xo=!1,Ml.Main_gameSelected=Ml.Play_gameSelected,ng(),1===e?Tp():2===e?iy():3===e&&_m()}function Lg(){ao()&&Di[Ml.Users_Position].access_token?Xa?vi():hi():(Rp(Ut),wh=!0,window.setTimeout(function(){Fp(),wh=!1},2e3))}function Bg(e){bh?1===bh?(1===e?(gp(),Kp()):2===e?(mv=!1,ey(),dy()):3===e&&(Kf=!1,dm(),mm()),Xp()):2===bh?(Ya=1===e?Ml.Play_selectedChannel_id:Ml.Main_selectedChannel_id,Lg(),Qp(),1===e?eg():2===e?_y():3===e&&bm()):3===bh?Tg(e):4===bh?xg(e):5===bh&&Pg(e):km()}function Play_PannelEndStart(e){1===e?(window.clearInterval(mh),Gg()):Og(e)}function Og(e){window.clearInterval(mh),window.clearInterval(Tf),window.clearInterval(_v),gg(),Ih=3,Mg(e),vg(e)}function Gg(){Np(),Xm=-1,oh=0,Mh=2e3,jr(),window.clearInterval(jm),window.clearInterval(mh),""!==Ml.Play_selectedChannel_id?Rg():Ag()}function Ag(){var e="https://api.twitch.tv/kraken/users?login="+Ml.Play_selectedChannel,t=new XMLHttpRequest;t.open("GET",e,!0),t.timeout=Mh,t.setRequestHeader(eu,Ql),t.setRequestHeader(tu,iu),t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void Ng(JSON.parse(t.responseText).users[0]);Ug()}},t.send(null)}function Ng(e){void 0!==e?(Ml.Play_selectedChannel_id=e._id,oh=0,Mh=2e3,Rg()):Og(1)}function Ug(){++oh<sh?(Mh+=250,Ag()):kp(!1,1)}function Rg(){var e,t="https://tmi.twitch.tv/hosts?include_logins=1&host="+encodeURIComponent(Ml.Play_selectedChannel_id);if(mu){if(!(e=Android.mreadUrl(t,Mh,1,null)))return void Fg();200===(e=JSON.parse(e)).status?Hg(e.responseText):Fg()}else(e=new XMLHttpRequest).open("GET",bu+t,!0),e.timeout=Mh,e.setRequestHeader(eu,Ql),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void Hg(e.responseText);Fg()}},e.send(null)}function Fg(){++oh<sh?(Mh+=250,Rg()):kp(!1,1)}function Hg(e){void 0!==(Bh=JSON.parse(e).hosts[0]).target_login?(wh=!0,Rp(Ml.Play_selectedChannelDisplayname+mn+ae+Bh.target_display_name),window.setTimeout(function(){wh=!1},4e3),Ig(0),Ml.Play_isHost=!0):(Ig(1),Ml.Play_isHost=!1),Og(1)}function Dg(){Xa?(Gu("fallow_heart",'<i class="icon-heart strokicon" style="color: #00b300; font-size: 210%;"></i>'),Gu("fallow_text",Ca+Tt)):(Gu("fallow_heart",'<i class="icon-heart-o strokicon" style="color: #FFFFFF; font-size: 210%;"></i>'),Gu("fallow_text",Ca+Lt))}function qg(e){bg()&&!Vp()?(Eg(),Dp()):SM()?xM():Yp()&&!xy()?e?dy():Kp():xy()&&Vp()?(Iy(),oy(!1),Bp()):Vp()?(qp(),ng(),e?iy():Tp()):(Hp()&&Fp(),Dp())}function Vg(e){if(Xm!==zm)switch(e.keyCode){case Na:Vp()?(qp(),ng(),Tp()):Dp()}else switch(e.keyCode){case La:SM()?Dm&&!eM&&(RM(),Dm--,OM()):Rm&&!Yp()&&ag()?(Tm++,lg()):Yp()?(pg(),5<++bh&&(bh=1),hg(),Qp(),eg()):bg()?(Eg(),Cg(),--Sh<(Ml.Play_isHost?1:2)&&(Sh=3),kg()):$p();break;case Oa:SM()?Dm<oM-1&&!eM&&(RM(),Dm++,OM()):!Rm||Yp()||bg()?Yp()?(pg(),--bh<1&&(bh=5),hg(),Qp(),eg()):bg()?(Eg(),Cg(),3<++Sh&&(Sh=Ml.Play_isHost?1:2),kg()):$p():kf("ChatEnable",(eh=ag()||bg()?(ng(),!1):(tg(),!0))?"true":"false");break;case Ba:Yp()?(0<Qm&&1===bh&&(Qm--,og()),Qp(),eg()):!SM()&&ao()?IM():bg()?Eg():SM()&&BM();break;case Ga:Yp()?(Qm<sg()-1&&1===bh&&(Qm++,og()),Qp(),eg()):SM()?xM():Rm&&ag()?(4<++Gm?cg(!(Gm=1)):4===Gm&&cg(!0),dg(!0)):bg()?Eg():$p();break;case Aa:bg()?Sg(1):Yp()?Bg(1):SM()?Ml.Play_selectedChannel!==JSON.parse(document.getElementById(fM[8]+Dm).getAttribute(ru))[0]?(Lp(),V_(Dm,fM,Vg)):PM():$p();break;case Na:qg(!1);break;case Pa:case xa:case Ta:bg()||fg(1)}}var Jg,zg,Xg,jg,Wg="source",Yg=Wg,Kg=0,$g=null,Zg=0,Qg=0,ev=0,tv="",nv=[],av=0,iv=0,ov=5,sv=!1,dv=2e3,rv=0,cv=5,lv=1e4,uv=0,_v=null,fv=0,mv=!1,hv=0,pv=!1,gv=!1,vv=0,yv=!1,bv=0,wv=2e3,kv=!1,Cv=0,Mv={},Ev=0,Sv=0,Iv=!0,xv=0,Pv=0,Tv=0,Lv=!1,Bv=[0,10,30,60,120,300,600,900,1200,1800],Ov=!1;function Gv(){Np(),yg(),Cv=0,Au("stream_live_time",""),Au("stream_watching_time",""),Au("progress_bar_current_time",Ip(0)),sc=A+".",Gu("pause_button",'<i class="strokedbig icon-pause" style="color: #FFFFFF; font-size: 180%;"></i>'),Pu("progress_pause_holder"),Pv=0,yy((Hh=Bv)[1]),Kg=Vm,Wf=!0,er=0,Ml.Play_isHost=!1,Ml.vodOffset?(Nv(),Hv()):(Iv&&""!==Ml.Main_selectedChannel_id?(sp(document.getElementById("stream_info_icon"),Ml.Main_selectedChannelLogo),Mv["#"+Ml.ChannelVod_vodId]||fc(),ao()?(Ya=Ml.Main_selectedChannel_id,Wa=!0,li()):Ap()):(Nv(),Uv()),Au("stream_info_name",Ml.Main_selectedChannelDisplayname),Gu("stream_info_title",Kd),Gu("stream_info_game",$d+", ["+Jd.toUpperCase()+"]"),Au("stream_live_icon",Zd)),Mv["#"+Ml.ChannelVod_vodId]&&!Ml.vodOffset?(Up(),Sy()):Av()}function Av(){Tu("chat_box"),window.setTimeout(function(){Tu("scene_channel_panel_bottom"),Gu("pause_button",'<i class="strokedbig icon-pause" style="color: #FFFFFF; font-size: 180%;"></i>'),Tu("progress_pause_holder")},1e3),Au("progress_bar_duration",Ip(Dd)),Ml.Play_WasPlaying=2,__(),jg=window.setInterval(zv,6e4),S_(Fh),fv=hv=0,window.clearInterval(_v),pv=!1,yv=wh=kv=!(Bm=-13),ev=Qg=Zg=bv=0,document.addEventListener("visibilitychange",Vv,!1),Ov=!(sv=!(gv=!1)),Xv(),Ig(2),document.body.removeEventListener("keyup",N_)}function Nv(){rv=0,cv=5,lv=1e4}function Uv(){var e="https://api.twitch.tv/kraken/users?login="+encodeURIComponent(Ml.Main_selectedChannel),t=new XMLHttpRequest;t.open("GET",e,!0),t.timeout=lv,t.setRequestHeader(eu,Ql),t.setRequestHeader(tu,iu),t.ontimeout=function(){},t.onreadystatechange=function(){4===t.readyState&&(200===t.status?Rv(JSON.parse(t.responseText).users[0]):Fv())},t.send(null)}function Rv(e){void 0!==e?(Ml.Main_selectedChannelLogo=e.logo,Ml.Main_selectedChannel_id=e._id,Mv["#"+Ml.ChannelVod_vodId]||fc(),ao()?(Ya=Ml.Main_selectedChannel_id,Wa=!0,li()):Ap()):(Ml.Main_selectedChannelLogo=vu,Ml.Main_selectedChannel_id=""),sp(document.getElementById("stream_info_icon"),Ml.Main_selectedChannelLogo)}function Fv(){++rv<cv?(lv+=500,window.setTimeout(function(){sv&&Uv()},750)):zg=window.setTimeout(Uv,2500)}function Hv(){var e="https://api.twitch.tv/kraken/videos/"+Ml.ChannelVod_vodId,t=new XMLHttpRequest;t.open("GET",e,!0),t.timeout=lv,t.setRequestHeader(eu,Ql),t.setRequestHeader(tu,iu),t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void qv(t.responseText);Dv()}},t.send(null)}function Dv(){++rv<cv&&(lv+=2e3,Hv())}function qv(e){e=JSON.parse(e),Gu("stream_info_title",LI.parse(e.title)),Gu("stream_info_game",en+g+e.game+", "+a_(e.views)+D+", ["+e.language.toUpperCase()+"]"),Au("stream_live_icon",F+v_(e.created_at)),Au("progress_bar_duration",Ip(Dd=parseInt(e.length))),Cv=1e3*Ml.vodOffset,py(Ml.vodOffset,Dd,!0),Ml.Main_selectedChannelDisplayname=e.channel.display_name,Au("stream_info_name",Ml.Main_selectedChannelDisplayname),Ml.Main_selectedChannelLogo=e.channel.logo,sp(document.getElementById("stream_info_icon"),Ml.Main_selectedChannelLogo),Ml.Main_selectedChannel_id=e.channel._id,Ml.Main_selectedChannel=e.channel.name,ao()?(Wa=!0,Ya=Ml.Main_selectedChannel_id,li()):Ap(),S_(e.increment_view_count_url)}function Vv(){document.hidden?bg()?(qp(),ng(),iy()):(zv(),ky(),Oc(),Op(),window.clearInterval(_v),window.clearInterval(jg)):(sv=!0,Xp(),sv&&(Np(),ch=ch=0,navigator.onLine?ty():Im=window.setInterval(Jv,100),Bc(uc),Ig(2),jg=window.setInterval(zv,6e4)))}function Jv(){(navigator.onLine||200<ch)&&(window.clearInterval(Im),Kg=Vm,Xv()),ch++}function zv(){Ml.vodOffset=mu?parseInt(Android.gettime()/1e3):0,__(),Ml.vodOffset=0}function Xv(){iv=0,wv=2e3,jv()}function jv(){var e,t;if(e=Kg===Vm?"https://api.twitch.tv/api/vods/"+Ml.ChannelVod_vodId+"/access_token"+(ao()&&Di[Ml.Users_Position].access_token?"?oauth_token="+Di[Ml.Users_Position].access_token:""):"https://usher.ttvnw.net/vod/"+Ml.ChannelVod_vodId+".m3u8?&nauth="+encodeURIComponent(Zg.token)+"&nauthsig="+Zg.sig+"&allow_source=true&allow_audi_only=true&allow_spectre=false",mu){if(!(t=Android.mreadUrl(e,Mh,1,null)))return void Wv();200===(t=JSON.parse(t)).status?(iv=0,sv&&Kv(t.responseText)):Wv()}else(t=new XMLHttpRequest).open("GET",bu+e,!0),t.timeout=wv,t.setRequestHeader(eu,Ql),t.ontimeout=function(){},t.onreadystatechange=function(){4===t.readyState&&(200===t.status?(iv=0,sv&&Kv(t.responseText)):Wv())},t.send(null)}function Wv(){if(sv){var e;if(Zg.token&&(e=JSON.parse(Zg.token)),e&&0!==JSON.parse(Zg.token).chansub.restricted_bitrates.length)return void $v();++iv<ov?(wv+=250,jv()):$c?Yv():(Up(),Og(2))}}function Yv(){nv=[{id:"1080p60(Source)",band:"(10.00Mbps)",url:"http://fake"}],Kg=zm,sv&&ey()}function Kv(e){Kg===Vm?(Zg=JSON.parse(e),Kg=Jm,Xv()):Kg===Jm&&(nv=mp(Qg=e),Kg=zm,sv&&ey())}function $v(){ao()&&Di[Ml.Users_Position].access_token?(Ya=Ml.Main_selectedChannel_id,wi()):(Up(),Rp(T+Bt),window.setTimeout(function(){sv&&iy()},4e3))}function Zv(){Up(),Rp(T+Ot),window.setTimeout(function(){sv&&iy()},4e3)}function Qv(){Ov?(Up(),Rp(T+Gt),window.setTimeout(function(){sv&&iy()},4e3)):(Ov=!0,Kg=Vm,Xv())}function ey(){window.clearInterval(_v),tv=nv[av=0].url,-1!==Wg.indexOf("source")&&(Wg="source");for(var e=0;e<hy();e++){if(nv[e].id===Wg){tv=nv[av=e].url;break}-1!==nv[e].id.indexOf(Wg)&&(tv=nv[av=e].url)}Yg=Wg,ty()}function ty(){Zc&&console.log("PlayVod_onPlayer:",'\n\n"'+tv+'"\n'),Ml.vodOffset?(oc=Ml.vodOffset,fc(),mu&&sv&&Android.startVideoOffset(tv,2,Lv?-1:1e3*Ml.vodOffset),Ml.vodOffset=0):mu&&sv&&Android.startVideoOffset(tv,2,Lv?-1:Android.gettime()),Lv=!1,eh&&!ag()&&tg(),mu&&(fv=0,Nh=3+dv/1e3,mv=!1,window.clearInterval(_v),_v=window.setInterval(ny,Uh))}function ny(){mu&&(Cv=Android.gettime()),sv&&uv===Cv&&!Mp()?++fv>Nh&&(mv&&pv&&av<hy()-1?av++:!mv&&pv&&hv++,navigator.onLine?1<hv?Cp(hv,2,ay):(my(),ey(),pv=!0):kp(!1,2)):(fv=hv=0,pv=!1),uv=Cv}function ay(e){if(!e){if(!(av<hy()-1))return void kp(!1,2);av++}hv=0,my(),ey(),pv=!0}function iy(){sv&&(nv=[],oy(!0),Bp())}function oy(e){e&&ky(),mu&&Android.stopVideo(2),sv=!1,window.clearInterval(jg),window.clearInterval(zg),Ml.Play_WasPlaying=0,Iv=!0,Gc(),xM(),Op(),sy()}function sy(){document.body.removeEventListener("keydown",Oy),document.removeEventListener("visibilitychange",Vv),Ml.vodOffset=0,window.clearInterval($g),window.clearInterval(_v),Dd=0}function dy(){yv=!1,vv=bv=0,Qp(),document.getElementById("scene_channel_panel").style.opacity="0",mu&&py(Android.gettime()/1e3,Dd,!0),Gu("progress_bar_jump_to",Ca),document.getElementById("progress_bar_steps").style.display="none",Wg=Yg,window.clearInterval(Xg)}function ry(e){cy(),Ep(),qp(),Xg=window.setInterval(cy,1e3),e&&(ly(),fy(),my(),_y()),document.getElementById("scene_channel_panel").style.opacity="1"}function cy(){mu&&py(Android.gettime()/1e3,Dd,!yv)}function ly(){Sv=Mp()?1:0,uy()}function uy(){Sv?1===Sv?(Bu("pause_button","progress_bar_div_focus"),Ou("progress_bar_div","progress_bar_div_focus"),pg(),Gu("progress_bar_jump_to",Ca),document.getElementById("progress_bar_steps").style.display="none"):2===Sv&&(Ou("pause_button","progress_bar_div_focus"),Ou("progress_bar_div","progress_bar_div_focus"),hg(),Gu("progress_bar_jump_to",Ca),document.getElementById("progress_bar_steps").style.display="none"):(Ou("pause_button","progress_bar_div_focus"),Bu("progress_bar_div","progress_bar_div_focus"),pg(),vv&&(by(),document.getElementById("progress_bar_steps").style.display="inline-block"))}function _y(){Am=window.setTimeout(dy,5e3+xv)}function fy(){for(var e=av=0;e<hy();e++){if(nv[e].id===Wg){av=e;break}-1!==nv[e].id.indexOf(Wg)&&(av=e)}}function my(){1===hy()?(document.getElementById("quality_arrow_up").style.opacity="0",document.getElementById("quality_arrow_down").style.opacity="0"):av?av===hy()-1?(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="0.2"):(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="1"):(document.getElementById("quality_arrow_up").style.opacity="0.2",document.getElementById("quality_arrow_down").style.opacity="1"),-1!==(Wg=nv[av].id).indexOf("source")?Au("quality_name",Wg.replace("source",ye)+nv[av].band):Au("quality_name",Wg+nv[av].band)}function hy(){return nv.length}function py(e,t,n){Au("progress_bar_current_time",Ip(e)),n&&(Pm.style.width=e/t*100+"%")}function gy(){Xp(),bg()||(Kf=mv=!1,sv?(mu&&Android.startVideoOffset(tv,2,0<Tv?1e3*Tv:-1),oc=Tv):(oc=er,mu&&Android.startVideoOffset(Vf,3,0<Tv?1e3*Tv:-1)),Wf&&fc()),Gu("progress_bar_jump_to",Ca),document.getElementById("progress_bar_steps").style.display="none",yv=!1,Tv=vv=bv=0}function vy(){Pv=bv=0,yy(Hh[1])}function yy(e){vv&&!Sv&&(document.getElementById("progress_bar_steps").style.display="inline-block"),60<Math.abs(e)?Au("progress_bar_steps",zn+e/60+jn):Au("progress_bar_steps",e?zn+e+Xn:zn+Hh[1]+Xn)}function by(){Au("progress_bar_jump_to",_e+" ("+(vv<0?"-":"")+Ip(Math.abs(vv))+")"+fe+Ip(Tv))}function wy(e,t){var n=mu?Android.gettime()/1e3:0;window.clearTimeout(Jg),yv=!0,bv<Hh.length-1&&Pv++%6==0&&bv++,vv+=Hh[bv]*e,Tv=n+vv,sv&&(Tv=10*Math.floor(Tv/10)),t<Tv?(vv=t-n-Hh[1],Tv=n+vv,Pv=bv=0):Tv<0&&(vv=0-n,Tv=Pv=bv=0),by(),Pm.style.width=Tv/t*100+"%",yy(Hh[bv]*e),Jg=window.setTimeout(vy,1e3)}function ky(){var e=mu?parseInt(Android.gettime()/1e3):0,t="#"+Ml.ChannelVod_vodId;300<e&&e<Dd-300?(Mv[t]&&delete Mv[t],Mv[t]=e,kf("PlayVod_VodIds",JSON.stringify(Mv))):Dd-300<e&&Mv[t]&&(delete Mv[t],kf("PlayVod_VodIds",JSON.stringify(Mv)))}function Cy(){Mv=Mf("PlayVod_VodIds",{});var e=My();250<e&&Ey(e-250)}function My(){var e=0;for(var t in Mv)Mv.hasOwnProperty(t)&&e++;return e}function Ey(e){var t=0;for(var n in Mv){if(!(t<e))break;delete Mv[n],t++}kf("PlayVod_VodIds",JSON.stringify(Mv))}function Sy(){Pu("scene_channel_panel_bottom"),ry(!1),Gu("dialog_vod_saved_text",Sn+xp(1e3*Mv["#"+Ml.ChannelVod_vodId])),Tu("dialog_vod_start")}function Iy(){dy(),Pu("dialog_vod_start"),Py(),window.setTimeout(function(){Tu("scene_channel_panel_bottom")},1e3)}function xy(){return Lu("dialog_vod_start")}function Py(){Ly(),Ev=0,Ty()}function Ty(){Bu("dialog_vod_"+Ev,"dialog_end_icons_focus")}function Ly(){Ou("dialog_vod_"+Ev,"dialog_end_icons_focus")}function By(e){Iy(),e?(delete Mv["#"+Ml.ChannelVod_vodId],Ml.vodOffset=0,Gv()):(Ml.vodOffset=Mv["#"+Ml.ChannelVod_vodId],Cv=1e3*Ml.vodOffset,py(Ml.vodOffset,Dd,!0),Av())}function Oy(e){if(Kg===zm||xy())switch(e.keyCode){case La:SM()?Dm&&!eM&&(RM(),Dm--,OM()):Rm&&!Yp()&&ag()?(Tm++,lg()):Yp()&&!xy()?(Qp(),Sv?(pg(),5<++bh&&(bh=1),hg()):(wy(-1,Dd),xv=2500),_y()):xy()?(Ly(),Ev?Ev--:Ev++,Ty()):bg()?(Eg(),Cg(),--Sh<0&&(Sh=3),1===Sh&&(Sh=0),kg()):xy()||ry(!0);break;case Oa:SM()?Dm<oM-1&&!eM&&(RM(),Dm++,OM()):!Rm||Yp()||bg()?Yp()&&!xy()?(Qp(),Sv?(pg(),--bh<1&&(bh=5),hg()):(wy(1,Dd),xv=2500),_y()):xy()?(Ly(),Ev?Ev--:Ev++,Ty()):bg()?(Eg(),Cg(),3<++Sh&&(Sh=0),1===Sh&&(Sh=2),kg()):xy()||ry(!0):kf("ChatEnable",(eh=ag()||bg()?(ng(),!1):(tg(),!0))?"true":"false");break;case Ba:bg()?Eg():Yp()&&!xy()?(2===Sv&&1!==bh?(Sv--,uy()):1===Sv?(Sv--,uy()):0<av&&1===bh&&(av--,my()),Qp(),_y()):SM()?SM()?BM():xy()||ry(!0):IM();break;case Ga:bg()?Eg():Yp()&&!xy()?(Sv?1===Sv?(Sv++,uy()):av<hy()-1&&1===bh&&(av++,my()):(Sv++,uy()),Qp(),_y()):SM()?xM():Rm&&ag()?(4<++Gm?cg(!(Gm=1)):4===Gm&&cg(!0),dg(!0)):xy()||ry(!0);break;case Aa:xy()?By(Ev):bg()?Sg(2):Yp()?Sv?1===Sv?(Ml.Play_ChatForceDisable&&(Mp()?Bc(uc):Oc()),bg()||fg(2)):Bg(2):(Qp(),_y(),vv&&gy()):SM()?(oy(!0),V_(Dm,fM,Vg)):ry(!0);break;case Na:qg(!0);break;case Pa:case xa:case Ta:Ml.Play_ChatForceDisable&&(Mp()?Bc(uc):Oc()),bg()||fg(2)}else switch(e.keyCode){case Na:Vp()?(qp(),iy()):Dp()}}var Gy={};function Ay(){console.log("InitScreens place holder")}function Ny(){wb(),kb(),Mb(),Eb(),Sb(),xb(),Pb()}function Uy(e){return[e+"_thumbdiv",e+"_img",e+"_infodiv",e+"_title",e+"_createdon",e+"_game",e+"_viwers",e+"_duration",e+"_cell","cpempty_",e+"_scroll",e+"_lang"]}function Ry(){for(var e,t={},n=0;n<arguments.length;n+=1){var a=arguments[n],i=Object.keys(a);for(e=0;e<i.length;e+=1)t[i[e]]=a[i[e]]}return t}function Fy(){Rl=-1,Ml.Main_Go=Gy.screen,Gy.label_init(),document.body.addEventListener("keydown",ib,!1),Gy.status?(Tu(Gy.ids[10]),M_(Gy.posY),$y(),__()):Dy()}function Hy(){Rl=0,Gy.label_exit(),document.body.removeEventListener("keydown",ib),Pu(Gy.ids[10])}function Dy(){Nu(),b_(Gy.table),Wu(),Gy.cursor=null,Gy.status=!1,Gy.row=document.createElement("div"),Gy.MaxOffset=0,Gy.TopRowCreated=!1,Gy.offset=0,Gy.idObject={},Gy.FirstLoad=!0,Gy.itemsCount=0,Gy.posX=0,Gy.posY=0,Gy.row_id=0,Gy.coloumn_id=0,Gy.data=null,Gy.data_cursor=0,Gy.dataEnded=!1,Vu(),qy(),Vy()}function qy(){Gy.loadingData=!0,Gy.loadingDataTry=0,Gy.loadingDataTimeout=3500}function Vy(){var e;if(Gy.set_url(),mu&&!Gy.data){if(!(e=Android.mreadUrl(Gy.url,Gy.loadingDataTimeout,2,null)))return void Jy();200===(e=JSON.parse(e)).status?Gy.concatenate(e.responseText):Jy()}else(e=new XMLHttpRequest).open("GET",Gy.url,!0),e.timeout=Gy.loadingDataTimeout,e.setRequestHeader(eu,Ql),e.setRequestHeader(tu,iu),e.ontimeout=function(){},e.onreadystatechange=function(){4===e.readyState&&(200===e.status?Gy.concatenate(e.responseText):Jy())},e.send(null)}function Jy(){Gy.loadingDataTry++,Gy.loadingDataTry<Gy.loadingDataTryMax?(Gy.loadingDataTimeout+=500,Vy()):(Gy.loadingData=!1,Gy.itemsCount?Gy.dataEnded=!0:(Gy.FirstLoad=!1,Uu(),ju(L)))}function zy(){var e=Gy.data.length-Gy.data_cursor;if(e>Gy.ItemsLimit?e=Gy.ItemsLimit:Gy.loadingData||(Gy.dataEnded=!0),e){var t=Math.ceil(e/Gy.ColoumnsCount),n=Gy.row_id+t,a=document.getElementById(Gy.table);if(Gy.HasSwitches&&!Gy.TopRowCreated){Gy.TopRowCreated=!0,Gy.row=document.createElement("div");var i='<i class="icon-history stream_channel_fallow_icon"></i>'+Ca+Ca+m;(Ol=document.createElement("div")).setAttribute("id",Gy.ids[8]+"y_0"),Ol.className="stream_cell_period",Ol.innerHTML='<div id="'+Gy.ids[0]+'y_0" class="stream_thumbnail_channel_vod" ><div id="'+Gy.ids[3]+'y_0" class="stream_channel_fallow_game">'+i+"</div></div>",Gy.row.appendChild(Ol),a.appendChild(Gy.row)}for(Gy.row_id;Gy.row_id<n;){for(Gy.coloumn_id===Gy.ColoumnsCount&&(Gy.row=document.createElement("div"),Gy.coloumn_id=0),Gy.coloumn_id;Gy.coloumn_id<Gy.ColoumnsCount&&Gy.data_cursor<Gy.data.length;Gy.data_cursor++)Gy.data[Gy.data_cursor]&&Gy.addCell(Gy.data[Gy.data_cursor]);if(a.appendChild(Gy.row),Gy.coloumn_id===Gy.ColoumnsCount)Gy.row_id++;else if(Gy.data_cursor>=Gy.data.length)break}}Gy.emptyContent=!e&&!Gy.status,Ky()}function Xy(e,t,n,a){var i=e+"_"+t;return C_(n[1]+i,a),e<Gy.ColoumnsCount&&S_(a),(Ol=document.createElement("div")).style.cssText=Gy.ThumbCssText,i}function jy(e,t,n,a,i,o){var s=Xy(e,t,n,a);return Ol.setAttribute("id",n[5]+s),Ol.setAttribute(ru,i),Ol.innerHTML='<div id="'+n[0]+s+'" class="stream_thumbnail_game"><div><img id="'+n[1]+s+'" class="stream_img"></div><div id="'+n[2]+s+'" class="stream_text2"><div id="<div id="'+n[3]+s+'" class="stream_channel">'+i+"</div>"+(""!==o?'<div id="'+n[4]+s+'"class="stream_info_games" style="width: 100%; display: inline-block;">'+o+"</div>":"")+"</div></div>",Ol}function Wy(e,t,n,a,i,o,s,d,r,c,l,u,_,f,m,h){var p=Xy(e,t,n,a);return Ol.setAttribute("id",n[8]+p),Ol.setAttribute(ru,JSON.stringify([l,c,s[2],u,i,_,f,m,h,s[0],r,s[1]+s[2]])),Ol.innerHTML='<div id="'+n[0]+p+'" class="stream_thumbnail_clip"><div><img id="'+n[1]+p+'" class="stream_img"></div><div id="'+n[2]+p+'" class="stream_text2"><div id="'+n[3]+p+'" class="stream_info" style="width: 72%; display: inline-block; font-size: 85%;">'+i+'</div><div id="'+n[7]+p+'"class="stream_info" style="width:27%; float: right; text-align: right; display: inline-block;">'+r+'</div><div  style="line-height: 12px;"><div id="'+n[4]+p+'"class="stream_info" style="width: 59%; display: inline-block;">'+o[0]+o[1]+'</div><div id="'+n[5]+p+'"class="stream_info" style="width: 39%; display: inline-block; float: right; text-align: right;">'+H+Ip(c)+'</div></div><div id="'+n[11]+p+'"class="stream_info">'+s[0]+ra+s[1]+s[2]+'</div><div id="'+n[6]+p+'"class="stream_info">'+d+D+"</div></div></div>",Ol}function Yy(e,t,n,a,i){var o=Xy(e,t,a,i[0]);return Ol.setAttribute("id",a[8]+o),Ol.setAttribute(ru,JSON.stringify(n)),Ol.innerHTML='<div id="'+a[0]+o+'" class="stream_thumbnail_clip"><div><img id="'+a[1]+o+'" class="stream_img"></div><div id="'+a[2]+o+'" class="stream_text2"><div id="'+a[3]+o+'" class="stream_channel" style="width: 66%; display: inline-block;">'+i[1]+'</div><div id="'+a[7]+o+'"class="stream_info" style="width:33%; float: right; text-align: right; display: inline-block;">'+i[5]+'</div><div id="'+a[4]+o+'"class="stream_info">'+LI.parse(i[2])+'</div><div id="'+a[5]+o+'"class="stream_info">'+g+i[3]+'</div><div id="'+a[6]+o+'"class="stream_info">'+i[4]+"</div></div></div>",Ol}function Ky(){Gy.status?(w_(Gy.img_404),Ju(Gy.posX,Gy.posY,Gy.ColoumnsCount,Gy.itemsCount)):(Gy.emptyContent?ju(Gy.empty_str()):(Gy.status=!0,w_(Gy.img_404)),Fl&&Gy.status&&Ck.restor_playback.defaultValue?Ml.Play_WasPlaying?(m_(Ml.Main_Go),Ml.Main_Go=Cl,Ml.vodOffset||(Ml.vodOffset=1),Dd=Ml.vodOffset+1,Rp(Wn),1===Ml.Play_WasPlaying?J_():j_(),l_(!0),window.setTimeout(function(){wh||Fp()},2e3)):1!==Cl?(m_(Ml.Main_Go),Ml.Main_Go=Cl,Y_(Gy.posY+"_"+Gy.posX,Gy.ids),l_()):(Ml.Never_run&&Qu(),Ml.Never_run=!1,$y(),__()):($y(),__()),Fl=!1,Gy.FirstLoad=!1,Uu())}function $y(){Gy.posY<0?Qy():(Gy.addFocus(Gy.posY,Gy.posX,Gy.ids,Gy.ColoumnsCount,Gy.itemsCount),2<Gy.posY&&Gy.data_cursor+_b>Gy.data.length&&!Gy.dataEnded&&!Gy.loadingData&&(qy(),Vy()),Gy.posY+Gy.ItemsReloadLimit>Gy.itemsCount/Gy.ColoumnsCount&&Gy.data_cursor<Gy.data.length&&(k_(),Gy.loadDataSuccess()),Il&&Y_(Gy.posY+"_"+Gy.posX,Gy.ids))}function Zy(e,t){Y_(Gy.posY+"_"+Gy.posX,Gy.ids),Gy.posY+=e,Gy.posX=t,$y()}function Qy(){Bu(Gy.ids[0]+"y_0",du)}function eb(){Ou(Gy.ids[0]+"y_0",du)}function tb(e){t_()?e_():$u()?Ku():(e===Gy.screen?Ml.Main_Go=tl:Ml.Main_Go=e,Hy())}function nb(e){if(!Gy.HasSwitches||Gy.posY||-1!==e||Gy.emptyContent){if(Gy.HasSwitches&&-1===Gy.posY)Gy.posY=0,$y(),eb();else for(var t=0;t<Gy.ColoumnsCount;t++)if(s_(Gy.posY+e,Gy.posX-t,Gy.ids[0]))return void Zy(e,Gy.posX-t)}else Y_(Gy.posY+"_"+Gy.posX,Gy.ids),Gy.posY=-1,Qy()}function ab(e,t){s_(Gy.posY,Gy.posX+e,Gy.ids[0])?Zy(0,Gy.posX+e):s_(Gy.posY+e,t,Gy.ids[0])&&Zy(e,t)}function ib(e){if(!Gy.FirstLoad&&!F_())switch(R_(),e.keyCode){case Na:Gy.key_exit();break;case La:ab(-1,Gy.ColoumnsCount-1);break;case Oa:ab(1,0);break;case Ba:nb(-1);break;case Ga:nb(1);break;case Pa:case xa:case Ta:case Aa:Gy.key_play()}}Gy.FirstLoad=!1;var ob,sb,db,rb,cb,lb,ub,_b=100,fb="",mb="",hb="",pb="",gb="",vb="",yb={posX:0,posY:0,row_id:0,coloumn_id:0,dataEnded:!1,idObject:{},loadingData:!1,itemsCount:0,loadingDataTryMax:5,loadingDataTimeout:3500,MaxOffset:0,offset:0,status:!1,emptyContent:!1,itemsCountCheck:!1,FirstLoad:!1,row:0,data:null,data_cursor:0,loadDataSuccess:zy,set_ThumbSize:function(){this.ThumbCssText="width: "+this.ThumbSize+"%; display: inline-block; padding: 3px;"},key_exit:function(){t_()?e_():$u()?Ku():(this.itemsCount&&Y_(this.posY+"_"+this.posX,this.ids),pf(ib))}},bb={ThumbSize:32.65,ItemsLimit:Vl,ItemsReloadLimit:zl,ColoumnsCount:Jl,addFocus:D_,img_404:yu,empty_str:function(){return B+K},key_play:function(){V_(this.posY+"_"+this.posX,this.ids,ib)}};function wb(){(lb=Ry(lb=Ry({ids:Uy("Live"),table:"stream_table_live",screen:tl,base_url:"https://api.twitch.tv/kraken/streams?limit="+_b,set_url:function(){this.offset&&this.offset+_b>this.MaxOffset&&(this.dataEnded=!0),this.url=this.base_url+"&offset="+this.offset+(""!==Al?"&language="+Al:"")},label_init:function(){Ml.Main_CenterLablesVectorPos=0,Bu("top_bar_live","icon_center_focus")},label_exit:function(){Ou("top_bar_live","icon_center_focus")},concatenate:function(e){if(this.data){var t=JSON.parse(e);this.MaxOffset=t._total,this.data=this.data.concat(t.streams),this.offset=this.data.length,this.offset>this.MaxOffset&&(this.dataEnded=!0),Gy.loadingData=!1}else this.data=JSON.parse(e),this.MaxOffset=this.data._total,this.data=this.data.streams,this.offset=this.data.length,this.offset>this.MaxOffset&&(this.dataEnded=!0),this.loadDataSuccess(),Gy.loadingData=!1},addCell:function(e){Gy.idObject[e.channel._id]||(Gy.itemsCount++,Gy.idObject[e.channel._id]=1,Gy.row.appendChild(Yy(Gy.row_id,Gy.coloumn_id,[e.channel.name,e.channel._id,e.channel.status],this.ids,[e.preview.template.replace("{width}x{height}",ou),o_(JSON.stringify(e.stream_type))+e.channel.display_name,e.channel.status,e.game,y+Pp(e.created_at)+b+", "+h+a_(e.viewers)+q,i_(e.video_height,e.average_fps,e.channel.language)])),Gy.coloumn_id++)}},yb),bb)).set_ThumbSize()}function kb(){(ub=Ry(ub=Ry({ids:Uy("Featured"),table:"stream_table_featured",screen:wl,base_url:"https://api.twitch.tv/kraken/streams/featured?limit="+_b,set_url:function(){this.url=this.base_url+"&offset="+this.offset+(ao()&&Di[Ml.Users_Position].access_token?"&oauth_token="+Di[Ml.Users_Position].access_token:"")},label_init:function(){Ml.Main_CenterLablesVectorPos=2,Bu("top_bar_featured","icon_center_focus")},label_exit:function(){Ou("top_bar_featured","icon_center_focus")},concatenate:function(e){this.data=JSON.parse(e),this.data=this.data.featured,this.dataEnded=!0,this.loadDataSuccess(),Gy.loadingData=!1},addCell:function(e){e=e.stream,Gy.idObject[e.channel._id]||(Gy.itemsCount++,Gy.idObject[e.channel._id]=1,Gy.row.appendChild(Yy(Gy.row_id,Gy.coloumn_id,[e.channel.name,e.channel._id,e.channel.status],this.ids,[e.preview.template.replace("{width}x{height}",ou),o_(JSON.stringify(e.stream_type))+e.channel.display_name,e.channel.status,e.game,y+Pp(e.created_at)+b+", "+h+a_(e.viewers)+q,i_(e.video_height,e.average_fps,e.channel.language)])),Gy.coloumn_id++)}},yb),bb)).set_ThumbSize()}var Cb={ThumbSize:32.65,ItemsLimit:Vl,HasSwitches:!0,TopRowCreated:!1,ItemsReloadLimit:zl,ColoumnsCount:Jl,addFocus:D_,cursor:null,period:["day","week","month","all"],img_404:yu,empty_str:function(){return B+U},key_play:function(){-1===this.posY?this.loadingData||(this.periodPos++,4<this.periodPos&&(this.periodPos=1),this.SetPeriod(),Dy()):z_(this.posY+"_"+this.posX,this.ids,ib)},concatenate:function(e){if(this.data){var t=JSON.parse(e);this.cursor=t._cursor,""===this.cursor&&(this.dataEnded=!0),this.data=this.data.concat(t.clips),Gy.loadingData=!1}else this.data=JSON.parse(e),this.cursor=this.data._cursor,""===this.cursor&&(this.dataEnded=!0),this.data=this.data.clips,this.loadDataSuccess(),Gy.loadingData=!1},addCell:function(e){Gy.idObject[e.tracking_id]||(Gy.itemsCount++,Gy.idObject[e.tracking_id]=1,Gy.row.appendChild(Wy(Gy.row_id,Gy.coloumn_id,Gy.ids,e.thumbnails.medium,e.broadcaster.display_name,[cn,v_(e.created_at)],[LI.parse(e.title),g,e.game],a_(e.views),"["+e.language.toUpperCase()+"]",e.duration,e.slug,e.broadcaster.name,e.broadcaster.logo.replace("150x150","300x300"),e.broadcaster.id,null!==e.vod?e.vod.id:null,null!==e.vod?e.vod.offset:null)),Gy.coloumn_id++)}};function Mb(){(ob=Ry(ob=Ry({ids:Uy("Clip"),table:"stream_table_clip",screen:vl,periodPos:Cf("Clip_periodPos",2),base_url:"https://api.twitch.tv/kraken/clips/top?limit="+_b,set_url:function(){this.url=this.base_url+"&period="+this.period[this.periodPos-1]+(this.cursor?"&cursor="+this.cursor:"")+(""!==Al?"&language="+Al:"")},SetPeriod:function(){Gu("top_bar_clip",U+g_(Ul[this.periodPos-1])),kf("Clip_periodPos",this.periodPos)},label_init:function(){Ml.Main_CenterLablesVectorPos=5,this.SetPeriod(),Bu("top_bar_clip","icon_center_focus"),xu("label_refresh","icon-refresh",t+$t)},label_exit:function(){h_(),Ou("top_bar_clip","icon_center_focus"),xu("label_refresh","icon-refresh",t+$t)}},yb),Cb)).set_ThumbSize()}function Eb(){(sb=Ry(sb=Ry({ids:Uy("ChannelClip"),table:"stream_table_channel_clip",screen:fl,periodPos:Cf("ChannelClip_periodPos",2),base_url:"https://api.twitch.tv/kraken/clips/top?channel=",set_url:function(){this.url=this.base_url+encodeURIComponent(Ml.Main_selectedChannel)+"&limit="+_b+"&period="+this.period[this.periodPos-1]+(this.cursor?"&cursor="+this.cursor:"")},SetPeriod:function(){Gu("top_bar_game",U+Ul[this.periodPos-1]),kf("ChannelClip_periodPos",this.periodPos)},label_init:function(){Ml.Main_CenterLablesVectorPos=1,!Ml.Search_isSearching&&Ml.Main_selectedChannel_id&&Id(),Ml.Main_selectedChannel!==this.lastselectedChannel&&(this.status=!1),p_(),this.SetPeriod(),Au("top_bar_user",Ml.Main_selectedChannelDisplayname),xu("label_side_panel","icon-arrow-circle-left",x),this.lastselectedChannel=Ml.Main_selectedChannel},label_exit:h_},yb),Cb)).set_ThumbSize()}function Sb(){(db=Ry(db=Ry({ids:Uy("AGameClip"),table:"stream_table_a_game_clip",screen:bl,periodPos:Cf("AGameClip_periodPos",2),base_url:"https://api.twitch.tv/kraken/clips/top?game=",set_url:function(){this.url=this.base_url+encodeURIComponent(Ml.Main_gameSelected)+"&limit="+_b+"&period="+this.period[this.periodPos-1]+(this.cursor?"&cursor="+this.cursor:"")+(""!==Al?"&language="+Al:"")},SetPeriod:function(){Gu("top_bar_game",w+g_(U+Ul[this.periodPos-1]+": "+Ml.Main_gameSelected)),kf("AGameClip_periodPos",this.periodPos)},label_init:function(){Ml.Main_CenterLablesVectorPos=3,this.SetPeriod(),Bu("top_bar_game","icon_center_focus"),xu("label_side_panel","icon-arrow-circle-left",x),this.gameSelected!==Ml.Main_gameSelected&&(this.status=!1),this.gameSelected=Ml.Main_gameSelected},label_exit:function(){Ou("top_bar_game","icon_center_focus"),Gu("top_bar_game",f),xu("label_side_panel","icon-ellipsis",Dn)}},yb),Cb)).set_ThumbSize()}var Ib={ThumbSize:19.35,ItemsLimit:Xl,ItemsReloadLimit:Wl,ColoumnsCount:jl,addFocus:q_,img_404:gu,empty_str:function(){return B+Z},concatenate:function(e){if(this.data){var t=JSON.parse(e);this.MaxOffset=t._total,this.data=this.data.concat(this.screen===dl?t.follows:t.top),this.offset=this.data.length,this.offset>this.MaxOffset&&(this.dataEnded=!0),Gy.loadingData=!1}else this.data=JSON.parse(e),this.MaxOffset=this.data._total,this.data=this.screen===dl?this.data.follows:this.data.top,this.offset=this.data.length,this.isLive?this.dataEnded=!0:this.offset>this.MaxOffset&&(this.dataEnded=!0),this.loadDataSuccess(),Gy.loadingData=!1},key_play:function(){Ml.Main_gameSelected=document.getElementById(this.ids[5]+this.posY+"_"+this.posX).getAttribute(ru),document.body.removeEventListener("keydown",ib),Ml.Main_BeforeAgame=this.screen,Ml.Main_Go=il,Ml.Main_BeforeAgameisSet=!0,xo=!1,Rl=0,document.body.removeEventListener("keydown",ib),Pu(this.ids[10]),u_(),Y_(this.posY+"_"+this.posX,this.ids)},addCell:function(e){var t=this.isLive||this.screen===al,n=t?e.game:e;Gy.idObject[n._id]||(Gy.itemsCount++,Gy.idObject[n._id]=1,Gy.row.appendChild(jy(Gy.row_id,Gy.coloumn_id,Gy.ids,n.box.template.replace("{width}x{height}",su),n.name,t?a_(e.channels)+" "+S+h+a_(e.viewers)+q:"")),Gy.coloumn_id++)}};function xb(){(rb=Ry(rb=Ry({ids:Uy("Game"),table:"stream_table_games",screen:al,base_url:"https://api.twitch.tv/kraken/games/top?limit="+_b,set_url:function(){this.offset&&this.offset+_b>this.MaxOffset&&(this.dataEnded=!0),this.url=this.base_url+"&offset="+this.offset},label_init:function(){Ml.Main_CenterLablesVectorPos=3,Bu("top_bar_game","icon_center_focus")},label_exit:function(){Ou("top_bar_game","icon_center_focus")}},yb),Ib)).set_ThumbSize()}function Pb(){(cb=Ry(cb=Ry({ids:Uy("UserGames"),table:"stream_table_user_games",screen:dl,isLive:Ef("user_Games_live",!0),OldUserName:"",base_url:"https://api.twitch.tv/api/users/",set_url:function(){this.offset&&this.offset+_b>this.MaxOffset&&(this.dataEnded=!0),this.url=this.base_url+encodeURIComponent(Di[Ml.Users_Position].name)+"/follows/games",this.isLive?this.url+="/live?limit=750":this.url+="?limit="+_b+"&offset="+this.offset},key_refresh:function(){this.isLive=!this.isLive,Gu("top_bar_user",u+g_(Di[Ml.Users_Position].name+" "+(this.isLive?Z:Yt))),Dy(),kf("user_Games_live",this.isLive?"true":"false"),IE&&AE()},label_init:function(){Ml.Main_CenterLablesVectorPos=1,xu("label_refresh","icon-refresh",Kt+Z+"/"+Yt+":"+$t),xu("label_side_panel","icon-arrow-circle-left",x),Bu("top_bar_user","icon_center_focus"),this.OldUserName!==Di[Ml.Users_Position].name&&(this.status=!1),this.OldUserName=Di[Ml.Users_Position].name,Gu("top_bar_user",u+g_(Di[Ml.Users_Position].name+" "+(this.isLive?Z:Yt)))},label_exit:function(){Ml.Users_Position=0,Ou("top_bar_user","icon_center_focus"),xu("label_refresh","icon-refresh",t+$t),Au("top_bar_user",u),xu("label_side_panel","icon-ellipsis",Dn)}},yb),Ib)).set_ThumbSize()}var Tb=0,Lb=0,Bb=!1,Ob=0,Gb={},Ab=[],Nb=!1,Ub=0,Rb=5,Fb=3500,Hb=0,Db=0,qb=!1,Vb=!1,Jb="",zb=!1,Xb=["sc_thumbdiv","sc_img","sc_infodiv","sc_displayname","sc_cell","scempty_","search_channel_scroll"];function jb(){Ml.Main_CenterLablesVectorPos=1,Ml.Main_Go=pl,Ml.isLastSChannels=!0,Ml.Search_isSearching=!0,Jb!==Ml.Search_data&&(Vb=!1),p_(),Gu("top_bar_user",n+g_(S+" '"+Ml.Search_data+"'")),document.body.addEventListener("keydown",dw,!1),Vb?(M_(Tb),Tu(Xb[6]),ow(),__()):Yb()}function Wb(){h_(),document.body.removeEventListener("keydown",dw),Pu(Xb[6])}function Yb(){b_("stream_table_search_channel"),Pu(Xb[6]),Nu(),Wu(),Jb=Ml.Search_data,Vb=!1,Gb={},Ob=Db=Hb=0,Tb=Lb=0,Bb=!(mf=!(zb=!(Ab=[]))),Vu(),Kb(),$b()}function Kb(){k_(),Nb=!0,Ub=0,Fb=3500}function $b(){var e=Ob+Hb;e&&Db-1<e&&(e=Db-Yl,Bb=!0),xf("https://api.twitch.tv/kraken/search/channels?query="+encodeURIComponent(Ml.Search_data)+"&limit="+Yl+"&offset="+e,Fb,2,null,Qb,Zb)}function Zb(){++Ub<Rb?(Fb+=500,$b()):(Nb=!1,Ob?(Bb=!0,tw()):(mf=!1,Uu(),ju(L)))}function Qb(e){var t=JSON.parse(e),n=t.channels.length;Db=parseInt(t._total),n<Yl&&(Bb=!0);var a=Ob;qb=!(Ob+=n);var i=n/Kl;0<n%Kl&&i++;for(var o,s,d,r,c,l=0,u=document.getElementById("stream_table_search_channel"),_=0;_<i;_++){for(s=a/Kl+_,d=document.createElement("tr"),o=0;o<Kl&&l<n;o++,l++)c=(r=t.channels[l])._id,Gb[c]?o--:(Gb[c]=1,d.appendChild(ew(s,s+"_"+o,[r.name,c,r.logo,r.display_name])));for(;o<Kl;o++)Bb&&!zb&&(zb=!0,Ob=s*Kl+o),d.appendChild(I_(Xb[5]+s+"_"+o)),Ab.push(Xb[5]+s+"_"+o);u.appendChild(d)}tw()}function ew(e,t,n){return e<4&&S_(n[2]),x_(t,Xb,n)}function tw(){if(Vb){if(w_(vu),0<Ab.length&&!Bb)return Kb(),void nw();Ju(Lb,Tb,Kl,Ob),Ab=[]}else qb?ju(d):(Vb=!0,w_(vu),ow(),__()),Tu(Xb[6]),mf=!1,Uu();Nb=!1}function nw(){Xu(Ab.length);var e=Ob+Hb;e&&Db-1<e&&(e=Db-Zl,Bb=!0),xf("https://api.twitch.tv/kraken/search/channels?query="+encodeURIComponent(Ml.Search_data)+"&limit="+Zl+"&offset="+e,Fb,2,null,iw,aw)}function aw(){++Ub<Rb?(Fb+=500,nw()):(Bb=!0,Ob-=Ab.length,Ab=[],tw())}function iw(e){var t,n,a=JSON.parse(e),i=a.channels.length,o=0,s=0,d=[];for(Db=parseInt(a._total),i<Zl&&(Bb=!0);o<Ab.length&&s<i;o++,s++)n=(t=a.channels[s])._id,Gb[n]?o--:(Gb[n]=1,P_(Ab[o],[t.name,n,t.logo,t.display_name],Xb),d.push(o));for(o=d.length-1;-1<o;o--)Ab.splice(d[o],1);Hb+=s,Bb&&(Ob-=Ab.length,Ab=[]),tw()}function ow(){H_(Tb,Lb,Xb,Kl,Ob),Ob/Kl<Tb+$l&&!Bb&&!Nb&&(Kb(),$b()),Il&&sw()}function sw(){Ob&&Y_(Tb+"_"+Lb,Xb)}function dw(e){var t;if(!mf&&!F_())switch(R_(),e.keyCode){case Na:t_()?e_():$u()?Ku():(sw(),pf(dw));break;case La:if(s_(Tb,Lb-1,Xb[0]))sw(),Lb--,ow();else for(t=Kl-1;-1<t;t--)if(s_(Tb-1,t,Xb[0])){sw(),Tb--,Lb=t,ow();break}break;case Oa:s_(Tb,Lb+1,Xb[0])?(sw(),Lb++,ow()):s_(Tb+1,0,Xb[0])&&(sw(),Tb++,Lb=0,ow());break;case Ba:for(t=0;t<Kl;t++)if(s_(Tb-1,Lb-t,Xb[0])){sw(),Tb--,Lb-=t,ow();break}break;case Ga:for(t=0;t<Kl;t++)if(s_(Tb+1,Lb-t,Xb[0])){sw(),Tb++,Lb-=t,ow();break}break;case Pa:case xa:case Ta:case Aa:Ml.Main_selectedChannel=document.getElementById(Xb[4]+Tb+"_"+Lb).getAttribute(ru),Ml.Main_selectedChannel_id=document.getElementById(Xb[4]+Tb+"_"+Lb).getAttribute("data-id"),Ml.Main_selectedChannelDisplayname=document.getElementById(Xb[3]+Tb+"_"+Lb).textContent,document.body.removeEventListener("keydown",dw),Ml.Main_BeforeChannel=pl,Ml.Main_Go=ul,Ml.Main_BeforeChannelisSet=!0,zs=Xa=!1,Pu(Xb[6]),l_()}}var rw=!1,cw=0,lw=0,uw=0,_w=0,fw=5,mw=3500,hw=0,pw=0,gw=!1,vw=!1,yw="",bw=["sgthumbdiv","sgimg","sginfodiv","sgdisplayname","sgviwers","sgcell","sgempty_","search_games_scroll"];function ww(){Ml.Main_CenterLablesVectorPos=1,Ml.Main_Go=cl,Ml.Search_isSearching=!0,p_(),yw!==Ml.Search_data&&(rw=!1),Gu("top_bar_user",n+g_(f+" '"+Ml.Search_data+"'")),document.body.addEventListener("keydown",Bw,!1),rw?(M_(cw),Tu(bw[7]),Tw(),__()):Cw()}function kw(){Ml.Search_isSearching||h_(),document.body.removeEventListener("keydown",Bw),Ml.Games_return=!1,Pu(bw[7])}function Cw(){b_("stream_table_search_game"),Pu(bw[7]),Nu(),Wu(),yw=Ml.Search_data,vw=rw=!1,cw=lw=uw=pw=hw=0,Vu(),Mw(),Ew()}function Mw(){k_(),mf=!0,_w=0,mw=3500}function Ew(){xf("https://api.twitch.tv/kraken/search/games?query="+encodeURIComponent(Ml.Search_data),mw,2,null,Iw,Sw)}function Sw(){++_w<fw?(mw+=500,Ew()):(mf=!1,uw?Pw():(Uu(),ju(L)))}function Iw(e){var t=JSON.parse(e),n=0;null!==t.games&&(n=t.games.length);var a=uw;gw=!(uw+=n);var i=n/jl;0<n%jl&&i++;for(var o,s,d,r,c=0,l=document.getElementById("stream_table_search_game"),u=0;u<i;u++){for(s=a/jl+u,d=document.createElement("tr"),o=0;o<jl&&c<n;o++,c++)r=t.games[c],d.appendChild(xw(s,s+"_"+o,[r.name,r.box.template.replace("{width}x{height}",su),""]));for(;o<jl;o++)vw||(vw=!0,uw=s*jl+o),d.appendChild(I_(bw[6]+s+"_"+o));l.appendChild(d)}Pw()}function xw(e,t,n){return e<2&&S_(n[1]),G_(t,bw,n)}function Pw(){rw||(gw?ju(d):(rw=!0,w_(yu),Tw(),__()),Uu()),Tu(bw[7]),mf=!1,Ju(lw,cw,jl,uw)}function Tw(){q_(cw,lw,bw,jl,uw),Il&&Lw()}function Lw(){uw&&Y_(cw+"_"+lw,bw)}function Bw(e){var t;if(!mf&&!F_())switch(R_(),e.keyCode){case Na:t_()?e_():$u()?Ku():(Lw(),pf(Bw));break;case La:if(s_(cw,lw-1,bw[0]))Lw(),lw--,Tw();else for(t=jl-1;-1<t;t--)if(s_(cw-1,t,bw[0])){Lw(),cw--,lw=t,Tw();break}break;case Oa:s_(cw,lw+1,bw[0])?(Lw(),lw++,Tw()):s_(cw+1,0,bw[0])&&(Lw(),cw++,lw=0,Tw());break;case Ba:for(t=0;t<jl;t++)if(s_(cw-1,lw-t,bw[0])){Lw(),cw--,lw-=t,Tw();break}break;case Ga:for(t=0;t<jl;t++)if(s_(cw+1,lw-t,bw[0])){Lw(),cw++,lw-=t,Tw();break}break;case Pa:case xa:case Ta:case Aa:Ml.gameSelectedOld=Ml.Main_gameSelected,kw(),Ml.Main_gameSelected=document.getElementById(bw[5]+cw+"_"+lw).getAttribute(ru),document.body.removeEventListener("keydown",Bw),Ml.Main_Go=il,Ml.Games_return=!0,l_()}}var Ow=0,Gw=0,Aw=!1;function Nw(){Wu(),Pu("label_refresh"),xu("label_side_panel","icon-arrow-circle-left",x),Au("top_bar_user",n),document.getElementById("top_lables").style.marginLeft="14%",document.getElementById("top_bar_live").style.display="none",document.getElementById("top_bar_featured").style.display="none",document.getElementById("top_bar_game").style.display="none",document.getElementById("top_bar_vod").style.display="none",document.getElementById("top_bar_clip").style.display="none",Jc.placeholder=k,Bu("top_bar_user","icon_center_focus"),Tu("search_scroll"),Gw=Ow=0,Fw(),Dw()}function Uw(){qw(!1),document.body.removeEventListener("keydown",Hw),Fw(),Ml.Main_Go=Ml.Main_BeforeSearch,document.getElementById("top_lables").style.marginLeft="18.5%",Au("top_bar_user",u),Ou("top_bar_user","icon_center_focus"),xu("label_side_panel","icon-ellipsis",Dn),Tu("label_refresh"),document.getElementById("top_bar_live").style.display="inline-block",document.getElementById("top_bar_featured").style.display="inline-block",document.getElementById("top_bar_game").style.display="inline-block",document.getElementById("top_bar_vod").style.display="inline-block",document.getElementById("top_bar_clip").style.display="inline-block",Jc.value="",Pu("search_scroll")}function Rw(){Uw(),Z_(function(){Gw?1===Gw?ww():2===Gw&&rk():jb()})}function Fw(){Ou("chanel_button","button_search_focused"),Ou("game_button","button_search_focused"),Ou("live_button","button_search_focused"),Ow&&(Gw?1===Gw?Bu("game_button","button_search_focused"):2===Gw&&Bu("live_button","button_search_focused"):Bu("chanel_button","button_search_focused"))}function Hw(e){if(!Aw)switch(e.keyCode){case Na:t_()?e_():$u()?Ku():(Uw(),l_());break;case La:1===Ow&&(--Gw<0&&(Gw=2),Fw());break;case Oa:1===Ow&&(2<++Gw&&(Gw=0),Fw());break;case Ba:1===Ow&&(Ow=0,Fw(),Dw());break;case Ga:Ow?1===Ow&&(Ow=0,Fw(),Dw()):(qw(!1),Ow=1,Fw());break;case Pa:case xa:case Ta:case Aa:Ow?""!==Jc.value&&null!==Jc.value?(Ml.Search_data=Jc.value,Jc.value="",Rw()):(ju(s),window.setTimeout(function(){Wu()},1e3)):Dw()}}function Dw(){document.body.removeEventListener("keydown",Hw),document.body.addEventListener("keydown",Jw,!1),Jc.placeholder=k,Jc.focus(),Aw=!0}function qw(e){Jc.blur(),Vw(),document.body.removeEventListener("keydown",Jw),Jc.placeholder=E+k,e&&document.body.addEventListener("keydown",Hw,!1),Aw=!1}function Vw(){if(null!==Jc){var e=Jc.cloneNode(!0);Jc.parentNode.replaceChild(e,Jc),Jc=document.getElementById("search_input")}}function Jw(e){switch(e.keyCode){case Na:$u()?Ku():t_()?e_():(Uw(),l_());break;case Ha:Jc.value="";break;case Ra:case Ga:qw(!0),Ow=1,Fw();break;case Ua:Jc.value=Jc.value.slice(0,-1);break;case Fa:Jc.value+=" "}}var zw=0,Xw=0,jw=!1,Ww=0,Yw={},Kw=[],$w=!1,Zw=0,Qw=5,ek=3500,tk=0,nk=0,ak=!1,ik=!1,ok=!1,sk="",dk=["sl_thumbdiv","sl_img","sl_infodiv","sl_displayname","sl_streamtitle","sl_streamgame","sl_viwers","sl_quality","sl_cell","slempty_","search_live_scroll"];function rk(){Ml.Main_CenterLablesVectorPos=1,Ml.Main_Go=ll,Ml.Search_isSearching=!0,p_(),sk!==Ml.Search_data&&(ik=!1),Gu("top_bar_user",n+g_(_+" '"+Ml.Search_data+"'")),document.body.addEventListener("keydown",wk,!1),ik?(M_(zw),Tu(dk[10]),yk(),__()):lk()}function ck(){h_(),document.body.removeEventListener("keydown",wk),Pu(dk[10])}function lk(){b_("stream_table_search_live"),Pu(dk[10]),Nu(),Wu(),sk=Ml.Search_data,ik=!1,nk=tk=0,Yw={},zw=Xw=Ww=0,jw=!(mf=!(ok=!(Kw=[]))),Vu(),uk(),_k()}function uk(){k_(),$w=!0,Zw=0,ek=3500}function _k(){var e=Ww+tk;e&&nk-1<e&&(e=nk-Vl,jw=!0),xf("https://api.twitch.tv/kraken/search/streams?query="+encodeURIComponent(Ml.Search_data)+"&limit="+Vl+"&offset="+e,ek,2,null,mk,fk)}function fk(){++Zw<Qw?(ek+=500,_k()):($w=!1,Ww?(jw=!0,hk()):(mf=!1,Uu(),ju(L)))}function mk(e){var t=JSON.parse(e),n=t.streams.length;nk=parseInt(t._total),n<Vl&&(jw=!0);var a=Ww;ak=!(Ww+=n);var i=n/Jl;0<n%Jl&&i++;for(var o,s,d,r,c,l=0,u=document.getElementById("stream_table_search_live"),_=0;_<i;_++){for(s=a/Jl+_,d=document.createElement("tr"),o=0;o<Jl&&l<n;o++,l++)c=(r=t.streams[l]).channel._id,Yw[c]?o--:(Yw[c]=1,d.appendChild(L_(s,s+"_"+o,[r.channel.name,c],dk,[r.preview.template.replace("{width}x{height}",ou),o_(JSON.stringify(r.stream_type))+r.channel.display_name,r.channel.status,r.game,y+Pp(r.created_at)+b+", "+h+a_(r.viewers)+q,i_(r.video_height,r.average_fps,r.channel.language)])));for(;o<Jl;o++)jw&&!ok&&(ok=!0,Ww=s*Jl+o),d.appendChild(I_(dk[9]+s+"_"+o)),Kw.push(dk[9]+s+"_"+o);u.appendChild(d)}hk()}function hk(){if(ik){if(w_(yu),0<Kw.length&&!jw)return uk(),void pk();Ju(Xw,zw,Jl,Ww),Kw=[]}else ak?ju(d):(ik=!0,w_(yu),yk(),__()),Tu(dk[10]),mf=!1,Uu();$w=!1}function pk(){Xu(Kw.length);var e=Ww+tk;e&&nk-1<e&&(e=nk-Zl,jw=!0),xf("https://api.twitch.tv/kraken/search/streams?query="+encodeURIComponent(Ml.Search_data)+"&limit="+Zl+"&offset="+e,ek,2,null,vk,gk)}function gk(){++Zw<Qw?(ek+=500,pk()):(jw=!0,Ww-=Kw.length,Kw=[],hk())}function vk(e){var t,n,a=JSON.parse(e),i=a.streams.length,o=0,s=0,d=[];for(nk=parseInt(a._total),i<Zl&&(jw=!0);o<Kw.length&&s<i;o++,s++)n=(t=a.streams[s]).channel._id,Yw[n]?o--:(Yw[n]=1,B_(Kw[o],[t.channel.name,n],[t.preview.template.replace("{width}x{height}",ou),o_(JSON.stringify(t.stream_type))+t.channel.display_name,t.channel.status,t.game,y+Pp(t.created_at)+b+", "+h+a_(t.viewers)+q,i_(t.video_height,t.average_fps,t.channel.language)],dk),d.push(o));for(o=d.length-1;-1<o;o--)Kw.splice(d[o],1);tk+=s,jw&&(Ww-=Kw.length,Kw=[]),hk()}function yk(){D_(zw,Xw,dk,Jl,Ww),Ww/Jl<zw+zl&&!jw&&!$w&&(uk(),_k()),Il&&bk()}function bk(){Ww&&Y_(zw+"_"+Xw,dk)}function wk(e){var t;if(!mf&&!F_())switch(R_(),e.keyCode){case Na:t_()?e_():$u()?Ku():(bk(),pf(wk));break;case La:if(s_(zw,Xw-1,dk[0]))bk(),Xw--,yk();else for(t=Jl-1;-1<t;t--)if(s_(zw-1,t,dk[0])){bk(),zw--,Xw=t,yk();break}break;case Oa:s_(zw,Xw+1,dk[0])?(bk(),Xw++,yk()):s_(zw+1,0,dk[0])&&(bk(),zw++,Xw=0,yk());break;case Ba:for(t=0;t<Jl;t++)if(s_(zw-1,Xw-t,dk[0])){bk(),zw--,Xw-=t,yk();break}break;case Ga:for(t=0;t<Jl;t++)if(s_(zw+1,Xw-t,dk[0])){bk(),zw++,Xw-=t,yk();break}break;case Pa:case xa:case Ta:case Aa:V_(zw+"_"+Xw,dk,wk)}}var kk=0,Ck={restor_playback:{values:["off","on"],defaultValue:2},chat_font_size:{values:["60%","80%","100%","120%","140%"],defaultValue:3},chat_brightness:{values:["0%","5%","10%","15%","20%","25%","30%","35%","40%","45%","50%","55%","60%","65%","70%","75%","80%","85%","90%","95%","100%"],defaultValue:11},force_disable_chat:{values:["off","on"],defaultValue:2},buffer_live:{values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],defaultValue:4},buffer_vod:{values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],defaultValue:4},buffer_clip:{values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],defaultValue:3},videos_animation:{values:["off","on"],defaultValue:2},clock_offset:{values:Mk(),defaultValue:49},content_lang:{values:["All","Dansk [DA]","Deutsch [DE]","English [EN][EN-GB]","English - USA [EN]","English - UK [EN-GB]","Español [ES][ES-MX]","Español - España [ES]","Español - Latinoamérica [ES-MX]","Français [FR]","Italiano [IT]","Magyar [HU]","Nederlands [NL]","Norsk [NO]","Polski [PL]","Português [PT][PT-BR]","Português -Portugal [PT]","Português - Brasil [PT-BR]","Slovenčina [SK]","Suomi [FI]","Svenska [SV]","Tiếng Việt [VI]","Türkçe [TR]","Čeština [CS]","Ελληνικά [EL]","Български [BG]","Русский [RU]","ภาษาไทย [TH]","中文 [ZH-ALL]","中文 简体 [ZH-CN]","中文 繁體 [ZH-TW]","日本語 [JA]","한국어 [KO]","Română [RO]"],set_values:["","da","de","en,en-gb","en","en-gb","es,es-mx","es","es-mx","fr","it","hu","nl","no","pl","pt,pt-br","pt","pt-br","sk","fi","sv","vi","tr","cs","el","bg","ru","th","zh-cn,zh-tw","zh-cn","zh-tw","ja","ko","ro"],defaultValue:1}};function Mk(){for(var e=[],t=43200,n=0;n<48;n++)e.push("-"+Ip(t)),t-=900;for(e.push(Ip(0)),t=900,n=0;n<48;n++)e.push(Ip(t)),t+=900;return e}var Ek=[],Sk=0;function Ik(){c_(),document.body.addEventListener("keydown",jk,!1),xu("label_refresh","icon-arrow-circle-left",x),Au("top_bar_user",a),document.getElementById("top_lables").style.marginLeft="14%",document.getElementById("top_bar_live").style.display="none",document.getElementById("top_bar_featured").style.display="none",document.getElementById("top_bar_game").style.display="none",document.getElementById("top_bar_vod").style.display="none",document.getElementById("top_bar_clip").style.display="none",Bu("top_bar_user","icon_center_focus"),Tu("settings_scroll"),Hk(kk=0)}function xk(){document.body.removeEventListener("keydown",jk),Dk(),Au("top_bar_user",u),document.getElementById("top_lables").style.marginLeft="18.5%",document.getElementById("top_bar_live").style.display="inline-block",document.getElementById("top_bar_featured").style.display="inline-block",document.getElementById("top_bar_game").style.display="inline-block",document.getElementById("top_bar_vod").style.display="inline-block",document.getElementById("top_bar_clip").style.display="inline-block",Ou("top_bar_user","icon_center_focus"),xu("label_refresh","icon-refresh",t+$t),Pu("settings_scroll")}function Pk(){var e,t="";t+=Tk("general",kn),e="content_lang",Ek.push(e),t+=Lk(e,$n),e="clock_offset",Ek.push(e),t+=Lk(e,Yn),e="restor_playback",Ek.push(e),Ck[e].values=[Gn,On],t+=Bk(e,An,Nn),e="videos_animation",Ek.push(e),Ck[e].values=[Gn,On],t+=Lk(e,Hn),t+=Tk("play",pn),e="chat_font_size",Ek.push(e),t+=Bk(e,Un,Rn),e="chat_brightness",Ek.push(e),t+=Lk(e,sa),e="force_disable_chat",Ek.push(e),Ck[e].values=[Xt,B],t+=Bk(e,ia,oa),t+='<div id="setting_title_buffers" class="settings_title">'+gn+'</div><div id="setting_title_buffers_summary" class="settings_summary">'+vn+"</div>",e="buffer_live",Ek.push(e),t+=Lk(e,yn),e="buffer_vod",Ek.push(e),t+=Lk(e,bn),e="buffer_clip",Ek.push(e),Gu("settings_main",t+=Lk(e,wn)),Sk=Ek.length}function Tk(e,t){return'<div id="setting_title_'+e+'" class="settings_section">'+t+"</div>"}function Lk(e,t){return'<div id="'+e+'_div" class="settings_div"><div id="'+e+'_name" class="settings_name">'+t+'</div><div class="settings_arraw_div"><div id="'+e+'arrow_left" class="left"></div></div><div id="'+e+'" class="strokedextramini settings_value">'+Nk(e)+'</div><div class="settings_arraw_div"><div id="'+e+'arrow_right" class="right"></div></div></div>'}function Bk(e,t,n){return'<div id="'+e+'_div" class="settings_div"><div id="'+e+'_name" class="settings_name">'+t+'<div id="'+e+'_summary" class="settings_summary" style="font-size: 65%;">'+n+'</div></div><div class="settings_arraw_div"><div id="'+e+'arrow_left" class="left"></div></div><div id="'+e+'" class="strokedextramini settings_value">'+Nk(e)+'</div><div class="settings_arraw_div"><div id="'+e+'arrow_right" class="right"></div></div></div>'}function Ok(e,t,n){Gu(e+"_name",t+'<div id="'+e+'_summary" class="settings_summary" style="font-size: 65%;">'+n+"</div>")}function Gk(){var e="";for(e in Au("setting_title_general",kn),Au((e="clock_offset")+"_name",Yn),Au((e="content_lang")+"_name",$n),Ck[e].values[0]=Zn,Au(e,Nk(e)),Au("setting_title_play",pn),Au("setting_title_buffers",gn),Au("setting_title_buffers_summary",vn),Au((e="buffer_live")+"_name",yn),Au((e="buffer_vod")+"_name",bn),Au((e="buffer_clip")+"_name",wn),Ok(e="restor_playback",An,Nn),Ck[e].values=[Gn,On],Ok(e="chat_font_size",Un,Rn),Ok(e="force_disable_chat",ia,oa),Ck[e].values=[Gn,On],Au((e="videos_animation")+"_name",Hn),Ck[e].values=[Gn,On],Au((e="chat_brightness")+"_name",sa),Ck)Ck.hasOwnProperty(e)&&Au(e,Nk(e))}function Ak(){for(var e in Ck)Ck[e].defaultValue=Cf(e,Ck[e].defaultValue),Ck[e].defaultValue-=1;zk(0),Xk(),Om=(.05*Rk("chat_brightness")).toFixed(2),QS=Rk("videos_animation"),Al=Uk("content_lang"),Ml.Play_ChatForceDisable=Rk("force_disable_chat")}function Nk(e){return Ck[e].values[Rk(e)]}function Uk(e){return Ck[e].set_values[Rk(e)]}function Rk(e){return Ck[e].defaultValue}function Fk(e){return Ck[e].values.length-1}function Hk(e){var t=Ek[kk];Bu(t,"settings_value_focus"),Bu(t+"_div","settings_div_focus"),Vk(e)}function Dk(){var e=Ek[kk];document.getElementById(e+"arrow_left").style.opacity="0",document.getElementById(e+"arrow_right").style.opacity="0",Ou(e,"settings_value_focus"),Ou(e+"_div","settings_div_focus")}function qk(e){var t=Ek[e];kf(t,Rk(t)+1),Au(t,Nk(t)),Vk(e),Jk(e)}function Vk(e){var t=Ek[e],n=Rk(t),a=Fk(t);0<n&&n<a?(document.getElementById(t+"arrow_left").style.opacity="1",document.getElementById(t+"arrow_right").style.opacity="1"):n===a?(document.getElementById(t+"arrow_left").style.opacity="1",document.getElementById(t+"arrow_right").style.opacity="0.2"):(document.getElementById(t+"arrow_left").style.opacity="0.2",document.getElementById(t+"arrow_right").style.opacity="1")}function Jk(e){"content_lang"===(e=Ek[e])?Al=Uk("content_lang"):"videos_animation"===e?QS=Rk("videos_animation"):"buffer_live"===e?zk(1):"buffer_vod"===e?zk(2):"buffer_clip"===e?zk(3):"chat_brightness"===e?(Om=(.05*Rk("chat_brightness")).toFixed(2),rg(!1)):"force_disable_chat"===e?Ml.Play_ChatForceDisable=Rk("force_disable_chat"):"chat_font_size"===e?Yh():"clock_offset"===e&&(Xk(),tf())}function zk(e){try{e?1===e?(qm=1e3*Nk("buffer_live"),mu&&Android.SetBuffer(1,qm)):2===e?(dv=1e3*Nk("buffer_vod"),mu&&Android.SetBuffer(2,dv)):3===e&&(Zf=1e3*Nk("buffer_clip"),mu&&Android.SetBuffer(3,Zf)):(qm=1e3*Nk("buffer_live"),dv=1e3*Nk("buffer_vod"),Zf=1e3*Nk("buffer_clip"),mu&&(Android.SetBuffer(1,qm),Android.SetBuffer(2,dv),Android.SetBuffer(3,Zf)))}catch(e){}}function Xk(){var e=Rk("clock_offset");fu=e<48?-9e5*(48-e):9e5*(e-48)}function jk(e){var t;switch(e.keyCode){case Na:$u()?Ku():t_()?e_():(xk(),l_());break;case La:0<Rk(t=Ek[kk])&&(Ck[t].defaultValue-=1,qk(kk));break;case Oa:Rk(t=Ek[kk])<Fk(t)&&(Ck[t].defaultValue+=1,qk(kk));break;case Ba:0<kk&&(Dk(),Hk(--kk));break;case Ga:kk<Sk-1&&(Dk(),Hk(++kk))}}var Wk=0,Yk=0,Kk=!1,$k=0,Zk=!1,Qk=0,eC=5,tC=3500,nC=[],aC=0,iC=!1,oC=!1,sC="",dC=!1,rC=["uc_thumbdiv","uc_img","uc_infodiv","uc_displayname","uc_cell","ucempty_","user_channels_scroll"];function cC(){Ml.Main_CenterLablesVectorPos=1,Ml.Main_Go=hl,Ml.isLastSChannels=!1,xu("label_side_panel","icon-arrow-circle-left",x),Bu("top_bar_user","icon_center_focus"),Gu("top_bar_user",u+g_(Di[Ml.Users_Position].name+Q)),document.body.addEventListener("keydown",wC,!1),sC!==Di[Ml.Users_Position].name&&(oC=!1),oC?(M_(Wk),Tu(rC[6]),yC(),__()):uC()}function lC(){Ml.Users_Position=0,Ou("top_bar_user","icon_center_focus"),document.body.removeEventListener("keydown",wC),Au("top_bar_user",u),xu("label_side_panel","icon-ellipsis",Dn),Pu(rC[6])}function uC(){b_("stream_table_user_channels"),Pu(rC[6]),Nu(),Wu(),sC=Di[Ml.Users_Position].name,Wk=Yk=$k=aC=0,dC=Kk=oC=!1,mf=!0,Vu(),nC=[],_C(),fC()}function _C(){k_(),Zk=!0,Qk=0,tC=3500}function fC(){xf("https://api.twitch.tv/kraken/users/"+encodeURIComponent(Di[Ml.Users_Position].id)+"/follows/channels?limit=100&offset="+aC+"&sortby=created_at&",tC,2,null,hC,mC)}function mC(){++Qk<eC?(tC+=500,fC()):(Zk=!1,$k?(Kk=!0,vC()):(mf=!1,Uu(),ju(L)))}function hC(e){var t=JSON.parse(e).follows,n=t.length;if(n){for(var a="",i=0;i<n;i++)a=t[i].channel.name+","+t[i].channel._id+","+t[i].channel.logo+","+t[i].channel.display_name,-1===nC.indexOf(a)&&nC.push(a);aC+=n,_C(),fC()}else nC.sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}),pC()}function pC(){var e=Yl,t=$k,n=nC.length-t;n<e&&(e=n),e<Yl&&(Kk=!0),iC=!($k+=e);var a=e/Kl;0<e%Kl&&a++;for(var i,o,s,d=t,r=document.getElementById("stream_table_user_channels"),c=0;c<a;c++){for(o=t/Kl+c,s=document.createElement("tr"),i=0;i<Kl&&d<nC.length;i++,d++)s.appendChild(gC(o,o+"_"+i,nC[d].split(",")));for(;i<Kl;i++)Kk&&!dC&&(dC=!0,$k=o*Kl+i),s.appendChild(I_(rC[5]+o+"_"+i));r.appendChild(s)}vC()}function gC(e,t,n){return e<4&&S_(n[2]),x_(t,rC,n)}function vC(){oC?w_(vu):(iC?ju(B+Q):(oC=!0,w_(vu),yC(),__()),Tu(rC[6]),mf=!1,Uu()),Zk=!1,Ju(Yk,Wk,Kl,$k)}function yC(){H_(Wk,Yk,rC,Kl,$k),$k/Kl<Wk+$l&&!Kk&&!Zk&&(_C(),fC()),Il&&bC()}function bC(){$k&&Y_(Wk+"_"+Yk,rC)}function wC(e){var t;if(!mf&&!F_())switch(R_(),e.keyCode){case Na:t_()?e_():$u()?Ku():(bC(),pf(wC));break;case La:if(s_(Wk,Yk-1,rC[0]))bC(),Yk--,yC();else for(t=Kl-1;-1<t;t--)if(s_(Wk-1,t,rC[0])){bC(),Wk--,Yk=t,yC();break}break;case Oa:s_(Wk,Yk+1,rC[0])?(bC(),Yk++,yC()):s_(Wk+1,0,rC[0])&&(bC(),Wk++,Yk=0,yC());break;case Ba:for(t=0;t<Kl;t++)if(s_(Wk-1,Yk-t,rC[0])){bC(),Wk--,Yk-=t,yC();break}break;case Ga:for(t=0;t<Kl;t++)if(s_(Wk+1,Yk-t,rC[0])){bC(),Wk++,Yk-=t,yC();break}break;case Pa:case xa:case Ta:case Aa:Ml.Main_selectedChannel=document.getElementById(rC[4]+Wk+"_"+Yk).getAttribute(ru),Ml.Main_selectedChannel_id=document.getElementById(rC[4]+Wk+"_"+Yk).getAttribute("data-id"),Ml.Main_selectedChannelDisplayname=document.getElementById(rC[3]+Wk+"_"+Yk).textContent,Ml.Main_selectedChannelLogo=document.getElementById(rC[1]+Wk+"_"+Yk).src,document.body.removeEventListener("keydown",wC),Ml.Main_BeforeChannel=hl,Ml.Main_Go=ul,Ml.Main_BeforeChannelisSet=!0,zs=Xa=!0,Pu(rC[6]),l_()}}var kC=0,CC=0,MC=!1,EC=0,SC={},IC=[],xC=!1,PC=0,TC=5,LC=3500,BC=0,OC=0,GC=!1,AC=["uh_thumbdiv","uh_img","uh_infodiv","uh_displayname","uh_hosttitle","uh_hostgame","uh_viwers","uh_quality","uh_cell","uhempty_","user_host_scroll"],NC=!1,UC="",RC=!1;function FC(){Ml.Main_CenterLablesVectorPos=1,Ml.Main_Go=sl,xu("label_side_panel","icon-arrow-circle-left",x),Bu("top_bar_user","icon_center_focus"),Gu("top_bar_user",u+g_(Di[Ml.Users_Position].name+$)),document.body.addEventListener("keydown",ZC,!1),UC!==Di[Ml.Users_Position].name&&(NC=!1),NC?(M_(kC),Tu(AC[10]),KC(),__()):DC()}function HC(){Ml.Users_Position=0,Ou("top_bar_user","icon_center_focus"),document.body.removeEventListener("keydown",ZC),Au("top_bar_user",u),xu("label_side_panel","icon-ellipsis",Dn),Pu(AC[10])}function DC(){b_("stream_table_user_host"),Pu(AC[10]),Nu(),Wu(),UC=Di[Ml.Users_Position].name,NC=!1,SC={},EC=OC=BC=0,kC=CC=0,MC=!(mf=!(RC=!(IC=[]))),Vu(),qC(),VC()}function qC(){k_(),xC=!0,PC=0,LC=3500}function VC(){var e=EC+BC;e&&OC-1<e&&(e=OC-Vl,MC=!0),xf("https://api.twitch.tv/api/users/"+encodeURIComponent(Di[Ml.Users_Position].name)+"/followed/hosting?limit="+Vl+"&offset="+e,LC,2,null,zC,JC)}function JC(){++PC<TC?(LC+=500,VC()):(xC=!1,EC?(MC=!0,XC()):(mf=!1,Uu(),ju(L)))}function zC(e){var t=JSON.parse(e),n=t.hosts.length;OC=parseInt(t._total),n<Vl&&(MC=!0);var a=EC;GC=!(EC+=n);var i=n/Jl;0<n%Jl&&i++;for(var o,s,d,r,c,l=0,u=document.getElementById("stream_table_user_host"),_=0;_<i;_++){for(s=a/Jl+_,d=document.createElement("tr"),o=0;o<Jl&&l<n;o++,l++)c=(r=t.hosts[l]).target._id+""+r._id,SC[c]?o--:(SC[c]=1,d.appendChild(L_(s,s+"_"+o,[r.target.channel.name,r.target._id],AC,[r.target.preview_urls.template.replace("{width}x{height}",ou),r.display_name+ae+r.target.channel.display_name,r.target.title,r.target.meta_game,h.charAt(1).toUpperCase()+h.slice(2)+a_(r.target.viewers)+q,""])));for(;o<Jl;o++)MC&&!RC&&(RC=!0,EC=s*Jl+o),d.appendChild(I_(AC[9]+s+"_"+o)),IC.push(AC[9]+s+"_"+o);u.appendChild(d)}XC()}function XC(){if(NC){if(w_(yu),0<IC.length&&!MC)return qC(),void jC();Ju(CC,kC,Jl,EC),IC=[]}else GC?ju(B+$):(NC=!0,KC(),w_(yu),__()),Tu(AC[10]),mf=!1,Uu();xC=!1}function jC(){Xu(IC.length);var e=EC+BC;e&&OC-1<e&&(e=OC-Zl,MC=!0),xf("https://api.twitch.tv/api/users/"+encodeURIComponent(Di[Ml.Users_Position].name)+"/followed/hosting?limit="+Zl+"&offset="+e,LC,2,null,YC,WC)}function WC(){++PC<TC?(LC+=500,jC()):(MC=!0,EC-=IC.length,IC=[],XC())}function YC(e){var t,n,a=JSON.parse(e),i=a.streams.length,o=0,s=0,d=[];for(OC=parseInt(a._total),i<Zl&&(MC=!0);o<IC.length&&s<i;o++,s++)n=(t=a.hosts[s]).target._id+""+t._id,SC[n]?o--:(SC[n]=1,B_(IC[o],[t.target.channel.name,t.target._id],[t.target.preview_urls.template.replace("{width}x{height}",ou),t.display_name+ae+t.target.channel.display_name,t.target.title,t.target.meta_game,h.charAt(1).toUpperCase()+h.slice(2)+a_(t.target.viewers)+q,""],AC),d.push(o));for(o=d.length-1;-1<o;o--)IC.splice(d[o],1);BC+=s,MC&&(EC-=IC.length,IC=[]),XC()}function KC(){D_(kC,CC,AC,Jl,EC),EC/Jl<kC+zl&&!MC&&!xC&&(qC(),VC()),Il&&$C()}function $C(){EC&&Y_(kC+"_"+CC,AC)}function ZC(e){var t;if(!mf&&!F_())switch(R_(),e.keyCode){case Na:t_()?e_():$u()?Ku():($C(),pf(ZC));break;case La:if(s_(kC,CC-1,AC[0]))$C(),CC--,KC();else for(t=Jl-1;-1<t;t--)if(s_(kC-1,t,AC[0])){$C(),kC--,CC=t,KC();break}break;case Oa:s_(kC,CC+1,AC[0])?($C(),CC++,KC()):s_(kC+1,0,AC[0])&&($C(),kC++,CC=0,KC());break;case Ba:for(t=0;t<Jl;t++)if(s_(kC-1,CC-t,AC[0])){$C(),kC--,CC-=t,KC();break}break;case Ga:for(t=0;t<Jl;t++)if(s_(kC+1,CC-t,AC[0])){$C(),kC++,CC-=t,KC();break}break;case Pa:case xa:case Ta:case Aa:V_(kC+"_"+CC,AC,ZC)}}var QC,eM=!1,tM=0,nM=3500,aM=0,iM=5,oM=0,sM=!1,dM="",rM=0,cM={},lM=!1,uM=[],_M=null,fM=["ulf_thumbdiv","ulf_img","ulf_infodiv","ulf_displayname","ulf_streamtitle","ulf_streamgame","ulf_viwers","ulf_quality","ulf_cell","ulempty_","user_live_scroll"];function mM(){ao()&&(TM(),lM?UM(Dm,fM[0])&&(_M=JSON.parse(document.getElementById(fM[8]+Dm).getAttribute(ru))[0]):_M=null,b_("user_feed_scroll"),lM=!1,document.getElementById("user_feed_scroll").style.left="2.5px",document.getElementById("user_feed").style.bottom="0.1%",Tu("dialog_loading_feed"),dM="",rM=oM=aM=0,Dm=0,cM={},uM=[],Z_(function(){gM(),vM()}))}function hM(e){for(var t,n=0;n<uM.length;n++)null!==(t=document.getElementById(uM[n].id))&&wu(t,uM[n].src+hu,e)}function pM(e,t){uM.push({id:e,src:t})}function gM(){eM=!0,tM=0,nM=3500}function vM(){xf("https://api.twitch.tv/kraken/users/"+encodeURIComponent(Di[Ml.Users_Position].id)+"/follows/channels?limit=100&offset="+aM+"&sortby=created_at",nM,2,null,bM,yM)}function yM(){++tM<iM?(nM+=500,vM()):(eM=!1,oM?(sM=!0,MM()):(Pu("dialog_loading_feed"),SM()&&(Rp(L),window.setTimeout(function(){Fp()},2e3))))}function bM(e){var t=JSON.parse(e).follows,n=t.length;if(n){for(var a="",i=0;i<n;i++)a=t[i].channel._id+",",-1===dM.indexOf(a)&&(dM+=a);aM+=n,gM(),vM()}else dM=dM.slice(0,-1),gM(),Z_(wM)}function wM(){xf("https://api.twitch.tv/kraken/streams/?channel="+encodeURIComponent(dM)+"&limit=100&offset=0&stream_type=all",nM,2,null,CM,kM)}function kM(){++tM<iM?(nM+=500,wM()):(eM=!1,Pu("dialog_loading_feed"),SM()&&(Rp(L),window.setTimeout(function(){Fp()},2e3)))}function CM(e){var t=JSON.parse(e),n=t.streams.length;n<Vl&&(sM=!0),oM+=n;for(var a,i,o=document.getElementById("user_feed_scroll"),s=0;s<n;s++)i=(a=t.streams[s]).channel._id,cM[i]||(cM[i]=1,null!==_M&&_M===a.channel.name&&(Dm=s),o.appendChild(EM(s,[a.channel.name,i],fM,[a.preview.template.replace("{width}x{height}",ou),o_(JSON.stringify(a.stream_type))+a.channel.display_name,a.channel.status,a.game,y+Pp(a.created_at)+b+", "+h+a_(a.viewers)+q,i_(a.video_height,a.average_fps,a.channel.language)])));MM()}function MM(){lM=!(eM=!1),hM(yu),Z_(function(){Pu("dialog_loading_feed"),OM()})}function EM(e,t,n,a){return pM(n[1]+e,a[0]),(Ol=document.createElement("div")).setAttribute("id",n[8]+e),Ol.setAttribute(ru,JSON.stringify(t)),Ol.className="user_feed_thumb",Ol.innerHTML='<div id="'+n[0]+e+'" class="stream_thumbnail_clip" ><div><img id="'+n[1]+e+'" class="stream_img"></div><div id="'+n[2]+e+'" class="stream_text2"><div id="'+n[3]+e+'" class="stream_channel" style="width: 66%; display: inline-block;">'+a[1]+'</div><div id="'+n[5]+e+'"class="stream_info">'+g+a[3]+"</div></div></div>",Ol}function SM(){return Lu("user_feed")}function IM(){var e=ao();e&&(Hm!==Di[Ml.Users_Position].name&&(lM=!1),Hm=Di[Ml.Users_Position].name),e&&UM(0,fM[0])||(lM=!1),lM||eM||mM(),e&&(document.getElementById("user_feed").style.bottom="0.1%",Tu("user_feed"),OM())}function xM(){Pu("user_feed")}function PM(){TM(),LM()}function TM(){window.clearTimeout(QC)}function LM(){SM()&&(QC=window.setTimeout(xM,5500))}function BM(){TM(),eM?window.setTimeout(function(){eM=!1},15e3):mM()}function OM(){PM(),UM(Dm,fM[0])&&(Bu(fM[0]+Dm,"feed_thumbnail_focused"),SM()?AM():Lu("scene2")&&NM())}function GM(){return Dm<3?2.5:UM(Dm+2,fM[0])?-1*document.getElementById(fM[8]+(Dm-2)).offsetLeft:UM(Dm+1,fM[0])?-1*document.getElementById(fM[8]+(Dm-3)).offsetLeft:-1*document.getElementById(fM[8]+(Dm-(3<Dm?4:3))).offsetLeft}function AM(){var e=GM();e&&(document.getElementById("user_feed_scroll").style.left=e+"px")}function NM(){document.getElementById("user_feed").style.bottom="-1000%",Tu("user_feed");var e=AM();e&&(document.getElementById("user_feed_scroll").style.left=e+"px"),document.getElementById("user_feed").style.bottom="0.1%",Pu("user_feed")}function UM(e,t){return null!==document.getElementById(t+e)}function RM(){UM(Dm,fM[0])&&Ou(fM[0]+Dm,"feed_thumbnail_focused")}var FM=0,HM=0,DM=!1,qM=0,VM={},JM=[],zM=!1,XM=0,jM=5,WM=3500,YM=0,KM=0,$M=0,ZM=!1,QM=["ul_thumbdiv","ul_img","ul_infodiv","ul_displayname","ul_streamtitle","ul_streamgame","ul_viwers","ul_quality","ul_cell","ulempty_","user_live_scroll"],eE=!1,tE="",nE="",aE=!1;function iE(){Ml.Main_CenterLablesVectorPos=1,Ml.Main_Go=ol,xu("label_side_panel","icon-arrow-circle-left",x),Bu("top_bar_user","icon_center_focus"),Gu("top_bar_user",u+g_(Di[Ml.Users_Position].name+K)),document.body.addEventListener("keydown",bE,!1),nE!==Di[Ml.Users_Position].name&&(eE=!1),eE?(M_(FM),Tu(QM[10]),vE(),__()):sE()}function oE(){Ml.Users_Position=0,Ou("top_bar_user","icon_center_focus"),document.body.removeEventListener("keydown",bE),Au("top_bar_user",u),xu("label_side_panel","icon-ellipsis",Dn),Pu(QM[10])}function sE(){b_("stream_table_user_live"),Pu(QM[10]),Nu(),Wu(),eE=!1,nE=Di[Ml.Users_Position].name,KM=YM=$M=0,VM={},FM=HM=qM=0,DM=!(mf=!(aE=!(JM=[]))),tE="",Vu(),dE(),rE()}function dE(){k_(),zM=!0,XM=0,WM=3500}function rE(){var e,t="https://api.twitch.tv/kraken/users/"+encodeURIComponent(Di[Ml.Users_Position].id)+"/follows/channels?limit=100&offset="+$M+"&sortby=created_at";if(mu){if(!(e=Android.mreadUrl(t,WM,2,null)))return void cE();200===(e=JSON.parse(e)).status?lE(e.responseText):cE()}else(e=new XMLHttpRequest).open("GET",t,!0),e.timeout=WM,e.setRequestHeader(tu,iu),e.setRequestHeader(eu,Ql),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void lE(e.responseText);cE()}},e.send(null)}function cE(){++XM<jM?(WM+=500,rE()):(zM=!1,qM?(DM=!0,mE()):(mf=!1,Uu(),ju(L)))}function lE(e){var t=JSON.parse(e).follows,n=t.length;if(n){for(var a="",i=0;i<n;i++)a=t[i].channel._id+",",-1===tE.indexOf(a)&&(tE+=a);$M+=n,dE(),rE()}else tE=tE.slice(0,-1),dE(),uE()}function uE(){var e=qM+YM;e&&KM-1<e&&(e=KM-Vl,DM=!0);var t,n="https://api.twitch.tv/kraken/streams/?channel="+encodeURIComponent(tE)+"&limit="+Vl+"&offset="+e+"&stream_type=all";if(mu){if(!(t=Android.mreadUrl(n,WM,2,null)))return void _E();200===(t=JSON.parse(t)).status?fE(t.responseText):_E()}else(t=new XMLHttpRequest).open("GET",n,!0),t.timeout=WM,t.setRequestHeader(tu,iu),t.setRequestHeader(eu,Ql),t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void fE(t.responseText);_E()}},t.send(null)}function _E(){++XM<jM?(WM+=500,uE()):(zM=!1,Uu(),ju(L))}function fE(e){var t=JSON.parse(e),n=t.streams.length;KM=parseInt(t._total),n<Vl&&(DM=!0);var a=qM;ZM=!(qM+=n);var i=n/Jl;0<n%Jl&&i++;for(var o,s,d,r,c,l=0,u=document.getElementById("stream_table_user_live"),_=0;_<i;_++){for(s=a/Jl+_,d=document.createElement("tr"),o=0;o<Jl&&l<n;o++,l++)c=(r=t.streams[l]).channel._id,VM[c]?o--:(VM[c]=1,d.appendChild(L_(s,s+"_"+o,[r.channel.name,c],QM,[r.preview.template.replace("{width}x{height}",ou),o_(JSON.stringify(r.stream_type))+r.channel.display_name,r.channel.status,r.game,y+Pp(r.created_at)+b+", "+h+a_(r.viewers)+q,i_(r.video_height,r.average_fps,r.channel.language)])));for(;o<Jl;o++)DM&&!aE&&(aE=!0,qM=s*Jl+o),d.appendChild(I_(QM[9]+s+"_"+o)),JM.push(QM[9]+s+"_"+o);u.appendChild(d)}mE()}function mE(){if(eE){if(w_(yu),0<JM.length&&!DM)return dE(),void hE();Ju(HM,FM,Jl,qM),JM=[]}else ZM?ju(B+K):(eE=!0,vE(),w_(yu),__()),Tu(QM[10]),mf=!1,Uu();zM=!1}function hE(){Xu(JM.length);var e=qM+YM;e&&KM-1<e&&(e=KM-Zl,DM=!0);var t,n="https://api.twitch.tv/kraken/streams/?channel="+encodeURIComponent(tE)+"&limit="+Zl+"&offset="+e+"&stream_type=all";if(mu){if(!(t=Android.mreadUrl(n,WM,2,null)))return void pE();200===(t=JSON.parse(t)).status?gE(t.responseText):pE()}else(t=new XMLHttpRequest).open("GET",+Math.round(1e7*Math.random()),!0),t.timeout=WM,t.setRequestHeader(tu,iu),t.setRequestHeader(eu,Ql),t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void gE(t.responseText);pE()}},t.send(null)}function pE(){++XM<jM?(WM+=500,hE()):(DM=!0,qM-=JM.length,JM=[],mE())}function gE(e){var t,n,a=JSON.parse(e),i=a.streams.length,o=0,s=0,d=[];for(KM=parseInt(a._total),i<Zl&&(DM=!0);o<JM.length&&s<i;o++,s++)n=(t=a.streams[s]).channel._id,VM[n]?o--:(VM[n]=1,B_(JM[o],[t.channel.name,n],[t.preview.template.replace("{width}x{height}",ou),o_(JSON.stringify(t.stream_type))+t.channel.display_name,t.channel.status,t.game,y+Pp(t.created_at)+b+", "+h+a_(t.viewers)+q,i_(t.video_height,t.average_fps,t.channel.language)],QM),d.push(o));for(o=d.length-1;-1<o;o--)JM.splice(d[o],1);YM+=s,DM&&(qM-=JM.length,JM=[]),mE()}function vE(){D_(FM,HM,QM,Jl,qM),qM/Jl<FM+zl&&!DM&&!zM&&(dE(),rE()),Il&&yE()}function yE(){qM&&Y_(FM+"_"+HM,QM)}function bE(e){var t;if(!mf&&!F_())switch(R_(),e.keyCode){case Na:t_()?e_():$u()?Ku():(yE(),pf(bE));break;case La:if(s_(FM,HM-1,QM[0]))yE(),HM--,vE();else for(t=Jl-1;-1<t;t--)if(s_(FM-1,t,QM[0])){yE(),FM--,HM=t,vE();break}break;case Oa:s_(FM,HM+1,QM[0])?(yE(),HM++,vE()):s_(FM+1,0,QM[0])&&(yE(),FM++,HM=0,vE());break;case Ba:for(t=0;t<Jl;t++)if(s_(FM-1,HM-t,QM[0])){yE(),FM--,HM-=t,vE();break}break;case Ga:for(t=0;t<Jl;t++)if(s_(FM+1,HM-t,QM[0])){yE(),FM++,HM-=t,vE();break}break;case Pa:case xa:case Ta:case Aa:V_(FM+"_"+HM,QM,bE)}}var wE=0,kE=0,CE=8,ME=0,EE=null,SE=["u_thumbdiv","u_img","u_infodiv","u_displayname","u_cell","user_scroll"],IE=!1,xE=!0;function PE(){return Pl?(TE(),void Qa(Pl)):lo()?(Ml.Main_CenterLablesVectorPos=1,Ml.Main_Go=ml,document.getElementById("screens_holder").style.top=screen.height/100*7+"px",Wu(),Bu("top_bar_user","icon_center_focus"),document.body.addEventListener("keydown",zE,!1),void(IE?(M_(wE),Tu(SE[5]),NE(),__()):LE())):(Ml.Main_Go=tl,TE(),void l_())}function TE(){Ml.Users_Position=0,Ou("top_bar_user","icon_center_focus"),document.body.removeEventListener("keydown",zE),Pu(SE[5]),document.getElementById("screens_holder").style.top="0"}function LE(){b_("stream_table_user"),Pu(SE[5]),Nu(),Wu(),mf=!(IE=!1),xE=!(wE=kE=0),Z_(function(){BE()})}function BE(){for(var e,t,n,a=document.createElement("tbody"),i=document.getElementById("stream_table_user"),o=0;o<Di.length;o++)t=0,n=o%2?"B5B5B5":"FFFFFF",(Ol=document.createElement("tr")).className="follower_header",Ol.innerHTML='<div class="follower_header">'+(o?"":se)+Di[o].name+R+"</div>",i.appendChild(a),i.appendChild(Ol),(e=document.createElement("tr")).appendChild(OE(o+"_"+t,Ml.Main_selectedChannelDisplayname,K,"play",n)),t++,e.appendChild(OE(o+"_"+t,Ml.Main_selectedChannelDisplayname,$,"users",n)),t++,e.appendChild(OE(o+"_"+t,Ml.Main_selectedChannelDisplayname,cb.isLive?Z:Yt,"gamepad",n)),t++,e.appendChild(OE(o+"_"+t,Ml.Main_selectedChannelDisplayname,nn,"movie-play",n)),t++,e.appendChild(OE(o+"_"+t,Ml.Main_selectedChannelDisplayname,Q,"filmstrip",n)),t++,o?e.appendChild(OE(o+"_"+t,Ml.Main_selectedChannelDisplayname,oe,"arrow-up",n)):e.appendChild(OE(o+"_"+t,Ml.Main_selectedChannelDisplayname,ee,"user-plus",n)),t++,e.appendChild(OE(o+"_"+t,Ml.Main_selectedChannelDisplayname,te,"user-times",n)),t++,e.appendChild(OE(o+"_"+t,Ml.Main_selectedChannelDisplayname,Di[o].access_token?Et:Mt,"key",n)),i.appendChild(e);GE()}function OE(e,t,n,a,i){return(Ol=document.createElement("td")).setAttribute("id",SE[4]+e),Ol.setAttribute(ru,t),Ol.className="stream_cell",Ol.innerHTML='<div id="'+SE[0]+e+'" class="stream_thumbnail_channel" ><div id="'+SE[1]+e+'" class="stream_user_icon" style="color: #'+i+';"><i class="icon-'+a+'"></i></div></div><div id="'+SE[2]+e+'" class="stream_text"><div id="'+SE[3]+e+'" class="stream_info_user" style="text-align: center;">'+n+"</div></div>",Ol}function GE(){Z_(function(){IE||(IE=!0,NE(),Uu(),__()),Tu(SE[5]),xE=mf=!1})}function AE(){for(var e=0;e<Di.length;e++)Au(SE[3]+e+"_2",cb.isLive?Z:Yt)}function NE(){Bu(SE[0]+wE+"_"+kE,"stream_thumbnail_focused"),E_(wE)?1<wE?s_(wE+1,0,SE[0])&&W_(SE[5],-1*document.getElementById(SE[4]+wE+"_"+kE).offsetTop+500):W_(SE[5],screen.height/100*7):N_(),Il&&UE()}function UE(){Sl=!1,Ou(SE[0]+wE+"_"+kE,"stream_thumbnail_focused")}function RE(){return Ml.Users_Position=wE,3!==kE||Di[Ml.Users_Position].access_token?7===kE&&Di[Ml.Users_Position].access_token?(ju(Et),void window.setTimeout(Wu,1500)):(6!==kE&&7!==kE&&(Pu(SE[5]),document.body.removeEventListener("keydown",zE),document.getElementById("screens_holder").style.top="0"),void Z_(function(){kE?1===kE?FC():2===kE?(Gy=cb,Fy()):3===kE?_S():4===kE?cC():5===kE?wE?ro(wE):(Ml.Main_Before=ml,zi()):6===kE?DE():7!==kE||Di[Ml.Users_Position].access_token||DE():iE()})):(ju(Ln),void window.setTimeout(Wu,5e3))}function FE(){window.clearTimeout(EE)}function HE(){EE=window.setTimeout(qE,2e4)}function DE(){HE(),6===kE?Gu("main_dialog_remove",jt+ra+Di[Ml.Users_Position].name+"?"):7===kE&&Gu("main_dialog_remove",gt+" "+Di[Ml.Users_Position].name+"?"),Tu("main_remove_dialog")}function qE(){FE(),Pu("main_remove_dialog"),ME=0,JE()}function VE(){return Lu("main_remove_dialog")}function JE(){ME?(Ou("remove_cancel","button_search_focused"),Bu("remove_yes","button_search_focused")):(Bu("remove_cancel","button_search_focused"),Ou("remove_yes","button_search_focused"))}function zE(e){var t;if(!mf&&!F_())switch(R_(),e.keyCode){case Na:VE()?qE():$u()?Ku():t_()?e_():(UE(),pf(zE));break;case La:if(VE())--ME<0&&(ME=1),JE(),FE(),HE();else if(s_(wE,kE-1,SE[0]))UE(),kE--,NE();else if(s_(wE-1,0,SE[0])){for(t=CE-1;-1<t;t--)if(s_(wE-1,t,SE[0])){UE(),wE--,kE=t,NE();break}}else UE(),kE=CE-1,NE();break;case Oa:VE()?(1<++ME&&(ME=0),JE(),FE(),HE()):(s_(wE,kE+1,SE[0])?(UE(),kE++):(s_(wE+1,0,SE[0])?(UE(),wE++):UE(),kE=0),NE());break;case Ba:for(t=0;t<CE;t++)if(s_(wE-1,kE-t,SE[0])){UE(),wE--,kE-=t,NE();break}break;case Ga:for(t=0;t<CE;t++)if(s_(wE+1,kE-t,SE[0])){UE(),wE++,kE-=t,NE();break}break;case Pa:case xa:case Ta:case Aa:var n;if(VE()){if(6===kE)n=ME,qE(),n&&(document.body.removeEventListener("keydown",zE),TE(),oo(wE));else if(n=ME,qE(),n){Ml.Users_AddcodePosition=Ml.Users_Position,__();var a=Ka,i="https://id.twitch.tv/oauth2/authorize?response_type=code&client_id="+encodeURIComponent(Ql)+"&redirect_uri="+a+"&scope=user_follows_edit+user_subscriptions&force_verify=true";window.location=i}}else RE()}}var XE=0,jE=0,WE=!1,YE=0,KE={},$E=[],ZE=!1,QE=0,eS=5,tS=3500,nS=0,aS=0,iS=!1,oS=!1,sS="time",dS=2,rS=!1,cS=["uv_thumbdiv","uv_img","uv_infodiv","uv_title","uv_streamon","uv_duration","uv_viwers","uv_quality","uv_cell","uvempty_","user_vod_scroll","uv_game"],lS=!1,uS=!1;function _S(){Ml.Main_CenterLablesVectorPos=1,Ml.Main_Go=kl,Bu("top_bar_user","icon_center_focus"),xu("label_side_panel","icon-arrow-circle-left",x),Gu("top_bar_user",u+g_(Di[Ml.Users_Position].name+(uS?N:A))),document.body.addEventListener("keydown",TS,!1),lS?(M_(XE),Tu(cS[10]),LS(),SS(),__()):mS()}function fS(){Ml.Users_Position=0,lS&&IS(),Ou("top_bar_user","icon_center_focus"),xu("label_side_panel","icon-ellipsis",Dn),document.body.removeEventListener("keydown",TS),Au("top_bar_user",u),Pu(cS[10])}function mS(){lS&&IS(),b_("stream_table_user_vod"),Pu(cS[10]),Nu(),LS(),Wu(),rS=lS=!1,aS=nS=0,KE={},XE=jE=YE=0,WE=!(mf=!(oS=!($E=[]))),Vu(),pS()}function hS(){k_(),ZE=!0,QE=0,tS=3500}function pS(){hS(),gS()}function gS(){var e=YE+nS;e&&aS-1<e&&(e=aS-Vl,WE=!0);var t,n="https://api.twitch.tv/kraken/videos/followed?limit="+Vl+"&broadcast_type="+(uS?"highlight":"archive")+"&sort="+sS+"&offset="+e;if(mu){if(!(t=Android.mreadUrl(n,tS,3,au+Di[Ml.Users_Position].access_token)))return void vS();if(200===(t=JSON.parse(t)).status)return void bS(t.responseText);401===t.status||403===t.status?ei(Ml.Users_Position,0,pS,yS):vS()}else(t=new XMLHttpRequest).open("GET",n,!0),t.timeout=tS,t.setRequestHeader(tu,iu),t.setRequestHeader(eu,Ql),t.setRequestHeader(nu,au+Di[Ml.Users_Position].access_token),t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void bS(t.responseText);401===t.status||403===t.status?ei(Ml.Users_Position,0,pS,yS):vS()}},t.send(null)}function vS(){++QE<eS?(tS+=500,gS()):yS()}function yS(){ZE=!1,YE?(WE=!0,wS()):(mf=!1,Uu(),ju(L))}function bS(e){var t=JSON.parse(e),n=t.videos.length;aS=parseInt(t._total),n<Vl&&(WE=!0);var a=YE;iS=!(YE+=n);var i=n/Jl;0<n%Jl&&i++;var o,s,d,r,c,l=0,u=document.getElementById("stream_table_user_vod");if(!rS){var _;for(rS=!0,d=document.createElement("tr"),f=0;f<2;f++)_=f?'<i class="icon-history stream_channel_fallow_icon"></i>'+Ca+Ca+Bn:'<i class="icon-movie-play stream_channel_fallow_icon"></i>'+Ca+Ca+p,(Ol=document.createElement("td")).setAttribute("id",cS[8]+"y_"+f),Ol.className="stream_cell",Ol.innerHTML='<div id="'+cS[0]+"y_"+f+'" class="stream_thumbnail_channel_vod" ><div id="'+cS[3]+"y_"+f+'" class="stream_channel_fallow_game">'+_+"</div></div>",d.appendChild(Ol);u.appendChild(d)}for(var f=0;f<i;f++){for(s=a/Jl+f,d=document.createElement("tr"),o=0;o<Jl&&l<n;o++,l++)c=(r=t.videos[l])._id,-1!==(r.preview.template+"").indexOf("404_processing")||KE[c]?o--:(KE[c]=1,d.appendChild(rI(s,s+"_"+o,[c,r.length,r.language,r.game,r.channel.name,r.increment_view_count_url],[r.preview.template.replace("{width}x{height}",ou),r.channel.display_name,F+v_(r.created_at),LI.parse(r.title)+ra+en+g+r.game,a_(r.views)+D,i_(r.resolutions.chunked.slice(-4),parseInt(r.fps.chunked)||0,r.language),H+Ip(r.length),r.animated_preview_url],cS)));for(;o<Jl;o++)WE&&!oS&&(oS=!0,YE=s*Jl+o),d.appendChild(I_(cS[9]+s+"_"+o)),$E.push(cS[9]+s+"_"+o);u.appendChild(d)}wS()}function wS(){lS?(w_(yu),Ju(jE,XE,Jl,YE)):(iS?ju(B+(uS?N:A)+O+I):(lS=!0,SS(),w_(yu),__()),Tu(cS[10]),mf=!1,Uu()),0<$E.length&&!WE?kS():ZE=!($E=[])}function kS(){hS(),CS()}function CS(){Xu($E.length);var e=YE+nS;e&&aS-1<e&&(e=aS-Zl,WE=!0);var t,n="https://api.twitch.tv/kraken/videos/followed?limit="+Zl+"&broadcast_type="+(uS?"highlight":"archive")+"&sort="+sS+"&offset="+e;if(mu){if(!(t=Android.mreadUrl(n,tS,3,au+Di[Ml.Users_Position].access_token)))return void MS();if(200===(t=JSON.parse(t)).status)return void ES(t.responseText);401===t.status||403===t.status?ei(Ml.Users_Position,0,pS,yS):MS()}else(t=new XMLHttpRequest).open("GET",n,!0),t.timeout=tS,t.setRequestHeader(tu,iu),t.setRequestHeader(eu,Ql),t.setRequestHeader(nu,au+Di[Ml.Users_Position].access_token),t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void ES(t.responseText);401===t.status||403===t.status?ei(Ml.Users_Position,0,pS,yS):MS()}},t.send(null)}function MS(){++QE<eS?(tS+=500,CS()):(WE=!0,YE-=$E.length,$E=[],wS())}function ES(e){var t,n,a=JSON.parse(e),i=a.videos.length,o=0,s=0,d=[];for(aS=parseInt(a._total);o<$E.length&&s<i;o++,s++)n=(t=a.videos[s])._id,-1!==(t.preview.template+"").indexOf("404_processing")||KE[n]?o--:(KE[n]=1,lI($E[o],[n,t.length,t.language,t.game,t.channel.name,t.increment_view_count_url],[t.preview.template.replace("{width}x{height}",ou),t.channel.display_name,F+v_(t.created_at),LI.parse(t.title)+ra+en+g+t.game,a_(t.views)+D,i_(t.resolutions.chunked.slice(-4),parseInt(t.fps.chunked)||0,t.language),H+Ip(t.length),t.animated_preview_url],cS),d.push(o));for(o=d.length-1;-1<o;o--)$E.splice(d[o],1);nS+=s,WE&&(YE-=$E.length,$E=[]),wS()}function SS(){XE<0?xS():(D_(XE,jE,cS,Jl,YE),bI(cS,XE+"_"+jE),YE/Jl<XE+zl&&!WE&&!ZE&&pS(),Il&&IS())}function IS(){window.clearInterval(BS),-1<XE&&YE?(Tu(cS[1]+XE+"_"+jE),Y_(XE+"_"+jE,cS)):PS()}function xS(){var e=1<jE?1:jE;Bu(cS[0]+"y_"+e,du)}function PS(){var e=1<jE?1:jE;Ou(cS[0]+"y_"+e,du)}function TS(e){var t;if(!mf&&!F_())switch(R_(),e.keyCode){case Na:$u()?Ku():$u()?Ku():t_()?e_():(IS(),pf(TS));break;case La:if(-1===XE)PS(),--jE<0&&(jE=1),xS();else if(XE||jE){if(s_(XE,jE-1,cS[0]))IS(),jE--,SS();else for(t=Jl-1;-1<t;t--)if(s_(XE-1,t,cS[0])){IS(),XE--,jE=t,SS();break}}else IS(),PS(),XE=-1,jE=1,xS();break;case Oa:-1===XE?(PS(),1<++jE?(jE=0,iS?xS():(XE=0,SS())):xS()):s_(XE,jE+1,cS[0])?(IS(),jE++,SS()):s_(XE+1,0,cS[0])&&(IS(),XE++,jE=0,SS());break;case Ba:if(-1!==XE||iS)if(XE){for(t=0;t<Jl;t++)if(s_(XE-1,jE-t,cS[0])){IS(),XE--,jE-=t,SS();break}}else IS(),XE=-1,xS();else XE=0,PS(),SS();break;case Ga:if(-1!==XE||iS){for(t=0;t<Jl;t++)if(s_(XE+1,jE-t,cS[0])){IS(),XE++,jE-=t,SS();break}}else XE=0,PS(),SS();break;case Pa:case xa:case Ta:case Aa:-1===XE?(0===jE?kf("UserVod_highlight",(uS=!uS)?"true":"false"):1===dS?dS++:dS--,mS()):X_(XE+"_"+jE,cS,TS)}}function LS(){1===dS?(Gu("top_bar_user",u+g_(Di[Ml.Users_Position].name+" "+(uS?N:A)+Pn)),sS="time"):2===dS&&(Gu("top_bar_user",u+g_(Di[Ml.Users_Position].name+" "+(uS?N:A)+Tn)),sS="views"),kf("UserVod_TypeNumber",dS)}var BS,OS=0,GS=0,AS=!1,NS=0,US={},RS=[],FS=!1,HS=0,DS=5,qS=3500,VS=0,JS=0,zS=!1,XS=!1,jS="week",WS=2,YS=!1,KS=["v_thumbdiv","v_img","v_infodiv","v_title","v_streamon","v_duration","v_viwers","v_quality","v_cell","vempty_","vod_scroll","v_game"],$S=!1,ZS=!1,QS=1,eI=new Image;function tI(){Ml.Main_CenterLablesVectorPos=4,Ml.Main_Go=gl,Bu("top_bar_vod","icon_center_focus"),document.body.addEventListener("keydown",wI,!1),$S?(M_(OS),Tu(KS[10]),kI(),pI(),__()):aI()}function nI(){$S&&gI(),h_(),document.body.removeEventListener("keydown",wI),Ou("top_bar_vod","icon_center_focus"),Au("top_bar_vod",nn),Pu(KS[10])}function aI(){$S&&gI(),b_("stream_table_vod"),Pu(KS[10]),Nu(),kI(),Wu(),YS=$S=!1,JS=VS=0,US={},OS=GS=NS=0,AS=!(mf=!(XS=!(RS=[]))),Vu(),iI(),oI()}function iI(){k_(),FS=!0,HS=0,qS=3500}function oI(){var e=NS+VS;e&&JS-1<e&&(e=JS-Vl,AS=!0),xf("https://api.twitch.tv/kraken/videos/top?limit="+Vl+"&broadcast_type="+(ZS?"highlight":"archive")+"&sort=views&offset="+e+"&period="+jS+(""!==Al?"&language="+Al:""),qS,2,null,dI,sI)}function sI(){++HS<DS?(qS+=500,oI()):(FS=!1,NS?(AS=!0,_I()):(mf=!1,Uu(),ju(L)))}function dI(e){var t=JSON.parse(e),n=t.vods.length;JS=parseInt(t._total),n<Vl&&(AS=!0);var a=NS;zS=!(NS+=n);var i=n/Jl;0<n%Jl&&i++;var o,s,d,r,c,l=0,u=document.getElementById("stream_table_vod");if(!YS){var _;for(YS=!0,d=document.createElement("tr"),f=0;f<2;f++)_=f?'<i class="icon-history stream_channel_fallow_icon"></i>'+Ca+Ca+m:'<i class="icon-movie-play stream_channel_fallow_icon"></i>'+Ca+Ca+p,(Ol=document.createElement("td")).setAttribute("id",KS[8]+"y_"+f),Ol.className="stream_cell",Ol.innerHTML='<div id="'+KS[0]+"y_"+f+'" class="stream_thumbnail_channel_vod" ><div id="'+KS[3]+"y_"+f+'" class="stream_channel_fallow_game">'+_+"</div></div>",d.appendChild(Ol);u.appendChild(d)}for(var f=0;f<i;f++){for(s=a/Jl+f,d=document.createElement("tr"),o=0;o<Jl&&l<n;o++,l++)c=(r=t.vods[l])._id,-1!==(r.preview.template+"").indexOf("404_processing")||US[c]?o--:(US[c]=1,d.appendChild(rI(s,s+"_"+o,[c,r.length,r.language,r.game,r.channel.name,r.increment_view_count_url],[r.preview.template.replace("{width}x{height}",ou),r.channel.display_name,F+v_(r.created_at),LI.parse(r.title)+ra+en+g+r.game,a_(r.views)+D,i_(r.resolutions.chunked.slice(-4),parseInt(r.fps.chunked)||0,r.language),H+Ip(r.length),r.animated_preview_url],KS)));for(;o<Jl;o++)AS&&!XS&&(XS=!0,NS=s*Jl+o),d.appendChild(I_(KS[9]+s+"_"+o)),RS.push(KS[9]+s+"_"+o);u.appendChild(d)}_I()}function rI(e,t,n,a,i){return e<Jl&&S_(a[0]),cI(n,t,a,i)}function cI(e,t,n,a){return(Ol=document.createElement("td")).setAttribute("id",a[8]+t),Ol.setAttribute(ru,JSON.stringify(e)),Ol.className="stream_cell",Ol.innerHTML=uI(t,n,a),Ol}function lI(e,t,n,a){var i=document.getElementById(e),o=e.split(a[9])[1];i.setAttribute(ru,JSON.stringify(t)),i.innerHTML=uI(o,n,a),i.setAttribute("id",a[8]+o)}function uI(e,t,n){return C_(n[1]+e,t[0]),'<div id="'+n[0]+e+'" class="stream_thumbnail_video"'+(t[7]?' style="background-size: 0 0; background-image: url('+t[7]+');"':"")+'><img id="'+n[1]+e+'" class="stream_img"></div><div id="'+n[2]+e+'" class="stream_text"><div id="'+n[3]+e+'" class="stream_info" style="width: 72%; display: inline-block; font-size: 85%;">'+t[1]+'</div><div id="'+n[7]+e+'"class="stream_info" style="width:27%; float: right; text-align: right; display: inline-block;">'+t[5]+'</div><div><div id="'+n[4]+e+'"class="stream_info" style="width: 59%; display: inline-block;">'+t[2]+'</div><div id="'+n[5]+e+'"class="stream_info" style="width: 39%; display: inline-block; float: right; text-align: right;">'+t[6]+'</div></div><div id="'+n[11]+e+'"class="stream_info">'+t[3]+'</div><div id="'+n[6]+e+'"class="stream_info">'+t[4]+"</div></div>"}function _I(){if($S?(w_(yu),Ju(GS,OS,Jl,NS)):(zS?ju(B+(ZS?N:A)+O+I):($S=!0,pI(),w_(yu),__()),Tu(KS[10]),mf=!1,Uu()),0<RS.length&&!AS)return iI(),void fI();FS=!(RS=[])}function fI(){Xu(RS.length);var e=NS+VS;e&&JS-1<e&&(e=JS-Zl,AS=!0),xf("https://api.twitch.tv/kraken/videos/top?limit="+Zl+"&broadcast_type="+(ZS?"highlight":"archive")+"&sort=views&offset="+e+"&period="+jS+(""!==Al?"&language="+Al:""),qS,2,null,hI,mI)}function mI(){++HS<DS?(qS+=500,fI()):(AS=!0,NS-=RS.length,RS=[],_I())}function hI(e){var t,n,a=JSON.parse(e),i=a.vods.length,o=0,s=0,d=[];for(JS=parseInt(a._total);o<RS.length&&s<i;o++,s++)n=(t=a.vods[s])._id,-1!==(t.preview.template+"").indexOf("404_processing")||US[n]?o--:(US[n]=1,lI(RS[o],[n,t.length,t.language,t.game,t.channel.name,t.increment_view_count_url],[t.preview.template.replace("{width}x{height}",ou),t.channel.display_name,F+v_(t.created_at),LI.parse(t.title)+ra+en+g+t.game,a_(t.views)+D,i_(t.resolutions.chunked.slice(-4),parseInt(t.fps.chunked)||0,t.language),H+Ip(t.length),t.animated_preview_url],KS),d.push(o));for(o=d.length-1;-1<o;o--)RS.splice(d[o],1);VS+=s,AS&&(NS-=RS.length,RS=[]),_I()}function pI(){OS<0?vI():(D_(OS,GS,KS,Jl,NS),bI(KS,OS+"_"+GS),NS/Jl<OS+zl&&!AS&&!FS&&(iI(),oI()),Il&&gI())}function gI(){window.clearInterval(BS),-1<OS&&NS?(Tu(KS[1]+OS+"_"+GS),Y_(OS+"_"+GS,KS)):yI()}function vI(){var e=1<GS?1:GS;Bu(KS[0]+"y_"+e,du)}function yI(){var e=1<GS?1:GS;Ou(KS[0]+"y_"+e,du)}function bI(t,n){if(QS){var a=document.getElementById(t[0]+n);eI.onload=function(){Pu(t[1]+n),a.style.backgroundSize="612px";var e=0;BS=window.setInterval(function(){a.style.backgroundPosition="0px "+ ++e%10*-344+"px"},650)},eI.src=a.style.backgroundImage.replace(/url\(['"]?(.*?)['"]?\)/i,"$1")}}function wI(e){var t;if(!mf&&!F_())switch(R_(),e.keyCode){case Na:t_()?e_():$u()?Ku():(gI(),pf(wI));break;case La:if(-1===OS)yI(),--GS<0&&(GS=1),vI();else if(OS||GS){if(s_(OS,GS-1,KS[0]))gI(),GS--,pI();else for(t=Jl-1;-1<t;t--)if(s_(OS-1,t,KS[0])){gI(),OS--,GS=t,pI();break}}else gI(),yI(),OS=-1,GS=1,vI();break;case Oa:-1===OS?(yI(),1<++GS?(GS=0,zS?vI():(OS=0,pI())):vI()):s_(OS,GS+1,KS[0])?(gI(),GS++,pI()):s_(OS+1,0,KS[0])&&(gI(),OS++,GS=0,pI());break;case Ba:if(-1!==OS||zS)if(OS){for(t=0;t<Jl;t++)if(s_(OS-1,GS-t,KS[0])){gI(),OS--,GS-=t,pI();break}}else gI(),OS=-1,vI();else OS=0,yI(),pI();break;case Ga:if(-1!==OS||zS){for(t=0;t<Jl;t++)if(s_(OS+1,GS-t,KS[0])){gI(),OS++,GS-=t,pI();break}}else OS=0,yI(),pI();break;case Pa:case xa:case Ta:case Aa:-1===OS?(0===GS?kf("Vod_highlight",(ZS=!ZS)?"true":"false"):4<++WS&&(WS=1),aI()):X_(OS+"_"+GS,KS,wI)}}function kI(){1===WS?(Gu("top_bar_vod",nn+g_((ZS?N:A)+re)),jS="day"):2===WS?(Gu("top_bar_vod",nn+g_((ZS?N:A)+ce)),jS="week"):3===WS?(Gu("top_bar_vod",nn+g_((ZS?N:A)+le)),jS="month"):4===WS&&(Gu("top_bar_vod",nn+g_((ZS?N:A)+ue)),jS="all"),kf("vod_periodNumber",WS)}function CI(e,t,n){if(n.restrictions){if(n.restrictions.channels&&n.restrictions.channels.length&&-1===n.restrictions.channels.indexOf(Ml.Play_selectedChannel))return t;if(n.restrictions.games&&n.restrictions.games.length)return t}return t.replace(n.code,MI(n))}function MI(e){return'<img class="emoticon '+e.source+"-emo-"+e.id+'" src="'+e["1x"]+'" srcset="'+e["2x"]+" 2x, "+e["3x"]+' 4x" />'}function EI(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function SI(e,t){for(var n=t.split(" "),a=0;a<n.length;a++){var i=n[a],o=i.replace(/(^[~!@#$%\^&\*\(\)]+|[~!@#$%\^&\*\(\)]+$)/g,""),s=Pr[o]||Pr[i];i=s?CI(e,i,s):EI(i),n[a]=i}return n.join(" ")}function II(e){return'<img class="emoticon" src="https://static-cdn.jtvnw.net/emoticons/v1/'+e+'/1.0" srcset="https://static-cdn.jtvnw.net/emoticons/v1/'+e+"/2.0 2x, https://static-cdn.jtvnw.net/emoticons/v1/"+e+'/3.0 4x" />'}function xI(t,a){if(!a)return[t];var n=[],e=Object.keys(a),i=[];return e.forEach(function(e){for(var t=a[e],n=t.length-1;0<=n;n--)i.push({id:e,first:t[n][0],last:t[n][1]})}),i.sort(function(e,t){return t.first-e.first}),t=punycode.ucs2.decode(t),i.forEach(function(e){n.unshift(punycode.ucs2.encode(t.slice(e.last+1))),n.unshift([II(e.id)]),t=t.slice(0,e.first)}),n.unshift(punycode.ucs2.encode(t)),n}function PI(a){return Object.keys(a).map(function(n){var e=a[n];return e.type=n,e.versions=Object.keys(a[n].versions).map(function(e){var t=a[n].versions[e];return t.type=e,t}),e})}function TI(e,t,n,a){var i=document.createElement("style");i.type="text/css",i.innerHTML="."+e+"-"+t+' { background-image: url("'+n.replace("http:","https:")+'"); }',a?a.appendChild(i):document.head.appendChild(i)}window.parseIRC=function(e){var t={raw:e,tags:{},prefix:null,command:null,params:[]},n=0,a=0;if(64===e.charCodeAt(0)){if(-1===(a=e.indexOf(" ")))return null;for(var i=e.slice(1,a).split(";"),o=0;o<i.length;o++){var s=i[o].split("=");t.tags[s[0]]=s[1]||!0}n=a+1}for(;32===e.charCodeAt(n);)n++;if(58===e.charCodeAt(n)){if(-1===(a=e.indexOf(" ",n)))return null;for(t.prefix=e.slice(n+1,a),n=a+1;32===e.charCodeAt(n);)n++}if(-1===(a=e.indexOf(" ",n)))return e.length>n?(t.command=e.slice(n),t):null;for(t.command=e.slice(n,a),n=a+1;32===e.charCodeAt(n);)n++;for(;n<e.length;){if(a=e.indexOf(" ",n),58===e.charCodeAt(n)){t.params.push(e.slice(n+1));break}if(-1===a){if(-1===a){t.params.push(e.slice(n));break}}else for(t.params.push(e.slice(n,a)),n=a+1;32===e.charCodeAt(n);)n++}return t},function(e){var t="object"==typeof global&&global;t.global!==t&&t.window!==t&&t.self!==t||(e=t);var n,g=2147483647,v=36,y=26,i=38,o=700,a=/^xn--/,s=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,r={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},c=v-1,b=Math.floor,w=String.fromCharCode;function k(e){throw new RangeError(r[e])}function l(e,t){for(var n=e.length,a=[];n--;)a[n]=t(e[n]);return a}function u(e,t){var n=e.split("@"),a="";return 1<n.length&&(a=n[0]+"@",e=n[1]),a+l((e=e.replace(d,".")).split("."),t).join(".")}function C(e){for(var t,n,a=[],i=0,o=e.length;i<o;)55296<=(t=e.charCodeAt(i++))&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?a.push(((1023&t)<<10)+(1023&n)+65536):(a.push(t),i--):a.push(t);return a}function M(e){return l(e,function(e){var t="";return 65535<e&&(t+=w((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+w(e)}).join("")}function E(e,t){return e+22+75*(e<26)-((0!==t)<<5)}function S(e,t,n){var a=0;for(e=n?b(e/o):e>>1,e+=b(e/t);c*y>>1<e;a+=v)e=b(e/c);return b(a+(c+1)*e/(e+i))}function _(e){var t,n,a,i,o,s,d,r,c,l,u,_=[],f=e.length,m=0,h=128,p=72;for((n=e.lastIndexOf("-"))<0&&(n=0),a=0;a<n;++a)128<=e.charCodeAt(a)&&k("not-basic"),_.push(e.charCodeAt(a));for(i=0<n?n+1:0;i<f;){for(o=m,s=1,d=v;f<=i&&k("invalid-input"),u=e.charCodeAt(i++),(v<=(r=u-48<10?u-22:u-65<26?u-65:u-97<26?u-97:v)||r>b((g-m)/s))&&k("overflow"),m+=r*s,!(r<(c=d<=p?1:p+y<=d?y:d-p));d+=v)s>b(g/(l=v-c))&&k("overflow"),s*=l;p=S(m-o,t=_.length+1,0===o),b(m/t)>g-h&&k("overflow"),h+=b(m/t),m%=t,_.splice(m++,0,h)}return M(_)}function f(e){var t,n,a,i,o,s,d,r,c,l,u,_,f,m,h,p=[];for(_=(e=C(e)).length,t=128,o=72,s=n=0;s<_;++s)(u=e[s])<128&&p.push(w(u));for(a=i=p.length,i&&p.push("-");a<_;){for(d=g,s=0;s<_;++s)t<=(u=e[s])&&u<d&&(d=u);for(d-t>b((g-n)/(f=a+1))&&k("overflow"),n+=(d-t)*f,t=d,s=0;s<_;++s)if((u=e[s])<t&&++n>g&&k("overflow"),u===t){for(r=n,c=v;!(r<(l=c<=o?1:o+y<=c?y:c-o));c+=v)h=r-l,m=v-l,p.push(w(E(l+h%m,0))),r=b(h/m);p.push(w(E(r,0))),o=S(n,f,a===i),n=0,++a}++n,++t}return p.join("")}n={version:"1.4.1",ucs2:{decode:C,encode:M},decode:_,encode:f,toASCII:function(e){return u(e,function(e){return s.test(e)?"xn--"+f(e):e})},toUnicode:function(e){return u(e,function(e){return a.test(e)?_(e.slice(4).toLowerCase()):e})}},e.punycode=n}(this),function(e,t){e.ReconnectingWebSocket=function(){if("WebSocket"in window)return u.prototype.onopen=function(){},u.prototype.onclose=function(){},u.prototype.onconnecting=function(){},u.prototype.onmessage=function(){},u.prototype.onerror=function(){},u.debugAll=!1,u.CONNECTING=WebSocket.CONNECTING,u.OPEN=WebSocket.OPEN,u.CLOSING=WebSocket.CLOSING,u.CLOSED=WebSocket.CLOSED,u;function u(e,t,n){var a={debug:!1,automaticOpen:!0,reconnectInterval:1e3,maxReconnectInterval:3e4,reconnectDecay:1.5,timeoutInterval:3e3,maxReconnectAttempts:null,binaryType:"blob"};for(var i in n||(n={}),a)void 0!==n[i]?this[i]=n[i]:this[i]=a[i];this.url=e,this.reconnectAttempts=0,this.readyState=WebSocket.CONNECTING,this.protocol=null;var o,s=this,d=!1,r=!1,c=document.createElement("div");function l(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}c.addEventListener("open",function(e){s.onopen(e)}),c.addEventListener("close",function(e){s.onclose(e)}),c.addEventListener("connecting",function(e){s.onconnecting(e)}),c.addEventListener("message",function(e){s.onmessage(e)}),c.addEventListener("error",function(e){s.onerror(e)}),this.addEventListener=c.addEventListener.bind(c),this.removeEventListener=c.removeEventListener.bind(c),this.dispatchEvent=c.dispatchEvent.bind(c),this.open=function(a){if((o=new WebSocket(s.url,t||[])).binaryType=this.binaryType,a){if(this.maxReconnectAttempts&&this.reconnectAttempts>this.maxReconnectAttempts)return}else c.dispatchEvent(l("connecting")),this.reconnectAttempts=0;(s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","attempt-connect",s.url);var e=o,i=setTimeout(function(){(s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","connection-timeout",s.url),r=!0,e.close(),r=!1},s.timeoutInterval);o.onopen=function(){clearTimeout(i),(s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","onopen",s.url),s.protocol=o.protocol,s.readyState=WebSocket.OPEN,s.reconnectAttempts=0;var e=l("open");e.isReconnect=a,a=!1,c.dispatchEvent(e)},o.onclose=function(e){if(clearTimeout(i),o=null,d)s.readyState=WebSocket.CLOSED,c.dispatchEvent(l("close"));else{s.readyState=WebSocket.CONNECTING;var t=l("connecting");t.code=e.code,t.reason=e.reason,t.wasClean=e.wasClean,c.dispatchEvent(t),a||r||((s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","onclose",s.url),c.dispatchEvent(l("close")));var n=s.reconnectInterval*Math.pow(s.reconnectDecay,s.reconnectAttempts);setTimeout(function(){s.reconnectAttempts++,s.open(!0)},n>s.maxReconnectInterval?s.maxReconnectInterval:n)}},o.onmessage=function(e){(s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","onmessage",s.url,e.data);var t=l("message");t.data=e.data,c.dispatchEvent(t)},o.onerror=function(e){(s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","onerror",s.url,e),c.dispatchEvent(l("error"))}},!0===this.automaticOpen&&this.open(!1),this.send=function(e){if(o)return(s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","send",s.url,e),o.send(e);throw"INVALID_STATE_ERR : Pausing to reconnect websocket"},this.close=function(e,t){void 0===e&&(e=1e3),d=!0,o&&o.close(e,t)},this.refresh=function(){o&&o.close()}}}()}(this);var LI=function(){var e={parse:function(e,t){return t||(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;")),a(e,function(e){var t=function(e){for(var t=e.indexOf(d)<0?e.replace(s,""):e,n=[],a=0,i=0,o=0;o<t.length;)a=t.charCodeAt(o++),i?(n.push((65536+(i-55296<<10)+(a-56320)).toString(16)),i=0):55296<=a&&a<=56319?i=a:n.push(a.toString(16));return n.join("-")}(e);return t?'<img class="emoji" src="https://twemoji.maxcdn.com/2/72x72/'+t+'.png"/>':e})},replace:a},n=/(?:\ud83d[\udc68\udc69])(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddb0-\uddb3])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f)|[\u0023\u002a\u0030-\u0039]\ufe0f?\u20e3|(?:[\u00a9\u00ae\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddb5\uddb6\uddb8\uddb9\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a-\udc6d\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\udeeb\udeec\udef4-\udef9]|\ud83e[\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd40-\udd45\udd47-\udd70\udd73-\udd76\udd7a\udd7c-\udda2\uddb4\uddb7\uddc0-\uddc2\uddd0\uddde-\uddff]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,s=/\uFE0F/g,d=String.fromCharCode(8205);return e;function a(e,t){return String(e).replace(n,t)}}();