var t,n,a,e,i,o,s,d,c,l,p,m,r,u,_,f,g,h,v,y,b,w,k,C,M,E,I,S,P,x,L,T,B,O,G,A,N,U,F,D,R,V,H,J,q,z,j,X,W,Y,K,$,Z,Q,ee,te,ne,ae,ie,oe,se,de,ce,le,re,ue,_e,fe,me,he,pe,ge,ve,ye,be,we,ke,Ce,Me,Ee,Ie,Se,Pe,xe,Le,Te,Be,Oe,Ge,Ae,Ne,Ue,Fe,De,Re,Ve,He,Je,qe,ze,je,Xe,We,Ye,Ke,$e,Ze,Qe,et,tt,nt,at,it,ot,st,dt,ct,lt,rt,ut,_t,ft,mt,ht,pt,gt,vt,yt,bt,wt,kt,Ct,Mt,Et,It,St,Pt,xt,Lt,Tt,Bt,Ot,Gt,At,Nt,Ut,Ft,Dt,Rt,Vt,Ht,Jt,qt,zt,jt,Xt,Wt,Yt,Kt,$t,Zt,Qt,en,tn,nn,an,on,sn,dn,cn,ln,rn,un,_n,fn,mn,hn,pn,gn,vn,yn,bn,wn,kn,Cn,Mn,En,In,Sn,Pn,xn,Ln,Tn,Bn,On,Gn,An,Nn,Un,Fn,Dn,Rn,Vn,Hn,Jn,qn,zn,jn,Xn,Wn,Yn,Kn,$n,Zn,Qn,ea,ta,na,aa,ia="fglfgl27@gmail.com",oa="<br>",sa='<i class="icon-circle" style="font-size: 50%; vertical-align: middle; font-weight: bold;"></i>  ',da='<div class="about_text_title">',ca='<div class="about_text_title" style="text-align: left;">',la='<div style="text-align: left;">',ra="",ua="",_a="",fa="",ma="",ha="",pa="",ga="",va="",ya="&nbsp;",ba='<div style="vertical-align: middle; display: inline-block;"><i class="icon-twitch" style="color: #FFFFFF; font-size: 115%; "></i></div><div style="vertical-align: middle; display: inline-block">'+ya;function wa(){ra=e+" (C)",ua=n+" (D)",fa=a+" (A)",_a=i+" (A)",c+=Zt,l+=Zt,ma=da+e+"</div>"+da+Ee+"</div>"+oa+la+sa+Le+oa+sa+(Te+=Wt)+oa+sa+Be+oa+sa+Oe+oa+Ge+oa+sa+Ae+oa+ya+ya+ya+Ne+oa+sa+Ue+oa+"</div>"+oa+(ga=da+Ce+"</div>"+la+sa+at+oa+sa+et+oa+sa+tt+oa+"</div>"+la+sa+nt+oa+sa+it+oa+sa+ot+oa+oa+da+Me+"</div>"+la+sa+st+oa+sa+dt+oa+sa+ct+oa+sa+lt+oa+sa+rt)+oa+oa+da+ke+"</div>",ha=da+ba+we+"</div></div>",pa=la+oa+Fe+oa+(jl?oa+'<div style="display: inline-block; color: #FF0000; font-size: 110%; font-weight: bold;">'+$n+"</div>":"")+"</div>"+oa+da+De+"</div>"+ia+oa+oa+Re+oa+Ve+oa+oa+ca+He+"</div>"+la+Ke+oa+sa+Je+oa+sa+qe+oa+sa+ze+oa+sa+je+oa+sa+Xe+oa+sa+We+oa+sa+Ye+oa+$e+oa+sa+Ze+oa+sa+Qe+oa+da+ke+"</div></div>",va=ht+oa+sa+pt.replace("link_link",'<div style="display: inline-block; color: #FF0000; font-size: 110%; font-weight: bold;">http://tiny.cc/twitchkeycode</div>')+oa+sa+gt+oa+sa+vt+oa+sa+yt+oa+sa+bt}function ka(){xr=!1,document.getElementById("side_panel").style.width="17%",t="Refresh:",n="Search",a="Settings",e="Controls",i="About",o="Hide",s="The text you entered is empty.",d="The search result is empty.",c="Switch screen",l="Switch user screen",p="Switch: Past Broadcast or Highlight",m="Switch: Period (24h, 7d, 30d, all)",r="Go to ",u="User ",_="Live",f="Games",g="Playing ",h=" for ",v="Watching time ",y="Since ",b=" ago",w="A Game",k="Type your search...",C="Type your authentication key...",M="Type your user name...",E="Press Enter or Select key to, ",I="Channels",S="Channel",P="Back to previously screen: Back key twice",x=" has ended",L="This video is only available to subscribers.",T="Connection failed, unable to load content hit refresh to try again",B="No",O=" for this ",G="Connection failed, unable to load video content exiting...",A=" Past Broadcast",N=" Highlight",U=" Clips",F=" Content",D="Streamed on ",R="Duration ",V=" Views",H=" Viewers",J="Click again to exit!",q="Do you wanna to exit Twitch?",z="Exit",j="Close",X="Minimize",W="Cancel",Y="Not Live | ",K=" Channels Live",$=" Hosts Live",Z=" Games Live",Q=" Followed Channels",ee=" Add User",te=" Remove User",ne="User doesn't exist",ae=" hosting ",ie=" already set",oe="Make First",se="First user can fallow (when providing a key) and see live channels feed outside of the user screen<br>",de="Add a Twitch user to display it's Followed Channels content here",ce=" (24h)",le=" (7d)",re=" (30d)",ue=" (all)",_e="Jumping",fe=" to ",me="Jump Canceled",he=" , jump time bigger then duration",pe=" Sec",ge=" Min",ve=" Hr",ye="Source",be="Version: ",we="SmartTV Twitch",ke="Press back key to close this.",Ce="Player Related:",Me="Chat Related:",Ee="General Related:",Ie="Update",Se="Current installed version ",Pe=" latest available version ",xe="This are the none players related controls, the player can show it's own controls.",Le="Play a video: Navigate using Directional pad (up/down/left/right), press enter to start playing",Te="Refresh screen content: ",Be="Exit the application: from side pannel click exit",Oe=" Switch screen: Back key then D-Pad left or right",Ge="Some screen will change its internal content (channel past broadcast or clips for example) instead of changing to another screen",Ae="Start a search: from side pannel click search",Ne="After writing the search text press key Enter on the virtual keyboard then choose a search option",Ue="About this application: from side pannel click about",Fe="This is a SmartTV Twitch client develop by a individual on his free time, for TV's that don't have access to a good official application, released for free to any one that wanna to use it.",$n="This version of the app is for test in a browser only!",De="Developer information:",Re="This is an open source application licensed under the GNU General Public License v3.0, check it on github",Ve="github.com/fgl27/SmartTwitchTV",He="This application uses following dependencies:",Je="Nightdev KapChat - KapChat captures Twitch chat directly into OBS or XSplit (https://www.nightdev.com/kapchat/)",qe="Fontastic - Create your customized icon fonts in seconds (http://app.fontastic.me)",ze="Twemoji - A simple library that provides standard Unicode emoji support across all platforms (https://github.com/twitter/twemoji)",je="UglifyJS - is a JavaScript parser, minifier, compressor and beautifier toolkit (https://github.com/mishoo/UglifyJS2)",Xe="JS Beautifier - Beautify, unpack or deobfuscate JavaScript and HTML, make JSON/JSONP readable, etc. (https://github.com/beautify-web/js-beautify)",We="HTMLMinifier - A highly configurable, well-tested, JavaScript-based HTML minifier (https://github.com/kangax/html-minifier)",Ye="JSHint - A Static Code Analysis Tool for JavaScript (https://github.com/jshint/jshint)",Ke="Web:",$e="Android:",Ze="Google: Leanback v17 (https://developer.android.com/reference/android/support/v17/leanback/package-summary)",Qe="Google: ExoPlayer (https://github.com/google/ExoPlayer)",et="Show information panel: Press enter key or D-pad keys if chat and live channel feed is not showing",tt="Close the video: press back key twice",nt="Play/Pause a video: open information panel and click on pause simbol (not available to Live streams)",at="Show user live channels feed: D-pad up",it="Change video quality: Open information panel, , navigate using use Directional pad (left/right), then use Directional pad (up/down) to choose the new quality after press Enter key to confirm the change",ot="Force refresh a video (in case it freezes): Change video quality to the same",st="Show or hide the Chat : D-pad right",dt="Change Chat position : D-pad left",ct="Change Chat size : D-pad down",lt="Change Chat background brightness: Change in side panel settings",rt="Force refresh the Chat (in case it freezes or doesn't load): Change video quality to the same will reset and sync it",ut='Start a search: open information panel, navigate using use Directional pad (left/right) to "Search" and press enter',_t="Chat and video (Side by side): Color button red (A)",ta="Force disable the chat",na="with this the chat will not load content, this is useful on a stream with too many viewers were the chat can lag the app.",ft="Update available, check google play store",mt='Adding a key allows the app to fallow and access subscribed only past broadcast (for channel you are Sub to and block VOD access to none subscribers). On the authentication page if you already added a key for another user, you need to click up two to tree time and click over "not you?" to authenticate for a different users <br> <br> add key for',ht=" below, fallowing this steps:",pt="Access the site link_link (using a computer or a smart phone)",gt='Click on the "Authorize" button it will take you to main Twitch.TV authentication site',vt="Login to Twitch.TV using the user name you are trying to add a key for",yt="Click on Authorize button of Twitch.TV site if you agree with the requested permissions",bt="The web page will update and show a key code, the key only has lower case letters and nubers.",wt=" Add Authentication key",kt="Key added OK",Ct="Key test fail, it's needed to add new one",Mt="Key test return OK",Et="You try to add a key for user ",It=" but this key is for user ",St=" Following",Pt=" Follow",xt=" And you have not set a authentication key the app can't check yours sub status.",Lt=" And you are not a sub of this channel",Tt=" You are a sub of this channel but the app fail to authenticate contact the developer email in about",Bt="Fail authentication check with the provider key, please check and try again",Nn="The added key doesn't belong to the user ",Ot="No user",Gt="Set a user and a authentication key to be able to fallow/unfollow",At="Restart the",Nt=" Clip",Ut="Channel content",Ft="Network is disconnect, the application can't work without INTERNET",Dt="Network connection reestablished",Rt=" Followers",Vt=", Can't fallow or unfallow ",Ht="Game content",Jt="Yes",qt="Are you sure you want to remove the user ",zt="Press Up to ",jt="Followed Games",Xt="Change between",Wt=" Back key then Enter",Yt=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"],Kt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],$t="Started ",Zt=" (PG Up/Down)",Qt="Videos",en=" Video",tn="Replay",nn="exiting in ",an='press "Return" to exit',on="Featured",sn="Created at ",dn="Open the Broadcast",cn="No Broadcast",ln="There is no Past Broadcast for this clip",rn="And because of that no chat",un=" is now",_n="Open the Hosting",fn="Player related",mn="Buffer size:",hn="A lower value here will make the player to start playing sooner, but it may cause re-buffer with will cause the player to pause to buffer.",pn="Live streams buffer",gn="Videos (Past Broadcast and Highlight) buffer",vn="Clips buffer",yn="General related",bn="Language",wn="Chat: Connecting to chat server..."+oa+"Chat: Connected."+oa+"Chat: Joined channel ",kn="Play from the start or from where you stop watching last time?",Mn=(Cn="From:"+oa)+"Start",En="Chat: The Chat has ended!",In=": Most recent",Sn=": Most views",Pn="Set a authentication key to be able to see fallowed videos",xn="Switch: Most recent or views",Ln="Enable",Tn="Disable",zn="The app was closed willing playing, restoring playback",Bn="Restore playback",On="When changing apps, the app may be closed by the system to free memory. In this case the app saves what it was playing and restores the playback when reopened",Gn="Chat font size",An="Change the chat lines font size, applies to text and emotes",Un="Videos animated thumbnails",Fn="Side panel: Back key twice",Dn="Size ",Rn="Brightness ",Vn="Forbidden content, this Live must be for Prime only subscribers or lock to Twitch official app only",Hn="Jump step ",Jn=" seconds",qn=" minutes",jn="Clock offset",Xn="Application language",Wn="Content language",Yn="All",Kn="Empty game fro this",Zn="Isn't possible to jump during a buffering",Qn="Chat is disabled, enable in side pannel settings",ea="This clip/video fail to load can't replay",aa="Chat backgroung brightness "}var Ca=51,Ma=52,Ea=179,Ia=37,Sa=38,Pa=39,xa=40,La=13,Ta=49,Ba=8,Oa=13,Ga=32,Aa=46,Na=0,Ua=5,Fa=1e4,Da=0,Ra=!1,Va=!1,Ha=!1,Ja=!1,qa="",za="https://fgl27.github.io/SmartTwitchTV/release/index.min.html",ja="elsu5d09k0xomu7cggx3qg5ybdwu7g",Xa="https://id.twitch.tv/oauth2/token?";function Wa(e){yr.Users_Position=yr.Users_AddcodePosition,Da=e,gi(),Tu(),Za()}function Ya(e,t,n,a){var i=new XMLHttpRequest,o=Xa+"grant_type=refresh_token&client_id="+encodeURIComponent(Wr)+"&client_secret="+encodeURIComponent(ja)+"&refresh_token="+encodeURIComponent(Ni[e].refresh_token)+"&redirect_uri="+za;i.open("POST",o,!0),i.timeout=Fa,i.ontimeout=function(){},i.onreadystatechange=function(){4!==i.readyState||(200===i.status?$a(i.responseText,e,n):Ka(e,t,n,a))},i.send(null)}function Ka(e,t,n,a){++t<10?Ya(e,t,n):a&&a()}function $a(e,t,n){var a=JSON.parse(e);Ni[t].access_token=a.access_token,Ni[t].refresh_token=a.refresh_token,to(),n&&n()}function Za(){var e=new XMLHttpRequest,t=Xa+"grant_type=authorization_code&client_id="+encodeURIComponent(Wr)+"&client_secret="+encodeURIComponent(ja)+"&code="+encodeURIComponent(Da)+"&redirect_uri="+za;e.open("POST",t,!0),e.timeout=Fa,e.ontimeout=function(){},e.onreadystatechange=function(){4!==e.readyState||(200===e.status?ti(e.responseText):Qa())},e.send(null)}function Qa(){++Na<Ua?Za():ei()}function ei(){Bu(),Hu(Bt),window.setTimeout(function(){Ju(),Mr=0,s_(),yr.Main_Go=lr,window.location=za},4e3),Ni[yr.Users_Position].access_token=0,Ni[yr.Users_Position].refresh_token=0}function ti(e){var t=JSON.parse(e);Ni[yr.Users_Position].access_token=t.access_token,Ni[yr.Users_Position].refresh_token=t.refresh_token,gi(),ni()}function ni(){Cf("https://api.twitch.tv/kraken?oauth_token="+Ni[yr.Users_Position].access_token,Fa,0,null,ai,ii)}function ai(e){var t=JSON.parse(e).token;t.user_name&&-1!==t.user_name.indexOf(Ni[yr.Users_Position].name)?(to(),Mr=0,Bu(),Ra=EE=!1,yr.Main_Go=lr,s_(),Hu(kt),window.setTimeout(function(){window.location=za},3e3)):(Ni[yr.Users_Position].access_token=0,Ni[yr.Users_Position].refresh_token=0,Ra=!1,Hu(Nn+Ni[yr.Users_Position].name),window.setTimeout(function(){Ju(),Mr=0,s_(),yr.Main_Go=lr,window.location=za},4e3))}function ii(){++Na<Ua?(Fa+=500,ni()):ei()}function oi(){gi(),Va=!1,si()}function si(){var e="https://api.twitch.tv/kraken/users/"+Ni[yr.Users_Position].id+"/follows/channels/"+qa,t=new XMLHttpRequest;t.open("GET",e,!0),t.timeout=Fa,t.setRequestHeader(Yr,Wr),t.setRequestHeader(Kr,Qr),t.ontimeout=function(){},t.onreadystatechange=function(){4===t.readyState&&(200===t.status?di():404===t.status?ci(t.responseText):li())},t.send(null)}function di(){Ra=!(Va=!0),Ja?Fg():hd()}function ci(e){-1!==(JSON.parse(e).error+"").indexOf("Not Found")?(Ra=Va=!1,Ja?Fg():hd()):li()}function li(){++Na<Ua?(Fa+=500,si()):(Ra=!1,Ja?Fg():hd())}function ri(){gi(),ui()}function ui(){var e=new XMLHttpRequest;e.open("PUT","https://api.twitch.tv/kraken/users/"+Ni[yr.Users_Position].id+"/follows/channels/"+qa,!0),e.timeout=Fa,e.setRequestHeader(Yr,Wr),e.setRequestHeader(Kr,Qr),e.setRequestHeader("Authorization","OAuth "+Ni[yr.Users_Position].access_token),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return Va=!(Ra=!1),void(Ja?Fg():hd());401===e.status||403===e.status?Ya(yr.Users_Position,0,ri,null):_i()}},e.send(null)}function _i(){++Na<Ua&&(Fa+=500,ui())}function fi(){gi(),mi()}function mi(){var e=new XMLHttpRequest;e.open("DELETE","https://api.twitch.tv/kraken/users/"+Ni[yr.Users_Position].id+"/follows/channels/"+qa,!0),e.timeout=Fa,e.setRequestHeader(Yr,Wr),e.setRequestHeader(Kr,Qr),e.setRequestHeader("Authorization","OAuth "+Ni[yr.Users_Position].access_token),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(204===e.status)return Ra=Va=!1,void(Ja?Fg():hd());401===e.status||403===e.status?Ya(yr.Users_Position,0,fi,null):hi()}},e.send(null)}function hi(){++Na<Ua&&(Fa+=500,mi())}function pi(){gi(),Ha=!1,vi()}function gi(){Fa=1e4,Ra=!(Na=0)}function vi(){var e,t="https://api.twitch.tv/kraken/users/"+Ni[yr.Users_Position].id+"/subscriptions/"+qa;if(lu){if(!(e=Android.mreadUrl(t,Fa,3,Ni[yr.Users_Position].access_token)))return void yi();if(200===(e=JSON.parse(e)).status)Ra=!(Ha=!0),Kv();else if(422===e.status)Ra=Ha=!1,Yv();else if(404===e.status){if(-1!==(JSON.parse(e.responseText).error+"").indexOf("Not Found"))return Ra=Ha=!1,void Yv();yi()}else 401===e.status||403===e.status?Ya(yr.Users_Position,0,pi,bi):yi()}else(e=new XMLHttpRequest).open("GET",t,!0),e.timeout=Fa,e.setRequestHeader(Yr,Wr),e.setRequestHeader(Kr,Qr),e.setRequestHeader("Authorization","OAuth "+Ni[yr.Users_Position].access_token),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState)if(200===e.status)Ra=!(Ha=!0),Kv();else if(422===e.status)Ra=Ha=!1,Yv();else if(404===e.status){if(-1!==(JSON.parse(e.responseText).error+"").indexOf("Not Found"))return Ra=Ha=!1,void Yv();yi()}else 401===e.status||403===e.status?Ya(yr.Users_Position,0,pi,bi):yi()},e.send(null)}function yi(){++Na<Ua?(Fa+=500,vi()):bi()}function bi(){Ra=Ha=!1,Yv()}function wi(e){gi(),ki(e,0)}function ki(e,t){var n="https://api.twitch.tv/kraken?oauth_token="+Ni[e].access_token,a=new XMLHttpRequest;a.open("GET",n,!0),a.timeout=1e4,a.ontimeout=function(){},a.onreadystatechange=function(){if(4===a.readyState){if(200===a.status)return void(JSON.parse(a.responseText).token.valid?Ra=!1:(gi(),Ya(e,0,null,null)));400===a.status?(gi(),Ya(e,0,null,null)):Ci(e,t)}},a.send(null)}function Ci(e,t){++t<Ua&&ki(e,t)}function Mi(){gi(),Ei()}function Ei(){var e=new XMLHttpRequest;e.open("PUT","https://api.twitch.tv/api/users/"+Ni[yr.Users_Position].name+"/follows/games/"+encodeURIComponent(yr.Main_gameSelected)+"?oauth_token="+Ni[yr.Users_Position].access_token,!0),e.timeout=1e4,e.setRequestHeader(Yr,Wr),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return ko=!0,void Go();401===e.status||403===e.status?Ya(yr.Users_Position,0,Mi,null):Ii()}},e.send(null)}function Ii(){++Na<Ua&&(Fa+=500,Ei())}function Si(){gi(),Pi()}function Pi(){var e=new XMLHttpRequest;e.open("DELETE","https://api.twitch.tv/api/users/"+Ni[yr.Users_Position].name+"/follows/games/"+encodeURIComponent(yr.Main_gameSelected)+"?oauth_token="+Ni[yr.Users_Position].access_token,!0),e.timeout=1e4,e.setRequestHeader(Yr,Wr),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(204===e.status)return ko=!1,void Go();401===e.status||403===e.status?Ya(yr.Users_Position,0,Si,null):xi()}},e.send(null)}function xi(){++Na<Ua&&(Fa+=500,Pi())}function Li(){gi(),Ti()}function Ti(){var e,t="https://api.twitch.tv/api/users/"+Ni[yr.Users_Position].name+"/follows/games/"+encodeURIComponent(yr.Main_gameSelected);(e=new XMLHttpRequest).open("GET",t,!0),e.timeout=1e4,e.setRequestHeader(Yr,Wr),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState)return 200===e.status?(ko=!0,void Go()):404===e.status?(ko=!1,void Go()):void Bi()},e.send(null)}function Bi(){++Na<Ua?(Fa+=500,Ti()):(ko=!1,Go())}var Oi=0,Gi=5,Ai=3500,Ni=[],Ui=null,Fi=!1,Di=!1;function Ri(){yr.Main_Go=$l,Su("top_bar_user","icon_center_focus"),Ju(),Rl.placeholder=M,Eu("add_user_scroll"),Ji()}function Vi(){zi(!1),document.body.removeEventListener("keydown",Hi),document.body.removeEventListener("keydown",ji),Pu("top_bar_user","icon_center_focus"),Mu("add_user_scroll")}function Hi(e){if(!Fi&&!Di&&yr.Main_Go===$l)switch(e.keyCode){case Ta:ju()?zu():Ku()?Yu():(0<Ni.length&&yr.Main_Go!==lr?yr.Main_Go=yr.Main_Before:yr.Main_Go=Kl,Vi(),i_());break;case Ma:case Ca:case Ea:case La:Ji()}}function Ji(){document.body.removeEventListener("keydown",Hi),document.body.addEventListener("keydown",ji,!1),Rl.placeholder=M,Rl.focus(),Di=!0}function qi(){if(null!==Rl){var e=Rl.cloneNode(!0);Rl.parentNode.replaceChild(e,Rl),Rl=document.getElementById("user_input")}}function zi(e){Rl.blur(),qi(),document.body.removeEventListener("keydown",ji),Rl.placeholder=E+M,e&&document.body.addEventListener("keydown",Hi,!1),Di=!1}function ji(e){if(!Fi&&yr.Main_Go===$l)switch(e.keyCode){case Ta:ju()?zu():Ku()?Yu():(0<Ni.length&&yr.Main_Go!==lr?yr.Main_Go=yr.Main_Before:yr.Main_Go=Kl,Vi(),i_());break;case Aa:Rl.value="";break;case Oa:case xa:""!==Rl.value&&null!==Rl.value?ao(Ui=jl&&!Zi()?"testtwitch27":Rl.value)?(Bu(),Hu(u+Ui+ie),window.setTimeout(function(){Ju(),Ji()},1500)):(Ai=3500,Fi=!(Oi=0),Mu("add_user_scroll"),Tu(),Xi()):Ji();break;case Ba:Rl.value=Rl.value.slice(0,-1);break;case Ga:Rl.value+=" "}}function Xi(){Cf("https://api.twitch.tv/kraken/users?login="+encodeURIComponent(Ui),Ai,2,null,Wi,Yi)}function Wi(e){JSON.parse(e)._total?(Rl.value="",document.body.removeEventListener("keydown",Hi),Qi(e)):Ki()}function Yi(){++Oi<Gi?(Ai+=500,Xi()):Ki()}function Ki(){Ui=null,Bu(),Hu(ne),window.setTimeout(function(){Ri()},1e3),Fi=!1}function $i(){if(0<(Ni=yf("AddUser_UsernameArray",[])).length)for(var e=0;e<Ni.length;e++)Ni[e].access_token&&wi(e)}function Zi(){return 0<Ni.length}function Qi(e){Ui=JSON.parse(e).users[0],Ni.push({name:Ui.name,id:Ui._id,access_token:0,refresh_token:0}),to(),EE=!1,Vi(),SE(),Fi=!1}function eo(e){var t=Ni.indexOf(Ni[e]);-1<t&&Ni.splice(t,1),0<Ni.length?(EE=!1,SE()):Ri(),to()}function to(){gf("AddUser_UsernameArray",JSON.stringify(Ni))}function no(e){Ui=Ni[0],Ni[0]=Ni[e],Ni[e]=Ui,EE=!1,SE(),to()}function ao(e){return-1!==Ni.indexOf(e)}function io(){return 0<Ni.length}var oo=0,so=0,co=!1,lo=0,ro={},uo=[],_o=!1,fo=0,mo=5,ho=3500,po=0,go=0,vo=!1,yo=["ag_thumbdiv","ag_img","ag_infodiv","ag_displayname","ag_streamtitle","ag_streamgame","ag_viwers","ag_quality","ag_cell","agempty_","a_games_scroll"],bo=!1,wo=!1,ko=!1,Co=!1,Mo=!1;function Eo(){yr.Main_CenterLablesVectorPos=3,yr.Main_Go=Ql,document.body.addEventListener("keydown",zo,!1),Su("top_bar_game","icon_center_focus"),Cu("label_side_panel","icon-arrow-circle-left",P),yr.Search_isSearching&&(r_(),xu("top_bar_user",n+u_(f+" '"+yr.Search_data+"'"))),xu("top_bar_game",w+u_(_+": "+yr.Main_gameSelected)),yr.Main_OldgameSelected===yr.Main_gameSelected&&bo?(y_(oo),Eu(yo[10]),Vo(),s_()):So()}function Io(){bo&&-1===oo&&(qo(),so=oo=0,Su(yo[0]+"0_"+so,nu)),Cu("label_side_panel","icon-ellipsis",Fn),xu("top_bar_game",f),document.body.removeEventListener("keydown",zo),Pu("top_bar_game","icon_center_focus"),Mu(yo[10])}function So(){null===yr.Main_OldgameSelected&&(yr.Main_OldgameSelected=yr.Main_gameSelected),h_("stream_table_a_game"),Mu(yo[10]),Tu(),Ju(),Mo=bo=!1,ro={},lf=!(lo=go=po=0),oo=so=0,co=wo=!(uo=[]),Fu(),Po(),xo()}function Po(){g_(),_o=!0,fo=0,ho=3500}function xo(){var e=lo+po;e&&go-1<e&&(e=go-Fr,co=!0),Cf("https://api.twitch.tv/kraken/streams?game="+encodeURIComponent(yr.Main_gameSelected)+"&limit="+Fr+"&offset="+e+(""!==Lr?"&language="+Lr:""),ho,2,null,To,Lo)}function Lo(){++fo<mo?(ho+=500,xo()):(_o=!1,lo?(co=!0,Bo()):(lf=!1,Bu(),Hu(T)))}function To(e){var t=JSON.parse(e),n=t.streams.length;go=parseInt(t._total),n<Fr&&(co=!0);var a=lo;vo=!(lo+=n);var i=n/Dr;0<n%Dr&&i++;var o,s,d,c,l,r,u=0,_=document.getElementById("stream_table_a_game");if(!Mo){var f;for(Mo=!0,d=document.createElement("tr"),c=0;c<3;c++)f=c?1===c?'<i class="icon-movie stream_channel_fallow_icon"></i>'+ya+U:"":'<i class="icon-movie-play stream_channel_fallow_icon"></i>'+ya+ya+Qt,(Pr=document.createElement("td")).setAttribute("id",yo[8]+"y_"+c),Pr.className="stream_cell",Pr.innerHTML='<div id="'+yo[0]+"y_"+c+'" class="stream_thumbnail_fallow_game" ><div id="'+yo[3]+"y_"+c+'" class="stream_channel_fallow_game">'+f+"</div></div>",d.appendChild(Pr);_.appendChild(d)}for(c=0;c<i;c++){for(s=a/Dr+c,d=document.createElement("tr"),o=0;o<Dr&&u<n;o++,u++)r=(l=t.streams[u]).channel._id,ro[r]?o--:(ro[r]=1,d.appendChild(I_(s,s+"_"+o,[l.channel.name,r],yo,[l.preview.template.replace("{width}x{height}",eu),Qu(JSON.stringify(l.stream_type))+l.channel.display_name,l.channel.status,l.game,y+Ip(l.created_at)+b+", "+h+$u(l.viewers)+H,Zu(l.video_height,l.average_fps,l.channel.language)])));for(;o<Dr;o++)co&&!wo&&(wo=!0,lo=s*Dr+o),d.appendChild(k_(yo[9]+s+"_"+o)),uo.push(yo[9]+s+"_"+o);_.appendChild(d)}Bo()}function Bo(){if(bo){if(p_(mu),0<uo.length&&!co)return Po(),void Fo();Du(so,oo,Dr,lo),uo=[]}else Oo(),vo?(Hu(B+Z),oo=-1,Jo()):(bo=!0,p_(mu),Vo(),s_()),Eu(yo[10]),lf=!1,Bu();_o=!1}function Oo(){Co?(ko=!0,Go()):Zi()?Li():(ko=!1,Go())}function Go(){xu(yo[3]+"y_2",ko?'<i class="icon-heart" style="color: #00b300; font-size: 100%; text-shadow: #FFFFFF 0 0 10px, #FFFFFF 0 0 10px, #FFFFFF 0 0 8px;"></i>'+ya+ya+St:'<i class="icon-heart-o" style="color: #FFFFFF; font-size: 100%; text-shadow: #000000 0 0 10px, #000000 0 0 10px, #000000 0 0 8px;"></i>'+ya+ya+(Zi()?Pt:Ot))}function Ao(){Zi()&&Ni[yr.Users_Position].access_token?ko?Si():Mi():(Hu(Gt),window.setTimeout(function(){vo&&yr.Main_Go===Ql?Hu(B+Z):Ju()},2e3))}function No(){so?1===so?(yr.Main_Go=hr,yr.Main_OldgameSelected=yr.Main_gameSelected,Uo(),o_()):Ao():(yr.Main_Go=mr,yr.Main_OldgameSelected=yr.Main_gameSelected,Uo(),o_())}function Uo(){bo&&-1===oo&&(qo(),so=oo=0,Su(yo[0]+"0_"+so,nu)),document.body.removeEventListener("keydown",zo),Mu(yo[10])}function Fo(){Vu(uo.length);var e=lo+po;e&&go-1<e&&(e=go-Xr,co=!0),Cf("https://api.twitch.tv/kraken/streams?game="+encodeURIComponent(yr.Main_gameSelected)+"&limit="+Xr+"&offset="+e+(""!==Lr?"&language="+Lr:""),ho,2,null,Ro,Do)}function Do(){++fo<mo?(ho+=500,Fo()):(co=!0,lo-=uo.length,uo=[],Bo())}function Ro(e){var t,n,a=JSON.parse(e),i=a.streams.length,o=0,s=0,d=[];for(go=parseInt(a._total),i<Xr&&(co=!0);o<uo.length&&s<i;o++,s++)n=(t=a.streams[s]).channel._id,ro[n]?o--:(ro[n]=1,S_(uo[o],[t.channel.name,n],[t.preview.template.replace("{width}x{height}",eu),Qu(JSON.stringify(t.stream_type))+t.channel.display_name,t.channel.status,t.game,y+Ip(t.created_at)+b+", "+h+$u(t.viewers)+H,Zu(t.video_height,t.average_fps,t.channel.language)],yo),d.push(o));for(o=d.length-1;-1<o;o--)uo.splice(d[o],1);po+=s,co&&(lo-=uo.length,uo=[]),Bo()}function Vo(){oo<0?Jo():(N_(oo,so,yo,Dr,lo),lo/Dr<oo+Rr&&!co&&!_o&&(Po(),xo()),kr&&Ho())}function Ho(){-1<oo&&lo?q_(oo+"_"+so,yo):qo()}function Jo(){Su(yo[0]+"y_"+so,nu)}function qo(){Pu(yo[0]+"y_"+so,nu)}function zo(e){var t;if(!lf&&!G_())switch(O_(),e.keyCode){case Ta:Ku()?Yu():ju()?zu():(yr.Main_OldgameSelected=yr.Main_gameSelected,Ho(),qo(),uf(zo));break;case Ia:if(-1===oo)qo(),--so<0&&(so=2),Jo();else if(oo||so){if(e_(oo,so-1,yo[0]))Ho(),so--,Vo();else for(t=Dr-1;-1<t;t--)if(e_(oo-1,t,yo[0])){Ho(),oo--,so=t,Vo();break}}else Ho(),qo(),oo=-1,so=2,Jo();break;case Pa:-1===oo?(qo(),2<++so?(so=0,vo?Jo():(oo=0,Vo())):Jo()):e_(oo,so+1,yo[0])?(Ho(),so++,Vo()):e_(oo+1,0,yo[0])&&(Ho(),oo++,so=0,Vo());break;case Sa:if(-1!==oo||vo)if(oo){for(t=0;t<Dr;t++)if(e_(oo-1,so-t,yo[0])){Ho(),oo--,so-=t,Vo();break}}else Ho(),oo=-1,Jo();else oo=0,qo(),Vo();break;case xa:if(-1!==oo||vo){for(t=0;t<Dr;t++)if(e_(oo+1,so-t,yo[0])){Ho(),oo++,so-=t,Vo();break}}else oo=0,qo(),Vo();break;case Ma:case Ca:case Ea:case La:-1!==oo?F_(oo+"_"+so,yo,zo):No()}}var jo=0,Xo=0,Wo=!1,Yo=0,Ko={},$o=[],Zo=!1,Qo=0,es=5,ts=3500,ns=0,as=0,is=!1,os=!1,ss="week",ds=2,cs=!1,ls=["agv_thumbdiv","agv_img","agv_infodiv","agv_title","agv_streamon","agv_duration","agv_viwers","agv_quality","agv_cell","gvempty_","a_games_vod_scroll","agv_game"],rs=!1,us=!1,_s="";function fs(){yr.Main_CenterLablesVectorPos=3,yr.Main_Go=mr,Su("top_bar_game","icon_center_focus"),document.body.addEventListener("keydown",Ps,!1),Cu("label_side_panel","icon-arrow-circle-left",P),_s===yr.Main_gameSelected&&rs?(y_(jo),Eu(ls[10]),xs(),Ms(),s_()):hs()}function ms(){rs&&Es(),document.body.removeEventListener("keydown",Ps),Pu("top_bar_game","icon_center_focus"),xu("top_bar_game",f),Cu("label_side_panel","icon-ellipsis",Fn),Mu(ls[10])}function hs(){rs&&Es(),h_("stream_table_a_game_vod"),Mu(ls[10]),Tu(),xs(),_s=yr.Main_gameSelected,Ju(),cs=rs=!1,lf=!(os=!($o=[])),jo=Xo=Yo=as=ns=0,Wo=!(Ko={}),Fu(),ps(),gs()}function ps(){g_(),Zo=!0,Qo=0,ts=3500}function gs(){var e=Yo+ns;e&&as-1<e&&(e=as-Fr,Wo=!0),Cf("https://api.twitch.tv/kraken/videos/top?game="+encodeURIComponent(yr.Main_gameSelected)+"&limit="+Fr+"&broadcast_type="+(us?"highlight":"archive")+"&sort=views&offset="+e+"&period="+ss+(""!==Lr?"&language="+Lr:""),ts,2,null,ys,vs)}function vs(){++Qo<es?(ts+=500,gs()):(Zo=!1,Yo?(Wo=!0,bs()):(lf=!1,Bu(),Hu(T)))}function ys(e){var t=JSON.parse(e),n=t.vods.length;as=parseInt(t._total),n<Fr&&(Wo=!0);var a=Yo;is=!(Yo+=n);var i=n/Dr;0<n%Dr&&i++;var o,s,d,c,l,r=0,u=document.getElementById("stream_table_a_game_vod");if(!cs){var _;for(cs=!0,d=document.createElement("tr"),f=0;f<2;f++)_=f?'<i class="icon-history stream_channel_fallow_icon"></i>'+ya+ya+m:'<i class="icon-movie-play stream_channel_fallow_icon"></i>'+ya+ya+p,(Pr=document.createElement("td")).setAttribute("id",ls[8]+"y_"+f),Pr.className="stream_cell",Pr.innerHTML='<div id="'+ls[0]+"y_"+f+'" class="stream_thumbnail_channel_vod" ><div id="'+ls[3]+"y_"+f+'" class="stream_channel_fallow_game">'+_+"</div></div>",d.appendChild(Pr);u.appendChild(d)}for(var f=0;f<i;f++){for(s=a/Dr+f,d=document.createElement("tr"),o=0;o<Dr&&r<n;o++,r++)l=(c=t.vods[r])._id,-1!==(c.preview.template+"").indexOf("404_processing")||Ko[l]?o--:(Ko[l]=1,d.appendChild(sS(s,s+"_"+o,[l,c.length,c.language,c.game,c.channel.name,c.increment_view_count_url],[c.preview.template.replace("{width}x{height}",eu),c.channel.display_name,D+__(c.created_at),xS.parse(c.title)+oa+$t+g+c.game,$u(c.views)+V,Zu(c.resolutions.chunked.slice(-4),parseInt(c.fps.chunked)||0,c.language),R+Mp(c.length),c.animated_preview_url],ls)));for(;o<Dr;o++)Wo&&!os&&(os=!0,Yo=s*Dr+o),d.appendChild(k_(ls[9]+s+"_"+o)),$o.push(ls[9]+s+"_"+o);u.appendChild(d)}bs()}function bs(){if(rs?p_(mu):(is?Hu(B+(us?N:A)+O+S):(rs=!0,p_(mu),Ms(),s_()),Eu(ls[10]),lf=!1,Bu()),0<$o.length&&!Wo)return ps(),void ws();Du(Xo,jo,Dr,Yo),Zo=!($o=[])}function ws(){Vu($o.length);var e=Yo+ns;e&&as-1<e&&(e=as-Xr,Wo=!0),Cf("https://api.twitch.tv/kraken/videos/top?game="+encodeURIComponent(yr.Main_gameSelected)+"&limit="+Xr+"&broadcast_type="+(us?"highlight":"archive")+"&sort=views&offset="+e+"&period="+ss+(""!==Lr?"&language="+Lr:""),ts,2,null,Cs,ks)}function ks(){++Qo<es?(ts+=500,ws()):(Wo=!0,$o=[],bs())}function Cs(e){var t,n,a=JSON.parse(e),i=a.vods.length,o=0,s=0,d=[];for(as=parseInt(a._total);o<$o.length&&s<i;o++,s++)n=(t=a.vods[s])._id,-1!==(t.preview.template+"").indexOf("404_processing")||Ko[n]?o--:(Ko[n]=1,cS($o[o],[n,t.length,t.language,t.game,t.channel.name,t.increment_view_count_url],[t.preview.template.replace("{width}x{height}",eu),t.channel.display_name,D+__(t.created_at),xS.parse(t.title)+oa+$t+g+t.game,$u(t.views)+V,Zu(t.resolutions.chunked.slice(-4),parseInt(t.fps.chunked)||0,t.language),R+Mp(t.length),t.animated_preview_url],ls),d.push(o));for(o=d.length-1;-1<o;o--)$o.splice(d[o],1);ns+=s,Wo&&(Yo-=$o.length,$o=[]),bs()}function Ms(){jo<0?Is():(N_(jo,Xo,ls,Dr,Yo),vS(ls,jo+"_"+Xo),Yo/Dr<jo+Rr&&!Wo&&!Zo&&(ps(),gs()),kr&&Es())}function Es(){window.clearInterval(LI),-1<jo&&Yo?(Eu(ls[1]+jo+"_"+Xo),q_(jo+"_"+Xo,ls)):Ss()}function Is(){var e=1<Xo?1:Xo;Su(ls[0]+"y_"+e,nu)}function Ss(){var e=1<Xo?1:Xo;Pu(ls[0]+"y_"+e,nu)}function Ps(e){var t;if(!lf&&!G_())switch(O_(),e.keyCode){case Ta:Ku()?Yu():ju()?zu():(Es(),uf(Ps));break;case Ia:if(-1===jo)Ss(),--Xo<0&&(Xo=1),Is();else if(jo||Xo){if(e_(jo,Xo-1,ls[0]))Es(),Xo--,Ms();else for(t=Dr-1;-1<t;t--)if(e_(jo-1,t,ls[0])){Es(),jo--,Xo=t,Ms();break}}else Es(),Ss(),jo=-1,Xo=1,Is();break;case Pa:-1===jo?(Ss(),1<++Xo?(Xo=0,is?Is():(jo=0,Ms())):Is()):e_(jo,Xo+1,ls[0])?(Es(),Xo++,Ms()):e_(jo+1,0,ls[0])&&(Es(),jo++,Xo=0,Ms());break;case Sa:if(-1!==jo||is)if(jo){for(t=0;t<Dr;t++)if(e_(jo-1,Xo-t,ls[0])){Es(),jo--,Xo-=t,Ms();break}}else Es(),jo=-1,Is();else jo=0,Ss(),Ms();break;case xa:if(-1!==jo||is){for(t=0;t<Dr;t++)if(e_(jo+1,Xo-t,ls[0])){Es(),jo++,Xo-=t,Ms();break}}else jo=0,Ss(),Ms();break;case Ma:case Ca:case Ea:case La:-1===jo?(0===Xo?gf("AGameVod_highlight",(us=!us)?"true":"false"):4<++ds&&(ds=1),hs()):V_(jo+"_"+Xo,ls,Ps)}}function xs(){1===ds?(xu("top_bar_game",w+u_((us?N:A)+ce+": "+yr.Main_gameSelected)),ss="day"):2===ds?(xu("top_bar_game",w+u_((us?N:A)+le+": "+yr.Main_gameSelected)),ss="week"):3===ds?(xu("top_bar_game",w+u_((us?N:A)+re+": "+yr.Main_gameSelected)),ss="month"):4===ds&&(xu("top_bar_game",w+u_((us?N:A)+ue+": "+yr.Main_gameSelected)),ss="all"),gf("AGameVod_periodNumber",ds)}var Ls,Ts=0,Bs=0,Os=!1,Gs=0,As=0,Ns=5,Us=3500,Fs=0,Ds=!1,Rs=!1,Vs=["cc_thumbdiv","cc_img","cc_infodiv","cc_name","cc_createdon","cc_game","cc_viwers","cc_duration","cc_cell","sccempty_","channel_content_scroll"],Hs=!1,Js="",qs=null,zs="",js="",Xs="",Ws="",Ys="",Ks={},$s=!1;function Zs(){yr.Main_CenterLablesVectorPos=1,yr.Main_Go=sr,$s&&!yr.Search_isSearching&&yr.Main_selectedChannel_id&&kd(),Js!==yr.Main_selectedChannel&&(Hs=!1),r_(),yr.Main_selectedChannelDisplayname=yr.Main_selectedChannelDisplayname.replace(Y,""),Lu("top_bar_user",yr.Main_selectedChannelDisplayname),Lu("top_bar_game",Ut),document.body.addEventListener("keydown",Cd,!1),Ja=!1,Hs?(y_(Ts),Eu(Vs[10]),gd(),vd(),s_()):ed()}function Qs(){l_(),document.body.removeEventListener("keydown",Cd),Mu(Vs[10])}function ed(){h_("stream_table_channel_content"),Mu(Vs[10]),Tu(),Ju(),Js=yr.Main_selectedChannel,Ws="",Os=Ds=Hs=!1,Ls=void(Ts=Bs=Gs=Fs=0),td(),nd()}function td(){lf=!0,As=0,Us=3500}function nd(){Cf("https://api.twitch.tv/kraken/streams/"+encodeURIComponent(void 0!==Ls?Ls:yr.Main_selectedChannel_id),Us,2,null,ad,id)}function ad(e){null!==JSON.parse(e).stream?(qs=e,td(),cd()):Ls?(qs=null,td(),cd()):(td(),od())}function id(){++As<Ns?(Us+=500,nd()):(qs=null,td(),cd())}function od(){Cf("https://tmi.twitch.tv/hosts?include_logins=1&host="+encodeURIComponent(yr.Main_selectedChannel_id),Us,1,null,dd,sd,!0)}function sd(){++As<Ns?(Us+=500,od()):(qs=null,td(),cd())}function dd(e){var t=JSON.parse(e);void 0!==(Ls=t.hosts[0].target_id)?(td(),nd()):(qs=null,td(),cd())}function cd(){Cf("https://api.twitch.tv/kraken/channels/"+yr.Main_selectedChannel_id,dv,2,null,ld,rd)}function ld(e){var t=JSON.parse(e);zs=t.views,js=t.followers,Xs=t.description,yr.Main_selectedChannelLogo=t.logo,ud()}function rd(){++As<Ns?(Us+=500,cd()):(Xs=js=zs="",yr.Main_selectedChannelLogo=fu,ud())}function ud(){var e=document.createElement("tr"),t=document.createElement("tbody"),n=0,a=document.getElementById("stream_table_channel_content");if((Pr=document.createElement("tr")).className="follower_header",Pr.innerHTML='<div class="follower_header">'+xS.parse(Xs)+"</div>",a.appendChild(t),a.appendChild(Pr),null!==qs){var i=JSON.parse(qs);if(null!==i.stream){var o=void 0!==Ls?yr.Main_selectedChannelDisplayname+ae:"",s=i.stream;e.appendChild(_d("0_"+n,s.channel.name,s.preview.template,xS.parse(s.channel.status),s.game,Qu(JSON.stringify(s.stream_type))+o+s.channel.display_name,y+Ip(s.created_at)+b+", "+h+$u(s.viewers)+H,Zu(s.video_height,s.average_fps,s.channel.language))),n++}else Ds=!0}else Ds=!0;e.appendChild(fd("0_"+n,yr.Main_selectedChannelDisplayname,yr.Main_selectedChannelDisplayname+A,"movie-play")),n++,e.appendChild(fd("0_"+n,yr.Main_selectedChannelDisplayname,yr.Main_selectedChannelDisplayname+U,"movie")),n<2&&(n++,e.appendChild(k_(Vs[9]+"0_"+n))),a.appendChild(e),(e=document.createElement("tr")).appendChild(md("1_0",yr.Main_selectedChannelDisplayname,yr.Main_selectedChannelDisplayname,yr.Main_selectedChannelLogo)),a.appendChild(e),pd()}function _d(e,t,n,a,i,o,s,d){return Ws=n.replace("{width}x{height}",eu),(Pr=document.createElement("td")).setAttribute("id",Vs[8]+e),Pr.setAttribute(au,t),Pr.className="stream_cell",Pr.innerHTML='<div id="'+Vs[0]+e+'" class="stream_thumbnail_video" ><img id="'+Vs[1]+e+'" class="stream_img"></div><div id="'+Vs[2]+e+'" class="stream_text"><div id="'+Vs[3]+e+'" class="stream_channel" style="width: 66%; display: inline-block;"><i class="icon-circle" style="color: '+(void 0!==Ls?"#FED000":"red")+'; font-size: 90%; aria-hidden="true"></i> '+ya+o+'</div><div id="'+Vs[7]+e+'"class="stream_info" style="width:33%; float: right; text-align: right; display: inline-block;">'+d+'</div><div id="'+Vs[4]+e+'"class="stream_info">'+a+'</div><div id="'+Vs[5]+e+'"class="stream_info">'+g+i+'</div><div id="'+Vs[6]+e+'"class="stream_info">'+s+"</div></div>",Pr}function fd(e,t,n,a){return(Pr=document.createElement("td")).setAttribute("id",Vs[8]+e),Pr.setAttribute(au,t),Pr.className="stream_cell",Pr.innerHTML='<div id="'+Vs[0]+e+'" class="stream_thumbnail_video" ><div id="'+Vs[1]+e+'" class="stream_channel_content_icon"><i class="icon-'+a+'"></i></div></div><div id="'+Vs[2]+e+'" class="stream_text"><div id="'+Vs[3]+e+'" class="stream_channel" style="text-align: center">'+n+"</div></div>",Pr}function md(e,t,n,a){return Ys=a,(Pr=document.createElement("td")).setAttribute("id",Vs[8]+e),Pr.setAttribute(au,t),Pr.className="stream_cell",Pr.innerHTML='<div id="'+Vs[0]+e+'" class="stream_thumbnail_video" ><div id="schannel_cont_heart" style="position: absolute; top: 5%; left: 6%;"></div><img id="'+Vs[1]+e+'" class="stream_img_fallow"></div><div id="'+Vs[2]+e+'" class="stream_text"><div id="'+Vs[3]+e+'" class="stream_channel">'+n+'</div><div id="'+Vs[5]+e+'"class="stream_info">'+$u(zs)+V+'</div><div id="'+Vs[6]+e+'"class="stream_info" >'+$u(js)+Rt+"</div></div>",Pr}function hd(){Va?(xu("schannel_cont_heart",'<i class="icon-heart" style="color: #00b300; font-size: 600%; text-shadow: #FFFFFF 0 0 10px, #FFFFFF 0 0 10px, #FFFFFF 0 0 8px;"></i>'),Lu(Vs[3]+"1_0",yr.Main_selectedChannelDisplayname+St)):(xu("schannel_cont_heart",'<i class="icon-heart-o" style="color: #FFFFFF; font-size: 600%; text-shadow: #000000 0 0 10px, #000000 0 0 10px, #000000 0 0 8px;"></i>'),Zi()?Lu(Vs[3]+"1_0",yr.Main_selectedChannelDisplayname+Pt):Lu(Vs[3]+"1_0",yr.Main_selectedChannelDisplayname+Vt))}function pd(){Hs||(Hs=!0,""!==Ws&&pu(document.getElementById(Vs[1]+"0_0"),Ws,mu),pu(document.getElementById(Vs[1]+"1_0"),Ys,fu),vd(),s_(),Eu(Vs[10]),Bu()),gd(),lf=!1}function gd(){Rs?hd():Zi()?(qa=yr.Main_selectedChannel_id,Ja=!1,oi()):(Va=!1,hd())}function vd(){Su(Vs[0]+Ts+"_"+(Ts?0:Bs),nu),kr&&yd(),T_()}function yd(){q_(Ts+"_"+(Ts?0:Bs),Vs)}function bd(){if(Ts)Zi()&&Ni[yr.Users_Position].access_token?(Ja=!1,qa=yr.Main_selectedChannel_id,Va?fi():ri()):(Hu(Gt),window.setTimeout(Ju,2e3));else{document.body.removeEventListener("keydown",Cd),Mu(Vs[10]);var e=Ds?1:0;Bs===0-e?(yr.Play_selectedChannel=document.getElementById(Vs[8]+Ts+"_"+Bs).getAttribute(au),yr.Play_selectedChannelDisplayname=document.getElementById(Vs[3]+Ts+"_"+Bs).textContent,-1!==yr.Play_selectedChannelDisplayname.indexOf(ae)?(yr.Play_isHost=!0,yr.Play_DisplaynameHost=yr.Play_selectedChannelDisplayname,yr.Play_selectedChannelDisplayname=yr.Play_selectedChannelDisplayname.split(ae)[1],yr.Play_selectedChannel_id=Ls):yr.Play_selectedChannel_id=yr.Main_selectedChannel_id,yr.Play_gameSelected=document.getElementById(Vs[5]+Ts+"_"+Bs).textContent.split(g)[1],X_(D_)):Bs===1-e?X_(Kd):Bs===2-e&&(Ty=ib,X_(Ny))}}function wd(){Ks={"Main_values.Main_selectedChannel_id":yr.Main_selectedChannel_id,"Main_values.Main_selectedChannelLogo":yr.Main_selectedChannelLogo,"Main_values.Main_selectedChannel":yr.Main_selectedChannel,"Main_values.Main_selectedChannelDisplayname":yr.Main_selectedChannelDisplayname,ChannelContent_UserChannels:Rs,"Main_values.Main_BeforeChannel":yr.Main_BeforeChannel}}function kd(){yr.Main_selectedChannel_id=yr.Main_selectedChannel_id,yr.Main_selectedChannelLogo=yr.Main_selectedChannelLogo,yr.Main_selectedChannel=yr.Main_selectedChannel,yr.Main_selectedChannelDisplayname=yr.Main_selectedChannelDisplayname,Rs=Ks.ChannelContent_UserChannels,yr.Main_BeforeChannel=yr.Main_BeforeChannel,$s=!(Ks={})}function Cd(e){if(!lf&&!G_())switch(O_(),e.keyCode){case Ta:Ku()?Yu():ju()?zu():(yd(),uf(Cd));break;case Ia:Ts||(yd(),--Bs<0&&(Bs=Ds?1:2),vd());break;case Pa:Ts||(yd(),(Ds?1:2)<++Bs&&(Bs=0),vd());break;case Sa:case xa:yd(),Ts=Ts?0:1,vd();break;case Ma:case Ca:case Ea:case La:bd()}}var Md=0,Ed=0,Id=!1,Sd=0,Pd={},xd=[],Ld=!1,Td=0,Bd=5,Od=3500,Gd=0,Ad=0,Nd=0,Ud=!1,Fd=!1,Dd="",Rd=!1,Vd=["cv_thumbdiv","cv_img","cv_infodiv","cv_title","cv_streamon","cv_duration","cv_viwers","cv_quality","cv_cell","cvempty_","channel_vod_scroll","cv_game"],Hd=!1,Jd=!1,qd="",zd="",jd="",Xd="",Wd="",Yd=0;function Kd(){yr.Main_CenterLablesVectorPos=1,yr.Main_Go=dr,!yr.Search_isSearching&&yr.Main_selectedChannel_id&&kd(),yr.Main_selectedChannel!==qd&&(Hd=!1),r_(),Cu("label_side_panel","icon-arrow-circle-left",P),Lu("top_bar_user",yr.Main_selectedChannelDisplayname),document.body.addEventListener("keydown",uc,!1),Hd?(y_(Md),Lu("top_bar_game",Jd?N:A),Eu(Vd[10]),dc(),s_()):Zd()}function $d(){Hd&&cc(),l_(),document.body.removeEventListener("keydown",uc),Mu(Vd[10])}function Zd(){Hd&&cc(),h_("stream_table_channel_vod"),Mu(Vd[10]),Lu("top_bar_game",Jd?N:A),Tu(),Ju(),qd=yr.Main_selectedChannel,Rd=Hd=!1,lf=!(Fd=!(xd=[])),Md=Ed=Sd=Ad=Gd=0,Id=!(Pd={}),Fu(),Qd(),ec()}function Qd(){g_(),Ld=!0,Td=0,Od=3500}function ec(){var e=Sd+Gd;e&&Ad-1<e&&(e=Ad-Fr,Id=!0),Cf("https://api.twitch.tv/kraken/channels/"+encodeURIComponent(yr.Main_selectedChannel_id)+"/videos?limit="+Fr+"&broadcast_type="+(Jd?"highlight":"archive")+"&sort=time&offset="+e,Od,2,null,nc,tc)}function tc(){++Td<Bd?(Od+=500,ec()):(Ld=!1,Sd?(Id=!0,ac()):(lf=!1,Bu(),Hu(T)))}function nc(e){var t=JSON.parse(e),n=t.videos.length;Ad=parseInt(t._total),n<Fr&&(Id=!0);var a=Sd;Ud=!(Sd+=n);var i=n/Dr;0<n%Dr&&i++;var o,s,d,c,l,r,u,_=0,f=document.getElementById("stream_table_channel_vod");if(!Rd){Rd=!0,d=document.createElement("tr");var m='<i class="icon-movie-play stream_channel_fallow_icon"></i>'+ya+ya+p;(Pr=document.createElement("td")).setAttribute("id",Vd[8]+"y_0"),Pr.className="stream_cell",Pr.innerHTML='<div id="'+Vd[0]+'y_0" class="stream_thumbnail_channel_vod" ><div id="'+Vd[3]+'y_0" class="stream_channel_fallow_game">'+m+"</div></div>",d.appendChild(Pr),f.appendChild(d)}for(var h=0;h<i;h++){for(s=a/Dr+h,d=document.createElement("tr"),o=0;o<Dr&&_<n;o++,_++)l=(c=t.videos[_])._id,r=-1!==((u=c.preview.template)+"").indexOf("404_processing"),s||o||!r||(r=!1,u=mu),r||Pd[l]?o--:(Pd[l]=1,d.appendChild(sS(s,s+"_"+o,[l,c.length,c.language,c.game,c.channel.name,c.increment_view_count_url],[u.replace("{width}x{height}",eu),xS.parse(c.title),D+__(c.created_at),$t+g+c.game,$u(c.views)+V,Zu(c.resolutions.chunked.slice(-4),parseInt(c.fps.chunked)||0,c.language),R+Mp(c.length),c.animated_preview_url],Vd)));for(;o<Dr;o++)Id&&!Fd&&(Fd=!0,Sd=s*Dr+o),d.appendChild(k_(Vd[9]+s+"_"+o)),xd.push(Vd[9]+s+"_"+o);f.appendChild(d)}ac()}function ac(){if(Hd?(Du(Ed,Md,Dr,Sd),p_(mu)):(Ud?Hu(B+(Jd?N:A)+O+S):(Hd=!0,p_(mu),dc(),s_()),Eu(Vd[10]),lf=!1,Bu()),0<xd.length&&!Id)return Qd(),void ic();Ld=!(xd=[])}function ic(){Vu(xd.length);var e=Sd+Gd;e&&Ad-1<e&&(e=Ad-Xr,Id=!0),Cf("https://api.twitch.tv/kraken/channels/"+encodeURIComponent(yr.Main_selectedChannel_id)+"/videos?limit="+Xr+"&broadcast_type="+(Jd?"highlight":"archive")+"&sort=time&offset="+e,Od,2,null,sc,oc)}function oc(){++Td<Bd?(Od+=500,ic()):(Id=!0,Sd-=xd.length,xd=[],ac())}function sc(e){var t,n,a=JSON.parse(e),i=a.videos.length,o=0,s=0,d=[];for(Ad=parseInt(a._total);o<xd.length&&s<i;o++,s++)n=(t=a.videos[s])._id,-1!==(t.preview.template+"").indexOf("404_processing")||Pd[n]?o--:(Pd[n]=1,cS(xd[o],[n,t.length,t.language,t.game,t.channel.name,t.increment_view_count_url],[t.preview.template.replace("{width}x{height}",eu),xS.parse(t.title),D+__(t.created_at),$t+g+t.game,$u(t.views)+V,Zu(t.resolutions.chunked.slice(-4),parseInt(t.fps.chunked)||0,t.language),R+Mp(t.length),t.animated_preview_url],Vd),d.push(o));for(o=d.length-1;-1<o;o--)xd.splice(d[o],1);Gd+=s,Id&&(Sd-=xd.length,xd=[]),ac()}function dc(){Md<0?lc():(N_(Md,Ed,Vd,Dr,Sd),vS(Vd,Md+"_"+Ed),Sd/Dr<Md+Rr&&!Id&&!Ld&&(Qd(),ec()),kr&&cc())}function cc(){window.clearInterval(LI),-1<Md&&Sd?(Eu(Vd[1]+Md+"_"+Ed),q_(Md+"_"+Ed,Vd)):rc()}function lc(){Su(Vd[0]+"y_0",nu)}function rc(){Pu(Vd[0]+"y_0",nu)}function uc(e){var t;if(!lf&&!G_())switch(O_(),e.keyCode){case Ta:Ku()?Yu():ju()?zu():(cc(),uf(uc));break;case Ia:if(e_(Md,Ed-1,Vd[0]))cc(),Ed--,dc();else for(t=Dr-1;-1<t;t--)if(e_(Md-1,t,Vd[0])){cc(),Md--,Ed=t,dc();break}break;case Pa:e_(Md,Ed+1,Vd[0])?(cc(),Ed++,dc()):e_(Md+1,0,Vd[0])&&(cc(),Md++,Ed=0,dc());break;case Sa:if(-1!==Md||Ud)if(Md){for(t=0;t<Dr;t++)if(e_(Md-1,Ed-t,Vd[0])){cc(),Md--,Ed-=t,dc();break}}else cc(),Md=-1,lc();else Md=0,rc(),dc();break;case xa:if(-1!==Md||Ud){for(t=0;t<Dr;t++)if(e_(Md+1,Ed-t,Vd[0])){cc(),Md++,Ed-=t,dc();break}}else Md=0,rc(),dc();break;case Ma:case Ca:case Ea:case La:-1===Md?(gf("ChannelVod_highlight",(Jd=!Jd)?"true":"false"),Zd()):V_(Md+"_"+Ed,Vd,uc)}}var _c,fc,mc,hc,pc=0,gc=10,vc=!1,yc=0,bc=null,wc=!1,kc=0,Cc={},Mc={};function Ec(){Hc(),yr.Play_ChatForceDisable?(Wc||ll(),wc=!1,X_(function(){Ic(yc=(new Date).getTime())})):Al()}function Ic(e){pc=0,Sc(e)}function Sc(e){var t="https://badges.twitch.tv/v1/badges/channels/"+yr.Play_selectedChannel_id+"/display",n=new XMLHttpRequest;n.open("GET",t,!0),n.timeout=1e4,n.ontimeout=function(){},n.onreadystatechange=function(){if(4===n.readyState){if(200===n.status)return void(yc===e&&xc(n.responseText,e));yc===e&&Pc(e)}},n.send(null)}function Pc(e){pc++,yc===e&&(pc<gc?Sc(e):fc=window.setTimeout(function(){Sc(e)},1e3))}function xc(e,t){SS(JSON.parse(e).badge_sets).forEach(function(t){t.versions.forEach(function(e){PS(t.type,e.type,e.image_url_4x,jc)})}),Cc[yr.Play_selectedChannel_id]?yc===t&&Gc():Lc(t)}function Lc(e){pc=0,Tc(e)}function Tc(e){var t="https://api.betterttv.net/2/channels/"+encodeURIComponent(yr.Play_selectedChannel),n=new XMLHttpRequest;n.open("GET",t,!0),n.timeout=1e4,n.ontimeout=function(){},n.onreadystatechange=function(){4===n.readyState&&(200===n.status?yc===e&&Oc(n.responseText,e):404===n.status?(Cc[yr.Play_selectedChannel_id]=1,yc===e&&Gc()):yc===e&&Bc(e))},n.send(null)}function Bc(e){pc++,yc===e&&(pc<gc?Tc(e):yc===e&&Gc())}function Oc(t,e){(t=JSON.parse(t)).emotes.forEach(function(e){Mc[e.code]={restrictions:e.restrictions,code:e.code,source:"bttv",id:e.id,"1x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","1x"),"2x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","2x"),"3x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","3x")}}),Cc[yr.Play_selectedChannel_id]=1,yc===e&&Gc()}function Gc(){Uc(),Ac()}function Ac(){(bc=new ReconnectingWebSocket("wss://irc-ws.chat.twitch.tv","irc",{reconnectInterval:3e3})).onopen=function(){bc.send("PASS blah\r\n"),bc.send("NICK justinfan12345\r\n"),bc.send("CAP REQ :twitch.tv/commands twitch.tv/tags\r\n"),bc.send("JOIN #"+yr.Play_selectedChannel+"\r\n")},bc.onclose=function(){vc=!0},bc.onmessage=function(e){var t=window.parseIRC(e.data.trim());if(t.command)switch(t.command){case"PING":bc.send("PONG "+t.params[0]);break;case"JOIN":wc=!0,Dc('&nbsp;<span class="message">'+oa+wn+yr.Play_selectedChannelDisplayname+" "+_+"</span>");break;case"PRIVMSG":Fc(t)}},mc=window.setTimeout(Nc,5e3)}function Nc(){wc?hc=window.setInterval(Rc,1e3):(bc.close(1e3),Gc())}function Uc(){window.clearTimeout(mc)}function Fc(e){var t="",n=e.tags;if(!n.hasOwnProperty("badges")||"string"==typeof n.badges&&n.badges.split(",").forEach(function(e){e=e.split("/"),t+='<span class="'+e[0]+"-"+e[1]+' tag"></span>'}),n.hasOwnProperty("display-name")){var a=n["display-name"];"string"==typeof a&&(t+='<span class="nick" style="color: #'+nl[a.charCodeAt(0)%al]+';">'+a+"</span>&#58;&nbsp;")}var i=e.params[1];i=i.replace(/</g,"&lt;").replace(/>/g,"&gt;"),/^\x01ACTION.*\x01$/.test(i)&&(i=i.replace(/^\x01ACTION/,"").replace(/\x01$/,"").trim());var o={};!n.hasOwnProperty("emotes")||"string"==typeof n.emotes&&(n.emotes=n.emotes.split("/"),n.emotes.forEach(function(t){t=t.split(":"),o[t[0]]||(o[t[0]]=[]),t[1].split(",").forEach(function(e){e=e.split("-"),o[t[0]].push([parseInt(e[0]),parseInt(e[1])])})}));for(var s=IS(i,o),d=0;d<s.length;d++)"string"==typeof s[d]?s[d]=ES(n,s[d]):s[d]=s[d][0];e=s.join(" "),e=xS.parse(e,!0,!0),Dc(t+='<span class="message">'+e+"</span>")}function Dc(e){var t=document.createElement("div");t.className="chat_line",t.innerHTML=e,jc.appendChild(t),Rc(),100<++kc&&(kc=0,Ul())}function Rc(){jc.scrollTop=jc.scrollHeight}function Vc(){Uc(),window.clearTimeout(fc),window.clearTimeout(_c),window.clearInterval(hc)}function Hc(){Vc(),bc&&bc.close(1e3),yc=0,h_("chat_box"),wc=vc=!1}var Jc,qc,zc,jc,Xc,Wc=!1,Yc=0,Kc=[],$c=[],Zc=10,Qc=null,el=0,tl="",nl=["ff0000","ff4000","ff8000","ffbf00","ffff00","bfff00","80ff00","40ff00","00ff00","00ff40","00ff80","00ffbf","00ffff","00bfff","0080ff","0040ff","ff00ff","ff00bf","ff0080","ff0040"],al=nl.length,il=0,ol=!1,sl=0;function dl(){jc=document.getElementById("chat_box"),ll()}function cl(){xl(),lu&&yr.Play_ChatForceDisable?(Wc||ll(),X_(function(){gl(sl=(new Date).getTime())})):Al()}function ll(){Yc=0,Wc=!(Mc={}),rl()}function rl(){Ef("https://badges.twitch.tv/v1/badges/global/display",1e4,0,null,_l,ul,!1)}function ul(){++Yc<Zc?rl():Wc=!1}function _l(e){SS(JSON.parse(e).badge_sets).forEach(function(t){t.versions.forEach(function(e){PS(t.type,e.type,e.image_url_4x,null)})}),fl()}function fl(){Yc=0,ml()}function ml(){Ef("https://api.betterttv.net/2/emotes",1e4,0,null,pl,hl,!1)}function hl(){++Yc<Zc?ml():Wc=!1}function pl(t){(t=JSON.parse(t)).emotes.forEach(function(e){Mc[e.code]={restrictions:e.restrictions,code:e.code,source:"bttv",id:e.id,"1x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","1x"),"2x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","2x"),"3x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","3x")}}),Wc=!0}function gl(e){Yc=0,vl(e)}function vl(e){var t="https://badges.twitch.tv/v1/badges/channels/"+yr.Main_selectedChannel_id+"/display",n=new XMLHttpRequest;n.open("GET",t,!0),n.timeout=1e4,n.ontimeout=function(){},n.onreadystatechange=function(){if(4===n.readyState){if(200===n.status)return void(sl===e&&bl(n.responseText,e));sl===e&&yl(e)}},n.send(null)}function yl(e){Yc++,sl===e&&(Yc<Zc?vl(e):Xc=window.setTimeout(function(){vl(e)},1e3))}function bl(e,t){SS(JSON.parse(e).badge_sets).forEach(function(t){t.versions.forEach(function(e){PS(t.type,e.type,e.image_url_4x,jc)})}),sl===t&&wl(t)}function wl(e){Yc=0,sl===e&&kl(e)}function kl(e){var t="https://api.twitch.tv/v5/videos/"+yr.ChannelVod_vodId+"/comments?client_id="+Wr+(el?"&content_offset_seconds="+parseInt(el):""),n=new XMLHttpRequest;n.open("GET",t,!0),n.timeout=1e4,n.ontimeout=function(){},n.onreadystatechange=function(){if(4===n.readyState){if(200===n.status)return void(sl===e&&Ml(n.responseText,e));sl===e&&Cl(e)}},n.send(null)}function Cl(e){Yc++,sl===e&&(Yc<Zc?kl(e):qc=window.setTimeout(function(){kl(e)},2500))}function Ml(e,t){e=JSON.parse(e);var n,a,i=null===Qc;i&&(n="&nbsp;",n+='<span class="message">',n+=oa+wn+yr.Main_selectedChannelDisplayname+" "+tl,El(n+="</span>",0)),el=0,Qc=e._next,e.comments.forEach(function(e){n="",(a=e.message).hasOwnProperty("user_badges")&&a.user_badges.forEach(function(e){n+='<span class="'+e._id+"-"+e.version+' tag"></span>'}),n+='<span class="nick" style="color: #'+nl[e.commenter.display_name.charCodeAt(0)%al]+';">'+e.commenter.display_name+"</span>&#58;&nbsp;",n+='<span class="message">',a.fragments.forEach(function(e){e.hasOwnProperty("emoticon")?n+='<img class="emoticon" src="https://static-cdn.jtvnw.net/emoticons/v1/'+e.emoticon.emoticon_id+'/1.0" srcset="https://static-cdn.jtvnw.net/emoticons/v1/'+e.emoticon.emoticon_id+"/2.0 2x, https://static-cdn.jtvnw.net/emoticons/v1/"+e.emoticon.emoticon_id+'/3.0 4x">':n+=xS.parse(e.text,!1,!0)}),n+="</span>",i?El(n,e.content_offset_seconds):void 0!==Qc&&Il(n,e.content_offset_seconds)}),i&&sl===t&&(Sl(t),void 0!==Qc&&Tl(t))}function El(e,t){Kc.push({time:t,message:e})}function Il(e,t){$c.push({time:t,message:e})}function Sl(e){ol||sl!==e||(Jc=window.setInterval(function(){Ll(e),jc.scrollTop=jc.scrollHeight},1e3))}function Pl(){ol||(window.clearTimeout(Xc),window.clearTimeout(qc),window.clearTimeout(zc),window.clearInterval(Jc))}function xl(){Pl(),sl=0,h_("chat_box"),ol=!1,Qc=null,Kc=[],$c=[],il=0}function Ll(e){var t;if(il<Kc.length-1)for(var n=il;n<Kc.length&&Kc[n].time<Yd+Android.gettime()/1e3;n++,il++)(t=document.createElement("div")).className="chat_line",t.innerHTML=Kc[n].message,jc.appendChild(t);else if(Pl(),void 0!==Qc)Kc=$c.slice(),il=0,Sl(e),$c=[],sl===e&&Tl(e),Ul();else{var a="&nbsp;";a+='<span class="message">',a+=oa+oa+En+oa+oa,a+="</span>",(t=document.createElement("div")).className="chat_line",t.innerHTML=a,jc.appendChild(t),ol=!0,jc.scrollTop=jc.scrollHeight,window.clearInterval(Jc),Jc=window.setInterval(function(){jc.scrollTop=jc.scrollHeight},1e3)}}function Tl(e){Yc=0,ol||sl!==e||Bl(e)}function Bl(e){var t="https://api.twitch.tv/v5/videos/"+yr.ChannelVod_vodId+"/comments?client_id="+Wr+(null!==Qc?"&cursor="+Qc:""),n=new XMLHttpRequest;n.open("GET",t,!0),n.timeout=1e4,n.ontimeout=function(){},n.onreadystatechange=function(){if(4===n.readyState){if(200===n.status)return void(ol||sl!==e||Ml(n.responseText,e));ol||sl!==e||Ol(e)}},n.send(null)}function Ol(e){Yc++,sl===e&&(Yc<Zc?Bl(e):zc=window.setTimeout(function(){Bl(e)},2500))}function Gl(){sl=0,Nl(ln+oa+rn)}function Al(){xl(),Nl(Qn)}function Nl(e){var t="&nbsp;";t+='<span class="message">',t+=oa+oa+oa+oa+oa+oa+oa+oa+oa+oa,t+=e,t+="</span>";var n=document.createElement("div");n.className="chat_line",n.innerHTML=t,jc.appendChild(n)}function Ul(){var e=document.getElementsByClassName("chat_line");if(0<e.length-100)for(var t=0;t<e.length-100;t++)e[0].parentNode.removeChild(e[0]);Rc()}var Fl,Dl,Rl,Vl,Hl,Jl,ql,zl=!0,jl=!1,Xl=!1,Wl=-1,Yl=new Image,Kl=1,$l=2,Zl=3,Ql=4,er=5,tr=6,nr=7,ar=8,ir=9,or=10,sr=11,dr=12,cr=13,lr=14,rr=15,ur=16,_r=17,fr=18,mr=19,hr=20,pr=21,gr=22,vr="",yr={Main_Go:1,Main_Before:1,Main_BeforeSearch:1,Main_BeforeChannel:1,Main_BeforeAgame:Zl,Main_BeforeChannelisSet:!1,Main_BeforeAgameisSet:!1,Main_selectedChannel:"",Main_selectedChannelDisplayname:"",Main_selectedChannelLogo:"",Main_selectedChannel_id:"",Main_gameSelected:"",Main_OldgameSelected:null,Play_isHost:!1,Play_DisplaynameHost:"",Play_selectedChannelDisplayname:"",Play_selectedChannel:"",Play_gameSelected:"",Users_Position:0,Users_AddcodePosition:0,Play_WasPlaying:0,ChannelVod_vodId:"",vodOffset:0,Search_data:"",isLastSChannels:!1,gameSelectedOld:"",Games_return:!1,Search_isSearching:!1,Play_ChatForceDisable:!1,Never_run:!0,Main_CenterLablesVectorPos:0},br=!0,wr=!0,kr=!1,Cr=[],Mr=0,Er=0,Ir=null,Sr=!0,Pr="",xr=!1,Lr="",Tr=["label_side_panel","label_refresh","top_bar_live","top_bar_user","top_bar_featured","top_bar_game","top_bar_vod","top_bar_clip"],Br=[],Or=0,Gr=!0,Ar=0,Nr=1.35,Ur=1.5,Fr=45,Dr=3,Rr=Math.floor(Fr/Dr/Ur),Vr=45,Hr=5,Jr=Math.floor(Vr/Hr/Nr),qr=48,zr=6,jr=Math.floor(qr/zr/Ur),Xr=6,Wr="5seja5ptej058mxqy7gh5tcudjqtm9",Yr="Client-ID",Kr="Accept",$r="Authorization",Zr="OAuth ",Qr="application/vnd.twitchtv.v5+json",eu="528x297",tu="340x475",nu="stream_thumbnail_focused",au="data_attribute",iu="1.0",ou=".12",su="042619",du=iu+ou+"-"+su,cu=0,lu=0,ru="?"+Math.random(),uu="https://fgl27.github.io/SmartTwitchTV/release/githubio/images/",_u=uu+"404_game.png",fu=uu+"404_logo.png",mu=uu+"404_video.png",hu="https://cors-anywhere.herokuapp.com/",pu=function(e,t,n){e.onerror=function(){this.src=n},e.src=t};function gu(){(Xl=bf("Main_isDebug",!1))&&zl?vu():"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){yu(window.navigator.userLanguage||window.navigator.language)}):yu(window.navigator.userLanguage||window.navigator.language)}function vu(){console.log("Debug mod start");var e=document.createElement("script");e.src="https://fgl27.github.io/SmartTwitchTV/release/githubio/js/masterdebug.js",document.head.appendChild(e)}function yu(e){z_(),X_(function(){try{lu=Android.getAndroid()}catch(e){lu=0,document.body.style.backgroundColor="rgba(0, 0, 0, 1)",jl=Xl=!0,console.log("Main_isReleased: "+zl),console.log("Main_isDebug: "+Xl),console.log("Main_isBrowser: "+jl)}Ok(),ka(),console.log("language is "+e),wa(),-1!==window.location.href.indexOf("code")&&kf(window.location.href),bu()})}function bu(){By(),wu(!0),Fl=document.getElementById("scrollbar"),d_(),vr=yr.Main_Go,X_(function(){dl(),qh(),$i(),Zi()&&(ql=window.setInterval($_,6e5),$_()),document.body.addEventListener("keyup",T_,!1),Oy(),document.getElementById("side_panel").style.marginLeft="",f_(),ku(),KI=bf("Vod_highlight",!1),Jd=bf("ChannelVod_highlight",!1),us=bf("AGameVod_highlight",!1),lI=bf("UserVod_highlight",!1),jI=vf("vod_periodNumber",2),ds=vf("AGameVod_periodNumber",2),oI=vf("UserVod_TypeNumber",1),by(),Dl=document.getElementById("search_input"),Rl=document.getElementById("user_input"),w_(mu),w_(_u),w_(fu),document.addEventListener("visibilitychange",Y_,!1),Hl=window.setInterval(K_,6e4),Ty=cb,Ny(),Vl=window.setTimeout(n_,5e3),Eu("topbar")})}function wu(e){K_(),Cu("label_refresh","icon-refresh",t+Wt),xu("label_update",'<div class="strokedextramini" style="vertical-align: middle; display: inline-block;"><i class="icon-arrow-up" style="color: #FF0000; font-size: 115%; "></i></div><div class="strokedextramini" style="vertical-align: middle; display: inline-block; color: #FF0000">'+ya+ft+"</div>"),Cu("label_side_panel","icon-ellipsis",Fn),Cu("icon_feed_refresh","icon-refresh",t+" Press up"),Lu("top_bar_live",_),Lu("top_bar_user",e?u:a),Lu("top_bar_featured",on),Lu("top_bar_game",f),Lu("top_bar_vod",Qt),Lu("top_bar_clip",U),xu("scene2_search_text",ya+n),xu("scene2_channel_text",ya+Ut),xu("scene2_game_text",ya+Ht),Lu("dialog_end_replay_text",tn),Lu("dialog_end_vod_text",dn),Lu("dialog_end_channel_text",Ut),Lu("dialog_end_game_text",Ht),xu("dialog_about_text",ha+pa),Br=[ce,le,re,ue],e?Sk():(Bk(),f_())}function ku(){Lu("play_dialog_exit_text",J),Lu("side_panel_search",n),Lu("side_panel_settings",a),Lu("side_panel_about",i),Lu("side_panel_controls",e),Lu("side_panel_exit",z),Lu("side_panel_live",_),Lu("side_panel_user",u),Lu("side_panel_featured",on),Lu("side_panel_games",f),Lu("side_panel_videos",Qt),Lu("side_panel_clips",U),Lu("side_panel_hide",o),Lu("chanel_button",I),Lu("game_button",f),Lu("live_button",_),Lu("exit_app_cancel",W),Lu("exit_app_close",j),Lu("remove_cancel",W),Lu("remove_yes",Jt),Lu("exit_app_minimize",X),Lu("main_dialog_exit_text",q),xu("dialog_controls_text",ma),Lu("dialog_vod_text",kn),xu("dialog_vod_start_text",Mn)}function Cu(e,t,n){xu(e,'<div class="strokedextramini" style="vertical-align: middle; display: inline-block;"><i class="'+t+'" style="color: #FFFFFF; font-size: 115%; "></i></div><div class="strokedextramini" style="vertical-align: middle; display: inline-block">'+ya+n+"</div>")}function Mu(e){document.getElementById(e).classList.add("hide")}function Eu(e){document.getElementById(e).classList.remove("hide")}function Iu(e){return-1===document.getElementById(e).className.indexOf("hide")}function Su(e,t){document.getElementById(e).classList.add(t)}function Pu(e,t){document.getElementById(e).classList.remove(t)}function xu(e,t){document.getElementById(e).innerHTML=t}function Lu(e,t){document.getElementById(e).textContent=t}function Tu(){y_(-1),lu?Android.mshowLoading(!0):Eu("dialog_loading")}function Bu(){lu?Android.mshowLoading(!1):Mu("dialog_loading")}function Ou(){window.clearTimeout(Ir)}function Gu(){Ir=window.setTimeout(Nu,6e3)}function Au(){Gu(),Eu("main_dialog_exit"),document.body.addEventListener("keydown",sf,!1)}function Nu(){document.body.removeEventListener("keydown",sf,!1),uf(Jl),Ou(),Mu("main_dialog_exit"),Er=0,Uu()}function Uu(){Pu("exit_app_cancel","button_search_focused"),Pu("exit_app_minimize","button_search_focused"),Pu("exit_app_close","button_search_focused"),Su(Er?1===Er?"exit_app_minimize":"exit_app_close":"exit_app_cancel","button_search_focused")}function Fu(){h_("dialog_counter_text"),Ru(0,0,0)}function Du(e,t,n,a){0<a?(Lu("dialog_counter_text",t*n+(e+1)+"/"+a),Ru(t,n,a)):Fu()}function Ru(e,t,n){var a=screen.height/100*7;if(3===t&&9<n||5===t&&10<n||6===t&&12<n){var i=yr.Main_Go===Ql||yr.Main_Go===mr||yr.Main_Go===hr||yr.Main_Go===dr||yr.Main_Go===gr||yr.Main_Go===_r||yr.Main_Go===fr||yr.Main_Go===cr,o=Math.ceil((screen.height-3*a)/(Math.ceil(n/t)-1)*e+a*(i?1.8:1));Fl.style.top=o+"px",Sr&&(Sr=!1,Fl.style.backgroundColor="#777777")}else Fl.style.backgroundColor="#000000",Fl.style.top=a+"px",Sr=!0}function Vu(e){(Xr=12)/3<e&&(Xr=3*e),99<Xr&&(Xr=99)}function Hu(e){Lu("dialog_warning_text",e),Eu("dialog_warning")}function Ju(){Mu("dialog_warning")}function qu(){Yu(),Eu("dialog_about")}function zu(){Mu("dialog_about")}function ju(){return Iu("dialog_about")}function Xu(){Yu(),Ju(),c_(yr.Main_Go),Fu(),Ek()}function Wu(){zu(),Eu("dialog_controls")}function Yu(){Mu("dialog_controls")}function Ku(){return Iu("dialog_controls")}function $u(e){return(e+"").replace(/\B(?=(\d{3})+(?!\d))/g,",")}function Zu(e,t,n){return(e+="").indexOf("x")||(e=e.slice(-3)),e+"p"+(t=58<t?60:t<32?30:Math.ceil(t))+(""!==n?" ["+n.toUpperCase()+"]":"")}function Qu(e){return-1!==e.indexOf("live")?"":Y}function e_(e,t,n){return null!==document.getElementById(n+e+"_"+t)}function t_(){K_(),i_(),document.body.addEventListener("keyup",T_,!1)}function n_(){for(var e,t=0;t<Tr.length;t++)t<4?document.getElementById(Tr[t]).style.opacity="0.5":-1===(e=document.getElementById(Tr[t])).className.indexOf("icon_center_focus")&&(e.style.opacity="0.5");Su("topbar","topbar_dim")}function a_(){for(var e=0;e<Tr.length;e++)document.getElementById(Tr[e]).style.opacity="1";Pu("topbar","topbar_dim")}function i_(e){window.clearTimeout(Vl),a_(),X_(function(){o_(e)})}function o_(e){yr.Main_Go!==sr&&(yr.Main_BeforeChannelisSet=!1),yr.Main_Go!==Ql&&(yr.Main_BeforeAgameisSet=!1),Fu(),yr.Main_Go===Kl?(Ty=cb,Ny()):yr.Main_Go===$l?Ri():yr.Main_Go===Zl?(Ty=sb,Ny()):yr.Main_Go===Ql?Eo():yr.Main_Go===ar?Gw():yr.Main_Go===ir?yw():yr.Main_Go===or?sk():yr.Main_Go===sr?Zs():yr.Main_Go===dr?Kd():yr.Main_Go===cr?(Ty=ib,Ny()):yr.Main_Go===lr?SE():yr.Main_Go===er?nE():yr.Main_Go===tr?UC():yr.Main_Go===nr?(Ty=db,Ny()):yr.Main_Go===rr?dC():yr.Main_Go===ur?zb():yr.Main_Go===_r?QI():yr.Main_Go===fr?(Ty=ab,Ny()):yr.Main_Go===mr?fs():yr.Main_Go===hr?(Ty=ob,Ny()):yr.Main_Go===pr?(Ty=lb,Ny()):yr.Main_Go===gr&&rI(),Vl=window.setTimeout(n_,3e3),e&&hf()}function s_(){gf("Main_values",JSON.stringify(yr))}function d_(){yr=Ay(yr,yf("Main_values",{}))}function c_(e){e===Kl?Uy():e===$l?Vi():e===Zl?Uy():e===Ql?Io():e===ar?Aw():e===ir?bw():e===or?dk():e===sr?Qs():e===dr?$d():e===cr?Uy():e===lr?PE():e===er?aE():e===tr?FC():e===nr?Uy():e===rr?cC():e===ur?jb():e===_r?eS():e===fr?Uy():e===mr?ms():e===hr?Uy():e===pr?Uy():e===gr&&uI(),Iu("settings_scroll")&&Ik()}function l_(){Cu("label_refresh","icon-refresh",t+Wt),Cu("label_side_panel","icon-ellipsis",Fn),Pu("top_bar_user","icon_center_focus"),Lu("top_bar_live",_),Lu("top_bar_user",u),Lu("top_bar_featured",on),Lu("top_bar_game",f),Lu("top_bar_vod",Qt),Lu("top_bar_clip",U)}function r_(){Cu("label_side_panel","icon-arrow-circle-left",P),h_("top_bar_live"),h_("top_bar_game"),h_("top_bar_vod"),h_("top_bar_clip"),h_("top_bar_featured"),Su("top_bar_user","icon_center_focus")}function u_(e){return'<div style="font-size: 30%; position: fixed; line-height: 0; text-shadow: #000000 0 0 5.7px, #000000 0 0 5.7px, #000000 0 0 4px">'+e+"</div>"}function __(e){return e=new Date(e),xr?e.getDate()+" "+Yt[e.getMonth()]+", "+e.getFullYear():Yt[e.getMonth()]+" "+e.getDate()+", "+e.getFullYear()}function f_(){if(lu)try{var e=Android.getversion();du="Android: "+e+" Web: "+su,m_(e)&&Eu("label_update")}catch(e){}xu("dialog_about_text",ha+be+du+pa)}function m_(e){return e=e.split("."),parseFloat(e[0]+"."+e[1])<parseFloat(iu)||parseInt(e[2])<parseInt(ou.split(".")[1])}function h_(e){for(e=document.getElementById(e);e.firstChild;)e.removeChild(e.firstChild)}function p_(e){for(var t,n=0;n<Cr.length;n++)null!==(t=document.getElementById(Cr[n].id))&&pu(t,Cr[n].src+ru,e)}function g_(){Cr=[]}function v_(e,t){Cr.push({id:e,src:t})}function y_(e){Wl=e}function b_(e){var t=0;return Wl<e?t=-1:e<Wl&&(t=1),Wl=e,t}function w_(e){Yl.src=e}function k_(e){return(Pr=document.createElement("td")).setAttribute("id",e),Pr.className="stream_cell",Pr}function C_(e,t,n){return(Pr=document.createElement("td")).setAttribute("id",t[4]+e),Pr.setAttribute(au,n[0]),Pr.setAttribute("data-id",n[1]),Pr.className="stream_cell",Pr.innerHTML=E_(e,t,n),Pr}function M_(e,t,n){var a=document.getElementById(e),i=e.split(n[5])[1];a.setAttribute(au,t[0]),a.setAttribute("data-id",t[1]),a.innerHTML=E_(i,n,t),a.setAttribute("id",n[4]+i)}function E_(e,t,n){return v_(t[1]+e,n[2]),'<div id="'+t[0]+e+'" class="stream_thumbnail_channel" ><img id="'+t[1]+e+'" class="stream_img"></div><div id="'+t[2]+e+'" class="stream_text"><div id="'+t[3]+e+'" class="stream_channel">'+n[3]+"</div></div>"}function I_(e,t,n,a,i){return e<Dr&&w_(i[0]),(Pr=document.createElement("td")).setAttribute("id",a[8]+t),Pr.setAttribute(au,JSON.stringify(n)),Pr.className="stream_cell",Pr.innerHTML=P_(t,a,i),Pr}function S_(e,t,n,a){var i=document.getElementById(e),o=e.split(a[9])[1];i.setAttribute(au,JSON.stringify(t)),i.innerHTML=P_(o,a,n),i.setAttribute("id",a[8]+o)}function P_(e,t,n){return v_(t[1]+e,n[0]),'<div id="'+t[0]+e+'" class="stream_thumbnail_video" ><img id="'+t[1]+e+'" class="stream_img"></div><div id="'+t[2]+e+'" class="stream_text"><div id="'+t[3]+e+'" class="stream_channel" style="width: 66%; display: inline-block;">'+n[1]+'</div><div id="'+t[7]+e+'"class="stream_info" style="width:33%; float: right; text-align: right; display: inline-block;">'+n[5]+'</div><div id="'+t[4]+e+'"class="stream_info">'+xS.parse(n[2])+'</div><div id="'+t[5]+e+'"class="stream_info">'+g+n[3]+'</div><div id="'+t[6]+e+'"class="stream_info">'+n[4]+"</div></div>"}function x_(e,t,n){return(Pr=document.createElement("td")).setAttribute("id",t[5]+e),Pr.setAttribute(au,n[0]),Pr.className="stream_cell",Pr.innerHTML=L_(e,t,n),Pr}function L_(e,t,n){return v_(t[1]+e,n[1]),'<div id="'+t[0]+e+'" class="stream_thumbnail_game" ><img id="'+t[1]+e+'" class="stream_img"></div><div id="'+t[2]+e+'" class="stream_text"><div id="'+t[3]+e+'" class="stream_channel">'+n[0]+'</div><div id="'+t[4]+e+'"class="stream_info_games" style="width: 100%; display: inline-block;">'+n[2]+"</div></div>"}function T_(){wr=!0}function B_(){br=!0}function O_(){br=!1,window.setTimeout(B_)}function G_(){return!br||!wr}function A_(e,t,n,a,i){Su(n[0]+e+"_"+t,nu),Du(t,e,a,i),b_(e)?1<e?e_(e+1,0,n[0])?J_(n[6],-1*document.getElementById(n[4]+e+"_"+t).offsetTop+.42*screen.height):T_():J_(n[6],.07*screen.height):T_()}function N_(e,t,n,a,i){Su(n[0]+e+"_"+t,nu),Du(t,e,a,i),b_(e)?e?e_(e+1,0,n[0])&&J_(n[10],-1*document.getElementById(n[8]+(e-1)+"_"+t).offsetTop):J_(n[10],.07*screen.height):T_()}function U_(e,t,n,a,i){Su(n[0]+e+"_"+t,nu),Du(t,e,a,i),b_(e)?J_(n[10]?n[10]:n[7],e?-1*document.getElementById(n[5]+(e-1)+"_"+t).offsetTop+.025*screen.height:-1*document.getElementById(n[5]+e+"_"+t).offsetTop+.025*screen.height):T_()}function F_(e,t,n){document.body.removeEventListener("keydown",n),yr.Play_selectedChannel=JSON.parse(document.getElementById(t[8]+e).getAttribute(au)),yr.Play_selectedChannel_id=yr.Play_selectedChannel[1],yr.Play_selectedChannel=yr.Play_selectedChannel[0],yr.Main_Go===tr?(yr.Play_DisplaynameHost=document.getElementById(t[3]+e).textContent,yr.Play_selectedChannelDisplayname=yr.Play_DisplaynameHost.split(ae)[1],yr.Play_isHost=!0):yr.Play_selectedChannelDisplayname=document.getElementById(t[3]+e).textContent,yr.Play_gameSelected=document.getElementById(t[5]+e).textContent.split(g)[1],yr.Main_Go===Ql&&(yr.Main_OldgameSelected=yr.Main_gameSelected),D_()}function D_(){document.body.addEventListener("keydown",Rg,!1),Mu("scene1"),Eu("scene2"),Xp(),Qp(),pg(),Zi()&&!ZC&&cM&&GM(),X_(Xh)}function R_(e,t,n){document.body.removeEventListener("keydown",n),mb=JSON.parse(document.getElementById(t[8]+e).getAttribute(au)),$f=parseInt(mb[1]),yr.Play_gameSelected=mb[2],yr.Main_selectedChannel=mb[3],yr.Main_selectedChannelDisplayname=mb[4],yr.Main_selectedChannelLogo=mb[5],yr.Main_selectedChannel_id=mb[6],yr.ChannelVod_vodId=mb[7],Yd=parseInt(mb[8]),fb=mb[9],pb=mb[10],ub=mb[11],mb=mb[0],hb=document.getElementById(t[4]+e).textContent,_b=document.getElementById(t[6]+e).textContent,document.body.addEventListener("keydown",bm,!1),Mu("scene1"),Eu("scene2"),Qp(),Jp(),Np(),Dp(),Zi()&&!ZC&&cM&&GM(),X_(Zf)}function V_(e,t,n){document.body.removeEventListener("keydown",n),yr.ChannelVod_vodId=JSON.parse(document.getElementById(t[8]+e).getAttribute(au)),Nd=parseInt(yr.ChannelVod_vodId[1]),Dd=yr.ChannelVod_vodId[2],yr.Play_gameSelected=yr.ChannelVod_vodId[3],yr.Main_selectedChannel=yr.ChannelVod_vodId[4],Nh=yr.ChannelVod_vodId[5],yr.ChannelVod_vodId=yr.ChannelVod_vodId[0].substr(1),yr.Main_Go===dr?zd=document.getElementById(t[3]+e).innerHTML:(zd="",yr.Main_selectedChannelDisplayname=document.getElementById(t[3]+e).textContent),Xd=document.getElementById(t[4]+e).textContent,Wd=document.getElementById(t[5]+e).textContent,jd=document.getElementById(t[11]+e).innerHTML+", "+document.getElementById(t[6]+e).textContent,H_()}function H_(){document.body.addEventListener("keydown",Ly,!1),Mu("scene1"),Eu("scene2"),iy(),Qp(),Jp(),Dp(),Mv=!1,Zi()&&!ZC&&cM&&GM(),X_(Tv)}function J_(e,t){document.getElementById(e).style.top=t+"px",window.setTimeout(T_,10)}function q_(e,t){wr=!1,Pu(t[0]+e,nu)}function z_(){var e=document.createElement("span");e.className="fa",e.style.display="none",document.body.insertBefore(e,document.body.firstChild),"icons"!==window.getComputedStyle(e,null).getPropertyValue("font-family")?(Xl&&console.log("Main_Checktylesheet reloading"),j_("https://fgl27.github.io/SmartTwitchTV/release/githubio/css/icons.min.css")):Xl&&console.log("Main_Checktylesheet loaded OK"),document.body.removeChild(e)}function j_(e){var t=document.createElement("link");t.rel="stylesheet",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)}function X_(e){"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?window.setTimeout(e):document.addEventListener("DOMContentLoaded",e)}function W_(){var e=(new Date).getTime()+cu;return e=new Date(e),(xr?Kt[e.getDay()]+" "+e.getDate()+"/"+Yt[e.getMonth()]:Kt[e.getDay()]+" "+Yt[e.getMonth()]+"/"+e.getDate())+" "+Cp(e.getHours())+":"+Cp(e.getMinutes())}function Y_(){document.hidden||(K_(),window.setTimeout(K_,2e4))}function K_(){document.hidden||(Lu("label_clock",W_()),ru="?"+Math.random())}function $_(){document.hidden||Zi()&&window.setTimeout(function(){MM()||ZC||(Um=Ni[yr.Users_Position].name,_M())},5e3)}function Z_(){Su("side_panel_"+Ar,"side_panel_text_focus")}function Q_(){Pu("side_panel_"+Ar,"side_panel_text_focus")}function ef(){Ar?1===Ar?Xu():2===Ar?(document.body.addEventListener("keydown",Jl,!1),qu()):3===Ar?(document.body.addEventListener("keydown",Jl,!1),Wu()):4===Ar?Au(Jl):5===Ar?tf(Kl):6===Ar?tf(io()?lr:$l):7===Ar?tf(pr):8===Ar?tf(Zl):9===Ar?tf(_r):10===Ar&&tf(fr):yr.Main_Go!==ar?(yr.Search_isSearching||yr.Main_Go!==sr&&yr.Main_Go!==cr&&yr.Main_Go!==dr||wd(),yr.Main_BeforeSearch=yr.Main_Go,yr.Main_Go=ar,c_(yr.Main_BeforeSearch),i_()):document.body.addEventListener("keydown",Jl,!1),af()}function tf(e){e===yr.Main_Go?document.body.addEventListener("keydown",Jl,!1):(yr.Main_Before=yr.Main_Go,yr.Main_Go=e,c_(yr.Main_Before),i_())}function nf(e){Jl=e,document.body.removeEventListener("keydown",Jl),document.body.addEventListener("keydown",of,!1),Pu("side_panel","side_panel_hide")}function af(){document.body.removeEventListener("keydown",of),Su("side_panel","side_panel_hide"),Q_(),Ar=0,Z_()}function of(e){switch(e.keyCode){case Ta:case Ia:document.body.addEventListener("keydown",Jl,!1),af(),ff();break;case Sa:Ar&&(Q_(),Ar--,Z_());break;case xa:Ar<10&&(Q_(),Ar++,Z_());break;case La:ef()}}function sf(e){switch(e.keyCode){case Ta:Nu();break;case Pa:2<++Er&&(Er=0),Uu(),Ou(),Gu();break;case Ia:--Er<0&&(Er=2),Uu(),Ou(),Gu();break;case La:Er?lu&&1===Er?Android.mclose(!1):lu&&2===Er&&Android.mclose(!0):Nu()}}gu();var df=["top_bar_live","top_bar_user","top_bar_featured","top_bar_game","top_bar_vod","top_bar_clip"],cf=[Kl,lr,pr,Zl,_r,fr],lf=!1;function rf(e){if(!(lf||Ty.FirstLoad||G_()))switch(e.keyCode){case Ta:Ku()?(ff(),Yu()):ju()?(ff(),zu()):yr.Main_Go===Ql?(yr.Main_OldgameSelected=yr.Main_gameSelected,yr.Games_return?(yr.Main_Go=ir,yr.Main_gameSelected=yr.gameSelectedOld):(yr.Main_Go=yr.Main_BeforeAgame,yr.Main_BeforeAgame=Kl),Io(),_f(),o_()):yr.Main_Go===hr?(Qy(Ql),_f(),o_()):yr.Main_Go===nr?(Qy(lr),_f(),o_()):yr.Main_Go===cr?(Qy(sr),_f(),o_()):yr.Main_Go===mr?(yr.Main_Go=Ql,ms(),_f(),o_()):yr.Main_Go===er?(yr.Main_Go=lr,aE(),_f(),o_()):yr.Main_Go===tr?(yr.Main_Go=lr,FC(),_f(),o_()):yr.Main_Go===gr?(yr.Main_Go=lr,uI(),_f(),o_()):yr.Main_Go===rr?(yr.Main_Go=lr,cC(),_f(),o_()):yr.Main_Go===sr?(yr.Main_Go=yr.Main_BeforeChannel,yr.Main_BeforeChannel=Kl,Qs(),yr.Main_selectedChannel_id="",_f(),o_()):yr.Main_Go===dr?(yr.Main_Go=sr,$d(),_f(),o_()):yr.Main_Go===or?(yr.Main_Go===yr.Main_BeforeSearch?yr.Main_Go=Kl:yr.Main_Go=yr.Main_BeforeSearch,dk(),yr.Search_isSearching=!1,_f(),o_()):yr.Main_Go===ir?(yr.Main_Go===yr.Main_BeforeSearch?yr.Main_Go=Kl:yr.Main_Go=yr.Main_BeforeSearch,yr.Search_isSearching=!1,bw(),_f(),o_()):yr.Main_Go===ur?(yr.Main_Go===yr.Main_BeforeSearch?yr.Main_Go=Kl:yr.Main_Go=yr.Main_BeforeSearch,yr.Main_selectedChannel_id&&kd(),jb(),yr.Search_isSearching=!1,_f(),o_()):(_f(),nf(rf));break;case Pa:if(yr.Search_isSearching||yr.Main_Go===sr||yr.Main_Go===dr||yr.Main_Go===cr||yr.Main_Go===or||yr.Main_Go===ir||yr.Main_Go===ur)break;Pu(df[yr.Main_CenterLablesVectorPos],"icon_center_line"),yr.Main_CenterLablesVectorPos++,5<yr.Main_CenterLablesVectorPos&&(yr.Main_CenterLablesVectorPos=0),ff(),mf();break;case Ia:if(yr.Search_isSearching||yr.Main_Go===sr||yr.Main_Go===dr||yr.Main_Go===cr||yr.Main_Go===or||yr.Main_Go===ir||yr.Main_Go===ur)break;Pu(df[yr.Main_CenterLablesVectorPos],"icon_center_line"),yr.Main_CenterLablesVectorPos--,yr.Main_CenterLablesVectorPos<0&&(yr.Main_CenterLablesVectorPos=5),ff(),mf();break;case xa:Pu(df[yr.Main_CenterLablesVectorPos],"icon_center_line"),document.body.removeEventListener("keydown",rf),kr=!1,o_();break;case La:pf()}}function uf(e){window.clearTimeout(Vl),a_(),document.body.removeEventListener("keydown",e),document.body.removeEventListener("keydown",rf),document.body.addEventListener("keydown",rf,!1),ff()}function _f(){Pu(df[yr.Main_CenterLablesVectorPos],"icon_center_line"),document.body.removeEventListener("keydown",rf),kr=!1}function ff(){kr=!0,Su(df[yr.Main_CenterLablesVectorPos],"icon_center_line")}function mf(){c_(yr.Main_Go),yr.Main_Go=cf[yr.Main_CenterLablesVectorPos],yr.Main_Go!==lr||io()?i_(!0):(yr.Main_Go=$l,_f(),i_())}function hf(){yr.Main_Go===Kl?(Ty=cb,document.body.removeEventListener("keydown",nb)):yr.Main_Go===lr?document.body.removeEventListener("keydown",JE):yr.Main_Go===Ql?document.body.removeEventListener("keydown",zo):yr.Main_Go===pr?(Ty=lb,document.body.removeEventListener("keydown",nb)):yr.Main_Go===or?document.body.removeEventListener("keydown",yk):yr.Main_Go===ir?document.body.removeEventListener("keydown",Lw):yr.Main_Go===ur?document.body.removeEventListener("keydown",ow):yr.Main_Go===dr?document.body.removeEventListener("keydown",uc):yr.Main_Go===sr?document.body.removeEventListener("keydown",Cd):yr.Main_Go===tr?document.body.removeEventListener("keydown",KC):yr.Main_Go===gr?document.body.removeEventListener("keydown",PI):yr.Main_Go===rr?document.body.removeEventListener("keydown",yC):yr.Main_Go===Zl?(Ty=sb,document.body.removeEventListener("keydown",nb)):yr.Main_Go===cr?(Ty=ib,document.body.removeEventListener("keydown",nb)):yr.Main_Go===_r?document.body.removeEventListener("keydown",yS):yr.Main_Go===fr?(Ty=ab,document.body.removeEventListener("keydown",nb)):yr.Main_Go===hr?(Ty=ob,document.body.removeEventListener("keydown",nb)):yr.Main_Go===nr?(Ty=db,document.body.removeEventListener("keydown",nb)):yr.Main_Go===mr?document.body.removeEventListener("keydown",Ps):yr.Main_Go===er&&document.body.removeEventListener("keydown",vE)}function pf(){window.clearTimeout(Vl),a_(),yr.Main_Go!==sr&&(yr.Main_BeforeChannelisSet=!1),yr.Main_Go!==Ql&&(yr.Main_BeforeAgameisSet=!1),Fu(),yr.Main_Go===Kl?(Ty=cb,Fy()):yr.Main_Go===lr?xE():yr.Main_Go===pr?(Ty=lb,Fy()):yr.Main_Go===Ql?So():yr.Main_Go===rr?lC():yr.Main_Go===sr?ed():yr.Main_Go===dr?Zd():yr.Main_Go===or?ck():yr.Main_Go===ir?ww():yr.Main_Go===ur?Xb():yr.Main_Go===Zl?(Ty=sb,Fy()):yr.Main_Go===nr?(Ty=db).loadingData||Ty.key_refresh():yr.Main_Go===_r?tS():yr.Main_Go===fr?(Ty=ab,Fy()):yr.Main_Go===hr?(Ty=ob,Fy()):yr.Main_Go===cr?(Ty=ib,Fy()):yr.Main_Go===mr?hs():yr.Main_Go===er?iE():yr.Main_Go===tr?DC():yr.Main_Go===gr&&_I(),Vl=window.setTimeout(n_,3e3)}function gf(e,t){localStorage.setItem(e,t)}function vf(e,t){return parseInt(localStorage.getItem(e))||t}function yf(e,t){return JSON.parse(localStorage.getItem(e))||t}function bf(e,t){var n=t.toString();return(localStorage.getItem(e)||n)===n?t:!t}function wf(e){console.log(e);for(var t=0;t<e.length;t++)console.log("Character is: "+e.charAt(t)+" it's Unicode is: \\u"+e.charCodeAt(t).toString(16).toUpperCase())}function kf(e){console.log("processCode");var t="";t=e.match(/code=(\w+)/),Mr=t?(t=t[1],console.log("if code "+t),t):(console.log("else code "+t),0)}function Cf(e,t,n,a,i,o,s){lu?Mf(e,t,n,a,i,o):Ef(e,t,n,a,i,o,s)}function Mf(e,t,n,a,i,o){var s=Android.mreadUrl(e,t,n,a);s&&200===(s=JSON.parse(s)).status?i(s.responseText):o()}function Ef(e,t,n,a,i,o,s){var d=new XMLHttpRequest;d.open("GET",(s?hu:"")+e,!0),d.timeout=t,0<n&&d.setRequestHeader(Yr,Wr),1<n&&d.setRequestHeader(Kr,Qr),2<n&&d.setRequestHeader($r,a),d.ontimeout=function(){},d.onreadystatechange=function(){if(4===d.readyState){if(200===d.status)return void i(d.responseText);o()}},d.send(null)}var If=0,Sf=null,Pf=0,xf=!1,Lf=0,Tf=0,Bf=!1,Of=0,Gf=2e3,Af=5,Nf="source",Uf=Nf,Ff=0,Df=[],Rf="",Vf=!1,Hf=0,Jf=0,qf=1,zf=!1,jf=0,Xf=!1,Wf=!1,Yf=2e3,Kf=[0,5],$f=0;function Zf(){Op(),pg(),ap(document.getElementById("stream_info_icon"),yr.Main_selectedChannelLogo),Lu("stream_info_name",yr.Main_selectedChannelDisplayname),xu("stream_info_title",fb),xu("stream_info_game",ub+", "+_b+", "+pb),Lu("stream_live_icon",hb),Lu("progress_bar_duration",Mp($f)),py((Uh=Kf)[1]),yr.Play_isHost=!1,Lu("progress_bar_current_time",Mp(0)),Lu("stream_live_time",""),Lu("stream_watching_time",""),zf=null!==yr.ChannelVod_vodId,tl=Nt+".",zf?(el=Yd,cl()):Gl(),xu("pause_button",'<i class="strokedbig icon-pause" style="color: #FFFFFF; font-size: 180%;"></i>'),Eu("progress_pause_holder"),vm(),Eu("scene_channel_panel_bottom"),Pf=jf=0,window.clearInterval(Sf),Wf=!1,xm=-13,Hf=Jf=0,Ff=2,Mg(3),vh=!1,ug(),Zi()?(Ja=!0,qa=yr.Main_selectedChannel_id,oi()):Bp(),document.addEventListener("visibilitychange",sm,!1),xf=!1,Bf=!(Tf=Lf=0),Qf(),document.body.removeEventListener("keyup",T_)}function Qf(){Of=0,Gf=2e3,em()}function em(){Cf("https://clips.twitch.tv/api/v2/clips/"+mb+"/status",Gf,1,null,nm,tm,!0)}function tm(){++Of<Af?(Gf+=250,em()):(Gp(),Lg(3))}function nm(e){Df=[],e=JSON.parse(e).quality_options;for(var t=0;t<e.length;t++)Df.length?Df.push({id:e[t].quality+"p"+am(e[t].frame_rate),url:e[t].source}):Df.push({id:e[t].quality+"p"+am(e[t].frame_rate)+" (source)",url:e[t].source});Jf=qf,im()}function am(e){return 40<e?60:""}function im(){window.clearInterval(Sf),Rf=Df[Ff=0].url,-1!==Nf.indexOf("source")&&(Nf="source");for(var e=0;e<hm();e++){if(Df[e].id===Nf){Rf=Df[Ff=e].url;break}-1!==Df[e].id.indexOf(Nf)&&(Rf=Df[Ff=e].url)}Uf=Nf,Xl&&console.log("PlayClip_onPlayer:",'\n\n"'+Rf+'"\n'),Jf=qf,lu&&Bf&&Android.startVideoOffset(Rf,3,Vf?-1:Android.gettime()),Vf=!1,om()}function om(){$m&&!eg()&&Zp(),lu&&(Pf=0,Oh=1+Yf/1e3,Xf=!1,window.clearInterval(Sf),Sf=window.setInterval(dm,Gh))}function sm(){document.hidden&&lm()}function dm(){lu&&(Hf=Android.gettime()),Bf&&If===Hf&&!wp()?++Pf>Oh&&(Xf&&Wf&&Ff<hm()-1?Ff++:!Xf&&Wf&&jf++,navigator.onLine?1<jf?bp(jf,3,cm):(pm(),im(),Wf=!0):yp(!1,3)):(Pf=jf=0,Wf=!1),If=Hf}function cm(e){if(!e){if(!(Ff<hm()-1))return void yp(!1,3);Ff++}jf=0,pm(),im(),Wf=!0}function lm(){Bf&&(Df=[],rm(),Dp(),xp())}function rm(){window.clearInterval(Sf),lu&&Android.stopVideo(3),Bf=!1,xl(),Lp(),IM(),document.body.removeEventListener("keydown",bm),document.removeEventListener("visibilitychange",sm),um(),document.getElementById("scene2_pannel_0").style.display="none",document.getElementById("scene2_pannel_1").style.width="30%",document.getElementById("quality_name").style.width="77%",document.getElementById("quality_name").style.fontSize="87.5%",Yd=0}function um(){pv=!1,hv=gv=0,Kp(),Nf=Uf,document.getElementById("scene_channel_panel").style.opacity="0",lu&&fy(Android.gettime()/1e3,$f,!0),xu("progress_bar_jump_to",ya),document.getElementById("progress_bar_steps").style.display="none",window.clearInterval(Jg)}function _m(){fm(),kp(),Jg=window.setInterval(fm,1e3),Dp(),dy(),mm(),pm(),document.getElementById("scene_channel_panel").style.opacity="1",gm()}function fm(){lu&&fy(Android.gettime()/1e3,$f,!pv)}function mm(){for(var e=Ff=0;e<hm();e++){if(Df[e].id===Nf){Ff=e;break}-1!==Df[e].id.indexOf(Nf)&&(Ff=e)}}function hm(){return Df.length}function pm(){1===hm()?(document.getElementById("quality_arrow_up").style.opacity="0",document.getElementById("quality_arrow_down").style.opacity="0"):Ff?Ff===hm()-1?(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="0.2"):(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="1"):(document.getElementById("quality_arrow_up").style.opacity="0.2",document.getElementById("quality_arrow_down").style.opacity="1"),-1!==(Nf=Df[Ff].id).indexOf("source")?Lu("quality_name",Nf.replace("source",ye)):Lu("quality_name",Nf)}function gm(){Bm=window.setTimeout(um,5e3+Ev)}function vm(){document.getElementById("scene2_pannel_1").style.width="18%",document.getElementById("quality_name").style.width="60%",document.getElementById("quality_name").style.fontSize="72%",Lu("open_vod_text",zf?dn:cn),document.getElementById("scene2_pannel_0").style.display="inline-block"}function ym(){zf?(yr.vodOffset=Yd,rm(),document.body.addEventListener("keydown",Ly,!1),ug(),X_(Tv)):(vh=!0,Ap(ln),window.setTimeout(function(){vh=!1,Np()},2e3))}function bm(e){if(Jf!==qf)switch(e.keyCode){case Ta:Rp()?(Dp(),lm()):Fp()}else switch(e.keyCode){case Ia:MM()?Fm&&!ZC&&(NM(),Fm--,TM()):Am&&!jp()&&eg()?(Sm++,dg()):jp()?(Kp(),Cv?(fg(),5<++gh&&(gh=0),_g()):(vy(-1,$f),Ev=2500),gm()):gg()?(kg(),bg(),--Ch<0&&(Ch=3),yg()):_m();break;case Pa:MM()?Fm<aM-1&&!ZC&&(NM(),Fm++,TM()):!Am||jp()||gg()?jp()?(Kp(),Cv?(fg(),--gh<0&&(gh=5),_g()):(vy(1,$f),Ev=2500),gm()):gg()?(kg(),bg(),3<++Ch&&(Ch=0),yg()):_m():gf("ChatEnable",($m=eg()||gg()?(Qp(),!1):(Zp(),!0))?"true":"false");break;case Sa:gg()?kg():jp()?(2===Cv&&1!==gh?(Cv--,cy()):1===Cv?(Cv--,cy()):0<Ff&&1===gh&&(Ff--,pm()),Kp(),gm()):MM()?MM()?LM():_m():EM();break;case xa:gg()?kg():jp()?(Cv?1===Cv?(Cv++,cy()):Ff<hm()-1&&1===gh&&(Ff++,pm()):(Cv++,cy()),Kp(),gm()):MM()?IM():Am&&eg()?(4<++Tm?sg(!(Tm=1)):4===Tm&&sg(!0),ig(!0)):_m();break;case La:gg()?Cg(3):jp()?Cv?1===Cv?(zf&&yr.Play_ChatForceDisable&&(wp()?Sl(sl):Pl()),gg()||rg(3)):xg(3):(Kp(),gm(),hv&&my()):MM()?(rm(),F_(Fm,uM,Rg)):_m();break;case Ta:jp()?um():MM()?IM():Rp()?(Dp(),lm()):Fp();break;case Ma:case Ca:case Ea:zf&&!yr.Play_ChatForceDisable&&(wp()?Sl(sl):Pl()),gg()||rg(3)}}var wm,km,Cm,Mm,Em,Im,Sm=0,Pm=Sm,xm=-5,Lm=.55,Tm=3,Bm=null,Om="source",Gm=Om,Am=!0,Nm=!1,Um="",Fm=0,Dm=2e3,Rm=0,Vm=1,Hm=2,Jm=0,qm=null,zm=0,jm=0,Xm=0,Wm="",Ym=[],Km=0,$m=!1,Zm=null,Qm=null,eh=null,th="",nh=0,ah=5,ih=0,oh=5,sh=0,dh=!1,ch=null,lh=!1,rh=0,uh=null,_h=0,fh=0,mh=!1,hh=!1,ph=!1,gh=1,vh=!1,yh=!1,bh=1e4,wh=2e3,kh="",Ch=0,Mh=3,Eh=null,Ih="",Sh=0,Ph=0,xh="",Lh=!0,Th=!1,Bh=!1,Oh=7,Gh=1e3,Ah=0,Nh="",Uh=[],Fh=[{top:51.8,left:75.1,sizeOffset:[31,16,0,0]},{top:33,left:75.1,sizeOffset:[12.5,0,-6.25,0]},{top:.2,left:75.1,sizeOffset:[0,0,0,0]},{top:.2,left:38.3,sizeOffset:[0,0,0,0]},{top:.2,left:.2,sizeOffset:[0,0,0,0]},{top:33,left:.2,sizeOffset:[12.5,0,-6.25,0]},{top:51.8,left:.2,sizeOffset:[31,16,0,0]},{top:51.8,left:38.3,sizeOffset:[31,16,0,0]}],Dh=[0,0,0,1,2,2,2,1],Rh=[[0,1,2,2,2,1,0,0],[7,3,3,3,3,3,7,7],[6,5,4,4,4,5,6,6]],Vh=[{containerHeight:17,percentage:"12.5%",dialogTop:15},{containerHeight:32,percentage:"25%",dialogTop:30},{containerHeight:48,percentage:"50%",dialogTop:50},{containerHeight:99.6,percentage:"100%",dialogTop:115}],Hh=1,Jh=["chat_extra_small","chat_size_small","chat_size_default","chat_size_biger","chat_size_bigest"];function qh(){Em=document.getElementById("chat_container"),Im=document.getElementById("inner_progress_bar"),Sm=vf("ChatPositionsValue",0),Tm=vf("ChatSizeValue",3),$m=bf("ChatEnable",!1),Am=bf("Play_isFullScreen",!0),ig(!1),og(!1),jh()}function zh(e){e?void 0!==wm&&(Sm=wm,Tm=Cm,($m=km)||Qp(),ig(!1)):(wm=Sm,km=$m,Cm=Tm,Sm=0,Zp(),Tm=4,sg($m=!0),ig(!1),jc&&(jc.scrollTop=jc.scrollHeight)),gf("Play_isFullScreen",Am)}function jh(){Hh=Nk("chat_font_size");for(var e=0;e<Jh.length;e++)Pu("chat_inner_container",Jh[e]);Su("chat_inner_container",Jh[Hh])}function Xh(){Op(),xu("stream_live_icon",'<div style="vertical-align: middle; display: inline-block"><i class="icon-circle" style="color: red; font-size: 105%; "></i></div><div style="vertical-align: middle; display: inline-block">'+ya+_.toUpperCase()+"</div>"),h_("stream_info_title"),zf=!(yh=!1),ap(document.getElementById("stream_info_icon"),fu),yr.Play_isHost?Lu("stream_info_name",yr.Play_DisplaynameHost):Lu("stream_info_name",yr.Play_selectedChannelDisplayname),yr.Play_WasPlaying=1,s_(),Nm=yr.Play_isHost,yr.Play_isHost=!1,Th=!1,Eu("scene_channel_panel_bottom"),Ph=Sh=0,Lu("stream_watching_time",v+Mp(0)),th=Ep(0),Lu("stream_live_time",y+th+b),Mu("progress_pause_holder"),Mg(1),xm=-5,_h=fh=Ah=0,window.clearInterval(uh),hh=!1,bh=3e3,Lh=!(ih=0),Jm=Rm,ph=!(dh=!(Xm=jm=zm=lh=0)),document.addEventListener("visibilitychange",Yh,!1),$h(),ip(),document.body.removeEventListener("keyup",T_),qm=window.setInterval(ep,6e4)}function Wh(e){Ap(e)}function Play_CheckResume(){dh&&Yh(),av&&Rv(),Bf&&(lm(),window.clearInterval(Sf))}function Yh(){document.hidden?gg()?(Dp(),Qp(),Sp()):(Lp(),ph=!1,Hc(),window.clearInterval(qm)):(dh=!0,Jp(),dh&&(Op(),bh=3e3,Th=!(ih=0),yh?ep():$h(),Jm=Rm,sh=0,navigator.onLine?ip():Mm=window.setInterval(Kh,100),qm=window.setInterval(ep,6e4)))}function Kh(){(navigator.onLine||200<sh)&&(window.clearInterval(Mm),ip()),sh++}function $h(){Ef("https://api.twitch.tv/kraken/streams/"+yr.Play_selectedChannel_id,bh,2,null,Zh,Qh,!1)}function Zh(e){null!==(e=JSON.parse(e)).stream&&(Lu("stream_info_name",Nm?yr.Play_DisplaynameHost:yr.Play_selectedChannelDisplayname),yr.Play_selectedChannel_id=e.stream.channel._id,xu("stream_info_title",xS.parse(e.stream.channel.status)),yr.Play_gameSelected=e.stream.game,kh=", ["+e.stream.channel.language.toUpperCase()+"]",Lu("stream_info_game",g+yr.Play_gameSelected+h+$u(e.stream.viewers)+" "+H+kh),yr.Play_selectedChannelLogo=e.stream.channel.logo,yh=!0,ap(document.getElementById("stream_info_icon"),yr.Play_selectedChannelLogo),th=e.stream.created_at,Zi()?(Ja=!0,qa=yr.Play_selectedChannel_id,oi()):Bp())}function Qh(){ih<oh&&(bh+=500,window.setTimeout(function(){dh&&$h()},750)),ih++}function ep(){Ef("https://api.twitch.tv/kraken/streams/"+yr.Play_selectedChannel_id,3e3,2,null,tp,np,!1)}function tp(e){null!==(e=JSON.parse(e)).stream&&(xu("stream_info_title",xS.parse(e.stream.channel.status)),yr.Play_gameSelected=e.stream.game,Lu("stream_info_game",g+yr.Play_gameSelected+h+$u(e.stream.viewers)+" "+H+kh),yh||ap(document.getElementById("stream_info_icon"),e.stream.channel.logo))}function np(){Ah<oh?(window.setTimeout(function(){dh&&ep()},2500),Ah++):Ah=0}function ap(e,t){e.onerror=function(){this.src=fu,yh=!1},e.src=t}function ip(){nh=0,wh=2e3+(Th?3e3:0),op()}function op(){var e,t;if(e=Jm===Rm?"https://api.twitch.tv/api/channels/"+yr.Play_selectedChannel+"/access_token"+(Zi()&&Ni[yr.Users_Position].access_token?"?oauth_token="+Ni[yr.Users_Position].access_token:""):"https://usher.ttvnw.net/api/channel/hls/"+yr.Play_selectedChannel+".m3u8?&token="+encodeURIComponent(zm.token)+"&sig="+zm.sig+"&allow_source=true&allow_audi_only=true&fast_bread=true&allow_spectre=false",lu){if(!(t=Android.mreadUrl(e,wh,1,null)))return void dp();200===(t=JSON.parse(t)).status?(nh=0,dh&&rp(t.responseText)):403===t.status?cp():404===t.status?Tg():dp()}else(t=new XMLHttpRequest).open("GET",hu+e,!0),t.timeout=wh,t.setRequestHeader(Yr,Wr),t.ontimeout=function(){},t.onreadystatechange=function(){4===t.readyState&&(200===t.status?(nh=0,dh&&rp(t.responseText)):403===t.status?(sp(t),jl?lp():cp()):404===t.status?(sp(t),jl?lp():Tg()):(sp(t),dp()))},t.send(null)}function sp(e){Xl&&(console.log(e.status),console.log(e.responseText))}function dp(){dh&&Lh&&(++nh<ah+(Th?8:0)?(wh+=250,Th?window.setTimeout(op,500):op()):jl?lp():Tg())}function cp(){Gp(),Ap(Vn),window.setTimeout(function(){dh&&Tg()},4e3)}function lp(){Ym=[{id:"1080p60(Source)",band:"(10.00Mbps)",url:"http://fake"}],Jm=Hm,dh&&mp()}function rp(e){Jm===Rm?(zm=JSON.parse(e),Jm=Vm,ip()):Jm===Vm&&(Ym=up(jm=e),Jm=Hm,dh&&mp())}function up(e){for(var t,n=[],a="",i=1,o=fp(e),s=0;s<o.length;s++)a=o[s].split('NAME="')[1].split('"')[0],t=_p(o[s].split("BANDWIDTH=")[1].split(",")[0]),n.length?n[s-i].id!==a&&n[s-i].id!==a+" (source)"?n.push({id:a,band:t,url:o[s].split("\n")[2]}):i++:(-1===a.indexOf("ource")&&(a+=" (source)"),n.push({id:a,band:t,url:o[s].split("\n")[2]}));return n}function _p(e){return 0<(e=parseInt(e))?" ("+parseFloat(e/1e6).toFixed(2)+"Mbps)":""}function fp(e){for(var t,n=[],a=/#EXT-X-MEDIA:(.)*\n#EXT-X-STREAM-INF:(.)*\n(.)*/g;t=a.exec(e);)n.push(t[0]);return n}function mp(){window.clearInterval(uh),Wm=Ym[Km=0].url,-1!==Om.indexOf("source")&&(Om="source");for(var e=0;e<ag();e++){if(Ym[e].id===Om){Wm=Ym[Km=e].url;break}-1!==Ym[e].id.indexOf(Om)&&(Wm=Ym[Km=e].url)}Gm=Om,Jm=Hm,Xl&&console.log("Play_onPlayer:",'\n\n"'+Wm+'"\n'),lu&&dh&&Android.startVideo(Wm,1),hp()}function hp(){Bh=!1,$m&&!eg()&&Zp(),ph=!0,pp(),lu&&(_h=0,Oh=1+Dm/1e3,mh=!1,window.clearInterval(uh),uh=window.setInterval(gp,Gh))}function pp(){yr.Play_ChatForceDisable?Ec():Al()}function gp(){var e=!wp();lu&&(Sh=Android.gettime()),dh&&rh===Sh&&e?Oh<++_h&&(mh&&hh&&Km<ag()-1?Km++:!mh&&hh&&fh++,navigator.onLine?1<fh?bp(fh,1,vp):(ng(),mp(),hh=!0):yp(!1,1)):(_h=fh=0,hh=!1),rh=Sh,e&&Ph++}function vp(e){if(!e){if(!(Km<ag()-1))return void Tg();Km++}fh=0,ng(),mp(),hh=!0}function yp(e,t){yr.Play_isHost=e,Mg(t),Lg(t)}function bp(e,t,n){var a=new XMLHttpRequest;a.timeout=1e3,a.open("GET","https://static-cdn.jtvnw.net/jtv-static/404_preview-10x10.png?"+Math.random(),!0),a.onreadystatechange=function(){4===a.readyState&&(200===a.status?n(2<e):12<e&&yp(!1,t))},a.send(null)}function wp(){return!!lu&&!Android.getPlaybackState()}function kp(){var e=W_();Lu("stream_clock",e),Lu("label_clock",e)}function Cp(e){return e<10?"0"+e:e}function Mp(e){var t,n,a;return t=Cp(parseInt(e)%60),n=Cp((e=Math.floor(e/60))%60),a=Cp(e=Math.floor(e/60)),e?a+":"+n+":"+t:n+":"+t}function Ep(e){var t,n,a;return t=Cp(parseInt(e/1e3)%60),n=Cp((e=Math.floor(e/1e3/60))%60),a=Cp(e=Math.floor(e/60)),e?a+":"+n+":"+t:n+":"+t}function Ip(e){return Ep((new Date).getTime()-new Date(e).getTime())}function Sp(){dh&&(Pp(),yr.Play_WasPlaying=0,xp())}function Pp(){lu&&Android.stopVideo(1),dh=!1,IM(),xl(),Lp(),Tp(),yr.Play_selectedChannel_id=""}function xp(){fy(0,0),Eu("scene1"),Mu("scene2"),t_()}function Lp(){Xp(),Jp(),Np(),pg(),Nh="",Km===ag()-1&&(Gm=Ym[0].id),ev===_y()-1&&(jg=Qg[0].id),Ff===hm()-1&&(Uf=Df[0].id)}function Tp(){ph=!1,document.body.removeEventListener("keydown",Rg),document.removeEventListener("visibilitychange",Yh),Hc(),window.clearInterval(qm),window.clearInterval(uh),vh=!1}function Bp(){xu("fallow_text",ya+Ot),Va=!1}function Op(){lu?Android.mshowLoading(!0):Eu("dialog_loading_play")}function Gp(){lu?Android.mshowLoading(!1):Mu("dialog_loading_play")}function Ap(e){Lu("dialog_warning_play_text",e),Eu("dialog_warning_play")}function Np(){Mu("dialog_warning_play")}function Up(){return Iu("dialog_warning_play")}function Fp(){Rp()?Dp():(Eu("play_dialog_exit"),Zm=window.setTimeout(Fp,3e3))}function Dp(){window.clearTimeout(Zm),Mu("play_dialog_exit")}function Rp(){return Iu("play_dialog_exit")}function Vp(){window.clearTimeout(Qm)}function Hp(){window.clearTimeout(eh)}function Jp(){Vp(),Hp(),Mu("play_dialog_simple_pause")}function qp(){wp()?zp()?(Mu("play_dialog_simple_pause"),eh=window.setTimeout(qp,8e3)):(Eu("play_dialog_simple_pause"),Qm=window.setTimeout(qp,1500)):Jp()}function zp(){return Iu("play_dialog_simple_pause")}function jp(){return"1"===document.getElementById("scene_channel_panel").style.opacity}function Xp(){Kp(),document.getElementById("scene_channel_panel").style.opacity="0",Om=Gm,window.clearInterval(Jg)}function Wp(){ug(),tg(),ng(),Yp(),Jg=window.setInterval(Yp,1e3),kp(),Dp(),document.getElementById("scene_channel_panel").style.opacity="1",$p()}function Yp(){Lu("stream_watching_time",v+Mp(Ph)),Lu("stream_live_time",y+(-1===th.indexOf("00:00")?Ip(th):th)+b)}function Kp(){window.clearTimeout(Bm),Ev=0}function $p(){Bm=window.setTimeout(Xp,5e3)}function Zp(){dg(),Eu("chat_container")}function Qp(){Mu("chat_container")}function eg(){return Iu("chat_container")}function tg(){for(var e=Km=0;e<ag();e++){if(Ym[e].id===Om){Km=e;break}-1!==Ym[e].id.indexOf(Om)&&(Km=e)}}function ng(){1===ag()?(document.getElementById("quality_arrow_up").style.opacity="0",document.getElementById("quality_arrow_down").style.opacity="0"):Km?Km===ag()-1?(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="0.2"):(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="1"):(document.getElementById("quality_arrow_up").style.opacity="0.2",document.getElementById("quality_arrow_down").style.opacity="1"),-1!==(Om=Ym[Km].id).indexOf("source")?Lu("quality_name",Om.replace("source",ye)+Ym[Km].band):Lu("quality_name",Om+Ym[Km].band)}function ag(){return Ym.length}function ig(e){Em.style.height=Vh[Tm-1].containerHeight+"%",document.getElementById("play_chat_dialog").style.marginTop=Vh[Tm-1].dialogTop+"%",dg(),Rc(),e&&cg(Dn+Vh[Tm-1].percentage),window.setTimeout(function(){jc&&(jc.scrollTop=jc.scrollHeight)},500),gf("ChatSizeValue",Tm)}function og(e){Em.style.backgroundColor="rgba(0, 0, 0, "+Lm+")",e&&cg(Rn+(100*Lm).toFixed(0)+"%")}function sg(e){Sm=e?Dh[Pm=Sm]:Rh[Sm][Pm]}function dg(){var e=4===Tm;Sm<0?Sm=e?2:7:(e?2:7)<Sm&&(Sm=0),Em.style.top=(e?.2:Fh[Sm].top+Fh[Sm].sizeOffset[Tm-1])+"%",Em.style.left=Fh[Sm+(e?2:0)].left+"%",gf("ChatPositionsValue",Sm)}function cg(e){window.clearTimeout(ch),Lu("play_chat_dialog_text",e),Eu("play_chat_dialog"),ch=window.setTimeout(lg,1e3)}function lg(){Mu("play_chat_dialog")}function rg(e){wp()?(Jp(),lu&&Android.play(!0),xu("pause_button",'<i class="strokedbig icon-pause" style="color: #FFFFFF; font-size: 180%;"></i>'),1===e?(jp()&&Xp(),window.clearInterval(uh),uh=window.setInterval(gp,Gh)):2===e?(jp()&&iy(),window.clearInterval(lv),lv=window.setInterval(Qv,Gh)):3===e&&(jp()&&um(),window.clearInterval(Sf),Sf=window.setInterval(dm,Gh))):(window.clearInterval(uh),window.clearInterval(lv),window.clearInterval(Sf),xu("pause_button",'<i class="strokedbig icon-play-1" style="color: #FFFFFF; font-size: 180%;"></i>'),lu&&Android.play(!1),qp())}function ug(){fg(),gh=1,_g()}function _g(){Su("scene2_pannel_"+gh,"playbotton_focus")}function fg(){Pu("scene2_pannel_"+gh,"playbotton_focus")}function mg(){Xg=Jm=-1,Jf=-1,Qp(),Xp(),um(),iy(),vh||Np(),Gp(),Dp(),yg()}function hg(){Eu("dialog_end_stream")}function pg(){Mu("dialog_end_stream"),kg(),vg()}function gg(){return Iu("dialog_end_stream")}function vg(){bg(),Ch=0,yg()}function yg(){Su("dialog_end_"+Ch,"dialog_end_icons_focus")}function bg(){Pu("dialog_end_"+Ch,"dialog_end_icons_focus")}function wg(e){1===e?Ih=yr.Play_selectedChannelDisplayname+" "+_:2===e?Ih=yr.Main_selectedChannelDisplayname+en:3===e&&(Ih=yr.Main_selectedChannelDisplayname+Nt),xu("dialog_end_stream_text",Ih+x+oa+nn+Mh+"..."),gg()?(Xg=Jm=Hm,Jf=qf,-1===--Mh?(xu("dialog_end_stream_text",Ih+x+oa+nn+"0..."),Dp(),Qp(),1===e?Sp():2===e?ty():3===e&&lm()):Eh=window.setTimeout(function(){wg(e)},1e3)):Eh=window.setTimeout(function(){wg(e)},50)}function kg(){window.clearTimeout(Eh),xu("dialog_end_stream_text",Ih+x+oa+an)}function Cg(e){var t=!0;Ch?1===Ch?yr.Play_isHost?(yr.Play_DisplaynameHost=yr.Play_selectedChannelDisplayname+ae,yr.Play_selectedChannel=xh.target_login,yr.Play_selectedChannelDisplayname=xh.target_display_name,yr.Play_DisplaynameHost=yr.Play_DisplaynameHost+yr.Play_selectedChannelDisplayname,Pp(),document.body.addEventListener("keydown",Rg,!1),yr.Play_selectedChannel_id=xh.target_id,X_(Xh)):ym():2===Ch?Eg(e):3===Ch&&Sg(e):2===e?Qg.length?(uv=!(Pv=!0),$v(),Jp(),el=bv=0,cl()):(t=!1,Ap(ea),window.setTimeout(function(){Np()},2e3)):3===e&&(Df.length?(Xf=!(Vf=!0),im(),Jp(),zf?(bv=0,el=Yd,cl()):Gl()):(t=!1,Ap(ea),window.setTimeout(function(){Np()},2e3))),1===Ch||3===Ch&&""===yr.Play_gameSelected&&(t=!1),t&&pg()}function Mg(e){e?1===e?(bg(),Ch=2,yg(),document.getElementById("dialog_end_0").style.display="none",document.getElementById("dialog_end_1").style.display="none"):2===e?(vg(),document.getElementById("dialog_end_0").style.display="inline-block",document.getElementById("dialog_end_1").style.display="none"):3===e&&(vg(),document.getElementById("dialog_end_0").style.display="inline-block",document.getElementById("dialog_end_1").style.display="inline-block",Lu("dialog_end_vod_text",zf?dn:cn)):(bg(),Ch=1,yg(),document.getElementById("dialog_end_0").style.display="none",document.getElementById("dialog_end_1").style.display="inline-block",Lu("dialog_end_vod_text",_n))}function Eg(e){yr.Main_BeforeChannelisSet||yr.Main_Go===dr||yr.Main_Go===cr||(yr.Main_BeforeChannel=yr.Main_BeforeAgameisSet&&yr.Main_Go!==Ql?yr.Main_BeforeAgame:yr.Main_Go,yr.Main_BeforeChannelisSet=!0),c_(yr.Main_Go),yr.Main_Go=sr,1===e?(yr.Main_selectedChannel_id=yr.Play_selectedChannel_id,yr.Main_selectedChannel=yr.Play_selectedChannel,yr.Main_selectedChannelDisplayname=yr.Play_selectedChannelDisplayname,Rs=Va,Qp(),Sp()):2===e?ty():3===e&&lm()}function Ig(e){yr.Search_isSearching||(yr.Main_BeforeSearch=yr.Main_Go),c_(yr.Main_Go),yr.Main_Go=ar,1===e?(Qp(),Sp()):2===e?ty():3===e&&lm()}function Sg(e){if(""===yr.Play_gameSelected)return vh=!0,Ap(Kn),void window.setTimeout(function(){vh=!1,Np()},2e3);yr.Main_BeforeAgameisSet||yr.Main_Go===mr||yr.Main_Go===hr||(yr.Main_BeforeAgame=yr.Main_BeforeChannelisSet&&yr.Main_Go!==sr&&yr.Main_Go!==dr&&yr.Main_Go!==cr?yr.Main_BeforeChannel:yr.Main_Go,yr.Main_BeforeAgameisSet=!0),c_(yr.Main_Go),yr.Main_Go=Ql,Co=!1,yr.Main_gameSelected=yr.Play_gameSelected,Qp(),1===e?Sp():2===e?ty():3===e&&lm()}function Pg(){Zi()&&Ni[yr.Users_Position].access_token?Va?fi():ri():(Ap(Gt),vh=!0,window.setTimeout(function(){Np(),vh=!1},2e3))}function xg(e){gh?1===gh?(1===e?(mp(),Xp()):2===e?(uv=!1,$v(),iy()):3===e&&(Xf=!1,im(),um()),Jp()):2===gh?(qa=1===e?yr.Play_selectedChannel_id:yr.Main_selectedChannel_id,Pg(),Kp(),1===e?$p():2===e?ly():3===e&&gm()):3===gh?Sg(e):4===gh?Eg(e):5===gh&&Ig(e):ym()}function Play_PannelEndStart(e){1===e?(window.clearInterval(uh),Tg()):Lg(e)}function Lg(e){window.clearInterval(uh),window.clearInterval(Sf),window.clearInterval(lv),mg(),Mh=3,wg(e),hg(e)}function Tg(){Op(),Jm=-1,nh=0,wh=2e3,Hc(),window.clearInterval(qm),window.clearInterval(uh),""!==yr.Play_selectedChannel_id?Ag():Bg()}function Bg(){Ef("https://api.twitch.tv/kraken/users?login="+yr.Play_selectedChannel,wh,2,null,Og,Gg,!1)}function Og(e){void 0!==(e=JSON.parse(e).users[0])?(yr.Play_selectedChannel_id=e._id,nh=0,wh=2e3,Ag()):Lg(1)}function Gg(){++nh<ah?(wh+=250,Bg()):yp(!1,1)}function Ag(){Cf("https://tmi.twitch.tv/hosts?include_logins=1&host="+encodeURIComponent(yr.Play_selectedChannel_id),wh,1,null,Ug,Ng,!0)}function Ng(){++nh<ah?(wh+=250,Ag()):yp(!1,1)}function Ug(e){void 0!==(xh=JSON.parse(e).hosts[0]).target_login?(vh=!0,Ap(yr.Play_selectedChannelDisplayname+un+ae+xh.target_display_name),window.setTimeout(function(){vh=!1},4e3),Mg(0),yr.Play_isHost=!0):(Mg(1),yr.Play_isHost=!1),Lg(1)}function Fg(){Va?(xu("fallow_heart",'<i class="icon-heart strokicon" style="color: #00b300; font-size: 210%;"></i>'),xu("fallow_text",ya+St)):(xu("fallow_heart",'<i class="icon-heart-o strokicon" style="color: #FFFFFF; font-size: 210%;"></i>'),xu("fallow_text",ya+Pt))}function Dg(e){gg()&&!Rp()?(kg(),Fp()):MM()?IM():jp()&&!Ey()?e?iy():Xp():Ey()&&Rp()?(My(),ny(!1),xp()):Rp()?(Dp(),Qp(),e?ty():Sp()):(Up()&&Np(),Fp())}function Rg(e){if(Jm!==Hm)switch(e.keyCode){case Ta:Rp()?(Dp(),Qp(),Sp()):Fp()}else switch(e.keyCode){case Ia:MM()?Fm&&!ZC&&(NM(),Fm--,TM()):Am&&!jp()&&eg()?(Sm++,dg()):jp()?(fg(),5<++gh&&(gh=1),_g(),Kp(),$p()):gg()?(kg(),bg(),--Ch<(yr.Play_isHost?1:2)&&(Ch=3),yg()):Wp();break;case Pa:MM()?Fm<aM-1&&!ZC&&(NM(),Fm++,TM()):!Am||jp()||gg()?jp()?(fg(),--gh<1&&(gh=5),_g(),Kp(),$p()):gg()?(kg(),bg(),3<++Ch&&(Ch=yr.Play_isHost?1:2),yg()):Wp():gf("ChatEnable",($m=eg()||gg()?(Qp(),!1):(Zp(),!0))?"true":"false");break;case Sa:jp()?(0<Km&&1===gh&&(Km--,ng()),Kp(),$p()):!MM()&&Zi()?EM():gg()?kg():MM()&&LM();break;case xa:jp()?(Km<ag()-1&&1===gh&&(Km++,ng()),Kp(),$p()):MM()?IM():Am&&eg()?(4<++Tm?sg(!(Tm=1)):4===Tm&&sg(!0),ig(!0)):gg()?kg():Wp();break;case La:gg()?Cg(1):jp()?xg(1):MM()?yr.Play_selectedChannel!==JSON.parse(document.getElementById(uM[8]+Fm).getAttribute(au))[0]?(Pp(),F_(Fm,uM,Rg)):SM():Wp();break;case Ta:Dg(!1);break;case Ma:case Ca:case Ea:gg()||rg(1)}}var Vg,Hg,Jg,qg,zg="source",jg=zg,Xg=0,Wg=null,Yg=0,Kg=0,$g=0,Zg="",Qg=[],ev=0,tv=0,nv=5,av=!1,iv=2e3,ov=0,sv=5,dv=1e4,cv=0,lv=null,rv=0,uv=!1,_v=0,fv=!1,mv=!1,hv=0,pv=!1,gv=0,vv=2e3,yv=!1,bv=0,wv={},kv=0,Cv=0,Mv=!0,Ev=0,Iv=0,Sv=0,Pv=!1,xv=[0,10,30,60,120,300,600,900,1200,1800],Lv=!1;function Tv(){Op(),pg(),bv=0,Lu("stream_live_time",""),Lu("stream_watching_time",""),Lu("progress_bar_current_time",Mp(0)),tl=A+".",xu("pause_button",'<i class="strokedbig icon-pause" style="color: #FFFFFF; font-size: 180%;"></i>'),Mu("progress_pause_holder"),Iv=0,py((Uh=xv)[1]),Xg=Rm,zf=!0,Yd=0,yr.Play_isHost=!1,yr.vodOffset?(Ov(),Uv()):(Mv&&""!==yr.Main_selectedChannel_id?(ap(document.getElementById("stream_info_icon"),yr.Main_selectedChannelLogo),wv["#"+yr.ChannelVod_vodId]||cl(),Zi()?(qa=yr.Main_selectedChannel_id,Ja=!0,oi()):Bp()):(Ov(),Gv()),Lu("stream_info_name",yr.Main_selectedChannelDisplayname),xu("stream_info_title",zd),xu("stream_info_game",jd+", ["+Dd.toUpperCase()+"]"),Lu("stream_live_icon",Xd)),wv["#"+yr.ChannelVod_vodId]&&!yr.vodOffset?(Gp(),Cy()):Bv()}function Bv(){window.setTimeout(function(){Eu("scene_channel_panel_bottom"),xu("pause_button",'<i class="strokedbig icon-pause" style="color: #FFFFFF; font-size: 180%;"></i>'),Eu("progress_pause_holder")},1e3),Lu("progress_bar_duration",Mp(Nd)),yr.Play_WasPlaying=2,s_(),qg=window.setInterval(Hv,6e4),w_(Nh),rv=_v=0,window.clearInterval(lv),vh=yv=fv=!(xm=-13),pv=!1,$g=Kg=Yg=gv=0,document.addEventListener("visibilitychange",Rv,!1),Lv=!(av=!(mv=!1)),Jv(),Mg(2),document.body.removeEventListener("keyup",T_)}function Ov(){ov=0,sv=5,dv=1e4}function Gv(){Ef("https://api.twitch.tv/kraken/users?login="+encodeURIComponent(yr.Main_selectedChannel),dv,2,null,Av,Nv,!1)}function Av(e){void 0!==(e=JSON.parse(e).users[0])?(yr.Main_selectedChannelLogo=e.logo,yr.Main_selectedChannel_id=e._id,wv["#"+yr.ChannelVod_vodId]||cl(),Zi()?(qa=yr.Main_selectedChannel_id,Ja=!0,oi()):Bp()):(yr.Main_selectedChannelLogo=fu,yr.Main_selectedChannel_id=""),ap(document.getElementById("stream_info_icon"),yr.Main_selectedChannelLogo)}function Nv(){++ov<sv?(dv+=500,window.setTimeout(function(){av&&Gv()},750)):Hg=window.setTimeout(Gv,2500)}function Uv(){Ef("https://api.twitch.tv/kraken/videos/"+yr.ChannelVod_vodId,dv,2,null,Dv,Fv,!1)}function Fv(){++ov<sv&&(dv+=2e3,Uv())}function Dv(e){e=JSON.parse(e),xu("stream_info_title",xS.parse(e.title)),xu("stream_info_game",$t+g+e.game+", "+$u(e.views)+V+", ["+e.language.toUpperCase()+"]"),Lu("stream_live_icon",D+__(e.created_at)),Lu("progress_bar_duration",Mp(Nd=parseInt(e.length))),bv=1e3*yr.vodOffset,fy(yr.vodOffset,Nd,!0),yr.Main_selectedChannelDisplayname=e.channel.display_name,Lu("stream_info_name",yr.Main_selectedChannelDisplayname),yr.Main_selectedChannelLogo=e.channel.logo,ap(document.getElementById("stream_info_icon"),yr.Main_selectedChannelLogo),yr.Main_selectedChannel_id=e.channel._id,yr.Main_selectedChannel=e.channel.name,Zi()?(Ja=!0,qa=yr.Main_selectedChannel_id,oi()):Bp(),w_(e.increment_view_count_url)}function Rv(){document.hidden?gg()?(Dp(),Qp(),ty()):(Hv(),yy(),Pl(),Lp(),window.clearInterval(lv),window.clearInterval(qg)):(av=!0,Jp(),av&&(Op(),sh=sh=0,navigator.onLine?Zv():Mm=window.setInterval(Vv,100),Sl(sl),Mg(2),qg=window.setInterval(Hv,6e4)))}function Vv(){(navigator.onLine||200<sh)&&(window.clearInterval(Mm),Xg=Rm,Jv()),sh++}function Hv(){yr.vodOffset=lu?parseInt(Android.gettime()/1e3):0,s_(),yr.vodOffset=0}function Jv(){tv=0,vv=2e3,qv()}function qv(){Cf(Xg===Rm?"https://api.twitch.tv/api/vods/"+yr.ChannelVod_vodId+"/access_token"+(Zi()&&Ni[yr.Users_Position].access_token?"?oauth_token="+Ni[yr.Users_Position].access_token:""):"https://usher.ttvnw.net/vod/"+yr.ChannelVod_vodId+".m3u8?&nauth="+encodeURIComponent(Yg.token)+"&nauthsig="+Yg.sig+"&allow_source=true&allow_audi_only=true&allow_spectre=false",wh,1,null,Xv,zv,!0)}function zv(){if(av){var e;if(Yg.token&&(e=JSON.parse(Yg.token)),e&&0!==JSON.parse(Yg.token).chansub.restricted_bitrates.length)return void Wv();++tv<nv?(vv+=250,qv()):jl?jv():(Gp(),Lg(2))}}function jv(){Qg=[{id:"1080p60(Source)",band:"(10.00Mbps)",url:"http://fake"}],Xg=Hm,av&&$v()}function Xv(e){Xg===Rm?(Yg=JSON.parse(e),Xg=Vm,Jv()):Xg===Vm&&(Qg=up(Kg=e),Xg=Hm,av&&$v())}function Wv(){Zi()&&Ni[yr.Users_Position].access_token?(qa=yr.Main_selectedChannel_id,pi()):(Gp(),Ap(L+xt),window.setTimeout(function(){av&&ty()},4e3))}function Yv(){Gp(),Ap(L+Lt),window.setTimeout(function(){av&&ty()},4e3)}function Kv(){Lv?(Gp(),Ap(L+Tt),window.setTimeout(function(){av&&ty()},4e3)):(Lv=!0,Xg=Rm,Jv())}function $v(){window.clearInterval(lv),Zg=Qg[ev=0].url,-1!==zg.indexOf("source")&&(zg="source");for(var e=0;e<_y();e++){if(Qg[e].id===zg){Zg=Qg[ev=e].url;break}-1!==Qg[e].id.indexOf(zg)&&(Zg=Qg[ev=e].url)}jg=zg,Zv()}function Zv(){Xl&&console.log("PlayVod_onPlayer:",'\n\n"'+Zg+'"\n'),yr.vodOffset?(el=yr.vodOffset,cl(),lu&&av&&Android.startVideoOffset(Zg,2,Pv?-1:1e3*yr.vodOffset),yr.vodOffset=0):lu&&av&&Android.startVideoOffset(Zg,2,Pv?-1:Android.gettime()),Pv=!1,$m&&!eg()&&Zp(),lu&&(rv=0,Oh=3+iv/1e3,uv=!1,window.clearInterval(lv),lv=window.setInterval(Qv,Gh))}function Qv(){lu&&(bv=Android.gettime()),av&&cv===bv&&!wp()?++rv>Oh&&(uv&&fv&&ev<_y()-1?ev++:!uv&&fv&&_v++,navigator.onLine?1<_v?bp(_v,2,ey):(uy(),$v(),fv=!0):yp(!1,2)):(rv=_v=0,fv=!1),cv=bv}function ey(e){if(!e){if(!(ev<_y()-1))return void yp(!1,2);ev++}_v=0,uy(),$v(),fv=!0}function ty(){av&&(Qg=[],ny(!0),xp())}function ny(e){e&&yy(),lu&&Android.stopVideo(2),av=!1,window.clearInterval(qg),window.clearInterval(Hg),yr.Play_WasPlaying=0,Mv=!0,xl(),IM(),Lp(),ay()}function ay(){document.body.removeEventListener("keydown",Ly),document.removeEventListener("visibilitychange",Rv),yr.vodOffset=0,window.clearInterval(Wg),window.clearInterval(lv),Nd=0}function iy(){pv=!1,hv=gv=0,Kp(),document.getElementById("scene_channel_panel").style.opacity="0",lu&&fy(Android.gettime()/1e3,Nd,!0),xu("progress_bar_jump_to",ya),document.getElementById("progress_bar_steps").style.display="none",zg=jg,window.clearInterval(Jg)}function oy(e){sy(),kp(),Dp(),Jg=window.setInterval(sy,1e3),e&&(dy(),ry(),uy(),ly()),document.getElementById("scene_channel_panel").style.opacity="1"}function sy(){lu&&fy(Android.gettime()/1e3,Nd,!pv)}function dy(){Cv=wp()?1:0,cy()}function cy(){Cv?1===Cv?(Su("pause_button","progress_bar_div_focus"),Pu("progress_bar_div","progress_bar_div_focus"),fg(),xu("progress_bar_jump_to",ya),document.getElementById("progress_bar_steps").style.display="none"):2===Cv&&(Pu("pause_button","progress_bar_div_focus"),Pu("progress_bar_div","progress_bar_div_focus"),_g(),xu("progress_bar_jump_to",ya),document.getElementById("progress_bar_steps").style.display="none"):(Pu("pause_button","progress_bar_div_focus"),Su("progress_bar_div","progress_bar_div_focus"),fg(),hv&&(gy(),document.getElementById("progress_bar_steps").style.display="inline-block"))}function ly(){Bm=window.setTimeout(iy,5e3+Ev)}function ry(){for(var e=ev=0;e<_y();e++){if(Qg[e].id===zg){ev=e;break}-1!==Qg[e].id.indexOf(zg)&&(ev=e)}}function uy(){1===_y()?(document.getElementById("quality_arrow_up").style.opacity="0",document.getElementById("quality_arrow_down").style.opacity="0"):ev?ev===_y()-1?(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="0.2"):(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="1"):(document.getElementById("quality_arrow_up").style.opacity="0.2",document.getElementById("quality_arrow_down").style.opacity="1"),-1!==(zg=Qg[ev].id).indexOf("source")?Lu("quality_name",zg.replace("source",ye)+Qg[ev].band):Lu("quality_name",zg+Qg[ev].band)}function _y(){return Qg.length}function fy(e,t,n){Lu("progress_bar_current_time",Mp(e)),n&&(Im.style.width=e/t*100+"%")}function my(){Jp(),gg()||(Xf=uv=!1,av?(lu&&Android.startVideoOffset(Zg,2,0<Sv?1e3*Sv:-1),el=Sv):(el=Yd,lu&&Android.startVideoOffset(Rf,3,0<Sv?1e3*Sv:-1)),zf&&cl()),xu("progress_bar_jump_to",ya),document.getElementById("progress_bar_steps").style.display="none",pv=!1,Sv=hv=gv=0}function hy(){Iv=gv=0,py(Uh[1])}function py(e){hv&&!Cv&&(document.getElementById("progress_bar_steps").style.display="inline-block"),60<Math.abs(e)?Lu("progress_bar_steps",Hn+e/60+qn):Lu("progress_bar_steps",e?Hn+e+Jn:Hn+Uh[1]+Jn)}function gy(){Lu("progress_bar_jump_to",_e+" ("+(hv<0?"-":"")+Mp(Math.abs(hv))+")"+fe+Mp(Sv))}function vy(e,t){var n=lu?Android.gettime()/1e3:0;window.clearTimeout(Vg),pv=!0,gv<Uh.length-1&&Iv++%6==0&&gv++,hv+=Uh[gv]*e,Sv=n+hv,av&&(Sv=10*Math.floor(Sv/10)),t<Sv?(hv=t-n-Uh[1],Sv=n+hv,Iv=gv=0):Sv<0&&(hv=0-n,Sv=Iv=gv=0),gy(),Im.style.width=Sv/t*100+"%",py(Uh[gv]*e),Vg=window.setTimeout(hy,1e3)}function yy(){var e=lu?parseInt(Android.gettime()/1e3):0,t="#"+yr.ChannelVod_vodId;300<e&&e<Nd-300?(wv[t]&&delete wv[t],wv[t]=e,gf("PlayVod_VodIds",JSON.stringify(wv))):Nd-300<e&&wv[t]&&(delete wv[t],gf("PlayVod_VodIds",JSON.stringify(wv)))}function by(){wv=yf("PlayVod_VodIds",{});var e=wy();250<e&&ky(e-250)}function wy(){var e=0;for(var t in wv)wv.hasOwnProperty(t)&&e++;return e}function ky(e){var t=0;for(var n in wv){if(!(t<e))break;delete wv[n],t++}gf("PlayVod_VodIds",JSON.stringify(wv))}function Cy(){Mu("scene_channel_panel_bottom"),oy(!1),xu("dialog_vod_saved_text",Cn+Ep(1e3*wv["#"+yr.ChannelVod_vodId])),Eu("dialog_vod_start")}function My(){iy(),Mu("dialog_vod_start"),Iy(),window.setTimeout(function(){Eu("scene_channel_panel_bottom")},1e3)}function Ey(){return Iu("dialog_vod_start")}function Iy(){Py(),kv=0,Sy()}function Sy(){Su("dialog_vod_"+kv,"dialog_end_icons_focus")}function Py(){Pu("dialog_vod_"+kv,"dialog_end_icons_focus")}function xy(e){My(),e?(delete wv["#"+yr.ChannelVod_vodId],yr.vodOffset=0,Tv()):(yr.vodOffset=wv["#"+yr.ChannelVod_vodId],bv=1e3*yr.vodOffset,fy(yr.vodOffset,Nd,!0),Bv())}function Ly(e){if(Xg===Hm||Ey())switch(e.keyCode){case Ia:MM()?Fm&&!ZC&&(NM(),Fm--,TM()):Am&&!jp()&&eg()?(Sm++,dg()):jp()&&!Ey()?(Kp(),Cv?(fg(),5<++gh&&(gh=1),_g()):(vy(-1,Nd),Ev=2500),ly()):Ey()?(Py(),kv?kv--:kv++,Sy()):gg()?(kg(),bg(),--Ch<0&&(Ch=3),1===Ch&&(Ch=0),yg()):Ey()||oy(!0);break;case Pa:MM()?Fm<aM-1&&!ZC&&(NM(),Fm++,TM()):!Am||jp()||gg()?jp()&&!Ey()?(Kp(),Cv?(fg(),--gh<1&&(gh=5),_g()):(vy(1,Nd),Ev=2500),ly()):Ey()?(Py(),kv?kv--:kv++,Sy()):gg()?(kg(),bg(),3<++Ch&&(Ch=0),1===Ch&&(Ch=2),yg()):Ey()||oy(!0):gf("ChatEnable",($m=eg()||gg()?(Qp(),!1):(Zp(),!0))?"true":"false");break;case Sa:gg()?kg():jp()&&!Ey()?(2===Cv&&1!==gh?(Cv--,cy()):1===Cv?(Cv--,cy()):0<ev&&1===gh&&(ev--,uy()),Kp(),ly()):MM()?MM()?LM():Ey()||oy(!0):EM();break;case xa:gg()?kg():jp()&&!Ey()?(Cv?1===Cv?(Cv++,cy()):ev<_y()-1&&1===gh&&(ev++,uy()):(Cv++,cy()),Kp(),ly()):MM()?IM():Am&&eg()?(4<++Tm?sg(!(Tm=1)):4===Tm&&sg(!0),ig(!0)):Ey()||oy(!0);break;case La:Ey()?xy(kv):gg()?Cg(2):jp()?Cv?1===Cv?(yr.Play_ChatForceDisable&&(wp()?Sl(sl):Pl()),gg()||rg(2)):xg(2):(Kp(),ly(),hv&&my()):MM()?(ny(!0),F_(Fm,uM,Rg)):oy(!0);break;case Ta:Dg(!0);break;case Ma:case Ca:case Ea:yr.Play_ChatForceDisable&&(wp()?Sl(sl):Pl()),gg()||rg(2)}else switch(e.keyCode){case Ta:Rp()?(Dp(),ty()):Fp()}}var Ty={};function By(){console.log("InitScreens place holder")}function Oy(){yb(),bb(),kb(),Cb(),Mb(),Ib(),Sb()}function Gy(e){return[e+"_thumbdiv",e+"_img",e+"_infodiv",e+"_title",e+"_createdon",e+"_game",e+"_viwers",e+"_duration",e+"_cell","cpempty_",e+"_scroll",e+"_lang"]}function Ay(){for(var e,t={},n=0;n<arguments.length;n+=1){var a=arguments[n],i=Object.keys(a);for(e=0;e<i.length;e+=1)t[i[e]]=a[i[e]]}return t}function Ny(){Or=-1,yr.Main_Go=Ty.screen,Ty.label_init(),document.body.addEventListener("keydown",nb,!1),Ty.status?(Eu(Ty.ids[10]),y_(Ty.posY),Yy(),s_()):Fy()}function Uy(){Or=0,Ty.label_exit(),document.body.removeEventListener("keydown",nb),Mu(Ty.ids[10])}function Fy(){Tu(),h_(Ty.table),Ju(),Ty.cursor=null,Ty.status=!1,Ty.row=document.createElement("div"),Ty.MaxOffset=0,Ty.TopRowCreated=!1,Ty.offset=0,Ty.idObject={},Ty.FirstLoad=!0,Ty.itemsCount=0,Ty.posX=0,Ty.posY=0,Ty.row_id=0,Ty.coloumn_id=0,Ty.data=null,Ty.data_cursor=0,Ty.dataEnded=!1,Fu(),Dy(),Ry()}function Dy(){Ty.loadingData=!0,Ty.loadingDataTry=0,Ty.loadingDataTimeout=3500}function Ry(){Ty.set_url(),Cf(Ty.url,Ty.loadingDataTimeout,2,null,Hy,Vy)}function Vy(){Ty.loadingDataTry++,Ty.loadingDataTry<Ty.loadingDataTryMax?(Ty.loadingDataTimeout+=500,Ry()):(Ty.loadingData=!1,Ty.itemsCount?Ty.dataEnded=!0:(Ty.FirstLoad=!1,Bu(),Hu(T)))}function Hy(e){Ty.concatenate(e)}function Jy(){var e=Ty.data.length-Ty.data_cursor;if(e>Ty.ItemsLimit?e=Ty.ItemsLimit:Ty.loadingData||(Ty.dataEnded=!0),e){var t=Math.ceil(e/Ty.ColoumnsCount),n=Ty.row_id+t,a=document.getElementById(Ty.table);if(Ty.HasSwitches&&!Ty.TopRowCreated){Ty.TopRowCreated=!0,Ty.row=document.createElement("div");var i='<i class="icon-history stream_channel_fallow_icon"></i>'+ya+ya+m;(Pr=document.createElement("div")).setAttribute("id",Ty.ids[8]+"y_0"),Pr.className="stream_cell_period",Pr.innerHTML='<div id="'+Ty.ids[0]+'y_0" class="stream_thumbnail_channel_vod" ><div id="'+Ty.ids[3]+'y_0" class="stream_channel_fallow_game">'+i+"</div></div>",Ty.row.appendChild(Pr),a.appendChild(Ty.row)}for(Ty.row_id;Ty.row_id<n;){for(Ty.coloumn_id===Ty.ColoumnsCount&&(Ty.row=document.createElement("div"),Ty.coloumn_id=0),Ty.coloumn_id;Ty.coloumn_id<Ty.ColoumnsCount&&Ty.data_cursor<Ty.data.length;Ty.data_cursor++)Ty.data[Ty.data_cursor]&&Ty.addCell(Ty.data[Ty.data_cursor]);if(a.appendChild(Ty.row),Ty.coloumn_id===Ty.ColoumnsCount)Ty.row_id++;else if(Ty.data_cursor>=Ty.data.length)break}}Ty.emptyContent=!e&&!Ty.status,Wy()}function qy(e,t,n,a){var i=e+"_"+t;return v_(n[1]+i,a),e<Ty.ColoumnsCount&&w_(a),(Pr=document.createElement("div")).style.cssText=Ty.ThumbCssText,i}function zy(e,t,n,a,i,o){var s=qy(e,t,n,a);return Pr.setAttribute("id",n[5]+s),Pr.setAttribute(au,i),Pr.innerHTML='<div id="'+n[0]+s+'" class="stream_thumbnail_game"><div><img id="'+n[1]+s+'" class="stream_img"></div><div id="'+n[2]+s+'" class="stream_text2"><div id="<div id="'+n[3]+s+'" class="stream_channel">'+i+"</div>"+(""!==o?'<div id="'+n[4]+s+'"class="stream_info_games" style="width: 100%; display: inline-block;">'+o+"</div>":"")+"</div></div>",Pr}function jy(e,t,n,a,i,o,s,d,c,l,r,u,_,f,m,h){var p=qy(e,t,n,a);return Pr.setAttribute("id",n[8]+p),Pr.setAttribute(au,JSON.stringify([r,l,s[2],u,i,_,f,m,h,s[0],c,s[1]+s[2]])),Pr.innerHTML='<div id="'+n[0]+p+'" class="stream_thumbnail_clip"><div><img id="'+n[1]+p+'" class="stream_img"></div><div id="'+n[2]+p+'" class="stream_text2"><div id="'+n[3]+p+'" class="stream_info" style="width: 72%; display: inline-block; font-size: 85%;">'+i+'</div><div id="'+n[7]+p+'"class="stream_info" style="width:27%; float: right; text-align: right; display: inline-block;">'+c+'</div><div  style="line-height: 12px;"><div id="'+n[4]+p+'"class="stream_info" style="width: 59%; display: inline-block;">'+o[0]+o[1]+'</div><div id="'+n[5]+p+'"class="stream_info" style="width: 39%; display: inline-block; float: right; text-align: right;">'+R+Mp(l)+'</div></div><div id="'+n[11]+p+'"class="stream_info">'+s[0]+oa+s[1]+s[2]+'</div><div id="'+n[6]+p+'"class="stream_info">'+d+V+"</div></div></div>",Pr}function Xy(e,t,n,a,i){var o=qy(e,t,a,i[0]);return Pr.setAttribute("id",a[8]+o),Pr.setAttribute(au,JSON.stringify(n)),Pr.innerHTML='<div id="'+a[0]+o+'" class="stream_thumbnail_clip"><div><img id="'+a[1]+o+'" class="stream_img"></div><div id="'+a[2]+o+'" class="stream_text2"><div id="'+a[3]+o+'" class="stream_channel" style="width: 66%; display: inline-block;">'+i[1]+'</div><div id="'+a[7]+o+'"class="stream_info" style="width:33%; float: right; text-align: right; display: inline-block;">'+i[5]+'</div><div id="'+a[4]+o+'"class="stream_info">'+xS.parse(i[2])+'</div><div id="'+a[5]+o+'"class="stream_info">'+g+i[3]+'</div><div id="'+a[6]+o+'"class="stream_info">'+i[4]+"</div></div></div>",Pr}function Wy(){Ty.status?(p_(Ty.img_404),Du(Ty.posX,Ty.posY,Ty.ColoumnsCount,Ty.itemsCount)):(Ty.emptyContent?Hu(Ty.empty_str()):(Ty.status=!0,p_(Ty.img_404)),Gr&&Ty.status&&wk.restor_playback.defaultValue?yr.Play_WasPlaying?(c_(yr.Main_Go),yr.Main_Go=vr,yr.vodOffset||(yr.vodOffset=1),Nd=yr.vodOffset+1,Ap(zn),1===yr.Play_WasPlaying?D_():H_(),i_(!0),window.setTimeout(function(){vh||Np()},2e3)):1!==vr?(c_(yr.Main_Go),yr.Main_Go=vr,q_(Ty.posY+"_"+Ty.posX,Ty.ids),i_()):(yr.Never_run&&Wu(),yr.Never_run=!1,Yy(),s_()):(Yy(),s_()),Gr=!1,Ty.FirstLoad=!1,Bu())}function Yy(){Ty.posY<0?$y():(Ty.addFocus(Ty.posY,Ty.posX,Ty.ids,Ty.ColoumnsCount,Ty.itemsCount),2<Ty.posY&&Ty.data_cursor+rb>Ty.data.length&&!Ty.dataEnded&&!Ty.loadingData&&(Dy(),Ry()),Ty.posY+Ty.ItemsReloadLimit>Ty.itemsCount/Ty.ColoumnsCount&&Ty.data_cursor<Ty.data.length&&(g_(),Ty.loadDataSuccess()),kr&&q_(Ty.posY+"_"+Ty.posX,Ty.ids))}function Ky(e,t){q_(Ty.posY+"_"+Ty.posX,Ty.ids),Ty.posY+=e,Ty.posX=t,Yy()}function $y(){Su(Ty.ids[0]+"y_0",nu)}function Zy(){Pu(Ty.ids[0]+"y_0",nu)}function Qy(e){Ku()?Yu():ju()?zu():(e===Ty.screen?yr.Main_Go=Kl:yr.Main_Go=e,Uy())}function eb(e){if(!Ty.HasSwitches||Ty.posY||-1!==e||Ty.emptyContent){if(Ty.HasSwitches&&-1===Ty.posY)Ty.posY=0,Yy(),Zy();else for(var t=0;t<Ty.ColoumnsCount;t++)if(e_(Ty.posY+e,Ty.posX-t,Ty.ids[0]))return void Ky(e,Ty.posX-t)}else q_(Ty.posY+"_"+Ty.posX,Ty.ids),Ty.posY=-1,$y()}function tb(e,t){e_(Ty.posY,Ty.posX+e,Ty.ids[0])?Ky(0,Ty.posX+e):e_(Ty.posY+e,t,Ty.ids[0])&&Ky(e,t)}function nb(e){if(!Ty.FirstLoad&&!G_())switch(O_(),e.keyCode){case Ta:Ty.key_exit();break;case Ia:tb(-1,Ty.ColoumnsCount-1);break;case Pa:tb(1,0);break;case Sa:eb(-1);break;case xa:eb(1);break;case Ma:case Ca:case Ea:case La:Ty.key_play()}}Ty.FirstLoad=!1;var ab,ib,ob,sb,db,cb,lb,rb=100,ub="",_b="",fb="",mb="",hb="",pb="",gb={posX:0,posY:0,row_id:0,coloumn_id:0,dataEnded:!1,idObject:{},loadingData:!1,itemsCount:0,loadingDataTryMax:5,loadingDataTimeout:3500,MaxOffset:0,offset:0,status:!1,emptyContent:!1,itemsCountCheck:!1,FirstLoad:!1,row:0,data:null,data_cursor:0,loadDataSuccess:Jy,set_ThumbSize:function(){this.ThumbCssText="width: "+this.ThumbSize+"%; display: inline-block; padding: 3px;"},key_exit:function(){Ku()?Yu():ju()?zu():(this.itemsCount&&q_(this.posY+"_"+this.posX,this.ids),uf(nb))}},vb={ThumbSize:32.65,ItemsLimit:Fr,ItemsReloadLimit:Rr,ColoumnsCount:Dr,addFocus:N_,img_404:mu,empty_str:function(){return B+K},key_play:function(){F_(this.posY+"_"+this.posX,this.ids,nb)}};function yb(){(cb=Ay(cb=Ay({ids:Gy("Live"),table:"stream_table_live",screen:Kl,base_url:"https://api.twitch.tv/kraken/streams?limit="+rb,set_url:function(){this.offset&&this.offset+rb>this.MaxOffset&&(this.dataEnded=!0),this.url=this.base_url+"&offset="+this.offset+(""!==Lr?"&language="+Lr:"")},label_init:function(){yr.Main_CenterLablesVectorPos=0,Su("top_bar_live","icon_center_focus")},label_exit:function(){Pu("top_bar_live","icon_center_focus")},concatenate:function(e){if(this.data){var t=JSON.parse(e);this.MaxOffset=t._total,this.data=this.data.concat(t.streams),this.offset=this.data.length,this.offset>this.MaxOffset&&(this.dataEnded=!0),Ty.loadingData=!1}else this.data=JSON.parse(e),this.MaxOffset=this.data._total,this.data=this.data.streams,this.offset=this.data.length,this.offset>this.MaxOffset&&(this.dataEnded=!0),this.loadDataSuccess(),Ty.loadingData=!1},addCell:function(e){Ty.idObject[e.channel._id]||(Ty.itemsCount++,Ty.idObject[e.channel._id]=1,Ty.row.appendChild(Xy(Ty.row_id,Ty.coloumn_id,[e.channel.name,e.channel._id,e.channel.status],this.ids,[e.preview.template.replace("{width}x{height}",eu),Qu(JSON.stringify(e.stream_type))+e.channel.display_name,e.channel.status,e.game,y+Ip(e.created_at)+b+", "+h+$u(e.viewers)+H,Zu(e.video_height,e.average_fps,e.channel.language)])),Ty.coloumn_id++)}},gb),vb)).set_ThumbSize()}function bb(){(lb=Ay(lb=Ay({ids:Gy("Featured"),table:"stream_table_featured",screen:pr,base_url:"https://api.twitch.tv/kraken/streams/featured?limit="+rb,set_url:function(){this.url=this.base_url+"&offset="+this.offset+(Zi()&&Ni[yr.Users_Position].access_token?"&oauth_token="+Ni[yr.Users_Position].access_token:"")},label_init:function(){yr.Main_CenterLablesVectorPos=2,Su("top_bar_featured","icon_center_focus")},label_exit:function(){Pu("top_bar_featured","icon_center_focus")},concatenate:function(e){this.data=JSON.parse(e),this.data=this.data.featured,this.dataEnded=!0,this.loadDataSuccess(),Ty.loadingData=!1},addCell:function(e){e=e.stream,Ty.idObject[e.channel._id]||(Ty.itemsCount++,Ty.idObject[e.channel._id]=1,Ty.row.appendChild(Xy(Ty.row_id,Ty.coloumn_id,[e.channel.name,e.channel._id,e.channel.status],this.ids,[e.preview.template.replace("{width}x{height}",eu),Qu(JSON.stringify(e.stream_type))+e.channel.display_name,e.channel.status,e.game,y+Ip(e.created_at)+b+", "+h+$u(e.viewers)+H,Zu(e.video_height,e.average_fps,e.channel.language)])),Ty.coloumn_id++)}},gb),vb)).set_ThumbSize()}var wb={ThumbSize:32.65,ItemsLimit:Fr,HasSwitches:!0,TopRowCreated:!1,ItemsReloadLimit:Rr,ColoumnsCount:Dr,addFocus:N_,cursor:null,period:["day","week","month","all"],img_404:mu,empty_str:function(){return B+U},key_play:function(){-1===this.posY?this.loadingData||(this.periodPos++,4<this.periodPos&&(this.periodPos=1),this.SetPeriod(),Fy()):R_(this.posY+"_"+this.posX,this.ids,nb)},concatenate:function(e){if(this.data){var t=JSON.parse(e);this.cursor=t._cursor,""===this.cursor&&(this.dataEnded=!0),this.data=this.data.concat(t.clips),Ty.loadingData=!1}else this.data=JSON.parse(e),this.cursor=this.data._cursor,""===this.cursor&&(this.dataEnded=!0),this.data=this.data.clips,this.loadDataSuccess(),Ty.loadingData=!1},addCell:function(e){Ty.idObject[e.tracking_id]||(Ty.itemsCount++,Ty.idObject[e.tracking_id]=1,Ty.row.appendChild(jy(Ty.row_id,Ty.coloumn_id,Ty.ids,e.thumbnails.medium,e.broadcaster.display_name,[sn,__(e.created_at)],[xS.parse(e.title),g,e.game],$u(e.views),"["+e.language.toUpperCase()+"]",e.duration,e.slug,e.broadcaster.name,e.broadcaster.logo.replace("150x150","300x300"),e.broadcaster.id,null!==e.vod?e.vod.id:null,null!==e.vod?e.vod.offset:null)),Ty.coloumn_id++)}};function kb(){(ab=Ay(ab=Ay({ids:Gy("Clip"),table:"stream_table_clip",screen:fr,periodPos:vf("Clip_periodPos",2),base_url:"https://api.twitch.tv/kraken/clips/top?limit="+rb,set_url:function(){this.url=this.base_url+"&period="+this.period[this.periodPos-1]+(this.cursor?"&cursor="+this.cursor:"")+(""!==Lr?"&language="+Lr:"")},SetPeriod:function(){xu("top_bar_clip",U+u_(Br[this.periodPos-1])),gf("Clip_periodPos",this.periodPos)},label_init:function(){yr.Main_CenterLablesVectorPos=5,this.SetPeriod(),Su("top_bar_clip","icon_center_focus"),Cu("label_refresh","icon-refresh",t+Wt)},label_exit:function(){l_(),Pu("top_bar_clip","icon_center_focus"),Cu("label_refresh","icon-refresh",t+Wt)}},gb),wb)).set_ThumbSize()}function Cb(){(ib=Ay(ib=Ay({ids:Gy("ChannelClip"),table:"stream_table_channel_clip",screen:cr,periodPos:vf("ChannelClip_periodPos",2),base_url:"https://api.twitch.tv/kraken/clips/top?channel=",set_url:function(){this.url=this.base_url+encodeURIComponent(yr.Main_selectedChannel)+"&limit="+rb+"&period="+this.period[this.periodPos-1]+(this.cursor?"&cursor="+this.cursor:"")},SetPeriod:function(){xu("top_bar_game",U+Br[this.periodPos-1]),gf("ChannelClip_periodPos",this.periodPos)},label_init:function(){yr.Main_CenterLablesVectorPos=1,!yr.Search_isSearching&&yr.Main_selectedChannel_id&&kd(),yr.Main_selectedChannel!==this.lastselectedChannel&&(this.status=!1),r_(),this.SetPeriod(),Lu("top_bar_user",yr.Main_selectedChannelDisplayname),Cu("label_side_panel","icon-arrow-circle-left",P),this.lastselectedChannel=yr.Main_selectedChannel},label_exit:l_},gb),wb)).set_ThumbSize()}function Mb(){(ob=Ay(ob=Ay({ids:Gy("AGameClip"),table:"stream_table_a_game_clip",screen:hr,periodPos:vf("AGameClip_periodPos",2),base_url:"https://api.twitch.tv/kraken/clips/top?game=",set_url:function(){this.url=this.base_url+encodeURIComponent(yr.Main_gameSelected)+"&limit="+rb+"&period="+this.period[this.periodPos-1]+(this.cursor?"&cursor="+this.cursor:"")+(""!==Lr?"&language="+Lr:"")},SetPeriod:function(){xu("top_bar_game",w+u_(U+Br[this.periodPos-1]+": "+yr.Main_gameSelected)),gf("AGameClip_periodPos",this.periodPos)},label_init:function(){yr.Main_CenterLablesVectorPos=3,this.SetPeriod(),Su("top_bar_game","icon_center_focus"),Cu("label_side_panel","icon-arrow-circle-left",P),this.gameSelected!==yr.Main_gameSelected&&(this.status=!1),this.gameSelected=yr.Main_gameSelected},label_exit:function(){Pu("top_bar_game","icon_center_focus"),xu("top_bar_game",f),Cu("label_side_panel","icon-ellipsis",Fn)}},gb),wb)).set_ThumbSize()}var Eb={ThumbSize:19.35,ItemsLimit:Vr,ItemsReloadLimit:Jr,ColoumnsCount:Hr,addFocus:U_,img_404:_u,empty_str:function(){return B+Z},concatenate:function(e){if(this.data){var t=JSON.parse(e);this.MaxOffset=t._total,this.data=this.data.concat(this.screen===nr?t.follows:t.top),this.offset=this.data.length,this.offset>this.MaxOffset&&(this.dataEnded=!0),Ty.loadingData=!1}else this.data=JSON.parse(e),this.MaxOffset=this.data._total,this.data=this.screen===nr?this.data.follows:this.data.top,this.offset=this.data.length,this.isLive?this.dataEnded=!0:this.offset>this.MaxOffset&&(this.dataEnded=!0),this.loadDataSuccess(),Ty.loadingData=!1},key_play:function(){yr.Main_gameSelected=document.getElementById(this.ids[5]+this.posY+"_"+this.posX).getAttribute(au),document.body.removeEventListener("keydown",nb),yr.Main_BeforeAgame=this.screen,yr.Main_Go=Ql,yr.Main_BeforeAgameisSet=!0,Co=!1,Or=0,document.body.removeEventListener("keydown",nb),Mu(this.ids[10]),o_(),q_(this.posY+"_"+this.posX,this.ids)},addCell:function(e){var t=this.isLive||this.screen===Zl,n=t?e.game:e;Ty.idObject[n._id]||(Ty.itemsCount++,Ty.idObject[n._id]=1,Ty.row.appendChild(zy(Ty.row_id,Ty.coloumn_id,Ty.ids,n.box.template.replace("{width}x{height}",tu),n.name,t?$u(e.channels)+" "+I+h+$u(e.viewers)+H:"")),Ty.coloumn_id++)}};function Ib(){(sb=Ay(sb=Ay({ids:Gy("Game"),table:"stream_table_games",screen:Zl,base_url:"https://api.twitch.tv/kraken/games/top?limit="+rb,set_url:function(){this.offset&&this.offset+rb>this.MaxOffset&&(this.dataEnded=!0),this.url=this.base_url+"&offset="+this.offset},label_init:function(){yr.Main_CenterLablesVectorPos=3,Su("top_bar_game","icon_center_focus")},label_exit:function(){Pu("top_bar_game","icon_center_focus")}},gb),Eb)).set_ThumbSize()}function Sb(){(db=Ay(db=Ay({ids:Gy("UserGames"),table:"stream_table_user_games",screen:nr,isLive:bf("user_Games_live",!0),OldUserName:"",base_url:"https://api.twitch.tv/api/users/",set_url:function(){this.offset&&this.offset+rb>this.MaxOffset&&(this.dataEnded=!0),this.url=this.base_url+encodeURIComponent(Ni[yr.Users_Position].name)+"/follows/games",this.isLive?this.url+="/live?limit=750":this.url+="?limit="+rb+"&offset="+this.offset},key_refresh:function(){this.isLive=!this.isLive,xu("top_bar_user",u+u_(Ni[yr.Users_Position].name+" "+(this.isLive?Z:jt))),Fy(),gf("user_Games_live",this.isLive?"true":"false"),EE&&OE()},label_init:function(){yr.Main_CenterLablesVectorPos=1,Cu("label_refresh","icon-refresh",Xt+Z+"/"+jt+":"+Wt),Cu("label_side_panel","icon-arrow-circle-left",P),Su("top_bar_user","icon_center_focus"),this.OldUserName!==Ni[yr.Users_Position].name&&(this.status=!1),this.OldUserName=Ni[yr.Users_Position].name,xu("top_bar_user",u+u_(Ni[yr.Users_Position].name+" "+(this.isLive?Z:jt)))},label_exit:function(){yr.Users_Position=0,Pu("top_bar_user","icon_center_focus"),Cu("label_refresh","icon-refresh",t+Wt),Lu("top_bar_user",u),Cu("label_side_panel","icon-ellipsis",Fn)}},gb),Eb)).set_ThumbSize()}var Pb=0,xb=0,Lb=!1,Tb=0,Bb={},Ob=[],Gb=!1,Ab=0,Nb=5,Ub=3500,Fb=0,Db=0,Rb=!1,Vb=!1,Hb="",Jb=!1,qb=["sc_thumbdiv","sc_img","sc_infodiv","sc_displayname","sc_cell","scempty_","search_channel_scroll"];function zb(){yr.Main_CenterLablesVectorPos=1,yr.Main_Go=ur,yr.isLastSChannels=!0,yr.Search_isSearching=!0,Hb!==yr.Search_data&&(Vb=!1),r_(),xu("top_bar_user",n+u_(I+" '"+yr.Search_data+"'")),document.body.addEventListener("keydown",ow,!1),Vb?(y_(Pb),Eu(qb[6]),aw(),s_()):Xb()}function jb(){l_(),document.body.removeEventListener("keydown",ow),Mu(qb[6])}function Xb(){h_("stream_table_search_channel"),Mu(qb[6]),Tu(),Ju(),Hb=yr.Search_data,Vb=!1,Bb={},lf=!(Tb=Db=Fb=0),Pb=xb=0,Lb=Jb=!(Ob=[]),Fu(),Wb(),Yb()}function Wb(){g_(),Gb=!0,Ab=0,Ub=3500}function Yb(){var e=Tb+Fb;e&&Db-1<e&&(e=Db-qr,Lb=!0),Cf("https://api.twitch.tv/kraken/search/channels?query="+encodeURIComponent(yr.Search_data)+"&limit="+qr+"&offset="+e,Ub,2,null,$b,Kb)}function Kb(){++Ab<Nb?(Ub+=500,Yb()):(Gb=!1,Tb?(Lb=!0,Qb()):(lf=!1,Bu(),Hu(T)))}function $b(e){var t=JSON.parse(e),n=t.channels.length;Db=parseInt(t._total),n<qr&&(Lb=!0);var a=Tb;Rb=!(Tb+=n);var i=n/zr;0<n%zr&&i++;for(var o,s,d,c,l,r=0,u=document.getElementById("stream_table_search_channel"),_=0;_<i;_++){for(s=a/zr+_,d=document.createElement("tr"),o=0;o<zr&&r<n;o++,r++)l=(c=t.channels[r])._id,Bb[l]?o--:(Bb[l]=1,d.appendChild(Zb(s,s+"_"+o,[c.name,l,c.logo,c.display_name])));for(;o<zr;o++)Lb&&!Jb&&(Jb=!0,Tb=s*zr+o),d.appendChild(k_(qb[5]+s+"_"+o)),Ob.push(qb[5]+s+"_"+o);u.appendChild(d)}Qb()}function Zb(e,t,n){return e<4&&w_(n[2]),C_(t,qb,n)}function Qb(){if(Vb){if(p_(fu),0<Ob.length&&!Lb)return Wb(),void ew();Du(xb,Pb,zr,Tb),Ob=[]}else Rb?Hu(d):(Vb=!0,p_(fu),aw(),s_()),Eu(qb[6]),lf=!1,Bu();Gb=!1}function ew(){Vu(Ob.length);var e=Tb+Fb;e&&Db-1<e&&(e=Db-Xr,Lb=!0),Cf("https://api.twitch.tv/kraken/search/channels?query="+encodeURIComponent(yr.Search_data)+"&limit="+Xr+"&offset="+e,Ub,2,null,nw,tw)}function tw(){++Ab<Nb?(Ub+=500,ew()):(Lb=!0,Tb-=Ob.length,Ob=[],Qb())}function nw(e){var t,n,a=JSON.parse(e),i=a.channels.length,o=0,s=0,d=[];for(Db=parseInt(a._total),i<Xr&&(Lb=!0);o<Ob.length&&s<i;o++,s++)n=(t=a.channels[s])._id,Bb[n]?o--:(Bb[n]=1,M_(Ob[o],[t.name,n,t.logo,t.display_name],qb),d.push(o));for(o=d.length-1;-1<o;o--)Ob.splice(d[o],1);Fb+=s,Lb&&(Tb-=Ob.length,Ob=[]),Qb()}function aw(){A_(Pb,xb,qb,zr,Tb),Tb/zr<Pb+jr&&!Lb&&!Gb&&(Wb(),Yb()),kr&&iw()}function iw(){Tb&&q_(Pb+"_"+xb,qb)}function ow(e){var t;if(!lf&&!G_())switch(O_(),e.keyCode){case Ta:Ku()?Yu():ju()?zu():(iw(),uf(ow));break;case Ia:if(e_(Pb,xb-1,qb[0]))iw(),xb--,aw();else for(t=zr-1;-1<t;t--)if(e_(Pb-1,t,qb[0])){iw(),Pb--,xb=t,aw();break}break;case Pa:e_(Pb,xb+1,qb[0])?(iw(),xb++,aw()):e_(Pb+1,0,qb[0])&&(iw(),Pb++,xb=0,aw());break;case Sa:for(t=0;t<zr;t++)if(e_(Pb-1,xb-t,qb[0])){iw(),Pb--,xb-=t,aw();break}break;case xa:for(t=0;t<zr;t++)if(e_(Pb+1,xb-t,qb[0])){iw(),Pb++,xb-=t,aw();break}break;case Ma:case Ca:case Ea:case La:yr.Main_selectedChannel=document.getElementById(qb[4]+Pb+"_"+xb).getAttribute(au),yr.Main_selectedChannel_id=document.getElementById(qb[4]+Pb+"_"+xb).getAttribute("data-id"),yr.Main_selectedChannelDisplayname=document.getElementById(qb[3]+Pb+"_"+xb).textContent,document.body.removeEventListener("keydown",ow),yr.Main_BeforeChannel=ur,yr.Main_Go=sr,yr.Main_BeforeChannelisSet=!0,Rs=Va=!1,Mu(qb[6]),i_()}}var sw=!1,dw=0,cw=0,lw=0,rw=0,uw=5,_w=3500,fw=0,mw=0,hw=!1,pw=!1,gw="",vw=["sgthumbdiv","sgimg","sginfodiv","sgdisplayname","sgviwers","sgcell","sgempty_","search_games_scroll"];function yw(){yr.Main_CenterLablesVectorPos=1,yr.Main_Go=ir,yr.Search_isSearching=!0,r_(),gw!==yr.Search_data&&(sw=!1),xu("top_bar_user",n+u_(f+" '"+yr.Search_data+"'")),document.body.addEventListener("keydown",Lw,!1),sw?(y_(dw),Eu(vw[7]),Pw(),s_()):ww()}function bw(){yr.Search_isSearching||l_(),document.body.removeEventListener("keydown",Lw),yr.Games_return=!1,Mu(vw[7])}function ww(){h_("stream_table_search_game"),Mu(vw[7]),Tu(),Ju(),gw=yr.Search_data,pw=sw=!1,dw=cw=lw=mw=fw=0,Fu(),kw(),Cw()}function kw(){g_(),lf=!0,rw=0,_w=3500}function Cw(){Cf("https://api.twitch.tv/kraken/search/games?query="+encodeURIComponent(yr.Search_data),_w,2,null,Ew,Mw)}function Mw(){++rw<uw?(_w+=500,Cw()):(lf=!1,lw?Sw():(Bu(),Hu(T)))}function Ew(e){var t=JSON.parse(e),n=0;null!==t.games&&(n=t.games.length);var a=lw;hw=!(lw+=n);var i=n/Hr;0<n%Hr&&i++;for(var o,s,d,c,l=0,r=document.getElementById("stream_table_search_game"),u=0;u<i;u++){for(s=a/Hr+u,d=document.createElement("tr"),o=0;o<Hr&&l<n;o++,l++)c=t.games[l],d.appendChild(Iw(s,s+"_"+o,[c.name,c.box.template.replace("{width}x{height}",tu),""]));for(;o<Hr;o++)pw||(pw=!0,lw=s*Hr+o),d.appendChild(k_(vw[6]+s+"_"+o));r.appendChild(d)}Sw()}function Iw(e,t,n){return e<2&&w_(n[1]),x_(t,vw,n)}function Sw(){sw||(hw?Hu(d):(sw=!0,p_(mu),Pw(),s_()),Bu()),Eu(vw[7]),lf=!1,Du(cw,dw,Hr,lw)}function Pw(){U_(dw,cw,vw,Hr,lw),kr&&xw()}function xw(){lw&&q_(dw+"_"+cw,vw)}function Lw(e){var t;if(!lf&&!G_())switch(O_(),e.keyCode){case Ta:Ku()?Yu():ju()?zu():(xw(),uf(Lw));break;case Ia:if(e_(dw,cw-1,vw[0]))xw(),cw--,Pw();else for(t=Hr-1;-1<t;t--)if(e_(dw-1,t,vw[0])){xw(),dw--,cw=t,Pw();break}break;case Pa:e_(dw,cw+1,vw[0])?(xw(),cw++,Pw()):e_(dw+1,0,vw[0])&&(xw(),dw++,cw=0,Pw());break;case Sa:for(t=0;t<Hr;t++)if(e_(dw-1,cw-t,vw[0])){xw(),dw--,cw-=t,Pw();break}break;case xa:for(t=0;t<Hr;t++)if(e_(dw+1,cw-t,vw[0])){xw(),dw++,cw-=t,Pw();break}break;case Ma:case Ca:case Ea:case La:yr.gameSelectedOld=yr.Main_gameSelected,bw(),yr.Main_gameSelected=document.getElementById(vw[5]+dw+"_"+cw).getAttribute(au),document.body.removeEventListener("keydown",Lw),yr.Main_Go=Ql,yr.Games_return=!0,i_()}}var Tw=0,Bw=0,Ow=!1;function Gw(){Ju(),Mu("label_refresh"),Cu("label_side_panel","icon-arrow-circle-left",P),Lu("top_bar_user",n),document.getElementById("top_lables").style.marginLeft="14%",document.getElementById("top_bar_live").style.display="none",document.getElementById("top_bar_featured").style.display="none",document.getElementById("top_bar_game").style.display="none",document.getElementById("top_bar_vod").style.display="none",document.getElementById("top_bar_clip").style.display="none",Dl.placeholder=k,Su("top_bar_user","icon_center_focus"),Eu("search_scroll"),Bw=Tw=0,Uw(),Dw()}function Aw(){Rw(!1),document.body.removeEventListener("keydown",Fw),Uw(),yr.Main_Go=yr.Main_BeforeSearch,document.getElementById("top_lables").style.marginLeft="18.5%",Lu("top_bar_user",u),Pu("top_bar_user","icon_center_focus"),Cu("label_side_panel","icon-ellipsis",Fn),Eu("label_refresh"),document.getElementById("top_bar_live").style.display="inline-block",document.getElementById("top_bar_featured").style.display="inline-block",document.getElementById("top_bar_game").style.display="inline-block",document.getElementById("top_bar_vod").style.display="inline-block",document.getElementById("top_bar_clip").style.display="inline-block",Dl.value="",Mu("search_scroll")}function Nw(){Aw(),X_(function(){Bw?1===Bw?yw():2===Bw&&sk():zb()})}function Uw(){Pu("chanel_button","button_search_focused"),Pu("game_button","button_search_focused"),Pu("live_button","button_search_focused"),Tw&&(Bw?1===Bw?Su("game_button","button_search_focused"):2===Bw&&Su("live_button","button_search_focused"):Su("chanel_button","button_search_focused"))}function Fw(e){if(!Ow)switch(e.keyCode){case Ta:Ku()?Yu():ju()?zu():(Aw(),i_());break;case Ia:1===Tw&&(--Bw<0&&(Bw=2),Uw());break;case Pa:1===Tw&&(2<++Bw&&(Bw=0),Uw());break;case Sa:1===Tw&&(Tw=0,Uw(),Dw());break;case xa:Tw?1===Tw&&(Tw=0,Uw(),Dw()):(Rw(!1),Tw=1,Uw());break;case Ma:case Ca:case Ea:case La:Tw?""!==Dl.value&&null!==Dl.value?(yr.Search_data=Dl.value,Dl.value="",Nw()):(Hu(s),window.setTimeout(function(){Ju()},1e3)):Dw()}}function Dw(){document.body.removeEventListener("keydown",Fw),document.body.addEventListener("keydown",Hw,!1),Dl.placeholder=k,Dl.focus(),Ow=!0}function Rw(e){Dl.blur(),Vw(),document.body.removeEventListener("keydown",Hw),Dl.placeholder=E+k,e&&document.body.addEventListener("keydown",Fw,!1),Ow=!1}function Vw(){if(null!==Dl){var e=Dl.cloneNode(!0);Dl.parentNode.replaceChild(e,Dl),Dl=document.getElementById("search_input")}}function Hw(e){switch(e.keyCode){case Ta:ju()?zu():Ku()?Yu():(Aw(),i_());break;case Aa:Dl.value="";break;case Oa:case xa:Rw(!0),Tw=1,Uw();break;case Ba:Dl.value=Dl.value.slice(0,-1);break;case Ga:Dl.value+=" "}}var Jw=0,qw=0,zw=!1,jw=0,Xw={},Ww=[],Yw=!1,Kw=0,$w=5,Zw=3500,Qw=0,ek=0,tk=!1,nk=!1,ak=!1,ik="",ok=["sl_thumbdiv","sl_img","sl_infodiv","sl_displayname","sl_streamtitle","sl_streamgame","sl_viwers","sl_quality","sl_cell","slempty_","search_live_scroll"];function sk(){yr.Main_CenterLablesVectorPos=1,yr.Main_Go=or,yr.Search_isSearching=!0,r_(),ik!==yr.Search_data&&(nk=!1),xu("top_bar_user",n+u_(_+" '"+yr.Search_data+"'")),document.body.addEventListener("keydown",yk,!1),nk?(y_(Jw),Eu(ok[10]),gk(),s_()):ck()}function dk(){l_(),document.body.removeEventListener("keydown",yk),Mu(ok[10])}function ck(){h_("stream_table_search_live"),Mu(ok[10]),Tu(),Ju(),ik=yr.Search_data,nk=!1,lf=!(ak=!(Ww=[])),Jw=qw=jw=ek=Qw=0,zw=!(Xw={}),Fu(),lk(),rk()}function lk(){g_(),Yw=!0,Kw=0,Zw=3500}function rk(){var e=jw+Qw;e&&ek-1<e&&(e=ek-Fr,zw=!0),Cf("https://api.twitch.tv/kraken/search/streams?query="+encodeURIComponent(yr.Search_data)+"&limit="+Fr+"&offset="+e,Zw,2,null,_k,uk)}function uk(){++Kw<$w?(Zw+=500,rk()):(Yw=!1,jw?(zw=!0,fk()):(lf=!1,Bu(),Hu(T)))}function _k(e){var t=JSON.parse(e),n=t.streams.length;ek=parseInt(t._total),n<Fr&&(zw=!0);var a=jw;tk=!(jw+=n);var i=n/Dr;0<n%Dr&&i++;for(var o,s,d,c,l,r=0,u=document.getElementById("stream_table_search_live"),_=0;_<i;_++){for(s=a/Dr+_,d=document.createElement("tr"),o=0;o<Dr&&r<n;o++,r++)l=(c=t.streams[r]).channel._id,Xw[l]?o--:(Xw[l]=1,d.appendChild(I_(s,s+"_"+o,[c.channel.name,l],ok,[c.preview.template.replace("{width}x{height}",eu),Qu(JSON.stringify(c.stream_type))+c.channel.display_name,c.channel.status,c.game,y+Ip(c.created_at)+b+", "+h+$u(c.viewers)+H,Zu(c.video_height,c.average_fps,c.channel.language)])));for(;o<Dr;o++)zw&&!ak&&(ak=!0,jw=s*Dr+o),d.appendChild(k_(ok[9]+s+"_"+o)),Ww.push(ok[9]+s+"_"+o);u.appendChild(d)}fk()}function fk(){if(nk){if(p_(mu),0<Ww.length&&!zw)return lk(),void mk();Du(qw,Jw,Dr,jw),Ww=[]}else tk?Hu(d):(nk=!0,p_(mu),gk(),s_()),Eu(ok[10]),lf=!1,Bu();Yw=!1}function mk(){Vu(Ww.length);var e=jw+Qw;e&&ek-1<e&&(e=ek-Xr,zw=!0),Cf("https://api.twitch.tv/kraken/search/streams?query="+encodeURIComponent(yr.Search_data)+"&limit="+Xr+"&offset="+e,Zw,2,null,pk,hk)}function hk(){++Kw<$w?(Zw+=500,mk()):(zw=!0,jw-=Ww.length,Ww=[],fk())}function pk(e){var t,n,a=JSON.parse(e),i=a.streams.length,o=0,s=0,d=[];for(ek=parseInt(a._total),i<Xr&&(zw=!0);o<Ww.length&&s<i;o++,s++)n=(t=a.streams[s]).channel._id,Xw[n]?o--:(Xw[n]=1,S_(Ww[o],[t.channel.name,n],[t.preview.template.replace("{width}x{height}",eu),Qu(JSON.stringify(t.stream_type))+t.channel.display_name,t.channel.status,t.game,y+Ip(t.created_at)+b+", "+h+$u(t.viewers)+H,Zu(t.video_height,t.average_fps,t.channel.language)],ok),d.push(o));for(o=d.length-1;-1<o;o--)Ww.splice(d[o],1);Qw+=s,zw&&(jw-=Ww.length,Ww=[]),fk()}function gk(){N_(Jw,qw,ok,Dr,jw),jw/Dr<Jw+Rr&&!zw&&!Yw&&(lk(),rk()),kr&&vk()}function vk(){jw&&q_(Jw+"_"+qw,ok)}function yk(e){var t;if(!lf&&!G_())switch(O_(),e.keyCode){case Ta:Ku()?Yu():ju()?zu():(vk(),uf(yk));break;case Ia:if(e_(Jw,qw-1,ok[0]))vk(),qw--,gk();else for(t=Dr-1;-1<t;t--)if(e_(Jw-1,t,ok[0])){vk(),Jw--,qw=t,gk();break}break;case Pa:e_(Jw,qw+1,ok[0])?(vk(),qw++,gk()):e_(Jw+1,0,ok[0])&&(vk(),Jw++,qw=0,gk());break;case Sa:for(t=0;t<Dr;t++)if(e_(Jw-1,qw-t,ok[0])){vk(),Jw--,qw-=t,gk();break}break;case xa:for(t=0;t<Dr;t++)if(e_(Jw+1,qw-t,ok[0])){vk(),Jw++,qw-=t,gk();break}break;case Ma:case Ca:case Ea:case La:F_(Jw+"_"+qw,ok,yk)}}var bk=0,wk={restor_playback:{values:["off","on"],defaultValue:2},chat_font_size:{values:["60%","80%","100%","120%","140%"],defaultValue:3},chat_brightness:{values:["0%","5%","10%","15%","20%","25%","30%","35%","40%","45%","50%","55%","60%","65%","70%","75%","80%","85%","90%","95%","100%"],defaultValue:11},force_disable_chat:{values:["off","on"],defaultValue:2},buffer_live:{values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],defaultValue:4},buffer_vod:{values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],defaultValue:4},buffer_clip:{values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],defaultValue:3},videos_animation:{values:["off","on"],defaultValue:2},clock_offset:{values:kk(),defaultValue:49},content_lang:{values:["All","Dansk [DA]","Deutsch [DE]","English [EN][EN-GB]","English - USA [EN]","English - UK [EN-GB]","Español [ES][ES-MX]","Español - España [ES]","Español - Latinoamérica [ES-MX]","Français [FR]","Italiano [IT]","Magyar [HU]","Nederlands [NL]","Norsk [NO]","Polski [PL]","Português [PT][PT-BR]","Português -Portugal [PT]","Português - Brasil [PT-BR]","Slovenčina [SK]","Suomi [FI]","Svenska [SV]","Tiếng Việt [VI]","Türkçe [TR]","Čeština [CS]","Ελληνικά [EL]","Български [BG]","Русский [RU]","ภาษาไทย [TH]","中文 [ZH-ALL]","中文 简体 [ZH-CN]","中文 繁體 [ZH-TW]","日本語 [JA]","한국어 [KO]","Română [RO]"],set_values:["","da","de","en,en-gb","en","en-gb","es,es-mx","es","es-mx","fr","it","hu","nl","no","pl","pt,pt-br","pt","pt-br","sk","fi","sv","vi","tr","cs","el","bg","ru","th","zh-cn,zh-tw","zh-cn","zh-tw","ja","ko","ro"],defaultValue:1}};function kk(){for(var e=[],t=43200,n=0;n<48;n++)e.push("-"+Mp(t)),t-=900;for(e.push(Mp(0)),t=900,n=0;n<48;n++)e.push(Mp(t)),t+=900;return e}var Ck=[],Mk=0;function Ek(){a_(),document.body.addEventListener("keydown",zk,!1),Cu("label_refresh","icon-arrow-circle-left",P),Lu("top_bar_user",a),document.getElementById("top_lables").style.marginLeft="14%",document.getElementById("top_bar_live").style.display="none",document.getElementById("top_bar_featured").style.display="none",document.getElementById("top_bar_game").style.display="none",document.getElementById("top_bar_vod").style.display="none",document.getElementById("top_bar_clip").style.display="none",Su("top_bar_user","icon_center_focus"),Eu("settings_scroll"),Fk(bk=0)}function Ik(){document.body.removeEventListener("keydown",zk),Dk(),Lu("top_bar_user",u),document.getElementById("top_lables").style.marginLeft="18.5%",document.getElementById("top_bar_live").style.display="inline-block",document.getElementById("top_bar_featured").style.display="inline-block",document.getElementById("top_bar_game").style.display="inline-block",document.getElementById("top_bar_vod").style.display="inline-block",document.getElementById("top_bar_clip").style.display="inline-block",Pu("top_bar_user","icon_center_focus"),Cu("label_refresh","icon-refresh",t+Wt),Mu("settings_scroll")}function Sk(){var e,t="";t+=Pk("general",yn),e="content_lang",Ck.push(e),t+=xk(e,Wn),e="clock_offset",Ck.push(e),t+=xk(e,jn),e="restor_playback",Ck.push(e),wk[e].values=[Tn,Ln],t+=Lk(e,Bn,On),e="videos_animation",Ck.push(e),wk[e].values=[Tn,Ln],t+=xk(e,Un),t+=Pk("play",fn),e="chat_font_size",Ck.push(e),t+=Lk(e,Gn,An),e="chat_brightness",Ck.push(e),t+=xk(e,aa),e="force_disable_chat",Ck.push(e),wk[e].values=[Jt,B],t+=Lk(e,ta,na),t+='<div id="setting_title_buffers" class="settings_title">'+mn+'</div><div id="setting_title_buffers_summary" class="settings_summary">'+hn+"</div>",e="buffer_live",Ck.push(e),t+=xk(e,pn),e="buffer_vod",Ck.push(e),t+=xk(e,gn),e="buffer_clip",Ck.push(e),xu("settings_main",t+=xk(e,vn)),Mk=Ck.length}function Pk(e,t){return'<div id="setting_title_'+e+'" class="settings_section">'+t+"</div>"}function xk(e,t){return'<div id="'+e+'_div" class="settings_div"><div id="'+e+'_name" class="settings_name">'+t+'</div><div class="settings_arraw_div"><div id="'+e+'arrow_left" class="left"></div></div><div id="'+e+'" class="strokedextramini settings_value">'+Gk(e)+'</div><div class="settings_arraw_div"><div id="'+e+'arrow_right" class="right"></div></div></div>'}function Lk(e,t,n){return'<div id="'+e+'_div" class="settings_div"><div id="'+e+'_name" class="settings_name">'+t+'<div id="'+e+'_summary" class="settings_summary" style="font-size: 65%;">'+n+'</div></div><div class="settings_arraw_div"><div id="'+e+'arrow_left" class="left"></div></div><div id="'+e+'" class="strokedextramini settings_value">'+Gk(e)+'</div><div class="settings_arraw_div"><div id="'+e+'arrow_right" class="right"></div></div></div>'}function Tk(e,t,n){xu(e+"_name",t+'<div id="'+e+'_summary" class="settings_summary" style="font-size: 65%;">'+n+"</div>")}function Bk(){var e="";for(e in Lu("setting_title_general",yn),Lu((e="clock_offset")+"_name",jn),Lu((e="content_lang")+"_name",Wn),wk[e].values[0]=Yn,Lu(e,Gk(e)),Lu("setting_title_play",fn),Lu("setting_title_buffers",mn),Lu("setting_title_buffers_summary",hn),Lu((e="buffer_live")+"_name",pn),Lu((e="buffer_vod")+"_name",gn),Lu((e="buffer_clip")+"_name",vn),Tk(e="restor_playback",Bn,On),wk[e].values=[Tn,Ln],Tk(e="chat_font_size",Gn,An),Tk(e="force_disable_chat",ta,na),wk[e].values=[Tn,Ln],Lu((e="videos_animation")+"_name",Un),wk[e].values=[Tn,Ln],Lu((e="chat_brightness")+"_name",aa),wk)wk.hasOwnProperty(e)&&Lu(e,Gk(e))}function Ok(){for(var e in wk)wk[e].defaultValue=vf(e,wk[e].defaultValue),wk[e].defaultValue-=1;Jk(0),qk(),Lm=(.05*Nk("chat_brightness")).toFixed(2),$I=Nk("videos_animation"),Lr=Ak("content_lang"),yr.Play_ChatForceDisable=Nk("force_disable_chat")}function Gk(e){return wk[e].values[Nk(e)]}function Ak(e){return wk[e].set_values[Nk(e)]}function Nk(e){return wk[e].defaultValue}function Uk(e){return wk[e].values.length-1}function Fk(e){var t=Ck[bk];Su(t,"settings_value_focus"),Su(t+"_div","settings_div_focus"),Vk(e)}function Dk(){var e=Ck[bk];document.getElementById(e+"arrow_left").style.opacity="0",document.getElementById(e+"arrow_right").style.opacity="0",Pu(e,"settings_value_focus"),Pu(e+"_div","settings_div_focus")}function Rk(e){var t=Ck[e];gf(t,Nk(t)+1),Lu(t,Gk(t)),Vk(e),Hk(e)}function Vk(e){var t=Ck[e],n=Nk(t),a=Uk(t);0<n&&n<a?(document.getElementById(t+"arrow_left").style.opacity="1",document.getElementById(t+"arrow_right").style.opacity="1"):n===a?(document.getElementById(t+"arrow_left").style.opacity="1",document.getElementById(t+"arrow_right").style.opacity="0.2"):(document.getElementById(t+"arrow_left").style.opacity="0.2",document.getElementById(t+"arrow_right").style.opacity="1")}function Hk(e){"content_lang"===(e=Ck[e])?Lr=Ak("content_lang"):"videos_animation"===e?$I=Nk("videos_animation"):"buffer_live"===e?Jk(1):"buffer_vod"===e?Jk(2):"buffer_clip"===e?Jk(3):"chat_brightness"===e?(Lm=(.05*Nk("chat_brightness")).toFixed(2),og(!1)):"force_disable_chat"===e?yr.Play_ChatForceDisable=Nk("force_disable_chat"):"chat_font_size"===e?jh():"clock_offset"===e&&(qk(),K_())}function Jk(e){try{e?1===e?(Dm=1e3*Gk("buffer_live"),lu&&Android.SetBuffer(1,Dm)):2===e?(iv=1e3*Gk("buffer_vod"),lu&&Android.SetBuffer(2,iv)):3===e&&(Yf=1e3*Gk("buffer_clip"),lu&&Android.SetBuffer(3,Yf)):(Dm=1e3*Gk("buffer_live"),iv=1e3*Gk("buffer_vod"),Yf=1e3*Gk("buffer_clip"),lu&&(Android.SetBuffer(1,Dm),Android.SetBuffer(2,iv),Android.SetBuffer(3,Yf)))}catch(e){}}function qk(){var e=Nk("clock_offset");cu=e<48?-9e5*(48-e):9e5*(e-48)}function zk(e){var t;switch(e.keyCode){case Ta:ju()?zu():Ku()?Yu():(Ik(),i_());break;case Ia:0<Nk(t=Ck[bk])&&(wk[t].defaultValue-=1,Rk(bk));break;case Pa:Nk(t=Ck[bk])<Uk(t)&&(wk[t].defaultValue+=1,Rk(bk));break;case Sa:0<bk&&(Dk(),Fk(--bk));break;case xa:bk<Mk-1&&(Dk(),Fk(++bk))}}var jk=0,Xk=0,Wk=!1,Yk=0,Kk=!1,$k=0,Zk=5,Qk=3500,eC=[],tC=0,nC=!1,aC=!1,iC="",oC=!1,sC=["uc_thumbdiv","uc_img","uc_infodiv","uc_displayname","uc_cell","ucempty_","user_channels_scroll"];function dC(){yr.Main_CenterLablesVectorPos=1,yr.Main_Go=rr,yr.isLastSChannels=!1,Cu("label_side_panel","icon-arrow-circle-left",P),Su("top_bar_user","icon_center_focus"),xu("top_bar_user",u+u_(Ni[yr.Users_Position].name+Q)),document.body.addEventListener("keydown",yC,!1),iC!==Ni[yr.Users_Position].name&&(aC=!1),aC?(y_(jk),Eu(sC[6]),gC(),s_()):lC()}function cC(){yr.Users_Position=0,Pu("top_bar_user","icon_center_focus"),document.body.removeEventListener("keydown",yC),Lu("top_bar_user",u),Cu("label_side_panel","icon-ellipsis",Fn),Mu(sC[6])}function lC(){h_("stream_table_user_channels"),Mu(sC[6]),Tu(),Ju(),iC=Ni[yr.Users_Position].name,jk=Xk=Yk=tC=0,lf=!(oC=Wk=aC=!1),Fu(),eC=[],rC(),uC()}function rC(){g_(),Kk=!0,$k=0,Qk=3500}function uC(){Cf("https://api.twitch.tv/kraken/users/"+encodeURIComponent(Ni[yr.Users_Position].id)+"/follows/channels?limit=100&offset="+tC+"&sortby=created_at&",Qk,2,null,fC,_C)}function _C(){++$k<Zk?(Qk+=500,uC()):(Kk=!1,Yk?(Wk=!0,pC()):(lf=!1,Bu(),Hu(T)))}function fC(e){var t=JSON.parse(e).follows,n=t.length;if(n){for(var a="",i=0;i<n;i++)a=t[i].channel.name+","+t[i].channel._id+","+t[i].channel.logo+","+t[i].channel.display_name,-1===eC.indexOf(a)&&eC.push(a);tC+=n,rC(),uC()}else eC.sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}),mC()}function mC(){var e=qr,t=Yk,n=eC.length-t;n<e&&(e=n),e<qr&&(Wk=!0),nC=!(Yk+=e);var a=e/zr;0<e%zr&&a++;for(var i,o,s,d=t,c=document.getElementById("stream_table_user_channels"),l=0;l<a;l++){for(o=t/zr+l,s=document.createElement("tr"),i=0;i<zr&&d<eC.length;i++,d++)s.appendChild(hC(o,o+"_"+i,eC[d].split(",")));for(;i<zr;i++)Wk&&!oC&&(oC=!0,Yk=o*zr+i),s.appendChild(k_(sC[5]+o+"_"+i));c.appendChild(s)}pC()}function hC(e,t,n){return e<4&&w_(n[2]),C_(t,sC,n)}function pC(){aC?p_(fu):(nC?Hu(B+Q):(aC=!0,p_(fu),gC(),s_()),Eu(sC[6]),lf=!1,Bu()),Kk=!1,Du(Xk,jk,zr,Yk)}function gC(){A_(jk,Xk,sC,zr,Yk),Yk/zr<jk+jr&&!Wk&&!Kk&&(rC(),uC()),kr&&vC()}function vC(){Yk&&q_(jk+"_"+Xk,sC)}function yC(e){var t;if(!lf&&!G_())switch(O_(),e.keyCode){case Ta:Ku()?Yu():ju()?zu():(vC(),uf(yC));break;case Ia:if(e_(jk,Xk-1,sC[0]))vC(),Xk--,gC();else for(t=zr-1;-1<t;t--)if(e_(jk-1,t,sC[0])){vC(),jk--,Xk=t,gC();break}break;case Pa:e_(jk,Xk+1,sC[0])?(vC(),Xk++,gC()):e_(jk+1,0,sC[0])&&(vC(),jk++,Xk=0,gC());break;case Sa:for(t=0;t<zr;t++)if(e_(jk-1,Xk-t,sC[0])){vC(),jk--,Xk-=t,gC();break}break;case xa:for(t=0;t<zr;t++)if(e_(jk+1,Xk-t,sC[0])){vC(),jk++,Xk-=t,gC();break}break;case Ma:case Ca:case Ea:case La:yr.Main_selectedChannel=document.getElementById(sC[4]+jk+"_"+Xk).getAttribute(au),yr.Main_selectedChannel_id=document.getElementById(sC[4]+jk+"_"+Xk).getAttribute("data-id"),yr.Main_selectedChannelDisplayname=document.getElementById(sC[3]+jk+"_"+Xk).textContent,yr.Main_selectedChannelLogo=document.getElementById(sC[1]+jk+"_"+Xk).src,document.body.removeEventListener("keydown",yC),yr.Main_BeforeChannel=rr,yr.Main_Go=sr,yr.Main_BeforeChannelisSet=!0,Rs=Va=!0,Mu(sC[6]),i_()}}var bC=0,wC=0,kC=!1,CC=0,MC={},EC=[],IC=!1,SC=0,PC=5,xC=3500,LC=0,TC=0,BC=!1,OC=["uh_thumbdiv","uh_img","uh_infodiv","uh_displayname","uh_hosttitle","uh_hostgame","uh_viwers","uh_quality","uh_cell","uhempty_","user_host_scroll"],GC=!1,AC="",NC=!1;function UC(){yr.Main_CenterLablesVectorPos=1,yr.Main_Go=tr,Cu("label_side_panel","icon-arrow-circle-left",P),Su("top_bar_user","icon_center_focus"),xu("top_bar_user",u+u_(Ni[yr.Users_Position].name+$)),document.body.addEventListener("keydown",KC,!1),AC!==Ni[yr.Users_Position].name&&(GC=!1),GC?(y_(bC),Eu(OC[10]),WC(),s_()):DC()}function FC(){yr.Users_Position=0,Pu("top_bar_user","icon_center_focus"),document.body.removeEventListener("keydown",KC),Lu("top_bar_user",u),Cu("label_side_panel","icon-ellipsis",Fn),Mu(OC[10])}function DC(){h_("stream_table_user_host"),Mu(OC[10]),Tu(),Ju(),AC=Ni[yr.Users_Position].name,GC=!1,MC={},lf=!(CC=TC=LC=0),bC=wC=0,kC=NC=!(EC=[]),Fu(),RC(),VC()}function RC(){g_(),IC=!0,SC=0,xC=3500}function VC(){var e=CC+LC;e&&TC-1<e&&(e=TC-Fr,kC=!0),Cf("https://api.twitch.tv/api/users/"+encodeURIComponent(Ni[yr.Users_Position].name)+"/followed/hosting?limit="+Fr+"&offset="+e,xC,2,null,JC,HC)}function HC(){++SC<PC?(xC+=500,VC()):(IC=!1,CC?(kC=!0,qC()):(lf=!1,Bu(),Hu(T)))}function JC(e){var t=JSON.parse(e),n=t.hosts.length;TC=parseInt(t._total),n<Fr&&(kC=!0);var a=CC;BC=!(CC+=n);var i=n/Dr;0<n%Dr&&i++;for(var o,s,d,c,l,r=0,u=document.getElementById("stream_table_user_host"),_=0;_<i;_++){for(s=a/Dr+_,d=document.createElement("tr"),o=0;o<Dr&&r<n;o++,r++)l=(c=t.hosts[r]).target._id+""+c._id,MC[l]?o--:(MC[l]=1,d.appendChild(I_(s,s+"_"+o,[c.target.channel.name,c.target._id],OC,[c.target.preview_urls.template.replace("{width}x{height}",eu),c.display_name+ae+c.target.channel.display_name,c.target.title,c.target.meta_game,h.charAt(1).toUpperCase()+h.slice(2)+$u(c.target.viewers)+H,""])));for(;o<Dr;o++)kC&&!NC&&(NC=!0,CC=s*Dr+o),d.appendChild(k_(OC[9]+s+"_"+o)),EC.push(OC[9]+s+"_"+o);u.appendChild(d)}qC()}function qC(){if(GC){if(p_(mu),0<EC.length&&!kC)return RC(),void zC();Du(wC,bC,Dr,CC),EC=[]}else BC?Hu(B+$):(GC=!0,WC(),p_(mu),s_()),Eu(OC[10]),lf=!1,Bu();IC=!1}function zC(){Vu(EC.length);var e=CC+LC;e&&TC-1<e&&(e=TC-Xr,kC=!0),Cf("https://api.twitch.tv/api/users/"+encodeURIComponent(Ni[yr.Users_Position].name)+"/followed/hosting?limit="+Xr+"&offset="+e,xC,2,null,XC,jC)}function jC(){++SC<PC?(xC+=500,zC()):(kC=!0,CC-=EC.length,EC=[],qC())}function XC(e){var t,n,a=JSON.parse(e),i=a.streams.length,o=0,s=0,d=[];for(TC=parseInt(a._total),i<Xr&&(kC=!0);o<EC.length&&s<i;o++,s++)n=(t=a.hosts[s]).target._id+""+t._id,MC[n]?o--:(MC[n]=1,S_(EC[o],[t.target.channel.name,t.target._id],[t.target.preview_urls.template.replace("{width}x{height}",eu),t.display_name+ae+t.target.channel.display_name,t.target.title,t.target.meta_game,h.charAt(1).toUpperCase()+h.slice(2)+$u(t.target.viewers)+H,""],OC),d.push(o));for(o=d.length-1;-1<o;o--)EC.splice(d[o],1);LC+=s,kC&&(CC-=EC.length,EC=[]),qC()}function WC(){N_(bC,wC,OC,Dr,CC),CC/Dr<bC+Rr&&!kC&&!IC&&(RC(),VC()),kr&&YC()}function YC(){CC&&q_(bC+"_"+wC,OC)}function KC(e){var t;if(!lf&&!G_())switch(O_(),e.keyCode){case Ta:Ku()?Yu():ju()?zu():(YC(),uf(KC));break;case Ia:if(e_(bC,wC-1,OC[0]))YC(),wC--,WC();else for(t=Dr-1;-1<t;t--)if(e_(bC-1,t,OC[0])){YC(),bC--,wC=t,WC();break}break;case Pa:e_(bC,wC+1,OC[0])?(YC(),wC++,WC()):e_(bC+1,0,OC[0])&&(YC(),bC++,wC=0,WC());break;case Sa:for(t=0;t<Dr;t++)if(e_(bC-1,wC-t,OC[0])){YC(),bC--,wC-=t,WC();break}break;case xa:for(t=0;t<Dr;t++)if(e_(bC+1,wC-t,OC[0])){YC(),bC++,wC-=t,WC();break}break;case Ma:case Ca:case Ea:case La:F_(bC+"_"+wC,OC,KC)}}var $C,ZC=!1,QC=0,eM=3500,tM=0,nM=5,aM=0,iM=!1,oM="",sM=0,dM={},cM=!1,lM=[],rM=null,uM=["ulf_thumbdiv","ulf_img","ulf_infodiv","ulf_displayname","ulf_streamtitle","ulf_streamgame","ulf_viwers","ulf_quality","ulf_cell","ulempty_","user_live_scroll"];function _M(){Zi()&&(PM(),cM?AM(Fm,uM[0])&&(rM=JSON.parse(document.getElementById(uM[8]+Fm).getAttribute(au))[0]):rM=null,h_("user_feed_scroll"),cM=!1,document.getElementById("user_feed_scroll").style.left="2.5px",document.getElementById("user_feed").style.bottom="0.1%",Eu("dialog_loading_feed"),oM="",Fm=sM=aM=tM=0,dM={},lM=[],X_(function(){hM(),pM()}))}function fM(e){for(var t,n=0;n<lM.length;n++)null!==(t=document.getElementById(lM[n].id))&&pu(t,lM[n].src+ru,e)}function mM(e,t){lM.push({id:e,src:t})}function hM(){ZC=!0,QC=0,eM=3500}function pM(){Cf("https://api.twitch.tv/kraken/users/"+encodeURIComponent(Ni[yr.Users_Position].id)+"/follows/channels?limit=100&offset="+tM+"&sortby=created_at",eM,2,null,vM,gM)}function gM(){++QC<nM?(eM+=500,pM()):(ZC=!1,aM?(iM=!0,kM()):(Mu("dialog_loading_feed"),MM()&&(Ap(T),window.setTimeout(function(){Np()},2e3))))}function vM(e){var t=JSON.parse(e).follows,n=t.length;if(n){for(var a="",i=0;i<n;i++)a=t[i].channel._id+",",-1===oM.indexOf(a)&&(oM+=a);tM+=n,hM(),pM()}else oM=oM.slice(0,-1),hM(),X_(yM)}function yM(){Cf("https://api.twitch.tv/kraken/streams/?channel="+encodeURIComponent(oM)+"&limit=100&offset=0&stream_type=all",eM,2,null,wM,bM)}function bM(){++QC<nM?(eM+=500,yM()):(ZC=!1,Mu("dialog_loading_feed"),MM()&&(Ap(T),window.setTimeout(function(){Np()},2e3)))}function wM(e){var t=JSON.parse(e),n=t.streams.length;n<Fr&&(iM=!0),aM+=n;for(var a,i,o=document.getElementById("user_feed_scroll"),s=0;s<n;s++)i=(a=t.streams[s]).channel._id,dM[i]||(dM[i]=1,null!==rM&&rM===a.channel.name&&(Fm=s),o.appendChild(CM(s,[a.channel.name,i],uM,[a.preview.template.replace("{width}x{height}",eu),Qu(JSON.stringify(a.stream_type))+a.channel.display_name,a.channel.status,a.game,y+Ip(a.created_at)+b+", "+h+$u(a.viewers)+H,Zu(a.video_height,a.average_fps,a.channel.language)])));kM()}function kM(){cM=!(ZC=!1),fM(mu),X_(function(){Mu("dialog_loading_feed"),TM()})}function CM(e,t,n,a){return mM(n[1]+e,a[0]),(Pr=document.createElement("div")).setAttribute("id",n[8]+e),Pr.setAttribute(au,JSON.stringify(t)),Pr.className="user_feed_thumb",Pr.innerHTML='<div id="'+n[0]+e+'" class="stream_thumbnail_clip" ><div><img id="'+n[1]+e+'" class="stream_img"></div><div id="'+n[2]+e+'" class="stream_text2"><div id="'+n[3]+e+'" class="stream_channel" style="width: 66%; display: inline-block;">'+a[1]+'</div><div id="'+n[5]+e+'"class="stream_info">'+g+a[3]+"</div></div></div>",Pr}function MM(){return Iu("user_feed")}function EM(){var e=Zi();e&&(Um!==Ni[yr.Users_Position].name&&(cM=!1),Um=Ni[yr.Users_Position].name),e&&AM(0,uM[0])||(cM=!1),cM||ZC||_M(),e&&(document.getElementById("user_feed").style.bottom="0.1%",Eu("user_feed"),TM())}function IM(){Mu("user_feed")}function SM(){PM(),xM()}function PM(){window.clearTimeout($C)}function xM(){MM()&&($C=window.setTimeout(IM,5500))}function LM(){PM(),ZC?window.setTimeout(function(){ZC=!1},15e3):_M()}function TM(){SM(),AM(Fm,uM[0])&&(Su(uM[0]+Fm,"feed_thumbnail_focused"),MM()?OM():Iu("scene2")&&GM())}function BM(){return Fm<3?2.5:AM(Fm+2,uM[0])?-1*document.getElementById(uM[8]+(Fm-2)).offsetLeft:AM(Fm+1,uM[0])?-1*document.getElementById(uM[8]+(Fm-3)).offsetLeft:-1*document.getElementById(uM[8]+(Fm-(3<Fm?4:3))).offsetLeft}function OM(){var e=BM();e&&(document.getElementById("user_feed_scroll").style.left=e+"px")}function GM(){document.getElementById("user_feed").style.bottom="-1000%",Eu("user_feed");var e=OM();e&&(document.getElementById("user_feed_scroll").style.left=e+"px"),document.getElementById("user_feed").style.bottom="0.1%",Mu("user_feed")}function AM(e,t){return null!==document.getElementById(t+e)}function NM(){AM(Fm,uM[0])&&Pu(uM[0]+Fm,"feed_thumbnail_focused")}var UM=0,FM=0,DM=!1,RM=0,VM={},HM=[],JM=!1,qM=0,zM=5,jM=3500,XM=0,WM=0,YM=0,KM=!1,$M=["ul_thumbdiv","ul_img","ul_infodiv","ul_displayname","ul_streamtitle","ul_streamgame","ul_viwers","ul_quality","ul_cell","ulempty_","user_live_scroll"],ZM=!1,QM="",eE="",tE=!1;function nE(){yr.Main_CenterLablesVectorPos=1,yr.Main_Go=er,Cu("label_side_panel","icon-arrow-circle-left",P),Su("top_bar_user","icon_center_focus"),xu("top_bar_user",u+u_(Ni[yr.Users_Position].name+K)),document.body.addEventListener("keydown",vE,!1),eE!==Ni[yr.Users_Position].name&&(ZM=!1),ZM?(y_(UM),Eu($M[10]),pE(),s_()):iE()}function aE(){yr.Users_Position=0,Pu("top_bar_user","icon_center_focus"),document.body.removeEventListener("keydown",vE),Lu("top_bar_user",u),Cu("label_side_panel","icon-ellipsis",Fn),Mu($M[10])}function iE(){h_("stream_table_user_live"),Mu($M[10]),Tu(),Ju(),ZM=!1,eE=Ni[yr.Users_Position].name,lf=!(tE=!(HM=[])),UM=FM=RM=WM=XM=YM=0,DM=!(VM={}),QM="",Fu(),oE(),sE()}function oE(){g_(),JM=!0,qM=0,jM=3500}function sE(){Cf("https://api.twitch.tv/kraken/users/"+encodeURIComponent(Ni[yr.Users_Position].id)+"/follows/channels?limit=100&offset="+YM+"&sortby=created_at",jM,2,null,cE,dE)}function dE(){++qM<zM?(jM+=500,sE()):(JM=!1,RM?(DM=!0,_E()):(lf=!1,Bu(),Hu(T)))}function cE(e){var t=JSON.parse(e).follows,n=t.length;if(n){for(var a="",i=0;i<n;i++)a=t[i].channel._id+",",-1===QM.indexOf(a)&&(QM+=a);YM+=n,oE(),sE()}else QM=QM.slice(0,-1),oE(),lE()}function lE(){var e=RM+XM;e&&WM-1<e&&(e=WM-Fr,DM=!0),Cf("https://api.twitch.tv/kraken/streams/?channel="+encodeURIComponent(QM)+"&limit="+Fr+"&offset="+e+"&stream_type=all",jM,2,null,uE,rE)}function rE(){++qM<zM?(jM+=500,lE()):(JM=!1,Bu(),Hu(T))}function uE(e){var t=JSON.parse(e),n=t.streams.length;WM=parseInt(t._total),n<Fr&&(DM=!0);var a=RM;KM=!(RM+=n);var i=n/Dr;0<n%Dr&&i++;for(var o,s,d,c,l,r=0,u=document.getElementById("stream_table_user_live"),_=0;_<i;_++){for(s=a/Dr+_,d=document.createElement("tr"),o=0;o<Dr&&r<n;o++,r++)l=(c=t.streams[r]).channel._id,VM[l]?o--:(VM[l]=1,d.appendChild(I_(s,s+"_"+o,[c.channel.name,l],$M,[c.preview.template.replace("{width}x{height}",eu),Qu(JSON.stringify(c.stream_type))+c.channel.display_name,c.channel.status,c.game,y+Ip(c.created_at)+b+", "+h+$u(c.viewers)+H,Zu(c.video_height,c.average_fps,c.channel.language)])));for(;o<Dr;o++)DM&&!tE&&(tE=!0,RM=s*Dr+o),d.appendChild(k_($M[9]+s+"_"+o)),HM.push($M[9]+s+"_"+o);u.appendChild(d)}_E()}function _E(){if(ZM){if(p_(mu),0<HM.length&&!DM)return oE(),void fE();Du(FM,UM,Dr,RM),HM=[]}else KM?Hu(B+K):(ZM=!0,pE(),p_(mu),s_()),Eu($M[10]),lf=!1,Bu();JM=!1}function fE(){Vu(HM.length);var e=RM+XM;e&&WM-1<e&&(e=WM-Xr,DM=!0),Cf("https://api.twitch.tv/kraken/streams/?channel="+encodeURIComponent(QM)+"&limit="+Xr+"&offset="+e+"&stream_type=all",jM,2,null,hE,mE)}function mE(){++qM<zM?(jM+=500,fE()):(DM=!0,RM-=HM.length,HM=[],_E())}function hE(e){var t,n,a=JSON.parse(e),i=a.streams.length,o=0,s=0,d=[];for(WM=parseInt(a._total),i<Xr&&(DM=!0);o<HM.length&&s<i;o++,s++)n=(t=a.streams[s]).channel._id,VM[n]?o--:(VM[n]=1,S_(HM[o],[t.channel.name,n],[t.preview.template.replace("{width}x{height}",eu),Qu(JSON.stringify(t.stream_type))+t.channel.display_name,t.channel.status,t.game,y+Ip(t.created_at)+b+", "+h+$u(t.viewers)+H,Zu(t.video_height,t.average_fps,t.channel.language)],$M),d.push(o));for(o=d.length-1;-1<o;o--)HM.splice(d[o],1);XM+=s,DM&&(RM-=HM.length,HM=[]),_E()}function pE(){N_(UM,FM,$M,Dr,RM),RM/Dr<UM+Rr&&!DM&&!JM&&(oE(),sE()),kr&&gE()}function gE(){RM&&q_(UM+"_"+FM,$M)}function vE(e){var t;if(!lf&&!G_())switch(O_(),e.keyCode){case Ta:Ku()?Yu():ju()?zu():(gE(),uf(vE));break;case Ia:if(e_(UM,FM-1,$M[0]))gE(),FM--,pE();else for(t=Dr-1;-1<t;t--)if(e_(UM-1,t,$M[0])){gE(),UM--,FM=t,pE();break}break;case Pa:e_(UM,FM+1,$M[0])?(gE(),FM++,pE()):e_(UM+1,0,$M[0])&&(gE(),UM++,FM=0,pE());break;case Sa:for(t=0;t<Dr;t++)if(e_(UM-1,FM-t,$M[0])){gE(),UM--,FM-=t,pE();break}break;case xa:for(t=0;t<Dr;t++)if(e_(UM+1,FM-t,$M[0])){gE(),UM++,FM-=t,pE();break}break;case Ma:case Ca:case Ea:case La:F_(UM+"_"+FM,$M,vE)}}var yE=0,bE=0,wE=8,kE=0,CE=null,ME=["u_thumbdiv","u_img","u_infodiv","u_displayname","u_cell","user_scroll"],EE=!1,IE=!0;function SE(){return Mr?(PE(),void Wa(Mr)):io()?(yr.Main_CenterLablesVectorPos=1,yr.Main_Go=lr,document.getElementById("screens_holder").style.top=screen.height/100*7+"px",Ju(),Su("top_bar_user","icon_center_focus"),document.body.addEventListener("keydown",JE,!1),void(EE?(y_(yE),Eu(ME[5]),GE(),s_()):xE())):(yr.Main_Go=Kl,PE(),void i_())}function PE(){yr.Users_Position=0,Pu("top_bar_user","icon_center_focus"),document.body.removeEventListener("keydown",JE),Mu(ME[5]),document.getElementById("screens_holder").style.top="0"}function xE(){h_("stream_table_user"),Mu(ME[5]),Tu(),Ju(),lf=!(EE=!1),IE=!(yE=bE=0),X_(function(){LE()})}function LE(){for(var e,t,n,a=document.createElement("tbody"),i=document.getElementById("stream_table_user"),o=0;o<Ni.length;o++)t=0,n=o%2?"B5B5B5":"FFFFFF",(Pr=document.createElement("tr")).className="follower_header",Pr.innerHTML='<div class="follower_header">'+(o?"":se)+Ni[o].name+F+"</div>",i.appendChild(a),i.appendChild(Pr),(e=document.createElement("tr")).appendChild(TE(o+"_"+t,yr.Main_selectedChannelDisplayname,K,"play",n)),t++,e.appendChild(TE(o+"_"+t,yr.Main_selectedChannelDisplayname,$,"users",n)),t++,e.appendChild(TE(o+"_"+t,yr.Main_selectedChannelDisplayname,db.isLive?Z:jt,"gamepad",n)),t++,e.appendChild(TE(o+"_"+t,yr.Main_selectedChannelDisplayname,Qt,"movie-play",n)),t++,e.appendChild(TE(o+"_"+t,yr.Main_selectedChannelDisplayname,Q,"filmstrip",n)),t++,o?e.appendChild(TE(o+"_"+t,yr.Main_selectedChannelDisplayname,oe,"arrow-up",n)):e.appendChild(TE(o+"_"+t,yr.Main_selectedChannelDisplayname,ee,"user-plus",n)),t++,e.appendChild(TE(o+"_"+t,yr.Main_selectedChannelDisplayname,te,"user-times",n)),t++,e.appendChild(TE(o+"_"+t,yr.Main_selectedChannelDisplayname,Ni[o].access_token?kt:wt,"key",n)),i.appendChild(e);BE()}function TE(e,t,n,a,i){return(Pr=document.createElement("td")).setAttribute("id",ME[4]+e),Pr.setAttribute(au,t),Pr.className="stream_cell",Pr.innerHTML='<div id="'+ME[0]+e+'" class="stream_thumbnail_channel" ><div id="'+ME[1]+e+'" class="stream_user_icon" style="color: #'+i+';"><i class="icon-'+a+'"></i></div></div><div id="'+ME[2]+e+'" class="stream_text"><div id="'+ME[3]+e+'" class="stream_info_user" style="text-align: center;">'+n+"</div></div>",Pr}function BE(){X_(function(){EE||(EE=!0,GE(),Bu(),s_()),Eu(ME[5]),IE=lf=!1})}function OE(){for(var e=0;e<Ni.length;e++)Lu(ME[3]+e+"_2",db.isLive?Z:jt)}function GE(){Su(ME[0]+yE+"_"+bE,"stream_thumbnail_focused"),b_(yE)?1<yE?e_(yE+1,0,ME[0])&&J_(ME[5],-1*document.getElementById(ME[4]+yE+"_"+bE).offsetTop+500):J_(ME[5],screen.height/100*7):T_(),kr&&AE()}function AE(){wr=!1,Pu(ME[0]+yE+"_"+bE,"stream_thumbnail_focused")}function NE(){return yr.Users_Position=yE,3!==bE||Ni[yr.Users_Position].access_token?7===bE&&Ni[yr.Users_Position].access_token?(Hu(kt),void window.setTimeout(Ju,1500)):(6!==bE&&7!==bE&&(Mu(ME[5]),document.body.removeEventListener("keydown",JE),document.getElementById("screens_holder").style.top="0"),void X_(function(){bE?1===bE?UC():2===bE?(Ty=db,Ny()):3===bE?rI():4===bE?dC():5===bE?yE?no(yE):(yr.Main_Before=lr,Ri()):6===bE?DE():7!==bE||Ni[yr.Users_Position].access_token||DE():nE()})):(Hu(Pn),void window.setTimeout(Ju,5e3))}function UE(){window.clearTimeout(CE)}function FE(){CE=window.setTimeout(RE,2e4)}function DE(){FE(),6===bE?xu("main_dialog_remove",qt+oa+Ni[yr.Users_Position].name+"?"):7===bE&&xu("main_dialog_remove",mt+" "+Ni[yr.Users_Position].name+"?"),Eu("main_remove_dialog")}function RE(){UE(),Mu("main_remove_dialog"),kE=0,HE()}function VE(){return Iu("main_remove_dialog")}function HE(){kE?(Pu("remove_cancel","button_search_focused"),Su("remove_yes","button_search_focused")):(Su("remove_cancel","button_search_focused"),Pu("remove_yes","button_search_focused"))}function JE(e){var t;if(!lf&&!G_())switch(O_(),e.keyCode){case Ta:VE()?RE():ju()?zu():Ku()?Yu():(AE(),uf(JE));break;case Ia:if(VE())--kE<0&&(kE=1),HE(),UE(),FE();else if(e_(yE,bE-1,ME[0]))AE(),bE--,GE();else if(e_(yE-1,0,ME[0])){for(t=wE-1;-1<t;t--)if(e_(yE-1,t,ME[0])){AE(),yE--,bE=t,GE();break}}else AE(),bE=wE-1,GE();break;case Pa:VE()?(1<++kE&&(kE=0),HE(),UE(),FE()):(e_(yE,bE+1,ME[0])?(AE(),bE++):(e_(yE+1,0,ME[0])?(AE(),yE++):AE(),bE=0),GE());break;case Sa:for(t=0;t<wE;t++)if(e_(yE-1,bE-t,ME[0])){AE(),yE--,bE-=t,GE();break}break;case xa:for(t=0;t<wE;t++)if(e_(yE+1,bE-t,ME[0])){AE(),yE++,bE-=t,GE();break}break;case Ma:case Ca:case Ea:case La:var n;if(VE()){if(6===bE)n=kE,RE(),n&&(document.body.removeEventListener("keydown",JE),PE(),eo(yE));else if(n=kE,RE(),n){yr.Users_AddcodePosition=yr.Users_Position,s_();var a=za,i="https://id.twitch.tv/oauth2/authorize?response_type=code&client_id="+encodeURIComponent(Wr)+"&redirect_uri="+a+"&scope=user_follows_edit+user_subscriptions&force_verify=true";window.location=i}}else NE()}}var qE=0,zE=0,jE=!1,XE=0,WE={},YE=[],KE=!1,$E=0,ZE=5,QE=3500,eI=0,tI=0,nI=!1,aI=!1,iI="time",oI=2,sI=!1,dI=["uv_thumbdiv","uv_img","uv_infodiv","uv_title","uv_streamon","uv_duration","uv_viwers","uv_quality","uv_cell","uvempty_","user_vod_scroll","uv_game"],cI=!1,lI=!1;function rI(){yr.Main_CenterLablesVectorPos=1,yr.Main_Go=gr,Su("top_bar_user","icon_center_focus"),Cu("label_side_panel","icon-arrow-circle-left",P),xu("top_bar_user",u+u_(Ni[yr.Users_Position].name+(lI?N:A))),document.body.addEventListener("keydown",PI,!1),cI?(y_(qE),Eu(dI[10]),xI(),MI(),s_()):_I()}function uI(){yr.Users_Position=0,cI&&EI(),Pu("top_bar_user","icon_center_focus"),Cu("label_side_panel","icon-ellipsis",Fn),document.body.removeEventListener("keydown",PI),Lu("top_bar_user",u),Mu(dI[10])}function _I(){cI&&EI(),h_("stream_table_user_vod"),Mu(dI[10]),Tu(),xI(),Ju(),sI=cI=!1,lf=!(aI=!(YE=[])),qE=zE=XE=tI=eI=0,jE=!(WE={}),Fu(),mI()}function fI(){g_(),KE=!0,$E=0,QE=3500}function mI(){fI(),hI()}function hI(){var e=XE+eI;e&&tI-1<e&&(e=tI-Fr,jE=!0);var t,n="https://api.twitch.tv/kraken/videos/followed?limit="+Fr+"&broadcast_type="+(lI?"highlight":"archive")+"&sort="+iI+"&offset="+e;if(lu){if(!(t=Android.mreadUrl(n,QE,3,Zr+Ni[yr.Users_Position].access_token)))return void pI();if(200===(t=JSON.parse(t)).status)return void vI(t.responseText);401===t.status||403===t.status?Ya(yr.Users_Position,0,mI,gI):pI()}else(t=new XMLHttpRequest).open("GET",n,!0),t.timeout=QE,t.setRequestHeader(Kr,Qr),t.setRequestHeader(Yr,Wr),t.setRequestHeader($r,Zr+Ni[yr.Users_Position].access_token),t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void vI(t.responseText);401===t.status||403===t.status?Ya(yr.Users_Position,0,mI,gI):pI()}},t.send(null)}function pI(){++$E<ZE?(QE+=500,hI()):gI()}function gI(){KE=!1,XE?(jE=!0,yI()):(lf=!1,Bu(),Hu(T))}function vI(e){var t=JSON.parse(e),n=t.videos.length;tI=parseInt(t._total),n<Fr&&(jE=!0);var a=XE;nI=!(XE+=n);var i=n/Dr;0<n%Dr&&i++;var o,s,d,c,l,r=0,u=document.getElementById("stream_table_user_vod");if(!sI){var _;for(sI=!0,d=document.createElement("tr"),f=0;f<2;f++)_=f?'<i class="icon-history stream_channel_fallow_icon"></i>'+ya+ya+xn:'<i class="icon-movie-play stream_channel_fallow_icon"></i>'+ya+ya+p,(Pr=document.createElement("td")).setAttribute("id",dI[8]+"y_"+f),Pr.className="stream_cell",Pr.innerHTML='<div id="'+dI[0]+"y_"+f+'" class="stream_thumbnail_channel_vod" ><div id="'+dI[3]+"y_"+f+'" class="stream_channel_fallow_game">'+_+"</div></div>",d.appendChild(Pr);u.appendChild(d)}for(var f=0;f<i;f++){for(s=a/Dr+f,d=document.createElement("tr"),o=0;o<Dr&&r<n;o++,r++)l=(c=t.videos[r])._id,-1!==(c.preview.template+"").indexOf("404_processing")||WE[l]?o--:(WE[l]=1,d.appendChild(sS(s,s+"_"+o,[l,c.length,c.language,c.game,c.channel.name,c.increment_view_count_url],[c.preview.template.replace("{width}x{height}",eu),c.channel.display_name,D+__(c.created_at),xS.parse(c.title)+oa+$t+g+c.game,$u(c.views)+V,Zu(c.resolutions.chunked.slice(-4),parseInt(c.fps.chunked)||0,c.language),R+Mp(c.length),c.animated_preview_url],dI)));for(;o<Dr;o++)jE&&!aI&&(aI=!0,XE=s*Dr+o),d.appendChild(k_(dI[9]+s+"_"+o)),YE.push(dI[9]+s+"_"+o);u.appendChild(d)}yI()}function yI(){cI?(p_(mu),Du(zE,qE,Dr,XE)):(nI?Hu(B+(lI?N:A)+O+S):(cI=!0,MI(),p_(mu),s_()),Eu(dI[10]),lf=!1,Bu()),0<YE.length&&!jE?bI():KE=!(YE=[])}function bI(){fI(),wI()}function wI(){Vu(YE.length);var e=XE+eI;e&&tI-1<e&&(e=tI-Xr,jE=!0);var t,n="https://api.twitch.tv/kraken/videos/followed?limit="+Xr+"&broadcast_type="+(lI?"highlight":"archive")+"&sort="+iI+"&offset="+e;if(lu){if(!(t=Android.mreadUrl(n,QE,3,Zr+Ni[yr.Users_Position].access_token)))return void kI();if(200===(t=JSON.parse(t)).status)return void CI(t.responseText);401===t.status||403===t.status?Ya(yr.Users_Position,0,mI,gI):kI()}else(t=new XMLHttpRequest).open("GET",n,!0),t.timeout=QE,t.setRequestHeader(Kr,Qr),t.setRequestHeader(Yr,Wr),t.setRequestHeader($r,Zr+Ni[yr.Users_Position].access_token),t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void CI(t.responseText);401===t.status||403===t.status?Ya(yr.Users_Position,0,mI,gI):kI()}},t.send(null)}function kI(){++$E<ZE?(QE+=500,wI()):(jE=!0,XE-=YE.length,YE=[],yI())}function CI(e){var t,n,a=JSON.parse(e),i=a.videos.length,o=0,s=0,d=[];for(tI=parseInt(a._total);o<YE.length&&s<i;o++,s++)n=(t=a.videos[s])._id,-1!==(t.preview.template+"").indexOf("404_processing")||WE[n]?o--:(WE[n]=1,cS(YE[o],[n,t.length,t.language,t.game,t.channel.name,t.increment_view_count_url],[t.preview.template.replace("{width}x{height}",eu),t.channel.display_name,D+__(t.created_at),xS.parse(t.title)+oa+$t+g+t.game,$u(t.views)+V,Zu(t.resolutions.chunked.slice(-4),parseInt(t.fps.chunked)||0,t.language),R+Mp(t.length),t.animated_preview_url],dI),d.push(o));for(o=d.length-1;-1<o;o--)YE.splice(d[o],1);eI+=s,jE&&(XE-=YE.length,YE=[]),yI()}function MI(){qE<0?II():(N_(qE,zE,dI,Dr,XE),vS(dI,qE+"_"+zE),XE/Dr<qE+Rr&&!jE&&!KE&&mI(),kr&&EI())}function EI(){window.clearInterval(LI),-1<qE&&XE?(Eu(dI[1]+qE+"_"+zE),q_(qE+"_"+zE,dI)):SI()}function II(){var e=1<zE?1:zE;Su(dI[0]+"y_"+e,nu)}function SI(){var e=1<zE?1:zE;Pu(dI[0]+"y_"+e,nu)}function PI(e){var t;if(!lf&&!G_())switch(O_(),e.keyCode){case Ta:ju()?zu():ju()?zu():Ku()?Yu():(EI(),uf(PI));break;case Ia:if(-1===qE)SI(),--zE<0&&(zE=1),II();else if(qE||zE){if(e_(qE,zE-1,dI[0]))EI(),zE--,MI();else for(t=Dr-1;-1<t;t--)if(e_(qE-1,t,dI[0])){EI(),qE--,zE=t,MI();break}}else EI(),SI(),qE=-1,zE=1,II();break;case Pa:-1===qE?(SI(),1<++zE?(zE=0,nI?II():(qE=0,MI())):II()):e_(qE,zE+1,dI[0])?(EI(),zE++,MI()):e_(qE+1,0,dI[0])&&(EI(),qE++,zE=0,MI());break;case Sa:if(-1!==qE||nI)if(qE){for(t=0;t<Dr;t++)if(e_(qE-1,zE-t,dI[0])){EI(),qE--,zE-=t,MI();break}}else EI(),qE=-1,II();else qE=0,SI(),MI();break;case xa:if(-1!==qE||nI){for(t=0;t<Dr;t++)if(e_(qE+1,zE-t,dI[0])){EI(),qE++,zE-=t,MI();break}}else qE=0,SI(),MI();break;case Ma:case Ca:case Ea:case La:-1===qE?(0===zE?gf("UserVod_highlight",(lI=!lI)?"true":"false"):1===oI?oI++:oI--,_I()):V_(qE+"_"+zE,dI,PI)}}function xI(){1===oI?(xu("top_bar_user",u+u_(Ni[yr.Users_Position].name+" "+(lI?N:A)+In)),iI="time"):2===oI&&(xu("top_bar_user",u+u_(Ni[yr.Users_Position].name+" "+(lI?N:A)+Sn)),iI="views"),gf("UserVod_TypeNumber",oI)}var LI,TI=0,BI=0,OI=!1,GI=0,AI={},NI=[],UI=!1,FI=0,DI=5,RI=3500,VI=0,HI=0,JI=!1,qI=!1,zI="week",jI=2,XI=!1,WI=["v_thumbdiv","v_img","v_infodiv","v_title","v_streamon","v_duration","v_viwers","v_quality","v_cell","vempty_","vod_scroll","v_game"],YI=!1,KI=!1,$I=1,ZI=new Image;function QI(){yr.Main_CenterLablesVectorPos=4,yr.Main_Go=_r,Su("top_bar_vod","icon_center_focus"),document.body.addEventListener("keydown",yS,!1),YI?(y_(TI),Eu(WI[10]),bS(),mS(),s_()):tS()}function eS(){YI&&hS(),l_(),document.body.removeEventListener("keydown",yS),Pu("top_bar_vod","icon_center_focus"),Lu("top_bar_vod",Qt),Mu(WI[10])}function tS(){YI&&hS(),h_("stream_table_vod"),Mu(WI[10]),Tu(),bS(),Ju(),XI=YI=!1,lf=!(qI=!(NI=[])),TI=BI=GI=HI=VI=0,OI=!(AI={}),Fu(),nS(),aS()}function nS(){g_(),UI=!0,FI=0,RI=3500}function aS(){var e=GI+VI;e&&HI-1<e&&(e=HI-Fr,OI=!0),Cf("https://api.twitch.tv/kraken/videos/top?limit="+Fr+"&broadcast_type="+(KI?"highlight":"archive")+"&sort=views&offset="+e+"&period="+zI+(""!==Lr?"&language="+Lr:""),RI,2,null,oS,iS)}function iS(){++FI<DI?(RI+=500,aS()):(UI=!1,GI?(OI=!0,rS()):(lf=!1,Bu(),Hu(T)))}function oS(e){var t=JSON.parse(e),n=t.vods.length;HI=parseInt(t._total),n<Fr&&(OI=!0);var a=GI;JI=!(GI+=n);var i=n/Dr;0<n%Dr&&i++;var o,s,d,c,l,r=0,u=document.getElementById("stream_table_vod");if(!XI){var _;for(XI=!0,d=document.createElement("tr"),f=0;f<2;f++)_=f?'<i class="icon-history stream_channel_fallow_icon"></i>'+ya+ya+m:'<i class="icon-movie-play stream_channel_fallow_icon"></i>'+ya+ya+p,(Pr=document.createElement("td")).setAttribute("id",WI[8]+"y_"+f),Pr.className="stream_cell",Pr.innerHTML='<div id="'+WI[0]+"y_"+f+'" class="stream_thumbnail_channel_vod" ><div id="'+WI[3]+"y_"+f+'" class="stream_channel_fallow_game">'+_+"</div></div>",d.appendChild(Pr);u.appendChild(d)}for(var f=0;f<i;f++){for(s=a/Dr+f,d=document.createElement("tr"),o=0;o<Dr&&r<n;o++,r++)l=(c=t.vods[r])._id,-1!==(c.preview.template+"").indexOf("404_processing")||AI[l]?o--:(AI[l]=1,d.appendChild(sS(s,s+"_"+o,[l,c.length,c.language,c.game,c.channel.name,c.increment_view_count_url],[c.preview.template.replace("{width}x{height}",eu),c.channel.display_name,D+__(c.created_at),xS.parse(c.title)+oa+$t+g+c.game,$u(c.views)+V,Zu(c.resolutions.chunked.slice(-4),parseInt(c.fps.chunked)||0,c.language),R+Mp(c.length),c.animated_preview_url],WI)));for(;o<Dr;o++)OI&&!qI&&(qI=!0,GI=s*Dr+o),d.appendChild(k_(WI[9]+s+"_"+o)),NI.push(WI[9]+s+"_"+o);u.appendChild(d)}rS()}function sS(e,t,n,a,i){return e<Dr&&w_(a[0]),dS(n,t,a,i)}function dS(e,t,n,a){return(Pr=document.createElement("td")).setAttribute("id",a[8]+t),Pr.setAttribute(au,JSON.stringify(e)),Pr.className="stream_cell",Pr.innerHTML=lS(t,n,a),Pr}function cS(e,t,n,a){var i=document.getElementById(e),o=e.split(a[9])[1];i.setAttribute(au,JSON.stringify(t)),i.innerHTML=lS(o,n,a),i.setAttribute("id",a[8]+o)}function lS(e,t,n){return v_(n[1]+e,t[0]),'<div id="'+n[0]+e+'" class="stream_thumbnail_video"'+(t[7]?' style="background-size: 0 0; background-image: url('+t[7]+');"':"")+'><img id="'+n[1]+e+'" class="stream_img"></div><div id="'+n[2]+e+'" class="stream_text"><div id="'+n[3]+e+'" class="stream_info" style="width: 72%; display: inline-block; font-size: 85%;">'+t[1]+'</div><div id="'+n[7]+e+'"class="stream_info" style="width:27%; float: right; text-align: right; display: inline-block;">'+t[5]+'</div><div><div id="'+n[4]+e+'"class="stream_info" style="width: 59%; display: inline-block;">'+t[2]+'</div><div id="'+n[5]+e+'"class="stream_info" style="width: 39%; display: inline-block; float: right; text-align: right;">'+t[6]+'</div></div><div id="'+n[11]+e+'"class="stream_info">'+t[3]+'</div><div id="'+n[6]+e+'"class="stream_info">'+t[4]+"</div></div>"}function rS(){if(YI?(p_(mu),Du(BI,TI,Dr,GI)):(JI?Hu(B+(KI?N:A)+O+S):(YI=!0,mS(),p_(mu),s_()),Eu(WI[10]),lf=!1,Bu()),0<NI.length&&!OI)return nS(),void uS();UI=!(NI=[])}function uS(){Vu(NI.length);var e=GI+VI;e&&HI-1<e&&(e=HI-Xr,OI=!0),Cf("https://api.twitch.tv/kraken/videos/top?limit="+Xr+"&broadcast_type="+(KI?"highlight":"archive")+"&sort=views&offset="+e+"&period="+zI+(""!==Lr?"&language="+Lr:""),RI,2,null,fS,_S)}function _S(){++FI<DI?(RI+=500,uS()):(OI=!0,GI-=NI.length,NI=[],rS())}function fS(e){var t,n,a=JSON.parse(e),i=a.vods.length,o=0,s=0,d=[];for(HI=parseInt(a._total);o<NI.length&&s<i;o++,s++)n=(t=a.vods[s])._id,-1!==(t.preview.template+"").indexOf("404_processing")||AI[n]?o--:(AI[n]=1,cS(NI[o],[n,t.length,t.language,t.game,t.channel.name,t.increment_view_count_url],[t.preview.template.replace("{width}x{height}",eu),t.channel.display_name,D+__(t.created_at),xS.parse(t.title)+oa+$t+g+t.game,$u(t.views)+V,Zu(t.resolutions.chunked.slice(-4),parseInt(t.fps.chunked)||0,t.language),R+Mp(t.length),t.animated_preview_url],WI),d.push(o));for(o=d.length-1;-1<o;o--)NI.splice(d[o],1);VI+=s,OI&&(GI-=NI.length,NI=[]),rS()}function mS(){TI<0?pS():(N_(TI,BI,WI,Dr,GI),vS(WI,TI+"_"+BI),GI/Dr<TI+Rr&&!OI&&!UI&&(nS(),aS()),kr&&hS())}function hS(){window.clearInterval(LI),-1<TI&&GI?(Eu(WI[1]+TI+"_"+BI),q_(TI+"_"+BI,WI)):gS()}function pS(){var e=1<BI?1:BI;Su(WI[0]+"y_"+e,nu)}function gS(){var e=1<BI?1:BI;Pu(WI[0]+"y_"+e,nu)}function vS(t,n){if($I){var a=document.getElementById(t[0]+n);ZI.onload=function(){Mu(t[1]+n),a.style.backgroundSize="612px";var e=0;LI=window.setInterval(function(){a.style.backgroundPosition="0px "+ ++e%10*-344+"px"},650)},ZI.src=a.style.backgroundImage.replace(/url\(['"]?(.*?)['"]?\)/i,"$1")}}function yS(e){var t;if(!lf&&!G_())switch(O_(),e.keyCode){case Ta:Ku()?Yu():ju()?zu():(hS(),uf(yS));break;case Ia:if(-1===TI)gS(),--BI<0&&(BI=1),pS();else if(TI||BI){if(e_(TI,BI-1,WI[0]))hS(),BI--,mS();else for(t=Dr-1;-1<t;t--)if(e_(TI-1,t,WI[0])){hS(),TI--,BI=t,mS();break}}else hS(),gS(),TI=-1,BI=1,pS();break;case Pa:-1===TI?(gS(),1<++BI?(BI=0,JI?pS():(TI=0,mS())):pS()):e_(TI,BI+1,WI[0])?(hS(),BI++,mS()):e_(TI+1,0,WI[0])&&(hS(),TI++,BI=0,mS());break;case Sa:if(-1!==TI||JI)if(TI){for(t=0;t<Dr;t++)if(e_(TI-1,BI-t,WI[0])){hS(),TI--,BI-=t,mS();break}}else hS(),TI=-1,pS();else TI=0,gS(),mS();break;case xa:if(-1!==TI||JI){for(t=0;t<Dr;t++)if(e_(TI+1,BI-t,WI[0])){hS(),TI++,BI-=t,mS();break}}else TI=0,gS(),mS();break;case Ma:case Ca:case Ea:case La:-1===TI?(0===BI?gf("Vod_highlight",(KI=!KI)?"true":"false"):4<++jI&&(jI=1),tS()):V_(TI+"_"+BI,WI,yS)}}function bS(){1===jI?(xu("top_bar_vod",Qt+u_((KI?N:A)+ce)),zI="day"):2===jI?(xu("top_bar_vod",Qt+u_((KI?N:A)+le)),zI="week"):3===jI?(xu("top_bar_vod",Qt+u_((KI?N:A)+re)),zI="month"):4===jI&&(xu("top_bar_vod",Qt+u_((KI?N:A)+ue)),zI="all"),gf("vod_periodNumber",jI)}function wS(e,t,n){if(n.restrictions){if(n.restrictions.channels&&n.restrictions.channels.length&&-1===n.restrictions.channels.indexOf(yr.Play_selectedChannel))return t;if(n.restrictions.games&&n.restrictions.games.length)return t}return t.replace(n.code,kS(n))}function kS(e){return'<img class="emoticon" src="'+e["1x"]+'" srcset="'+e["2x"]+" 2x, "+e["3x"]+' 4x" />'}function CS(e){return'<img class="emoticon" src="https://static-cdn.jtvnw.net/emoticons/v1/'+e+'/1.0" srcset="https://static-cdn.jtvnw.net/emoticons/v1/'+e+"/2.0 2x, https://static-cdn.jtvnw.net/emoticons/v1/"+e+'/3.0 4x" />'}function MS(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function ES(e,t){for(var n=t.split(" "),a=0;a<n.length;a++){var i=n[a],o=i.replace(/(^[~!@#$%\^&\*\(\)]+|[~!@#$%\^&\*\(\)]+$)/g,""),s=Mc[o]||Mc[i];i=s?wS(e,i,s):MS(i),n[a]=i}return n.join(" ")}function IS(t,a){if(!a)return[t];var n=[],e=Object.keys(a),i=[];return e.forEach(function(e){for(var t=a[e],n=t.length-1;0<=n;n--)i.push({id:e,first:t[n][0],last:t[n][1]})}),i.sort(function(e,t){return t.first-e.first}),t=punycode.ucs2.decode(t),i.forEach(function(e){n.unshift(punycode.ucs2.encode(t.slice(e.last+1))),n.unshift([CS(e.id)]),t=t.slice(0,e.first)}),n.unshift(punycode.ucs2.encode(t)),n}function SS(a){return Object.keys(a).map(function(n){var e=a[n];return e.type=n,e.versions=Object.keys(a[n].versions).map(function(e){var t=a[n].versions[e];return t.type=e,t}),e})}function PS(e,t,n,a){var i=document.createElement("style");i.type="text/css",i.innerHTML="."+e+"-"+t+' { background-image: url("'+n.replace("http:","https:")+'"); }',a?a.appendChild(i):document.head.appendChild(i)}window.parseIRC=function(e){var t={raw:e,tags:{},prefix:null,command:null,params:[]},n=0,a=0;if(64===e.charCodeAt(0)){if(-1===(a=e.indexOf(" ")))return null;for(var i=e.slice(1,a).split(";"),o=0;o<i.length;o++){var s=i[o].split("=");t.tags[s[0]]=s[1]||!0}n=a+1}for(;32===e.charCodeAt(n);)n++;if(58===e.charCodeAt(n)){if(-1===(a=e.indexOf(" ",n)))return null;for(t.prefix=e.slice(n+1,a),n=a+1;32===e.charCodeAt(n);)n++}if(-1===(a=e.indexOf(" ",n)))return e.length>n?(t.command=e.slice(n),t):null;for(t.command=e.slice(n,a),n=a+1;32===e.charCodeAt(n);)n++;for(;n<e.length;){if(a=e.indexOf(" ",n),58===e.charCodeAt(n)){t.params.push(e.slice(n+1));break}if(-1===a){if(-1===a){t.params.push(e.slice(n));break}}else for(t.params.push(e.slice(n,a)),n=a+1;32===e.charCodeAt(n);)n++}return t},function(e){var t="object"==typeof global&&global;t.global!==t&&t.window!==t&&t.self!==t||(e=t);var n,g=2147483647,v=36,y=26,i=38,o=700,a=/^xn--/,s=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,c={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},l=v-1,b=Math.floor,w=String.fromCharCode;function k(e){throw new RangeError(c[e])}function r(e,t){for(var n=e.length,a=[];n--;)a[n]=t(e[n]);return a}function u(e,t){var n=e.split("@"),a="";return 1<n.length&&(a=n[0]+"@",e=n[1]),a+r((e=e.replace(d,".")).split("."),t).join(".")}function C(e){for(var t,n,a=[],i=0,o=e.length;i<o;)55296<=(t=e.charCodeAt(i++))&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?a.push(((1023&t)<<10)+(1023&n)+65536):(a.push(t),i--):a.push(t);return a}function M(e){return r(e,function(e){var t="";return 65535<e&&(t+=w((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+w(e)}).join("")}function E(e,t){return e+22+75*(e<26)-((0!==t)<<5)}function I(e,t,n){var a=0;for(e=n?b(e/o):e>>1,e+=b(e/t);l*y>>1<e;a+=v)e=b(e/l);return b(a+(l+1)*e/(e+i))}function _(e){var t,n,a,i,o,s,d,c,l,r,u,_=[],f=e.length,m=0,h=128,p=72;for((n=e.lastIndexOf("-"))<0&&(n=0),a=0;a<n;++a)128<=e.charCodeAt(a)&&k("not-basic"),_.push(e.charCodeAt(a));for(i=0<n?n+1:0;i<f;){for(o=m,s=1,d=v;f<=i&&k("invalid-input"),u=e.charCodeAt(i++),(v<=(c=u-48<10?u-22:u-65<26?u-65:u-97<26?u-97:v)||c>b((g-m)/s))&&k("overflow"),m+=c*s,!(c<(l=d<=p?1:p+y<=d?y:d-p));d+=v)s>b(g/(r=v-l))&&k("overflow"),s*=r;p=I(m-o,t=_.length+1,0===o),b(m/t)>g-h&&k("overflow"),h+=b(m/t),m%=t,_.splice(m++,0,h)}return M(_)}function f(e){var t,n,a,i,o,s,d,c,l,r,u,_,f,m,h,p=[];for(_=(e=C(e)).length,t=128,o=72,s=n=0;s<_;++s)(u=e[s])<128&&p.push(w(u));for(a=i=p.length,i&&p.push("-");a<_;){for(d=g,s=0;s<_;++s)t<=(u=e[s])&&u<d&&(d=u);for(d-t>b((g-n)/(f=a+1))&&k("overflow"),n+=(d-t)*f,t=d,s=0;s<_;++s)if((u=e[s])<t&&++n>g&&k("overflow"),u===t){for(c=n,l=v;!(c<(r=l<=o?1:o+y<=l?y:l-o));l+=v)h=c-r,m=v-r,p.push(w(E(r+h%m,0))),c=b(h/m);p.push(w(E(c,0))),o=I(n,f,a===i),n=0,++a}++n,++t}return p.join("")}n={version:"1.4.1",ucs2:{decode:C,encode:M},decode:_,encode:f,toASCII:function(e){return u(e,function(e){return s.test(e)?"xn--"+f(e):e})},toUnicode:function(e){return u(e,function(e){return a.test(e)?_(e.slice(4).toLowerCase()):e})}},e.punycode=n}(this),function(e,t){e.ReconnectingWebSocket=function(){if("WebSocket"in window)return u.prototype.onopen=function(){},u.prototype.onclose=function(){},u.prototype.onconnecting=function(){},u.prototype.onmessage=function(){},u.prototype.onerror=function(){},u.debugAll=!1,u.CONNECTING=WebSocket.CONNECTING,u.OPEN=WebSocket.OPEN,u.CLOSING=WebSocket.CLOSING,u.CLOSED=WebSocket.CLOSED,u;function u(e,t,n){var a={debug:!1,automaticOpen:!0,reconnectInterval:1e3,maxReconnectInterval:3e4,reconnectDecay:1.5,timeoutInterval:3e3,maxReconnectAttempts:null,binaryType:"blob"};for(var i in n||(n={}),a)void 0!==n[i]?this[i]=n[i]:this[i]=a[i];this.url=e,this.reconnectAttempts=0,this.readyState=WebSocket.CONNECTING,this.protocol=null;var o,s=this,d=!1,c=!1,l=document.createElement("div");function r(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}l.addEventListener("open",function(e){s.onopen(e)}),l.addEventListener("close",function(e){s.onclose(e)}),l.addEventListener("connecting",function(e){s.onconnecting(e)}),l.addEventListener("message",function(e){s.onmessage(e)}),l.addEventListener("error",function(e){s.onerror(e)}),this.addEventListener=l.addEventListener.bind(l),this.removeEventListener=l.removeEventListener.bind(l),this.dispatchEvent=l.dispatchEvent.bind(l),this.open=function(a){if((o=new WebSocket(s.url,t||[])).binaryType=this.binaryType,a){if(this.maxReconnectAttempts&&this.reconnectAttempts>this.maxReconnectAttempts)return}else l.dispatchEvent(r("connecting")),this.reconnectAttempts=0;(s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","attempt-connect",s.url);var e=o,i=setTimeout(function(){(s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","connection-timeout",s.url),c=!0,e.close(),c=!1},s.timeoutInterval);o.onopen=function(){clearTimeout(i),(s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","onopen",s.url),s.protocol=o.protocol,s.readyState=WebSocket.OPEN,s.reconnectAttempts=0;var e=r("open");e.isReconnect=a,a=!1,l.dispatchEvent(e)},o.onclose=function(e){if(clearTimeout(i),o=null,d)s.readyState=WebSocket.CLOSED,l.dispatchEvent(r("close"));else{s.readyState=WebSocket.CONNECTING;var t=r("connecting");t.code=e.code,t.reason=e.reason,t.wasClean=e.wasClean,l.dispatchEvent(t),a||c||((s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","onclose",s.url),l.dispatchEvent(r("close")));var n=s.reconnectInterval*Math.pow(s.reconnectDecay,s.reconnectAttempts);setTimeout(function(){s.reconnectAttempts++,s.open(!0)},n>s.maxReconnectInterval?s.maxReconnectInterval:n)}},o.onmessage=function(e){(s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","onmessage",s.url,e.data);var t=r("message");t.data=e.data,l.dispatchEvent(t)},o.onerror=function(e){(s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","onerror",s.url,e),l.dispatchEvent(r("error"))}},!0===this.automaticOpen&&this.open(!1),this.send=function(e){if(o)return(s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","send",s.url,e),o.send(e);throw"INVALID_STATE_ERR : Pausing to reconnect websocket"},this.close=function(e,t){void 0===e&&(e=1e3),d=!0,o&&o.close(e,t)},this.refresh=function(){o&&o.close()}}}()}(this);var xS=function(){var e={parse:function(e,t,n){return t||(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;")),a(e,function(e){var t=function(e){for(var t=e.indexOf(d)<0?e.replace(s,""):e,n=[],a=0,i=0,o=0;o<t.length;)a=t.charCodeAt(o++),i?(n.push((65536+(i-55296<<10)+(a-56320)).toString(16)),i=0):55296<=a&&a<=56319?i=a:n.push(a.toString(16));return n.join("-")}(e);return t?'<img class="'+(n?"emoticon":"emoji")+'" src="https://twemoji.maxcdn.com/2/72x72/'+t+'.png"/>':e})},replace:a},n=/(?:\ud83d[\udc68\udc69])(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddb0-\uddb3])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f)|[\u0023\u002a\u0030-\u0039]\ufe0f?\u20e3|(?:[\u00a9\u00ae\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddb5\uddb6\uddb8\uddb9\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a-\udc6d\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\udeeb\udeec\udef4-\udef9]|\ud83e[\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd40-\udd45\udd47-\udd70\udd73-\udd76\udd7a\udd7c-\udda2\uddb4\uddb7\uddc0-\uddc2\uddd0\uddde-\uddff]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,s=/\uFE0F/g,d=String.fromCharCode(8205);return e;function a(e,t){return String(e).replace(n,t)}}();