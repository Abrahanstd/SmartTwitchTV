var t,n,a,e,i,o,s,d,r,c,p,m,l,u,_,f,v,h,g,y,b,w,k,C,M,E,S,I,x,P,T,L,B,O,G,A,N,U,F,R,H,D,q,V,J,z,X,j,W,Y,K,$,Z,Q,ee,te,ne,ae,ie,oe,se,de,re,ce,le,ue,_e,fe,me,he,pe,ve,ge,ye,be,we,ke,Ce,Me,Ee,Se,Ie,xe,Pe,Te,Le,Be,Oe,Ge,Ae,Ne,Ue,Fe,Re,He,De,qe,Ve,Je,ze,Xe,je,We,Ye,Ke,$e,Ze,Qe,et,tt,nt,at,it,ot,st,dt,rt,ct,lt,ut,_t,ft,mt,ht,pt,vt,gt,yt,bt,wt,kt,Ct,Mt,Et,St,It,xt,Pt,Tt,Lt,Bt,Ot,Gt,At,Nt,Ut,Ft,Rt,Ht,Dt,qt,Vt,Jt,zt,Xt,jt,Wt,Yt,Kt,$t,Zt,Qt,en,tn,nn,an,on,sn,dn,rn,cn,ln,un,_n,fn,mn,hn,pn,vn,gn,yn,bn,wn,kn,Cn,Mn,En,Sn,In,xn,Pn,Tn,Ln,Bn,On,Gn,An,Nn,Un,Fn,Rn,Hn,Dn,qn,Vn,Jn,zn,Xn,jn,Wn,Yn,Kn,$n,Zn,Qn,ea,ta,na,aa,ia="fglfgl27@gmail.com",oa="<br>",sa='<i class="icon-circle" style="font-size: 50%; vertical-align: middle; font-weight: bold;"></i>  ',da='<div class="about_text_title">',ra='<div class="about_text_title" style="text-align: left;">',ca='<div style="text-align: left;">',la="",ua="",_a="",fa="",ma="",ha="",pa="",va="",ga="",ya="&nbsp;",ba='<div style="vertical-align: middle; display: inline-block;"><i class="icon-twitch" style="color: #FFFFFF; font-size: 115%; "></i></div><div style="vertical-align: middle; display: inline-block">'+ya;function wa(){la=e+" (C)",ua=n+" (D)",fa=a+" (A)",_a=i+" (A)",r+=Zt,c+=Zt,ma=da+e+"</div>"+da+Ee+"</div>"+oa+ca+sa+Te+oa+sa+(Le+=Wt)+oa+sa+Be+oa+sa+Oe+oa+Ge+oa+sa+Ae+oa+ya+ya+ya+Ne+oa+sa+Ue+oa+"</div>"+oa+(va=da+Ce+"</div>"+ca+sa+at+oa+sa+et+oa+sa+tt+oa+"</div>"+ca+sa+nt+oa+sa+it+oa+sa+ot+oa+oa+da+Me+"</div>"+ca+sa+st+oa+sa+dt+oa+sa+rt+oa+sa+ct+oa+sa+lt)+oa+oa+da+ke+"</div>",ha=da+ba+we+"</div></div>",pa=ca+oa+Fe+oa+(Xc?oa+'<div style="display: inline-block; color: #FF0000; font-size: 110%; font-weight: bold;">'+$n+"</div>":"")+"</div>"+oa+da+Re+"</div>"+ia+oa+oa+He+oa+De+oa+oa+ra+qe+"</div>"+ca+Ke+oa+sa+Ve+oa+sa+Je+oa+sa+ze+oa+sa+Xe+oa+sa+je+oa+sa+We+oa+sa+Ye+oa+$e+oa+sa+Ze+oa+sa+Qe+oa+da+ke+"</div></div>",ga=ht+oa+sa+pt.replace("link_link",'<div style="display: inline-block; color: #FF0000; font-size: 110%; font-weight: bold;">http://tiny.cc/twitchkeycode</div>')+oa+sa+vt+oa+sa+gt+oa+sa+yt+oa+sa+bt}function ka(){Pl=!1,document.getElementById("side_panel").style.width="17%",t="Refresh:",n="Search",a="Settings",e="Controls",i="About",o="Hide",s="The text you entered is empty.",d="The search result is empty.",r="Switch screen",c="Switch user screen",p="Switch: Past Broadcast or Highlight",m="Switch: Period (24h, 7d, 30d, all)",l="Go to ",u="User ",_="Live",f="Games",v="Playing ",h=" for ",g="Watching time ",y="Since ",b=" ago",w="A Game",k="Type your search...",C="Type your authentication key...",M="Type your user name...",E="Press Enter or Select key to, ",S="Channels",I="Channel",x="Back to previously screen: Back key twice",P=" has ended",T="This video is only available to subscribers.",L="Connection failed, unable to load content hit refresh to try again",B="No",O=" for this ",G="Connection failed, unable to load video content exiting...",A=" Past Broadcast",N=" Highlight",U=" Clips",F=" Content",R="Streamed on ",H="Duration ",D=" Views",q=" Viewers",V="Click again to exit!",J="Do you wanna to exit Twitch?",z="Exit",X="Close",j="Minimize",W="Cancel",Y="Not Live | ",K=" Channels Live",$=" Hosts Live",Z=" Games Live",Q=" Followed Channels",ee=" Add User",te=" Remove User",ne="User doesn't exist",ae=" hosting ",ie=" already set",oe="Make First",se="First user can fallow (when providing a key) and see live channels feed outside of the user screen<br>",de="Add a Twitch user to display it's Followed Channels content here",re=" (24h)",ce=" (7d)",le=" (30d)",ue=" (all)",_e="Jumping",fe=" to ",me="Jump Canceled",he=" , jump time bigger then duration",pe=" Sec",ve=" Min",ge=" Hr",ye="Source",be="Version: ",we="SmartTV Twitch",ke="Press back key to close this.",Ce="Player Related:",Me="Chat Related:",Ee="General Related:",Se="Update",Ie="Current installed version ",xe=" latest available version ",Pe="This are the none players related controls, the player can show it's own controls.",Te="Play a video: Navigate using Directional pad (up/down/left/right), press enter to start playing",Le="Refresh screen content: ",Be="Exit the application: from side pannel click exit",Oe=" Switch screen: Back key then D-Pad left or right",Ge="Some screen will change its internal content (channel past broadcast or clips for example) instead of changing to another screen",Ae="Start a search: from side pannel click search",Ne="After writing the search text press key Enter on the virtual keyboard then choose a search option",Ue="About this application: from side pannel click about",Fe="This is a SmartTV Twitch client develop by a individual on his free time, for TV's that don't have access to a good official application, released for free to any one that wanna to use it.",$n="This version of the app is for test in a browser only!",Re="Developer information:",He="This is an open source application licensed under the GNU General Public License v3.0, check it on github",De="github.com/fgl27/SmartTwitchTV",qe="This application uses following dependencies:",Ve="Nightdev KapChat - KapChat captures Twitch chat directly into OBS or XSplit (https://www.nightdev.com/kapchat/)",Je="Fontastic - Create your customized icon fonts in seconds (http://app.fontastic.me)",ze="Twemoji - A simple library that provides standard Unicode emoji support across all platforms (https://github.com/twitter/twemoji)",Xe="UglifyJS - is a JavaScript parser, minifier, compressor and beautifier toolkit (https://github.com/mishoo/UglifyJS2)",je="JS Beautifier - Beautify, unpack or deobfuscate JavaScript and HTML, make JSON/JSONP readable, etc. (https://github.com/beautify-web/js-beautify)",We="HTMLMinifier - A highly configurable, well-tested, JavaScript-based HTML minifier (https://github.com/kangax/html-minifier)",Ye="JSHint - A Static Code Analysis Tool for JavaScript (https://github.com/jshint/jshint)",Ke="Web:",$e="Android:",Ze="Google: Leanback v17 (https://developer.android.com/reference/android/support/v17/leanback/package-summary)",Qe="Google: ExoPlayer (https://github.com/google/ExoPlayer)",et="Show information panel: Press enter key or D-pad keys if chat and live channel feed is not showing",tt="Close the video: press back key twice",nt="Play/Pause a video: open information panel and click on pause simbol (not available to Live streams)",at="Show user live channels feed: D-pad up",it="Change video quality: Open information panel, , navigate using use Directional pad (left/right), then use Directional pad (up/down) to choose the new quality after press Enter key to confirm the change",ot="Force refresh a video (in case it freezes): Change video quality to the same",st="Show or hide the Chat : D-pad right",dt="Change Chat position : D-pad left",rt="Change Chat size : D-pad down",ct="Change Chat background brightness: Change in side panel settings",lt="Force refresh the Chat (in case it freezes or doesn't load): Change video quality to the same will reset and sync it",ut='Start a search: open information panel, navigate using use Directional pad (left/right) to "Search" and press enter',_t="Chat and video (Side by side): Color button red (A)",ta="Force disable the chat",na="with this the chat will not load content, this is useful on a stream with too many viewers were the chat can lag the app.",ft="Update available, check google play store",mt='Adding a key allows the app to fallow and access subscribed only past broadcast (for channel you are Sub to and block VOD access to none subscribers). On the authentication page if you already added a key for another user, you need to click up two to tree time and click over "not you?" to authenticate for a different users <br> <br> add key for',ht=" below, fallowing this steps:",pt="Access the site link_link (using a computer or a smart phone)",vt='Click on the "Authorize" button it will take you to main Twitch.TV authentication site',gt="Login to Twitch.TV using the user name you are trying to add a key for",yt="Click on Authorize button of Twitch.TV site if you agree with the requested permissions",bt="The web page will update and show a key code, the key only has lower case letters and nubers.",wt=" Add Authentication key",kt="Key added OK",Ct="Key test fail, it's needed to add new one",Mt="Key test return OK",Et="You try to add a key for user ",St=" but this key is for user ",It=" Following",xt=" Follow",Pt=" And you have not set a authentication key the app can't check yours sub status.",Tt=" And you are not a sub of this channel",Lt=" You are a sub of this channel but the app fail to authenticate contact the developer email in about",Bt="Fail authentication check with the provider key, please check and try again",Nn="The added key doesn't belong to the user ",Ot="No user",Gt="Set a user and a authentication key to be able to fallow/unfollow",At="Restart the",Nt=" Clip",Ut="Channel content",Ft="Network is disconnect, the application can't work without INTERNET",Rt="Network connection reestablished",Ht=" Followers",Dt=", Can't fallow or unfallow ",qt="Game content",Vt="Yes",Jt="Are you sure you want to remove the user ",zt="Press Up to ",Xt="Followed Games",jt="Change between",Wt=" Back key then Enter",Yt=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"],Kt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],$t="Started ",Zt=" (PG Up/Down)",Qt="Videos",en=" Video",tn="Replay",nn="exiting in ",an='press "Return" to exit',on="Featured",sn="Created at ",dn="Open the Broadcast",rn="No Broadcast",cn="There is no Past Broadcast for this clip",ln="And because of that no chat",un=" is now",_n="Open the Hosting",fn="Player related",mn="Buffer size:",hn="A lower value here will make the player to start playing sooner, but it may cause re-buffer with will cause the player to pause to buffer.",pn="Live streams buffer",vn="Videos (Past Broadcast and Highlight) buffer",gn="Clips buffer",yn="General related",bn="Language",wn="Chat: Connecting to chat server..."+oa+"Chat: Connected."+oa+"Chat: Joined channel ",kn="Play from the start or from where you stop watching last time?",Mn=(Cn="From:"+oa)+"Start",En="Chat: The Chat has ended!",Sn=": Most recent",In=": Most views",xn="Set a authentication key to be able to see fallowed videos",Pn="Switch: Most recent or views",Tn="Enable",Ln="Disable",zn="The app was closed willing playing, restoring playback",Bn="Restore playback",On="When changing apps, the app may be closed by the system to free memory. In this case the app saves what it was playing and restores the playback when reopened",Gn="Chat font size",An="Change the chat lines font size, applies to text and emotes",Un="Videos animated thumbnails",Fn="Side panel: Back key twice",Rn="Size ",Hn="Brightness ",Dn="Forbidden content, this Live must be for Prime only subscribers or lock to Twitch official app only",qn="Jump step ",Vn=" seconds",Jn=" minutes",Xn="Clock offset",jn="Application language",Wn="Content language",Yn="All",Kn="Empty game fro this",Zn="Isn't possible to jump during a buffering",Qn="Chat is disabled, enable in side pannel settings",ea="This clip/video fail to load can't replay",aa="Chat backgroung brightness "}var Ca=51,Ma=52,Ea=179,Sa=37,Ia=38,xa=39,Pa=40,Ta=13,La=49,Ba=8,Oa=13,Ga=32,Aa=46,Na=0,Ua=5,Fa=1e4,Ra=0,Ha=!1,Da=!1,qa=!1,Va=!1,Ja="",za="https://fgl27.github.io/SmartTwitchTV/release/index.min.html",Xa="elsu5d09k0xomu7cggx3qg5ybdwu7g",ja="https://id.twitch.tv/oauth2/token?";function Wa(e){yl.Users_Position=yl.Users_AddcodePosition,Ra=e,vi(),Lu(),Za()}function Ya(e,t,n,a){var i=new XMLHttpRequest,o=ja+"grant_type=refresh_token&client_id="+encodeURIComponent(Wl)+"&client_secret="+encodeURIComponent(Xa)+"&refresh_token="+encodeURIComponent(Ni[e].refresh_token)+"&redirect_uri="+za;i.open("POST",o,!0),i.timeout=Fa,i.ontimeout=function(){},i.onreadystatechange=function(){4!==i.readyState||(200===i.status?$a(i.responseText,e,n):Ka(e,t,n,a))},i.send(null)}function Ka(e,t,n,a){++t<10?Ya(e,t,n):a&&a()}function $a(e,t,n){var a=JSON.parse(e);Ni[t].access_token=a.access_token,Ni[t].refresh_token=a.refresh_token,to(),n&&n()}function Za(){var e=new XMLHttpRequest,t=ja+"grant_type=authorization_code&client_id="+encodeURIComponent(Wl)+"&client_secret="+encodeURIComponent(Xa)+"&code="+encodeURIComponent(Ra)+"&redirect_uri="+za;e.open("POST",t,!0),e.timeout=Fa,e.ontimeout=function(){},e.onreadystatechange=function(){4!==e.readyState||(200===e.status?ti(e.responseText):Qa())},e.send(null)}function Qa(){++Na<Ua?Za():ei()}function ei(){Bu(),qu(Bt),window.setTimeout(function(){Vu(),Ml=0,s_(),yl.Main_Go=cl,window.location=za},4e3),Ni[yl.Users_Position].access_token=0,Ni[yl.Users_Position].refresh_token=0}function ti(e){var t=JSON.parse(e);Ni[yl.Users_Position].access_token=t.access_token,Ni[yl.Users_Position].refresh_token=t.refresh_token,vi(),ni()}function ni(){Cf("https://api.twitch.tv/kraken?oauth_token="+Ni[yl.Users_Position].access_token,Fa,0,null,ai,ii)}function ai(e){var t=JSON.parse(e).token;t.user_name&&-1!==t.user_name.indexOf(Ni[yl.Users_Position].name)?(to(),Ml=0,Bu(),Ha=kE=!1,yl.Main_Go=cl,s_(),qu(kt),window.setTimeout(function(){window.location=za},3e3)):(Ni[yl.Users_Position].access_token=0,Ni[yl.Users_Position].refresh_token=0,Ha=!1,qu(Nn+Ni[yl.Users_Position].name),window.setTimeout(function(){Vu(),Ml=0,s_(),yl.Main_Go=cl,window.location=za},4e3))}function ii(){++Na<Ua?(Fa+=500,ni()):ei()}function oi(){vi(),Da=!1,si()}function si(){var e="https://api.twitch.tv/kraken/users/"+Ni[yl.Users_Position].id+"/follows/channels/"+Ja,t=new XMLHttpRequest;t.open("GET",e,!0),t.timeout=Fa,t.setRequestHeader(Yl,Wl),t.setRequestHeader(Kl,Ql),t.ontimeout=function(){},t.onreadystatechange=function(){4===t.readyState&&(200===t.status?di():404===t.status?ri(t.responseText):ci())},t.send(null)}function di(){Ha=!(Da=!0),Va?Nv():hd()}function ri(e){-1!==(JSON.parse(e).error+"").indexOf("Not Found")?(Ha=Da=!1,Va?Nv():hd()):ci()}function ci(){++Na<Ua?(Fa+=500,si()):(Ha=!1,Va?Nv():hd())}function li(){vi(),ui()}function ui(){var e=new XMLHttpRequest;e.open("PUT","https://api.twitch.tv/kraken/users/"+Ni[yl.Users_Position].id+"/follows/channels/"+Ja,!0),e.timeout=Fa,e.setRequestHeader(Yl,Wl),e.setRequestHeader(Kl,Ql),e.setRequestHeader("Authorization","OAuth "+Ni[yl.Users_Position].access_token),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return Da=!(Ha=!1),void(Va?Nv():hd());401===e.status||403===e.status?Ya(yl.Users_Position,0,li,null):_i()}},e.send(null)}function _i(){++Na<Ua&&(Fa+=500,ui())}function fi(){vi(),mi()}function mi(){var e=new XMLHttpRequest;e.open("DELETE","https://api.twitch.tv/kraken/users/"+Ni[yl.Users_Position].id+"/follows/channels/"+Ja,!0),e.timeout=Fa,e.setRequestHeader(Yl,Wl),e.setRequestHeader(Kl,Ql),e.setRequestHeader("Authorization","OAuth "+Ni[yl.Users_Position].access_token),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(204===e.status)return Ha=Da=!1,void(Va?Nv():hd());401===e.status||403===e.status?Ya(yl.Users_Position,0,fi,null):hi()}},e.send(null)}function hi(){++Na<Ua&&(Fa+=500,mi())}function pi(){vi(),qa=!1,gi()}function vi(){Fa=1e4,Ha=!(Na=0)}function gi(){var e,t="https://api.twitch.tv/kraken/users/"+Ni[yl.Users_Position].id+"/subscriptions/"+Ja;if(cu){if(!(e=Android.mreadUrl(t,Fa,3,Ni[yl.Users_Position].access_token)))return void yi();if(200===(e=JSON.parse(e)).status)Ha=!(qa=!0),Wg();else if(422===e.status)Ha=qa=!1,jg();else if(404===e.status){if(-1!==(JSON.parse(e.responseText).error+"").indexOf("Not Found"))return Ha=qa=!1,void jg();yi()}else 401===e.status||403===e.status?Ya(yl.Users_Position,0,pi,bi):yi()}else(e=new XMLHttpRequest).open("GET",t,!0),e.timeout=Fa,e.setRequestHeader(Yl,Wl),e.setRequestHeader(Kl,Ql),e.setRequestHeader("Authorization","OAuth "+Ni[yl.Users_Position].access_token),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState)if(200===e.status)Ha=!(qa=!0),Wg();else if(422===e.status)Ha=qa=!1,jg();else if(404===e.status){if(-1!==(JSON.parse(e.responseText).error+"").indexOf("Not Found"))return Ha=qa=!1,void jg();yi()}else 401===e.status||403===e.status?Ya(yl.Users_Position,0,pi,bi):yi()},e.send(null)}function yi(){++Na<Ua?(Fa+=500,gi()):bi()}function bi(){Ha=qa=!1,jg()}function wi(e){vi(),ki(e,0)}function ki(e,t){var n="https://api.twitch.tv/kraken?oauth_token="+Ni[e].access_token,a=new XMLHttpRequest;a.open("GET",n,!0),a.timeout=1e4,a.ontimeout=function(){},a.onreadystatechange=function(){if(4===a.readyState){if(200===a.status)return void(JSON.parse(a.responseText).token.valid?Ha=!1:(vi(),Ya(e,0,null,null)));400===a.status?(vi(),Ya(e,0,null,null)):Ci(e,t)}},a.send(null)}function Ci(e,t){++t<Ua&&ki(e,t)}function Mi(){vi(),Ei()}function Ei(){var e=new XMLHttpRequest;e.open("PUT","https://api.twitch.tv/api/users/"+Ni[yl.Users_Position].name+"/follows/games/"+encodeURIComponent(yl.Main_gameSelected)+"?oauth_token="+Ni[yl.Users_Position].access_token,!0),e.timeout=1e4,e.setRequestHeader(Yl,Wl),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return ko=!0,void Go();401===e.status||403===e.status?Ya(yl.Users_Position,0,Mi,null):Si()}},e.send(null)}function Si(){++Na<Ua&&(Fa+=500,Ei())}function Ii(){vi(),xi()}function xi(){var e=new XMLHttpRequest;e.open("DELETE","https://api.twitch.tv/api/users/"+Ni[yl.Users_Position].name+"/follows/games/"+encodeURIComponent(yl.Main_gameSelected)+"?oauth_token="+Ni[yl.Users_Position].access_token,!0),e.timeout=1e4,e.setRequestHeader(Yl,Wl),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(204===e.status)return ko=!1,void Go();401===e.status||403===e.status?Ya(yl.Users_Position,0,Ii,null):Pi()}},e.send(null)}function Pi(){++Na<Ua&&(Fa+=500,xi())}function Ti(){vi(),Li()}function Li(){var e,t="https://api.twitch.tv/api/users/"+Ni[yl.Users_Position].name+"/follows/games/"+encodeURIComponent(yl.Main_gameSelected);(e=new XMLHttpRequest).open("GET",t,!0),e.timeout=1e4,e.setRequestHeader(Yl,Wl),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState)return 200===e.status?(ko=!0,void Go()):404===e.status?(ko=!1,void Go()):void Bi()},e.send(null)}function Bi(){++Na<Ua?(Fa+=500,Li()):(ko=!1,Go())}var Oi=0,Gi=5,Ai=3500,Ni=[],Ui=null,Fi=!1,Ri=!1;function Hi(){yl.Main_Go=$c,Iu("top_bar_user","icon_center_focus"),Vu(),Hc.placeholder=M,Eu("add_user_scroll"),Vi()}function Di(){zi(!1),document.body.removeEventListener("keydown",qi),document.body.removeEventListener("keydown",Xi),xu("top_bar_user","icon_center_focus"),Mu("add_user_scroll")}function qi(e){if(!Fi&&!Ri&&yl.Main_Go===$c)switch(e.keyCode){case La:Xu()?zu():Ku()?Yu():(0<Ni.length&&yl.Main_Go!==cl?yl.Main_Go=yl.Main_Before:yl.Main_Go=Kc,Di(),i_());break;case Ma:case Ca:case Ea:case Ta:Vi()}}function Vi(){document.body.removeEventListener("keydown",qi),document.body.addEventListener("keydown",Xi,!1),Hc.placeholder=M,Hc.focus(),Ri=!0}function Ji(){if(null!==Hc){var e=Hc.cloneNode(!0);Hc.parentNode.replaceChild(e,Hc),Hc=document.getElementById("user_input")}}function zi(e){Hc.blur(),Ji(),document.body.removeEventListener("keydown",Xi),Hc.placeholder=E+M,e&&document.body.addEventListener("keydown",qi,!1),Ri=!1}function Xi(e){if(!Fi&&yl.Main_Go===$c)switch(e.keyCode){case La:Xu()?zu():Ku()?Yu():(0<Ni.length&&yl.Main_Go!==cl?yl.Main_Go=yl.Main_Before:yl.Main_Go=Kc,Di(),i_());break;case Aa:Hc.value="";break;case Oa:case Pa:""!==Hc.value&&null!==Hc.value?ao(Ui=Xc&&!Zi()?"testtwitch27":Hc.value)?(Bu(),qu(u+Ui+ie),window.setTimeout(function(){Vu(),Vi()},1500)):(Ai=3500,Fi=!(Oi=0),Mu("add_user_scroll"),Lu(),ji()):Vi();break;case Ba:Hc.value=Hc.value.slice(0,-1);break;case Ga:Hc.value+=" "}}function ji(){Cf("https://api.twitch.tv/kraken/users?login="+encodeURIComponent(Ui),Ai,2,null,Wi,Yi)}function Wi(e){JSON.parse(e)._total?(Hc.value="",document.body.removeEventListener("keydown",qi),Qi(e)):Ki()}function Yi(){++Oi<Gi?(Ai+=500,ji()):Ki()}function Ki(){Ui=null,Bu(),qu(ne),window.setTimeout(function(){Hi()},1e3),Fi=!1}function $i(){if(0<(Ni=yf("AddUser_UsernameArray",[])).length)for(var e=0;e<Ni.length;e++)Ni[e].access_token&&wi(e)}function Zi(){return 0<Ni.length}function Qi(e){Ui=JSON.parse(e).users[0],Ni.push({name:Ui.name,id:Ui._id,access_token:0,refresh_token:0}),to(),kE=!1,Di(),ME(),Fi=!1}function eo(e){var t=Ni.indexOf(Ni[e]);-1<t&&Ni.splice(t,1),0<Ni.length?(kE=!1,ME()):Hi(),to()}function to(){vf("AddUser_UsernameArray",JSON.stringify(Ni))}function no(e){Ui=Ni[0],Ni[0]=Ni[e],Ni[e]=Ui,kE=!1,ME(),to()}function ao(e){return-1!==Ni.indexOf(e)}function io(){return 0<Ni.length}var oo=0,so=0,ro=!1,co=0,lo={},uo=[],_o=!1,fo=0,mo=5,ho=3500,po=0,vo=0,go=!1,yo=["ag_thumbdiv","ag_img","ag_infodiv","ag_displayname","ag_streamtitle","ag_streamgame","ag_viwers","ag_quality","ag_cell","agempty_","a_games_scroll"],bo=!1,wo=!1,ko=!1,Co=!1,Mo=!1;function Eo(){yl.Main_CenterLablesVectorPos=3,yl.Main_Go=Qc,document.body.addEventListener("keydown",zo,!1),Iu("top_bar_game","icon_center_focus"),Cu("label_side_panel","icon-arrow-circle-left",x),yl.Search_isSearching&&(l_(),Pu("top_bar_user",n+u_(f+" '"+yl.Search_data+"'"))),Pu("top_bar_game",w+u_(_+": "+yl.Main_gameSelected)),yl.Main_OldgameSelected===yl.Main_gameSelected&&bo?(y_(oo),Eu(yo[10]),Do(),s_()):Io()}function So(){bo&&-1===oo&&(Jo(),so=oo=0,Iu(yo[0]+"0_"+so,nu)),Cu("label_side_panel","icon-ellipsis",Fn),Pu("top_bar_game",f),document.body.removeEventListener("keydown",zo),xu("top_bar_game","icon_center_focus"),Mu(yo[10])}function Io(){null===yl.Main_OldgameSelected&&(yl.Main_OldgameSelected=yl.Main_gameSelected),h_("stream_table_a_game"),Mu(yo[10]),Lu(),Vu(),Mo=bo=!1,lo={},cf=!(co=vo=po=0),oo=so=0,ro=wo=!(uo=[]),Fu(),xo(),Po()}function xo(){v_(),_o=!0,fo=0,ho=3500}function Po(){var e=co+po;e&&vo-1<e&&(e=vo-Fl,ro=!0),Cf("https://api.twitch.tv/kraken/streams?game="+encodeURIComponent(yl.Main_gameSelected)+"&limit="+Fl+"&offset="+e+(""!==Tl?"&language="+Tl:""),ho,2,null,Lo,To)}function To(){++fo<mo?(ho+=500,Po()):(_o=!1,co?(ro=!0,Bo()):(cf=!1,Bu(),qu(L)))}function Lo(e){var t=JSON.parse(e),n=t.streams.length;vo=parseInt(t._total),n<Fl&&(ro=!0);var a=co;go=!(co+=n);var i=n/Rl;0<n%Rl&&i++;var o,s,d,r,c,l,u=0,_=document.getElementById("stream_table_a_game");if(!Mo){var f;for(Mo=!0,d=document.createElement("tr"),r=0;r<3;r++)f=r?1===r?'<i class="icon-movie stream_channel_fallow_icon"></i>'+ya+U:"":'<i class="icon-movie-play stream_channel_fallow_icon"></i>'+ya+ya+Qt,(xl=document.createElement("td")).setAttribute("id",yo[8]+"y_"+r),xl.className="stream_cell",xl.innerHTML='<div id="'+yo[0]+"y_"+r+'" class="stream_thumbnail_fallow_game" ><div id="'+yo[3]+"y_"+r+'" class="stream_channel_fallow_game">'+f+"</div></div>",d.appendChild(xl);_.appendChild(d)}for(r=0;r<i;r++){for(s=a/Rl+r,d=document.createElement("tr"),o=0;o<Rl&&u<n;o++,u++)l=(c=t.streams[u]).channel._id,lo[l]?o--:(lo[l]=1,d.appendChild(S_(s,s+"_"+o,[c.channel.name,l],yo,[c.preview.template.replace("{width}x{height}",eu),Qu(JSON.stringify(c.stream_type))+c.channel.display_name,c.channel.status,c.game,y+Mp(c.created_at)+b+", "+h+$u(c.viewers)+q,Zu(c.video_height,c.average_fps,c.channel.language)])));for(;o<Rl;o++)ro&&!wo&&(wo=!0,co=s*Rl+o),d.appendChild(k_(yo[9]+s+"_"+o)),uo.push(yo[9]+s+"_"+o);_.appendChild(d)}Bo()}function Bo(){if(bo){if(p_(mu),0<uo.length&&!ro)return xo(),void Fo();Ru(so,oo,Rl,co),uo=[]}else Oo(),go?(qu(B+Z),oo=-1,Vo()):(bo=!0,p_(mu),Do(),s_()),Eu(yo[10]),cf=!1,Bu();_o=!1}function Oo(){Co?(ko=!0,Go()):Zi()?Ti():(ko=!1,Go())}function Go(){Pu(yo[3]+"y_2",ko?'<i class="icon-heart" style="color: #00b300; font-size: 100%; text-shadow: #FFFFFF 0 0 10px, #FFFFFF 0 0 10px, #FFFFFF 0 0 8px;"></i>'+ya+ya+It:'<i class="icon-heart-o" style="color: #FFFFFF; font-size: 100%; text-shadow: #000000 0 0 10px, #000000 0 0 10px, #000000 0 0 8px;"></i>'+ya+ya+(Zi()?xt:Ot))}function Ao(){Zi()&&Ni[yl.Users_Position].access_token?ko?Ii():Mi():(qu(Gt),window.setTimeout(function(){go&&yl.Main_Go===Qc?qu(B+Z):Vu()},2e3))}function No(){so?1===so?(yl.Main_Go=hl,yl.Main_OldgameSelected=yl.Main_gameSelected,Uo(),o_()):Ao():(yl.Main_Go=ml,yl.Main_OldgameSelected=yl.Main_gameSelected,Uo(),o_())}function Uo(){bo&&-1===oo&&(Jo(),so=oo=0,Iu(yo[0]+"0_"+so,nu)),document.body.removeEventListener("keydown",zo),Mu(yo[10])}function Fo(){Du(uo.length);var e=co+po;e&&vo-1<e&&(e=vo-jl,ro=!0),Cf("https://api.twitch.tv/kraken/streams?game="+encodeURIComponent(yl.Main_gameSelected)+"&limit="+jl+"&offset="+e+(""!==Tl?"&language="+Tl:""),ho,2,null,Ho,Ro)}function Ro(){++fo<mo?(ho+=500,Fo()):(ro=!0,co-=uo.length,uo=[],Bo())}function Ho(e){var t,n,a=JSON.parse(e),i=a.streams.length,o=0,s=0,d=[];for(vo=parseInt(a._total),i<jl&&(ro=!0);o<uo.length&&s<i;o++,s++)n=(t=a.streams[s]).channel._id,lo[n]?o--:(lo[n]=1,I_(uo[o],[t.channel.name,n],[t.preview.template.replace("{width}x{height}",eu),Qu(JSON.stringify(t.stream_type))+t.channel.display_name,t.channel.status,t.game,y+Mp(t.created_at)+b+", "+h+$u(t.viewers)+q,Zu(t.video_height,t.average_fps,t.channel.language)],yo),d.push(o));for(o=d.length-1;-1<o;o--)uo.splice(d[o],1);po+=s,ro&&(co-=uo.length,uo=[]),Bo()}function Do(){oo<0?Vo():(N_(oo,so,yo,Rl,co),co/Rl<oo+Hl&&!ro&&!_o&&(xo(),Po()),kl&&qo())}function qo(){-1<oo&&co?J_(oo+"_"+so,yo):Jo()}function Vo(){Iu(yo[0]+"y_"+so,nu)}function Jo(){xu(yo[0]+"y_"+so,nu)}function zo(e){var t;if(!cf&&!G_())switch(O_(),e.keyCode){case La:Ku()?Yu():Xu()?zu():(yl.Main_OldgameSelected=yl.Main_gameSelected,qo(),Jo(),uf(zo));break;case Sa:if(-1===oo)Jo(),--so<0&&(so=2),Vo();else if(oo||so){if(e_(oo,so-1,yo[0]))qo(),so--,Do();else for(t=Rl-1;-1<t;t--)if(e_(oo-1,t,yo[0])){qo(),oo--,so=t,Do();break}}else qo(),Jo(),oo=-1,so=2,Vo();break;case xa:-1===oo?(Jo(),2<++so?(so=0,go?Vo():(oo=0,Do())):Vo()):e_(oo,so+1,yo[0])?(qo(),so++,Do()):e_(oo+1,0,yo[0])&&(qo(),oo++,so=0,Do());break;case Ia:if(-1!==oo||go)if(oo){for(t=0;t<Rl;t++)if(e_(oo-1,so-t,yo[0])){qo(),oo--,so-=t,Do();break}}else qo(),oo=-1,Vo();else oo=0,Jo(),Do();break;case Pa:if(-1!==oo||go){for(t=0;t<Rl;t++)if(e_(oo+1,so-t,yo[0])){qo(),oo++,so-=t,Do();break}}else oo=0,Jo(),Do();break;case Ma:case Ca:case Ea:case Ta:-1!==oo?F_(oo+"_"+so,yo,zo):No()}}var Xo=0,jo=0,Wo=!1,Yo=0,Ko={},$o=[],Zo=!1,Qo=0,es=5,ts=3500,ns=0,as=0,is=!1,os=!1,ss="week",ds=2,rs=!1,cs=["agv_thumbdiv","agv_img","agv_infodiv","agv_title","agv_streamon","agv_duration","agv_viwers","agv_quality","agv_cell","gvempty_","a_games_vod_scroll","agv_game"],ls=!1,us=!1,_s="";function fs(){yl.Main_CenterLablesVectorPos=3,yl.Main_Go=ml,Iu("top_bar_game","icon_center_focus"),document.body.addEventListener("keydown",xs,!1),Cu("label_side_panel","icon-arrow-circle-left",x),_s===yl.Main_gameSelected&&ls?(y_(Xo),Eu(cs[10]),Ps(),Ms(),s_()):hs()}function ms(){ls&&Es(),document.body.removeEventListener("keydown",xs),xu("top_bar_game","icon_center_focus"),Pu("top_bar_game",f),Cu("label_side_panel","icon-ellipsis",Fn),Mu(cs[10])}function hs(){ls&&Es(),h_("stream_table_a_game_vod"),Mu(cs[10]),Lu(),Ps(),_s=yl.Main_gameSelected,Vu(),rs=ls=!1,cf=!(os=!($o=[])),Xo=jo=Yo=as=ns=0,Wo=!(Ko={}),Fu(),ps(),vs()}function ps(){v_(),Zo=!0,Qo=0,ts=3500}function vs(){var e=Yo+ns;e&&as-1<e&&(e=as-Fl,Wo=!0),Cf("https://api.twitch.tv/kraken/videos/top?game="+encodeURIComponent(yl.Main_gameSelected)+"&limit="+Fl+"&broadcast_type="+(us?"highlight":"archive")+"&sort=views&offset="+e+"&period="+ss+(""!==Tl?"&language="+Tl:""),ts,2,null,ys,gs)}function gs(){++Qo<es?(ts+=500,vs()):(Zo=!1,Yo?(Wo=!0,bs()):(cf=!1,Bu(),qu(L)))}function ys(e){var t=JSON.parse(e),n=t.vods.length;as=parseInt(t._total),n<Fl&&(Wo=!0);var a=Yo;is=!(Yo+=n);var i=n/Rl;0<n%Rl&&i++;var o,s,d,r,c,l=0,u=document.getElementById("stream_table_a_game_vod");if(!rs){var _;for(rs=!0,d=document.createElement("tr"),f=0;f<2;f++)_=f?'<i class="icon-history stream_channel_fallow_icon"></i>'+ya+ya+m:'<i class="icon-movie-play stream_channel_fallow_icon"></i>'+ya+ya+p,(xl=document.createElement("td")).setAttribute("id",cs[8]+"y_"+f),xl.className="stream_cell",xl.innerHTML='<div id="'+cs[0]+"y_"+f+'" class="stream_thumbnail_channel_vod" ><div id="'+cs[3]+"y_"+f+'" class="stream_channel_fallow_game">'+_+"</div></div>",d.appendChild(xl);u.appendChild(d)}for(var f=0;f<i;f++){for(s=a/Rl+f,d=document.createElement("tr"),o=0;o<Rl&&l<n;o++,l++)c=(r=t.vods[l])._id,-1!==(r.preview.template+"").indexOf("404_processing")||Ko[c]?o--:(Ko[c]=1,d.appendChild(aI(s,s+"_"+o,[c,r.length,r.language,r.game,r.channel.name,r.increment_view_count_url],[r.preview.template.replace("{width}x{height}",eu),r.channel.display_name,R+__(r.created_at),SI.parse(r.title)+oa+$t+v+r.game,$u(r.views)+D,Zu(r.resolutions.chunked.slice(-4),parseInt(r.fps.chunked)||0,r.language),H+kp(r.length),r.animated_preview_url],cs)));for(;o<Rl;o++)Wo&&!os&&(os=!0,Yo=s*Rl+o),d.appendChild(k_(cs[9]+s+"_"+o)),$o.push(cs[9]+s+"_"+o);u.appendChild(d)}bs()}function bs(){if(ls?p_(mu):(is?qu(B+(us?N:A)+O+I):(ls=!0,p_(mu),Ms(),s_()),Eu(cs[10]),cf=!1,Bu()),0<$o.length&&!Wo)return ps(),void ws();Ru(jo,Xo,Rl,Yo),Zo=!($o=[])}function ws(){Du($o.length);var e=Yo+ns;e&&as-1<e&&(e=as-jl,Wo=!0),Cf("https://api.twitch.tv/kraken/videos/top?game="+encodeURIComponent(yl.Main_gameSelected)+"&limit="+jl+"&broadcast_type="+(us?"highlight":"archive")+"&sort=views&offset="+e+"&period="+ss+(""!==Tl?"&language="+Tl:""),ts,2,null,Cs,ks)}function ks(){++Qo<es?(ts+=500,ws()):(Wo=!0,$o=[],bs())}function Cs(e){var t,n,a=JSON.parse(e),i=a.vods.length,o=0,s=0,d=[];for(as=parseInt(a._total);o<$o.length&&s<i;o++,s++)n=(t=a.vods[s])._id,-1!==(t.preview.template+"").indexOf("404_processing")||Ko[n]?o--:(Ko[n]=1,oI($o[o],[n,t.length,t.language,t.game,t.channel.name,t.increment_view_count_url],[t.preview.template.replace("{width}x{height}",eu),t.channel.display_name,R+__(t.created_at),SI.parse(t.title)+oa+$t+v+t.game,$u(t.views)+D,Zu(t.resolutions.chunked.slice(-4),parseInt(t.fps.chunked)||0,t.language),H+kp(t.length),t.animated_preview_url],cs),d.push(o));for(o=d.length-1;-1<o;o--)$o.splice(d[o],1);ns+=s,Wo&&(Yo-=$o.length,$o=[]),bs()}function Ms(){Xo<0?Ss():(N_(Xo,jo,cs,Rl,Yo),hI(cs,Xo+"_"+jo),Yo/Rl<Xo+Hl&&!Wo&&!Zo&&(ps(),vs()),kl&&Es())}function Es(){window.clearInterval(IS),-1<Xo&&Yo?(Eu(cs[1]+Xo+"_"+jo),J_(Xo+"_"+jo,cs)):Is()}function Ss(){var e=1<jo?1:jo;Iu(cs[0]+"y_"+e,nu)}function Is(){var e=1<jo?1:jo;xu(cs[0]+"y_"+e,nu)}function xs(e){var t;if(!cf&&!G_())switch(O_(),e.keyCode){case La:Ku()?Yu():Xu()?zu():(Es(),uf(xs));break;case Sa:if(-1===Xo)Is(),--jo<0&&(jo=1),Ss();else if(Xo||jo){if(e_(Xo,jo-1,cs[0]))Es(),jo--,Ms();else for(t=Rl-1;-1<t;t--)if(e_(Xo-1,t,cs[0])){Es(),Xo--,jo=t,Ms();break}}else Es(),Is(),Xo=-1,jo=1,Ss();break;case xa:-1===Xo?(Is(),1<++jo?(jo=0,is?Ss():(Xo=0,Ms())):Ss()):e_(Xo,jo+1,cs[0])?(Es(),jo++,Ms()):e_(Xo+1,0,cs[0])&&(Es(),Xo++,jo=0,Ms());break;case Ia:if(-1!==Xo||is)if(Xo){for(t=0;t<Rl;t++)if(e_(Xo-1,jo-t,cs[0])){Es(),Xo--,jo-=t,Ms();break}}else Es(),Xo=-1,Ss();else Xo=0,Is(),Ms();break;case Pa:if(-1!==Xo||is){for(t=0;t<Rl;t++)if(e_(Xo+1,jo-t,cs[0])){Es(),Xo++,jo-=t,Ms();break}}else Xo=0,Is(),Ms();break;case Ma:case Ca:case Ea:case Ta:-1===Xo?(0===jo?vf("AGameVod_highlight",(us=!us)?"true":"false"):4<++ds&&(ds=1),hs()):D_(Xo+"_"+jo,cs,xs)}}function Ps(){1===ds?(Pu("top_bar_game",w+u_((us?N:A)+re+": "+yl.Main_gameSelected)),ss="day"):2===ds?(Pu("top_bar_game",w+u_((us?N:A)+ce+": "+yl.Main_gameSelected)),ss="week"):3===ds?(Pu("top_bar_game",w+u_((us?N:A)+le+": "+yl.Main_gameSelected)),ss="month"):4===ds&&(Pu("top_bar_game",w+u_((us?N:A)+ue+": "+yl.Main_gameSelected)),ss="all"),vf("AGameVod_periodNumber",ds)}var Ts,Ls=0,Bs=0,Os=!1,Gs=0,As=0,Ns=5,Us=3500,Fs=0,Rs=!1,Hs=!1,Ds=["cc_thumbdiv","cc_img","cc_infodiv","cc_name","cc_createdon","cc_game","cc_viwers","cc_duration","cc_cell","sccempty_","channel_content_scroll"],qs=!1,Vs="",Js=null,zs="",Xs="",js="",Ws="",Ys="",Ks={},$s=!1;function Zs(){yl.Main_CenterLablesVectorPos=1,yl.Main_Go=sl,$s&&!yl.Search_isSearching&&yl.Main_selectedChannel_id&&kd(),Vs!==yl.Main_selectedChannel&&(qs=!1),l_(),yl.Main_selectedChannelDisplayname=yl.Main_selectedChannelDisplayname.replace(Y,""),Tu("top_bar_user",yl.Main_selectedChannelDisplayname),Tu("top_bar_game",Ut),document.body.addEventListener("keydown",Cd,!1),Va=!1,qs?(y_(Ls),Eu(Ds[10]),vd(),gd(),s_()):ed()}function Qs(){c_(),document.body.removeEventListener("keydown",Cd),Mu(Ds[10])}function ed(){h_("stream_table_channel_content"),Mu(Ds[10]),Lu(),Vu(),Vs=yl.Main_selectedChannel,Ws="",Os=Rs=qs=!1,Ts=void(Ls=Bs=Gs=Fs=0),td(),nd()}function td(){cf=!0,As=0,Us=3500}function nd(){Cf("https://api.twitch.tv/kraken/streams/"+encodeURIComponent(void 0!==Ts?Ts:yl.Main_selectedChannel_id),Us,2,null,ad,id)}function ad(e){null!==JSON.parse(e).stream?(Js=e,td(),rd()):Ts?(Js=null,td(),rd()):(td(),od())}function id(){++As<Ns?(Us+=500,nd()):(Js=null,td(),rd())}function od(){var e,t="https://tmi.twitch.tv/hosts?include_logins=1&host="+encodeURIComponent(yl.Main_selectedChannel_id);if(cu){if(!(e=Android.mreadUrl(t,Us,1,null)))return void sd();200===(e=JSON.parse(e)).status?dd(e.responseText):sd()}else(e=new XMLHttpRequest).open("GET",hu+t,!0),e.timeout=Us,e.setRequestHeader(Yl,Wl),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void dd(e.responseText);sd()}},e.send(null)}function sd(){++As<Ns?(Us+=500,od()):(Js=null,td(),rd())}function dd(e){var t=JSON.parse(e);void 0!==(Ts=t.hosts[0].target_id)?(td(),nd()):(Js=null,td(),rd())}function rd(){Cf("https://api.twitch.tv/kraken/channels/"+yl.Main_selectedChannel_id,og,2,null,cd,ld)}function cd(e){var t=JSON.parse(e);zs=t.views,Xs=t.followers,js=t.description,yl.Main_selectedChannelLogo=t.logo,ud()}function ld(){++As<Ns?(Us+=500,rd()):(js=Xs=zs="",yl.Main_selectedChannelLogo=fu,ud())}function ud(){var e=document.createElement("tr"),t=document.createElement("tbody"),n=0,a=document.getElementById("stream_table_channel_content");if((xl=document.createElement("tr")).className="follower_header",xl.innerHTML='<div class="follower_header">'+SI.parse(js)+"</div>",a.appendChild(t),a.appendChild(xl),null!==Js){var i=JSON.parse(Js);if(null!==i.stream){var o=void 0!==Ts?yl.Main_selectedChannelDisplayname+ae:"",s=i.stream;e.appendChild(_d("0_"+n,s.channel.name,s.preview.template,SI.parse(s.channel.status),s.game,Qu(JSON.stringify(s.stream_type))+o+s.channel.display_name,y+Mp(s.created_at)+b+", "+h+$u(s.viewers)+q,Zu(s.video_height,s.average_fps,s.channel.language))),n++}else Rs=!0}else Rs=!0;e.appendChild(fd("0_"+n,yl.Main_selectedChannelDisplayname,yl.Main_selectedChannelDisplayname+A,"movie-play")),n++,e.appendChild(fd("0_"+n,yl.Main_selectedChannelDisplayname,yl.Main_selectedChannelDisplayname+U,"movie")),n<2&&(n++,e.appendChild(k_(Ds[9]+"0_"+n))),a.appendChild(e),(e=document.createElement("tr")).appendChild(md("1_0",yl.Main_selectedChannelDisplayname,yl.Main_selectedChannelDisplayname,yl.Main_selectedChannelLogo)),a.appendChild(e),pd()}function _d(e,t,n,a,i,o,s,d){return Ws=n.replace("{width}x{height}",eu),(xl=document.createElement("td")).setAttribute("id",Ds[8]+e),xl.setAttribute(au,t),xl.className="stream_cell",xl.innerHTML='<div id="'+Ds[0]+e+'" class="stream_thumbnail_video" ><img id="'+Ds[1]+e+'" class="stream_img"></div><div id="'+Ds[2]+e+'" class="stream_text"><div id="'+Ds[3]+e+'" class="stream_channel" style="width: 66%; display: inline-block;"><i class="icon-circle" style="color: '+(void 0!==Ts?"#FED000":"red")+'; font-size: 90%; aria-hidden="true"></i> '+ya+o+'</div><div id="'+Ds[7]+e+'"class="stream_info" style="width:33%; float: right; text-align: right; display: inline-block;">'+d+'</div><div id="'+Ds[4]+e+'"class="stream_info">'+a+'</div><div id="'+Ds[5]+e+'"class="stream_info">'+v+i+'</div><div id="'+Ds[6]+e+'"class="stream_info">'+s+"</div></div>",xl}function fd(e,t,n,a){return(xl=document.createElement("td")).setAttribute("id",Ds[8]+e),xl.setAttribute(au,t),xl.className="stream_cell",xl.innerHTML='<div id="'+Ds[0]+e+'" class="stream_thumbnail_video" ><div id="'+Ds[1]+e+'" class="stream_channel_content_icon"><i class="icon-'+a+'"></i></div></div><div id="'+Ds[2]+e+'" class="stream_text"><div id="'+Ds[3]+e+'" class="stream_channel" style="text-align: center">'+n+"</div></div>",xl}function md(e,t,n,a){return Ys=a,(xl=document.createElement("td")).setAttribute("id",Ds[8]+e),xl.setAttribute(au,t),xl.className="stream_cell",xl.innerHTML='<div id="'+Ds[0]+e+'" class="stream_thumbnail_video" ><div id="schannel_cont_heart" style="position: absolute; top: 5%; left: 6%;"></div><img id="'+Ds[1]+e+'" class="stream_img_fallow"></div><div id="'+Ds[2]+e+'" class="stream_text"><div id="'+Ds[3]+e+'" class="stream_channel">'+n+'</div><div id="'+Ds[5]+e+'"class="stream_info">'+$u(zs)+D+'</div><div id="'+Ds[6]+e+'"class="stream_info" >'+$u(Xs)+Ht+"</div></div>",xl}function hd(){Da?(Pu("schannel_cont_heart",'<i class="icon-heart" style="color: #00b300; font-size: 600%; text-shadow: #FFFFFF 0 0 10px, #FFFFFF 0 0 10px, #FFFFFF 0 0 8px;"></i>'),Tu(Ds[3]+"1_0",yl.Main_selectedChannelDisplayname+It)):(Pu("schannel_cont_heart",'<i class="icon-heart-o" style="color: #FFFFFF; font-size: 600%; text-shadow: #000000 0 0 10px, #000000 0 0 10px, #000000 0 0 8px;"></i>'),Zi()?Tu(Ds[3]+"1_0",yl.Main_selectedChannelDisplayname+xt):Tu(Ds[3]+"1_0",yl.Main_selectedChannelDisplayname+Dt))}function pd(){qs||(qs=!0,""!==Ws&&pu(document.getElementById(Ds[1]+"0_0"),Ws,mu),pu(document.getElementById(Ds[1]+"1_0"),Ys,fu),gd(),s_(),Eu(Ds[10]),Bu()),vd(),cf=!1}function vd(){Hs?hd():Zi()?(Ja=yl.Main_selectedChannel_id,Va=!1,oi()):(Da=!1,hd())}function gd(){Iu(Ds[0]+Ls+"_"+(Ls?0:Bs),nu),kl&&yd(),L_()}function yd(){J_(Ls+"_"+(Ls?0:Bs),Ds)}function bd(){if(Ls)Zi()&&Ni[yl.Users_Position].access_token?(Va=!1,Ja=yl.Main_selectedChannel_id,Da?fi():li()):(qu(Gt),window.setTimeout(Vu,2e3));else{document.body.removeEventListener("keydown",Cd),Mu(Ds[10]);var e=Rs?1:0;Bs===0-e?(yl.Play_selectedChannel=document.getElementById(Ds[8]+Ls+"_"+Bs).getAttribute(au),yl.Play_selectedChannelDisplayname=document.getElementById(Ds[3]+Ls+"_"+Bs).textContent,-1!==yl.Play_selectedChannelDisplayname.indexOf(ae)?(yl.Play_isHost=!0,yl.Play_DisplaynameHost=yl.Play_selectedChannelDisplayname,yl.Play_selectedChannelDisplayname=yl.Play_selectedChannelDisplayname.split(ae)[1],yl.Play_selectedChannel_id=Ts):yl.Play_selectedChannel_id=yl.Main_selectedChannel_id,yl.Play_gameSelected=document.getElementById(Ds[5]+Ls+"_"+Bs).textContent.split(v)[1],j_(R_)):Bs===1-e?j_(Kd):Bs===2-e&&(Py=tb,j_(Gy))}}function wd(){Ks={"Main_values.Main_selectedChannel_id":yl.Main_selectedChannel_id,"Main_values.Main_selectedChannelLogo":yl.Main_selectedChannelLogo,"Main_values.Main_selectedChannel":yl.Main_selectedChannel,"Main_values.Main_selectedChannelDisplayname":yl.Main_selectedChannelDisplayname,ChannelContent_UserChannels:Hs,"Main_values.Main_BeforeChannel":yl.Main_BeforeChannel}}function kd(){yl.Main_selectedChannel_id=yl.Main_selectedChannel_id,yl.Main_selectedChannelLogo=yl.Main_selectedChannelLogo,yl.Main_selectedChannel=yl.Main_selectedChannel,yl.Main_selectedChannelDisplayname=yl.Main_selectedChannelDisplayname,Hs=Ks.ChannelContent_UserChannels,yl.Main_BeforeChannel=yl.Main_BeforeChannel,$s=!(Ks={})}function Cd(e){if(!cf&&!G_())switch(O_(),e.keyCode){case La:Ku()?Yu():Xu()?zu():(yd(),uf(Cd));break;case Sa:Ls||(yd(),--Bs<0&&(Bs=Rs?1:2),gd());break;case xa:Ls||(yd(),(Rs?1:2)<++Bs&&(Bs=0),gd());break;case Ia:case Pa:yd(),Ls=Ls?0:1,gd();break;case Ma:case Ca:case Ea:case Ta:bd()}}var Md=0,Ed=0,Sd=!1,Id=0,xd={},Pd=[],Td=!1,Ld=0,Bd=5,Od=3500,Gd=0,Ad=0,Nd=0,Ud=!1,Fd=!1,Rd="",Hd=!1,Dd=["cv_thumbdiv","cv_img","cv_infodiv","cv_title","cv_streamon","cv_duration","cv_viwers","cv_quality","cv_cell","cvempty_","channel_vod_scroll","cv_game"],qd=!1,Vd=!1,Jd="",zd="",Xd="",jd="",Wd="",Yd=0;function Kd(){yl.Main_CenterLablesVectorPos=1,yl.Main_Go=dl,!yl.Search_isSearching&&yl.Main_selectedChannel_id&&kd(),yl.Main_selectedChannel!==Jd&&(qd=!1),l_(),Cu("label_side_panel","icon-arrow-circle-left",x),Tu("top_bar_user",yl.Main_selectedChannelDisplayname),document.body.addEventListener("keydown",ur,!1),qd?(y_(Md),Tu("top_bar_game",Vd?N:A),Eu(Dd[10]),dr(),s_()):Zd()}function $d(){qd&&rr(),c_(),document.body.removeEventListener("keydown",ur),Mu(Dd[10])}function Zd(){qd&&rr(),h_("stream_table_channel_vod"),Mu(Dd[10]),Tu("top_bar_game",Vd?N:A),Lu(),Vu(),Jd=yl.Main_selectedChannel,Hd=qd=!1,cf=!(Fd=!(Pd=[])),Md=Ed=Id=Ad=Gd=0,Sd=!(xd={}),Fu(),Qd(),er()}function Qd(){v_(),Td=!0,Ld=0,Od=3500}function er(){var e=Id+Gd;e&&Ad-1<e&&(e=Ad-Fl,Sd=!0),Cf("https://api.twitch.tv/kraken/channels/"+encodeURIComponent(yl.Main_selectedChannel_id)+"/videos?limit="+Fl+"&broadcast_type="+(Vd?"highlight":"archive")+"&sort=time&offset="+e,Od,2,null,nr,tr)}function tr(){++Ld<Bd?(Od+=500,er()):(Td=!1,Id?(Sd=!0,ar()):(cf=!1,Bu(),qu(L)))}function nr(e){var t=JSON.parse(e),n=t.videos.length;Ad=parseInt(t._total),n<Fl&&(Sd=!0);var a=Id;Ud=!(Id+=n);var i=n/Rl;0<n%Rl&&i++;var o,s,d,r,c,l,u,_=0,f=document.getElementById("stream_table_channel_vod");if(!Hd){Hd=!0,d=document.createElement("tr");var m='<i class="icon-movie-play stream_channel_fallow_icon"></i>'+ya+ya+p;(xl=document.createElement("td")).setAttribute("id",Dd[8]+"y_0"),xl.className="stream_cell",xl.innerHTML='<div id="'+Dd[0]+'y_0" class="stream_thumbnail_channel_vod" ><div id="'+Dd[3]+'y_0" class="stream_channel_fallow_game">'+m+"</div></div>",d.appendChild(xl),f.appendChild(d)}for(var h=0;h<i;h++){for(s=a/Rl+h,d=document.createElement("tr"),o=0;o<Rl&&_<n;o++,_++)c=(r=t.videos[_])._id,l=-1!==((u=r.preview.template)+"").indexOf("404_processing"),s||o||!l||(l=!1,u=mu),l||xd[c]?o--:(xd[c]=1,d.appendChild(aI(s,s+"_"+o,[c,r.length,r.language,r.game,r.channel.name,r.increment_view_count_url],[u.replace("{width}x{height}",eu),SI.parse(r.title),R+__(r.created_at),$t+v+r.game,$u(r.views)+D,Zu(r.resolutions.chunked.slice(-4),parseInt(r.fps.chunked)||0,r.language),H+kp(r.length),r.animated_preview_url],Dd)));for(;o<Rl;o++)Sd&&!Fd&&(Fd=!0,Id=s*Rl+o),d.appendChild(k_(Dd[9]+s+"_"+o)),Pd.push(Dd[9]+s+"_"+o);f.appendChild(d)}ar()}function ar(){if(qd?(Ru(Ed,Md,Rl,Id),p_(mu)):(Ud?qu(B+(Vd?N:A)+O+I):(qd=!0,p_(mu),dr(),s_()),Eu(Dd[10]),cf=!1,Bu()),0<Pd.length&&!Sd)return Qd(),void ir();Td=!(Pd=[])}function ir(){Du(Pd.length);var e=Id+Gd;e&&Ad-1<e&&(e=Ad-jl,Sd=!0),Cf("https://api.twitch.tv/kraken/channels/"+encodeURIComponent(yl.Main_selectedChannel_id)+"/videos?limit="+jl+"&broadcast_type="+(Vd?"highlight":"archive")+"&sort=time&offset="+e,Od,2,null,sr,or)}function or(){++Ld<Bd?(Od+=500,ir()):(Sd=!0,Id-=Pd.length,Pd=[],ar())}function sr(e){var t,n,a=JSON.parse(e),i=a.videos.length,o=0,s=0,d=[];for(Ad=parseInt(a._total);o<Pd.length&&s<i;o++,s++)n=(t=a.videos[s])._id,-1!==(t.preview.template+"").indexOf("404_processing")||xd[n]?o--:(xd[n]=1,oI(Pd[o],[n,t.length,t.language,t.game,t.channel.name,t.increment_view_count_url],[t.preview.template.replace("{width}x{height}",eu),SI.parse(t.title),R+__(t.created_at),$t+v+t.game,$u(t.views)+D,Zu(t.resolutions.chunked.slice(-4),parseInt(t.fps.chunked)||0,t.language),H+kp(t.length),t.animated_preview_url],Dd),d.push(o));for(o=d.length-1;-1<o;o--)Pd.splice(d[o],1);Gd+=s,Sd&&(Id-=Pd.length,Pd=[]),ar()}function dr(){Md<0?cr():(N_(Md,Ed,Dd,Rl,Id),hI(Dd,Md+"_"+Ed),Id/Rl<Md+Hl&&!Sd&&!Td&&(Qd(),er()),kl&&rr())}function rr(){window.clearInterval(IS),-1<Md&&Id?(Eu(Dd[1]+Md+"_"+Ed),J_(Md+"_"+Ed,Dd)):lr()}function cr(){Iu(Dd[0]+"y_0",nu)}function lr(){xu(Dd[0]+"y_0",nu)}function ur(e){var t;if(!cf&&!G_())switch(O_(),e.keyCode){case La:Ku()?Yu():Xu()?zu():(rr(),uf(ur));break;case Sa:if(e_(Md,Ed-1,Dd[0]))rr(),Ed--,dr();else for(t=Rl-1;-1<t;t--)if(e_(Md-1,t,Dd[0])){rr(),Md--,Ed=t,dr();break}break;case xa:e_(Md,Ed+1,Dd[0])?(rr(),Ed++,dr()):e_(Md+1,0,Dd[0])&&(rr(),Md++,Ed=0,dr());break;case Ia:if(-1!==Md||Ud)if(Md){for(t=0;t<Rl;t++)if(e_(Md-1,Ed-t,Dd[0])){rr(),Md--,Ed-=t,dr();break}}else rr(),Md=-1,cr();else Md=0,lr(),dr();break;case Pa:if(-1!==Md||Ud){for(t=0;t<Rl;t++)if(e_(Md+1,Ed-t,Dd[0])){rr(),Md++,Ed-=t,dr();break}}else Md=0,lr(),dr();break;case Ma:case Ca:case Ea:case Ta:-1===Md?(vf("ChannelVod_highlight",(Vd=!Vd)?"true":"false"),Zd()):D_(Md+"_"+Ed,Dd,ur)}}var _r,fr,mr,hr,pr=0,vr=10,gr=!1,yr=0,br=null,wr=!1,kr=0,Cr={},Mr={};function Er(){qr(),yl.Play_ChatForceDisable?(Wr||cc(),wr=!1,j_(function(){Sr(yr=(new Date).getTime())})):Ac()}function Sr(e){pr=0,Ir(e)}function Ir(e){var t="https://badges.twitch.tv/v1/badges/channels/"+yl.Play_selectedChannel_id+"/display",n=new XMLHttpRequest;n.open("GET",t,!0),n.timeout=1e4,n.ontimeout=function(){},n.onreadystatechange=function(){if(4===n.readyState){if(200===n.status)return void(yr===e&&Pr(n.responseText,e));yr===e&&xr(e)}},n.send(null)}function xr(e){pr++,yr===e&&(pr<vr?Ir(e):fr=window.setTimeout(function(){Ir(e)},1e3))}function Pr(e,t){MI(JSON.parse(e).badge_sets).forEach(function(t){t.versions.forEach(function(e){EI(t.type,e.type,e.image_url_4x,Xr)})}),Cr[yl.Play_selectedChannel_id]?yr===t&&Gr():Tr(t)}function Tr(e){pr=0,Lr(e)}function Lr(e){var t="https://api.betterttv.net/2/channels/"+encodeURIComponent(yl.Play_selectedChannel),n=new XMLHttpRequest;n.open("GET",t,!0),n.timeout=1e4,n.ontimeout=function(){},n.onreadystatechange=function(){4===n.readyState&&(200===n.status?yr===e&&Or(n.responseText,e):404===n.status?(Cr[yl.Play_selectedChannel_id]=1,yr===e&&Gr()):yr===e&&Br(e))},n.send(null)}function Br(e){pr++,yr===e&&(pr<vr?Lr(e):yr===e&&Gr())}function Or(t,e){(t=JSON.parse(t)).emotes.forEach(function(e){Mr[e.code]={restrictions:e.restrictions,code:e.code,source:"bttv",id:e.id,"1x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","1x"),"2x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","2x"),"3x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","3x")}}),Cr[yl.Play_selectedChannel_id]=1,yr===e&&Gr()}function Gr(){Ur(),Ar()}function Ar(){(br=new ReconnectingWebSocket("wss://irc-ws.chat.twitch.tv","irc",{reconnectInterval:3e3})).onopen=function(){br.send("PASS blah\r\n"),br.send("NICK justinfan12345\r\n"),br.send("CAP REQ :twitch.tv/commands twitch.tv/tags\r\n"),br.send("JOIN #"+yl.Play_selectedChannel+"\r\n")},br.onclose=function(){gr=!0},br.onmessage=function(e){var t=window.parseIRC(e.data.trim());if(t.command)switch(t.command){case"PING":br.send("PONG "+t.params[0]);break;case"JOIN":wr=!0,Rr('&nbsp;<span class="message">'+oa+wn+yl.Play_selectedChannelDisplayname+" "+_+"</span>");break;case"PRIVMSG":Fr(t)}},mr=window.setTimeout(Nr,5e3)}function Nr(){wr?hr=window.setInterval(Hr,1e3):(br.close(1e3),Gr())}function Ur(){window.clearTimeout(mr)}function Fr(e){var t="",n=e.tags;if(n.hasOwnProperty("badges")&&"string"==typeof n.badges&&n.badges.split(",").forEach(function(e){e=e.split("/"),t+='<span class="'+e[0]+"-"+e[1]+' tag"></span>'}),n.hasOwnProperty("display-name")){var a=n["display-name"];"string"==typeof a&&(t+='<span class="nick" style="color: #'+nc[a.charCodeAt(0)%ac]+';">'+a+"</span>&#58;&nbsp;")}var i=e.params[1];i=i.replace(/</g,"&lt;").replace(/>/g,"&gt;"),/^\x01ACTION.*\x01$/.test(i)&&(i=i.replace(/^\x01ACTION/,"").replace(/\x01$/,"").trim());var o={};n.hasOwnProperty("emotes")&&"string"==typeof n.emotes&&(n.emotes=n.emotes.split("/"),n.emotes.forEach(function(t){t=t.split(":"),o[t[0]]||(o[t[0]]=[]),t[1].split(",").forEach(function(e){e=e.split("-"),o[t[0]].push([parseInt(e[0]),parseInt(e[1])])})}));for(var s=CI(i,o),d=0;d<s.length;d++)"string"==typeof s[d]?s[d]=wI(n,s[d]):s[d]=s[d][0];e=s.join(" "),e=SI.parse(e,!0),Rr(t+='<span class="message">'+e+"</span>")}function Rr(e){var t=document.createElement("div");t.className="chat_line",t.innerHTML=e,Xr.appendChild(t),Hr(),100<++kr&&(kr=0,Uc())}function Hr(){Xr.scrollTop=Xr.scrollHeight}function Dr(){Ur(),window.clearTimeout(fr),window.clearTimeout(_r),window.clearInterval(hr)}function qr(){Dr(),br&&br.close(1e3),yr=0,h_("chat_box"),wr=gr=!1}var Vr,Jr,zr,Xr,jr,Wr=!1,Yr=0,Kr=[],$r=[],Zr=10,Qr=null,ec=0,tc="",nc=["ff0000","ff4000","ff8000","ffbf00","ffff00","bfff00","80ff00","40ff00","00ff00","00ff40","00ff80","00ffbf","00ffff","00bfff","0080ff","0040ff","ff00ff","ff00bf","ff0080","ff0040"],ac=nc.length,ic=0,oc=!1,sc=0;function dc(){Xr=document.getElementById("chat_box"),cc()}function rc(){Pc(),cu&&yl.Play_ChatForceDisable?(Wr||cc(),j_(function(){vc(sc=(new Date).getTime())})):Ac()}function cc(){Yr=0,Wr=!(Mr={}),lc()}function lc(){var e=new XMLHttpRequest;e.open("GET","https://badges.twitch.tv/v1/badges/global/display",!0),e.timeout=1e4,e.ontimeout=function(){},e.onreadystatechange=function(){4===e.readyState&&(200===e.status?_c(e.responseText):uc())},e.send(null)}function uc(){++Yr<Zr?lc():Wr=!1}function _c(e){MI(JSON.parse(e).badge_sets).forEach(function(t){t.versions.forEach(function(e){EI(t.type,e.type,e.image_url_4x,null)})}),fc()}function fc(){Yr=0,mc()}function mc(){var e=new XMLHttpRequest;e.open("GET","https://api.betterttv.net/2/emotes",!0),e.timeout=1e4,e.ontimeout=function(){},e.onreadystatechange=function(){4===e.readyState&&(200===e.status?pc(e.responseText):hc())},e.send(null)}function hc(){++Yr<Zr?mc():Wr=!1}function pc(t){(t=JSON.parse(t)).emotes.forEach(function(e){Mr[e.code]={restrictions:e.restrictions,code:e.code,source:"bttv",id:e.id,"1x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","1x"),"2x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","2x"),"3x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","3x")}}),Wr=!0}function vc(e){Yr=0,gc(e)}function gc(e){var t,n="https://badges.twitch.tv/v1/badges/channels/"+yl.Main_selectedChannel_id+"/display";if(cu){if(!(t=Android.mreadUrl(n,1e4,0,null)))return void(sc===e&&yc(e));if(200===(t=JSON.parse(t)).status)return void(sc===e&&bc(t.responseText,e));sc===e&&yc(e)}else(t=new XMLHttpRequest).open("GET",n,!0),t.timeout=1e4,t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void(sc===e&&bc(t.responseText,e));sc===e&&yc(e)}},t.send(null)}function yc(e){Yr++,sc===e&&(Yr<Zr?gc(e):jr=window.setTimeout(function(){gc(e)},1e3))}function bc(e,t){MI(JSON.parse(e).badge_sets).forEach(function(t){t.versions.forEach(function(e){EI(t.type,e.type,e.image_url_4x,Xr)})}),sc===t&&wc(t)}function wc(e){Yr=0,sc===e&&kc(e)}function kc(e){var t,n="https://api.twitch.tv/v5/videos/"+yl.ChannelVod_vodId+"/comments?client_id="+Wl+(ec?"&content_offset_seconds="+parseInt(ec):"");if(cu){if(!(t=Android.mreadUrl(n,1e4,0,null)))return void(sc===e&&Cc(e));if(200===(t=JSON.parse(t)).status)return void(sc===e&&Mc(t.responseText,e));sc===e&&Cc(e)}else(t=new XMLHttpRequest).open("GET",n,!0),t.timeout=1e4,t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void(sc===e&&Mc(t.responseText,e));sc===e&&Cc(e)}},t.send(null)}function Cc(e){Yr++,sc===e&&(Yr<Zr?kc(e):Jr=window.setTimeout(function(){kc(e)},2500))}function Mc(e,t){e=JSON.parse(e);var n,a,i=null===Qr;i&&(n="&nbsp;",n+='<span class="message">',n+=oa+wn+yl.Main_selectedChannelDisplayname+" "+tc,Ec(n+="</span>",0)),ec=0,Qr=e._next,e.comments.forEach(function(e){n="",(a=e.message).hasOwnProperty("user_badges")&&a.user_badges.forEach(function(e){n+='<span class="'+e._id+"-"+e.version+' tag"></span>'}),n+='<span class="nick" style="color: #'+nc[e.commenter.display_name.charCodeAt(0)%ac]+';">'+e.commenter.display_name+"</span>&#58;&nbsp;",n+='<span class="message">',a.fragments.forEach(function(e){e.hasOwnProperty("emoticon")?n+='<img class="emoticon" src="https://static-cdn.jtvnw.net/emoticons/v1/'+e.emoticon.emoticon_id+'/1.0" srcset="https://static-cdn.jtvnw.net/emoticons/v1/'+e.emoticon.emoticon_id+"/2.0 2x, https://static-cdn.jtvnw.net/emoticons/v1/"+e.emoticon.emoticon_id+'/3.0 4x">':n+=SI.parse(e.text)}),n+="</span>",i?Ec(n,e.content_offset_seconds):void 0!==Qr&&Sc(n,e.content_offset_seconds)}),i&&sc===t&&(Ic(t),void 0!==Qr&&Lc(t))}function Ec(e,t){Kr.push({time:t,message:e})}function Sc(e,t){$r.push({time:t,message:e})}function Ic(e){oc||sc!==e||(Vr=window.setInterval(function(){Tc(e),Xr.scrollTop=Xr.scrollHeight},1e3))}function xc(){oc||(window.clearTimeout(jr),window.clearTimeout(Jr),window.clearTimeout(zr),window.clearInterval(Vr))}function Pc(){xc(),sc=0,h_("chat_box"),oc=!1,Qr=null,Kr=[],$r=[],ic=0}function Tc(e){var t;if(ic<Kr.length-1)for(var n=ic;n<Kr.length&&Kr[n].time<Yd+Android.gettime()/1e3;n++,ic++)(t=document.createElement("div")).className="chat_line",t.innerHTML=Kr[n].message,Xr.appendChild(t);else if(xc(),void 0!==Qr)Kr=$r.slice(),ic=0,Ic(e),$r=[],sc===e&&Lc(e),Uc();else{var a="&nbsp;";a+='<span class="message">',a+=oa+oa+En+oa+oa,a+="</span>",(t=document.createElement("div")).className="chat_line",t.innerHTML=a,Xr.appendChild(t),oc=!0,Xr.scrollTop=Xr.scrollHeight,window.clearInterval(Vr),Vr=window.setInterval(function(){Xr.scrollTop=Xr.scrollHeight},1e3)}}function Lc(e){Yr=0,oc||sc!==e||Bc(e)}function Bc(e){var t,n="https://api.twitch.tv/v5/videos/"+yl.ChannelVod_vodId+"/comments?client_id="+Wl+(null!==Qr?"&cursor="+Qr:"");if(cu){if(!(t=Android.mreadUrl(n,1e4,0,null)))return void(oc||sc!==e||Oc(e));if(200===(t=JSON.parse(t)).status)return void(oc||sc!==e||Mc(t.responseText,e));oc||sc!==e||Oc(e)}else(t=new XMLHttpRequest).open("GET",n,!0),t.timeout=1e4,t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void(oc||sc!==e||Mc(t.responseText,e));oc||sc!==e||Oc(e)}},t.send(null)}function Oc(e){Yr++,sc===e&&(Yr<Zr?Bc(e):zr=window.setTimeout(function(){Bc(e)},2500))}function Gc(){sc=0,Nc(cn+oa+ln)}function Ac(){Pc(),Eu("chat_box"),Nc(Qn)}function Nc(e){var t="&nbsp;";t+='<span class="message">',t+=oa+oa+oa+oa+oa+oa+oa+oa+oa+oa,t+=e,t+="</span>";var n=document.createElement("div");n.className="chat_line",n.innerHTML=t,Xr.appendChild(n)}function Uc(){var e=document.getElementsByClassName("chat_line");if(0<e.length-100)for(var t=0;t<e.length-100;t++)e[0].parentNode.removeChild(e[0]);Hr()}var Fc,Rc,Hc,Dc,qc,Vc,Jc,zc=!0,Xc=!1,jc=!1,Wc=-1,Yc=new Image,Kc=1,$c=2,Zc=3,Qc=4,el=5,tl=6,nl=7,al=8,il=9,ol=10,sl=11,dl=12,rl=13,cl=14,ll=15,ul=16,_l=17,fl=18,ml=19,hl=20,pl=21,vl=22,gl="",yl={Main_Go:1,Main_Before:1,Main_BeforeSearch:1,Main_BeforeChannel:1,Main_BeforeAgame:Zc,Main_BeforeChannelisSet:!1,Main_BeforeAgameisSet:!1,Main_selectedChannel:"",Main_selectedChannelDisplayname:"",Main_selectedChannelLogo:"",Main_selectedChannel_id:"",Main_gameSelected:"",Main_OldgameSelected:null,Play_isHost:!1,Play_DisplaynameHost:"",Play_selectedChannelDisplayname:"",Play_selectedChannel:"",Play_gameSelected:"",Users_Position:0,Users_AddcodePosition:0,Play_WasPlaying:0,ChannelVod_vodId:"",vodOffset:0,Search_data:"",isLastSChannels:!1,gameSelectedOld:"",Games_return:!1,Search_isSearching:!1,Play_ChatForceDisable:!1,Never_run:!0,Main_CenterLablesVectorPos:0},bl=!0,wl=!0,kl=!1,Cl=[],Ml=0,El=0,Sl=null,Il=!0,xl="",Pl=!1,Tl="",Ll=["label_side_panel","label_update","label_refresh","top_bar_live","top_bar_user","top_bar_featured","top_bar_game","top_bar_vod","top_bar_clip"],Bl=[],Ol=0,Gl=!0,Al=0,Nl=1.35,Ul=1.5,Fl=45,Rl=3,Hl=Math.floor(Fl/Rl/Ul),Dl=45,ql=5,Vl=Math.floor(Dl/ql/Nl),Jl=48,zl=6,Xl=Math.floor(Jl/zl/Ul),jl=6,Wl="5seja5ptej058mxqy7gh5tcudjqtm9",Yl="Client-ID",Kl="Accept",$l="Authorization",Zl="OAuth ",Ql="application/vnd.twitchtv.v5+json",eu="528x297",tu="340x475",nu="stream_thumbnail_focused",au="data_attribute",iu="1.0",ou=".12",su="042419",du=iu+ou+"-"+su,ru=0,cu=0,lu="?"+Math.random(),uu="https://fgl27.github.io/SmartTwitchTV/release/githubio/images/",_u=uu+"404_game.png",fu=uu+"404_logo.png",mu=uu+"404_video.png",hu="https://cors-anywhere.herokuapp.com/",pu=function(e,t,n){e.onerror=function(){this.src=n},e.src=t};function vu(){(jc=bf("Main_isDebug",!1))&&zc?gu():"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){yu(window.navigator.userLanguage||window.navigator.language)}):yu(window.navigator.userLanguage||window.navigator.language)}function gu(){console.log("Debug mod start");var e=document.createElement("script");e.src="https://fgl27.github.io/SmartTwitchTV/release/githubio/js/masterdebug.js",document.head.appendChild(e)}function yu(e){z_(),j_(function(){try{cu=Android.getAndroid()}catch(e){cu=0,document.body.style.backgroundColor="rgba(0, 0, 0, 1)",Xc=jc=!0,console.log("Main_isReleased: "+zc),console.log("Main_isDebug: "+jc),console.log("Main_isBrowser: "+Xc)}Tk(),ka(),console.log("language is "+e),wa(),-1!==window.location.href.indexOf("code")&&kf(window.location.href),bu()})}function bu(){Ty(),wu(!0),Fc=document.getElementById("scrollbar"),d_(),gl=yl.Main_Go,j_(function(){dc(),qh(),$i(),Zi()&&(Jc=window.setInterval($_,6e5),$_()),document.body.addEventListener("keyup",L_,!1),Ly(),document.getElementById("side_panel").style.marginLeft="",f_(),ku(),jS=bf("Vod_highlight",!1),Vd=bf("ChannelVod_highlight",!1),us=bf("AGameVod_highlight",!1),sS=bf("UserVod_highlight",!1),VS=gf("vod_periodNumber",2),ds=gf("AGameVod_periodNumber",2),nS=gf("UserVod_TypeNumber",1),gy(),Rc=document.getElementById("search_input"),Hc=document.getElementById("user_input"),w_(mu),w_(_u),w_(fu),document.addEventListener("visibilitychange",Y_,!1),qc=window.setInterval(K_,6e4),Py=ob,Gy(),Dc=window.setTimeout(n_,5e3),Eu("topbar")})}function wu(e){K_(),Cu("label_refresh","icon-refresh",t+Wt),Pu("label_update",'<div class="strokedextramini" style="vertical-align: middle; display: inline-block;"><i class="icon-arrow-up" style="color: #FF0000; font-size: 115%; "></i></div><div class="strokedextramini" style="vertical-align: middle; display: inline-block; color: #FF0000">'+ya+ft+"</div>"),Cu("label_side_panel","icon-ellipsis",Fn),Cu("icon_feed_refresh","icon-refresh",t+" Press up"),Tu("top_bar_live",_),Tu("top_bar_user",e?u:a),Tu("top_bar_featured",on),Tu("top_bar_game",f),Tu("top_bar_vod",Qt),Tu("top_bar_clip",U),Pu("scene2_search_text",ya+n),Pu("scene2_channel_text",ya+Ut),Pu("scene2_game_text",ya+qt),Tu("dialog_end_replay_text",tn),Tu("dialog_end_vod_text",dn),Tu("dialog_end_channel_text",Ut),Tu("dialog_end_game_text",qt),Pu("dialog_about_text",ha+pa),Bl=[re,ce,le,ue],e?Mk():(Pk(),f_())}function ku(){Tu("play_dialog_exit_text",V),Tu("side_panel_search",n),Tu("side_panel_settings",a),Tu("side_panel_about",i),Tu("side_panel_controls",e),Tu("side_panel_exit",z),Tu("side_panel_live",_),Tu("side_panel_user",u),Tu("side_panel_featured",on),Tu("side_panel_games",f),Tu("side_panel_videos",Qt),Tu("side_panel_clips",U),Tu("side_panel_hide",o),Tu("chanel_button",S),Tu("game_button",f),Tu("live_button",_),Tu("exit_app_cancel",W),Tu("exit_app_close",X),Tu("remove_cancel",W),Tu("remove_yes",Vt),Tu("exit_app_minimize",j),Tu("main_dialog_exit_text",J),Pu("dialog_controls_text",ma),Tu("dialog_vod_text",kn),Pu("dialog_vod_start_text",Mn)}function Cu(e,t,n){Pu(e,'<div class="strokedextramini" style="vertical-align: middle; display: inline-block;"><i class="'+t+'" style="color: #FFFFFF; font-size: 115%; "></i></div><div class="strokedextramini" style="vertical-align: middle; display: inline-block">'+ya+n+"</div>")}function Mu(e){document.getElementById(e).classList.add("hide")}function Eu(e){document.getElementById(e).classList.remove("hide")}function Su(e){return-1===document.getElementById(e).className.indexOf("hide")}function Iu(e,t){document.getElementById(e).classList.add(t)}function xu(e,t){document.getElementById(e).classList.remove(t)}function Pu(e,t){document.getElementById(e).innerHTML=t}function Tu(e,t){document.getElementById(e).textContent=t}function Lu(){y_(-1),cu?Android.mshowLoading(!0):Eu("dialog_loading")}function Bu(){cu?Android.mshowLoading(!1):Mu("dialog_loading")}function Ou(){window.clearTimeout(Sl)}function Gu(){Sl=window.setTimeout(Nu,6e3)}function Au(){Gu(),Eu("main_dialog_exit"),document.body.addEventListener("keydown",sf,!1)}function Nu(){document.body.removeEventListener("keydown",sf,!1),uf(Vc),Ou(),Mu("main_dialog_exit"),El=0,Uu()}function Uu(){xu("exit_app_cancel","button_search_focused"),xu("exit_app_minimize","button_search_focused"),xu("exit_app_close","button_search_focused"),Iu(El?1===El?"exit_app_minimize":"exit_app_close":"exit_app_cancel","button_search_focused")}function Fu(){h_("dialog_counter_text"),Hu(0,0,0)}function Ru(e,t,n,a){0<a?(Tu("dialog_counter_text",t*n+(e+1)+"/"+a),Hu(t,n,a)):Fu()}function Hu(e,t,n){var a=screen.height/100*7;if(3===t&&9<n||5===t&&10<n||6===t&&12<n){var i=yl.Main_Go===Qc||yl.Main_Go===ml||yl.Main_Go===hl||yl.Main_Go===dl||yl.Main_Go===vl||yl.Main_Go===_l||yl.Main_Go===fl||yl.Main_Go===rl,o=Math.ceil((screen.height-3*a)/(Math.ceil(n/t)-1)*e+a*(i?1.8:1));Fc.style.top=o+"px",Il&&(Il=!1,Fc.style.backgroundColor="#777777")}else Fc.style.backgroundColor="#000000",Fc.style.top=a+"px",Il=!0}function Du(e){(jl=12)/3<e&&(jl=3*e),99<jl&&(jl=99)}function qu(e){Tu("dialog_warning_text",e),Eu("dialog_warning")}function Vu(){Mu("dialog_warning")}function Ju(){Yu(),Eu("dialog_about")}function zu(){Mu("dialog_about")}function Xu(){return Su("dialog_about")}function ju(){Yu(),Vu(),r_(yl.Main_Go),Fu(),kk()}function Wu(){zu(),Eu("dialog_controls")}function Yu(){Mu("dialog_controls")}function Ku(){return Su("dialog_controls")}function $u(e){return(e+"").replace(/\B(?=(\d{3})+(?!\d))/g,",")}function Zu(e,t,n){return(e+="").indexOf("x")||(e=e.slice(-3)),e+"p"+(t=58<t?60:t<32?30:Math.ceil(t))+(""!==n?" ["+n.toUpperCase()+"]":"")}function Qu(e){return-1!==e.indexOf("live")?"":Y}function e_(e,t,n){return null!==document.getElementById(n+e+"_"+t)}function t_(){K_(),i_(),document.body.addEventListener("keyup",L_,!1)}function n_(){for(var e,t=0;t<Ll.length;t++)t<4?document.getElementById(Ll[t]).style.opacity="0.5":-1===(e=document.getElementById(Ll[t])).className.indexOf("icon_center_focus")&&(e.style.opacity="0.5");Iu("topbar","topbar_dim")}function a_(){for(var e=0;e<Ll.length;e++)document.getElementById(Ll[e]).style.opacity="1";xu("topbar","topbar_dim")}function i_(e){window.clearTimeout(Dc),a_(),j_(function(){o_(e)})}function o_(e){yl.Main_Go!==sl&&(yl.Main_BeforeChannelisSet=!1),yl.Main_Go!==Qc&&(yl.Main_BeforeAgameisSet=!1),Fu(),yl.Main_Go===Kc?(Py=ob,Gy()):yl.Main_Go===$c?Hi():yl.Main_Go===Zc?(Py=ab,Gy()):yl.Main_Go===Qc?Eo():yl.Main_Go===al?Lw():yl.Main_Go===il?pw():yl.Main_Go===ol?ak():yl.Main_Go===sl?Zs():yl.Main_Go===dl?Kd():yl.Main_Go===rl?(Py=tb,Gy()):yl.Main_Go===cl?ME():yl.Main_Go===el?QM():yl.Main_Go===tl?GC():yl.Main_Go===nl?(Py=ib,Gy()):yl.Main_Go===ll?iC():yl.Main_Go===ul?qb():yl.Main_Go===_l?KS():yl.Main_Go===fl?(Py=eb,Gy()):yl.Main_Go===ml?fs():yl.Main_Go===hl?(Py=nb,Gy()):yl.Main_Go===pl?(Py=sb,Gy()):yl.Main_Go===vl&&dS(),Dc=window.setTimeout(n_,3e3),e&&hf()}function s_(){vf("Main_values",JSON.stringify(yl))}function d_(){yl=Oy(yl,yf("Main_values",{}))}function r_(e){e===Kc?Ay():e===$c?Di():e===Zc?Ay():e===Qc?So():e===al?Bw():e===il?vw():e===ol?ik():e===sl?Qs():e===dl?$d():e===rl?Ay():e===cl?EE():e===el?eE():e===tl?AC():e===nl?Ay():e===ll?oC():e===ul?Vb():e===_l?$S():e===fl?Ay():e===ml?ms():e===hl?Ay():e===pl?Ay():e===vl&&rS(),Su("settings_scroll")&&Ck()}function c_(){Cu("label_refresh","icon-refresh",t+Wt),Cu("label_side_panel","icon-ellipsis",Fn),xu("top_bar_user","icon_center_focus"),Tu("top_bar_live",_),Tu("top_bar_user",u),Tu("top_bar_featured",on),Tu("top_bar_game",f),Tu("top_bar_vod",Qt),Tu("top_bar_clip",U)}function l_(){Cu("label_side_panel","icon-arrow-circle-left",x),h_("top_bar_live"),h_("top_bar_game"),h_("top_bar_vod"),h_("top_bar_clip"),h_("top_bar_featured"),Iu("top_bar_user","icon_center_focus")}function u_(e){return'<div style="font-size: 30%; position: fixed; line-height: 0; text-shadow: #000000 0 0 5.7px, #000000 0 0 5.7px, #000000 0 0 4px">'+e+"</div>"}function __(e){return e=new Date(e),Pl?e.getDate()+" "+Yt[e.getMonth()]+", "+e.getFullYear():Yt[e.getMonth()]+" "+e.getDate()+", "+e.getFullYear()}function f_(){if(cu)try{var e=Android.getversion();du="Android: "+e+" Web: "+su,m_(e)&&Eu("label_update")}catch(e){}Pu("dialog_about_text",ha+be+du+pa)}function m_(e){return e=e.split("."),parseFloat(e[0]+"."+e[1])<parseFloat(iu)||parseInt(e[2])<parseInt(ou.split(".")[1])}function h_(e){for(e=document.getElementById(e);e.firstChild;)e.removeChild(e.firstChild)}function p_(e){for(var t,n=0;n<Cl.length;n++)null!==(t=document.getElementById(Cl[n].id))&&pu(t,Cl[n].src+lu,e)}function v_(){Cl=[]}function g_(e,t){Cl.push({id:e,src:t})}function y_(e){Wc=e}function b_(e){var t=0;return Wc<e?t=-1:e<Wc&&(t=1),Wc=e,t}function w_(e){Yc.src=e}function k_(e){return(xl=document.createElement("td")).setAttribute("id",e),xl.className="stream_cell",xl}function C_(e,t,n){return(xl=document.createElement("td")).setAttribute("id",t[4]+e),xl.setAttribute(au,n[0]),xl.setAttribute("data-id",n[1]),xl.className="stream_cell",xl.innerHTML=E_(e,t,n),xl}function M_(e,t,n){var a=document.getElementById(e),i=e.split(n[5])[1];a.setAttribute(au,t[0]),a.setAttribute("data-id",t[1]),a.innerHTML=E_(i,n,t),a.setAttribute("id",n[4]+i)}function E_(e,t,n){return g_(t[1]+e,n[2]),'<div id="'+t[0]+e+'" class="stream_thumbnail_channel" ><img id="'+t[1]+e+'" class="stream_img"></div><div id="'+t[2]+e+'" class="stream_text"><div id="'+t[3]+e+'" class="stream_channel">'+n[3]+"</div></div>"}function S_(e,t,n,a,i){return e<Rl&&w_(i[0]),(xl=document.createElement("td")).setAttribute("id",a[8]+t),xl.setAttribute(au,JSON.stringify(n)),xl.className="stream_cell",xl.innerHTML=x_(t,a,i),xl}function I_(e,t,n,a){var i=document.getElementById(e),o=e.split(a[9])[1];i.setAttribute(au,JSON.stringify(t)),i.innerHTML=x_(o,a,n),i.setAttribute("id",a[8]+o)}function x_(e,t,n){return g_(t[1]+e,n[0]),'<div id="'+t[0]+e+'" class="stream_thumbnail_video" ><img id="'+t[1]+e+'" class="stream_img"></div><div id="'+t[2]+e+'" class="stream_text"><div id="'+t[3]+e+'" class="stream_channel" style="width: 66%; display: inline-block;">'+n[1]+'</div><div id="'+t[7]+e+'"class="stream_info" style="width:33%; float: right; text-align: right; display: inline-block;">'+n[5]+'</div><div id="'+t[4]+e+'"class="stream_info">'+SI.parse(n[2])+'</div><div id="'+t[5]+e+'"class="stream_info">'+v+n[3]+'</div><div id="'+t[6]+e+'"class="stream_info">'+n[4]+"</div></div>"}function P_(e,t,n){return(xl=document.createElement("td")).setAttribute("id",t[5]+e),xl.setAttribute(au,n[0]),xl.className="stream_cell",xl.innerHTML=T_(e,t,n),xl}function T_(e,t,n){return g_(t[1]+e,n[1]),'<div id="'+t[0]+e+'" class="stream_thumbnail_game" ><img id="'+t[1]+e+'" class="stream_img"></div><div id="'+t[2]+e+'" class="stream_text"><div id="'+t[3]+e+'" class="stream_channel">'+n[0]+'</div><div id="'+t[4]+e+'"class="stream_info_games" style="width: 100%; display: inline-block;">'+n[2]+"</div></div>"}function L_(){wl=!0}function B_(){bl=!0}function O_(){bl=!1,window.setTimeout(B_)}function G_(){return!bl||!wl}function A_(e,t,n,a,i){Iu(n[0]+e+"_"+t,nu),Ru(t,e,a,i),b_(e)?1<e?e_(e+1,0,n[0])?V_(n[6],-1*document.getElementById(n[4]+e+"_"+t).offsetTop+.42*screen.height):L_():V_(n[6],.07*screen.height):L_()}function N_(e,t,n,a,i){Iu(n[0]+e+"_"+t,nu),Ru(t,e,a,i),b_(e)?e?e_(e+1,0,n[0])&&V_(n[10],-1*document.getElementById(n[8]+(e-1)+"_"+t).offsetTop):V_(n[10],.07*screen.height):L_()}function U_(e,t,n,a,i){Iu(n[0]+e+"_"+t,nu),Ru(t,e,a,i),b_(e)?V_(n[10]?n[10]:n[7],e?-1*document.getElementById(n[5]+(e-1)+"_"+t).offsetTop+.025*screen.height:-1*document.getElementById(n[5]+e+"_"+t).offsetTop+.025*screen.height):L_()}function F_(e,t,n){document.body.removeEventListener("keydown",n),yl.Play_selectedChannel=JSON.parse(document.getElementById(t[8]+e).getAttribute(au)),yl.Play_selectedChannel_id=yl.Play_selectedChannel[1],yl.Play_selectedChannel=yl.Play_selectedChannel[0],yl.Main_Go===tl?(yl.Play_DisplaynameHost=document.getElementById(t[3]+e).textContent,yl.Play_selectedChannelDisplayname=yl.Play_DisplaynameHost.split(ae)[1],yl.Play_isHost=!0):yl.Play_selectedChannelDisplayname=document.getElementById(t[3]+e).textContent,yl.Play_gameSelected=document.getElementById(t[5]+e).textContent.split(v)[1],yl.Main_Go===Qc&&(yl.Main_OldgameSelected=yl.Main_gameSelected),R_()}function R_(){document.body.addEventListener("keydown",Fv,!1),Mu("scene1"),Eu("scene2"),zp(),$p(),mv(),Zi()&&!YC&&oM&&LM(),j_(zh)}function H_(e,t,n){document.body.removeEventListener("keydown",n),ub=JSON.parse(document.getElementById(t[8]+e).getAttribute(au)),Yf=parseInt(ub[1]),yl.Play_gameSelected=ub[2],yl.Main_selectedChannel=ub[3],yl.Main_selectedChannelDisplayname=ub[4],yl.Main_selectedChannelLogo=ub[5],yl.Main_selectedChannel_id=ub[6],yl.ChannelVod_vodId=ub[7],Yd=parseInt(ub[8]),lb=ub[9],fb=ub[10],rb=ub[11],ub=ub[0],_b=document.getElementById(t[4]+e).textContent,cb=document.getElementById(t[6]+e).textContent,document.body.addEventListener("keydown",gm,!1),Mu("scene1"),Eu("scene2"),$p(),Dp(),Gp(),Up(),Zi()&&!YC&&oM&&LM(),j_(Kf)}function D_(e,t,n){document.body.removeEventListener("keydown",n),yl.ChannelVod_vodId=JSON.parse(document.getElementById(t[8]+e).getAttribute(au)),Nd=parseInt(yl.ChannelVod_vodId[1]),Rd=yl.ChannelVod_vodId[2],yl.Play_gameSelected=yl.ChannelVod_vodId[3],yl.Main_selectedChannel=yl.ChannelVod_vodId[4],Gh=yl.ChannelVod_vodId[5],yl.ChannelVod_vodId=yl.ChannelVod_vodId[0].substr(1),yl.Main_Go===dl?zd=document.getElementById(t[3]+e).innerHTML:(zd="",yl.Main_selectedChannelDisplayname=document.getElementById(t[3]+e).textContent),jd=document.getElementById(t[4]+e).textContent,Wd=document.getElementById(t[5]+e).textContent,Xd=document.getElementById(t[11]+e).innerHTML+", "+document.getElementById(t[6]+e).textContent,q_()}function q_(){document.body.addEventListener("keydown",xy,!1),Mu("scene1"),Eu("scene2"),ny(),$p(),Dp(),Up(),kg=!1,Zi()&&!YC&&oM&&LM(),j_(Pg)}function V_(e,t){document.getElementById(e).style.top=t+"px",window.setTimeout(L_,10)}function J_(e,t){wl=!1,xu(t[0]+e,nu)}function z_(){var e=document.createElement("span");e.className="fa",e.style.display="none",document.body.insertBefore(e,document.body.firstChild),"icons"!==window.getComputedStyle(e,null).getPropertyValue("font-family")?(jc&&console.log("Main_Checktylesheet reloading"),X_("https://fgl27.github.io/SmartTwitchTV/release/githubio/css/icons.min.css")):jc&&console.log("Main_Checktylesheet loaded OK"),document.body.removeChild(e)}function X_(e){var t=document.createElement("link");t.rel="stylesheet",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)}function j_(e){"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?window.setTimeout(e):document.addEventListener("DOMContentLoaded",e)}function W_(){var e=(new Date).getTime()+ru;return e=new Date(e),(Pl?Kt[e.getDay()]+" "+e.getDate()+"/"+Yt[e.getMonth()]:Kt[e.getDay()]+" "+Yt[e.getMonth()]+"/"+e.getDate())+" "+wp(e.getHours())+":"+wp(e.getMinutes())}function Y_(){document.hidden||(K_(),window.setTimeout(K_,2e4))}function K_(){document.hidden||(Tu("label_clock",W_()),lu="?"+Math.random())}function $_(){document.hidden||Zi()&&window.setTimeout(function(){wM()||YC||(Am=Ni[yl.Users_Position].name,cM())},5e3)}function Z_(){Iu("side_panel_"+Al,"side_panel_text_focus")}function Q_(){xu("side_panel_"+Al,"side_panel_text_focus")}function ef(){Al?1===Al?ju():2===Al?(document.body.addEventListener("keydown",Vc,!1),Ju()):3===Al?(document.body.addEventListener("keydown",Vc,!1),Wu()):4===Al?Au(Vc):5===Al?tf(Kc):6===Al?tf(io()?cl:$c):7===Al?tf(pl):8===Al?tf(Zc):9===Al?tf(_l):10===Al&&tf(fl):yl.Main_Go!==al?(yl.Search_isSearching||yl.Main_Go!==sl&&yl.Main_Go!==rl&&yl.Main_Go!==dl||wd(),yl.Main_BeforeSearch=yl.Main_Go,yl.Main_Go=al,r_(yl.Main_BeforeSearch),i_()):document.body.addEventListener("keydown",Vc,!1),af()}function tf(e){e===yl.Main_Go?document.body.addEventListener("keydown",Vc,!1):(yl.Main_Before=yl.Main_Go,yl.Main_Go=e,r_(yl.Main_Before),i_())}function nf(e){Vc=e,document.body.removeEventListener("keydown",Vc),document.body.addEventListener("keydown",of,!1),xu("side_panel","side_panel_hide")}function af(){document.body.removeEventListener("keydown",of),Iu("side_panel","side_panel_hide"),Q_(),Al=0,Z_()}function of(e){switch(e.keyCode){case La:case Sa:document.body.addEventListener("keydown",Vc,!1),af(),ff();break;case Ia:Al&&(Q_(),Al--,Z_());break;case Pa:Al<10&&(Q_(),Al++,Z_());break;case Ta:ef()}}function sf(e){switch(e.keyCode){case La:Nu();break;case xa:2<++El&&(El=0),Uu(),Ou(),Gu();break;case Sa:--El<0&&(El=2),Uu(),Ou(),Gu();break;case Ta:El?cu&&1===El?Android.mclose(!1):cu&&2===El&&Android.mclose(!0):Nu()}}vu();var df=["top_bar_live","top_bar_user","top_bar_featured","top_bar_game","top_bar_vod","top_bar_clip"],rf=[Kc,cl,pl,Zc,_l,fl],cf=!1;function lf(e){if(!(cf||Py.FirstLoad||G_()))switch(e.keyCode){case La:Ku()?(ff(),Yu()):Xu()?(ff(),zu()):yl.Main_Go===Qc?(yl.Main_OldgameSelected=yl.Main_gameSelected,yl.Games_return?(yl.Main_Go=il,yl.Main_gameSelected=yl.gameSelectedOld):(yl.Main_Go=yl.Main_BeforeAgame,yl.Main_BeforeAgame=Kc),So(),_f(),o_()):yl.Main_Go===hl?(Ky(Qc),_f(),o_()):yl.Main_Go===nl?(Ky(cl),_f(),o_()):yl.Main_Go===rl?(Ky(sl),_f(),o_()):yl.Main_Go===ml?(yl.Main_Go=Qc,ms(),_f(),o_()):yl.Main_Go===el?(yl.Main_Go=cl,eE(),_f(),o_()):yl.Main_Go===tl?(yl.Main_Go=cl,AC(),_f(),o_()):yl.Main_Go===vl?(yl.Main_Go=cl,rS(),_f(),o_()):yl.Main_Go===ll?(yl.Main_Go=cl,oC(),_f(),o_()):yl.Main_Go===sl?(yl.Main_Go=yl.Main_BeforeChannel,yl.Main_BeforeChannel=Kc,Qs(),yl.Main_selectedChannel_id="",_f(),o_()):yl.Main_Go===dl?(yl.Main_Go=sl,$d(),_f(),o_()):yl.Main_Go===ol?(yl.Main_Go===yl.Main_BeforeSearch?yl.Main_Go=Kc:yl.Main_Go=yl.Main_BeforeSearch,ik(),yl.Search_isSearching=!1,_f(),o_()):yl.Main_Go===il?(yl.Main_Go===yl.Main_BeforeSearch?yl.Main_Go=Kc:yl.Main_Go=yl.Main_BeforeSearch,yl.Search_isSearching=!1,vw(),_f(),o_()):yl.Main_Go===ul?(yl.Main_Go===yl.Main_BeforeSearch?yl.Main_Go=Kc:yl.Main_Go=yl.Main_BeforeSearch,yl.Main_selectedChannel_id&&kd(),Vb(),yl.Search_isSearching=!1,_f(),o_()):(_f(),nf(lf));break;case xa:if(yl.Search_isSearching||yl.Main_Go===sl||yl.Main_Go===dl||yl.Main_Go===rl||yl.Main_Go===ol||yl.Main_Go===il||yl.Main_Go===ul)break;xu(df[yl.Main_CenterLablesVectorPos],"icon_center_line"),yl.Main_CenterLablesVectorPos++,5<yl.Main_CenterLablesVectorPos&&(yl.Main_CenterLablesVectorPos=0),ff(),mf();break;case Sa:if(yl.Search_isSearching||yl.Main_Go===sl||yl.Main_Go===dl||yl.Main_Go===rl||yl.Main_Go===ol||yl.Main_Go===il||yl.Main_Go===ul)break;xu(df[yl.Main_CenterLablesVectorPos],"icon_center_line"),yl.Main_CenterLablesVectorPos--,yl.Main_CenterLablesVectorPos<0&&(yl.Main_CenterLablesVectorPos=5),ff(),mf();break;case Pa:xu(df[yl.Main_CenterLablesVectorPos],"icon_center_line"),document.body.removeEventListener("keydown",lf),kl=!1,o_();break;case Ta:pf()}}function uf(e){window.clearTimeout(Dc),a_(),document.body.removeEventListener("keydown",e),document.body.removeEventListener("keydown",lf),document.body.addEventListener("keydown",lf,!1),ff()}function _f(){xu(df[yl.Main_CenterLablesVectorPos],"icon_center_line"),document.body.removeEventListener("keydown",lf),kl=!1}function ff(){kl=!0,Iu(df[yl.Main_CenterLablesVectorPos],"icon_center_line")}function mf(){r_(yl.Main_Go),yl.Main_Go=rf[yl.Main_CenterLablesVectorPos],yl.Main_Go!==cl||io()?i_(!0):(yl.Main_Go=$c,_f(),i_())}function hf(){yl.Main_Go===Kc?(Py=ob,document.body.removeEventListener("keydown",Qy)):yl.Main_Go===cl?document.body.removeEventListener("keydown",HE):yl.Main_Go===Qc?document.body.removeEventListener("keydown",zo):yl.Main_Go===pl?(Py=sb,document.body.removeEventListener("keydown",Qy)):yl.Main_Go===ol?document.body.removeEventListener("keydown",pk):yl.Main_Go===il?document.body.removeEventListener("keydown",Iw):yl.Main_Go===ul?document.body.removeEventListener("keydown",nw):yl.Main_Go===dl?document.body.removeEventListener("keydown",ur):yl.Main_Go===sl?document.body.removeEventListener("keydown",Cd):yl.Main_Go===tl?document.body.removeEventListener("keydown",jC):yl.Main_Go===vl?document.body.removeEventListener("keydown",ES):yl.Main_Go===ll?document.body.removeEventListener("keydown",pC):yl.Main_Go===Zc?(Py=ab,document.body.removeEventListener("keydown",Qy)):yl.Main_Go===rl?(Py=tb,document.body.removeEventListener("keydown",Qy)):yl.Main_Go===_l?document.body.removeEventListener("keydown",pI):yl.Main_Go===fl?(Py=eb,document.body.removeEventListener("keydown",Qy)):yl.Main_Go===hl?(Py=nb,document.body.removeEventListener("keydown",Qy)):yl.Main_Go===nl?(Py=ib,document.body.removeEventListener("keydown",Qy)):yl.Main_Go===ml?document.body.removeEventListener("keydown",xs):yl.Main_Go===el&&document.body.removeEventListener("keydown",hE)}function pf(){window.clearTimeout(Dc),a_(),yl.Main_Go!==sl&&(yl.Main_BeforeChannelisSet=!1),yl.Main_Go!==Qc&&(yl.Main_BeforeAgameisSet=!1),Fu(),yl.Main_Go===Kc?(Py=ob,Ny()):yl.Main_Go===cl?SE():yl.Main_Go===pl?(Py=sb,Ny()):yl.Main_Go===Qc?Io():yl.Main_Go===ll?sC():yl.Main_Go===sl?ed():yl.Main_Go===dl?Zd():yl.Main_Go===ol?ok():yl.Main_Go===il?gw():yl.Main_Go===ul?Jb():yl.Main_Go===Zc?(Py=ab,Ny()):yl.Main_Go===nl?(Py=ib).loadingData||Py.key_refresh():yl.Main_Go===_l?ZS():yl.Main_Go===fl?(Py=eb,Ny()):yl.Main_Go===hl?(Py=nb,Ny()):yl.Main_Go===rl?(Py=tb,Ny()):yl.Main_Go===ml?hs():yl.Main_Go===el?tE():yl.Main_Go===tl?NC():yl.Main_Go===vl&&cS(),Dc=window.setTimeout(n_,3e3)}function vf(e,t){localStorage.setItem(e,t)}function gf(e,t){return parseInt(localStorage.getItem(e))||t}function yf(e,t){return JSON.parse(localStorage.getItem(e))||t}function bf(e,t){var n=t.toString();return(localStorage.getItem(e)||n)===n?t:!t}function wf(e){console.log(e);for(var t=0;t<e.length;t++)console.log("Character is: "+e.charAt(t)+" it's Unicode is: \\u"+e.charCodeAt(t).toString(16).toUpperCase())}function kf(e){console.log("processCode");var t="";t=e.match(/code=(\w+)/),Ml=t?(t=t[1],console.log("if code "+t),t):(console.log("else code "+t),0)}function Cf(e,t,n,a,i,o,s){var d;if(cu){if(!(d=Android.mreadUrl(e,t,n,a)))return void o();200===(d=JSON.parse(d)).status?i(d.responseText):o()}else(d=new XMLHttpRequest).open("GET",(s?hu:"")+e,!0),d.timeout=t,0<n&&d.setRequestHeader(Yl,Wl),1<n&&d.setRequestHeader(Kl,Ql),2<n&&d.setRequestHeader($l,a),d.ontimeout=function(){},d.onreadystatechange=function(){if(4===d.readyState){if(200===d.status)return void i(d.responseText);o()}},d.send(null)}var Mf=0,Ef=null,Sf=0,If=!1,xf=0,Pf=0,Tf=!1,Lf=0,Bf=2e3,Of=5,Gf="source",Af=Gf,Nf=0,Uf=[],Ff="",Rf=!1,Hf=0,Df=0,qf=1,Vf=!1,Jf=0,zf=!1,Xf=!1,jf=2e3,Wf=[0,5],Yf=0;function Kf(){Lp(),mv(),tp(document.getElementById("stream_info_icon"),yl.Main_selectedChannelLogo),Tu("stream_info_name",yl.Main_selectedChannelDisplayname),Pu("stream_info_title",lb),Pu("stream_info_game",rb+", "+cb+", "+fb),Tu("stream_live_icon",_b),Tu("progress_bar_duration",kp(Yf)),my((Ah=Wf)[1]),yl.Play_isHost=!1,Tu("progress_bar_current_time",kp(0)),Tu("stream_live_time",""),Tu("stream_watching_time",""),Vf=null!==yl.ChannelVod_vodId,tc=Nt+".",Vf?(ec=Yd,rc()):Gc(),Pu("pause_button",'<i class="strokedbig icon-pause" style="color: #FFFFFF; font-size: 180%;"></i>'),Eu("progress_pause_holder"),pm(),Eu("scene_channel_panel_bottom"),Eu("chat_box"),Sf=Jf=0,window.clearInterval(Ef),Xf=!1,Im=-13,Hf=Df=0,Nf=2,kv(3),ph=!1,cv(),Zi()?(Va=!0,Ja=yl.Main_selectedChannel_id,oi()):Tp(),document.addEventListener("visibilitychange",im,!1),If=!1,Tf=!(Pf=xf=0),$f(),document.body.removeEventListener("keyup",L_)}function $f(){Lf=0,Bf=2e3,Zf()}function Zf(){Cf("https://clips.twitch.tv/api/v2/clips/"+ub+"/status",Bf,1,null,em,Qf,!0)}function Qf(){++Lf<Of?(Bf+=250,Zf()):(Bp(),xv(3))}function em(e){Uf=[],e=JSON.parse(e).quality_options;for(var t=0;t<e.length;t++)Uf.length?Uf.push({id:e[t].quality+"p"+tm(e[t].frame_rate),url:e[t].source}):Uf.push({id:e[t].quality+"p"+tm(e[t].frame_rate)+" (source)",url:e[t].source});Df=qf,nm()}function tm(e){return 40<e?60:""}function nm(){window.clearInterval(Ef),Ff=Uf[Nf=0].url,-1!==Gf.indexOf("source")&&(Gf="source");for(var e=0;e<fm();e++){if(Uf[e].id===Gf){Ff=Uf[Nf=e].url;break}-1!==Uf[e].id.indexOf(Gf)&&(Ff=Uf[Nf=e].url)}Af=Gf,jc&&console.log("PlayClip_onPlayer:",'\n\n"'+Ff+'"\n'),Df=qf,cu&&Tf&&Android.startVideoOffset(Ff,3,Rf?-1:Android.gettime()),Rf=!1,am()}function am(){Ym&&!Zp()&&Kp(),cu&&(Sf=0,Lh=1+jf/1e3,zf=!1,window.clearInterval(Ef),Ef=window.setInterval(om,Bh))}function im(){document.hidden&&dm()}function om(){cu&&(Hf=Android.gettime()),Tf&&Mf===Hf&&!yp()?++Sf>Lh&&(zf&&Xf&&Nf<fm()-1?Nf++:!zf&&Xf&&Jf++,navigator.onLine?1<Jf?gp(Jf,3,sm):(mm(),nm(),Xf=!0):vp(!1,3)):(Sf=Jf=0,Xf=!1),Mf=Hf}function sm(e){if(!e){if(!(Nf<fm()-1))return void vp(!1,3);Nf++}Jf=0,mm(),nm(),Xf=!0}function dm(){Tf&&(Uf=[],rm(),Up(),Ip())}function rm(){window.clearInterval(Ef),cu&&Android.stopVideo(3),Tf=!1,Pc(),xp(),CM(),document.body.removeEventListener("keydown",gm),document.removeEventListener("visibilitychange",im),cm(),document.getElementById("scene2_pannel_0").style.display="none",document.getElementById("scene2_pannel_1").style.width="30%",document.getElementById("quality_name").style.width="77%",document.getElementById("quality_name").style.fontSize="87.5%",Yd=0}function cm(){mg=!1,fg=hg=0,Wp(),Gf=Af,document.getElementById("scene_channel_panel").style.opacity="0",cu&&uy(Android.gettime()/1e3,Yf,!0),Pu("progress_bar_jump_to",ya),document.getElementById("progress_bar_steps").style.display="none",window.clearInterval(Dv)}function lm(){um(),bp(),Dv=window.setInterval(um,1e3),Up(),oy(),_m(),mm(),document.getElementById("scene_channel_panel").style.opacity="1",hm()}function um(){cu&&uy(Android.gettime()/1e3,Yf,!mg)}function _m(){for(var e=Nf=0;e<fm();e++){if(Uf[e].id===Gf){Nf=e;break}-1!==Uf[e].id.indexOf(Gf)&&(Nf=e)}}function fm(){return Uf.length}function mm(){1===fm()?(document.getElementById("quality_arrow_up").style.opacity="0",document.getElementById("quality_arrow_down").style.opacity="0"):Nf?Nf===fm()-1?(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="0.2"):(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="1"):(document.getElementById("quality_arrow_up").style.opacity="0.2",document.getElementById("quality_arrow_down").style.opacity="1"),-1!==(Gf=Uf[Nf].id).indexOf("source")?Tu("quality_name",Gf.replace("source",ye)):Tu("quality_name",Gf)}function hm(){Tm=window.setTimeout(cm,5e3+Cg)}function pm(){document.getElementById("scene2_pannel_1").style.width="18%",document.getElementById("quality_name").style.width="60%",document.getElementById("quality_name").style.fontSize="72%",Tu("open_vod_text",Vf?dn:rn),document.getElementById("scene2_pannel_0").style.display="inline-block"}function vm(){Vf?(yl.vodOffset=Yd,rm(),document.body.addEventListener("keydown",xy,!1),cv(),j_(Pg)):(ph=!0,Op(cn),window.setTimeout(function(){ph=!1,Gp()},2e3))}function gm(e){if(Df!==qf)switch(e.keyCode){case La:Fp()?(Up(),dm()):Np()}else switch(e.keyCode){case Sa:wM()?Nm&&!YC&&(OM(),Nm--,xM()):Om&&!Jp()&&Zp()?(Em++,ov()):Jp()?(Wp(),wg?(uv(),5<++hh&&(hh=0),lv()):(py(-1,Yf),Cg=2500),hm()):hv()?(bv(),gv(),--wh<0&&(wh=3),vv()):lm();break;case xa:wM()?Nm<eM-1&&!YC&&(OM(),Nm++,xM()):!Om||Jp()||hv()?Jp()?(Wp(),wg?(uv(),--hh<0&&(hh=5),lv()):(py(1,Yf),Cg=2500),hm()):hv()?(bv(),gv(),3<++wh&&(wh=0),vv()):lm():vf("ChatEnable",(Ym=Zp()||hv()?($p(),!1):(Kp(),!0))?"true":"false");break;case Ia:hv()?bv():Jp()?(2===wg&&1!==hh?(wg--,sy()):1===wg?(wg--,sy()):0<Nf&&1===hh&&(Nf--,mm()),Wp(),hm()):wM()?wM()?IM():lm():kM();break;case Pa:hv()?bv():Jp()?(wg?1===wg?(wg++,sy()):Nf<fm()-1&&1===hh&&(Nf++,mm()):(wg++,sy()),Wp(),hm()):wM()?CM():Om&&Zp()?(4<++Pm?iv(!(Pm=1)):4===Pm&&iv(!0),nv(!0)):lm();break;case Ta:hv()?wv(3):Jp()?wg?1===wg?(Vf&&yl.Play_ChatForceDisable&&(yp()?Ic(sc):xc()),hv()||rv(3)):Iv(3):(Wp(),hm(),fg&&_y()):wM()?(rm(),F_(Nm,rM,Fv)):lm();break;case La:Jp()?cm():wM()?CM():Fp()?(Up(),dm()):Np();break;case Ma:case Ca:case Ea:Vf&&!yl.Play_ChatForceDisable&&(yp()?Ic(sc):xc()),hv()||rv(3)}}var ym,bm,wm,km,Cm,Mm,Em=0,Sm=Em,Im=-5,xm=.55,Pm=3,Tm=null,Lm="source",Bm=Lm,Om=!0,Gm=!1,Am="",Nm=0,Um=2e3,Fm=0,Rm=1,Hm=2,Dm=0,qm=null,Vm=0,Jm=0,zm=0,Xm="",jm=[],Wm=0,Ym=!1,Km=null,$m=null,Zm=null,Qm="",eh=0,th=5,nh=0,ah=5,ih=0,oh=!1,sh=null,dh=!1,rh=0,ch=null,lh=0,uh=0,_h=!1,fh=!1,mh=!1,hh=1,ph=!1,vh=!1,gh=1e4,yh=2e3,bh="",wh=0,kh=3,Ch=null,Mh="",Eh=0,Sh=0,Ih="",xh=!0,Ph=!1,Th=!1,Lh=7,Bh=1e3,Oh=0,Gh="",Ah=[],Nh=[{top:51.8,left:75.1,sizeOffset:[31,16,0,0]},{top:33,left:75.1,sizeOffset:[12.5,0,-6.25,0]},{top:.2,left:75.1,sizeOffset:[0,0,0,0]},{top:.2,left:38.3,sizeOffset:[0,0,0,0]},{top:.2,left:.2,sizeOffset:[0,0,0,0]},{top:33,left:.2,sizeOffset:[12.5,0,-6.25,0]},{top:51.8,left:.2,sizeOffset:[31,16,0,0]},{top:51.8,left:38.3,sizeOffset:[31,16,0,0]}],Uh=[0,0,0,1,2,2,2,1],Fh=[[0,1,2,2,2,1,0,0],[7,3,3,3,3,3,7,7],[6,5,4,4,4,5,6,6]],Rh=[{containerHeight:17,percentage:"12.5%",dialogTop:15},{containerHeight:32,percentage:"25%",dialogTop:30},{containerHeight:48,percentage:"50%",dialogTop:50},{containerHeight:99.6,percentage:"100%",dialogTop:115}],Hh=1,Dh=["chat_extra_small","chat_size_small","chat_size_default","chat_size_biger","chat_size_bigest"];function qh(){Cm=document.getElementById("chat_container"),Mm=document.getElementById("inner_progress_bar"),Em=gf("ChatPositionsValue",0),Pm=gf("ChatSizeValue",3),Ym=bf("ChatEnable",!1),Om=bf("Play_isFullScreen",!0),nv(!1),av(!1),Jh()}function Vh(e){e?void 0!==ym&&(Em=ym,Pm=wm,(Ym=bm)||$p(),nv(!1)):(ym=Em,bm=Ym,wm=Pm,Em=0,Kp(),Pm=4,iv(Ym=!0),nv(!1),Xr&&(Xr.scrollTop=Xr.scrollHeight)),vf("Play_isFullScreen",Om)}function Jh(){Hh=Ok("chat_font_size");for(var e=0;e<Dh.length;e++)xu("chat_inner_container",Dh[e]);Iu("chat_inner_container",Dh[Hh])}function zh(){Lp(),Pu("stream_live_icon",'<div style="vertical-align: middle; display: inline-block"><i class="icon-circle" style="color: red; font-size: 105%; "></i></div><div style="vertical-align: middle; display: inline-block">'+ya+_.toUpperCase()+"</div>"),h_("stream_info_title"),Vf=!(vh=!1),tp(document.getElementById("stream_info_icon"),fu),yl.Play_isHost?Tu("stream_info_name",yl.Play_DisplaynameHost):Tu("stream_info_name",yl.Play_selectedChannelDisplayname),yl.Play_WasPlaying=1,s_(),Gm=yl.Play_isHost,yl.Play_isHost=!1,Ph=!1,Eu("scene_channel_panel_bottom"),Sh=Eh=0,Tu("stream_watching_time",g+kp(0)),Qm=Cp(0),Tu("stream_live_time",y+Qm+b),Eu("chat_box"),Mu("progress_pause_holder"),kv(1),Im=-5,lh=uh=Oh=0,window.clearInterval(ch),fh=!1,gh=3e3,xh=!(nh=0),Dm=Fm,mh=!(oh=!(zm=Jm=Vm=dh=0)),document.addEventListener("visibilitychange",jh,!1),Yh(),np(),document.body.removeEventListener("keyup",L_),qm=window.setInterval(Zh,6e4)}function Xh(e){Op(e)}function Play_CheckResume(){oh&&jh(),tg&&Fg(),Tf&&(dm(),window.clearInterval(Ef))}function jh(){document.hidden?hv()?(Up(),$p(),Ep()):(xp(),mh=!1,qr(),window.clearInterval(qm)):(oh=!0,Dp(),oh&&(Lp(),gh=3e3,Ph=!(nh=0),vh?Zh():Yh(),Dm=Fm,ih=0,navigator.onLine?np():km=window.setInterval(Wh,100),qm=window.setInterval(Zh,6e4)))}function Wh(){(navigator.onLine||200<ih)&&(window.clearInterval(km),np()),ih++}function Yh(){var e="https://api.twitch.tv/kraken/streams/"+yl.Play_selectedChannel_id,t=new XMLHttpRequest;t.open("GET",e,!0),t.timeout=gh,t.setRequestHeader(Kl,Ql),t.setRequestHeader(Yl,Wl),t.ontimeout=function(){},t.onreadystatechange=function(){4===t.readyState&&(200===t.status?Kh(JSON.parse(t.responseText)):$h())},t.send(null)}function Kh(e){null!==e.stream&&(Tu("stream_info_name",Gm?yl.Play_DisplaynameHost:yl.Play_selectedChannelDisplayname),yl.Play_selectedChannel_id=e.stream.channel._id,Pu("stream_info_title",SI.parse(e.stream.channel.status)),yl.Play_gameSelected=e.stream.game,bh=", ["+e.stream.channel.language.toUpperCase()+"]",Tu("stream_info_game",v+yl.Play_gameSelected+h+$u(e.stream.viewers)+" "+q+bh),yl.Play_selectedChannelLogo=e.stream.channel.logo,vh=!0,tp(document.getElementById("stream_info_icon"),yl.Play_selectedChannelLogo),Qm=e.stream.created_at,Zi()?(Va=!0,Ja=yl.Play_selectedChannel_id,oi()):Tp())}function $h(){nh<ah&&(gh+=500,window.setTimeout(function(){oh&&Yh()},750)),nh++}function Zh(){var e="https://api.twitch.tv/kraken/streams/"+yl.Play_selectedChannel_id;yh=3e3;var t=new XMLHttpRequest;t.ontimeout=function(){},t.onreadystatechange=function(){4===t.readyState&&(200===t.status?(Oh=0,Qh(JSON.parse(t.responseText))):ep())},t.open("GET",e,!0),t.timeout=yh,t.setRequestHeader(Kl,Ql),t.setRequestHeader(Yl,Wl),t.send(null)}function Qh(e){null!==e.stream&&(Pu("stream_info_title",SI.parse(e.stream.channel.status)),yl.Play_gameSelected=e.stream.game,Tu("stream_info_game",v+yl.Play_gameSelected+h+$u(e.stream.viewers)+" "+q+bh),vh||tp(document.getElementById("stream_info_icon"),e.stream.channel.logo))}function ep(){Oh<ah?(window.setTimeout(function(){oh&&Zh()},2500),Oh++):Oh=0}function tp(e,t){e.onerror=function(){this.src=fu,vh=!1},e.src=t}function np(){eh=0,yh=2e3+(Ph?3e3:0),ap()}function ap(){var e,t;if(e=Dm===Fm?"https://api.twitch.tv/api/channels/"+yl.Play_selectedChannel+"/access_token"+(Zi()&&Ni[yl.Users_Position].access_token?"?oauth_token="+Ni[yl.Users_Position].access_token:""):"https://usher.ttvnw.net/api/channel/hls/"+yl.Play_selectedChannel+".m3u8?&token="+encodeURIComponent(Vm.token)+"&sig="+Vm.sig+"&allow_source=true&allow_audi_only=true&fast_bread=true&allow_spectre=false",cu){if(!(t=Android.mreadUrl(e,yh,1,null)))return void op();200===(t=JSON.parse(t)).status?(eh=0,oh&&rp(t.responseText)):403===t.status?sp():404===t.status?Pv():op()}else(t=new XMLHttpRequest).open("GET",hu+e,!0),t.timeout=yh,t.setRequestHeader(Yl,Wl),t.ontimeout=function(){},t.onreadystatechange=function(){4===t.readyState&&(200===t.status?(eh=0,oh&&rp(t.responseText)):403===t.status?(ip(t),Xc?dp():sp()):404===t.status?(ip(t),Xc?dp():Pv()):(ip(t),op()))},t.send(null)}function ip(e){jc&&(console.log(e.status),console.log(e.responseText))}function op(){oh&&xh&&(++eh<th+(Ph?8:0)?(yh+=250,Ph?window.setTimeout(ap,500):ap()):Xc?dp():Pv())}function sp(){Bp(),Op(Dn),window.setTimeout(function(){oh&&Pv()},4e3)}function dp(){jm=[{id:"1080p60(Source)",band:"(10.00Mbps)",url:"http://fake"}],Dm=Hm,oh&&_p()}function rp(e){Dm===Fm?(Vm=JSON.parse(e),Dm=Rm,np()):Dm===Rm&&(jm=cp(Jm=e),Dm=Hm,oh&&_p())}function cp(e){for(var t,n=[],a="",i=1,o=up(e),s=0;s<o.length;s++)a=o[s].split('NAME="')[1].split('"')[0],t=lp(o[s].split("BANDWIDTH=")[1].split(",")[0]),n.length?n[s-i].id!==a&&n[s-i].id!==a+" (source)"?n.push({id:a,band:t,url:o[s].split("\n")[2]}):i++:(-1===a.indexOf("ource")&&(a+=" (source)"),n.push({id:a,band:t,url:o[s].split("\n")[2]}));return n}function lp(e){return 0<(e=parseInt(e))?" ("+parseFloat(e/1e6).toFixed(2)+"Mbps)":""}function up(e){for(var t,n=[],a=/#EXT-X-MEDIA:(.)*\n#EXT-X-STREAM-INF:(.)*\n(.)*/g;t=a.exec(e);)n.push(t[0]);return n}function _p(){window.clearInterval(ch),Xm=jm[Wm=0].url,-1!==Lm.indexOf("source")&&(Lm="source");for(var e=0;e<tv();e++){if(jm[e].id===Lm){Xm=jm[Wm=e].url;break}-1!==jm[e].id.indexOf(Lm)&&(Xm=jm[Wm=e].url)}Bm=Lm,Dm=Hm,jc&&console.log("Play_onPlayer:",'\n\n"'+Xm+'"\n'),cu&&oh&&Android.startVideo(Xm,1),fp()}function fp(){Th=!1,Ym&&!Zp()&&Kp(),mh=!0,mp(),cu&&(lh=0,Lh=1+Um/1e3,_h=!1,window.clearInterval(ch),ch=window.setInterval(hp,Bh))}function mp(){yl.Play_ChatForceDisable?Er():Ac()}function hp(){var e=!yp();cu&&(Eh=Android.gettime()),oh&&rh===Eh&&e?Lh<++lh&&(_h&&fh&&Wm<tv()-1?Wm++:!_h&&fh&&uh++,navigator.onLine?1<uh?gp(uh,1,pp):(ev(),_p(),fh=!0):vp(!1,1)):(lh=uh=0,fh=!1),rh=Eh,e&&Sh++}function pp(e){if(!e){if(!(Wm<tv()-1))return void Pv();Wm++}uh=0,ev(),_p(),fh=!0}function vp(e,t){yl.Play_isHost=e,kv(t),xv(t)}function gp(e,t,n){var a=new XMLHttpRequest;a.timeout=1e3,a.open("GET","https://static-cdn.jtvnw.net/jtv-static/404_preview-10x10.png?"+Math.random(),!0),a.onreadystatechange=function(){4===a.readyState&&(200===a.status?n(2<e):12<e&&vp(!1,t))},a.send(null)}function yp(){return!!cu&&!Android.getPlaybackState()}function bp(){var e=W_();Tu("stream_clock",e),Tu("label_clock",e)}function wp(e){return e<10?"0"+e:e}function kp(e){var t,n,a;return t=wp(parseInt(e)%60),n=wp((e=Math.floor(e/60))%60),a=wp(e=Math.floor(e/60)),e?a+":"+n+":"+t:n+":"+t}function Cp(e){var t,n,a;return t=wp(parseInt(e/1e3)%60),n=wp((e=Math.floor(e/1e3/60))%60),a=wp(e=Math.floor(e/60)),e?a+":"+n+":"+t:n+":"+t}function Mp(e){return Cp((new Date).getTime()-new Date(e).getTime())}function Ep(){oh&&(Sp(),yl.Play_WasPlaying=0,Ip())}function Sp(){cu&&Android.stopVideo(1),oh=!1,CM(),Pc(),xp(),Pp(),yl.Play_selectedChannel_id=""}function Ip(){uy(0,0),Eu("scene1"),Mu("scene2"),t_()}function xp(){zp(),Dp(),Gp(),mv(),Gh="",Wm===tv()-1&&(Bm=jm[0].id),Zv===ly()-1&&(Jv=$v[0].id),Nf===fm()-1&&(Af=Uf[0].id)}function Pp(){mh=!1,document.body.removeEventListener("keydown",Fv),document.removeEventListener("visibilitychange",jh),qr(),window.clearInterval(qm),window.clearInterval(ch),ph=!1}function Tp(){Pu("fallow_text",ya+Ot),Da=!1}function Lp(){cu?Android.mshowLoading(!0):Eu("dialog_loading_play")}function Bp(){cu?Android.mshowLoading(!1):Mu("dialog_loading_play")}function Op(e){Tu("dialog_warning_play_text",e),Eu("dialog_warning_play")}function Gp(){Mu("dialog_warning_play")}function Ap(){return Su("dialog_warning_play")}function Np(){Fp()?Up():(Eu("play_dialog_exit"),Km=window.setTimeout(Np,3e3))}function Up(){window.clearTimeout(Km),Mu("play_dialog_exit")}function Fp(){return Su("play_dialog_exit")}function Rp(){window.clearTimeout($m)}function Hp(){window.clearTimeout(Zm)}function Dp(){Rp(),Hp(),Mu("play_dialog_simple_pause")}function qp(){yp()?Vp()?(Mu("play_dialog_simple_pause"),Zm=window.setTimeout(qp,8e3)):(Eu("play_dialog_simple_pause"),$m=window.setTimeout(qp,1500)):Dp()}function Vp(){return Su("play_dialog_simple_pause")}function Jp(){return"1"===document.getElementById("scene_channel_panel").style.opacity}function zp(){Wp(),document.getElementById("scene_channel_panel").style.opacity="0",Lm=Bm,window.clearInterval(Dv)}function Xp(){cv(),Qp(),ev(),jp(),Dv=window.setInterval(jp,1e3),bp(),Up(),document.getElementById("scene_channel_panel").style.opacity="1",Yp()}function jp(){Tu("stream_watching_time",g+kp(Sh)),Tu("stream_live_time",y+(-1===Qm.indexOf("00:00")?Mp(Qm):Qm)+b)}function Wp(){window.clearTimeout(Tm),Cg=0}function Yp(){Tm=window.setTimeout(zp,5e3)}function Kp(){ov(),Eu("chat_container")}function $p(){Mu("chat_container")}function Zp(){return Su("chat_container")}function Qp(){for(var e=Wm=0;e<tv();e++){if(jm[e].id===Lm){Wm=e;break}-1!==jm[e].id.indexOf(Lm)&&(Wm=e)}}function ev(){1===tv()?(document.getElementById("quality_arrow_up").style.opacity="0",document.getElementById("quality_arrow_down").style.opacity="0"):Wm?Wm===tv()-1?(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="0.2"):(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="1"):(document.getElementById("quality_arrow_up").style.opacity="0.2",document.getElementById("quality_arrow_down").style.opacity="1"),-1!==(Lm=jm[Wm].id).indexOf("source")?Tu("quality_name",Lm.replace("source",ye)+jm[Wm].band):Tu("quality_name",Lm+jm[Wm].band)}function tv(){return jm.length}function nv(e){Cm.style.height=Rh[Pm-1].containerHeight+"%",document.getElementById("play_chat_dialog").style.marginTop=Rh[Pm-1].dialogTop+"%",ov(),Hr(),e&&sv(Rn+Rh[Pm-1].percentage),window.setTimeout(function(){Xr&&(Xr.scrollTop=Xr.scrollHeight)},500),vf("ChatSizeValue",Pm)}function av(e){Cm.style.backgroundColor="rgba(0, 0, 0, "+xm+")",e&&sv(Hn+(100*xm).toFixed(0)+"%")}function iv(e){Em=e?Uh[Sm=Em]:Fh[Em][Sm]}function ov(){var e=4===Pm;Em<0?Em=e?2:7:(e?2:7)<Em&&(Em=0),Cm.style.top=(e?.2:Nh[Em].top+Nh[Em].sizeOffset[Pm-1])+"%",Cm.style.left=Nh[Em+(e?2:0)].left+"%",vf("ChatPositionsValue",Em)}function sv(e){window.clearTimeout(sh),Tu("play_chat_dialog_text",e),Eu("play_chat_dialog"),sh=window.setTimeout(dv,1e3)}function dv(){Mu("play_chat_dialog")}function rv(e){yp()?(Dp(),cu&&Android.play(!0),Pu("pause_button",'<i class="strokedbig icon-pause" style="color: #FFFFFF; font-size: 180%;"></i>'),1===e?(Jp()&&zp(),window.clearInterval(ch),ch=window.setInterval(hp,Bh)):2===e?(Jp()&&ny(),window.clearInterval(dg),dg=window.setInterval($g,Bh)):3===e&&(Jp()&&cm(),window.clearInterval(Ef),Ef=window.setInterval(om,Bh))):(window.clearInterval(ch),window.clearInterval(dg),window.clearInterval(Ef),Pu("pause_button",'<i class="strokedbig icon-play-1" style="color: #FFFFFF; font-size: 180%;"></i>'),cu&&Android.play(!1),qp())}function cv(){uv(),hh=1,lv()}function lv(){Iu("scene2_pannel_"+hh,"playbotton_focus")}function uv(){xu("scene2_pannel_"+hh,"playbotton_focus")}function _v(){zv=Dm=-1,Df=-1,$p(),zp(),cm(),ny(),ph||Gp(),Bp(),Up(),vv()}function fv(){Eu("dialog_end_stream")}function mv(){Mu("dialog_end_stream"),bv(),pv()}function hv(){return Su("dialog_end_stream")}function pv(){gv(),wh=0,vv()}function vv(){Iu("dialog_end_"+wh,"dialog_end_icons_focus")}function gv(){xu("dialog_end_"+wh,"dialog_end_icons_focus")}function yv(e){1===e?Mh=yl.Play_selectedChannelDisplayname+" "+_:2===e?Mh=yl.Main_selectedChannelDisplayname+en:3===e&&(Mh=yl.Main_selectedChannelDisplayname+Nt),Pu("dialog_end_stream_text",Mh+P+oa+nn+kh+"..."),hv()?(zv=Dm=Hm,Df=qf,-1===--kh?(Pu("dialog_end_stream_text",Mh+P+oa+nn+"0..."),Up(),$p(),1===e?Ep():2===e?Qg():3===e&&dm()):Ch=window.setTimeout(function(){yv(e)},1e3)):Ch=window.setTimeout(function(){yv(e)},50)}function bv(){window.clearTimeout(Ch),Pu("dialog_end_stream_text",Mh+P+oa+an)}function wv(e){var t=!0;wh?1===wh?yl.Play_isHost?(yl.Play_DisplaynameHost=yl.Play_selectedChannelDisplayname+ae,yl.Play_selectedChannel=Ih.target_login,yl.Play_selectedChannelDisplayname=Ih.target_display_name,yl.Play_DisplaynameHost=yl.Play_DisplaynameHost+yl.Play_selectedChannelDisplayname,Sp(),document.body.addEventListener("keydown",Fv,!1),yl.Play_selectedChannel_id=Ih.target_id,j_(zh)):vm():2===wh?Cv(e):3===wh&&Ev(e):2===e?$v.length?(cg=!(Sg=!0),Yg(),Dp(),ec=gg=0,rc()):(t=!1,Op(ea),window.setTimeout(function(){Gp()},2e3)):3===e&&(Uf.length?(zf=!(Rf=!0),nm(),Dp(),Vf?(gg=0,ec=Yd,rc()):Gc()):(t=!1,Op(ea),window.setTimeout(function(){Gp()},2e3))),1!==wh&&3===wh&&""===yl.Play_gameSelected&&(t=!1),t&&mv()}function kv(e){e?1===e?(gv(),wh=2,vv(),document.getElementById("dialog_end_0").style.display="none",document.getElementById("dialog_end_1").style.display="none"):2===e?(pv(),document.getElementById("dialog_end_0").style.display="inline-block",document.getElementById("dialog_end_1").style.display="none"):3===e&&(pv(),document.getElementById("dialog_end_0").style.display="inline-block",document.getElementById("dialog_end_1").style.display="inline-block",Tu("dialog_end_vod_text",Vf?dn:rn)):(gv(),wh=1,vv(),document.getElementById("dialog_end_0").style.display="none",document.getElementById("dialog_end_1").style.display="inline-block",Tu("dialog_end_vod_text",_n))}function Cv(e){yl.Main_BeforeChannelisSet||yl.Main_Go===dl||yl.Main_Go===rl||(yl.Main_BeforeChannel=yl.Main_BeforeAgameisSet&&yl.Main_Go!==Qc?yl.Main_BeforeAgame:yl.Main_Go,yl.Main_BeforeChannelisSet=!0),r_(yl.Main_Go),yl.Main_Go=sl,1===e?(yl.Main_selectedChannel_id=yl.Play_selectedChannel_id,yl.Main_selectedChannel=yl.Play_selectedChannel,yl.Main_selectedChannelDisplayname=yl.Play_selectedChannelDisplayname,Hs=Da,$p(),Ep()):2===e?Qg():3===e&&dm()}function Mv(e){yl.Search_isSearching||(yl.Main_BeforeSearch=yl.Main_Go),r_(yl.Main_Go),yl.Main_Go=al,1===e?($p(),Ep()):2===e?Qg():3===e&&dm()}function Ev(e){if(""===yl.Play_gameSelected)return ph=!0,Op(Kn),void window.setTimeout(function(){ph=!1,Gp()},2e3);yl.Main_BeforeAgameisSet||yl.Main_Go===ml||yl.Main_Go===hl||(yl.Main_BeforeAgame=yl.Main_BeforeChannelisSet&&yl.Main_Go!==sl&&yl.Main_Go!==dl&&yl.Main_Go!==rl?yl.Main_BeforeChannel:yl.Main_Go,yl.Main_BeforeAgameisSet=!0),r_(yl.Main_Go),yl.Main_Go=Qc,Co=!1,yl.Main_gameSelected=yl.Play_gameSelected,$p(),1===e?Ep():2===e?Qg():3===e&&dm()}function Sv(){Zi()&&Ni[yl.Users_Position].access_token?Da?fi():li():(Op(Gt),ph=!0,window.setTimeout(function(){Gp(),ph=!1},2e3))}function Iv(e){hh?1===hh?(1===e?(_p(),zp()):2===e?(cg=!1,Yg(),ny()):3===e&&(zf=!1,nm(),cm()),Dp()):2===hh?(Ja=1===e?yl.Play_selectedChannel_id:yl.Main_selectedChannel_id,Sv(),Wp(),1===e?Yp():2===e?dy():3===e&&hm()):3===hh?Ev(e):4===hh?Cv(e):5===hh&&Mv(e):vm()}function Play_PannelEndStart(e){1===e?(window.clearInterval(ch),Pv()):xv(e)}function xv(e){window.clearInterval(ch),window.clearInterval(Ef),window.clearInterval(dg),_v(),kh=3,yv(e),fv(e)}function Pv(){Lp(),Dm=-1,eh=0,yh=2e3,qr(),window.clearInterval(qm),window.clearInterval(ch),""!==yl.Play_selectedChannel_id?Ov():Tv()}function Tv(){var e="https://api.twitch.tv/kraken/users?login="+yl.Play_selectedChannel,t=new XMLHttpRequest;t.open("GET",e,!0),t.timeout=yh,t.setRequestHeader(Yl,Wl),t.setRequestHeader(Kl,Ql),t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void Lv(JSON.parse(t.responseText).users[0]);Bv()}},t.send(null)}function Lv(e){void 0!==e?(yl.Play_selectedChannel_id=e._id,eh=0,yh=2e3,Ov()):xv(1)}function Bv(){++eh<th?(yh+=250,Tv()):vp(!1,1)}function Ov(){var e,t="https://tmi.twitch.tv/hosts?include_logins=1&host="+encodeURIComponent(yl.Play_selectedChannel_id);if(cu){if(!(e=Android.mreadUrl(t,yh,1,null)))return void Gv();200===(e=JSON.parse(e)).status?Av(e.responseText):Gv()}else(e=new XMLHttpRequest).open("GET",hu+t,!0),e.timeout=yh,e.setRequestHeader(Yl,Wl),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void Av(e.responseText);Gv()}},e.send(null)}function Gv(){++eh<th?(yh+=250,Ov()):vp(!1,1)}function Av(e){void 0!==(Ih=JSON.parse(e).hosts[0]).target_login?(ph=!0,Op(yl.Play_selectedChannelDisplayname+un+ae+Ih.target_display_name),window.setTimeout(function(){ph=!1},4e3),kv(0),yl.Play_isHost=!0):(kv(1),yl.Play_isHost=!1),xv(1)}function Nv(){Da?(Pu("fallow_heart",'<i class="icon-heart strokicon" style="color: #00b300; font-size: 210%;"></i>'),Pu("fallow_text",ya+It)):(Pu("fallow_heart",'<i class="icon-heart-o strokicon" style="color: #FFFFFF; font-size: 210%;"></i>'),Pu("fallow_text",ya+xt))}function Uv(e){hv()&&!Fp()?(bv(),Np()):wM()?CM():Jp()&&!Cy()?e?ny():zp():Cy()&&Fp()?(ky(),ey(!1),Ip()):Fp()?(Up(),$p(),e?Qg():Ep()):(Ap()&&Gp(),Np())}function Fv(e){if(Dm!==Hm)switch(e.keyCode){case La:Fp()?(Up(),$p(),Ep()):Np()}else switch(e.keyCode){case Sa:wM()?Nm&&!YC&&(OM(),Nm--,xM()):Om&&!Jp()&&Zp()?(Em++,ov()):Jp()?(uv(),5<++hh&&(hh=1),lv(),Wp(),Yp()):hv()?(bv(),gv(),--wh<(yl.Play_isHost?1:2)&&(wh=3),vv()):Xp();break;case xa:wM()?Nm<eM-1&&!YC&&(OM(),Nm++,xM()):!Om||Jp()||hv()?Jp()?(uv(),--hh<1&&(hh=5),lv(),Wp(),Yp()):hv()?(bv(),gv(),3<++wh&&(wh=yl.Play_isHost?1:2),vv()):Xp():vf("ChatEnable",(Ym=Zp()||hv()?($p(),!1):(Kp(),!0))?"true":"false");break;case Ia:Jp()?(0<Wm&&1===hh&&(Wm--,ev()),Wp(),Yp()):!wM()&&Zi()?kM():hv()?bv():wM()&&IM();break;case Pa:Jp()?(Wm<tv()-1&&1===hh&&(Wm++,ev()),Wp(),Yp()):wM()?CM():Om&&Zp()?(4<++Pm?iv(!(Pm=1)):4===Pm&&iv(!0),nv(!0)):hv()?bv():Xp();break;case Ta:hv()?wv(1):Jp()?Iv(1):wM()?yl.Play_selectedChannel!==JSON.parse(document.getElementById(rM[8]+Nm).getAttribute(au))[0]?(Sp(),F_(Nm,rM,Fv)):MM():Xp();break;case La:Uv(!1);break;case Ma:case Ca:case Ea:hv()||rv(1)}}var Rv,Hv,Dv,qv,Vv="source",Jv=Vv,zv=0,Xv=null,jv=0,Wv=0,Yv=0,Kv="",$v=[],Zv=0,Qv=0,eg=5,tg=!1,ng=2e3,ag=0,ig=5,og=1e4,sg=0,dg=null,rg=0,cg=!1,lg=0,ug=!1,_g=!1,fg=0,mg=!1,hg=0,pg=2e3,vg=!1,gg=0,yg={},bg=0,wg=0,kg=!0,Cg=0,Mg=0,Eg=0,Sg=!1,Ig=[0,10,30,60,120,300,600,900,1200,1800],xg=!1;function Pg(){Lp(),mv(),gg=0,Tu("stream_live_time",""),Tu("stream_watching_time",""),Tu("progress_bar_current_time",kp(0)),tc=A+".",Pu("pause_button",'<i class="strokedbig icon-pause" style="color: #FFFFFF; font-size: 180%;"></i>'),Mu("progress_pause_holder"),Mg=0,my((Ah=Ig)[1]),zv=Fm,Vf=!0,Yd=0,yl.Play_isHost=!1,yl.vodOffset?(Lg(),Ag()):(kg&&""!==yl.Main_selectedChannel_id?(tp(document.getElementById("stream_info_icon"),yl.Main_selectedChannelLogo),yg["#"+yl.ChannelVod_vodId]||rc(),Zi()?(Ja=yl.Main_selectedChannel_id,Va=!0,oi()):Tp()):(Lg(),Bg()),Tu("stream_info_name",yl.Main_selectedChannelDisplayname),Pu("stream_info_title",zd),Pu("stream_info_game",Xd+", ["+Rd.toUpperCase()+"]"),Tu("stream_live_icon",jd)),yg["#"+yl.ChannelVod_vodId]&&!yl.vodOffset?(Bp(),wy()):Tg()}function Tg(){Eu("chat_box"),window.setTimeout(function(){Eu("scene_channel_panel_bottom"),Pu("pause_button",'<i class="strokedbig icon-pause" style="color: #FFFFFF; font-size: 180%;"></i>'),Eu("progress_pause_holder")},1e3),Tu("progress_bar_duration",kp(Nd)),yl.Play_WasPlaying=2,s_(),qv=window.setInterval(Hg,6e4),w_(Gh),rg=lg=0,window.clearInterval(dg),ph=vg=ug=!(Im=-13),mg=!1,Yv=Wv=jv=hg=0,document.addEventListener("visibilitychange",Fg,!1),xg=!(tg=!(_g=!1)),Dg(),kv(2),document.body.removeEventListener("keyup",L_)}function Lg(){ag=0,ig=5,og=1e4}function Bg(){var e="https://api.twitch.tv/kraken/users?login="+encodeURIComponent(yl.Main_selectedChannel),t=new XMLHttpRequest;t.open("GET",e,!0),t.timeout=og,t.setRequestHeader(Yl,Wl),t.setRequestHeader(Kl,Ql),t.ontimeout=function(){},t.onreadystatechange=function(){4===t.readyState&&(200===t.status?Og(JSON.parse(t.responseText).users[0]):Gg())},t.send(null)}function Og(e){void 0!==e?(yl.Main_selectedChannelLogo=e.logo,yl.Main_selectedChannel_id=e._id,yg["#"+yl.ChannelVod_vodId]||rc(),Zi()?(Ja=yl.Main_selectedChannel_id,Va=!0,oi()):Tp()):(yl.Main_selectedChannelLogo=fu,yl.Main_selectedChannel_id=""),tp(document.getElementById("stream_info_icon"),yl.Main_selectedChannelLogo)}function Gg(){++ag<ig?(og+=500,window.setTimeout(function(){tg&&Bg()},750)):Hv=window.setTimeout(Bg,2500)}function Ag(){var e="https://api.twitch.tv/kraken/videos/"+yl.ChannelVod_vodId,t=new XMLHttpRequest;t.open("GET",e,!0),t.timeout=og,t.setRequestHeader(Yl,Wl),t.setRequestHeader(Kl,Ql),t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void Ug(t.responseText);Ng()}},t.send(null)}function Ng(){++ag<ig&&(og+=2e3,Ag())}function Ug(e){e=JSON.parse(e),Pu("stream_info_title",SI.parse(e.title)),Pu("stream_info_game",$t+v+e.game+", "+$u(e.views)+D+", ["+e.language.toUpperCase()+"]"),Tu("stream_live_icon",R+__(e.created_at)),Tu("progress_bar_duration",kp(Nd=parseInt(e.length))),gg=1e3*yl.vodOffset,uy(yl.vodOffset,Nd,!0),yl.Main_selectedChannelDisplayname=e.channel.display_name,Tu("stream_info_name",yl.Main_selectedChannelDisplayname),yl.Main_selectedChannelLogo=e.channel.logo,tp(document.getElementById("stream_info_icon"),yl.Main_selectedChannelLogo),yl.Main_selectedChannel_id=e.channel._id,yl.Main_selectedChannel=e.channel.name,Zi()?(Va=!0,Ja=yl.Main_selectedChannel_id,oi()):Tp(),w_(e.increment_view_count_url)}function Fg(){document.hidden?hv()?(Up(),$p(),Qg()):(Hg(),vy(),xc(),xp(),window.clearInterval(dg),window.clearInterval(qv)):(tg=!0,Dp(),tg&&(Lp(),ih=ih=0,navigator.onLine?Kg():km=window.setInterval(Rg,100),Ic(sc),kv(2),qv=window.setInterval(Hg,6e4)))}function Rg(){(navigator.onLine||200<ih)&&(window.clearInterval(km),zv=Fm,Dg()),ih++}function Hg(){yl.vodOffset=cu?parseInt(Android.gettime()/1e3):0,s_(),yl.vodOffset=0}function Dg(){Qv=0,pg=2e3,qg()}function qg(){var e,t;if(e=zv===Fm?"https://api.twitch.tv/api/vods/"+yl.ChannelVod_vodId+"/access_token"+(Zi()&&Ni[yl.Users_Position].access_token?"?oauth_token="+Ni[yl.Users_Position].access_token:""):"https://usher.ttvnw.net/vod/"+yl.ChannelVod_vodId+".m3u8?&nauth="+encodeURIComponent(jv.token)+"&nauthsig="+jv.sig+"&allow_source=true&allow_audi_only=true&allow_spectre=false",cu){if(!(t=Android.mreadUrl(e,yh,1,null)))return void Vg();200===(t=JSON.parse(t)).status?(Qv=0,tg&&zg(t.responseText)):Vg()}else(t=new XMLHttpRequest).open("GET",hu+e,!0),t.timeout=pg,t.setRequestHeader(Yl,Wl),t.ontimeout=function(){},t.onreadystatechange=function(){4===t.readyState&&(200===t.status?(Qv=0,tg&&zg(t.responseText)):Vg())},t.send(null)}function Vg(){if(tg){var e;if(jv.token&&(e=JSON.parse(jv.token)),e&&0!==JSON.parse(jv.token).chansub.restricted_bitrates.length)return void Xg();++Qv<eg?(pg+=250,qg()):Xc?Jg():(Bp(),xv(2))}}function Jg(){$v=[{id:"1080p60(Source)",band:"(10.00Mbps)",url:"http://fake"}],zv=Hm,tg&&Yg()}function zg(e){zv===Fm?(jv=JSON.parse(e),zv=Rm,Dg()):zv===Rm&&($v=cp(Wv=e),zv=Hm,tg&&Yg())}function Xg(){Zi()&&Ni[yl.Users_Position].access_token?(Ja=yl.Main_selectedChannel_id,pi()):(Bp(),Op(T+Pt),window.setTimeout(function(){tg&&Qg()},4e3))}function jg(){Bp(),Op(T+Tt),window.setTimeout(function(){tg&&Qg()},4e3)}function Wg(){xg?(Bp(),Op(T+Lt),window.setTimeout(function(){tg&&Qg()},4e3)):(xg=!0,zv=Fm,Dg())}function Yg(){window.clearInterval(dg),Kv=$v[Zv=0].url,-1!==Vv.indexOf("source")&&(Vv="source");for(var e=0;e<ly();e++){if($v[e].id===Vv){Kv=$v[Zv=e].url;break}-1!==$v[e].id.indexOf(Vv)&&(Kv=$v[Zv=e].url)}Jv=Vv,Kg()}function Kg(){jc&&console.log("PlayVod_onPlayer:",'\n\n"'+Kv+'"\n'),yl.vodOffset?(ec=yl.vodOffset,rc(),cu&&tg&&Android.startVideoOffset(Kv,2,Sg?-1:1e3*yl.vodOffset),yl.vodOffset=0):cu&&tg&&Android.startVideoOffset(Kv,2,Sg?-1:Android.gettime()),Sg=!1,Ym&&!Zp()&&Kp(),cu&&(rg=0,Lh=3+ng/1e3,cg=!1,window.clearInterval(dg),dg=window.setInterval($g,Bh))}function $g(){cu&&(gg=Android.gettime()),tg&&sg===gg&&!yp()?++rg>Lh&&(cg&&ug&&Zv<ly()-1?Zv++:!cg&&ug&&lg++,navigator.onLine?1<lg?gp(lg,2,Zg):(cy(),Yg(),ug=!0):vp(!1,2)):(rg=lg=0,ug=!1),sg=gg}function Zg(e){if(!e){if(!(Zv<ly()-1))return void vp(!1,2);Zv++}lg=0,cy(),Yg(),ug=!0}function Qg(){tg&&($v=[],ey(!0),Ip())}function ey(e){e&&vy(),cu&&Android.stopVideo(2),tg=!1,window.clearInterval(qv),window.clearInterval(Hv),yl.Play_WasPlaying=0,kg=!0,Pc(),CM(),xp(),ty()}function ty(){document.body.removeEventListener("keydown",xy),document.removeEventListener("visibilitychange",Fg),yl.vodOffset=0,window.clearInterval(Xv),window.clearInterval(dg),Nd=0}function ny(){mg=!1,fg=hg=0,Wp(),document.getElementById("scene_channel_panel").style.opacity="0",cu&&uy(Android.gettime()/1e3,Nd,!0),Pu("progress_bar_jump_to",ya),document.getElementById("progress_bar_steps").style.display="none",Vv=Jv,window.clearInterval(Dv)}function ay(e){iy(),bp(),Up(),Dv=window.setInterval(iy,1e3),e&&(oy(),ry(),cy(),dy()),document.getElementById("scene_channel_panel").style.opacity="1"}function iy(){cu&&uy(Android.gettime()/1e3,Nd,!mg)}function oy(){wg=yp()?1:0,sy()}function sy(){wg?1===wg?(Iu("pause_button","progress_bar_div_focus"),xu("progress_bar_div","progress_bar_div_focus"),uv(),Pu("progress_bar_jump_to",ya),document.getElementById("progress_bar_steps").style.display="none"):2===wg&&(xu("pause_button","progress_bar_div_focus"),xu("progress_bar_div","progress_bar_div_focus"),lv(),Pu("progress_bar_jump_to",ya),document.getElementById("progress_bar_steps").style.display="none"):(xu("pause_button","progress_bar_div_focus"),Iu("progress_bar_div","progress_bar_div_focus"),uv(),fg&&(hy(),document.getElementById("progress_bar_steps").style.display="inline-block"))}function dy(){Tm=window.setTimeout(ny,5e3+Cg)}function ry(){for(var e=Zv=0;e<ly();e++){if($v[e].id===Vv){Zv=e;break}-1!==$v[e].id.indexOf(Vv)&&(Zv=e)}}function cy(){1===ly()?(document.getElementById("quality_arrow_up").style.opacity="0",document.getElementById("quality_arrow_down").style.opacity="0"):Zv?Zv===ly()-1?(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="0.2"):(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="1"):(document.getElementById("quality_arrow_up").style.opacity="0.2",document.getElementById("quality_arrow_down").style.opacity="1"),-1!==(Vv=$v[Zv].id).indexOf("source")?Tu("quality_name",Vv.replace("source",ye)+$v[Zv].band):Tu("quality_name",Vv+$v[Zv].band)}function ly(){return $v.length}function uy(e,t,n){Tu("progress_bar_current_time",kp(e)),n&&(Mm.style.width=e/t*100+"%")}function _y(){Dp(),hv()||(zf=cg=!1,tg?(cu&&Android.startVideoOffset(Kv,2,0<Eg?1e3*Eg:-1),ec=Eg):(ec=Yd,cu&&Android.startVideoOffset(Ff,3,0<Eg?1e3*Eg:-1)),Vf&&rc()),Pu("progress_bar_jump_to",ya),document.getElementById("progress_bar_steps").style.display="none",mg=!1,Eg=fg=hg=0}function fy(){Mg=hg=0,my(Ah[1])}function my(e){fg&&!wg&&(document.getElementById("progress_bar_steps").style.display="inline-block"),60<Math.abs(e)?Tu("progress_bar_steps",qn+e/60+Jn):Tu("progress_bar_steps",e?qn+e+Vn:qn+Ah[1]+Vn)}function hy(){Tu("progress_bar_jump_to",_e+" ("+(fg<0?"-":"")+kp(Math.abs(fg))+")"+fe+kp(Eg))}function py(e,t){var n=cu?Android.gettime()/1e3:0;window.clearTimeout(Rv),mg=!0,hg<Ah.length-1&&Mg++%6==0&&hg++,fg+=Ah[hg]*e,Eg=n+fg,tg&&(Eg=10*Math.floor(Eg/10)),t<Eg?(fg=t-n-Ah[1],Eg=n+fg,Mg=hg=0):Eg<0&&(fg=0-n,Eg=Mg=hg=0),hy(),Mm.style.width=Eg/t*100+"%",my(Ah[hg]*e),Rv=window.setTimeout(fy,1e3)}function vy(){var e=cu?parseInt(Android.gettime()/1e3):0,t="#"+yl.ChannelVod_vodId;300<e&&e<Nd-300?(yg[t]&&delete yg[t],yg[t]=e,vf("PlayVod_VodIds",JSON.stringify(yg))):Nd-300<e&&yg[t]&&(delete yg[t],vf("PlayVod_VodIds",JSON.stringify(yg)))}function gy(){yg=yf("PlayVod_VodIds",{});var e=yy();250<e&&by(e-250)}function yy(){var e=0;for(var t in yg)yg.hasOwnProperty(t)&&e++;return e}function by(e){var t=0;for(var n in yg){if(!(t<e))break;delete yg[n],t++}vf("PlayVod_VodIds",JSON.stringify(yg))}function wy(){Mu("scene_channel_panel_bottom"),ay(!1),Pu("dialog_vod_saved_text",Cn+Cp(1e3*yg["#"+yl.ChannelVod_vodId])),Eu("dialog_vod_start")}function ky(){ny(),Mu("dialog_vod_start"),My(),window.setTimeout(function(){Eu("scene_channel_panel_bottom")},1e3)}function Cy(){return Su("dialog_vod_start")}function My(){Sy(),bg=0,Ey()}function Ey(){Iu("dialog_vod_"+bg,"dialog_end_icons_focus")}function Sy(){xu("dialog_vod_"+bg,"dialog_end_icons_focus")}function Iy(e){ky(),e?(delete yg["#"+yl.ChannelVod_vodId],yl.vodOffset=0,Pg()):(yl.vodOffset=yg["#"+yl.ChannelVod_vodId],gg=1e3*yl.vodOffset,uy(yl.vodOffset,Nd,!0),Tg())}function xy(e){if(zv===Hm||Cy())switch(e.keyCode){case Sa:wM()?Nm&&!YC&&(OM(),Nm--,xM()):Om&&!Jp()&&Zp()?(Em++,ov()):Jp()&&!Cy()?(Wp(),wg?(uv(),5<++hh&&(hh=1),lv()):(py(-1,Nd),Cg=2500),dy()):Cy()?(Sy(),bg?bg--:bg++,Ey()):hv()?(bv(),gv(),--wh<0&&(wh=3),1===wh&&(wh=0),vv()):Cy()||ay(!0);break;case xa:wM()?Nm<eM-1&&!YC&&(OM(),Nm++,xM()):!Om||Jp()||hv()?Jp()&&!Cy()?(Wp(),wg?(uv(),--hh<1&&(hh=5),lv()):(py(1,Nd),Cg=2500),dy()):Cy()?(Sy(),bg?bg--:bg++,Ey()):hv()?(bv(),gv(),3<++wh&&(wh=0),1===wh&&(wh=2),vv()):Cy()||ay(!0):vf("ChatEnable",(Ym=Zp()||hv()?($p(),!1):(Kp(),!0))?"true":"false");break;case Ia:hv()?bv():Jp()&&!Cy()?(2===wg&&1!==hh?(wg--,sy()):1===wg?(wg--,sy()):0<Zv&&1===hh&&(Zv--,cy()),Wp(),dy()):wM()?wM()?IM():Cy()||ay(!0):kM();break;case Pa:hv()?bv():Jp()&&!Cy()?(wg?1===wg?(wg++,sy()):Zv<ly()-1&&1===hh&&(Zv++,cy()):(wg++,sy()),Wp(),dy()):wM()?CM():Om&&Zp()?(4<++Pm?iv(!(Pm=1)):4===Pm&&iv(!0),nv(!0)):Cy()||ay(!0);break;case Ta:Cy()?Iy(bg):hv()?wv(2):Jp()?wg?1===wg?(yl.Play_ChatForceDisable&&(yp()?Ic(sc):xc()),hv()||rv(2)):Iv(2):(Wp(),dy(),fg&&_y()):wM()?(ey(!0),F_(Nm,rM,Fv)):ay(!0);break;case La:Uv(!0);break;case Ma:case Ca:case Ea:yl.Play_ChatForceDisable&&(yp()?Ic(sc):xc()),hv()||rv(2)}else switch(e.keyCode){case La:Fp()?(Up(),Qg()):Np()}}var Py={};function Ty(){console.log("InitScreens place holder")}function Ly(){pb(),vb(),yb(),bb(),wb(),Cb(),Mb()}function By(e){return[e+"_thumbdiv",e+"_img",e+"_infodiv",e+"_title",e+"_createdon",e+"_game",e+"_viwers",e+"_duration",e+"_cell","cpempty_",e+"_scroll",e+"_lang"]}function Oy(){for(var e,t={},n=0;n<arguments.length;n+=1){var a=arguments[n],i=Object.keys(a);for(e=0;e<i.length;e+=1)t[i[e]]=a[i[e]]}return t}function Gy(){Ol=-1,yl.Main_Go=Py.screen,Py.label_init(),document.body.addEventListener("keydown",Qy,!1),Py.status?(Eu(Py.ids[10]),y_(Py.posY),Xy(),s_()):Ny()}function Ay(){Ol=0,Py.label_exit(),document.body.removeEventListener("keydown",Qy),Mu(Py.ids[10])}function Ny(){Lu(),h_(Py.table),Vu(),Py.cursor=null,Py.status=!1,Py.row=document.createElement("div"),Py.MaxOffset=0,Py.TopRowCreated=!1,Py.offset=0,Py.idObject={},Py.FirstLoad=!0,Py.itemsCount=0,Py.posX=0,Py.posY=0,Py.row_id=0,Py.coloumn_id=0,Py.data=null,Py.data_cursor=0,Py.dataEnded=!1,Fu(),Uy(),Fy()}function Uy(){Py.loadingData=!0,Py.loadingDataTry=0,Py.loadingDataTimeout=3500}function Fy(){var e;if(Py.set_url(),cu&&!Py.data){if(!(e=Android.mreadUrl(Py.url,Py.loadingDataTimeout,2,null)))return void Ry();200===(e=JSON.parse(e)).status?Py.concatenate(e.responseText):Ry()}else(e=new XMLHttpRequest).open("GET",Py.url,!0),e.timeout=Py.loadingDataTimeout,e.setRequestHeader(Yl,Wl),e.setRequestHeader(Kl,Ql),e.ontimeout=function(){},e.onreadystatechange=function(){4===e.readyState&&(200===e.status?Py.concatenate(e.responseText):Ry())},e.send(null)}function Ry(){Py.loadingDataTry++,Py.loadingDataTry<Py.loadingDataTryMax?(Py.loadingDataTimeout+=500,Fy()):(Py.loadingData=!1,Py.itemsCount?Py.dataEnded=!0:(Py.FirstLoad=!1,Bu(),qu(L)))}function Hy(){var e=Py.data.length-Py.data_cursor;if(e>Py.ItemsLimit?e=Py.ItemsLimit:Py.loadingData||(Py.dataEnded=!0),e){var t=Math.ceil(e/Py.ColoumnsCount),n=Py.row_id+t,a=document.getElementById(Py.table);if(Py.HasSwitches&&!Py.TopRowCreated){Py.TopRowCreated=!0,Py.row=document.createElement("div");var i='<i class="icon-history stream_channel_fallow_icon"></i>'+ya+ya+m;(xl=document.createElement("div")).setAttribute("id",Py.ids[8]+"y_0"),xl.className="stream_cell_period",xl.innerHTML='<div id="'+Py.ids[0]+'y_0" class="stream_thumbnail_channel_vod" ><div id="'+Py.ids[3]+'y_0" class="stream_channel_fallow_game">'+i+"</div></div>",Py.row.appendChild(xl),a.appendChild(Py.row)}for(Py.row_id;Py.row_id<n;){for(Py.coloumn_id===Py.ColoumnsCount&&(Py.row=document.createElement("div"),Py.coloumn_id=0),Py.coloumn_id;Py.coloumn_id<Py.ColoumnsCount&&Py.data_cursor<Py.data.length;Py.data_cursor++)Py.data[Py.data_cursor]&&Py.addCell(Py.data[Py.data_cursor]);if(a.appendChild(Py.row),Py.coloumn_id===Py.ColoumnsCount)Py.row_id++;else if(Py.data_cursor>=Py.data.length)break}}Py.emptyContent=!e&&!Py.status,zy()}function Dy(e,t,n,a){var i=e+"_"+t;return g_(n[1]+i,a),e<Py.ColoumnsCount&&w_(a),(xl=document.createElement("div")).style.cssText=Py.ThumbCssText,i}function qy(e,t,n,a,i,o){var s=Dy(e,t,n,a);return xl.setAttribute("id",n[5]+s),xl.setAttribute(au,i),xl.innerHTML='<div id="'+n[0]+s+'" class="stream_thumbnail_game"><div><img id="'+n[1]+s+'" class="stream_img"></div><div id="'+n[2]+s+'" class="stream_text2"><div id="<div id="'+n[3]+s+'" class="stream_channel">'+i+"</div>"+(""!==o?'<div id="'+n[4]+s+'"class="stream_info_games" style="width: 100%; display: inline-block;">'+o+"</div>":"")+"</div></div>",xl}function Vy(e,t,n,a,i,o,s,d,r,c,l,u,_,f,m,h){var p=Dy(e,t,n,a);return xl.setAttribute("id",n[8]+p),xl.setAttribute(au,JSON.stringify([l,c,s[2],u,i,_,f,m,h,s[0],r,s[1]+s[2]])),xl.innerHTML='<div id="'+n[0]+p+'" class="stream_thumbnail_clip"><div><img id="'+n[1]+p+'" class="stream_img"></div><div id="'+n[2]+p+'" class="stream_text2"><div id="'+n[3]+p+'" class="stream_info" style="width: 72%; display: inline-block; font-size: 85%;">'+i+'</div><div id="'+n[7]+p+'"class="stream_info" style="width:27%; float: right; text-align: right; display: inline-block;">'+r+'</div><div  style="line-height: 12px;"><div id="'+n[4]+p+'"class="stream_info" style="width: 59%; display: inline-block;">'+o[0]+o[1]+'</div><div id="'+n[5]+p+'"class="stream_info" style="width: 39%; display: inline-block; float: right; text-align: right;">'+H+kp(c)+'</div></div><div id="'+n[11]+p+'"class="stream_info">'+s[0]+oa+s[1]+s[2]+'</div><div id="'+n[6]+p+'"class="stream_info">'+d+D+"</div></div></div>",xl}function Jy(e,t,n,a,i){var o=Dy(e,t,a,i[0]);return xl.setAttribute("id",a[8]+o),xl.setAttribute(au,JSON.stringify(n)),xl.innerHTML='<div id="'+a[0]+o+'" class="stream_thumbnail_clip"><div><img id="'+a[1]+o+'" class="stream_img"></div><div id="'+a[2]+o+'" class="stream_text2"><div id="'+a[3]+o+'" class="stream_channel" style="width: 66%; display: inline-block;">'+i[1]+'</div><div id="'+a[7]+o+'"class="stream_info" style="width:33%; float: right; text-align: right; display: inline-block;">'+i[5]+'</div><div id="'+a[4]+o+'"class="stream_info">'+SI.parse(i[2])+'</div><div id="'+a[5]+o+'"class="stream_info">'+v+i[3]+'</div><div id="'+a[6]+o+'"class="stream_info">'+i[4]+"</div></div></div>",xl}function zy(){Py.status?(p_(Py.img_404),Ru(Py.posX,Py.posY,Py.ColoumnsCount,Py.itemsCount)):(Py.emptyContent?qu(Py.empty_str()):(Py.status=!0,p_(Py.img_404)),Gl&&Py.status&&gk.restor_playback.defaultValue?yl.Play_WasPlaying?(r_(yl.Main_Go),yl.Main_Go=gl,yl.vodOffset||(yl.vodOffset=1),Nd=yl.vodOffset+1,Op(zn),1===yl.Play_WasPlaying?R_():q_(),i_(!0),window.setTimeout(function(){ph||Gp()},2e3)):1!==gl?(r_(yl.Main_Go),yl.Main_Go=gl,J_(Py.posY+"_"+Py.posX,Py.ids),i_()):(yl.Never_run&&Wu(),yl.Never_run=!1,Xy(),s_()):(Xy(),s_()),Gl=!1,Py.FirstLoad=!1,Bu())}function Xy(){Py.posY<0?Wy():(Py.addFocus(Py.posY,Py.posX,Py.ids,Py.ColoumnsCount,Py.itemsCount),2<Py.posY&&Py.data_cursor+db>Py.data.length&&!Py.dataEnded&&!Py.loadingData&&(Uy(),Fy()),Py.posY+Py.ItemsReloadLimit>Py.itemsCount/Py.ColoumnsCount&&Py.data_cursor<Py.data.length&&(v_(),Py.loadDataSuccess()),kl&&J_(Py.posY+"_"+Py.posX,Py.ids))}function jy(e,t){J_(Py.posY+"_"+Py.posX,Py.ids),Py.posY+=e,Py.posX=t,Xy()}function Wy(){Iu(Py.ids[0]+"y_0",nu)}function Yy(){xu(Py.ids[0]+"y_0",nu)}function Ky(e){Ku()?Yu():Xu()?zu():(e===Py.screen?yl.Main_Go=Kc:yl.Main_Go=e,Ay())}function $y(e){if(!Py.HasSwitches||Py.posY||-1!==e||Py.emptyContent){if(Py.HasSwitches&&-1===Py.posY)Py.posY=0,Xy(),Yy();else for(var t=0;t<Py.ColoumnsCount;t++)if(e_(Py.posY+e,Py.posX-t,Py.ids[0]))return void jy(e,Py.posX-t)}else J_(Py.posY+"_"+Py.posX,Py.ids),Py.posY=-1,Wy()}function Zy(e,t){e_(Py.posY,Py.posX+e,Py.ids[0])?jy(0,Py.posX+e):e_(Py.posY+e,t,Py.ids[0])&&jy(e,t)}function Qy(e){if(!Py.FirstLoad&&!G_())switch(O_(),e.keyCode){case La:Py.key_exit();break;case Sa:Zy(-1,Py.ColoumnsCount-1);break;case xa:Zy(1,0);break;case Ia:$y(-1);break;case Pa:$y(1);break;case Ma:case Ca:case Ea:case Ta:Py.key_play()}}Py.FirstLoad=!1;var eb,tb,nb,ab,ib,ob,sb,db=100,rb="",cb="",lb="",ub="",_b="",fb="",mb={posX:0,posY:0,row_id:0,coloumn_id:0,dataEnded:!1,idObject:{},loadingData:!1,itemsCount:0,loadingDataTryMax:5,loadingDataTimeout:3500,MaxOffset:0,offset:0,status:!1,emptyContent:!1,itemsCountCheck:!1,FirstLoad:!1,row:0,data:null,data_cursor:0,loadDataSuccess:Hy,set_ThumbSize:function(){this.ThumbCssText="width: "+this.ThumbSize+"%; display: inline-block; padding: 3px;"},key_exit:function(){Ku()?Yu():Xu()?zu():(this.itemsCount&&J_(this.posY+"_"+this.posX,this.ids),uf(Qy))}},hb={ThumbSize:32.65,ItemsLimit:Fl,ItemsReloadLimit:Hl,ColoumnsCount:Rl,addFocus:N_,img_404:mu,empty_str:function(){return B+K},key_play:function(){F_(this.posY+"_"+this.posX,this.ids,Qy)}};function pb(){(ob=Oy(ob=Oy({ids:By("Live"),table:"stream_table_live",screen:Kc,base_url:"https://api.twitch.tv/kraken/streams?limit="+db,set_url:function(){this.offset&&this.offset+db>this.MaxOffset&&(this.dataEnded=!0),this.url=this.base_url+"&offset="+this.offset+(""!==Tl?"&language="+Tl:"")},label_init:function(){yl.Main_CenterLablesVectorPos=0,Iu("top_bar_live","icon_center_focus")},label_exit:function(){xu("top_bar_live","icon_center_focus")},concatenate:function(e){if(this.data){var t=JSON.parse(e);this.MaxOffset=t._total,this.data=this.data.concat(t.streams),this.offset=this.data.length,this.offset>this.MaxOffset&&(this.dataEnded=!0),Py.loadingData=!1}else this.data=JSON.parse(e),this.MaxOffset=this.data._total,this.data=this.data.streams,this.offset=this.data.length,this.offset>this.MaxOffset&&(this.dataEnded=!0),this.loadDataSuccess(),Py.loadingData=!1},addCell:function(e){Py.idObject[e.channel._id]||(Py.itemsCount++,Py.idObject[e.channel._id]=1,Py.row.appendChild(Jy(Py.row_id,Py.coloumn_id,[e.channel.name,e.channel._id,e.channel.status],this.ids,[e.preview.template.replace("{width}x{height}",eu),Qu(JSON.stringify(e.stream_type))+e.channel.display_name,e.channel.status,e.game,y+Mp(e.created_at)+b+", "+h+$u(e.viewers)+q,Zu(e.video_height,e.average_fps,e.channel.language)])),Py.coloumn_id++)}},mb),hb)).set_ThumbSize()}function vb(){(sb=Oy(sb=Oy({ids:By("Featured"),table:"stream_table_featured",screen:pl,base_url:"https://api.twitch.tv/kraken/streams/featured?limit="+db,set_url:function(){this.url=this.base_url+"&offset="+this.offset+(Zi()&&Ni[yl.Users_Position].access_token?"&oauth_token="+Ni[yl.Users_Position].access_token:"")},label_init:function(){yl.Main_CenterLablesVectorPos=2,Iu("top_bar_featured","icon_center_focus")},label_exit:function(){xu("top_bar_featured","icon_center_focus")},concatenate:function(e){this.data=JSON.parse(e),this.data=this.data.featured,this.dataEnded=!0,this.loadDataSuccess(),Py.loadingData=!1},addCell:function(e){e=e.stream,Py.idObject[e.channel._id]||(Py.itemsCount++,Py.idObject[e.channel._id]=1,Py.row.appendChild(Jy(Py.row_id,Py.coloumn_id,[e.channel.name,e.channel._id,e.channel.status],this.ids,[e.preview.template.replace("{width}x{height}",eu),Qu(JSON.stringify(e.stream_type))+e.channel.display_name,e.channel.status,e.game,y+Mp(e.created_at)+b+", "+h+$u(e.viewers)+q,Zu(e.video_height,e.average_fps,e.channel.language)])),Py.coloumn_id++)}},mb),hb)).set_ThumbSize()}var gb={ThumbSize:32.65,ItemsLimit:Fl,HasSwitches:!0,TopRowCreated:!1,ItemsReloadLimit:Hl,ColoumnsCount:Rl,addFocus:N_,cursor:null,period:["day","week","month","all"],img_404:mu,empty_str:function(){return B+U},key_play:function(){-1===this.posY?this.loadingData||(this.periodPos++,4<this.periodPos&&(this.periodPos=1),this.SetPeriod(),Ny()):H_(this.posY+"_"+this.posX,this.ids,Qy)},concatenate:function(e){if(this.data){var t=JSON.parse(e);this.cursor=t._cursor,""===this.cursor&&(this.dataEnded=!0),this.data=this.data.concat(t.clips),Py.loadingData=!1}else this.data=JSON.parse(e),this.cursor=this.data._cursor,""===this.cursor&&(this.dataEnded=!0),this.data=this.data.clips,this.loadDataSuccess(),Py.loadingData=!1},addCell:function(e){Py.idObject[e.tracking_id]||(Py.itemsCount++,Py.idObject[e.tracking_id]=1,Py.row.appendChild(Vy(Py.row_id,Py.coloumn_id,Py.ids,e.thumbnails.medium,e.broadcaster.display_name,[sn,__(e.created_at)],[SI.parse(e.title),v,e.game],$u(e.views),"["+e.language.toUpperCase()+"]",e.duration,e.slug,e.broadcaster.name,e.broadcaster.logo.replace("150x150","300x300"),e.broadcaster.id,null!==e.vod?e.vod.id:null,null!==e.vod?e.vod.offset:null)),Py.coloumn_id++)}};function yb(){(eb=Oy(eb=Oy({ids:By("Clip"),table:"stream_table_clip",screen:fl,periodPos:gf("Clip_periodPos",2),base_url:"https://api.twitch.tv/kraken/clips/top?limit="+db,set_url:function(){this.url=this.base_url+"&period="+this.period[this.periodPos-1]+(this.cursor?"&cursor="+this.cursor:"")+(""!==Tl?"&language="+Tl:"")},SetPeriod:function(){Pu("top_bar_clip",U+u_(Bl[this.periodPos-1])),vf("Clip_periodPos",this.periodPos)},label_init:function(){yl.Main_CenterLablesVectorPos=5,this.SetPeriod(),Iu("top_bar_clip","icon_center_focus"),Cu("label_refresh","icon-refresh",t+Wt)},label_exit:function(){c_(),xu("top_bar_clip","icon_center_focus"),Cu("label_refresh","icon-refresh",t+Wt)}},mb),gb)).set_ThumbSize()}function bb(){(tb=Oy(tb=Oy({ids:By("ChannelClip"),table:"stream_table_channel_clip",screen:rl,periodPos:gf("ChannelClip_periodPos",2),base_url:"https://api.twitch.tv/kraken/clips/top?channel=",set_url:function(){this.url=this.base_url+encodeURIComponent(yl.Main_selectedChannel)+"&limit="+db+"&period="+this.period[this.periodPos-1]+(this.cursor?"&cursor="+this.cursor:"")},SetPeriod:function(){Pu("top_bar_game",U+Bl[this.periodPos-1]),vf("ChannelClip_periodPos",this.periodPos)},label_init:function(){yl.Main_CenterLablesVectorPos=1,!yl.Search_isSearching&&yl.Main_selectedChannel_id&&kd(),yl.Main_selectedChannel!==this.lastselectedChannel&&(this.status=!1),l_(),this.SetPeriod(),Tu("top_bar_user",yl.Main_selectedChannelDisplayname),Cu("label_side_panel","icon-arrow-circle-left",x),this.lastselectedChannel=yl.Main_selectedChannel},label_exit:c_},mb),gb)).set_ThumbSize()}function wb(){(nb=Oy(nb=Oy({ids:By("AGameClip"),table:"stream_table_a_game_clip",screen:hl,periodPos:gf("AGameClip_periodPos",2),base_url:"https://api.twitch.tv/kraken/clips/top?game=",set_url:function(){this.url=this.base_url+encodeURIComponent(yl.Main_gameSelected)+"&limit="+db+"&period="+this.period[this.periodPos-1]+(this.cursor?"&cursor="+this.cursor:"")+(""!==Tl?"&language="+Tl:"")},SetPeriod:function(){Pu("top_bar_game",w+u_(U+Bl[this.periodPos-1]+": "+yl.Main_gameSelected)),vf("AGameClip_periodPos",this.periodPos)},label_init:function(){yl.Main_CenterLablesVectorPos=3,this.SetPeriod(),Iu("top_bar_game","icon_center_focus"),Cu("label_side_panel","icon-arrow-circle-left",x),this.gameSelected!==yl.Main_gameSelected&&(this.status=!1),this.gameSelected=yl.Main_gameSelected},label_exit:function(){xu("top_bar_game","icon_center_focus"),Pu("top_bar_game",f),Cu("label_side_panel","icon-ellipsis",Fn)}},mb),gb)).set_ThumbSize()}var kb={ThumbSize:19.35,ItemsLimit:Dl,ItemsReloadLimit:Vl,ColoumnsCount:ql,addFocus:U_,img_404:_u,empty_str:function(){return B+Z},concatenate:function(e){if(this.data){var t=JSON.parse(e);this.MaxOffset=t._total,this.data=this.data.concat(this.screen===nl?t.follows:t.top),this.offset=this.data.length,this.offset>this.MaxOffset&&(this.dataEnded=!0),Py.loadingData=!1}else this.data=JSON.parse(e),this.MaxOffset=this.data._total,this.data=this.screen===nl?this.data.follows:this.data.top,this.offset=this.data.length,this.isLive?this.dataEnded=!0:this.offset>this.MaxOffset&&(this.dataEnded=!0),this.loadDataSuccess(),Py.loadingData=!1},key_play:function(){yl.Main_gameSelected=document.getElementById(this.ids[5]+this.posY+"_"+this.posX).getAttribute(au),document.body.removeEventListener("keydown",Qy),yl.Main_BeforeAgame=this.screen,yl.Main_Go=Qc,yl.Main_BeforeAgameisSet=!0,Co=!1,Ol=0,document.body.removeEventListener("keydown",Qy),Mu(this.ids[10]),o_(),J_(this.posY+"_"+this.posX,this.ids)},addCell:function(e){var t=this.isLive||this.screen===Zc,n=t?e.game:e;Py.idObject[n._id]||(Py.itemsCount++,Py.idObject[n._id]=1,Py.row.appendChild(qy(Py.row_id,Py.coloumn_id,Py.ids,n.box.template.replace("{width}x{height}",tu),n.name,t?$u(e.channels)+" "+S+h+$u(e.viewers)+q:"")),Py.coloumn_id++)}};function Cb(){(ab=Oy(ab=Oy({ids:By("Game"),table:"stream_table_games",screen:Zc,base_url:"https://api.twitch.tv/kraken/games/top?limit="+db,set_url:function(){this.offset&&this.offset+db>this.MaxOffset&&(this.dataEnded=!0),this.url=this.base_url+"&offset="+this.offset},label_init:function(){yl.Main_CenterLablesVectorPos=3,Iu("top_bar_game","icon_center_focus")},label_exit:function(){xu("top_bar_game","icon_center_focus")}},mb),kb)).set_ThumbSize()}function Mb(){(ib=Oy(ib=Oy({ids:By("UserGames"),table:"stream_table_user_games",screen:nl,isLive:bf("user_Games_live",!0),OldUserName:"",base_url:"https://api.twitch.tv/api/users/",set_url:function(){this.offset&&this.offset+db>this.MaxOffset&&(this.dataEnded=!0),this.url=this.base_url+encodeURIComponent(Ni[yl.Users_Position].name)+"/follows/games",this.isLive?this.url+="/live?limit=750":this.url+="?limit="+db+"&offset="+this.offset},key_refresh:function(){this.isLive=!this.isLive,Pu("top_bar_user",u+u_(Ni[yl.Users_Position].name+" "+(this.isLive?Z:Xt))),Ny(),vf("user_Games_live",this.isLive?"true":"false"),kE&&TE()},label_init:function(){yl.Main_CenterLablesVectorPos=1,Cu("label_refresh","icon-refresh",jt+Z+"/"+Xt+":"+Wt),Cu("label_side_panel","icon-arrow-circle-left",x),Iu("top_bar_user","icon_center_focus"),this.OldUserName!==Ni[yl.Users_Position].name&&(this.status=!1),this.OldUserName=Ni[yl.Users_Position].name,Pu("top_bar_user",u+u_(Ni[yl.Users_Position].name+" "+(this.isLive?Z:Xt)))},label_exit:function(){yl.Users_Position=0,xu("top_bar_user","icon_center_focus"),Cu("label_refresh","icon-refresh",t+Wt),Tu("top_bar_user",u),Cu("label_side_panel","icon-ellipsis",Fn)}},mb),kb)).set_ThumbSize()}var Eb=0,Sb=0,Ib=!1,xb=0,Pb={},Tb=[],Lb=!1,Bb=0,Ob=5,Gb=3500,Ab=0,Nb=0,Ub=!1,Fb=!1,Rb="",Hb=!1,Db=["sc_thumbdiv","sc_img","sc_infodiv","sc_displayname","sc_cell","scempty_","search_channel_scroll"];function qb(){yl.Main_CenterLablesVectorPos=1,yl.Main_Go=ul,yl.isLastSChannels=!0,yl.Search_isSearching=!0,Rb!==yl.Search_data&&(Fb=!1),l_(),Pu("top_bar_user",n+u_(S+" '"+yl.Search_data+"'")),document.body.addEventListener("keydown",nw,!1),Fb?(y_(Eb),Eu(Db[6]),ew(),s_()):Jb()}function Vb(){c_(),document.body.removeEventListener("keydown",nw),Mu(Db[6])}function Jb(){h_("stream_table_search_channel"),Mu(Db[6]),Lu(),Vu(),Rb=yl.Search_data,Fb=!1,Pb={},cf=!(xb=Nb=Ab=0),Eb=Sb=0,Ib=Hb=!(Tb=[]),Fu(),zb(),Xb()}function zb(){v_(),Lb=!0,Bb=0,Gb=3500}function Xb(){var e=xb+Ab;e&&Nb-1<e&&(e=Nb-Jl,Ib=!0),Cf("https://api.twitch.tv/kraken/search/channels?query="+encodeURIComponent(yl.Search_data)+"&limit="+Jl+"&offset="+e,Gb,2,null,Wb,jb)}function jb(){++Bb<Ob?(Gb+=500,Xb()):(Lb=!1,xb?(Ib=!0,Kb()):(cf=!1,Bu(),qu(L)))}function Wb(e){var t=JSON.parse(e),n=t.channels.length;Nb=parseInt(t._total),n<Jl&&(Ib=!0);var a=xb;Ub=!(xb+=n);var i=n/zl;0<n%zl&&i++;for(var o,s,d,r,c,l=0,u=document.getElementById("stream_table_search_channel"),_=0;_<i;_++){for(s=a/zl+_,d=document.createElement("tr"),o=0;o<zl&&l<n;o++,l++)c=(r=t.channels[l])._id,Pb[c]?o--:(Pb[c]=1,d.appendChild(Yb(s,s+"_"+o,[r.name,c,r.logo,r.display_name])));for(;o<zl;o++)Ib&&!Hb&&(Hb=!0,xb=s*zl+o),d.appendChild(k_(Db[5]+s+"_"+o)),Tb.push(Db[5]+s+"_"+o);u.appendChild(d)}Kb()}function Yb(e,t,n){return e<4&&w_(n[2]),C_(t,Db,n)}function Kb(){if(Fb){if(p_(fu),0<Tb.length&&!Ib)return zb(),void $b();Ru(Sb,Eb,zl,xb),Tb=[]}else Ub?qu(d):(Fb=!0,p_(fu),ew(),s_()),Eu(Db[6]),cf=!1,Bu();Lb=!1}function $b(){Du(Tb.length);var e=xb+Ab;e&&Nb-1<e&&(e=Nb-jl,Ib=!0),Cf("https://api.twitch.tv/kraken/search/channels?query="+encodeURIComponent(yl.Search_data)+"&limit="+jl+"&offset="+e,Gb,2,null,Qb,Zb)}function Zb(){++Bb<Ob?(Gb+=500,$b()):(Ib=!0,xb-=Tb.length,Tb=[],Kb())}function Qb(e){var t,n,a=JSON.parse(e),i=a.channels.length,o=0,s=0,d=[];for(Nb=parseInt(a._total),i<jl&&(Ib=!0);o<Tb.length&&s<i;o++,s++)n=(t=a.channels[s])._id,Pb[n]?o--:(Pb[n]=1,M_(Tb[o],[t.name,n,t.logo,t.display_name],Db),d.push(o));for(o=d.length-1;-1<o;o--)Tb.splice(d[o],1);Ab+=s,Ib&&(xb-=Tb.length,Tb=[]),Kb()}function ew(){A_(Eb,Sb,Db,zl,xb),xb/zl<Eb+Xl&&!Ib&&!Lb&&(zb(),Xb()),kl&&tw()}function tw(){xb&&J_(Eb+"_"+Sb,Db)}function nw(e){var t;if(!cf&&!G_())switch(O_(),e.keyCode){case La:Ku()?Yu():Xu()?zu():(tw(),uf(nw));break;case Sa:if(e_(Eb,Sb-1,Db[0]))tw(),Sb--,ew();else for(t=zl-1;-1<t;t--)if(e_(Eb-1,t,Db[0])){tw(),Eb--,Sb=t,ew();break}break;case xa:e_(Eb,Sb+1,Db[0])?(tw(),Sb++,ew()):e_(Eb+1,0,Db[0])&&(tw(),Eb++,Sb=0,ew());break;case Ia:for(t=0;t<zl;t++)if(e_(Eb-1,Sb-t,Db[0])){tw(),Eb--,Sb-=t,ew();break}break;case Pa:for(t=0;t<zl;t++)if(e_(Eb+1,Sb-t,Db[0])){tw(),Eb++,Sb-=t,ew();break}break;case Ma:case Ca:case Ea:case Ta:yl.Main_selectedChannel=document.getElementById(Db[4]+Eb+"_"+Sb).getAttribute(au),yl.Main_selectedChannel_id=document.getElementById(Db[4]+Eb+"_"+Sb).getAttribute("data-id"),yl.Main_selectedChannelDisplayname=document.getElementById(Db[3]+Eb+"_"+Sb).textContent,document.body.removeEventListener("keydown",nw),yl.Main_BeforeChannel=ul,yl.Main_Go=sl,yl.Main_BeforeChannelisSet=!0,Hs=Da=!1,Mu(Db[6]),i_()}}var aw=!1,iw=0,ow=0,sw=0,dw=0,rw=5,cw=3500,lw=0,uw=0,_w=!1,fw=!1,mw="",hw=["sgthumbdiv","sgimg","sginfodiv","sgdisplayname","sgviwers","sgcell","sgempty_","search_games_scroll"];function pw(){yl.Main_CenterLablesVectorPos=1,yl.Main_Go=il,yl.Search_isSearching=!0,l_(),mw!==yl.Search_data&&(aw=!1),Pu("top_bar_user",n+u_(f+" '"+yl.Search_data+"'")),document.body.addEventListener("keydown",Iw,!1),aw?(y_(iw),Eu(hw[7]),Ew(),s_()):gw()}function vw(){yl.Search_isSearching||c_(),document.body.removeEventListener("keydown",Iw),yl.Games_return=!1,Mu(hw[7])}function gw(){h_("stream_table_search_game"),Mu(hw[7]),Lu(),Vu(),mw=yl.Search_data,fw=aw=!1,iw=ow=sw=uw=lw=0,Fu(),yw(),bw()}function yw(){v_(),cf=!0,dw=0,cw=3500}function bw(){Cf("https://api.twitch.tv/kraken/search/games?query="+encodeURIComponent(yl.Search_data),cw,2,null,kw,ww)}function ww(){++dw<rw?(cw+=500,bw()):(cf=!1,sw?Mw():(Bu(),qu(L)))}function kw(e){var t=JSON.parse(e),n=0;null!==t.games&&(n=t.games.length);var a=sw;_w=!(sw+=n);var i=n/ql;0<n%ql&&i++;for(var o,s,d,r,c=0,l=document.getElementById("stream_table_search_game"),u=0;u<i;u++){for(s=a/ql+u,d=document.createElement("tr"),o=0;o<ql&&c<n;o++,c++)r=t.games[c],d.appendChild(Cw(s,s+"_"+o,[r.name,r.box.template.replace("{width}x{height}",tu),""]));for(;o<ql;o++)fw||(fw=!0,sw=s*ql+o),d.appendChild(k_(hw[6]+s+"_"+o));l.appendChild(d)}Mw()}function Cw(e,t,n){return e<2&&w_(n[1]),P_(t,hw,n)}function Mw(){aw||(_w?qu(d):(aw=!0,p_(mu),Ew(),s_()),Bu()),Eu(hw[7]),cf=!1,Ru(ow,iw,ql,sw)}function Ew(){U_(iw,ow,hw,ql,sw),kl&&Sw()}function Sw(){sw&&J_(iw+"_"+ow,hw)}function Iw(e){var t;if(!cf&&!G_())switch(O_(),e.keyCode){case La:Ku()?Yu():Xu()?zu():(Sw(),uf(Iw));break;case Sa:if(e_(iw,ow-1,hw[0]))Sw(),ow--,Ew();else for(t=ql-1;-1<t;t--)if(e_(iw-1,t,hw[0])){Sw(),iw--,ow=t,Ew();break}break;case xa:e_(iw,ow+1,hw[0])?(Sw(),ow++,Ew()):e_(iw+1,0,hw[0])&&(Sw(),iw++,ow=0,Ew());break;case Ia:for(t=0;t<ql;t++)if(e_(iw-1,ow-t,hw[0])){Sw(),iw--,ow-=t,Ew();break}break;case Pa:for(t=0;t<ql;t++)if(e_(iw+1,ow-t,hw[0])){Sw(),iw++,ow-=t,Ew();break}break;case Ma:case Ca:case Ea:case Ta:yl.gameSelectedOld=yl.Main_gameSelected,vw(),yl.Main_gameSelected=document.getElementById(hw[5]+iw+"_"+ow).getAttribute(au),document.body.removeEventListener("keydown",Iw),yl.Main_Go=Qc,yl.Games_return=!0,i_()}}var xw=0,Pw=0,Tw=!1;function Lw(){Vu(),Mu("label_refresh"),Cu("label_side_panel","icon-arrow-circle-left",x),Tu("top_bar_user",n),document.getElementById("top_lables").style.marginLeft="14%",document.getElementById("top_bar_live").style.display="none",document.getElementById("top_bar_featured").style.display="none",document.getElementById("top_bar_game").style.display="none",document.getElementById("top_bar_vod").style.display="none",document.getElementById("top_bar_clip").style.display="none",Rc.placeholder=k,Iu("top_bar_user","icon_center_focus"),Eu("search_scroll"),Pw=xw=0,Gw(),Nw()}function Bw(){Uw(!1),document.body.removeEventListener("keydown",Aw),Gw(),yl.Main_Go=yl.Main_BeforeSearch,document.getElementById("top_lables").style.marginLeft="18.5%",Tu("top_bar_user",u),xu("top_bar_user","icon_center_focus"),Cu("label_side_panel","icon-ellipsis",Fn),Eu("label_refresh"),document.getElementById("top_bar_live").style.display="inline-block",document.getElementById("top_bar_featured").style.display="inline-block",document.getElementById("top_bar_game").style.display="inline-block",document.getElementById("top_bar_vod").style.display="inline-block",document.getElementById("top_bar_clip").style.display="inline-block",Rc.value="",Mu("search_scroll")}function Ow(){Bw(),j_(function(){Pw?1===Pw?pw():2===Pw&&ak():qb()})}function Gw(){xu("chanel_button","button_search_focused"),xu("game_button","button_search_focused"),xu("live_button","button_search_focused"),xw&&(Pw?1===Pw?Iu("game_button","button_search_focused"):2===Pw&&Iu("live_button","button_search_focused"):Iu("chanel_button","button_search_focused"))}function Aw(e){if(!Tw)switch(e.keyCode){case La:Ku()?Yu():Xu()?zu():(Bw(),i_());break;case Sa:1===xw&&(--Pw<0&&(Pw=2),Gw());break;case xa:1===xw&&(2<++Pw&&(Pw=0),Gw());break;case Ia:1===xw&&(xw=0,Gw(),Nw());break;case Pa:xw?1===xw&&(xw=0,Gw(),Nw()):(Uw(!1),xw=1,Gw());break;case Ma:case Ca:case Ea:case Ta:xw?""!==Rc.value&&null!==Rc.value?(yl.Search_data=Rc.value,Rc.value="",Ow()):(qu(s),window.setTimeout(function(){Vu()},1e3)):Nw()}}function Nw(){document.body.removeEventListener("keydown",Aw),document.body.addEventListener("keydown",Rw,!1),Rc.placeholder=k,Rc.focus(),Tw=!0}function Uw(e){Rc.blur(),Fw(),document.body.removeEventListener("keydown",Rw),Rc.placeholder=E+k,e&&document.body.addEventListener("keydown",Aw,!1),Tw=!1}function Fw(){if(null!==Rc){var e=Rc.cloneNode(!0);Rc.parentNode.replaceChild(e,Rc),Rc=document.getElementById("search_input")}}function Rw(e){switch(e.keyCode){case La:Xu()?zu():Ku()?Yu():(Bw(),i_());break;case Aa:Rc.value="";break;case Oa:case Pa:Uw(!0),xw=1,Gw();break;case Ba:Rc.value=Rc.value.slice(0,-1);break;case Ga:Rc.value+=" "}}var Hw=0,Dw=0,qw=!1,Vw=0,Jw={},zw=[],Xw=!1,jw=0,Ww=5,Yw=3500,Kw=0,$w=0,Zw=!1,Qw=!1,ek=!1,tk="",nk=["sl_thumbdiv","sl_img","sl_infodiv","sl_displayname","sl_streamtitle","sl_streamgame","sl_viwers","sl_quality","sl_cell","slempty_","search_live_scroll"];function ak(){yl.Main_CenterLablesVectorPos=1,yl.Main_Go=ol,yl.Search_isSearching=!0,l_(),tk!==yl.Search_data&&(Qw=!1),Pu("top_bar_user",n+u_(_+" '"+yl.Search_data+"'")),document.body.addEventListener("keydown",pk,!1),Qw?(y_(Hw),Eu(nk[10]),mk(),s_()):ok()}function ik(){c_(),document.body.removeEventListener("keydown",pk),Mu(nk[10])}function ok(){h_("stream_table_search_live"),Mu(nk[10]),Lu(),Vu(),tk=yl.Search_data,Qw=!1,cf=!(ek=!(zw=[])),Hw=Dw=Vw=$w=Kw=0,qw=!(Jw={}),Fu(),sk(),dk()}function sk(){v_(),Xw=!0,jw=0,Yw=3500}function dk(){var e=Vw+Kw;e&&$w-1<e&&(e=$w-Fl,qw=!0),Cf("https://api.twitch.tv/kraken/search/streams?query="+encodeURIComponent(yl.Search_data)+"&limit="+Fl+"&offset="+e,Yw,2,null,ck,rk)}function rk(){++jw<Ww?(Yw+=500,dk()):(Xw=!1,Vw?(qw=!0,lk()):(cf=!1,Bu(),qu(L)))}function ck(e){var t=JSON.parse(e),n=t.streams.length;$w=parseInt(t._total),n<Fl&&(qw=!0);var a=Vw;Zw=!(Vw+=n);var i=n/Rl;0<n%Rl&&i++;for(var o,s,d,r,c,l=0,u=document.getElementById("stream_table_search_live"),_=0;_<i;_++){for(s=a/Rl+_,d=document.createElement("tr"),o=0;o<Rl&&l<n;o++,l++)c=(r=t.streams[l]).channel._id,Jw[c]?o--:(Jw[c]=1,d.appendChild(S_(s,s+"_"+o,[r.channel.name,c],nk,[r.preview.template.replace("{width}x{height}",eu),Qu(JSON.stringify(r.stream_type))+r.channel.display_name,r.channel.status,r.game,y+Mp(r.created_at)+b+", "+h+$u(r.viewers)+q,Zu(r.video_height,r.average_fps,r.channel.language)])));for(;o<Rl;o++)qw&&!ek&&(ek=!0,Vw=s*Rl+o),d.appendChild(k_(nk[9]+s+"_"+o)),zw.push(nk[9]+s+"_"+o);u.appendChild(d)}lk()}function lk(){if(Qw){if(p_(mu),0<zw.length&&!qw)return sk(),void uk();Ru(Dw,Hw,Rl,Vw),zw=[]}else Zw?qu(d):(Qw=!0,p_(mu),mk(),s_()),Eu(nk[10]),cf=!1,Bu();Xw=!1}function uk(){Du(zw.length);var e=Vw+Kw;e&&$w-1<e&&(e=$w-jl,qw=!0),Cf("https://api.twitch.tv/kraken/search/streams?query="+encodeURIComponent(yl.Search_data)+"&limit="+jl+"&offset="+e,Yw,2,null,fk,_k)}function _k(){++jw<Ww?(Yw+=500,uk()):(qw=!0,Vw-=zw.length,zw=[],lk())}function fk(e){var t,n,a=JSON.parse(e),i=a.streams.length,o=0,s=0,d=[];for($w=parseInt(a._total),i<jl&&(qw=!0);o<zw.length&&s<i;o++,s++)n=(t=a.streams[s]).channel._id,Jw[n]?o--:(Jw[n]=1,I_(zw[o],[t.channel.name,n],[t.preview.template.replace("{width}x{height}",eu),Qu(JSON.stringify(t.stream_type))+t.channel.display_name,t.channel.status,t.game,y+Mp(t.created_at)+b+", "+h+$u(t.viewers)+q,Zu(t.video_height,t.average_fps,t.channel.language)],nk),d.push(o));for(o=d.length-1;-1<o;o--)zw.splice(d[o],1);Kw+=s,qw&&(Vw-=zw.length,zw=[]),lk()}function mk(){N_(Hw,Dw,nk,Rl,Vw),Vw/Rl<Hw+Hl&&!qw&&!Xw&&(sk(),dk()),kl&&hk()}function hk(){Vw&&J_(Hw+"_"+Dw,nk)}function pk(e){var t;if(!cf&&!G_())switch(O_(),e.keyCode){case La:Ku()?Yu():Xu()?zu():(hk(),uf(pk));break;case Sa:if(e_(Hw,Dw-1,nk[0]))hk(),Dw--,mk();else for(t=Rl-1;-1<t;t--)if(e_(Hw-1,t,nk[0])){hk(),Hw--,Dw=t,mk();break}break;case xa:e_(Hw,Dw+1,nk[0])?(hk(),Dw++,mk()):e_(Hw+1,0,nk[0])&&(hk(),Hw++,Dw=0,mk());break;case Ia:for(t=0;t<Rl;t++)if(e_(Hw-1,Dw-t,nk[0])){hk(),Hw--,Dw-=t,mk();break}break;case Pa:for(t=0;t<Rl;t++)if(e_(Hw+1,Dw-t,nk[0])){hk(),Hw++,Dw-=t,mk();break}break;case Ma:case Ca:case Ea:case Ta:F_(Hw+"_"+Dw,nk,pk)}}var vk=0,gk={restor_playback:{values:["off","on"],defaultValue:2},chat_font_size:{values:["60%","80%","100%","120%","140%"],defaultValue:3},chat_brightness:{values:["0%","5%","10%","15%","20%","25%","30%","35%","40%","45%","50%","55%","60%","65%","70%","75%","80%","85%","90%","95%","100%"],defaultValue:11},force_disable_chat:{values:["off","on"],defaultValue:2},buffer_live:{values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],defaultValue:4},buffer_vod:{values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],defaultValue:4},buffer_clip:{values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],defaultValue:3},videos_animation:{values:["off","on"],defaultValue:2},clock_offset:{values:yk(),defaultValue:49},content_lang:{values:["All","Dansk [DA]","Deutsch [DE]","English [EN][EN-GB]","English - USA [EN]","English - UK [EN-GB]","Español [ES][ES-MX]","Español - España [ES]","Español - Latinoamérica [ES-MX]","Français [FR]","Italiano [IT]","Magyar [HU]","Nederlands [NL]","Norsk [NO]","Polski [PL]","Português [PT][PT-BR]","Português -Portugal [PT]","Português - Brasil [PT-BR]","Slovenčina [SK]","Suomi [FI]","Svenska [SV]","Tiếng Việt [VI]","Türkçe [TR]","Čeština [CS]","Ελληνικά [EL]","Български [BG]","Русский [RU]","ภาษาไทย [TH]","中文 [ZH-ALL]","中文 简体 [ZH-CN]","中文 繁體 [ZH-TW]","日本語 [JA]","한국어 [KO]","Română [RO]"],set_values:["","da","de","en,en-gb","en","en-gb","es,es-mx","es","es-mx","fr","it","hu","nl","no","pl","pt,pt-br","pt","pt-br","sk","fi","sv","vi","tr","cs","el","bg","ru","th","zh-cn,zh-tw","zh-cn","zh-tw","ja","ko","ro"],defaultValue:1}};function yk(){for(var e=[],t=43200,n=0;n<48;n++)e.push("-"+kp(t)),t-=900;for(e.push(kp(0)),t=900,n=0;n<48;n++)e.push(kp(t)),t+=900;return e}var bk=[],wk=0;function kk(){a_(),document.body.addEventListener("keydown",qk,!1),Cu("label_refresh","icon-arrow-circle-left",x),Tu("top_bar_user",a),document.getElementById("top_lables").style.marginLeft="14%",document.getElementById("top_bar_live").style.display="none",document.getElementById("top_bar_featured").style.display="none",document.getElementById("top_bar_game").style.display="none",document.getElementById("top_bar_vod").style.display="none",document.getElementById("top_bar_clip").style.display="none",Iu("top_bar_user","icon_center_focus"),Eu("settings_scroll"),Ak(vk=0)}function Ck(){document.body.removeEventListener("keydown",qk),Nk(),Tu("top_bar_user",u),document.getElementById("top_lables").style.marginLeft="18.5%",document.getElementById("top_bar_live").style.display="inline-block",document.getElementById("top_bar_featured").style.display="inline-block",document.getElementById("top_bar_game").style.display="inline-block",document.getElementById("top_bar_vod").style.display="inline-block",document.getElementById("top_bar_clip").style.display="inline-block",xu("top_bar_user","icon_center_focus"),Cu("label_refresh","icon-refresh",t+Wt),Mu("settings_scroll")}function Mk(){var e,t="";t+=Ek("general",yn),e="content_lang",bk.push(e),t+=Sk(e,Wn),e="clock_offset",bk.push(e),t+=Sk(e,Xn),e="restor_playback",bk.push(e),gk[e].values=[Ln,Tn],t+=Ik(e,Bn,On),e="videos_animation",bk.push(e),gk[e].values=[Ln,Tn],t+=Sk(e,Un),t+=Ek("play",fn),e="chat_font_size",bk.push(e),t+=Ik(e,Gn,An),e="chat_brightness",bk.push(e),t+=Sk(e,aa),e="force_disable_chat",bk.push(e),gk[e].values=[Vt,B],t+=Ik(e,ta,na),t+='<div id="setting_title_buffers" class="settings_title">'+mn+'</div><div id="setting_title_buffers_summary" class="settings_summary">'+hn+"</div>",e="buffer_live",bk.push(e),t+=Sk(e,pn),e="buffer_vod",bk.push(e),t+=Sk(e,vn),e="buffer_clip",bk.push(e),Pu("settings_main",t+=Sk(e,gn)),wk=bk.length}function Ek(e,t){return'<div id="setting_title_'+e+'" class="settings_section">'+t+"</div>"}function Sk(e,t){return'<div id="'+e+'_div" class="settings_div"><div id="'+e+'_name" class="settings_name">'+t+'</div><div class="settings_arraw_div"><div id="'+e+'arrow_left" class="left"></div></div><div id="'+e+'" class="strokedextramini settings_value">'+Lk(e)+'</div><div class="settings_arraw_div"><div id="'+e+'arrow_right" class="right"></div></div></div>'}function Ik(e,t,n){return'<div id="'+e+'_div" class="settings_div"><div id="'+e+'_name" class="settings_name">'+t+'<div id="'+e+'_summary" class="settings_summary" style="font-size: 65%;">'+n+'</div></div><div class="settings_arraw_div"><div id="'+e+'arrow_left" class="left"></div></div><div id="'+e+'" class="strokedextramini settings_value">'+Lk(e)+'</div><div class="settings_arraw_div"><div id="'+e+'arrow_right" class="right"></div></div></div>'}function xk(e,t,n){Pu(e+"_name",t+'<div id="'+e+'_summary" class="settings_summary" style="font-size: 65%;">'+n+"</div>")}function Pk(){var e="";for(e in Tu("setting_title_general",yn),Tu((e="clock_offset")+"_name",Xn),Tu((e="content_lang")+"_name",Wn),gk[e].values[0]=Yn,Tu(e,Lk(e)),Tu("setting_title_play",fn),Tu("setting_title_buffers",mn),Tu("setting_title_buffers_summary",hn),Tu((e="buffer_live")+"_name",pn),Tu((e="buffer_vod")+"_name",vn),Tu((e="buffer_clip")+"_name",gn),xk(e="restor_playback",Bn,On),gk[e].values=[Ln,Tn],xk(e="chat_font_size",Gn,An),xk(e="force_disable_chat",ta,na),gk[e].values=[Ln,Tn],Tu((e="videos_animation")+"_name",Un),gk[e].values=[Ln,Tn],Tu((e="chat_brightness")+"_name",aa),gk)gk.hasOwnProperty(e)&&Tu(e,Lk(e))}function Tk(){for(var e in gk)gk[e].defaultValue=gf(e,gk[e].defaultValue),gk[e].defaultValue-=1;Hk(0),Dk(),xm=(.05*Ok("chat_brightness")).toFixed(2),WS=Ok("videos_animation"),Tl=Bk("content_lang"),yl.Play_ChatForceDisable=Ok("force_disable_chat")}function Lk(e){return gk[e].values[Ok(e)]}function Bk(e){return gk[e].set_values[Ok(e)]}function Ok(e){return gk[e].defaultValue}function Gk(e){return gk[e].values.length-1}function Ak(e){var t=bk[vk];Iu(t,"settings_value_focus"),Iu(t+"_div","settings_div_focus"),Fk(e)}function Nk(){var e=bk[vk];document.getElementById(e+"arrow_left").style.opacity="0",document.getElementById(e+"arrow_right").style.opacity="0",xu(e,"settings_value_focus"),xu(e+"_div","settings_div_focus")}function Uk(e){var t=bk[e];vf(t,Ok(t)+1),Tu(t,Lk(t)),Fk(e),Rk(e)}function Fk(e){var t=bk[e],n=Ok(t),a=Gk(t);0<n&&n<a?(document.getElementById(t+"arrow_left").style.opacity="1",document.getElementById(t+"arrow_right").style.opacity="1"):n===a?(document.getElementById(t+"arrow_left").style.opacity="1",document.getElementById(t+"arrow_right").style.opacity="0.2"):(document.getElementById(t+"arrow_left").style.opacity="0.2",document.getElementById(t+"arrow_right").style.opacity="1")}function Rk(e){"content_lang"===(e=bk[e])?Tl=Bk("content_lang"):"videos_animation"===e?WS=Ok("videos_animation"):"buffer_live"===e?Hk(1):"buffer_vod"===e?Hk(2):"buffer_clip"===e?Hk(3):"chat_brightness"===e?(xm=(.05*Ok("chat_brightness")).toFixed(2),av(!1)):"force_disable_chat"===e?yl.Play_ChatForceDisable=Ok("force_disable_chat"):"chat_font_size"===e?Jh():"clock_offset"===e&&(Dk(),K_())}function Hk(e){try{e?1===e?(Um=1e3*Lk("buffer_live"),cu&&Android.SetBuffer(1,Um)):2===e?(ng=1e3*Lk("buffer_vod"),cu&&Android.SetBuffer(2,ng)):3===e&&(jf=1e3*Lk("buffer_clip"),cu&&Android.SetBuffer(3,jf)):(Um=1e3*Lk("buffer_live"),ng=1e3*Lk("buffer_vod"),jf=1e3*Lk("buffer_clip"),cu&&(Android.SetBuffer(1,Um),Android.SetBuffer(2,ng),Android.SetBuffer(3,jf)))}catch(e){}}function Dk(){var e=Ok("clock_offset");ru=e<48?-9e5*(48-e):9e5*(e-48)}function qk(e){var t;switch(e.keyCode){case La:Xu()?zu():Ku()?Yu():(Ck(),i_());break;case Sa:0<Ok(t=bk[vk])&&(gk[t].defaultValue-=1,Uk(vk));break;case xa:Ok(t=bk[vk])<Gk(t)&&(gk[t].defaultValue+=1,Uk(vk));break;case Ia:0<vk&&(Nk(),Ak(--vk));break;case Pa:vk<wk-1&&(Nk(),Ak(++vk))}}var Vk=0,Jk=0,zk=!1,Xk=0,jk=!1,Wk=0,Yk=5,Kk=3500,$k=[],Zk=0,Qk=!1,eC=!1,tC="",nC=!1,aC=["uc_thumbdiv","uc_img","uc_infodiv","uc_displayname","uc_cell","ucempty_","user_channels_scroll"];function iC(){yl.Main_CenterLablesVectorPos=1,yl.Main_Go=ll,yl.isLastSChannels=!1,Cu("label_side_panel","icon-arrow-circle-left",x),Iu("top_bar_user","icon_center_focus"),Pu("top_bar_user",u+u_(Ni[yl.Users_Position].name+Q)),document.body.addEventListener("keydown",pC,!1),tC!==Ni[yl.Users_Position].name&&(eC=!1),eC?(y_(Vk),Eu(aC[6]),mC(),s_()):sC()}function oC(){yl.Users_Position=0,xu("top_bar_user","icon_center_focus"),document.body.removeEventListener("keydown",pC),Tu("top_bar_user",u),Cu("label_side_panel","icon-ellipsis",Fn),Mu(aC[6])}function sC(){h_("stream_table_user_channels"),Mu(aC[6]),Lu(),Vu(),tC=Ni[yl.Users_Position].name,Vk=Jk=Xk=Zk=0,cf=!(nC=zk=eC=!1),Fu(),$k=[],dC(),rC()}function dC(){v_(),jk=!0,Wk=0,Kk=3500}function rC(){Cf("https://api.twitch.tv/kraken/users/"+encodeURIComponent(Ni[yl.Users_Position].id)+"/follows/channels?limit=100&offset="+Zk+"&sortby=created_at&",Kk,2,null,lC,cC)}function cC(){++Wk<Yk?(Kk+=500,rC()):(jk=!1,Xk?(zk=!0,fC()):(cf=!1,Bu(),qu(L)))}function lC(e){var t=JSON.parse(e).follows,n=t.length;if(n){for(var a="",i=0;i<n;i++)a=t[i].channel.name+","+t[i].channel._id+","+t[i].channel.logo+","+t[i].channel.display_name,-1===$k.indexOf(a)&&$k.push(a);Zk+=n,dC(),rC()}else $k.sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}),uC()}function uC(){var e=Jl,t=Xk,n=$k.length-t;n<e&&(e=n),e<Jl&&(zk=!0),Qk=!(Xk+=e);var a=e/zl;0<e%zl&&a++;for(var i,o,s,d=t,r=document.getElementById("stream_table_user_channels"),c=0;c<a;c++){for(o=t/zl+c,s=document.createElement("tr"),i=0;i<zl&&d<$k.length;i++,d++)s.appendChild(_C(o,o+"_"+i,$k[d].split(",")));for(;i<zl;i++)zk&&!nC&&(nC=!0,Xk=o*zl+i),s.appendChild(k_(aC[5]+o+"_"+i));r.appendChild(s)}fC()}function _C(e,t,n){return e<4&&w_(n[2]),C_(t,aC,n)}function fC(){eC?p_(fu):(Qk?qu(B+Q):(eC=!0,p_(fu),mC(),s_()),Eu(aC[6]),cf=!1,Bu()),jk=!1,Ru(Jk,Vk,zl,Xk)}function mC(){A_(Vk,Jk,aC,zl,Xk),Xk/zl<Vk+Xl&&!zk&&!jk&&(dC(),rC()),kl&&hC()}function hC(){Xk&&J_(Vk+"_"+Jk,aC)}function pC(e){var t;if(!cf&&!G_())switch(O_(),e.keyCode){case La:Ku()?Yu():Xu()?zu():(hC(),uf(pC));break;case Sa:if(e_(Vk,Jk-1,aC[0]))hC(),Jk--,mC();else for(t=zl-1;-1<t;t--)if(e_(Vk-1,t,aC[0])){hC(),Vk--,Jk=t,mC();break}break;case xa:e_(Vk,Jk+1,aC[0])?(hC(),Jk++,mC()):e_(Vk+1,0,aC[0])&&(hC(),Vk++,Jk=0,mC());break;case Ia:for(t=0;t<zl;t++)if(e_(Vk-1,Jk-t,aC[0])){hC(),Vk--,Jk-=t,mC();break}break;case Pa:for(t=0;t<zl;t++)if(e_(Vk+1,Jk-t,aC[0])){hC(),Vk++,Jk-=t,mC();break}break;case Ma:case Ca:case Ea:case Ta:yl.Main_selectedChannel=document.getElementById(aC[4]+Vk+"_"+Jk).getAttribute(au),yl.Main_selectedChannel_id=document.getElementById(aC[4]+Vk+"_"+Jk).getAttribute("data-id"),yl.Main_selectedChannelDisplayname=document.getElementById(aC[3]+Vk+"_"+Jk).textContent,yl.Main_selectedChannelLogo=document.getElementById(aC[1]+Vk+"_"+Jk).src,document.body.removeEventListener("keydown",pC),yl.Main_BeforeChannel=ll,yl.Main_Go=sl,yl.Main_BeforeChannelisSet=!0,Hs=Da=!0,Mu(aC[6]),i_()}}var vC=0,gC=0,yC=!1,bC=0,wC={},kC=[],CC=!1,MC=0,EC=5,SC=3500,IC=0,xC=0,PC=!1,TC=["uh_thumbdiv","uh_img","uh_infodiv","uh_displayname","uh_hosttitle","uh_hostgame","uh_viwers","uh_quality","uh_cell","uhempty_","user_host_scroll"],LC=!1,BC="",OC=!1;function GC(){yl.Main_CenterLablesVectorPos=1,yl.Main_Go=tl,Cu("label_side_panel","icon-arrow-circle-left",x),Iu("top_bar_user","icon_center_focus"),Pu("top_bar_user",u+u_(Ni[yl.Users_Position].name+$)),document.body.addEventListener("keydown",jC,!1),BC!==Ni[yl.Users_Position].name&&(LC=!1),LC?(y_(vC),Eu(TC[10]),zC(),s_()):NC()}function AC(){yl.Users_Position=0,xu("top_bar_user","icon_center_focus"),document.body.removeEventListener("keydown",jC),Tu("top_bar_user",u),Cu("label_side_panel","icon-ellipsis",Fn),Mu(TC[10])}function NC(){h_("stream_table_user_host"),Mu(TC[10]),Lu(),Vu(),BC=Ni[yl.Users_Position].name,LC=!1,wC={},cf=!(bC=xC=IC=0),vC=gC=0,yC=OC=!(kC=[]),Fu(),UC(),FC()}function UC(){v_(),CC=!0,MC=0,SC=3500}function FC(){var e=bC+IC;e&&xC-1<e&&(e=xC-Fl,yC=!0),Cf("https://api.twitch.tv/api/users/"+encodeURIComponent(Ni[yl.Users_Position].name)+"/followed/hosting?limit="+Fl+"&offset="+e,SC,2,null,HC,RC)}function RC(){++MC<EC?(SC+=500,FC()):(CC=!1,bC?(yC=!0,DC()):(cf=!1,Bu(),qu(L)))}function HC(e){var t=JSON.parse(e),n=t.hosts.length;xC=parseInt(t._total),n<Fl&&(yC=!0);var a=bC;PC=!(bC+=n);var i=n/Rl;0<n%Rl&&i++;for(var o,s,d,r,c,l=0,u=document.getElementById("stream_table_user_host"),_=0;_<i;_++){for(s=a/Rl+_,d=document.createElement("tr"),o=0;o<Rl&&l<n;o++,l++)c=(r=t.hosts[l]).target._id+""+r._id,wC[c]?o--:(wC[c]=1,d.appendChild(S_(s,s+"_"+o,[r.target.channel.name,r.target._id],TC,[r.target.preview_urls.template.replace("{width}x{height}",eu),r.display_name+ae+r.target.channel.display_name,r.target.title,r.target.meta_game,h.charAt(1).toUpperCase()+h.slice(2)+$u(r.target.viewers)+q,""])));for(;o<Rl;o++)yC&&!OC&&(OC=!0,bC=s*Rl+o),d.appendChild(k_(TC[9]+s+"_"+o)),kC.push(TC[9]+s+"_"+o);u.appendChild(d)}DC()}function DC(){if(LC){if(p_(mu),0<kC.length&&!yC)return UC(),void qC();Ru(gC,vC,Rl,bC),kC=[]}else PC?qu(B+$):(LC=!0,zC(),p_(mu),s_()),Eu(TC[10]),cf=!1,Bu();CC=!1}function qC(){Du(kC.length);var e=bC+IC;e&&xC-1<e&&(e=xC-jl,yC=!0),Cf("https://api.twitch.tv/api/users/"+encodeURIComponent(Ni[yl.Users_Position].name)+"/followed/hosting?limit="+jl+"&offset="+e,SC,2,null,JC,VC)}function VC(){++MC<EC?(SC+=500,qC()):(yC=!0,bC-=kC.length,kC=[],DC())}function JC(e){var t,n,a=JSON.parse(e),i=a.streams.length,o=0,s=0,d=[];for(xC=parseInt(a._total),i<jl&&(yC=!0);o<kC.length&&s<i;o++,s++)n=(t=a.hosts[s]).target._id+""+t._id,wC[n]?o--:(wC[n]=1,I_(kC[o],[t.target.channel.name,t.target._id],[t.target.preview_urls.template.replace("{width}x{height}",eu),t.display_name+ae+t.target.channel.display_name,t.target.title,t.target.meta_game,h.charAt(1).toUpperCase()+h.slice(2)+$u(t.target.viewers)+q,""],TC),d.push(o));for(o=d.length-1;-1<o;o--)kC.splice(d[o],1);IC+=s,yC&&(bC-=kC.length,kC=[]),DC()}function zC(){N_(vC,gC,TC,Rl,bC),bC/Rl<vC+Hl&&!yC&&!CC&&(UC(),FC()),kl&&XC()}function XC(){bC&&J_(vC+"_"+gC,TC)}function jC(e){var t;if(!cf&&!G_())switch(O_(),e.keyCode){case La:Ku()?Yu():Xu()?zu():(XC(),uf(jC));break;case Sa:if(e_(vC,gC-1,TC[0]))XC(),gC--,zC();else for(t=Rl-1;-1<t;t--)if(e_(vC-1,t,TC[0])){XC(),vC--,gC=t,zC();break}break;case xa:e_(vC,gC+1,TC[0])?(XC(),gC++,zC()):e_(vC+1,0,TC[0])&&(XC(),vC++,gC=0,zC());break;case Ia:for(t=0;t<Rl;t++)if(e_(vC-1,gC-t,TC[0])){XC(),vC--,gC-=t,zC();break}break;case Pa:for(t=0;t<Rl;t++)if(e_(vC+1,gC-t,TC[0])){XC(),vC++,gC-=t,zC();break}break;case Ma:case Ca:case Ea:case Ta:F_(vC+"_"+gC,TC,jC)}}var WC,YC=!1,KC=0,$C=3500,ZC=0,QC=5,eM=0,tM=!1,nM="",aM=0,iM={},oM=!1,sM=[],dM=null,rM=["ulf_thumbdiv","ulf_img","ulf_infodiv","ulf_displayname","ulf_streamtitle","ulf_streamgame","ulf_viwers","ulf_quality","ulf_cell","ulempty_","user_live_scroll"];function cM(){Zi()&&(EM(),oM?BM(Nm,rM[0])&&(dM=JSON.parse(document.getElementById(rM[8]+Nm).getAttribute(au))[0]):dM=null,h_("user_feed_scroll"),oM=!1,document.getElementById("user_feed_scroll").style.left="2.5px",document.getElementById("user_feed").style.bottom="0.1%",Eu("dialog_loading_feed"),nM="",Nm=aM=eM=ZC=0,iM={},sM=[],j_(function(){_M(),fM()}))}function lM(e){for(var t,n=0;n<sM.length;n++)null!==(t=document.getElementById(sM[n].id))&&pu(t,sM[n].src+lu,e)}function uM(e,t){sM.push({id:e,src:t})}function _M(){YC=!0,KC=0,$C=3500}function fM(){Cf("https://api.twitch.tv/kraken/users/"+encodeURIComponent(Ni[yl.Users_Position].id)+"/follows/channels?limit=100&offset="+ZC+"&sortby=created_at",$C,2,null,hM,mM)}function mM(){++KC<QC?($C+=500,fM()):(YC=!1,eM?(tM=!0,yM()):(Mu("dialog_loading_feed"),wM()&&(Op(L),window.setTimeout(function(){Gp()},2e3))))}function hM(e){var t=JSON.parse(e).follows,n=t.length;if(n){for(var a="",i=0;i<n;i++)a=t[i].channel._id+",",-1===nM.indexOf(a)&&(nM+=a);ZC+=n,_M(),fM()}else nM=nM.slice(0,-1),_M(),j_(pM)}function pM(){Cf("https://api.twitch.tv/kraken/streams/?channel="+encodeURIComponent(nM)+"&limit=100&offset=0&stream_type=all",$C,2,null,gM,vM)}function vM(){++KC<QC?($C+=500,pM()):(YC=!1,Mu("dialog_loading_feed"),wM()&&(Op(L),window.setTimeout(function(){Gp()},2e3)))}function gM(e){var t=JSON.parse(e),n=t.streams.length;n<Fl&&(tM=!0),eM+=n;for(var a,i,o=document.getElementById("user_feed_scroll"),s=0;s<n;s++)i=(a=t.streams[s]).channel._id,iM[i]||(iM[i]=1,null!==dM&&dM===a.channel.name&&(Nm=s),o.appendChild(bM(s,[a.channel.name,i],rM,[a.preview.template.replace("{width}x{height}",eu),Qu(JSON.stringify(a.stream_type))+a.channel.display_name,a.channel.status,a.game,y+Mp(a.created_at)+b+", "+h+$u(a.viewers)+q,Zu(a.video_height,a.average_fps,a.channel.language)])));yM()}function yM(){oM=!(YC=!1),lM(mu),j_(function(){Mu("dialog_loading_feed"),xM()})}function bM(e,t,n,a){return uM(n[1]+e,a[0]),(xl=document.createElement("div")).setAttribute("id",n[8]+e),xl.setAttribute(au,JSON.stringify(t)),xl.className="user_feed_thumb",xl.innerHTML='<div id="'+n[0]+e+'" class="stream_thumbnail_clip" ><div><img id="'+n[1]+e+'" class="stream_img"></div><div id="'+n[2]+e+'" class="stream_text2"><div id="'+n[3]+e+'" class="stream_channel" style="width: 66%; display: inline-block;">'+a[1]+'</div><div id="'+n[5]+e+'"class="stream_info">'+v+a[3]+"</div></div></div>",xl}function wM(){return Su("user_feed")}function kM(){var e=Zi();e&&(Am!==Ni[yl.Users_Position].name&&(oM=!1),Am=Ni[yl.Users_Position].name),e&&BM(0,rM[0])||(oM=!1),oM||YC||cM(),e&&(document.getElementById("user_feed").style.bottom="0.1%",Eu("user_feed"),xM())}function CM(){Mu("user_feed")}function MM(){EM(),SM()}function EM(){window.clearTimeout(WC)}function SM(){wM()&&(WC=window.setTimeout(CM,5500))}function IM(){EM(),YC?window.setTimeout(function(){YC=!1},15e3):cM()}function xM(){MM(),BM(Nm,rM[0])&&(Iu(rM[0]+Nm,"feed_thumbnail_focused"),wM()?TM():Su("scene2")&&LM())}function PM(){return Nm<3?2.5:BM(Nm+2,rM[0])?-1*document.getElementById(rM[8]+(Nm-2)).offsetLeft:BM(Nm+1,rM[0])?-1*document.getElementById(rM[8]+(Nm-3)).offsetLeft:-1*document.getElementById(rM[8]+(Nm-(3<Nm?4:3))).offsetLeft}function TM(){var e=PM();e&&(document.getElementById("user_feed_scroll").style.left=e+"px")}function LM(){document.getElementById("user_feed").style.bottom="-1000%",Eu("user_feed");var e=TM();e&&(document.getElementById("user_feed_scroll").style.left=e+"px"),document.getElementById("user_feed").style.bottom="0.1%",Mu("user_feed")}function BM(e,t){return null!==document.getElementById(t+e)}function OM(){BM(Nm,rM[0])&&xu(rM[0]+Nm,"feed_thumbnail_focused")}var GM=0,AM=0,NM=!1,UM=0,FM={},RM=[],HM=!1,DM=0,qM=5,VM=3500,JM=0,zM=0,XM=0,jM=!1,WM=["ul_thumbdiv","ul_img","ul_infodiv","ul_displayname","ul_streamtitle","ul_streamgame","ul_viwers","ul_quality","ul_cell","ulempty_","user_live_scroll"],YM=!1,KM="",$M="",ZM=!1;function QM(){yl.Main_CenterLablesVectorPos=1,yl.Main_Go=el,Cu("label_side_panel","icon-arrow-circle-left",x),Iu("top_bar_user","icon_center_focus"),Pu("top_bar_user",u+u_(Ni[yl.Users_Position].name+K)),document.body.addEventListener("keydown",hE,!1),$M!==Ni[yl.Users_Position].name&&(YM=!1),YM?(y_(GM),Eu(WM[10]),fE(),s_()):tE()}function eE(){yl.Users_Position=0,xu("top_bar_user","icon_center_focus"),document.body.removeEventListener("keydown",hE),Tu("top_bar_user",u),Cu("label_side_panel","icon-ellipsis",Fn),Mu(WM[10])}function tE(){h_("stream_table_user_live"),Mu(WM[10]),Lu(),Vu(),YM=!1,$M=Ni[yl.Users_Position].name,cf=!(ZM=!(RM=[])),GM=AM=UM=zM=JM=XM=0,NM=!(FM={}),KM="",Fu(),nE(),aE()}function nE(){v_(),HM=!0,DM=0,VM=3500}function aE(){var e,t="https://api.twitch.tv/kraken/users/"+encodeURIComponent(Ni[yl.Users_Position].id)+"/follows/channels?limit=100&offset="+XM+"&sortby=created_at";if(cu){if(!(e=Android.mreadUrl(t,VM,2,null)))return void iE();200===(e=JSON.parse(e)).status?oE(e.responseText):iE()}else(e=new XMLHttpRequest).open("GET",t,!0),e.timeout=VM,e.setRequestHeader(Kl,Ql),e.setRequestHeader(Yl,Wl),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void oE(e.responseText);iE()}},e.send(null)}function iE(){++DM<qM?(VM+=500,aE()):(HM=!1,UM?(NM=!0,cE()):(cf=!1,Bu(),qu(L)))}function oE(e){var t=JSON.parse(e).follows,n=t.length;if(n){for(var a="",i=0;i<n;i++)a=t[i].channel._id+",",-1===KM.indexOf(a)&&(KM+=a);XM+=n,nE(),aE()}else KM=KM.slice(0,-1),nE(),sE()}function sE(){var e=UM+JM;e&&zM-1<e&&(e=zM-Fl,NM=!0);var t,n="https://api.twitch.tv/kraken/streams/?channel="+encodeURIComponent(KM)+"&limit="+Fl+"&offset="+e+"&stream_type=all";if(cu){if(!(t=Android.mreadUrl(n,VM,2,null)))return void dE();200===(t=JSON.parse(t)).status?rE(t.responseText):dE()}else(t=new XMLHttpRequest).open("GET",n,!0),t.timeout=VM,t.setRequestHeader(Kl,Ql),t.setRequestHeader(Yl,Wl),t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void rE(t.responseText);dE()}},t.send(null)}function dE(){++DM<qM?(VM+=500,sE()):(HM=!1,Bu(),qu(L))}function rE(e){var t=JSON.parse(e),n=t.streams.length;zM=parseInt(t._total),n<Fl&&(NM=!0);var a=UM;jM=!(UM+=n);var i=n/Rl;0<n%Rl&&i++;for(var o,s,d,r,c,l=0,u=document.getElementById("stream_table_user_live"),_=0;_<i;_++){for(s=a/Rl+_,d=document.createElement("tr"),o=0;o<Rl&&l<n;o++,l++)c=(r=t.streams[l]).channel._id,FM[c]?o--:(FM[c]=1,d.appendChild(S_(s,s+"_"+o,[r.channel.name,c],WM,[r.preview.template.replace("{width}x{height}",eu),Qu(JSON.stringify(r.stream_type))+r.channel.display_name,r.channel.status,r.game,y+Mp(r.created_at)+b+", "+h+$u(r.viewers)+q,Zu(r.video_height,r.average_fps,r.channel.language)])));for(;o<Rl;o++)NM&&!ZM&&(ZM=!0,UM=s*Rl+o),d.appendChild(k_(WM[9]+s+"_"+o)),RM.push(WM[9]+s+"_"+o);u.appendChild(d)}cE()}function cE(){if(YM){if(p_(mu),0<RM.length&&!NM)return nE(),void lE();Ru(AM,GM,Rl,UM),RM=[]}else jM?qu(B+K):(YM=!0,fE(),p_(mu),s_()),Eu(WM[10]),cf=!1,Bu();HM=!1}function lE(){Du(RM.length);var e=UM+JM;e&&zM-1<e&&(e=zM-jl,NM=!0);var t,n="https://api.twitch.tv/kraken/streams/?channel="+encodeURIComponent(KM)+"&limit="+jl+"&offset="+e+"&stream_type=all";if(cu){if(!(t=Android.mreadUrl(n,VM,2,null)))return void uE();200===(t=JSON.parse(t)).status?_E(t.responseText):uE()}else(t=new XMLHttpRequest).open("GET",+Math.round(1e7*Math.random()),!0),t.timeout=VM,t.setRequestHeader(Kl,Ql),t.setRequestHeader(Yl,Wl),t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void _E(t.responseText);uE()}},t.send(null)}function uE(){++DM<qM?(VM+=500,lE()):(NM=!0,UM-=RM.length,RM=[],cE())}function _E(e){var t,n,a=JSON.parse(e),i=a.streams.length,o=0,s=0,d=[];for(zM=parseInt(a._total),i<jl&&(NM=!0);o<RM.length&&s<i;o++,s++)n=(t=a.streams[s]).channel._id,FM[n]?o--:(FM[n]=1,I_(RM[o],[t.channel.name,n],[t.preview.template.replace("{width}x{height}",eu),Qu(JSON.stringify(t.stream_type))+t.channel.display_name,t.channel.status,t.game,y+Mp(t.created_at)+b+", "+h+$u(t.viewers)+q,Zu(t.video_height,t.average_fps,t.channel.language)],WM),d.push(o));for(o=d.length-1;-1<o;o--)RM.splice(d[o],1);JM+=s,NM&&(UM-=RM.length,RM=[]),cE()}function fE(){N_(GM,AM,WM,Rl,UM),UM/Rl<GM+Hl&&!NM&&!HM&&(nE(),aE()),kl&&mE()}function mE(){UM&&J_(GM+"_"+AM,WM)}function hE(e){var t;if(!cf&&!G_())switch(O_(),e.keyCode){case La:Ku()?Yu():Xu()?zu():(mE(),uf(hE));break;case Sa:if(e_(GM,AM-1,WM[0]))mE(),AM--,fE();else for(t=Rl-1;-1<t;t--)if(e_(GM-1,t,WM[0])){mE(),GM--,AM=t,fE();break}break;case xa:e_(GM,AM+1,WM[0])?(mE(),AM++,fE()):e_(GM+1,0,WM[0])&&(mE(),GM++,AM=0,fE());break;case Ia:for(t=0;t<Rl;t++)if(e_(GM-1,AM-t,WM[0])){mE(),GM--,AM-=t,fE();break}break;case Pa:for(t=0;t<Rl;t++)if(e_(GM+1,AM-t,WM[0])){mE(),GM++,AM-=t,fE();break}break;case Ma:case Ca:case Ea:case Ta:F_(GM+"_"+AM,WM,hE)}}var pE=0,vE=0,gE=8,yE=0,bE=null,wE=["u_thumbdiv","u_img","u_infodiv","u_displayname","u_cell","user_scroll"],kE=!1,CE=!0;function ME(){return Ml?(EE(),void Wa(Ml)):io()?(yl.Main_CenterLablesVectorPos=1,yl.Main_Go=cl,document.getElementById("screens_holder").style.top=screen.height/100*7+"px",Vu(),Iu("top_bar_user","icon_center_focus"),document.body.addEventListener("keydown",HE,!1),void(kE?(y_(pE),Eu(wE[5]),LE(),s_()):SE())):(yl.Main_Go=Kc,EE(),void i_())}function EE(){yl.Users_Position=0,xu("top_bar_user","icon_center_focus"),document.body.removeEventListener("keydown",HE),Mu(wE[5]),document.getElementById("screens_holder").style.top="0"}function SE(){h_("stream_table_user"),Mu(wE[5]),Lu(),Vu(),cf=!(kE=!1),CE=!(pE=vE=0),j_(function(){IE()})}function IE(){for(var e,t,n,a=document.createElement("tbody"),i=document.getElementById("stream_table_user"),o=0;o<Ni.length;o++)t=0,n=o%2?"B5B5B5":"FFFFFF",(xl=document.createElement("tr")).className="follower_header",xl.innerHTML='<div class="follower_header">'+(o?"":se)+Ni[o].name+F+"</div>",i.appendChild(a),i.appendChild(xl),(e=document.createElement("tr")).appendChild(xE(o+"_"+t,yl.Main_selectedChannelDisplayname,K,"play",n)),t++,e.appendChild(xE(o+"_"+t,yl.Main_selectedChannelDisplayname,$,"users",n)),t++,e.appendChild(xE(o+"_"+t,yl.Main_selectedChannelDisplayname,ib.isLive?Z:Xt,"gamepad",n)),t++,e.appendChild(xE(o+"_"+t,yl.Main_selectedChannelDisplayname,Qt,"movie-play",n)),t++,e.appendChild(xE(o+"_"+t,yl.Main_selectedChannelDisplayname,Q,"filmstrip",n)),t++,o?e.appendChild(xE(o+"_"+t,yl.Main_selectedChannelDisplayname,oe,"arrow-up",n)):e.appendChild(xE(o+"_"+t,yl.Main_selectedChannelDisplayname,ee,"user-plus",n)),t++,e.appendChild(xE(o+"_"+t,yl.Main_selectedChannelDisplayname,te,"user-times",n)),t++,e.appendChild(xE(o+"_"+t,yl.Main_selectedChannelDisplayname,Ni[o].access_token?kt:wt,"key",n)),i.appendChild(e);PE()}function xE(e,t,n,a,i){return(xl=document.createElement("td")).setAttribute("id",wE[4]+e),xl.setAttribute(au,t),xl.className="stream_cell",xl.innerHTML='<div id="'+wE[0]+e+'" class="stream_thumbnail_channel" ><div id="'+wE[1]+e+'" class="stream_user_icon" style="color: #'+i+';"><i class="icon-'+a+'"></i></div></div><div id="'+wE[2]+e+'" class="stream_text"><div id="'+wE[3]+e+'" class="stream_info_user" style="text-align: center;">'+n+"</div></div>",xl}function PE(){j_(function(){kE||(kE=!0,LE(),Bu(),s_()),Eu(wE[5]),CE=cf=!1})}function TE(){for(var e=0;e<Ni.length;e++)Tu(wE[3]+e+"_2",ib.isLive?Z:Xt)}function LE(){Iu(wE[0]+pE+"_"+vE,"stream_thumbnail_focused"),b_(pE)?1<pE?e_(pE+1,0,wE[0])&&V_(wE[5],-1*document.getElementById(wE[4]+pE+"_"+vE).offsetTop+500):V_(wE[5],screen.height/100*7):L_(),kl&&BE()}function BE(){wl=!1,xu(wE[0]+pE+"_"+vE,"stream_thumbnail_focused")}function OE(){return yl.Users_Position=pE,3!==vE||Ni[yl.Users_Position].access_token?7===vE&&Ni[yl.Users_Position].access_token?(qu(kt),void window.setTimeout(Vu,1500)):(6!==vE&&7!==vE&&(Mu(wE[5]),document.body.removeEventListener("keydown",HE),document.getElementById("screens_holder").style.top="0"),void j_(function(){vE?1===vE?GC():2===vE?(Py=ib,Gy()):3===vE?dS():4===vE?iC():5===vE?pE?no(pE):(yl.Main_Before=cl,Hi()):6===vE?NE():7!==vE||Ni[yl.Users_Position].access_token||NE():QM()})):(qu(xn),void window.setTimeout(Vu,5e3))}function GE(){window.clearTimeout(bE)}function AE(){bE=window.setTimeout(UE,2e4)}function NE(){AE(),6===vE?Pu("main_dialog_remove",Jt+oa+Ni[yl.Users_Position].name+"?"):7===vE&&Pu("main_dialog_remove",mt+" "+Ni[yl.Users_Position].name+"?"),Eu("main_remove_dialog")}function UE(){GE(),Mu("main_remove_dialog"),yE=0,RE()}function FE(){return Su("main_remove_dialog")}function RE(){yE?(xu("remove_cancel","button_search_focused"),Iu("remove_yes","button_search_focused")):(Iu("remove_cancel","button_search_focused"),xu("remove_yes","button_search_focused"))}function HE(e){var t;if(!cf&&!G_())switch(O_(),e.keyCode){case La:FE()?UE():Xu()?zu():Ku()?Yu():(BE(),uf(HE));break;case Sa:if(FE())--yE<0&&(yE=1),RE(),GE(),AE();else if(e_(pE,vE-1,wE[0]))BE(),vE--,LE();else if(e_(pE-1,0,wE[0])){for(t=gE-1;-1<t;t--)if(e_(pE-1,t,wE[0])){BE(),pE--,vE=t,LE();break}}else BE(),vE=gE-1,LE();break;case xa:FE()?(1<++yE&&(yE=0),RE(),GE(),AE()):(e_(pE,vE+1,wE[0])?(BE(),vE++):(e_(pE+1,0,wE[0])?(BE(),pE++):BE(),vE=0),LE());break;case Ia:for(t=0;t<gE;t++)if(e_(pE-1,vE-t,wE[0])){BE(),pE--,vE-=t,LE();break}break;case Pa:for(t=0;t<gE;t++)if(e_(pE+1,vE-t,wE[0])){BE(),pE++,vE-=t,LE();break}break;case Ma:case Ca:case Ea:case Ta:var n;if(FE()){if(6===vE)n=yE,UE(),n&&(document.body.removeEventListener("keydown",HE),EE(),eo(pE));else if(n=yE,UE(),n){yl.Users_AddcodePosition=yl.Users_Position,s_();var a=za,i="https://id.twitch.tv/oauth2/authorize?response_type=code&client_id="+encodeURIComponent(Wl)+"&redirect_uri="+a+"&scope=user_follows_edit+user_subscriptions&force_verify=true";window.location=i}}else OE()}}var DE=0,qE=0,VE=!1,JE=0,zE={},XE=[],jE=!1,WE=0,YE=5,KE=3500,$E=0,ZE=0,QE=!1,eS=!1,tS="time",nS=2,aS=!1,iS=["uv_thumbdiv","uv_img","uv_infodiv","uv_title","uv_streamon","uv_duration","uv_viwers","uv_quality","uv_cell","uvempty_","user_vod_scroll","uv_game"],oS=!1,sS=!1;function dS(){yl.Main_CenterLablesVectorPos=1,yl.Main_Go=vl,Iu("top_bar_user","icon_center_focus"),Cu("label_side_panel","icon-arrow-circle-left",x),Pu("top_bar_user",u+u_(Ni[yl.Users_Position].name+(sS?N:A))),document.body.addEventListener("keydown",ES,!1),oS?(y_(DE),Eu(iS[10]),SS(),wS(),s_()):cS()}function rS(){yl.Users_Position=0,oS&&kS(),xu("top_bar_user","icon_center_focus"),Cu("label_side_panel","icon-ellipsis",Fn),document.body.removeEventListener("keydown",ES),Tu("top_bar_user",u),Mu(iS[10])}function cS(){oS&&kS(),h_("stream_table_user_vod"),Mu(iS[10]),Lu(),SS(),Vu(),aS=oS=!1,cf=!(eS=!(XE=[])),DE=qE=JE=ZE=$E=0,VE=!(zE={}),Fu(),uS()}function lS(){v_(),jE=!0,WE=0,KE=3500}function uS(){lS(),_S()}function _S(){var e=JE+$E;e&&ZE-1<e&&(e=ZE-Fl,VE=!0);var t,n="https://api.twitch.tv/kraken/videos/followed?limit="+Fl+"&broadcast_type="+(sS?"highlight":"archive")+"&sort="+tS+"&offset="+e;if(cu){if(!(t=Android.mreadUrl(n,KE,3,Zl+Ni[yl.Users_Position].access_token)))return void fS();if(200===(t=JSON.parse(t)).status)return void hS(t.responseText);401===t.status||403===t.status?Ya(yl.Users_Position,0,uS,mS):fS()}else(t=new XMLHttpRequest).open("GET",n,!0),t.timeout=KE,t.setRequestHeader(Kl,Ql),t.setRequestHeader(Yl,Wl),t.setRequestHeader($l,Zl+Ni[yl.Users_Position].access_token),t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void hS(t.responseText);401===t.status||403===t.status?Ya(yl.Users_Position,0,uS,mS):fS()}},t.send(null)}function fS(){++WE<YE?(KE+=500,_S()):mS()}function mS(){jE=!1,JE?(VE=!0,pS()):(cf=!1,Bu(),qu(L))}function hS(e){var t=JSON.parse(e),n=t.videos.length;ZE=parseInt(t._total),n<Fl&&(VE=!0);var a=JE;QE=!(JE+=n);var i=n/Rl;0<n%Rl&&i++;var o,s,d,r,c,l=0,u=document.getElementById("stream_table_user_vod");if(!aS){var _;for(aS=!0,d=document.createElement("tr"),f=0;f<2;f++)_=f?'<i class="icon-history stream_channel_fallow_icon"></i>'+ya+ya+Pn:'<i class="icon-movie-play stream_channel_fallow_icon"></i>'+ya+ya+p,(xl=document.createElement("td")).setAttribute("id",iS[8]+"y_"+f),xl.className="stream_cell",xl.innerHTML='<div id="'+iS[0]+"y_"+f+'" class="stream_thumbnail_channel_vod" ><div id="'+iS[3]+"y_"+f+'" class="stream_channel_fallow_game">'+_+"</div></div>",d.appendChild(xl);u.appendChild(d)}for(var f=0;f<i;f++){for(s=a/Rl+f,d=document.createElement("tr"),o=0;o<Rl&&l<n;o++,l++)c=(r=t.videos[l])._id,-1!==(r.preview.template+"").indexOf("404_processing")||zE[c]?o--:(zE[c]=1,d.appendChild(aI(s,s+"_"+o,[c,r.length,r.language,r.game,r.channel.name,r.increment_view_count_url],[r.preview.template.replace("{width}x{height}",eu),r.channel.display_name,R+__(r.created_at),SI.parse(r.title)+oa+$t+v+r.game,$u(r.views)+D,Zu(r.resolutions.chunked.slice(-4),parseInt(r.fps.chunked)||0,r.language),H+kp(r.length),r.animated_preview_url],iS)));for(;o<Rl;o++)VE&&!eS&&(eS=!0,JE=s*Rl+o),d.appendChild(k_(iS[9]+s+"_"+o)),XE.push(iS[9]+s+"_"+o);u.appendChild(d)}pS()}function pS(){oS?(p_(mu),Ru(qE,DE,Rl,JE)):(QE?qu(B+(sS?N:A)+O+I):(oS=!0,wS(),p_(mu),s_()),Eu(iS[10]),cf=!1,Bu()),0<XE.length&&!VE?vS():jE=!(XE=[])}function vS(){lS(),gS()}function gS(){Du(XE.length);var e=JE+$E;e&&ZE-1<e&&(e=ZE-jl,VE=!0);var t,n="https://api.twitch.tv/kraken/videos/followed?limit="+jl+"&broadcast_type="+(sS?"highlight":"archive")+"&sort="+tS+"&offset="+e;if(cu){if(!(t=Android.mreadUrl(n,KE,3,Zl+Ni[yl.Users_Position].access_token)))return void yS();if(200===(t=JSON.parse(t)).status)return void bS(t.responseText);401===t.status||403===t.status?Ya(yl.Users_Position,0,uS,mS):yS()}else(t=new XMLHttpRequest).open("GET",n,!0),t.timeout=KE,t.setRequestHeader(Kl,Ql),t.setRequestHeader(Yl,Wl),t.setRequestHeader($l,Zl+Ni[yl.Users_Position].access_token),t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void bS(t.responseText);401===t.status||403===t.status?Ya(yl.Users_Position,0,uS,mS):yS()}},t.send(null)}function yS(){++WE<YE?(KE+=500,gS()):(VE=!0,JE-=XE.length,XE=[],pS())}function bS(e){var t,n,a=JSON.parse(e),i=a.videos.length,o=0,s=0,d=[];for(ZE=parseInt(a._total);o<XE.length&&s<i;o++,s++)n=(t=a.videos[s])._id,-1!==(t.preview.template+"").indexOf("404_processing")||zE[n]?o--:(zE[n]=1,oI(XE[o],[n,t.length,t.language,t.game,t.channel.name,t.increment_view_count_url],[t.preview.template.replace("{width}x{height}",eu),t.channel.display_name,R+__(t.created_at),SI.parse(t.title)+oa+$t+v+t.game,$u(t.views)+D,Zu(t.resolutions.chunked.slice(-4),parseInt(t.fps.chunked)||0,t.language),H+kp(t.length),t.animated_preview_url],iS),d.push(o));for(o=d.length-1;-1<o;o--)XE.splice(d[o],1);$E+=s,VE&&(JE-=XE.length,XE=[]),pS()}function wS(){DE<0?CS():(N_(DE,qE,iS,Rl,JE),hI(iS,DE+"_"+qE),JE/Rl<DE+Hl&&!VE&&!jE&&uS(),kl&&kS())}function kS(){window.clearInterval(IS),-1<DE&&JE?(Eu(iS[1]+DE+"_"+qE),J_(DE+"_"+qE,iS)):MS()}function CS(){var e=1<qE?1:qE;Iu(iS[0]+"y_"+e,nu)}function MS(){var e=1<qE?1:qE;xu(iS[0]+"y_"+e,nu)}function ES(e){var t;if(!cf&&!G_())switch(O_(),e.keyCode){case La:Xu()?zu():Xu()?zu():Ku()?Yu():(kS(),uf(ES));break;case Sa:if(-1===DE)MS(),--qE<0&&(qE=1),CS();else if(DE||qE){if(e_(DE,qE-1,iS[0]))kS(),qE--,wS();else for(t=Rl-1;-1<t;t--)if(e_(DE-1,t,iS[0])){kS(),DE--,qE=t,wS();break}}else kS(),MS(),DE=-1,qE=1,CS();break;case xa:-1===DE?(MS(),1<++qE?(qE=0,QE?CS():(DE=0,wS())):CS()):e_(DE,qE+1,iS[0])?(kS(),qE++,wS()):e_(DE+1,0,iS[0])&&(kS(),DE++,qE=0,wS());break;case Ia:if(-1!==DE||QE)if(DE){for(t=0;t<Rl;t++)if(e_(DE-1,qE-t,iS[0])){kS(),DE--,qE-=t,wS();break}}else kS(),DE=-1,CS();else DE=0,MS(),wS();break;case Pa:if(-1!==DE||QE){for(t=0;t<Rl;t++)if(e_(DE+1,qE-t,iS[0])){kS(),DE++,qE-=t,wS();break}}else DE=0,MS(),wS();break;case Ma:case Ca:case Ea:case Ta:-1===DE?(0===qE?vf("UserVod_highlight",(sS=!sS)?"true":"false"):1===nS?nS++:nS--,cS()):D_(DE+"_"+qE,iS,ES)}}function SS(){1===nS?(Pu("top_bar_user",u+u_(Ni[yl.Users_Position].name+" "+(sS?N:A)+Sn)),tS="time"):2===nS&&(Pu("top_bar_user",u+u_(Ni[yl.Users_Position].name+" "+(sS?N:A)+In)),tS="views"),vf("UserVod_TypeNumber",nS)}var IS,xS=0,PS=0,TS=!1,LS=0,BS={},OS=[],GS=!1,AS=0,NS=5,US=3500,FS=0,RS=0,HS=!1,DS=!1,qS="week",VS=2,JS=!1,zS=["v_thumbdiv","v_img","v_infodiv","v_title","v_streamon","v_duration","v_viwers","v_quality","v_cell","vempty_","vod_scroll","v_game"],XS=!1,jS=!1,WS=1,YS=new Image;function KS(){yl.Main_CenterLablesVectorPos=4,yl.Main_Go=_l,Iu("top_bar_vod","icon_center_focus"),document.body.addEventListener("keydown",pI,!1),XS?(y_(xS),Eu(zS[10]),vI(),uI(),s_()):ZS()}function $S(){XS&&_I(),c_(),document.body.removeEventListener("keydown",pI),xu("top_bar_vod","icon_center_focus"),Tu("top_bar_vod",Qt),Mu(zS[10])}function ZS(){XS&&_I(),h_("stream_table_vod"),Mu(zS[10]),Lu(),vI(),Vu(),JS=XS=!1,cf=!(DS=!(OS=[])),xS=PS=LS=RS=FS=0,TS=!(BS={}),Fu(),QS(),eI()}function QS(){v_(),GS=!0,AS=0,US=3500}function eI(){var e=LS+FS;e&&RS-1<e&&(e=RS-Fl,TS=!0),Cf("https://api.twitch.tv/kraken/videos/top?limit="+Fl+"&broadcast_type="+(jS?"highlight":"archive")+"&sort=views&offset="+e+"&period="+qS+(""!==Tl?"&language="+Tl:""),US,2,null,nI,tI)}function tI(){++AS<NS?(US+=500,eI()):(GS=!1,LS?(TS=!0,dI()):(cf=!1,Bu(),qu(L)))}function nI(e){var t=JSON.parse(e),n=t.vods.length;RS=parseInt(t._total),n<Fl&&(TS=!0);var a=LS;HS=!(LS+=n);var i=n/Rl;0<n%Rl&&i++;var o,s,d,r,c,l=0,u=document.getElementById("stream_table_vod");if(!JS){var _;for(JS=!0,d=document.createElement("tr"),f=0;f<2;f++)_=f?'<i class="icon-history stream_channel_fallow_icon"></i>'+ya+ya+m:'<i class="icon-movie-play stream_channel_fallow_icon"></i>'+ya+ya+p,(xl=document.createElement("td")).setAttribute("id",zS[8]+"y_"+f),xl.className="stream_cell",xl.innerHTML='<div id="'+zS[0]+"y_"+f+'" class="stream_thumbnail_channel_vod" ><div id="'+zS[3]+"y_"+f+'" class="stream_channel_fallow_game">'+_+"</div></div>",d.appendChild(xl);u.appendChild(d)}for(var f=0;f<i;f++){for(s=a/Rl+f,d=document.createElement("tr"),o=0;o<Rl&&l<n;o++,l++)c=(r=t.vods[l])._id,-1!==(r.preview.template+"").indexOf("404_processing")||BS[c]?o--:(BS[c]=1,d.appendChild(aI(s,s+"_"+o,[c,r.length,r.language,r.game,r.channel.name,r.increment_view_count_url],[r.preview.template.replace("{width}x{height}",eu),r.channel.display_name,R+__(r.created_at),SI.parse(r.title)+oa+$t+v+r.game,$u(r.views)+D,Zu(r.resolutions.chunked.slice(-4),parseInt(r.fps.chunked)||0,r.language),H+kp(r.length),r.animated_preview_url],zS)));for(;o<Rl;o++)TS&&!DS&&(DS=!0,LS=s*Rl+o),d.appendChild(k_(zS[9]+s+"_"+o)),OS.push(zS[9]+s+"_"+o);u.appendChild(d)}dI()}function aI(e,t,n,a,i){return e<Rl&&w_(a[0]),iI(n,t,a,i)}function iI(e,t,n,a){return(xl=document.createElement("td")).setAttribute("id",a[8]+t),xl.setAttribute(au,JSON.stringify(e)),xl.className="stream_cell",xl.innerHTML=sI(t,n,a),xl}function oI(e,t,n,a){var i=document.getElementById(e),o=e.split(a[9])[1];i.setAttribute(au,JSON.stringify(t)),i.innerHTML=sI(o,n,a),i.setAttribute("id",a[8]+o)}function sI(e,t,n){return g_(n[1]+e,t[0]),'<div id="'+n[0]+e+'" class="stream_thumbnail_video"'+(t[7]?' style="background-size: 0 0; background-image: url('+t[7]+');"':"")+'><img id="'+n[1]+e+'" class="stream_img"></div><div id="'+n[2]+e+'" class="stream_text"><div id="'+n[3]+e+'" class="stream_info" style="width: 72%; display: inline-block; font-size: 85%;">'+t[1]+'</div><div id="'+n[7]+e+'"class="stream_info" style="width:27%; float: right; text-align: right; display: inline-block;">'+t[5]+'</div><div><div id="'+n[4]+e+'"class="stream_info" style="width: 59%; display: inline-block;">'+t[2]+'</div><div id="'+n[5]+e+'"class="stream_info" style="width: 39%; display: inline-block; float: right; text-align: right;">'+t[6]+'</div></div><div id="'+n[11]+e+'"class="stream_info">'+t[3]+'</div><div id="'+n[6]+e+'"class="stream_info">'+t[4]+"</div></div>"}function dI(){if(XS?(p_(mu),Ru(PS,xS,Rl,LS)):(HS?qu(B+(jS?N:A)+O+I):(XS=!0,uI(),p_(mu),s_()),Eu(zS[10]),cf=!1,Bu()),0<OS.length&&!TS)return QS(),void rI();GS=!(OS=[])}function rI(){Du(OS.length);var e=LS+FS;e&&RS-1<e&&(e=RS-jl,TS=!0),Cf("https://api.twitch.tv/kraken/videos/top?limit="+jl+"&broadcast_type="+(jS?"highlight":"archive")+"&sort=views&offset="+e+"&period="+qS+(""!==Tl?"&language="+Tl:""),US,2,null,lI,cI)}function cI(){++AS<NS?(US+=500,rI()):(TS=!0,LS-=OS.length,OS=[],dI())}function lI(e){var t,n,a=JSON.parse(e),i=a.vods.length,o=0,s=0,d=[];for(RS=parseInt(a._total);o<OS.length&&s<i;o++,s++)n=(t=a.vods[s])._id,-1!==(t.preview.template+"").indexOf("404_processing")||BS[n]?o--:(BS[n]=1,oI(OS[o],[n,t.length,t.language,t.game,t.channel.name,t.increment_view_count_url],[t.preview.template.replace("{width}x{height}",eu),t.channel.display_name,R+__(t.created_at),SI.parse(t.title)+oa+$t+v+t.game,$u(t.views)+D,Zu(t.resolutions.chunked.slice(-4),parseInt(t.fps.chunked)||0,t.language),H+kp(t.length),t.animated_preview_url],zS),d.push(o));for(o=d.length-1;-1<o;o--)OS.splice(d[o],1);FS+=s,TS&&(LS-=OS.length,OS=[]),dI()}function uI(){xS<0?fI():(N_(xS,PS,zS,Rl,LS),hI(zS,xS+"_"+PS),LS/Rl<xS+Hl&&!TS&&!GS&&(QS(),eI()),kl&&_I())}function _I(){window.clearInterval(IS),-1<xS&&LS?(Eu(zS[1]+xS+"_"+PS),J_(xS+"_"+PS,zS)):mI()}function fI(){var e=1<PS?1:PS;Iu(zS[0]+"y_"+e,nu)}function mI(){var e=1<PS?1:PS;xu(zS[0]+"y_"+e,nu)}function hI(t,n){if(WS){var a=document.getElementById(t[0]+n);YS.onload=function(){Mu(t[1]+n),a.style.backgroundSize="612px";var e=0;IS=window.setInterval(function(){a.style.backgroundPosition="0px "+ ++e%10*-344+"px"},650)},YS.src=a.style.backgroundImage.replace(/url\(['"]?(.*?)['"]?\)/i,"$1")}}function pI(e){var t;if(!cf&&!G_())switch(O_(),e.keyCode){case La:Ku()?Yu():Xu()?zu():(_I(),uf(pI));break;case Sa:if(-1===xS)mI(),--PS<0&&(PS=1),fI();else if(xS||PS){if(e_(xS,PS-1,zS[0]))_I(),PS--,uI();else for(t=Rl-1;-1<t;t--)if(e_(xS-1,t,zS[0])){_I(),xS--,PS=t,uI();break}}else _I(),mI(),xS=-1,PS=1,fI();break;case xa:-1===xS?(mI(),1<++PS?(PS=0,HS?fI():(xS=0,uI())):fI()):e_(xS,PS+1,zS[0])?(_I(),PS++,uI()):e_(xS+1,0,zS[0])&&(_I(),xS++,PS=0,uI());break;case Ia:if(-1!==xS||HS)if(xS){for(t=0;t<Rl;t++)if(e_(xS-1,PS-t,zS[0])){_I(),xS--,PS-=t,uI();break}}else _I(),xS=-1,fI();else xS=0,mI(),uI();break;case Pa:if(-1!==xS||HS){for(t=0;t<Rl;t++)if(e_(xS+1,PS-t,zS[0])){_I(),xS++,PS-=t,uI();break}}else xS=0,mI(),uI();break;case Ma:case Ca:case Ea:case Ta:-1===xS?(0===PS?vf("Vod_highlight",(jS=!jS)?"true":"false"):4<++VS&&(VS=1),ZS()):D_(xS+"_"+PS,zS,pI)}}function vI(){1===VS?(Pu("top_bar_vod",Qt+u_((jS?N:A)+re)),qS="day"):2===VS?(Pu("top_bar_vod",Qt+u_((jS?N:A)+ce)),qS="week"):3===VS?(Pu("top_bar_vod",Qt+u_((jS?N:A)+le)),qS="month"):4===VS&&(Pu("top_bar_vod",Qt+u_((jS?N:A)+ue)),qS="all"),vf("vod_periodNumber",VS)}function gI(e,t,n){if(n.restrictions){if(n.restrictions.channels&&n.restrictions.channels.length&&-1===n.restrictions.channels.indexOf(yl.Play_selectedChannel))return t;if(n.restrictions.games&&n.restrictions.games.length)return t}return t.replace(n.code,yI(n))}function yI(e){return'<img class="emoticon '+e.source+"-emo-"+e.id+'" src="'+e["1x"]+'" srcset="'+e["2x"]+" 2x, "+e["3x"]+' 4x" />'}function bI(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function wI(e,t){for(var n=t.split(" "),a=0;a<n.length;a++){var i=n[a],o=i.replace(/(^[~!@#$%\^&\*\(\)]+|[~!@#$%\^&\*\(\)]+$)/g,""),s=Mr[o]||Mr[i];i=s?gI(e,i,s):bI(i),n[a]=i}return n.join(" ")}function kI(e){return'<img class="emoticon" src="https://static-cdn.jtvnw.net/emoticons/v1/'+e+'/1.0" srcset="https://static-cdn.jtvnw.net/emoticons/v1/'+e+"/2.0 2x, https://static-cdn.jtvnw.net/emoticons/v1/"+e+'/3.0 4x" />'}function CI(t,a){if(!a)return[t];var n=[],e=Object.keys(a),i=[];return e.forEach(function(e){for(var t=a[e],n=t.length-1;0<=n;n--)i.push({id:e,first:t[n][0],last:t[n][1]})}),i.sort(function(e,t){return t.first-e.first}),t=punycode.ucs2.decode(t),i.forEach(function(e){n.unshift(punycode.ucs2.encode(t.slice(e.last+1))),n.unshift([kI(e.id)]),t=t.slice(0,e.first)}),n.unshift(punycode.ucs2.encode(t)),n}function MI(a){return Object.keys(a).map(function(n){var e=a[n];return e.type=n,e.versions=Object.keys(a[n].versions).map(function(e){var t=a[n].versions[e];return t.type=e,t}),e})}function EI(e,t,n,a){var i=document.createElement("style");i.type="text/css",i.innerHTML="."+e+"-"+t+' { background-image: url("'+n.replace("http:","https:")+'"); }',a?a.appendChild(i):document.head.appendChild(i)}window.parseIRC=function(e){var t={raw:e,tags:{},prefix:null,command:null,params:[]},n=0,a=0;if(64===e.charCodeAt(0)){if(-1===(a=e.indexOf(" ")))return null;for(var i=e.slice(1,a).split(";"),o=0;o<i.length;o++){var s=i[o].split("=");t.tags[s[0]]=s[1]||!0}n=a+1}for(;32===e.charCodeAt(n);)n++;if(58===e.charCodeAt(n)){if(-1===(a=e.indexOf(" ",n)))return null;for(t.prefix=e.slice(n+1,a),n=a+1;32===e.charCodeAt(n);)n++}if(-1===(a=e.indexOf(" ",n)))return e.length>n?(t.command=e.slice(n),t):null;for(t.command=e.slice(n,a),n=a+1;32===e.charCodeAt(n);)n++;for(;n<e.length;){if(a=e.indexOf(" ",n),58===e.charCodeAt(n)){t.params.push(e.slice(n+1));break}if(-1===a){if(-1===a){t.params.push(e.slice(n));break}}else for(t.params.push(e.slice(n,a)),n=a+1;32===e.charCodeAt(n);)n++}return t},function(e){var t="object"==typeof global&&global;t.global!==t&&t.window!==t&&t.self!==t||(e=t);var n,v=2147483647,g=36,y=26,i=38,o=700,a=/^xn--/,s=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,r={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},c=g-1,b=Math.floor,w=String.fromCharCode;function k(e){throw new RangeError(r[e])}function l(e,t){for(var n=e.length,a=[];n--;)a[n]=t(e[n]);return a}function u(e,t){var n=e.split("@"),a="";return 1<n.length&&(a=n[0]+"@",e=n[1]),a+l((e=e.replace(d,".")).split("."),t).join(".")}function C(e){for(var t,n,a=[],i=0,o=e.length;i<o;)55296<=(t=e.charCodeAt(i++))&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?a.push(((1023&t)<<10)+(1023&n)+65536):(a.push(t),i--):a.push(t);return a}function M(e){return l(e,function(e){var t="";return 65535<e&&(t+=w((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+w(e)}).join("")}function E(e,t){return e+22+75*(e<26)-((0!==t)<<5)}function S(e,t,n){var a=0;for(e=n?b(e/o):e>>1,e+=b(e/t);c*y>>1<e;a+=g)e=b(e/c);return b(a+(c+1)*e/(e+i))}function _(e){var t,n,a,i,o,s,d,r,c,l,u,_=[],f=e.length,m=0,h=128,p=72;for((n=e.lastIndexOf("-"))<0&&(n=0),a=0;a<n;++a)128<=e.charCodeAt(a)&&k("not-basic"),_.push(e.charCodeAt(a));for(i=0<n?n+1:0;i<f;){for(o=m,s=1,d=g;f<=i&&k("invalid-input"),u=e.charCodeAt(i++),(g<=(r=u-48<10?u-22:u-65<26?u-65:u-97<26?u-97:g)||r>b((v-m)/s))&&k("overflow"),m+=r*s,!(r<(c=d<=p?1:p+y<=d?y:d-p));d+=g)s>b(v/(l=g-c))&&k("overflow"),s*=l;p=S(m-o,t=_.length+1,0===o),b(m/t)>v-h&&k("overflow"),h+=b(m/t),m%=t,_.splice(m++,0,h)}return M(_)}function f(e){var t,n,a,i,o,s,d,r,c,l,u,_,f,m,h,p=[];for(_=(e=C(e)).length,t=128,o=72,s=n=0;s<_;++s)(u=e[s])<128&&p.push(w(u));for(a=i=p.length,i&&p.push("-");a<_;){for(d=v,s=0;s<_;++s)t<=(u=e[s])&&u<d&&(d=u);for(d-t>b((v-n)/(f=a+1))&&k("overflow"),n+=(d-t)*f,t=d,s=0;s<_;++s)if((u=e[s])<t&&++n>v&&k("overflow"),u===t){for(r=n,c=g;!(r<(l=c<=o?1:o+y<=c?y:c-o));c+=g)h=r-l,m=g-l,p.push(w(E(l+h%m,0))),r=b(h/m);p.push(w(E(r,0))),o=S(n,f,a===i),n=0,++a}++n,++t}return p.join("")}n={version:"1.4.1",ucs2:{decode:C,encode:M},decode:_,encode:f,toASCII:function(e){return u(e,function(e){return s.test(e)?"xn--"+f(e):e})},toUnicode:function(e){return u(e,function(e){return a.test(e)?_(e.slice(4).toLowerCase()):e})}},e.punycode=n}(this),function(e,t){e.ReconnectingWebSocket=function(){if("WebSocket"in window)return u.prototype.onopen=function(){},u.prototype.onclose=function(){},u.prototype.onconnecting=function(){},u.prototype.onmessage=function(){},u.prototype.onerror=function(){},u.debugAll=!1,u.CONNECTING=WebSocket.CONNECTING,u.OPEN=WebSocket.OPEN,u.CLOSING=WebSocket.CLOSING,u.CLOSED=WebSocket.CLOSED,u;function u(e,t,n){var a={debug:!1,automaticOpen:!0,reconnectInterval:1e3,maxReconnectInterval:3e4,reconnectDecay:1.5,timeoutInterval:3e3,maxReconnectAttempts:null,binaryType:"blob"};for(var i in n||(n={}),a)void 0!==n[i]?this[i]=n[i]:this[i]=a[i];this.url=e,this.reconnectAttempts=0,this.readyState=WebSocket.CONNECTING,this.protocol=null;var o,s=this,d=!1,r=!1,c=document.createElement("div");function l(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}c.addEventListener("open",function(e){s.onopen(e)}),c.addEventListener("close",function(e){s.onclose(e)}),c.addEventListener("connecting",function(e){s.onconnecting(e)}),c.addEventListener("message",function(e){s.onmessage(e)}),c.addEventListener("error",function(e){s.onerror(e)}),this.addEventListener=c.addEventListener.bind(c),this.removeEventListener=c.removeEventListener.bind(c),this.dispatchEvent=c.dispatchEvent.bind(c),this.open=function(a){if((o=new WebSocket(s.url,t||[])).binaryType=this.binaryType,a){if(this.maxReconnectAttempts&&this.reconnectAttempts>this.maxReconnectAttempts)return}else c.dispatchEvent(l("connecting")),this.reconnectAttempts=0;(s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","attempt-connect",s.url);var e=o,i=setTimeout(function(){(s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","connection-timeout",s.url),r=!0,e.close(),r=!1},s.timeoutInterval);o.onopen=function(){clearTimeout(i),(s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","onopen",s.url),s.protocol=o.protocol,s.readyState=WebSocket.OPEN,s.reconnectAttempts=0;var e=l("open");e.isReconnect=a,a=!1,c.dispatchEvent(e)},o.onclose=function(e){if(clearTimeout(i),o=null,d)s.readyState=WebSocket.CLOSED,c.dispatchEvent(l("close"));else{s.readyState=WebSocket.CONNECTING;var t=l("connecting");t.code=e.code,t.reason=e.reason,t.wasClean=e.wasClean,c.dispatchEvent(t),a||r||((s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","onclose",s.url),c.dispatchEvent(l("close")));var n=s.reconnectInterval*Math.pow(s.reconnectDecay,s.reconnectAttempts);setTimeout(function(){s.reconnectAttempts++,s.open(!0)},n>s.maxReconnectInterval?s.maxReconnectInterval:n)}},o.onmessage=function(e){(s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","onmessage",s.url,e.data);var t=l("message");t.data=e.data,c.dispatchEvent(t)},o.onerror=function(e){(s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","onerror",s.url,e),c.dispatchEvent(l("error"))}},!0===this.automaticOpen&&this.open(!1),this.send=function(e){if(o)return(s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","send",s.url,e),o.send(e);throw"INVALID_STATE_ERR : Pausing to reconnect websocket"},this.close=function(e,t){void 0===e&&(e=1e3),d=!0,o&&o.close(e,t)},this.refresh=function(){o&&o.close()}}}()}(this);var SI=function(){var e={parse:function(e,t){return t||(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;")),a(e,function(e){var t=function(e){for(var t=e.indexOf(d)<0?e.replace(s,""):e,n=[],a=0,i=0,o=0;o<t.length;)a=t.charCodeAt(o++),i?(n.push((65536+(i-55296<<10)+(a-56320)).toString(16)),i=0):55296<=a&&a<=56319?i=a:n.push(a.toString(16));return n.join("-")}(e);return t?'<img class="emoji" src="https://twemoji.maxcdn.com/2/72x72/'+t+'.png"/>':e})},replace:a},n=/(?:\ud83d[\udc68\udc69])(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddb0-\uddb3])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f)|[\u0023\u002a\u0030-\u0039]\ufe0f?\u20e3|(?:[\u00a9\u00ae\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddb5\uddb6\uddb8\uddb9\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a-\udc6d\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\udeeb\udeec\udef4-\udef9]|\ud83e[\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd40-\udd45\udd47-\udd70\udd73-\udd76\udd7a\udd7c-\udda2\uddb4\uddb7\uddc0-\uddc2\uddd0\uddde-\uddff]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,s=/\uFE0F/g,d=String.fromCharCode(8205);return e;function a(e,t){return String(e).replace(n,t)}}();