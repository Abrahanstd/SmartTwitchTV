var t,n,a,e,i,o,s,d,r,c,p,m,l,u,_,f,g,h,v,y,b,w,k,C,M,E,S,I,x,P,T,L,B,O,G,A,N,U,R,F,H,D,q,V,J,z,X,j,W,Y,K,$,Z,Q,ee,te,ne,ae,ie,oe,se,de,re,ce,le,ue,_e,fe,me,he,pe,ge,ve,ye,be,we,ke,Ce,Me,Ee,Se,Ie,xe,Pe,Te,Le,Be,Oe,Ge,Ae,Ne,Ue,Re,Fe,He,De,qe,Ve,Je,ze,Xe,je,We,Ye,Ke,$e,Ze,Qe,et,tt,nt,at,it,ot,st,dt,rt,ct,lt,ut,_t,ft,mt,ht,pt,gt,vt,yt,bt,wt,kt,Ct,Mt,Et,St,It,xt,Pt,Tt,Lt,Bt,Ot,Gt,At,Nt,Ut,Rt,Ft,Ht,Dt,qt,Vt,Jt,zt,Xt,jt,Wt,Yt,Kt,$t,Zt,Qt,en,tn,nn,an,on,sn,dn,rn,cn,ln,un,_n,fn,mn,hn,pn,gn,vn,yn,bn,wn,kn,Cn,Mn,En,Sn,In,xn,Pn,Tn,Ln,Bn,On,Gn,An,Nn,Un,Rn,Fn,Hn,Dn,qn,Vn,Jn,zn,Xn,jn,Wn,Yn,Kn,$n,Zn,Qn,ea,ta,na,aa,ia,oa,sa,da="fglfgl27@gmail.com",ra="<br>",ca='<i class="icon-circle" style="font-size: 50%; vertical-align: middle; font-weight: bold;"></i>  ',la='<div class="about_text_title">',ua='<div class="about_text_title" style="text-align: left;">',_a='<div style="text-align: left;">',fa="",ma="",ha="",pa="",ga="",va="",ya="",ba="",wa="",ka="",Ca="&nbsp;",Ma="",Ea='<div style="vertical-align: middle; display: inline-block;"><i class="icon-twitch" style="color: #FFFFFF; font-size: 115%; "></i></div><div style="vertical-align: middle; display: inline-block">'+Ca;function Sa(){fa=e+" (C)",ma=n+" (D)",pa=a+" (A)",ha=i+" (A)",r+=tn,c+=tn,ga=la+e+"</div>"+la+Ee+"</div>"+ra+_a+ca+Te+ra+ca+(Le+=Dn)+ra+ca+Be+ra+ca+Oe+ra+Ge+ra+ca+Ae+ra+Ca+Ca+Ca+Ne+ra+ca+Ue+ra+"</div>"+ra+(ba=la+Ce+"</div>"+_a+ca+at+ra+ca+et+ra+ca+tt+ra+"</div>"+_a+ca+nt+ra+ca+it+ra+ca+ot+ra+ra+la+Me+"</div>"+_a+ca+st+ra+ca+dt+ra+ca+rt+ra+ca+ct+ra+ca+lt)+ra+ra+la+ke+"</div>",va=la+Ea+we+"</div></div>",ya=_a+ra+Re+ra+(Yc?ra+'<div style="display: inline-block; color: #FF0000; font-size: 110%; font-weight: bold;">'+ea+"</div>":"")+"</div>"+ra+la+Fe+"</div>"+da+ra+ra+He+ra+De+ra+ra+ua+qe+"</div>"+_a+Ke+ra+ca+Ve+ra+ca+Je+ra+ca+ze+ra+ca+Xe+ra+ca+je+ra+ca+We+ra+ca+Ye+ra+$e+ra+ca+Ze+ra+ca+Qe+ra+la+ke+"</div></div>",wa=la+Se+"</div>"+mt+ra,Ma=ra+la+ht+"</div>"+_a+ca+pt+ra+ra+la+Ma+"</div>"+ra+ra+ke+"</div>",ka=vt+ra+ca+yt.replace("link_link",'<div style="display: inline-block; color: #FF0000; font-size: 110%; font-weight: bold;">http://tiny.cc/twitchkeycode</div>')+ra+ca+bt+ra+ca+wt+ra+ca+kt+ra+ca+Ct}function Ia(){Bl=!1,document.getElementById("side_panel").style.width="17%",t="Refresh:",n="Search",a="Settings",e="Controls",i="About",o="Hide",s="The text you entered is empty.",d="The search result is empty.",r="Switch screen",c="Switch user screen",p="Switch: Past Broadcast or Highlight",m="Switch: Period (24h, 7d, 30d, all)",l="Go to ",u="User ",_="Live",f="Games",g="Playing ",h=" for ",v="Watching time ",y="Since ",b=" ago",w="A Game",k="Type your search...",C="Type your authentication key...",M="Type your user name...",E="Press Enter or Select key to, ",S="Channels",I="Channel",x="Back to previously screen: Back key twice",P=" has ended",T="This video is only available to subscribers.",L="Connection failed, unable to load content hit refresh to try again",B="No",O=" for this ",G="Connection failed, unable to load video content exiting...",A=" Past Broadcast",N=" Highlight",U=" Clips",R=" Content",F="Streamed on ",H="Duration ",D=" Views",q=" Viewers",V="Click again to exit!",J="Do you wanna to exit Twitch?",z="Exit",X="Close",j="Minimize",W="Cancel",Y="Not Live | ",K=" Channels Live",$=" Hosts Live",Z=" Games Live",Q=" Followed Channels",ee=" Add User",te=" Remove User",ne="User doesn't exist",ae=" hosting ",ie=" already set",oe="Make First",se="First user can fallow (when providing a key) and see live channels feed outside of the user screen<br>",de="Add a Twitch user to display it's Followed Channels content here",re=" (24h)",ce=" (7d)",le=" (30d)",ue=" (all)",_e="Jumping",fe=" to ",me="Jump Canceled",he=" , jump time bigger then duration",pe=" Sec",ge=" Min",ve=" Hr",ye="Source",be="Version: ",we="SmartTV Twitch",ke="Press back key to close this.",Ce="Player Related:",Me="Chat Related:",Ee="General Related:",Se="Update",Ie="Current installed version ",xe=" latest available version ",Pe="This are the none players related controls, the player can show it's own controls.",Te="Play a video: Navigate using Directional pad (up/down/left/right), press enter to start playing",Le="Refresh screen content: ",Be="Exit the application: from side pannel click exit",Oe=" Switch screen: Back key then D-Pad left or right",Ge="Some screen will change its internal content (channel past broadcast or clips for example) instead of changing to another screen",Ae="Start a search: from side pannel click search",Ne="After writing the search text press key Enter on the virtual keyboard then choose a search option",Ue="About this application: from side pannel click about",Re="This is a SmartTV Twitch client develop by a individual on his free time, for TV's that don't have access to a good official application, released for free to any one that wanna to use it.",ea="This version of the app is for test in a browser only!",Fe="Developer information:",He="This is an open source application licensed under the GNU General Public License v3.0, check it on github",De="github.com/fgl27/SmartTwitchTV",qe="This application uses following dependencies:",Ve="Nightdev KapChat - KapChat captures Twitch chat directly into OBS or XSplit (https://www.nightdev.com/kapchat/)",Je="Fontastic - Create your customized icon fonts in seconds (http://app.fontastic.me)",ze="Twemoji - A simple library that provides standard Unicode emoji support across all platforms (https://github.com/twitter/twemoji)",Xe="UglifyJS - is a JavaScript parser, minifier, compressor and beautifier toolkit (https://github.com/mishoo/UglifyJS2)",je="JS Beautifier - Beautify, unpack or deobfuscate JavaScript and HTML, make JSON/JSONP readable, etc. (https://github.com/beautify-web/js-beautify)",We="HTMLMinifier - A highly configurable, well-tested, JavaScript-based HTML minifier (https://github.com/kangax/html-minifier)",Ye="JSHint - A Static Code Analysis Tool for JavaScript (https://github.com/jshint/jshint)",Ke="Web:",$e="Android:",Ze="Google: Leanback v17 (https://developer.android.com/reference/android/support/v17/leanback/package-summary)",Qe="Google: ExoPlayer (https://github.com/google/ExoPlayer)",et="Show information panel: Press enter key or D-pad keys if chat and live channel feed is not showing",tt="Close the video: press back key twice",nt="Play/Pause a video: open information panel and click on pause simbol (not available to Live streams)",at="Show user live channels feed: D-pad up",it="Change video quality: Open information panel, , navigate using use Directional pad (left/right), then use Directional pad (up/down) to choose the new quality after press Select key to confirm the change",ot="Force refresh a video (in case it freezes): Change video quality to the same",st="Show or hide the Chat : D-pad right",dt="Change Chat position : D-pad left",rt="Change Chat size : D-pad up",ct="Change Chat background brightness: Change in side panel settings",lt="Force refresh the Chat (in case it freezes or doesn't load): Change video quality to the same will reset and sync it",ut='Start a search: open information panel, navigate using use Directional pad (left/right) to "Search" and press enter',_t="Chat and video (Side by side): Color button red (A)",ia="Force disable the chat",oa="with this the chat will not load content, this is useful on a stream with too many viewers were the chat can lag the app.",ft="There is a update available, check it in the app github releases ",Ma="Be aware that after the update (reinstall of the app using latest release) all saved users, keys or etc configuration of the app is lost",mt="A update is available, and the app can't self update this version ",ht="Major changes:",pt="Improves how the app runs in the background",gt='Adding a key allows the app to fallow and access subscribed only past broadcast (for channel you are Sub to and block VOD access to none subscribers). On the authentication page if you already added a key for another user, you need to click up two to tree time and click over "not you?" to authenticate for a different users <br> <br> add key for',vt=" below, fallowing this steps:",yt="Access the site link_link (using a computer or a smart phone)",bt='Click on the "Authorize" button it will take you to main Twitch.TV authentication site',wt="Login to Twitch.TV using the user name you are trying to add a key for",kt="Click on Authorize button of Twitch.TV site if you agree with the requested permissions",Ct="The web page will update and show a key code, the key only has lower case letters and nubers.",Mt=" Add Authentication key",Et="Key added OK",St="Key test fail, it's needed to add new one",It="Key test return OK",xt="You try to add a key for user ",Pt=" but this key is for user ",Tt=" Following",Lt=" Follow",Bt=" And you have not set a authentication key the app can't check yours sub status.",Ot=" And you are not a sub of this channel",Gt=" You are a sub of this channel but the app fail to authenticate contact the developer email in about",At="Fail authentication check with the provider key, please check and try again",Fn="The added key doesn't belong to the user ",Nt="No user",Ut="Set a user and a authentication key to be able to fallow/unfollow",Rt="Restart the",Ft=" Clip",Ht="Channel content",Dt="Network is disconnect, the application can't work without INTERNET",qt="Network connection reestablished",Vt=" Followers",Jt=", Can't fallow or unfallow ",zt="Game content",Xt="Yes",jt="Are you sure you want to remove the user ",Wt="Press Up to ",Yt="Followed Games",Kt="Change between",$t=" Back key then Enter",Zt=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"],Qt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],en="Started ",tn=" (PG Up/Down)",nn="Videos",an=" Video",on="Replay",sn="exiting in ",dn='press "Return" to exit',rn="Featured",cn="Created at ",ln="Open the Broadcast",un="No Broadcast",_n="There is no Past Broadcast for this clip",fn="And because of that no chat",mn=" is now",hn="Open the Hosting",pn="Player related",gn="Buffer size:",vn="A lower value here will make the player to start playing sooner, but it may cause re-buffer with will cause the player to pause to buffer.",yn="Live streams buffer",bn="Videos (Past Broadcast and Highlight) buffer",wn="Clips buffer",kn="General related",Cn="Language",Mn="Chat: Connecting to chat server..."+ra+"Chat: Connected."+ra+"Chat: Joined channel ",En="Play from the start or from where you stop watching last time?",In=(Sn="From:"+ra)+"Start",xn="Chat: The Chat has ended!",Pn=": Most recent",Tn=": Most views",Ln="Set a authentication key to be able to see fallowed videos",Bn="Switch: Most recent or views",On="Enable",Gn="Disable",Wn="The app was closed willing playing, restoring playback",An="Restore playback",Nn="When changing apps, the app may be closed by the system to free memory. In this case the app saves what it was playing and restores the playback when reopened",Un="Chat font size",Rn="Change the chat lines font size, applies to text and emotes",Hn="Videos animated thumbnails",Dn="Side panel: Back key twice",qn="Size ",Vn="Brightness ",Jn="Forbidden content, this Live must be for Prime only subscribers or lock to Twitch official app only",zn="Jump step ",Xn=" seconds",jn=" minutes",Yn="Clock offset",Kn="Application language",$n="Content language",Zn="All",Qn="Empty game fro this",ta="Isn't possible to jump during a buffering",na="Chat is disabled, enable in side pannel settings",aa="This clip/video fail to load can't replay",sa="Chat backgroung brightness "}var xa=51,Pa=52,Ta=179,La=37,Ba=38,Oa=39,Ga=40,Aa=13,Na=49,Ua=8,Ra=13,Fa=32,Ha=46,Da=0,qa=5,Va=1e4,Ja=0,za=!1,Xa=!1,ja=!1,Wa=!1,Ya="",Ka="https://fgl27.github.io/SmartTwitchTV/release/index.min.html",$a="elsu5d09k0xomu7cggx3qg5ybdwu7g",Za="https://id.twitch.tv/oauth2/token?";function Qa(e){kl.Users_Position=kl.Users_AddcodePosition,Ja=e,ki(),Gu(),ai()}function ei(e,t,n,a){var i=new XMLHttpRequest,o=Za+"grant_type=refresh_token&client_id="+encodeURIComponent($l)+"&client_secret="+encodeURIComponent($a)+"&refresh_token="+encodeURIComponent(Di[e].refresh_token)+"&redirect_uri="+Ka;i.open("POST",o,!0),i.timeout=Va,i.ontimeout=function(){},i.onreadystatechange=function(){4!==i.readyState||(200===i.status?ni(i.responseText,e,n):ti(e,t,n,a))},i.send(null)}function ti(e,t,n,a){++t<10?ei(e,t,n):a&&a()}function ni(e,t,n){var a=JSON.parse(e);Di[t].access_token=a.access_token,Di[t].refresh_token=a.refresh_token,so(),n&&n()}function ai(){var e=new XMLHttpRequest,t=Za+"grant_type=authorization_code&client_id="+encodeURIComponent($l)+"&client_secret="+encodeURIComponent($a)+"&code="+encodeURIComponent(Ja)+"&redirect_uri="+Ka;e.open("POST",t,!0),e.timeout=Va,e.ontimeout=function(){},e.onreadystatechange=function(){4!==e.readyState||(200===e.status?si(e.responseText):ii())},e.send(null)}function ii(){++Da<qa?ai():oi()}function oi(){Au(),zu(At),window.setTimeout(function(){Xu(),Il=0,l_(),kl.Main_Go=_l,window.location=Ka},4e3),Di[kl.Users_Position].access_token=0,Di[kl.Users_Position].refresh_token=0}function si(e){var t=JSON.parse(e);Di[kl.Users_Position].access_token=t.access_token,Di[kl.Users_Position].refresh_token=t.refresh_token,ki(),di()}function di(){Sf("https://api.twitch.tv/kraken?oauth_token="+Di[kl.Users_Position].access_token,Va,0,null,ri,ci)}function ri(e){var t=JSON.parse(e).token;t.user_name&&-1!==t.user_name.indexOf(Di[kl.Users_Position].name)?(so(),Il=0,Au(),za=EE=!1,kl.Main_Go=_l,l_(),zu(Et),window.setTimeout(function(){window.location=Ka},3e3)):(Di[kl.Users_Position].access_token=0,Di[kl.Users_Position].refresh_token=0,za=!1,zu(Fn+Di[kl.Users_Position].name),window.setTimeout(function(){Xu(),Il=0,l_(),kl.Main_Go=_l,window.location=Ka},4e3))}function ci(){++Da<qa?(Va+=500,di()):oi()}function li(){ki(),Xa=!1,ui()}function ui(){var e="https://api.twitch.tv/kraken/users/"+Di[kl.Users_Position].id+"/follows/channels/"+Ya,t=new XMLHttpRequest;t.open("GET",e,!0),t.timeout=Va,t.setRequestHeader(Zl,$l),t.setRequestHeader(Ql,nu),t.ontimeout=function(){},t.onreadystatechange=function(){4===t.readyState&&(200===t.status?_i():404===t.status?fi(t.responseText):mi())},t.send(null)}function _i(){za=!(Xa=!0),Wa?Fg():bd()}function fi(e){-1!==(JSON.parse(e).error+"").indexOf("Not Found")?(za=Xa=!1,Wa?Fg():bd()):mi()}function mi(){++Da<qa?(Va+=500,ui()):(za=!1,Wa?Fg():bd())}function hi(){ki(),pi()}function pi(){var e=new XMLHttpRequest;e.open("PUT","https://api.twitch.tv/kraken/users/"+Di[kl.Users_Position].id+"/follows/channels/"+Ya,!0),e.timeout=Va,e.setRequestHeader(Zl,$l),e.setRequestHeader(Ql,nu),e.setRequestHeader("Authorization","OAuth "+Di[kl.Users_Position].access_token),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return Xa=!(za=!1),void(Wa?Fg():bd());401===e.status||403===e.status?ei(kl.Users_Position,0,hi,null):gi()}},e.send(null)}function gi(){++Da<qa&&(Va+=500,pi())}function vi(){ki(),yi()}function yi(){var e=new XMLHttpRequest;e.open("DELETE","https://api.twitch.tv/kraken/users/"+Di[kl.Users_Position].id+"/follows/channels/"+Ya,!0),e.timeout=Va,e.setRequestHeader(Zl,$l),e.setRequestHeader(Ql,nu),e.setRequestHeader("Authorization","OAuth "+Di[kl.Users_Position].access_token),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(204===e.status)return za=Xa=!1,void(Wa?Fg():bd());401===e.status||403===e.status?ei(kl.Users_Position,0,vi,null):bi()}},e.send(null)}function bi(){++Da<qa&&(Va+=500,yi())}function wi(){ki(),ja=!1,Ci()}function ki(){Va=1e4,za=!(Da=0)}function Ci(){var e,t="https://api.twitch.tv/kraken/users/"+Di[kl.Users_Position].id+"/subscriptions/"+Ya;if(_u){if(!(e=Android.mreadUrl(t,Va,3,Di[kl.Users_Position].access_token)))return void Mi();if(200===(e=JSON.parse(e)).status)za=!(ja=!0),$v();else if(422===e.status)za=ja=!1,Kv();else if(404===e.status){if(-1!==(JSON.parse(e.responseText).error+"").indexOf("Not Found"))return za=ja=!1,void Kv();Mi()}else 401===e.status||403===e.status?ei(kl.Users_Position,0,wi,Ei):Mi()}else(e=new XMLHttpRequest).open("GET",t,!0),e.timeout=Va,e.setRequestHeader(Zl,$l),e.setRequestHeader(Ql,nu),e.setRequestHeader("Authorization","OAuth "+Di[kl.Users_Position].access_token),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState)if(200===e.status)za=!(ja=!0),$v();else if(422===e.status)za=ja=!1,Kv();else if(404===e.status){if(-1!==(JSON.parse(e.responseText).error+"").indexOf("Not Found"))return za=ja=!1,void Kv();Mi()}else 401===e.status||403===e.status?ei(kl.Users_Position,0,wi,Ei):Mi()},e.send(null)}function Mi(){++Da<qa?(Va+=500,Ci()):Ei()}function Ei(){za=ja=!1,Kv()}function Si(e){ki(),Ii(e,0)}function Ii(e,t){var n="https://api.twitch.tv/kraken?oauth_token="+Di[e].access_token,a=new XMLHttpRequest;a.open("GET",n,!0),a.timeout=1e4,a.ontimeout=function(){},a.onreadystatechange=function(){if(4===a.readyState){if(200===a.status)return void(JSON.parse(a.responseText).token.valid?za=!1:(ki(),ei(e,0,null,null)));400===a.status?(ki(),ei(e,0,null,null)):xi(e,t)}},a.send(null)}function xi(e,t){++t<qa&&Ii(e,t)}function Pi(){ki(),Ti()}function Ti(){var e=new XMLHttpRequest;e.open("PUT","https://api.twitch.tv/api/users/"+Di[kl.Users_Position].name+"/follows/games/"+encodeURIComponent(kl.Main_gameSelected)+"?oauth_token="+Di[kl.Users_Position].access_token,!0),e.timeout=1e4,e.setRequestHeader(Zl,$l),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return Io=!0,void Fo();401===e.status||403===e.status?ei(kl.Users_Position,0,Pi,null):Li()}},e.send(null)}function Li(){++Da<qa&&(Va+=500,Ti())}function Bi(){ki(),Oi()}function Oi(){var e=new XMLHttpRequest;e.open("DELETE","https://api.twitch.tv/api/users/"+Di[kl.Users_Position].name+"/follows/games/"+encodeURIComponent(kl.Main_gameSelected)+"?oauth_token="+Di[kl.Users_Position].access_token,!0),e.timeout=1e4,e.setRequestHeader(Zl,$l),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(204===e.status)return Io=!1,void Fo();401===e.status||403===e.status?ei(kl.Users_Position,0,Bi,null):Gi()}},e.send(null)}function Gi(){++Da<qa&&(Va+=500,Oi())}function Ai(){ki(),Ni()}function Ni(){var e,t="https://api.twitch.tv/api/users/"+Di[kl.Users_Position].name+"/follows/games/"+encodeURIComponent(kl.Main_gameSelected);(e=new XMLHttpRequest).open("GET",t,!0),e.timeout=1e4,e.setRequestHeader(Zl,$l),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState)return 200===e.status?(Io=!0,void Fo()):404===e.status?(Io=!1,void Fo()):void Ui()},e.send(null)}function Ui(){++Da<qa?(Va+=500,Ni()):(Io=!1,Fo())}var Ri=0,Fi=5,Hi=3500,Di=[],qi=null,Vi=!1,Ji=!1;function zi(){kl.Main_Go=el,Tu("top_bar_user","icon_center_focus"),Xu(),Vc.placeholder=M,xu("add_user_scroll"),Wi()}function Xi(){Ki(!1),document.body.removeEventListener("keydown",ji),document.body.removeEventListener("keydown",$i),Lu("top_bar_user","icon_center_focus"),Iu("add_user_scroll")}function ji(e){if(!Vi&&!Ji&&kl.Main_Go===el)switch(e.keyCode){case Na:Yu()?Wu():Qu()?Zu():(0<Di.length&&kl.Main_Go!==_l?kl.Main_Go=kl.Main_Before:kl.Main_Go=Qc,Xi(),r_());break;case Pa:case xa:case Ta:case Aa:Wi()}}function Wi(){document.body.removeEventListener("keydown",ji),document.body.addEventListener("keydown",$i,!1),Vc.placeholder=M,Vc.focus(),Ji=!0}function Yi(){if(null!==Vc){var e=Vc.cloneNode(!0);Vc.parentNode.replaceChild(e,Vc),Vc=document.getElementById("user_input")}}function Ki(e){Vc.blur(),Yi(),document.body.removeEventListener("keydown",$i),Vc.placeholder=E+M,e&&document.body.addEventListener("keydown",ji,!1),Ji=!1}function $i(e){if(!Vi&&kl.Main_Go===el)switch(e.keyCode){case Na:Yu()?Wu():Qu()?Zu():(0<Di.length&&kl.Main_Go!==_l?kl.Main_Go=kl.Main_Before:kl.Main_Go=Qc,Xi(),r_());break;case Ha:Vc.value="";break;case Ra:case Ga:""!==Vc.value&&null!==Vc.value?co(qi=Yc&&!ao()?"testtwitch27":Vc.value)?(Au(),zu(u+qi+ie),window.setTimeout(function(){Xu(),Wi()},1500)):(Hi=3500,Vi=!(Ri=0),Iu("add_user_scroll"),Gu(),Zi()):Wi();break;case Ua:Vc.value=Vc.value.slice(0,-1);break;case Fa:Vc.value+=" "}}function Zi(){Sf("https://api.twitch.tv/kraken/users?login="+encodeURIComponent(qi),Hi,2,null,Qi,eo)}function Qi(e){JSON.parse(e)._total?(Vc.value="",document.body.removeEventListener("keydown",ji),io(e)):to()}function eo(){++Ri<Fi?(Hi+=500,Zi()):to()}function to(){qi=null,Au(),zu(ne),window.setTimeout(function(){zi()},1e3),Vi=!1}function no(){if(0<(Di=kf("AddUser_UsernameArray",[])).length)for(var e=0;e<Di.length;e++)Di[e].access_token&&Si(e)}function ao(){return 0<Di.length}function io(e){qi=JSON.parse(e).users[0],Di.push({name:qi.name,id:qi._id,access_token:0,refresh_token:0}),so(),EE=!1,Xi(),IE(),Vi=!1}function oo(e){var t=Di.indexOf(Di[e]);-1<t&&Di.splice(t,1),0<Di.length?(EE=!1,IE()):zi(),so()}function so(){bf("AddUser_UsernameArray",JSON.stringify(Di))}function ro(e){qi=Di[0],Di[0]=Di[e],Di[e]=qi,EE=!1,IE(),so()}function co(e){return-1!==Di.indexOf(e)}function lo(){return 0<Di.length}var uo=0,_o=0,fo=!1,mo=0,ho={},po=[],go=!1,vo=0,yo=5,bo=3500,wo=0,ko=0,Co=!1,Mo=["ag_thumbdiv","ag_img","ag_infodiv","ag_displayname","ag_streamtitle","ag_streamgame","ag_viwers","ag_quality","ag_cell","agempty_","a_games_scroll"],Eo=!1,So=!1,Io=!1,xo=!1,Po=!1;function To(){kl.Main_CenterLablesVectorPos=3,kl.Main_Go=nl,document.body.addEventListener("keydown",Ko,!1),Tu("top_bar_game","icon_center_focus"),Su("label_side_panel","icon-arrow-circle-left",x),kl.Search_isSearching&&(m_(),Bu("top_bar_user",n+h_(f+" '"+kl.Search_data+"'"))),Bu("top_bar_game",w+h_(_+": "+kl.Main_gameSelected)),kl.Main_OldgameSelected===kl.Main_gameSelected&&Eo?(k_(uo),xu(Mo[10]),Xo(),l_()):Bo()}function Lo(){Eo&&-1===uo&&(Yo(),_o=uo=0,Tu(Mo[0]+"0_"+_o,ou)),Su("label_side_panel","icon-ellipsis",Dn),Bu("top_bar_game",f),document.body.removeEventListener("keydown",Ko),Lu("top_bar_game","icon_center_focus"),Iu(Mo[10])}function Bo(){null===kl.Main_OldgameSelected&&(kl.Main_OldgameSelected=kl.Main_gameSelected),v_("stream_table_a_game"),Iu(Mo[10]),Gu(),Xu(),Po=Eo=!1,ho={},mo=ko=wo=0,uo=_o=0,fo=!(_f=!(So=!(po=[]))),Du(),Oo(),Go()}function Oo(){b_(),go=!0,vo=0,bo=3500}function Go(){var e=mo+wo;e&&ko-1<e&&(e=ko-Dl,fo=!0),Sf("https://api.twitch.tv/kraken/streams?game="+encodeURIComponent(kl.Main_gameSelected)+"&limit="+Dl+"&offset="+e+(""!==Ol?"&language="+Ol:""),bo,2,null,No,Ao)}function Ao(){++vo<yo?(bo+=500,Go()):(go=!1,mo?(fo=!0,Uo()):(_f=!1,Au(),zu(L)))}function No(e){var t=JSON.parse(e),n=t.streams.length;ko=parseInt(t._total),n<Dl&&(fo=!0);var a=mo;Co=!(mo+=n);var i=n/ql;0<n%ql&&i++;var o,s,d,r,c,l,u=0,_=document.getElementById("stream_table_a_game");if(!Po){var f;for(Po=!0,d=document.createElement("tr"),r=0;r<3;r++)f=r?1===r?'<i class="icon-movie stream_channel_fallow_icon"></i>'+Ca+U:"":'<i class="icon-movie-play stream_channel_fallow_icon"></i>'+Ca+Ca+nn,(Ll=document.createElement("td")).setAttribute("id",Mo[8]+"y_"+r),Ll.className="stream_cell",Ll.innerHTML='<div id="'+Mo[0]+"y_"+r+'" class="stream_thumbnail_fallow_game" ><div id="'+Mo[3]+"y_"+r+'" class="stream_channel_fallow_game">'+f+"</div></div>",d.appendChild(Ll);_.appendChild(d)}for(r=0;r<i;r++){for(s=a/ql+r,d=document.createElement("tr"),o=0;o<ql&&u<n;o++,u++)l=(c=t.streams[u]).channel._id,ho[l]?o--:(ho[l]=1,d.appendChild(P_(s,s+"_"+o,[c.channel.name,l],Mo,[c.preview.template.replace("{width}x{height}",au),a_(JSON.stringify(c.stream_type))+c.channel.display_name,c.channel.status,c.game,y+Ip(c.created_at)+b+", "+h+t_(c.viewers)+q,n_(c.video_height,c.average_fps,c.channel.language)])));for(;o<ql;o++)fo&&!So&&(So=!0,mo=s*ql+o),d.appendChild(E_(Mo[9]+s+"_"+o)),po.push(Mo[9]+s+"_"+o);_.appendChild(d)}Uo()}function Uo(){if(Eo){if(y_(gu),0<po.length&&!fo)return Oo(),void Vo();qu(_o,uo,ql,mo),po=[]}else Ro(),Co?(zu(B+Z),uo=-1,Wo()):(Eo=!0,y_(gu),Xo(),l_()),xu(Mo[10]),_f=!1,Au();go=!1}function Ro(){xo?(Io=!0,Fo()):ao()?Ai():(Io=!1,Fo())}function Fo(){Bu(Mo[3]+"y_2",Io?'<i class="icon-heart" style="color: #00b300; font-size: 100%; text-shadow: #FFFFFF 0 0 10px, #FFFFFF 0 0 10px, #FFFFFF 0 0 8px;"></i>'+Ca+Ca+Tt:'<i class="icon-heart-o" style="color: #FFFFFF; font-size: 100%; text-shadow: #000000 0 0 10px, #000000 0 0 10px, #000000 0 0 8px;"></i>'+Ca+Ca+(ao()?Lt:Nt))}function Ho(){ao()&&Di[kl.Users_Position].access_token?Io?Bi():Pi():(zu(Ut),window.setTimeout(function(){Co&&kl.Main_Go===nl?zu(B+Z):Xu()},2e3))}function Do(){_o?1===_o?(kl.Main_Go=vl,kl.Main_OldgameSelected=kl.Main_gameSelected,qo(),c_()):Ho():(kl.Main_Go=gl,kl.Main_OldgameSelected=kl.Main_gameSelected,qo(),c_())}function qo(){Eo&&-1===uo&&(Yo(),_o=uo=0,Tu(Mo[0]+"0_"+_o,ou)),document.body.removeEventListener("keydown",Ko),Iu(Mo[10])}function Vo(){Ju(po.length);var e=mo+wo;e&&ko-1<e&&(e=ko-Kl,fo=!0),Sf("https://api.twitch.tv/kraken/streams?game="+encodeURIComponent(kl.Main_gameSelected)+"&limit="+Kl+"&offset="+e+(""!==Ol?"&language="+Ol:""),bo,2,null,zo,Jo)}function Jo(){++vo<yo?(bo+=500,Vo()):(fo=!0,mo-=po.length,po=[],Uo())}function zo(e){var t,n,a=JSON.parse(e),i=a.streams.length,o=0,s=0,d=[];for(ko=parseInt(a._total),i<Kl&&(fo=!0);o<po.length&&s<i;o++,s++)n=(t=a.streams[s]).channel._id,ho[n]?o--:(ho[n]=1,T_(po[o],[t.channel.name,n],[t.preview.template.replace("{width}x{height}",au),a_(JSON.stringify(t.stream_type))+t.channel.display_name,t.channel.status,t.game,y+Ip(t.created_at)+b+", "+h+t_(t.viewers)+q,n_(t.video_height,t.average_fps,t.channel.language)],Mo),d.push(o));for(o=d.length-1;-1<o;o--)po.splice(d[o],1);wo+=s,fo&&(mo-=po.length,po=[]),Uo()}function Xo(){uo<0?Wo():(F_(uo,_o,Mo,ql,mo),mo/ql<uo+Vl&&!fo&&!go&&(Oo(),Go()),El&&jo())}function jo(){-1<uo&&mo?j_(uo+"_"+_o,Mo):Yo()}function Wo(){Tu(Mo[0]+"y_"+_o,ou)}function Yo(){Lu(Mo[0]+"y_"+_o,ou)}function Ko(e){var t;if(!_f&&!U_())switch(N_(),e.keyCode){case Na:Qu()?Zu():Yu()?Wu():(kl.Main_OldgameSelected=kl.Main_gameSelected,jo(),Yo(),mf(Ko));break;case La:if(-1===uo)Yo(),--_o<0&&(_o=2),Wo();else if(uo||_o){if(i_(uo,_o-1,Mo[0]))jo(),_o--,Xo();else for(t=ql-1;-1<t;t--)if(i_(uo-1,t,Mo[0])){jo(),uo--,_o=t,Xo();break}}else jo(),Yo(),uo=-1,_o=2,Wo();break;case Oa:-1===uo?(Yo(),2<++_o?(_o=0,Co?Wo():(uo=0,Xo())):Wo()):i_(uo,_o+1,Mo[0])?(jo(),_o++,Xo()):i_(uo+1,0,Mo[0])&&(jo(),uo++,_o=0,Xo());break;case Ba:if(-1!==uo||Co)if(uo){for(t=0;t<ql;t++)if(i_(uo-1,_o-t,Mo[0])){jo(),uo--,_o-=t,Xo();break}}else jo(),uo=-1,Wo();else uo=0,Yo(),Xo();break;case Ga:if(-1!==uo||Co){for(t=0;t<ql;t++)if(i_(uo+1,_o-t,Mo[0])){jo(),uo++,_o-=t,Xo();break}}else uo=0,Yo(),Xo();break;case Pa:case xa:case Ta:case Aa:-1!==uo?D_(uo+"_"+_o,Mo,Ko):Do()}}var $o=0,Zo=0,Qo=!1,es=0,ts={},ns=[],as=!1,is=0,os=5,ss=3500,ds=0,rs=0,cs=!1,ls=!1,us="week",_s=2,fs=!1,ms=["agv_thumbdiv","agv_img","agv_infodiv","agv_title","agv_streamon","agv_duration","agv_viwers","agv_quality","agv_cell","gvempty_","a_games_vod_scroll","agv_game"],hs=!1,ps=!1,gs="";function vs(){kl.Main_CenterLablesVectorPos=3,kl.Main_Go=gl,Tu("top_bar_game","icon_center_focus"),document.body.addEventListener("keydown",Os,!1),Su("label_side_panel","icon-arrow-circle-left",x),gs===kl.Main_gameSelected&&hs?(k_($o),xu(ms[10]),Gs(),Ps(),l_()):bs()}function ys(){hs&&Ts(),document.body.removeEventListener("keydown",Os),Lu("top_bar_game","icon_center_focus"),Bu("top_bar_game",f),Su("label_side_panel","icon-ellipsis",Dn),Su("label_switch","icon-switch",r),Iu(ms[10])}function bs(){hs&&Ts(),v_("stream_table_a_game_vod"),Iu(ms[10]),Gu(),Gs(),gs=kl.Main_gameSelected,Xu(),fs=hs=!1,rs=ds=0,ts={},$o=Zo=es=0,Qo=!(_f=!(ls=!(ns=[]))),Du(),ws(),ks()}function ws(){b_(),as=!0,is=0,ss=3500}function ks(){var e=es+ds;e&&rs-1<e&&(e=rs-Dl,Qo=!0),Sf("https://api.twitch.tv/kraken/videos/top?game="+encodeURIComponent(kl.Main_gameSelected)+"&limit="+Dl+"&broadcast_type="+(ps?"highlight":"archive")+"&sort=views&offset="+e+"&period="+us+(""!==Ol?"&language="+Ol:""),ss,2,null,Ms,Cs)}function Cs(){++is<os?(ss+=500,ks()):(as=!1,es?(Qo=!0,Es()):(_f=!1,Au(),zu(L)))}function Ms(e){var t=JSON.parse(e),n=t.vods.length;rs=parseInt(t._total),n<Dl&&(Qo=!0);var a=es;cs=!(es+=n);var i=n/ql;0<n%ql&&i++;var o,s,d,r,c,l=0,u=document.getElementById("stream_table_a_game_vod");if(!fs){var _;for(fs=!0,d=document.createElement("tr"),f=0;f<2;f++)_=f?'<i class="icon-history stream_channel_fallow_icon"></i>'+Ca+Ca+m:'<i class="icon-movie-play stream_channel_fallow_icon"></i>'+Ca+Ca+p,(Ll=document.createElement("td")).setAttribute("id",ms[8]+"y_"+f),Ll.className="stream_cell",Ll.innerHTML='<div id="'+ms[0]+"y_"+f+'" class="stream_thumbnail_channel_vod" ><div id="'+ms[3]+"y_"+f+'" class="stream_channel_fallow_game">'+_+"</div></div>",d.appendChild(Ll);u.appendChild(d)}for(var f=0;f<i;f++){for(s=a/ql+f,d=document.createElement("tr"),o=0;o<ql&&l<n;o++,l++)c=(r=t.vods[l])._id,-1!==(r.preview.template+"").indexOf("404_processing")||ts[c]?o--:(ts[c]=1,d.appendChild(sI(s,s+"_"+o,[c,r.length,r.language,r.game,r.channel.name,r.increment_view_count_url],[r.preview.template.replace("{width}x{height}",au),r.channel.display_name,F+p_(r.created_at),PI.parse(r.title)+ra+en+g+r.game,t_(r.views)+D,n_(r.resolutions.chunked.slice(-4),parseInt(r.fps.chunked)||0,r.language),H+Ep(r.length),r.animated_preview_url],ms)));for(;o<ql;o++)Qo&&!ls&&(ls=!0,es=s*ql+o),d.appendChild(E_(ms[9]+s+"_"+o)),ns.push(ms[9]+s+"_"+o);u.appendChild(d)}Es()}function Es(){if(hs?y_(gu):(cs?zu(B+(ps?N:A)+O+I):(hs=!0,y_(gu),Ps(),l_()),xu(ms[10]),_f=!1,Au()),0<ns.length&&!Qo)return ws(),void Ss();qu(Zo,$o,ql,es),as=!(ns=[])}function Ss(){Ju(ns.length);var e=es+ds;e&&rs-1<e&&(e=rs-Kl,Qo=!0),Sf("https://api.twitch.tv/kraken/videos/top?game="+encodeURIComponent(kl.Main_gameSelected)+"&limit="+Kl+"&broadcast_type="+(ps?"highlight":"archive")+"&sort=views&offset="+e+"&period="+us+(""!==Ol?"&language="+Ol:""),ss,2,null,xs,Is)}function Is(){++is<os?(ss+=500,Ss()):(Qo=!0,ns=[],Es())}function xs(e){var t,n,a=JSON.parse(e),i=a.vods.length,o=0,s=0,d=[];for(rs=parseInt(a._total);o<ns.length&&s<i;o++,s++)n=(t=a.vods[s])._id,-1!==(t.preview.template+"").indexOf("404_processing")||ts[n]?o--:(ts[n]=1,rI(ns[o],[n,t.length,t.language,t.game,t.channel.name,t.increment_view_count_url],[t.preview.template.replace("{width}x{height}",au),t.channel.display_name,F+p_(t.created_at),PI.parse(t.title)+ra+en+g+t.game,t_(t.views)+D,n_(t.resolutions.chunked.slice(-4),parseInt(t.fps.chunked)||0,t.language),H+Ep(t.length),t.animated_preview_url],ms),d.push(o));for(o=d.length-1;-1<o;o--)ns.splice(d[o],1);ds+=s,Qo&&(es-=ns.length,ns=[]),Es()}function Ps(){$o<0?Ls():(F_($o,Zo,ms,ql,es),vI(ms,$o+"_"+Zo),es/ql<$o+Vl&&!Qo&&!as&&(ws(),ks()),El&&Ts())}function Ts(){window.clearInterval(TS),-1<$o&&es?(xu(ms[1]+$o+"_"+Zo),j_($o+"_"+Zo,ms)):Bs()}function Ls(){var e=1<Zo?1:Zo;Tu(ms[0]+"y_"+e,ou)}function Bs(){var e=1<Zo?1:Zo;Lu(ms[0]+"y_"+e,ou)}function Os(e){var t;if(!_f&&!U_())switch(N_(),e.keyCode){case Na:Qu()?Zu():Yu()?Wu():(Ts(),mf(Os));break;case La:if(-1===$o)Bs(),--Zo<0&&(Zo=1),Ls();else if($o||Zo){if(i_($o,Zo-1,ms[0]))Ts(),Zo--,Ps();else for(t=ql-1;-1<t;t--)if(i_($o-1,t,ms[0])){Ts(),$o--,Zo=t,Ps();break}}else Ts(),Bs(),$o=-1,Zo=1,Ls();break;case Oa:-1===$o?(Bs(),1<++Zo?(Zo=0,cs?Ls():($o=0,Ps())):Ls()):i_($o,Zo+1,ms[0])?(Ts(),Zo++,Ps()):i_($o+1,0,ms[0])&&(Ts(),$o++,Zo=0,Ps());break;case Ba:if(-1!==$o||cs)if($o){for(t=0;t<ql;t++)if(i_($o-1,Zo-t,ms[0])){Ts(),$o--,Zo-=t,Ps();break}}else Ts(),$o=-1,Ls();else $o=0,Bs(),Ps();break;case Ga:if(-1!==$o||cs){for(t=0;t<ql;t++)if(i_($o+1,Zo-t,ms[0])){Ts(),$o++,Zo-=t,Ps();break}}else $o=0,Bs(),Ps();break;case Pa:case xa:case Ta:case Aa:-1===$o?(0===Zo?bf("AGameVod_highlight",(ps=!ps)?"true":"false"):4<++_s&&(_s=1),bs()):J_($o+"_"+Zo,ms,Os)}}function Gs(){1===_s?(Bu("top_bar_game",w+h_((ps?N:A)+re+": "+kl.Main_gameSelected)),us="day"):2===_s?(Bu("top_bar_game",w+h_((ps?N:A)+ce+": "+kl.Main_gameSelected)),us="week"):3===_s?(Bu("top_bar_game",w+h_((ps?N:A)+le+": "+kl.Main_gameSelected)),us="month"):4===_s&&(Bu("top_bar_game",w+h_((ps?N:A)+ue+": "+kl.Main_gameSelected)),us="all"),bf("AGameVod_periodNumber",_s)}var As,Ns=0,Us=0,Rs=!1,Fs=0,Hs=0,Ds=5,qs=3500,Vs=0,Js=!1,zs=!1,Xs=["cc_thumbdiv","cc_img","cc_infodiv","cc_name","cc_createdon","cc_game","cc_viwers","cc_duration","cc_cell","sccempty_","channel_content_scroll"],js=!1,Ws="",Ys=null,Ks="",$s="",Zs="",Qs="",ed="",td={},nd=!1;function ad(){kl.Main_CenterLablesVectorPos=1,kl.Main_Go=cl,nd&&!kl.Search_isSearching&&kl.Main_selectedChannel_id&&Id(),Ws!==kl.Main_selectedChannel&&(js=!1),m_(),kl.Main_selectedChannelDisplayname=kl.Main_selectedChannelDisplayname.replace(Y,""),Ou("top_bar_user",kl.Main_selectedChannelDisplayname),Ou("top_bar_game",Ht),document.body.addEventListener("keydown",xd,!1),Wa=!1,js?(k_(Ns),xu(Xs[10]),kd(),Cd(),l_()):od()}function id(){f_(),document.body.removeEventListener("keydown",xd),Iu(Xs[10])}function od(){v_("stream_table_channel_content"),Iu(Xs[10]),Gu(),Xu(),Ws=kl.Main_selectedChannel,Qs="",Rs=Js=js=!1,As=void(Ns=Us=Fs=Vs=0),sd(),dd()}function sd(){_f=!0,Hs=0,qs=3500}function dd(){Sf("https://api.twitch.tv/kraken/streams/"+encodeURIComponent(void 0!==As?As:kl.Main_selectedChannel_id),qs,2,null,rd,cd)}function rd(e){null!==JSON.parse(e).stream?(Ys=e,sd(),fd()):As?(Ys=null,sd(),fd()):(sd(),ld())}function cd(){++Hs<Ds?(qs+=500,dd()):(Ys=null,sd(),fd())}function ld(){var e,t="https://tmi.twitch.tv/hosts?include_logins=1&host="+encodeURIComponent(kl.Main_selectedChannel_id);if(_u){if(!(e=Android.mreadUrl(t,qs,1,null)))return void ud();200===(e=JSON.parse(e)).status?_d(e.responseText):ud()}else(e=new XMLHttpRequest).open("GET",vu+t,!0),e.timeout=qs,e.setRequestHeader(Zl,$l),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void _d(e.responseText);ud()}},e.send(null)}function ud(){++Hs<Ds?(qs+=500,ld()):(Ys=null,sd(),fd())}function _d(e){var t=JSON.parse(e);void 0!==(As=t.hosts[0].target_id)?(sd(),dd()):(Ys=null,sd(),fd())}function fd(){Sf("https://api.twitch.tv/kraken/channels/"+kl.Main_selectedChannel_id,rv,2,null,md,hd)}function md(e){var t=JSON.parse(e);Ks=t.views,$s=t.followers,Zs=t.description,kl.Main_selectedChannelLogo=t.logo,pd()}function hd(){++Hs<Ds?(qs+=500,fd()):(Zs=$s=Ks="",kl.Main_selectedChannelLogo=pu,pd())}function pd(){var e=document.createElement("tr"),t=document.createElement("tbody"),n=0,a=document.getElementById("stream_table_channel_content");if((Ll=document.createElement("tr")).className="follower_header",Ll.innerHTML='<div class="follower_header">'+PI.parse(Zs)+"</div>",a.appendChild(t),a.appendChild(Ll),null!==Ys){var i=JSON.parse(Ys);if(null!==i.stream){var o=void 0!==As?kl.Main_selectedChannelDisplayname+ae:"",s=i.stream;e.appendChild(gd("0_"+n,s.channel.name,s.preview.template,PI.parse(s.channel.status),s.game,a_(JSON.stringify(s.stream_type))+o+s.channel.display_name,y+Ip(s.created_at)+b+", "+h+t_(s.viewers)+q,n_(s.video_height,s.average_fps,s.channel.language))),n++}else Js=!0}else Js=!0;e.appendChild(vd("0_"+n,kl.Main_selectedChannelDisplayname,kl.Main_selectedChannelDisplayname+A,"movie-play")),n++,e.appendChild(vd("0_"+n,kl.Main_selectedChannelDisplayname,kl.Main_selectedChannelDisplayname+U,"movie")),n<2&&(n++,e.appendChild(E_(Xs[9]+"0_"+n))),a.appendChild(e),(e=document.createElement("tr")).appendChild(yd("1_0",kl.Main_selectedChannelDisplayname,kl.Main_selectedChannelDisplayname,kl.Main_selectedChannelLogo)),a.appendChild(e),wd()}function gd(e,t,n,a,i,o,s,d){return Qs=n.replace("{width}x{height}",au),(Ll=document.createElement("td")).setAttribute("id",Xs[8]+e),Ll.setAttribute(su,t),Ll.className="stream_cell",Ll.innerHTML='<div id="'+Xs[0]+e+'" class="stream_thumbnail_video" ><img id="'+Xs[1]+e+'" class="stream_img"></div><div id="'+Xs[2]+e+'" class="stream_text"><div id="'+Xs[3]+e+'" class="stream_channel" style="width: 66%; display: inline-block;"><i class="icon-circle" style="color: '+(void 0!==As?"#FED000":"red")+'; font-size: 90%; aria-hidden="true"></i> '+Ca+o+'</div><div id="'+Xs[7]+e+'"class="stream_info" style="width:33%; float: right; text-align: right; display: inline-block;">'+d+'</div><div id="'+Xs[4]+e+'"class="stream_info">'+a+'</div><div id="'+Xs[5]+e+'"class="stream_info">'+g+i+'</div><div id="'+Xs[6]+e+'"class="stream_info">'+s+"</div></div>",Ll}function vd(e,t,n,a){return(Ll=document.createElement("td")).setAttribute("id",Xs[8]+e),Ll.setAttribute(su,t),Ll.className="stream_cell",Ll.innerHTML='<div id="'+Xs[0]+e+'" class="stream_thumbnail_video" ><div id="'+Xs[1]+e+'" class="stream_channel_content_icon"><i class="icon-'+a+'"></i></div></div><div id="'+Xs[2]+e+'" class="stream_text"><div id="'+Xs[3]+e+'" class="stream_channel" style="text-align: center">'+n+"</div></div>",Ll}function yd(e,t,n,a){return ed=a,(Ll=document.createElement("td")).setAttribute("id",Xs[8]+e),Ll.setAttribute(su,t),Ll.className="stream_cell",Ll.innerHTML='<div id="'+Xs[0]+e+'" class="stream_thumbnail_video" ><div id="schannel_cont_heart" style="position: absolute; top: 5%; left: 6%;"></div><img id="'+Xs[1]+e+'" class="stream_img_fallow"></div><div id="'+Xs[2]+e+'" class="stream_text"><div id="'+Xs[3]+e+'" class="stream_channel">'+n+'</div><div id="'+Xs[5]+e+'"class="stream_info">'+t_(Ks)+D+'</div><div id="'+Xs[6]+e+'"class="stream_info" >'+t_($s)+Vt+"</div></div>",Ll}function bd(){Xa?(Bu("schannel_cont_heart",'<i class="icon-heart" style="color: #00b300; font-size: 600%; text-shadow: #FFFFFF 0 0 10px, #FFFFFF 0 0 10px, #FFFFFF 0 0 8px;"></i>'),Ou(Xs[3]+"1_0",kl.Main_selectedChannelDisplayname+Tt)):(Bu("schannel_cont_heart",'<i class="icon-heart-o" style="color: #FFFFFF; font-size: 600%; text-shadow: #000000 0 0 10px, #000000 0 0 10px, #000000 0 0 8px;"></i>'),ao()?Ou(Xs[3]+"1_0",kl.Main_selectedChannelDisplayname+Lt):Ou(Xs[3]+"1_0",kl.Main_selectedChannelDisplayname+Jt))}function wd(){js||(js=!0,""!==Qs&&yu(document.getElementById(Xs[1]+"0_0"),Qs,gu),yu(document.getElementById(Xs[1]+"1_0"),ed,pu),Cd(),l_(),xu(Xs[10]),Au()),kd(),_f=!1}function kd(){zs?bd():ao()?(Ya=kl.Main_selectedChannel_id,Wa=!1,li()):(Xa=!1,bd())}function Cd(){Tu(Xs[0]+Ns+"_"+(Ns?0:Us),ou),El&&Md(),G_()}function Md(){j_(Ns+"_"+(Ns?0:Us),Xs)}function Ed(){if(Ns)ao()&&Di[kl.Users_Position].access_token?(Wa=!1,Ya=kl.Main_selectedChannel_id,Xa?vi():hi()):(zu(Ut),window.setTimeout(Xu,2e3));else{document.body.removeEventListener("keydown",xd),Iu(Xs[10]);var e=Js?1:0;Us===0-e?(kl.Play_selectedChannel=document.getElementById(Xs[8]+Ns+"_"+Us).getAttribute(su),kl.Play_selectedChannelDisplayname=document.getElementById(Xs[3]+Ns+"_"+Us).textContent,-1!==kl.Play_selectedChannelDisplayname.indexOf(ae)?(kl.Play_isHost=!0,kl.Play_DisplaynameHost=kl.Play_selectedChannelDisplayname,kl.Play_selectedChannelDisplayname=kl.Play_selectedChannelDisplayname.split(ae)[1],kl.Play_selectedChannel_id=As):kl.Play_selectedChannel_id=kl.Main_selectedChannel_id,kl.Play_gameSelected=document.getElementById(Xs[5]+Ns+"_"+Us).textContent.split(g)[1],K_(q_)):Us===1-e?K_(tr):Us===2-e&&(By=ib,K_(Uy))}}function Sd(){td={"Main_values.Main_selectedChannel_id":kl.Main_selectedChannel_id,"Main_values.Main_selectedChannelLogo":kl.Main_selectedChannelLogo,"Main_values.Main_selectedChannel":kl.Main_selectedChannel,"Main_values.Main_selectedChannelDisplayname":kl.Main_selectedChannelDisplayname,ChannelContent_UserChannels:zs,"Main_values.Main_BeforeChannel":kl.Main_BeforeChannel}}function Id(){kl.Main_selectedChannel_id=kl.Main_selectedChannel_id,kl.Main_selectedChannelLogo=kl.Main_selectedChannelLogo,kl.Main_selectedChannel=kl.Main_selectedChannel,kl.Main_selectedChannelDisplayname=kl.Main_selectedChannelDisplayname,zs=td.ChannelContent_UserChannels,kl.Main_BeforeChannel=kl.Main_BeforeChannel,nd=!(td={})}function xd(e){if(!_f&&!U_())switch(N_(),e.keyCode){case Na:Qu()?Zu():Yu()?Wu():(Md(),mf(xd));break;case La:Ns||(Md(),--Us<0&&(Us=Js?1:2),Cd());break;case Oa:Ns||(Md(),(Js?1:2)<++Us&&(Us=0),Cd());break;case Ba:case Ga:Md(),Ns=Ns?0:1,Cd();break;case Pa:case xa:case Ta:case Aa:Ed()}}var Pd=0,Td=0,Ld=!1,Bd=0,Od={},Gd=[],Ad=!1,Nd=0,Ud=5,Rd=3500,Fd=0,Hd=0,Dd=0,qd=!1,Vd=!1,Jd="",zd=!1,Xd=["cv_thumbdiv","cv_img","cv_infodiv","cv_title","cv_streamon","cv_duration","cv_viwers","cv_quality","cv_cell","cvempty_","channel_vod_scroll","cv_game"],jd=!1,Wd=!1,Yd="",Kd="",$d="",Zd="",Qd="",er=0;function tr(){kl.Main_CenterLablesVectorPos=1,kl.Main_Go=ll,!kl.Search_isSearching&&kl.Main_selectedChannel_id&&Id(),kl.Main_selectedChannel!==Yd&&(jd=!1),m_(),Su("label_side_panel","icon-arrow-circle-left",x),Ou("top_bar_user",kl.Main_selectedChannelDisplayname),document.body.addEventListener("keydown",pr,!1),jd?(k_(Pd),Ou("top_bar_game",Wd?N:A),xu(Xd[10]),_r(),l_()):ar()}function nr(){jd&&fr(),f_(),document.body.removeEventListener("keydown",pr),Iu(Xd[10])}function ar(){jd&&fr(),v_("stream_table_channel_vod"),Iu(Xd[10]),Ou("top_bar_game",Wd?N:A),Gu(),Xu(),Yd=kl.Main_selectedChannel,Hd=Fd=0,zd=jd=!1,Od={},Pd=Td=Bd=0,Ld=!(_f=!(Vd=!(Gd=[]))),Du(),ir(),or()}function ir(){b_(),Ad=!0,Nd=0,Rd=3500}function or(){var e=Bd+Fd;e&&Hd-1<e&&(e=Hd-Dl,Ld=!0),Sf("https://api.twitch.tv/kraken/channels/"+encodeURIComponent(kl.Main_selectedChannel_id)+"/videos?limit="+Dl+"&broadcast_type="+(Wd?"highlight":"archive")+"&sort=time&offset="+e,Rd,2,null,dr,sr)}function sr(){++Nd<Ud?(Rd+=500,or()):(Ad=!1,Bd?(Ld=!0,rr()):(_f=!1,Au(),zu(L)))}function dr(e){var t=JSON.parse(e),n=t.videos.length;Hd=parseInt(t._total),n<Dl&&(Ld=!0);var a=Bd;qd=!(Bd+=n);var i=n/ql;0<n%ql&&i++;var o,s,d,r,c,l,u,_=0,f=document.getElementById("stream_table_channel_vod");if(!zd){zd=!0,d=document.createElement("tr");var m='<i class="icon-movie-play stream_channel_fallow_icon"></i>'+Ca+Ca+p;(Ll=document.createElement("td")).setAttribute("id",Xd[8]+"y_0"),Ll.className="stream_cell",Ll.innerHTML='<div id="'+Xd[0]+'y_0" class="stream_thumbnail_channel_vod" ><div id="'+Xd[3]+'y_0" class="stream_channel_fallow_game">'+m+"</div></div>",d.appendChild(Ll),f.appendChild(d)}for(var h=0;h<i;h++){for(s=a/ql+h,d=document.createElement("tr"),o=0;o<ql&&_<n;o++,_++)c=(r=t.videos[_])._id,l=-1!==((u=r.preview.template)+"").indexOf("404_processing"),s||o||!l||(l=!1,u=gu),l||Od[c]?o--:(Od[c]=1,d.appendChild(sI(s,s+"_"+o,[c,r.length,r.language,r.game,r.channel.name,r.increment_view_count_url],[u.replace("{width}x{height}",au),PI.parse(r.title),F+p_(r.created_at),en+g+r.game,t_(r.views)+D,n_(r.resolutions.chunked.slice(-4),parseInt(r.fps.chunked)||0,r.language),H+Ep(r.length),r.animated_preview_url],Xd)));for(;o<ql;o++)Ld&&!Vd&&(Vd=!0,Bd=s*ql+o),d.appendChild(E_(Xd[9]+s+"_"+o)),Gd.push(Xd[9]+s+"_"+o);f.appendChild(d)}rr()}function rr(){if(jd?(qu(Td,Pd,ql,Bd),y_(gu)):(qd?zu(B+(Wd?N:A)+O+I):(jd=!0,y_(gu),_r(),l_()),xu(Xd[10]),_f=!1,Au()),0<Gd.length&&!Ld)return ir(),void cr();Ad=!(Gd=[])}function cr(){Ju(Gd.length);var e=Bd+Fd;e&&Hd-1<e&&(e=Hd-Kl,Ld=!0),Sf("https://api.twitch.tv/kraken/channels/"+encodeURIComponent(kl.Main_selectedChannel_id)+"/videos?limit="+Kl+"&broadcast_type="+(Wd?"highlight":"archive")+"&sort=time&offset="+e,Rd,2,null,ur,lr)}function lr(){++Nd<Ud?(Rd+=500,cr()):(Ld=!0,Bd-=Gd.length,Gd=[],rr())}function ur(e){var t,n,a=JSON.parse(e),i=a.videos.length,o=0,s=0,d=[];for(Hd=parseInt(a._total);o<Gd.length&&s<i;o++,s++)n=(t=a.videos[s])._id,-1!==(t.preview.template+"").indexOf("404_processing")||Od[n]?o--:(Od[n]=1,rI(Gd[o],[n,t.length,t.language,t.game,t.channel.name,t.increment_view_count_url],[t.preview.template.replace("{width}x{height}",au),PI.parse(t.title),F+p_(t.created_at),en+g+t.game,t_(t.views)+D,n_(t.resolutions.chunked.slice(-4),parseInt(t.fps.chunked)||0,t.language),H+Ep(t.length),t.animated_preview_url],Xd),d.push(o));for(o=d.length-1;-1<o;o--)Gd.splice(d[o],1);Fd+=s,Ld&&(Bd-=Gd.length,Gd=[]),rr()}function _r(){Pd<0?mr():(F_(Pd,Td,Xd,ql,Bd),vI(Xd,Pd+"_"+Td),Bd/ql<Pd+Vl&&!Ld&&!Ad&&(ir(),or()),El&&fr())}function fr(){window.clearInterval(TS),-1<Pd&&Bd?(xu(Xd[1]+Pd+"_"+Td),j_(Pd+"_"+Td,Xd)):hr()}function mr(){Tu(Xd[0]+"y_0",ou)}function hr(){Lu(Xd[0]+"y_0",ou)}function pr(e){var t;if(!_f&&!U_())switch(N_(),e.keyCode){case Na:Qu()?Zu():Yu()?Wu():(fr(),mf(pr));break;case La:if(i_(Pd,Td-1,Xd[0]))fr(),Td--,_r();else for(t=ql-1;-1<t;t--)if(i_(Pd-1,t,Xd[0])){fr(),Pd--,Td=t,_r();break}break;case Oa:i_(Pd,Td+1,Xd[0])?(fr(),Td++,_r()):i_(Pd+1,0,Xd[0])&&(fr(),Pd++,Td=0,_r());break;case Ba:if(-1!==Pd||qd)if(Pd){for(t=0;t<ql;t++)if(i_(Pd-1,Td-t,Xd[0])){fr(),Pd--,Td-=t,_r();break}}else fr(),Pd=-1,mr();else Pd=0,hr(),_r();break;case Ga:if(-1!==Pd||qd){for(t=0;t<ql;t++)if(i_(Pd+1,Td-t,Xd[0])){fr(),Pd++,Td-=t,_r();break}}else Pd=0,hr(),_r();break;case Pa:case xa:case Ta:case Aa:-1===Pd?(bf("ChannelVod_highlight",(Wd=!Wd)?"true":"false"),ar()):J_(Pd+"_"+Td,Xd,pr)}}var gr,vr,yr,br,wr=0,kr=10,Cr=!1,Mr=0,Er=null,Sr=!1,Ir={},xr={};function Pr(){Xr(),kl.Play_ChatForceDisable?(Zr||fc(),Sr=!1,K_(function(){Tr(Mr=(new Date).getTime())})):Fc()}function Tr(e){wr=0,Lr(e)}function Lr(e){var t="https://badges.twitch.tv/v1/badges/channels/"+kl.Play_selectedChannel_id+"/display",n=new XMLHttpRequest;n.open("GET",t,!0),n.timeout=1e4,n.ontimeout=function(){},n.onreadystatechange=function(){if(4===n.readyState){if(200===n.status)return void(Mr===e&&Or(n.responseText,e));Mr===e&&Br(e)}},n.send(null)}function Br(e){wr++,Mr===e&&(wr<kr?Lr(e):vr=window.setTimeout(function(){Lr(e)},1e3))}function Or(e,t){II(JSON.parse(e).badge_sets).forEach(function(t){t.versions.forEach(function(e){xI(t.type,e.type,e.image_url_4x,Kr)})}),Ir[kl.Play_selectedChannel_id]?Mr===t&&Rr():Gr(t)}function Gr(e){wr=0,Ar(e)}function Ar(e){var t="https://api.betterttv.net/2/channels/"+encodeURIComponent(kl.Play_selectedChannel),n=new XMLHttpRequest;n.open("GET",t,!0),n.timeout=1e4,n.ontimeout=function(){},n.onreadystatechange=function(){4===n.readyState&&(200===n.status?Mr===e&&Ur(n.responseText,e):404===n.status?(Ir[kl.Play_selectedChannel_id]=1,Mr===e&&Rr()):Mr===e&&Nr(e))},n.send(null)}function Nr(e){wr++,Mr===e&&(wr<kr?Ar(e):Mr===e&&Rr())}function Ur(t,e){(t=JSON.parse(t)).emotes.forEach(function(e){xr[e.code]={restrictions:e.restrictions,code:e.code,source:"bttv",id:e.id,"1x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","1x"),"2x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","2x"),"3x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","3x")}}),Ir[kl.Play_selectedChannel_id]=1,Mr===e&&Rr()}function Rr(){Dr(),Fr()}function Fr(){(Er=new ReconnectingWebSocket("wss://irc-ws.chat.twitch.tv","irc",{reconnectInterval:3e3})).onopen=function(){Er.send("PASS blah\r\n"),Er.send("NICK justinfan12345\r\n"),Er.send("CAP REQ :twitch.tv/commands twitch.tv/tags\r\n"),Er.send("JOIN #"+kl.Play_selectedChannel+"\r\n")},Er.onclose=function(){Cr=!0},Er.onmessage=function(e){var t=window.parseIRC(e.data.trim());if(t.command)switch(t.command){case"PING":Er.send("PONG "+t.params[0]);break;case"JOIN":Sr=!0,Vr('&nbsp;<span class="message">'+ra+Mn+kl.Play_selectedChannelDisplayname+" "+_+"</span>");break;case"PRIVMSG":qr(t)}},yr=window.setTimeout(Hr,5e3)}function Hr(){Sr?br=window.setInterval(Jr,1e3):(Er.close(1e3),Rr())}function Dr(){window.clearTimeout(yr)}function qr(e){var t="",n=e.tags;if(n.hasOwnProperty("badges")&&"string"==typeof n.badges&&n.badges.split(",").forEach(function(e){e=e.split("/"),t+='<span class="'+e[0]+"-"+e[1]+' tag"></span>'}),n.hasOwnProperty("display-name")){var a=n["display-name"];"string"==typeof a&&(t+='<span class="nick" style="color: #'+sc[a.charCodeAt(0)%dc]+';">'+a+"</span>&#58;&nbsp;")}var i=e.params[1];i=i.replace(/</g,"&lt;").replace(/>/g,"&gt;"),/^\x01ACTION.*\x01$/.test(i)&&(i=i.replace(/^\x01ACTION/,"").replace(/\x01$/,"").trim());var o={};n.hasOwnProperty("emotes")&&"string"==typeof n.emotes&&(n.emotes=n.emotes.split("/"),n.emotes.forEach(function(t){t=t.split(":"),o[t[0]]||(o[t[0]]=[]),t[1].split(",").forEach(function(e){e=e.split("-"),o[t[0]].push([parseInt(e[0]),parseInt(e[1])])})}));for(var s=SI(i,o),d=0;d<s.length;d++)"string"==typeof s[d]?s[d]=MI(n,s[d]):s[d]=s[d][0];e=s.join(" "),e=PI.parse(e,!0),Vr(t+='<span class="message">'+e+"</span>")}function Vr(e){var t=document.createElement("div");t.className="chat_line",t.innerHTML=e,Kr.appendChild(t),Jr()}function Jr(){Kr.scrollTop=Kr.scrollHeight}function zr(){Dr(),window.clearTimeout(vr),window.clearTimeout(gr),window.clearInterval(br)}function Xr(){zr(),Er&&Er.close(1e3),Mr=0,v_("chat_box"),Sr=Cr=!1}var jr,Wr,Yr,Kr,$r,Zr=!1,Qr=0,ec=[],tc=[],nc=10,ac=null,ic=0,oc="",sc=["ff0000","ff4000","ff8000","ffbf00","ffff00","bfff00","80ff00","40ff00","00ff00","00ff40","00ff80","00ffbf","00ffff","00bfff","0080ff","0040ff","ff00ff","ff00bf","ff0080","ff0040"],dc=sc.length,rc=0,cc=!1,lc=0;function uc(){Kr=document.getElementById("chat_box"),fc()}function _c(){Oc(),_u&&kl.Play_ChatForceDisable?(Zr||fc(),K_(function(){wc(lc=(new Date).getTime())})):Fc()}function fc(){Qr=0,Zr=!(xr={}),mc()}function mc(){var e=new XMLHttpRequest;e.open("GET","https://badges.twitch.tv/v1/badges/global/display",!0),e.timeout=1e4,e.ontimeout=function(){},e.onreadystatechange=function(){4===e.readyState&&(200===e.status?pc(e.responseText):hc())},e.send(null)}function hc(){++Qr<nc?mc():Zr=!1}function pc(e){II(JSON.parse(e).badge_sets).forEach(function(t){t.versions.forEach(function(e){xI(t.type,e.type,e.image_url_4x,null)})}),gc()}function gc(){Qr=0,vc()}function vc(){var e=new XMLHttpRequest;e.open("GET","https://api.betterttv.net/2/emotes",!0),e.timeout=1e4,e.ontimeout=function(){},e.onreadystatechange=function(){4===e.readyState&&(200===e.status?bc(e.responseText):yc())},e.send(null)}function yc(){++Qr<nc?vc():Zr=!1}function bc(t){(t=JSON.parse(t)).emotes.forEach(function(e){xr[e.code]={restrictions:e.restrictions,code:e.code,source:"bttv",id:e.id,"1x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","1x"),"2x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","2x"),"3x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","3x")}}),Zr=!0}function wc(e){Qr=0,kc(e)}function kc(e){var t,n="https://badges.twitch.tv/v1/badges/channels/"+kl.Main_selectedChannel_id+"/display";if(_u){if(!(t=Android.mreadUrl(n,1e4,0,null)))return void(lc===e&&Cc(e));if(200===(t=JSON.parse(t)).status)return void(lc===e&&Mc(t.responseText,e));lc===e&&Cc(e)}else(t=new XMLHttpRequest).open("GET",n,!0),t.timeout=1e4,t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void(lc===e&&Mc(t.responseText,e));lc===e&&Cc(e)}},t.send(null)}function Cc(e){Qr++,lc===e&&(Qr<nc?kc(e):$r=window.setTimeout(function(){kc(e)},1e3))}function Mc(e,t){II(JSON.parse(e).badge_sets).forEach(function(t){t.versions.forEach(function(e){xI(t.type,e.type,e.image_url_4x,Kr)})}),lc===t&&Ec(t)}function Ec(e){Qr=0,lc===e&&Sc(e)}function Sc(e){var t,n="https://api.twitch.tv/v5/videos/"+kl.ChannelVod_vodId+"/comments?client_id="+$l+(ic?"&content_offset_seconds="+parseInt(ic):"");if(_u){if(!(t=Android.mreadUrl(n,1e4,0,null)))return void(lc===e&&Ic(e));if(200===(t=JSON.parse(t)).status)return void(lc===e&&xc(t.responseText,e));lc===e&&Ic(e)}else(t=new XMLHttpRequest).open("GET",n,!0),t.timeout=1e4,t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void(lc===e&&xc(t.responseText,e));lc===e&&Ic(e)}},t.send(null)}function Ic(e){Qr++,lc===e&&(Qr<nc?Sc(e):Wr=window.setTimeout(function(){Sc(e)},2500))}function xc(e,t){e=JSON.parse(e);var n,a,i=null===ac;i&&(n="&nbsp;",n+='<span class="message">',n+=ra+Mn+kl.Main_selectedChannelDisplayname+" "+oc,Pc(n+="</span>",0)),ic=0,ac=e._next,e.comments.forEach(function(e){n="",(a=e.message).hasOwnProperty("user_badges")&&a.user_badges.forEach(function(e){n+='<span class="'+e._id+"-"+e.version+' tag"></span>'}),n+='<span class="nick" style="color: #'+sc[e.commenter.display_name.charCodeAt(0)%dc]+';">'+e.commenter.display_name+"</span>&#58;&nbsp;",n+='<span class="message">',a.fragments.forEach(function(e){e.hasOwnProperty("emoticon")?n+='<img class="emoticon" src="https://static-cdn.jtvnw.net/emoticons/v1/'+e.emoticon.emoticon_id+'/1.0" srcset="https://static-cdn.jtvnw.net/emoticons/v1/'+e.emoticon.emoticon_id+"/2.0 2x, https://static-cdn.jtvnw.net/emoticons/v1/"+e.emoticon.emoticon_id+'/3.0 4x">':n+=PI.parse(e.text)}),n+="</span>",i?Pc(n,e.content_offset_seconds):void 0!==ac&&Tc(n,e.content_offset_seconds)}),i&&lc===t&&(Lc(t),void 0!==ac&&Ac(t))}function Pc(e,t){ec.push({time:t,message:e})}function Tc(e,t){tc.push({time:t,message:e})}function Lc(e){cc||lc!==e||(jr=window.setInterval(function(){Gc(e),Kr.scrollTop=Kr.scrollHeight},1e3))}function Bc(){cc||(window.clearTimeout($r),window.clearTimeout(Wr),window.clearTimeout(Yr),window.clearInterval(jr))}function Oc(){Bc(),lc=0,v_("chat_box"),cc=!1,ac=null,ec=[],tc=[],rc=0}function Gc(e){var t,n;if(rc<ec.length-1)for(n=rc;n<ec.length&&ec[n].time<er+Android.gettime()/1e3;n++,rc++)(t=document.createElement("div")).className="chat_line",t.innerHTML=ec[n].message,Kr.appendChild(t);else if(Bc(),void 0!==ac){ec=tc.slice(),rc=0,Lc(e),tc=[],lc===e&&Ac(e);var a=document.getElementsByClassName("chat_line");if(0<a.length-100)for(n=0;n<a.length-100;n++)a[0].parentNode.removeChild(a[0]);Kr.scrollTop=Kr.scrollHeight}else{var i="&nbsp;";i+='<span class="message">',i+=ra+ra+xn+ra+ra,i+="</span>",(t=document.createElement("div")).className="chat_line",t.innerHTML=i,Kr.appendChild(t),cc=!0,Kr.scrollTop=Kr.scrollHeight,window.clearInterval(jr),jr=window.setInterval(function(){Kr.scrollTop=Kr.scrollHeight},1e3)}}function Ac(e){Qr=0,cc||lc!==e||Nc(e)}function Nc(e){var t,n="https://api.twitch.tv/v5/videos/"+kl.ChannelVod_vodId+"/comments?client_id="+$l+(null!==ac?"&cursor="+ac:"");if(_u){if(!(t=Android.mreadUrl(n,1e4,0,null)))return void(cc||lc!==e||Uc(e));if(200===(t=JSON.parse(t)).status)return void(cc||lc!==e||xc(t.responseText,e));cc||lc!==e||Uc(e)}else(t=new XMLHttpRequest).open("GET",n,!0),t.timeout=1e4,t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void(cc||lc!==e||xc(t.responseText,e));cc||lc!==e||Uc(e)}},t.send(null)}function Uc(e){Qr++,lc===e&&(Qr<nc?Nc(e):Yr=window.setTimeout(function(){Nc(e)},2500))}function Rc(){lc=0,Hc(_n+ra+fn)}function Fc(){Oc(),xu("chat_box"),Hc(na)}function Hc(e){var t="&nbsp;";t+='<span class="message">',t+=ra+ra+ra+ra+ra+ra+ra+ra+ra+ra,t+=e,t+="</span>";var n=document.createElement("div");n.className="chat_line",n.innerHTML=t,Kr.appendChild(n)}var Dc,qc,Vc,Jc,zc,Xc,jc,Wc=!0,Yc=!1,Kc=!1,$c=-1,Zc=new Image,Qc=1,el=2,tl=3,nl=4,al=5,il=6,ol=7,sl=8,dl=9,rl=10,cl=11,ll=12,ul=13,_l=14,fl=15,ml=16,hl=17,pl=18,gl=19,vl=20,yl=21,bl=22,wl="",kl={Main_Go:1,Main_Before:1,Main_BeforeSearch:1,Main_BeforeChannel:1,Main_BeforeAgame:tl,Main_BeforeChannelisSet:!1,Main_BeforeAgameisSet:!1,Main_selectedChannel:"",Main_selectedChannelDisplayname:"",Main_selectedChannelLogo:"",Main_selectedChannel_id:"",Main_gameSelected:"",Main_OldgameSelected:null,Play_isHost:!1,Play_DisplaynameHost:"",Play_selectedChannelDisplayname:"",Play_selectedChannel:"",Play_gameSelected:"",Users_Position:0,Users_AddcodePosition:0,Play_WasPlaying:0,ChannelVod_vodId:"",vodOffset:0,Search_data:"",isLastSChannels:!1,gameSelectedOld:"",Games_return:!1,Search_isSearching:!1,Play_ChatForceDisable:!1,Never_run:!0,Main_CenterLablesVectorPos:0},Cl=!0,Ml=!0,El=!1,Sl=[],Il=0,xl=0,Pl=null,Tl=!0,Ll="",Bl=!1,Ol="",Gl=["label_side_panel","label_extra","label_refresh","label_switch","top_bar_live","top_bar_user","top_bar_featured","top_bar_game","top_bar_vod","top_bar_clip"],Al=[],Nl=0,Ul=!0,Rl=0,Fl=1.35,Hl=1.5,Dl=45,ql=3,Vl=Math.floor(Dl/ql/Hl),Jl=45,zl=5,Xl=Math.floor(Jl/zl/Fl),jl=48,Wl=6,Yl=Math.floor(jl/Wl/Hl),Kl=6,$l="5seja5ptej058mxqy7gh5tcudjqtm9",Zl="Client-ID",Ql="Accept",eu="Authorization",tu="OAuth ",nu="application/vnd.twitchtv.v5+json",au="528x297",iu="340x475",ou="stream_thumbnail_focused",su="data_attribute",du="1.0",ru=".10",cu="042319",lu=du+ru+"-"+cu,uu=0,_u=0,fu="?"+Math.random(),mu="https://fgl27.github.io/SmartTwitchTV/release/githubio/images/",hu=mu+"404_game.png",pu=mu+"404_logo.png",gu=mu+"404_video.png",vu="https://cors-anywhere.herokuapp.com/",yu=function(e,t,n){e.onerror=function(){this.src=n},e.src=t};function bu(){(Kc=Cf("Main_isDebug",!1))&&Wc?wu():"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){ku(window.navigator.userLanguage||window.navigator.language)}):ku(window.navigator.userLanguage||window.navigator.language)}function wu(){console.log("Debug mod start");var e=document.createElement("script");e.src="https://fgl27.github.io/SmartTwitchTV/release/githubio/js/masterdebug.js",document.head.appendChild(e)}function ku(e){W_(),K_(function(){try{_u=Android.getAndroid()}catch(e){_u=0,document.body.style.backgroundColor="rgba(0, 0, 0, 1)",Yc=Kc=!0,console.log("Main_isReleased: "+Wc),console.log("Main_isDebug: "+Kc),console.log("Main_isBrowser: "+Yc)}Ok(),Ia(),console.log("language is "+e),Sa(),-1!==window.location.href.indexOf("code")&&Ef(window.location.href),Cu()})}function Cu(){Oy(),Mu(!0),Dc=document.getElementById("scrollbar"),u_(),wl=kl.Main_Go,K_(function(){uc(),zh(),no(),ao()&&(jc=window.setInterval(ef,6e5),ef()),document.body.addEventListener("keyup",G_,!1),Gy(),document.getElementById("side_panel").style.marginLeft="",g_(),Eu(),KS=Cf("Vod_highlight",!1),Wd=Cf("ChannelVod_highlight",!1),ps=Cf("AGameVod_highlight",!1),cS=Cf("UserVod_highlight",!1),XS=wf("vod_periodNumber",2),_s=wf("AGameVod_periodNumber",2),oS=wf("UserVod_TypeNumber",1),wy(),qc=document.getElementById("search_input"),Vc=document.getElementById("user_input"),M_(gu),M_(hu),M_(pu),document.addEventListener("visibilitychange",Z_,!1),zc=window.setInterval(Q_,6e4),By=rb,Uy(),Jc=window.setTimeout(s_,5e3),xu("topbar")})}function Mu(e){Q_(),Su("label_refresh","icon-refresh",t+$t),Su("label_switch","icon-switch",r),Su("label_side_panel","icon-ellipsis",Dn),Su("icon_feed_refresh","icon-refresh",t+" Press up"),Ou("top_bar_live",_),Ou("top_bar_user",e?u:a),Ou("top_bar_featured",rn),Ou("top_bar_game",f),Ou("top_bar_vod",nn),Ou("top_bar_clip",U),Bu("scene2_search_text",Ca+n),Bu("scene2_channel_text",Ca+Ht),Bu("scene2_game_text",Ca+zt),Ou("dialog_end_replay_text",on),Ou("dialog_end_vod_text",ln),Ou("dialog_end_channel_text",Ht),Ou("dialog_end_game_text",zt),Bu("dialog_about_text",va+ya),Al=[re,ce,le,ue],e?Ik():(Bk(),g_())}function Eu(){Ou("play_dialog_exit_text",V),Ou("side_panel_search",n),Ou("side_panel_settings",a),Ou("side_panel_about",i),Ou("side_panel_controls",e),Ou("side_panel_exit",z),Ou("side_panel_live",_),Ou("side_panel_user",u),Ou("side_panel_featured",rn),Ou("side_panel_games",f),Ou("side_panel_videos",nn),Ou("side_panel_clips",U),Ou("side_panel_hide",o),Ou("chanel_button",S),Ou("game_button",f),Ou("live_button",_),Ou("exit_app_cancel",W),Ou("exit_app_close",X),Ou("remove_cancel",W),Ou("remove_yes",Xt),Ou("exit_app_minimize",j),Ou("main_dialog_exit_text",J),Bu("dialog_controls_text",ga),Ou("dialog_vod_text",En),Bu("dialog_vod_start_text",In)}function Su(e,t,n){Bu(e,'<div class="strokedextramini" style="vertical-align: middle; display: inline-block;"><i class="'+t+'" style="color: #FFFFFF; font-size: 115%; "></i></div><div class="strokedextramini" style="vertical-align: middle; display: inline-block">'+Ca+n+"</div>")}function Iu(e){document.getElementById(e).classList.add("hide")}function xu(e){document.getElementById(e).classList.remove("hide")}function Pu(e){return-1===document.getElementById(e).className.indexOf("hide")}function Tu(e,t){document.getElementById(e).classList.add(t)}function Lu(e,t){document.getElementById(e).classList.remove(t)}function Bu(e,t){document.getElementById(e).innerHTML=t}function Ou(e,t){document.getElementById(e).textContent=t}function Gu(){k_(-1),_u?Android.mshowLoading(!0):xu("dialog_loading")}function Au(){_u?Android.mshowLoading(!1):Iu("dialog_loading")}function Nu(){window.clearTimeout(Pl)}function Uu(){Pl=window.setTimeout(Fu,6e3)}function Ru(){Uu(),xu("main_dialog_exit"),document.body.addEventListener("keydown",cf,!1)}function Fu(){document.body.removeEventListener("keydown",cf,!1),mf(Xc),Nu(),Iu("main_dialog_exit"),xl=0,Hu()}function Hu(){Lu("exit_app_cancel","button_search_focused"),Lu("exit_app_minimize","button_search_focused"),Lu("exit_app_close","button_search_focused"),Tu(xl?1===xl?"exit_app_minimize":"exit_app_close":"exit_app_cancel","button_search_focused")}function Du(){v_("dialog_counter_text"),Vu(0,0,0)}function qu(e,t,n,a){0<a?(Ou("dialog_counter_text",t*n+(e+1)+"/"+a),Vu(t,n,a)):Du()}function Vu(e,t,n){var a=screen.height/100*7;if(3===t&&9<n||5===t&&10<n||6===t&&12<n){var i=kl.Main_Go===nl||kl.Main_Go===gl||kl.Main_Go===vl||kl.Main_Go===ll||kl.Main_Go===bl||kl.Main_Go===hl||kl.Main_Go===pl||kl.Main_Go===ul,o=Math.ceil((screen.height-3*a)/(Math.ceil(n/t)-1)*e+a*(i?1.8:1));Dc.style.top=o+"px",Tl&&(Tl=!1,Dc.style.backgroundColor="#777777")}else Dc.style.backgroundColor="#000000",Dc.style.top=a+"px",Tl=!0}function Ju(e){(Kl=12)/3<e&&(Kl=3*e),99<Kl&&(Kl=99)}function zu(e){Ou("dialog_warning_text",e),xu("dialog_warning")}function Xu(){Iu("dialog_warning")}function ju(){Zu(),e_(),xu("dialog_about")}function Wu(){Iu("dialog_about")}function Yu(){return Pu("dialog_about")}function Ku(){Zu(),e_(),Xu(),__(kl.Main_Go),Du(),Ek()}function $u(){Wu(),e_(),xu("dialog_controls")}function Zu(){Iu("dialog_controls")}function Qu(){return Pu("dialog_controls")}function e_(){Iu("dialog_update")}function t_(e){return(e+"").replace(/\B(?=(\d{3})+(?!\d))/g,",")}function n_(e,t,n){return(e+="").indexOf("x")||(e=e.slice(-3)),e+"p"+(t=58<t?60:t<32?30:Math.ceil(t))+(""!==n?" ["+n.toUpperCase()+"]":"")}function a_(e){return-1!==e.indexOf("live")?"":Y}function i_(e,t,n){return null!==document.getElementById(n+e+"_"+t)}function o_(){Q_(),r_(),document.body.addEventListener("keyup",G_,!1)}function s_(){for(var e,t=0;t<Gl.length;t++)t<4?document.getElementById(Gl[t]).style.opacity="0.5":-1===(e=document.getElementById(Gl[t])).className.indexOf("icon_center_focus")&&(e.style.opacity="0.5");Tu("topbar","topbar_dim")}function d_(){for(var e=0;e<Gl.length;e++)document.getElementById(Gl[e]).style.opacity="1";Lu("topbar","topbar_dim")}function r_(e){window.clearTimeout(Jc),d_(),K_(function(){c_(e)})}function c_(e){kl.Main_Go!==cl&&(kl.Main_BeforeChannelisSet=!1),kl.Main_Go!==nl&&(kl.Main_BeforeAgameisSet=!1),Du(),kl.Main_Go===Qc?(By=rb,Uy()):kl.Main_Go===el?zi():kl.Main_Go===tl?(By=sb,Uy()):kl.Main_Go===nl?To():kl.Main_Go===sl?Gw():kl.Main_Go===dl?yw():kl.Main_Go===rl?sk():kl.Main_Go===cl?ad():kl.Main_Go===ll?tr():kl.Main_Go===ul?(By=ib,Uy()):kl.Main_Go===_l?IE():kl.Main_Go===al?nE():kl.Main_Go===il?UC():kl.Main_Go===ol?(By=db,Uy()):kl.Main_Go===fl?dC():kl.Main_Go===ml?zb():kl.Main_Go===hl?QS():kl.Main_Go===pl?(By=ab,Uy()):kl.Main_Go===gl?vs():kl.Main_Go===vl?(By=ob,Uy()):kl.Main_Go===yl?(By=cb,Uy()):kl.Main_Go===bl&&lS(),Jc=window.setTimeout(s_,3e3),e&&vf()}function l_(){bf("Main_values",JSON.stringify(kl))}function u_(){kl=Ny(kl,kf("Main_values",{}))}function __(e){e===Qc?Ry():e===el?Xi():e===tl?Ry():e===nl?Lo():e===sl?Aw():e===dl?bw():e===rl?dk():e===cl?id():e===ll?nr():e===ul?Ry():e===_l?xE():e===al?aE():e===il?RC():e===ol?Ry():e===fl?rC():e===ml?Xb():e===hl?eI():e===pl?Ry():e===gl?ys():e===vl?Ry():e===yl?Ry():e===bl&&uS(),Pu("settings_scroll")&&Sk()}function f_(){Su("label_refresh","icon-refresh",t+$t),Su("label_side_panel","icon-ellipsis",Dn),Iu("label_switch"),Lu("top_bar_user","icon_center_focus"),Ou("top_bar_live",_),Ou("top_bar_user",u),Ou("top_bar_featured",rn),Ou("top_bar_game",f),Ou("top_bar_vod",nn),Ou("top_bar_clip",U)}function m_(){Su("label_side_panel","icon-arrow-circle-left",x),v_("top_bar_live"),v_("top_bar_game"),v_("top_bar_vod"),v_("top_bar_clip"),v_("top_bar_featured"),Tu("top_bar_user","icon_center_focus")}function h_(e){return'<div style="font-size: 30%; position: fixed; line-height: 0; text-shadow: #000000 0 0 5.7px, #000000 0 0 5.7px, #000000 0 0 4px">'+e+"</div>"}function p_(e){return e=new Date(e),Bl?e.getDate()+" "+Zt[e.getMonth()]+", "+e.getFullYear():Zt[e.getMonth()]+" "+e.getDate()+", "+e.getFullYear()}function g_(){if(_u)try{lu="Android: "+Android.getversion()+" Web: "+cu}catch(e){}Bu("dialog_about_text",va+be+lu+ya)}function v_(e){for(e=document.getElementById(e);e.firstChild;)e.removeChild(e.firstChild)}function y_(e){for(var t,n=0;n<Sl.length;n++)null!==(t=document.getElementById(Sl[n].id))&&yu(t,Sl[n].src+fu,e)}function b_(){Sl=[]}function w_(e,t){Sl.push({id:e,src:t})}function k_(e){$c=e}function C_(e){var t=0;return $c<e?t=-1:e<$c&&(t=1),$c=e,t}function M_(e){Zc.src=e}function E_(e){return(Ll=document.createElement("td")).setAttribute("id",e),Ll.className="stream_cell",Ll}function S_(e,t,n){return(Ll=document.createElement("td")).setAttribute("id",t[4]+e),Ll.setAttribute(su,n[0]),Ll.setAttribute("data-id",n[1]),Ll.className="stream_cell",Ll.innerHTML=x_(e,t,n),Ll}function I_(e,t,n){var a=document.getElementById(e),i=e.split(n[5])[1];a.setAttribute(su,t[0]),a.setAttribute("data-id",t[1]),a.innerHTML=x_(i,n,t),a.setAttribute("id",n[4]+i)}function x_(e,t,n){return w_(t[1]+e,n[2]),'<div id="'+t[0]+e+'" class="stream_thumbnail_channel" ><img id="'+t[1]+e+'" class="stream_img"></div><div id="'+t[2]+e+'" class="stream_text"><div id="'+t[3]+e+'" class="stream_channel">'+n[3]+"</div></div>"}function P_(e,t,n,a,i){return e<ql&&M_(i[0]),(Ll=document.createElement("td")).setAttribute("id",a[8]+t),Ll.setAttribute(su,JSON.stringify(n)),Ll.className="stream_cell",Ll.innerHTML=L_(t,a,i),Ll}function T_(e,t,n,a){var i=document.getElementById(e),o=e.split(a[9])[1];i.setAttribute(su,JSON.stringify(t)),i.innerHTML=L_(o,a,n),i.setAttribute("id",a[8]+o)}function L_(e,t,n){return w_(t[1]+e,n[0]),'<div id="'+t[0]+e+'" class="stream_thumbnail_video" ><img id="'+t[1]+e+'" class="stream_img"></div><div id="'+t[2]+e+'" class="stream_text"><div id="'+t[3]+e+'" class="stream_channel" style="width: 66%; display: inline-block;">'+n[1]+'</div><div id="'+t[7]+e+'"class="stream_info" style="width:33%; float: right; text-align: right; display: inline-block;">'+n[5]+'</div><div id="'+t[4]+e+'"class="stream_info">'+PI.parse(n[2])+'</div><div id="'+t[5]+e+'"class="stream_info">'+g+n[3]+'</div><div id="'+t[6]+e+'"class="stream_info">'+n[4]+"</div></div>"}function B_(e,t,n){return(Ll=document.createElement("td")).setAttribute("id",t[5]+e),Ll.setAttribute(su,n[0]),Ll.className="stream_cell",Ll.innerHTML=O_(e,t,n),Ll}function O_(e,t,n){return w_(t[1]+e,n[1]),'<div id="'+t[0]+e+'" class="stream_thumbnail_game" ><img id="'+t[1]+e+'" class="stream_img"></div><div id="'+t[2]+e+'" class="stream_text"><div id="'+t[3]+e+'" class="stream_channel">'+n[0]+'</div><div id="'+t[4]+e+'"class="stream_info_games" style="width: 100%; display: inline-block;">'+n[2]+"</div></div>"}function G_(){Ml=!0}function A_(){Cl=!0}function N_(){Cl=!1,window.setTimeout(A_)}function U_(){return!Cl||!Ml}function R_(e,t,n,a,i){Tu(n[0]+e+"_"+t,ou),qu(t,e,a,i),C_(e)?1<e?i_(e+1,0,n[0])?X_(n[6],-1*document.getElementById(n[4]+e+"_"+t).offsetTop+.42*screen.height):G_():X_(n[6],.07*screen.height):G_()}function F_(e,t,n,a,i){Tu(n[0]+e+"_"+t,ou),qu(t,e,a,i),C_(e)?e?i_(e+1,0,n[0])&&X_(n[10],-1*document.getElementById(n[8]+(e-1)+"_"+t).offsetTop):X_(n[10],.07*screen.height):G_()}function H_(e,t,n,a,i){Tu(n[0]+e+"_"+t,ou),qu(t,e,a,i),C_(e)?X_(n[10]?n[10]:n[7],e?-1*document.getElementById(n[5]+(e-1)+"_"+t).offsetTop+.025*screen.height:-1*document.getElementById(n[5]+e+"_"+t).offsetTop+.025*screen.height):G_()}function D_(e,t,n){document.body.removeEventListener("keydown",n),kl.Play_selectedChannel=JSON.parse(document.getElementById(t[8]+e).getAttribute(su)),kl.Play_selectedChannel_id=kl.Play_selectedChannel[1],kl.Play_selectedChannel=kl.Play_selectedChannel[0],kl.Main_Go===il?(kl.Play_DisplaynameHost=document.getElementById(t[3]+e).textContent,kl.Play_selectedChannelDisplayname=kl.Play_DisplaynameHost.split(ae)[1],kl.Play_isHost=!0):kl.Play_selectedChannelDisplayname=document.getElementById(t[3]+e).textContent,kl.Play_gameSelected=document.getElementById(t[5]+e).textContent.split(g)[1],kl.Main_Go===nl&&(kl.Main_OldgameSelected=kl.Main_gameSelected),q_()}function q_(){document.body.addEventListener("keydown",Dg,!1),Iu("scene1"),xu("scene2"),Wp(),eg(),gg(),ao()&&!ZC&&rM&&GM(),K_(Wh)}function V_(e,t,n){document.body.removeEventListener("keydown",n),mb=JSON.parse(document.getElementById(t[8]+e).getAttribute(su)),Zf=parseInt(mb[1]),kl.Play_gameSelected=mb[2],kl.Main_selectedChannel=mb[3],kl.Main_selectedChannelDisplayname=mb[4],kl.Main_selectedChannelLogo=mb[5],kl.Main_selectedChannel_id=mb[6],kl.ChannelVod_vodId=mb[7],er=parseInt(mb[8]),fb=mb[9],pb=mb[10],ub=mb[11],mb=mb[0],hb=document.getElementById(t[4]+e).textContent,_b=document.getElementById(t[6]+e).textContent,document.body.addEventListener("keydown",wm,!1),Iu("scene1"),xu("scene2"),eg(),Jp(),Up(),Hp(),ao()&&!ZC&&rM&&GM(),K_(Qf)}function J_(e,t,n){document.body.removeEventListener("keydown",n),kl.ChannelVod_vodId=JSON.parse(document.getElementById(t[8]+e).getAttribute(su)),Dd=parseInt(kl.ChannelVod_vodId[1]),Jd=kl.ChannelVod_vodId[2],kl.Play_gameSelected=kl.ChannelVod_vodId[3],kl.Main_selectedChannel=kl.ChannelVod_vodId[4],Uh=kl.ChannelVod_vodId[5],kl.ChannelVod_vodId=kl.ChannelVod_vodId[0].substr(1),kl.Main_Go===ll?Kd=document.getElementById(t[3]+e).innerHTML:(Kd="",kl.Main_selectedChannelDisplayname=document.getElementById(t[3]+e).textContent),Zd=document.getElementById(t[4]+e).textContent,Qd=document.getElementById(t[5]+e).textContent,$d=document.getElementById(t[11]+e).innerHTML+", "+document.getElementById(t[6]+e).textContent,z_()}function z_(){document.body.addEventListener("keydown",Ly,!1),Iu("scene1"),xu("scene2"),oy(),eg(),Jp(),Hp(),Ev=!1,ao()&&!ZC&&rM&&GM(),K_(Bv)}function X_(e,t){document.getElementById(e).style.top=t+"px",window.setTimeout(G_,10)}function j_(e,t){Ml=!1,Lu(t[0]+e,ou)}function W_(){var e=document.createElement("span");e.className="fa",e.style.display="none",document.body.insertBefore(e,document.body.firstChild),"icons"!==window.getComputedStyle(e,null).getPropertyValue("font-family")?(Kc&&console.log("Main_Checktylesheet reloading"),Y_("https://fgl27.github.io/SmartTwitchTV/release/githubio/css/icons.min.css")):Kc&&console.log("Main_Checktylesheet loaded OK"),document.body.removeChild(e)}function Y_(e){var t=document.createElement("link");t.rel="stylesheet",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)}function K_(e){"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?window.setTimeout(e):document.addEventListener("DOMContentLoaded",e)}function $_(){var e=(new Date).getTime()+uu;return e=new Date(e),(Bl?Qt[e.getDay()]+" "+e.getDate()+"/"+Zt[e.getMonth()]:Qt[e.getDay()]+" "+Zt[e.getMonth()]+"/"+e.getDate())+" "+Mp(e.getHours())+":"+Mp(e.getMinutes())}function Z_(){document.hidden||(Q_(),window.setTimeout(Q_,2e4))}function Q_(){document.hidden||(Ou("label_clock",$_()),fu="?"+Math.random())}function ef(){document.hidden||ao()&&window.setTimeout(function(){MM()||ZC||(Rm=Di[kl.Users_Position].name,_M())},5e3)}function tf(){Tu("side_panel_"+Rl,"side_panel_text_focus")}function nf(){Lu("side_panel_"+Rl,"side_panel_text_focus")}function af(){Rl?1===Rl?Ku():2===Rl?(document.body.addEventListener("keydown",Xc,!1),ju()):3===Rl?(document.body.addEventListener("keydown",Xc,!1),$u()):4===Rl?Ru(Xc):5===Rl?of(Qc):6===Rl?of(lo()?_l:el):7===Rl?of(yl):8===Rl?of(tl):9===Rl?of(hl):10===Rl&&of(pl):kl.Main_Go!==sl?(kl.Search_isSearching||kl.Main_Go!==cl&&kl.Main_Go!==ul&&kl.Main_Go!==ll||Sd(),kl.Main_BeforeSearch=kl.Main_Go,kl.Main_Go=sl,__(kl.Main_BeforeSearch),r_()):document.body.addEventListener("keydown",Xc,!1),df()}function of(e){e===kl.Main_Go?document.body.addEventListener("keydown",Xc,!1):(kl.Main_Before=kl.Main_Go,kl.Main_Go=e,__(kl.Main_Before),r_())}function sf(e){Xc=e,document.body.removeEventListener("keydown",Xc),document.body.addEventListener("keydown",rf,!1),Lu("side_panel","side_panel_hide")}function df(){document.body.removeEventListener("keydown",rf),Tu("side_panel","side_panel_hide"),nf(),Rl=0,tf()}function rf(e){switch(e.keyCode){case Na:case La:document.body.addEventListener("keydown",Xc,!1),df(),pf();break;case Ba:Rl&&(nf(),Rl--,tf());break;case Ga:Rl<10&&(nf(),Rl++,tf());break;case Aa:af()}}function cf(e){switch(e.keyCode){case Na:Fu();break;case Oa:2<++xl&&(xl=0),Hu(),Nu(),Uu();break;case La:--xl<0&&(xl=2),Hu(),Nu(),Uu();break;case Aa:xl?_u&&1===xl?Android.mclose(!1):_u&&2===xl&&Android.mclose(!0):Fu()}}bu();var lf=["top_bar_live","top_bar_user","top_bar_featured","top_bar_game","top_bar_vod","top_bar_clip"],uf=[Qc,_l,yl,tl,hl,pl],_f=!1;function ff(e){if(!(_f||By.FirstLoad||U_()))switch(e.keyCode){case Na:Qu()?(pf(),Zu()):Yu()?(pf(),Wu()):kl.Main_Go===nl?(kl.Main_OldgameSelected=kl.Main_gameSelected,kl.Games_return?(kl.Main_Go=dl,kl.Main_gameSelected=kl.gameSelectedOld):(kl.Main_Go=kl.Main_BeforeAgame,kl.Main_BeforeAgame=Qc),Lo(),hf(),c_()):kl.Main_Go===vl?(Qy(nl),hf(),c_()):kl.Main_Go===ol?(Qy(_l),hf(),c_()):kl.Main_Go===ul?(Qy(cl),hf(),c_()):kl.Main_Go===gl?(kl.Main_Go=nl,ys(),hf(),c_()):kl.Main_Go===al?(kl.Main_Go=_l,aE(),hf(),c_()):kl.Main_Go===il?(kl.Main_Go=_l,RC(),hf(),c_()):kl.Main_Go===bl?(kl.Main_Go=_l,uS(),hf(),c_()):kl.Main_Go===fl?(kl.Main_Go=_l,rC(),hf(),c_()):kl.Main_Go===cl?(kl.Main_Go=kl.Main_BeforeChannel,kl.Main_BeforeChannel=Qc,id(),kl.Main_selectedChannel_id="",hf(),c_()):kl.Main_Go===ll?(kl.Main_Go=cl,nr(),hf(),c_()):kl.Main_Go===rl?(kl.Main_Go===kl.Main_BeforeSearch?kl.Main_Go=Qc:kl.Main_Go=kl.Main_BeforeSearch,dk(),kl.Search_isSearching=!1,hf(),c_()):kl.Main_Go===dl?(kl.Main_Go===kl.Main_BeforeSearch?kl.Main_Go=Qc:kl.Main_Go=kl.Main_BeforeSearch,kl.Search_isSearching=!1,bw(),hf(),c_()):kl.Main_Go===ml?(kl.Main_Go===kl.Main_BeforeSearch?kl.Main_Go=Qc:kl.Main_Go=kl.Main_BeforeSearch,kl.Main_selectedChannel_id&&Id(),Xb(),kl.Search_isSearching=!1,hf(),c_()):(hf(),sf(ff));break;case Oa:if(kl.Search_isSearching||kl.Main_Go===cl||kl.Main_Go===ll||kl.Main_Go===ul||kl.Main_Go===rl||kl.Main_Go===dl||kl.Main_Go===ml)break;Lu(lf[kl.Main_CenterLablesVectorPos],"icon_center_line"),kl.Main_CenterLablesVectorPos++,5<kl.Main_CenterLablesVectorPos&&(kl.Main_CenterLablesVectorPos=0),pf(),gf();break;case La:if(kl.Search_isSearching||kl.Main_Go===cl||kl.Main_Go===ll||kl.Main_Go===ul||kl.Main_Go===rl||kl.Main_Go===dl||kl.Main_Go===ml)break;Lu(lf[kl.Main_CenterLablesVectorPos],"icon_center_line"),kl.Main_CenterLablesVectorPos--,kl.Main_CenterLablesVectorPos<0&&(kl.Main_CenterLablesVectorPos=5),pf(),gf();break;case Ga:Lu(lf[kl.Main_CenterLablesVectorPos],"icon_center_line"),document.body.removeEventListener("keydown",ff),El=!1,c_();break;case Aa:yf()}}function mf(e){window.clearTimeout(Jc),d_(),document.body.removeEventListener("keydown",e),document.body.removeEventListener("keydown",ff),document.body.addEventListener("keydown",ff,!1),pf()}function hf(){Lu(lf[kl.Main_CenterLablesVectorPos],"icon_center_line"),document.body.removeEventListener("keydown",ff),El=!1}function pf(){El=!0,Tu(lf[kl.Main_CenterLablesVectorPos],"icon_center_line")}function gf(){__(kl.Main_Go),kl.Main_Go=uf[kl.Main_CenterLablesVectorPos],kl.Main_Go!==_l||lo()?r_(!0):(kl.Main_Go=el,hf(),r_())}function vf(){kl.Main_Go===Qc?(By=rb,document.body.removeEventListener("keydown",nb)):kl.Main_Go===_l?document.body.removeEventListener("keydown",VE):kl.Main_Go===nl?document.body.removeEventListener("keydown",Ko):kl.Main_Go===yl?(By=cb,document.body.removeEventListener("keydown",nb)):kl.Main_Go===rl?document.body.removeEventListener("keydown",yk):kl.Main_Go===dl?document.body.removeEventListener("keydown",Tw):kl.Main_Go===ml?document.body.removeEventListener("keydown",ow):kl.Main_Go===ll?document.body.removeEventListener("keydown",pr):kl.Main_Go===cl?document.body.removeEventListener("keydown",xd):kl.Main_Go===il?document.body.removeEventListener("keydown",KC):kl.Main_Go===bl?document.body.removeEventListener("keydown",xS):kl.Main_Go===fl?document.body.removeEventListener("keydown",yC):kl.Main_Go===tl?(By=sb,document.body.removeEventListener("keydown",nb)):kl.Main_Go===ul?(By=ib,document.body.removeEventListener("keydown",nb)):kl.Main_Go===hl?document.body.removeEventListener("keydown",yI):kl.Main_Go===pl?(By=ab,document.body.removeEventListener("keydown",nb)):kl.Main_Go===vl?(By=ob,document.body.removeEventListener("keydown",nb)):kl.Main_Go===ol?(By=db,document.body.removeEventListener("keydown",nb)):kl.Main_Go===gl?document.body.removeEventListener("keydown",Os):kl.Main_Go===al&&document.body.removeEventListener("keydown",vE)}function yf(){window.clearTimeout(Jc),d_(),kl.Main_Go!==cl&&(kl.Main_BeforeChannelisSet=!1),kl.Main_Go!==nl&&(kl.Main_BeforeAgameisSet=!1),Du(),kl.Main_Go===Qc?(By=rb,Fy()):kl.Main_Go===_l?PE():kl.Main_Go===yl?(By=cb,Fy()):kl.Main_Go===nl?Bo():kl.Main_Go===fl?cC():kl.Main_Go===cl?od():kl.Main_Go===ll?ar():kl.Main_Go===rl?rk():kl.Main_Go===dl?ww():kl.Main_Go===ml?jb():kl.Main_Go===tl?(By=sb,Fy()):kl.Main_Go===ol?(By=db).loadingData||By.key_refresh():kl.Main_Go===hl?tI():kl.Main_Go===pl?(By=ab,Fy()):kl.Main_Go===vl?(By=ob,Fy()):kl.Main_Go===ul?(By=ib,Fy()):kl.Main_Go===gl?bs():kl.Main_Go===al?iE():kl.Main_Go===il?FC():kl.Main_Go===bl&&_S(),Jc=window.setTimeout(s_,3e3)}function bf(e,t){localStorage.setItem(e,t)}function wf(e,t){return parseInt(localStorage.getItem(e))||t}function kf(e,t){return JSON.parse(localStorage.getItem(e))||t}function Cf(e,t){var n=t.toString();return(localStorage.getItem(e)||n)===n?t:!t}function Mf(e){console.log(e);for(var t=0;t<e.length;t++)console.log("Character is: "+e.charAt(t)+" it's Unicode is: \\u"+e.charCodeAt(t).toString(16).toUpperCase())}function Ef(e){console.log("processCode");var t="";t=e.match(/code=(\w+)/),Il=t?(t=t[1],console.log("if code "+t),t):(console.log("else code "+t),0)}function Sf(e,t,n,a,i,o,s){var d;if(_u){if(!(d=Android.mreadUrl(e,t,n,a)))return void o();200===(d=JSON.parse(d)).status?i(d.responseText):o()}else(d=new XMLHttpRequest).open("GET",(s?vu:"")+e,!0),d.timeout=t,0<n&&d.setRequestHeader(Zl,$l),1<n&&d.setRequestHeader(Ql,nu),2<n&&d.setRequestHeader(eu,a),d.ontimeout=function(){},d.onreadystatechange=function(){if(4===d.readyState){if(200===d.status)return void i(d.responseText);o()}},d.send(null)}var If=0,xf=null,Pf=0,Tf=!1,Lf=0,Bf=0,Of=!1,Gf=0,Af=2e3,Nf=5,Uf="source",Rf=Uf,Ff=0,Hf=[],Df="",qf=!1,Vf=0,Jf=0,zf=1,Xf=!1,jf=0,Wf=!1,Yf=!1,Kf=2e3,$f=[0,5],Zf=0;function Qf(){Gp(),gg(),ip(document.getElementById("stream_info_icon"),kl.Main_selectedChannelLogo),Ou("stream_info_name",kl.Main_selectedChannelDisplayname),Bu("stream_info_title",fb),Bu("stream_info_game",ub+", "+_b+", "+pb),Ou("stream_live_icon",hb),Ou("progress_bar_duration",Ep(Zf)),gy((Rh=$f)[1]),kl.Play_isHost=!1,Ou("progress_bar_current_time",Ep(0)),Ou("stream_live_time",""),Ou("stream_watching_time",""),Xf=null!==kl.ChannelVod_vodId,oc=Ft+".",Xf?(ic=er,_c()):Rc(),Bu("pause_button",'<i class="strokedbig icon-pause" style="color: #FFFFFF; font-size: 180%;"></i>'),xu("progress_pause_holder"),ym(),xu("scene_channel_panel_bottom"),xu("chat_box"),Pf=jf=0,window.clearInterval(xf),Yf=!1,Tm=-13,Vf=Jf=0,Ff=2,Eg(3),yh=!1,_g(),ao()?(Wa=!0,Ya=kl.Main_selectedChannel_id,li()):Op(),document.addEventListener("visibilitychange",dm,!1),Tf=!1,Of=!(Bf=Lf=0),em(),document.body.removeEventListener("keyup",G_)}function em(){Gf=0,Af=2e3,tm()}function tm(){Sf("https://clips.twitch.tv/api/v2/clips/"+mb+"/status",Af,1,null,am,nm,!0)}function nm(){++Gf<Nf?(Af+=250,tm()):(Ap(),Lg(3))}function am(e){Hf=[],e=JSON.parse(e).quality_options;for(var t=0;t<e.length;t++)Hf.length?Hf.push({id:e[t].quality+"p"+im(e[t].frame_rate),url:e[t].source}):Hf.push({id:e[t].quality+"p"+im(e[t].frame_rate)+" (source)",url:e[t].source});Jf=zf,om()}function im(e){return 40<e?60:""}function om(){window.clearInterval(xf),Df=Hf[Ff=0].url,-1!==Uf.indexOf("source")&&(Uf="source");for(var e=0;e<pm();e++){if(Hf[e].id===Uf){Df=Hf[Ff=e].url;break}-1!==Hf[e].id.indexOf(Uf)&&(Df=Hf[Ff=e].url)}Rf=Uf,Kc&&console.log("PlayClip_onPlayer:",'\n\n"'+Df+'"\n'),Jf=zf,_u&&Of&&Android.startVideoOffset(Df,3,qf?-1:Android.gettime()),qf=!1,sm()}function sm(){Zm&&!tg()&&Qp(),_u&&(Pf=0,Gh=1+Kf/1e3,Wf=!1,window.clearInterval(xf),xf=window.setInterval(rm,Ah))}function dm(){document.hidden&&lm()}function rm(){_u&&(Vf=Android.gettime()),Of&&If===Vf&&!kp()?++Pf>Gh&&(Wf&&Yf&&Ff<pm()-1?Ff++:!Wf&&Yf&&jf++,navigator.onLine?1<jf?wp(jf,3,cm):(gm(),om(),Yf=!0):bp(!1,3)):(Pf=jf=0,Yf=!1),If=Vf}function cm(e){if(!e){if(!(Ff<pm()-1))return void bp(!1,3);Ff++}jf=0,gm(),om(),Yf=!0}function lm(){Of&&(Hf=[],um(),Hp(),Tp())}function um(){window.clearInterval(xf),_u&&Android.stopVideo(3),Of=!1,Oc(),Lp(),SM(),document.body.removeEventListener("keydown",wm),document.removeEventListener("visibilitychange",dm),_m(),document.getElementById("scene2_pannel_0").style.display="none",document.getElementById("scene2_pannel_1").style.width="30%",document.getElementById("quality_name").style.width="77%",document.getElementById("quality_name").style.fontSize="87.5%",er=0}function _m(){gv=!1,pv=vv=0,$p(),Uf=Rf,document.getElementById("scene_channel_panel").style.opacity="0",_u&&my(Android.gettime()/1e3,Zf,!0),Bu("progress_bar_jump_to",Ca),document.getElementById("progress_bar_steps").style.display="none",window.clearInterval(Jg)}function fm(){mm(),Cp(),Jg=window.setInterval(mm,1e3),Hp(),ry(),hm(),gm(),document.getElementById("scene_channel_panel").style.opacity="1",vm()}function mm(){_u&&my(Android.gettime()/1e3,Zf,!gv)}function hm(){for(var e=Ff=0;e<pm();e++){if(Hf[e].id===Uf){Ff=e;break}-1!==Hf[e].id.indexOf(Uf)&&(Ff=e)}}function pm(){return Hf.length}function gm(){1===pm()?(document.getElementById("quality_arrow_up").style.opacity="0",document.getElementById("quality_arrow_down").style.opacity="0"):Ff?Ff===pm()-1?(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="0.2"):(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="1"):(document.getElementById("quality_arrow_up").style.opacity="0.2",document.getElementById("quality_arrow_down").style.opacity="1"),-1!==(Uf=Hf[Ff].id).indexOf("source")?Ou("quality_name",Uf.replace("source",ye)):Ou("quality_name",Uf)}function vm(){Om=window.setTimeout(_m,5e3+Sv)}function ym(){document.getElementById("scene2_pannel_1").style.width="18%",document.getElementById("quality_name").style.width="60%",document.getElementById("quality_name").style.fontSize="72%",Ou("open_vod_text",Xf?ln:un),document.getElementById("scene2_pannel_0").style.display="inline-block"}function bm(){Xf?(kl.vodOffset=er,um(),document.body.addEventListener("keydown",Ly,!1),_g(),K_(Bv)):(yh=!0,Np(_n),window.setTimeout(function(){yh=!1,Up()},2e3))}function wm(e){if(Jf!==zf)switch(e.keyCode){case Na:Dp()?(Hp(),lm()):Fp()}else switch(e.keyCode){case La:MM()?Fm&&!ZC&&(NM(),Fm--,LM()):Nm&&!jp()&&tg()?(xm++,rg()):jp()?($p(),Mv?(mg(),5<++vh&&(vh=0),fg()):(yy(-1,Zf),Sv=2500),vm()):vg()?(Cg(),wg(),--Mh<0&&(Mh=3),bg()):fm();break;case Oa:MM()?Fm<aM-1&&!ZC&&(NM(),Fm++,LM()):!Nm||jp()||vg()?jp()?($p(),Mv?(mg(),--vh<0&&(vh=5),fg()):(yy(1,Zf),Sv=2500),vm()):vg()?(Cg(),wg(),3<++Mh&&(Mh=0),bg()):fm():bf("ChatEnable",(Zm=tg()||vg()?(eg(),!1):(Qp(),!0))?"true":"false");break;case Ba:vg()?Cg():jp()?(2===Mv&&1!==vh?(Mv--,cy()):1===Mv?(Mv--,cy()):0<Ff&&1===vh&&(Ff--,gm()),$p(),vm()):MM()?MM()?TM():fm():EM();break;case Ga:vg()?Cg():jp()?(Mv?1===Mv?(Mv++,cy()):Ff<pm()-1&&1===vh&&(Ff++,gm()):(Mv++,cy()),$p(),vm()):MM()?SM():Nm&&tg()?(4<++Bm?dg(!(Bm=1)):4===Bm&&dg(!0),og(!0)):fm();break;case Aa:vg()?Mg(3):jp()?Mv?1===Mv?(Xf&&kl.Play_ChatForceDisable&&(kp()?Lc(lc):Bc()),vg()||ug(3)):Tg(3):($p(),vm(),pv&&hy()):MM()?(um(),D_(Fm,uM,Dg)):fm();break;case Na:jp()?_m():MM()?SM():Dp()?(Hp(),lm()):Fp();break;case Pa:case xa:case Ta:Xf&&!kl.Play_ChatForceDisable&&(kp()?Lc(lc):Bc()),vg()||ug(3)}}var km,Cm,Mm,Em,Sm,Im,xm=0,Pm=xm,Tm=-5,Lm=.55,Bm=3,Om=null,Gm="source",Am=Gm,Nm=!0,Um=!1,Rm="",Fm=0,Hm=2e3,Dm=0,qm=1,Vm=2,Jm=0,zm=null,Xm=0,jm=0,Wm=0,Ym="",Km=[],$m=0,Zm=!1,Qm=null,eh=null,th=null,nh="",ah=0,ih=5,oh=0,sh=5,dh=0,rh=!1,ch=null,lh=!1,uh=0,_h=null,fh=0,mh=0,hh=!1,ph=!1,gh=!1,vh=1,yh=!1,bh=!1,wh=1e4,kh=2e3,Ch="",Mh=0,Eh=3,Sh=null,Ih="",xh=0,Ph=0,Th="",Lh=!0,Bh=!1,Oh=!1,Gh=7,Ah=1e3,Nh=0,Uh="",Rh=[],Fh=[{top:51.8,left:75.1,sizeOffset:[31,16,0,0]},{top:33,left:75.1,sizeOffset:[12.5,0,-6.25,0]},{top:.2,left:75.1,sizeOffset:[0,0,0,0]},{top:.2,left:38.3,sizeOffset:[0,0,0,0]},{top:.2,left:.2,sizeOffset:[0,0,0,0]},{top:33,left:.2,sizeOffset:[12.5,0,-6.25,0]},{top:51.8,left:.2,sizeOffset:[31,16,0,0]},{top:51.8,left:38.3,sizeOffset:[31,16,0,0]}],Hh=[0,0,0,1,2,2,2,1],Dh=[[0,1,2,2,2,1,0,0],[7,3,3,3,3,3,7,7],[6,5,4,4,4,5,6,6]],qh=[{containerHeight:17,percentage:"12.5%",dialogTop:15},{containerHeight:32,percentage:"25%",dialogTop:30},{containerHeight:48,percentage:"50%",dialogTop:50},{containerHeight:99.6,percentage:"100%",dialogTop:115}],Vh=1,Jh=["chat_extra_small","chat_size_small","chat_size_default","chat_size_biger","chat_size_bigest"];function zh(){Sm=document.getElementById("chat_container"),Im=document.getElementById("inner_progress_bar"),xm=wf("ChatPositionsValue",0),Bm=wf("ChatSizeValue",3),Zm=Cf("ChatEnable",!1),Nm=Cf("Play_isFullScreen",!0),og(!1),sg(!1),jh()}function Xh(e){e?void 0!==km&&(xm=km,Bm=Mm,(Zm=Cm)||eg(),og(!1)):(km=xm,Cm=Zm,Mm=Bm,xm=0,Qp(),Bm=4,dg(Zm=!0),og(!1),Kr&&(Kr.scrollTop=Kr.scrollHeight)),bf("Play_isFullScreen",Nm)}function jh(){Vh=Nk("chat_font_size");for(var e=0;e<Jh.length;e++)Lu("chat_inner_container",Jh[e]);Tu("chat_inner_container",Jh[Vh])}function Wh(){Gp(),Bu("stream_live_icon",'<div style="vertical-align: middle; display: inline-block"><i class="icon-circle" style="color: red; font-size: 105%; "></i></div><div style="vertical-align: middle; display: inline-block">'+Ca+_.toUpperCase()+"</div>"),v_("stream_info_title"),Xf=!(bh=!1),ip(document.getElementById("stream_info_icon"),pu),kl.Play_isHost?Ou("stream_info_name",kl.Play_DisplaynameHost):Ou("stream_info_name",kl.Play_selectedChannelDisplayname),kl.Play_WasPlaying=1,l_(),Um=kl.Play_isHost,kl.Play_isHost=!1,Bh=!1,xu("scene_channel_panel_bottom"),Ph=xh=0,Ou("stream_watching_time",v+Ep(0)),nh=Sp(0),Ou("stream_live_time",y+nh+b),xu("chat_box"),Iu("progress_pause_holder"),Eg(1),Tm=-5,fh=mh=Nh=0,window.clearInterval(_h),ph=!1,wh=3e3,Lh=!(oh=0),Jm=Dm,gh=!(rh=!(Wm=jm=Xm=lh=0)),document.addEventListener("visibilitychange",Kh,!1),Zh(),op(),document.body.removeEventListener("keyup",G_),zm=window.setInterval(tp,6e4)}function Yh(e){Np(e)}function Play_CheckResume(){rh&&Kh(),iv&&Dv(),Of&&(lm(),window.clearInterval(xf))}function Kh(){document.hidden?vg()?(Hp(),eg(),xp()):(Lp(),gh=!1,Xr(),window.clearInterval(zm)):(rh=!0,Jp(),rh&&(Gp(),wh=3e3,Bh=!(oh=0),bh?tp():Zh(),Jm=Dm,dh=0,navigator.onLine?op():Em=window.setInterval($h,100),zm=window.setInterval(tp,6e4)))}function $h(){(navigator.onLine||200<dh)&&(window.clearInterval(Em),op()),dh++}function Zh(){var e="https://api.twitch.tv/kraken/streams/"+kl.Play_selectedChannel_id,t=new XMLHttpRequest;t.open("GET",e,!0),t.timeout=wh,t.setRequestHeader(Ql,nu),t.setRequestHeader(Zl,$l),t.ontimeout=function(){},t.onreadystatechange=function(){4===t.readyState&&(200===t.status?Qh(JSON.parse(t.responseText)):ep())},t.send(null)}function Qh(e){null!==e.stream&&(Ou("stream_info_name",Um?kl.Play_DisplaynameHost:kl.Play_selectedChannelDisplayname),kl.Play_selectedChannel_id=e.stream.channel._id,Bu("stream_info_title",PI.parse(e.stream.channel.status)),kl.Play_gameSelected=e.stream.game,Ch=", ["+e.stream.channel.language.toUpperCase()+"]",Ou("stream_info_game",g+kl.Play_gameSelected+h+t_(e.stream.viewers)+" "+q+Ch),kl.Play_selectedChannelLogo=e.stream.channel.logo,bh=!0,ip(document.getElementById("stream_info_icon"),kl.Play_selectedChannelLogo),nh=e.stream.created_at,ao()?(Wa=!0,Ya=kl.Play_selectedChannel_id,li()):Op())}function ep(){oh<sh&&(wh+=500,window.setTimeout(function(){rh&&Zh()},750)),oh++}function tp(){var e="https://api.twitch.tv/kraken/streams/"+kl.Play_selectedChannel_id;kh=3e3;var t=new XMLHttpRequest;t.ontimeout=function(){},t.onreadystatechange=function(){4===t.readyState&&(200===t.status?(Nh=0,np(JSON.parse(t.responseText))):ap())},t.open("GET",e,!0),t.timeout=kh,t.setRequestHeader(Ql,nu),t.setRequestHeader(Zl,$l),t.send(null)}function np(e){null!==e.stream&&(Bu("stream_info_title",PI.parse(e.stream.channel.status)),kl.Play_gameSelected=e.stream.game,Ou("stream_info_game",g+kl.Play_gameSelected+h+t_(e.stream.viewers)+" "+q+Ch),bh||ip(document.getElementById("stream_info_icon"),e.stream.channel.logo))}function ap(){Nh<sh?(window.setTimeout(function(){rh&&tp()},2500),Nh++):Nh=0}function ip(e,t){e.onerror=function(){this.src=pu,bh=!1},e.src=t}function op(){ah=0,kh=2e3+(Bh?3e3:0),sp()}function sp(){var e,t;if(e=Jm===Dm?"https://api.twitch.tv/api/channels/"+kl.Play_selectedChannel+"/access_token"+(ao()&&Di[kl.Users_Position].access_token?"?oauth_token="+Di[kl.Users_Position].access_token:""):"https://usher.ttvnw.net/api/channel/hls/"+kl.Play_selectedChannel+".m3u8?&token="+encodeURIComponent(Xm.token)+"&sig="+Xm.sig+"&allow_source=true&allow_audi_only=true&fast_bread=true&allow_spectre=false",_u){if(!(t=Android.mreadUrl(e,kh,1,null)))return void rp();200===(t=JSON.parse(t)).status?(ah=0,rh&&up(t.responseText)):403===t.status?cp():404===t.status?Bg():rp()}else(t=new XMLHttpRequest).open("GET",vu+e,!0),t.timeout=kh,t.setRequestHeader(Zl,$l),t.ontimeout=function(){},t.onreadystatechange=function(){4===t.readyState&&(200===t.status?(ah=0,rh&&up(t.responseText)):403===t.status?(dp(t),Yc?lp():cp()):404===t.status?(dp(t),Yc?lp():Bg()):(dp(t),rp()))},t.send(null)}function dp(e){Kc&&(console.log(e.status),console.log(e.responseText))}function rp(){rh&&Lh&&(++ah<ih+(Bh?8:0)?(kh+=250,Bh?window.setTimeout(sp,500):sp()):Yc?lp():Bg())}function cp(){Ap(),Np(Jn),window.setTimeout(function(){rh&&Bg()},4e3)}function lp(){Km=[{id:"1080p60(Source)",band:"(10.00Mbps)",url:"http://fake"}],Jm=Vm,rh&&hp()}function up(e){Jm===Dm?(Xm=JSON.parse(e),Jm=qm,op()):Jm===qm&&(Km=_p(jm=e),Jm=Vm,rh&&hp())}function _p(e){for(var t,n=[],a="",i=1,o=mp(e),s=0;s<o.length;s++)a=o[s].split('NAME="')[1].split('"')[0],t=fp(o[s].split("BANDWIDTH=")[1].split(",")[0]),n.length?n[s-i].id!==a&&n[s-i].id!==a+" (source)"?n.push({id:a,band:t,url:o[s].split("\n")[2]}):i++:(-1===a.indexOf("ource")&&(a+=" (source)"),n.push({id:a,band:t,url:o[s].split("\n")[2]}));return n}function fp(e){return 0<(e=parseInt(e))?" ("+parseFloat(e/1e6).toFixed(2)+"Mbps)":""}function mp(e){for(var t,n=[],a=/#EXT-X-MEDIA:(.)*\n#EXT-X-STREAM-INF:(.)*\n(.)*/g;t=a.exec(e);)n.push(t[0]);return n}function hp(){window.clearInterval(_h),Ym=Km[$m=0].url,-1!==Gm.indexOf("source")&&(Gm="source");for(var e=0;e<ig();e++){if(Km[e].id===Gm){Ym=Km[$m=e].url;break}-1!==Km[e].id.indexOf(Gm)&&(Ym=Km[$m=e].url)}Am=Gm,Jm=Vm,Kc&&console.log("Play_onPlayer:",'\n\n"'+Ym+'"\n'),_u&&rh&&Android.startVideo(Ym,1),pp()}function pp(){Oh=!1,Zm&&!tg()&&Qp(),gh=!0,gp(),_u&&(fh=0,Gh=1+Hm/1e3,hh=!1,window.clearInterval(_h),_h=window.setInterval(vp,Ah))}function gp(){kl.Play_ChatForceDisable?Pr():Fc()}function vp(){var e=!kp();_u&&(xh=Android.gettime()),rh&&uh===xh&&e?Gh<++fh&&(hh&&ph&&$m<ig()-1?$m++:!hh&&ph&&mh++,navigator.onLine?1<mh?wp(mh,1,yp):(ag(),hp(),ph=!0):bp(!1,1)):(fh=mh=0,ph=!1),uh=xh,e&&Ph++}function yp(e){if(!e){if(!($m<ig()-1))return void Bg();$m++}mh=0,ag(),hp(),ph=!0}function bp(e,t){kl.Play_isHost=e,Eg(t),Lg(t)}function wp(e,t,n){var a=new XMLHttpRequest;a.timeout=1e3,a.open("GET","https://static-cdn.jtvnw.net/jtv-static/404_preview-10x10.png?"+Math.random(),!0),a.onreadystatechange=function(){4===a.readyState&&(200===a.status?n(2<e):12<e&&bp(!1,t))},a.send(null)}function kp(){return!!_u&&!Android.getPlaybackState()}function Cp(){var e=$_();Ou("stream_clock",e),Ou("label_clock",e)}function Mp(e){return e<10?"0"+e:e}function Ep(e){var t,n,a;return t=Mp(parseInt(e)%60),n=Mp((e=Math.floor(e/60))%60),a=Mp(e=Math.floor(e/60)),e?a+":"+n+":"+t:n+":"+t}function Sp(e){var t,n,a;return t=Mp(parseInt(e/1e3)%60),n=Mp((e=Math.floor(e/1e3/60))%60),a=Mp(e=Math.floor(e/60)),e?a+":"+n+":"+t:n+":"+t}function Ip(e){return Sp((new Date).getTime()-new Date(e).getTime())}function xp(){rh&&(Pp(),kl.Play_WasPlaying=0,Tp())}function Pp(){_u&&Android.stopVideo(1),rh=!1,SM(),Oc(),Lp(),Bp(),kl.Play_selectedChannel_id=""}function Tp(){my(0,0),xu("scene1"),Iu("scene2"),o_()}function Lp(){Wp(),Jp(),Up(),gg(),Uh="",$m===ig()-1&&(Am=Km[0].id),tv===fy()-1&&(jg=ev[0].id),Ff===pm()-1&&(Rf=Hf[0].id)}function Bp(){gh=!1,document.body.removeEventListener("keydown",Dg),document.removeEventListener("visibilitychange",Kh),Xr(),window.clearInterval(zm),window.clearInterval(_h),yh=!1}function Op(){Bu("fallow_text",Ca+Nt),Xa=!1}function Gp(){_u?Android.mshowLoading(!0):xu("dialog_loading_play")}function Ap(){_u?Android.mshowLoading(!1):Iu("dialog_loading_play")}function Np(e){Ou("dialog_warning_play_text",e),xu("dialog_warning_play")}function Up(){Iu("dialog_warning_play")}function Rp(){return Pu("dialog_warning_play")}function Fp(){Dp()?Hp():(xu("play_dialog_exit"),Qm=window.setTimeout(Fp,3e3))}function Hp(){window.clearTimeout(Qm),Iu("play_dialog_exit")}function Dp(){return Pu("play_dialog_exit")}function qp(){window.clearTimeout(eh)}function Vp(){window.clearTimeout(th)}function Jp(){qp(),Vp(),Iu("play_dialog_simple_pause")}function zp(){kp()?Xp()?(Iu("play_dialog_simple_pause"),th=window.setTimeout(zp,8e3)):(xu("play_dialog_simple_pause"),eh=window.setTimeout(zp,1500)):Jp()}function Xp(){return Pu("play_dialog_simple_pause")}function jp(){return"1"===document.getElementById("scene_channel_panel").style.opacity}function Wp(){$p(),document.getElementById("scene_channel_panel").style.opacity="0",Gm=Am,window.clearInterval(Jg)}function Yp(){_g(),ng(),ag(),Kp(),Jg=window.setInterval(Kp,1e3),Cp(),Hp(),document.getElementById("scene_channel_panel").style.opacity="1",Zp()}function Kp(){Ou("stream_watching_time",v+Ep(Ph)),Ou("stream_live_time",y+(-1===nh.indexOf("00:00")?Ip(nh):nh)+b)}function $p(){window.clearTimeout(Om),Sv=0}function Zp(){Om=window.setTimeout(Wp,5e3)}function Qp(){rg(),xu("chat_container")}function eg(){Iu("chat_container")}function tg(){return Pu("chat_container")}function ng(){for(var e=$m=0;e<ig();e++){if(Km[e].id===Gm){$m=e;break}-1!==Km[e].id.indexOf(Gm)&&($m=e)}}function ag(){1===ig()?(document.getElementById("quality_arrow_up").style.opacity="0",document.getElementById("quality_arrow_down").style.opacity="0"):$m?$m===ig()-1?(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="0.2"):(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="1"):(document.getElementById("quality_arrow_up").style.opacity="0.2",document.getElementById("quality_arrow_down").style.opacity="1"),-1!==(Gm=Km[$m].id).indexOf("source")?Ou("quality_name",Gm.replace("source",ye)+Km[$m].band):Ou("quality_name",Gm+Km[$m].band)}function ig(){return Km.length}function og(e){Sm.style.height=qh[Bm-1].containerHeight+"%",document.getElementById("play_chat_dialog").style.marginTop=qh[Bm-1].dialogTop+"%",rg(),Jr(),e&&cg(qn+qh[Bm-1].percentage),window.setTimeout(function(){Kr&&(Kr.scrollTop=Kr.scrollHeight)},500),bf("ChatSizeValue",Bm)}function sg(e){Sm.style.backgroundColor="rgba(0, 0, 0, "+Lm+")",e&&cg(Vn+(100*Lm).toFixed(0)+"%")}function dg(e){xm=e?Hh[Pm=xm]:Dh[xm][Pm]}function rg(){var e=4===Bm;xm<0?xm=e?2:7:(e?2:7)<xm&&(xm=0),Sm.style.top=(e?.2:Fh[xm].top+Fh[xm].sizeOffset[Bm-1])+"%",Sm.style.left=Fh[xm+(e?2:0)].left+"%",bf("ChatPositionsValue",xm)}function cg(e){window.clearTimeout(ch),Ou("play_chat_dialog_text",e),xu("play_chat_dialog"),ch=window.setTimeout(lg,1e3)}function lg(){Iu("play_chat_dialog")}function ug(e){kp()?(Jp(),_u&&Android.play(!0),Bu("pause_button",'<i class="strokedbig icon-pause" style="color: #FFFFFF; font-size: 180%;"></i>'),1===e?(jp()&&Wp(),window.clearInterval(_h),_h=window.setInterval(vp,Ah)):2===e?(jp()&&oy(),window.clearInterval(lv),lv=window.setInterval(ey,Ah)):3===e&&(jp()&&_m(),window.clearInterval(xf),xf=window.setInterval(rm,Ah))):(window.clearInterval(_h),window.clearInterval(lv),window.clearInterval(xf),Bu("pause_button",'<i class="strokedbig icon-play-1" style="color: #FFFFFF; font-size: 180%;"></i>'),_u&&Android.play(!1),zp())}function _g(){mg(),vh=1,fg()}function fg(){Tu("scene2_pannel_"+vh,"playbotton_focus")}function mg(){Lu("scene2_pannel_"+vh,"playbotton_focus")}function hg(){Jf=Wg=Jm=-1,eg(),Wp(),_m(),oy(),yh||Up(),Ap(),Hp(),bg()}function pg(){xu("dialog_end_stream")}function gg(){Iu("dialog_end_stream"),Cg(),yg()}function vg(){return Pu("dialog_end_stream")}function yg(){wg(),Mh=0,bg()}function bg(){Tu("dialog_end_"+Mh,"dialog_end_icons_focus")}function wg(){Lu("dialog_end_"+Mh,"dialog_end_icons_focus")}function kg(e){1===e?Ih=kl.Play_selectedChannelDisplayname+" "+_:2===e?Ih=kl.Main_selectedChannelDisplayname+an:3===e&&(Ih=kl.Main_selectedChannelDisplayname+Ft),Bu("dialog_end_stream_text",Ih+P+ra+sn+Eh+"..."),vg()?(Wg=Jm=Vm,Jf=zf,-1===--Eh?(Bu("dialog_end_stream_text",Ih+P+ra+sn+"0..."),Hp(),eg(),1===e?xp():2===e?ny():3===e&&lm()):Sh=window.setTimeout(function(){kg(e)},1e3)):Sh=window.setTimeout(function(){kg(e)},50)}function Cg(){window.clearTimeout(Sh),Bu("dialog_end_stream_text",Ih+P+ra+dn)}function Mg(e){var t=!0;Mh?1===Mh?kl.Play_isHost?(kl.Play_DisplaynameHost=kl.Play_selectedChannelDisplayname+ae,kl.Play_selectedChannel=Th.target_login,kl.Play_selectedChannelDisplayname=Th.target_display_name,kl.Play_DisplaynameHost=kl.Play_DisplaynameHost+kl.Play_selectedChannelDisplayname,Pp(),document.body.addEventListener("keydown",Dg,!1),kl.Play_selectedChannel_id=Th.target_id,K_(Wh)):bm():2===Mh?Sg(e):3===Mh&&xg(e):2===e?ev.length?(_v=!(Pv=!0),Zv(),Jp(),ic=wv=0,_c()):(t=!1,Np(aa),window.setTimeout(function(){Up()},2e3)):3===e&&(Hf.length?(Wf=!(qf=!0),om(),Jp(),Xf?(wv=0,ic=er,_c()):Rc()):(t=!1,Np(aa),window.setTimeout(function(){Up()},2e3))),1!==Mh&&3===Mh&&""===kl.Play_gameSelected&&(t=!1),t&&gg()}function Eg(e){e?1===e?(wg(),Mh=2,bg(),document.getElementById("dialog_end_0").style.display="none",document.getElementById("dialog_end_1").style.display="none"):2===e?(yg(),document.getElementById("dialog_end_0").style.display="inline-block",document.getElementById("dialog_end_1").style.display="none"):3===e&&(yg(),document.getElementById("dialog_end_0").style.display="inline-block",document.getElementById("dialog_end_1").style.display="inline-block",Ou("dialog_end_vod_text",Xf?ln:un)):(wg(),Mh=1,bg(),document.getElementById("dialog_end_0").style.display="none",document.getElementById("dialog_end_1").style.display="inline-block",Ou("dialog_end_vod_text",hn))}function Sg(e){kl.Main_BeforeChannelisSet||kl.Main_Go===ll||kl.Main_Go===ul||(kl.Main_BeforeChannel=kl.Main_BeforeAgameisSet&&kl.Main_Go!==nl?kl.Main_BeforeAgame:kl.Main_Go,kl.Main_BeforeChannelisSet=!0),__(kl.Main_Go),kl.Main_Go=cl,1===e?(kl.Main_selectedChannel_id=kl.Play_selectedChannel_id,kl.Main_selectedChannel=kl.Play_selectedChannel,kl.Main_selectedChannelDisplayname=kl.Play_selectedChannelDisplayname,zs=Xa,eg(),xp()):2===e?ny():3===e&&lm()}function Ig(e){kl.Search_isSearching||(kl.Main_BeforeSearch=kl.Main_Go),__(kl.Main_Go),kl.Main_Go=sl,1===e?(eg(),xp()):2===e?ny():3===e&&lm()}function xg(e){if(""===kl.Play_gameSelected)return yh=!0,Np(Qn),void window.setTimeout(function(){yh=!1,Up()},2e3);kl.Main_BeforeAgameisSet||kl.Main_Go===gl||kl.Main_Go===vl||(kl.Main_BeforeAgame=kl.Main_BeforeChannelisSet&&kl.Main_Go!==cl&&kl.Main_Go!==ll&&kl.Main_Go!==ul?kl.Main_BeforeChannel:kl.Main_Go,kl.Main_BeforeAgameisSet=!0),__(kl.Main_Go),kl.Main_Go=nl,xo=!1,kl.Main_gameSelected=kl.Play_gameSelected,eg(),1===e?xp():2===e?ny():3===e&&lm()}function Pg(){ao()&&Di[kl.Users_Position].access_token?Xa?vi():hi():(Np(Ut),yh=!0,window.setTimeout(function(){Up(),yh=!1},2e3))}function Tg(e){vh?1===vh?(1===e?(hp(),Wp()):2===e?(_v=!1,Zv(),oy()):3===e&&(Wf=!1,om(),_m()),Jp()):2===vh?(Ya=1===e?kl.Play_selectedChannel_id:kl.Main_selectedChannel_id,Pg(),$p(),1===e?Zp():2===e?ly():3===e&&vm()):3===vh?xg(e):4===vh?Sg(e):5===vh&&Ig(e):bm()}function Play_PannelEndStart(e){1===e?(window.clearInterval(_h),Bg()):Lg(e)}function Lg(e){window.clearInterval(_h),window.clearInterval(xf),window.clearInterval(lv),hg(),Eh=3,kg(e),pg(e)}function Bg(){Gp(),Jm=-1,ah=0,kh=2e3,Xr(),window.clearInterval(zm),window.clearInterval(_h),""!==kl.Play_selectedChannel_id?Ng():Og()}function Og(){var e="https://api.twitch.tv/kraken/users?login="+kl.Play_selectedChannel,t=new XMLHttpRequest;t.open("GET",e,!0),t.timeout=kh,t.setRequestHeader(Zl,$l),t.setRequestHeader(Ql,nu),t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void Gg(JSON.parse(t.responseText).users[0]);Ag()}},t.send(null)}function Gg(e){void 0!==e?(kl.Play_selectedChannel_id=e._id,ah=0,kh=2e3,Ng()):Lg(1)}function Ag(){++ah<ih?(kh+=250,Og()):bp(!1,1)}function Ng(){var e,t="https://tmi.twitch.tv/hosts?include_logins=1&host="+encodeURIComponent(kl.Play_selectedChannel_id);if(_u){if(!(e=Android.mreadUrl(t,kh,1,null)))return void Ug();200===(e=JSON.parse(e)).status?Rg(e.responseText):Ug()}else(e=new XMLHttpRequest).open("GET",vu+t,!0),e.timeout=kh,e.setRequestHeader(Zl,$l),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void Rg(e.responseText);Ug()}},e.send(null)}function Ug(){++ah<ih?(kh+=250,Ng()):bp(!1,1)}function Rg(e){void 0!==(Th=JSON.parse(e).hosts[0]).target_login?(yh=!0,Np(kl.Play_selectedChannelDisplayname+mn+ae+Th.target_display_name),window.setTimeout(function(){yh=!1},4e3),Eg(0),kl.Play_isHost=!0):(Eg(1),kl.Play_isHost=!1),Lg(1)}function Fg(){Xa?(Bu("fallow_heart",'<i class="icon-heart strokicon" style="color: #00b300; font-size: 210%;"></i>'),Bu("fallow_text",Ca+Tt)):(Bu("fallow_heart",'<i class="icon-heart-o strokicon" style="color: #FFFFFF; font-size: 210%;"></i>'),Bu("fallow_text",Ca+Lt))}function Hg(e){vg()&&!Dp()?(Cg(),Fp()):MM()?SM():jp()&&!Sy()?e?oy():Wp():Sy()&&Dp()?(Ey(),ay(!1),Tp()):Dp()?(Hp(),eg(),e?ny():xp()):(Rp()&&Up(),Fp())}function Dg(e){if(Jm!==Vm)switch(e.keyCode){case Na:Dp()?(Hp(),eg(),xp()):Fp()}else switch(e.keyCode){case La:MM()?Fm&&!ZC&&(NM(),Fm--,LM()):Nm&&!jp()&&tg()?(xm++,rg()):jp()?(mg(),5<++vh&&(vh=1),fg(),$p(),Zp()):vg()?(Cg(),wg(),--Mh<(kl.Play_isHost?1:2)&&(Mh=3),bg()):Yp();break;case Oa:MM()?Fm<aM-1&&!ZC&&(NM(),Fm++,LM()):!Nm||jp()||vg()?jp()?(mg(),--vh<1&&(vh=5),fg(),$p(),Zp()):vg()?(Cg(),wg(),3<++Mh&&(Mh=kl.Play_isHost?1:2),bg()):Yp():bf("ChatEnable",(Zm=tg()||vg()?(eg(),!1):(Qp(),!0))?"true":"false");break;case Ba:jp()?(0<$m&&1===vh&&($m--,ag()),$p(),Zp()):!MM()&&ao()?EM():vg()?Cg():MM()&&TM();break;case Ga:jp()?($m<ig()-1&&1===vh&&($m++,ag()),$p(),Zp()):MM()?SM():Nm&&tg()?(4<++Bm?dg(!(Bm=1)):4===Bm&&dg(!0),og(!0)):vg()?Cg():Yp();break;case Aa:vg()?Mg(1):jp()?Tg(1):MM()?kl.Play_selectedChannel!==JSON.parse(document.getElementById(uM[8]+Fm).getAttribute(su))[0]?(Pp(),D_(Fm,uM,Dg)):IM():Yp();break;case Na:Hg(!1);break;case Pa:case xa:case Ta:vg()||ug(1)}}var qg,Vg,Jg,zg,Xg="source",jg=Xg,Wg=0,Yg=null,Kg=0,$g=0,Zg=0,Qg="",ev=[],tv=0,nv=0,av=5,iv=!1,ov=2e3,sv=0,dv=5,rv=1e4,cv=0,lv=null,uv=0,_v=!1,fv=0,mv=!1,hv=!1,pv=0,gv=!1,vv=0,yv=2e3,bv=!1,wv=0,kv={},Cv=0,Mv=0,Ev=!0,Sv=0,Iv=0,xv=0,Pv=!1,Tv=[0,10,30,60,120,300,600,900,1200,1800],Lv=!1;function Bv(){Gp(),gg(),wv=0,Ou("stream_live_time",""),Ou("stream_watching_time",""),Ou("progress_bar_current_time",Ep(0)),oc=A+".",Bu("pause_button",'<i class="strokedbig icon-pause" style="color: #FFFFFF; font-size: 180%;"></i>'),Iu("progress_pause_holder"),Iv=0,gy((Rh=Tv)[1]),Wg=Dm,Xf=!0,er=0,kl.Play_isHost=!1,kl.vodOffset?(Gv(),Rv()):(Ev&&""!==kl.Main_selectedChannel_id?(ip(document.getElementById("stream_info_icon"),kl.Main_selectedChannelLogo),kv["#"+kl.ChannelVod_vodId]||_c(),ao()?(Ya=kl.Main_selectedChannel_id,Wa=!0,li()):Op()):(Gv(),Av()),Ou("stream_info_name",kl.Main_selectedChannelDisplayname),Bu("stream_info_title",Kd),Bu("stream_info_game",$d+", ["+Jd.toUpperCase()+"]"),Ou("stream_live_icon",Zd)),kv["#"+kl.ChannelVod_vodId]&&!kl.vodOffset?(Ap(),My()):Ov()}function Ov(){xu("chat_box"),window.setTimeout(function(){xu("scene_channel_panel_bottom"),Bu("pause_button",'<i class="strokedbig icon-pause" style="color: #FFFFFF; font-size: 180%;"></i>'),xu("progress_pause_holder")},1e3),Ou("progress_bar_duration",Ep(Dd)),kl.Play_WasPlaying=2,l_(),zg=window.setInterval(Vv,6e4),M_(Uh),uv=fv=0,window.clearInterval(lv),mv=!1,gv=yh=bv=!(Tm=-13),Zg=$g=Kg=vv=0,document.addEventListener("visibilitychange",Dv,!1),Lv=!(iv=!(hv=!1)),Jv(),Eg(2),document.body.removeEventListener("keyup",G_)}function Gv(){sv=0,dv=5,rv=1e4}function Av(){var e="https://api.twitch.tv/kraken/users?login="+encodeURIComponent(kl.Main_selectedChannel),t=new XMLHttpRequest;t.open("GET",e,!0),t.timeout=rv,t.setRequestHeader(Zl,$l),t.setRequestHeader(Ql,nu),t.ontimeout=function(){},t.onreadystatechange=function(){4===t.readyState&&(200===t.status?Nv(JSON.parse(t.responseText).users[0]):Uv())},t.send(null)}function Nv(e){void 0!==e?(kl.Main_selectedChannelLogo=e.logo,kl.Main_selectedChannel_id=e._id,kv["#"+kl.ChannelVod_vodId]||_c(),ao()?(Ya=kl.Main_selectedChannel_id,Wa=!0,li()):Op()):(kl.Main_selectedChannelLogo=pu,kl.Main_selectedChannel_id=""),ip(document.getElementById("stream_info_icon"),kl.Main_selectedChannelLogo)}function Uv(){++sv<dv?(rv+=500,window.setTimeout(function(){iv&&Av()},750)):Vg=window.setTimeout(Av,2500)}function Rv(){var e="https://api.twitch.tv/kraken/videos/"+kl.ChannelVod_vodId,t=new XMLHttpRequest;t.open("GET",e,!0),t.timeout=rv,t.setRequestHeader(Zl,$l),t.setRequestHeader(Ql,nu),t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void Hv(t.responseText);Fv()}},t.send(null)}function Fv(){++sv<dv&&(rv+=2e3,Rv())}function Hv(e){e=JSON.parse(e),Bu("stream_info_title",PI.parse(e.title)),Bu("stream_info_game",en+g+e.game+", "+t_(e.views)+D+", ["+e.language.toUpperCase()+"]"),Ou("stream_live_icon",F+p_(e.created_at)),Ou("progress_bar_duration",Ep(Dd=parseInt(e.length))),wv=1e3*kl.vodOffset,my(kl.vodOffset,Dd,!0),kl.Main_selectedChannelDisplayname=e.channel.display_name,Ou("stream_info_name",kl.Main_selectedChannelDisplayname),kl.Main_selectedChannelLogo=e.channel.logo,ip(document.getElementById("stream_info_icon"),kl.Main_selectedChannelLogo),kl.Main_selectedChannel_id=e.channel._id,kl.Main_selectedChannel=e.channel.name,ao()?(Wa=!0,Ya=kl.Main_selectedChannel_id,li()):Op(),M_(e.increment_view_count_url)}function Dv(){document.hidden?vg()?(Hp(),eg(),ny()):(Vv(),by(),Bc(),Lp(),window.clearInterval(lv),window.clearInterval(zg)):(iv=!0,Jp(),iv&&(Gp(),dh=dh=0,navigator.onLine?Qv():Em=window.setInterval(qv,100),Lc(lc),Eg(2),zg=window.setInterval(Vv,6e4)))}function qv(){(navigator.onLine||200<dh)&&(window.clearInterval(Em),Wg=Dm,Jv()),dh++}function Vv(){kl.vodOffset=_u?parseInt(Android.gettime()/1e3):0,l_(),kl.vodOffset=0}function Jv(){nv=0,yv=2e3,zv()}function zv(){var e,t;if(e=Wg===Dm?"https://api.twitch.tv/api/vods/"+kl.ChannelVod_vodId+"/access_token"+(ao()&&Di[kl.Users_Position].access_token?"?oauth_token="+Di[kl.Users_Position].access_token:""):"https://usher.ttvnw.net/vod/"+kl.ChannelVod_vodId+".m3u8?&nauth="+encodeURIComponent(Kg.token)+"&nauthsig="+Kg.sig+"&allow_source=true&allow_audi_only=true&allow_spectre=false",_u){if(!(t=Android.mreadUrl(e,kh,1,null)))return void Xv();200===(t=JSON.parse(t)).status?(nv=0,iv&&Wv(t.responseText)):Xv()}else(t=new XMLHttpRequest).open("GET",vu+e,!0),t.timeout=yv,t.setRequestHeader(Zl,$l),t.ontimeout=function(){},t.onreadystatechange=function(){4===t.readyState&&(200===t.status?(nv=0,iv&&Wv(t.responseText)):Xv())},t.send(null)}function Xv(){if(iv){var e;if(Kg.token&&(e=JSON.parse(Kg.token)),e&&0!==JSON.parse(Kg.token).chansub.restricted_bitrates.length)return void Yv();++nv<av?(yv+=250,zv()):Yc?jv():(Ap(),Lg(2))}}function jv(){ev=[{id:"1080p60(Source)",band:"(10.00Mbps)",url:"http://fake"}],Wg=Vm,iv&&Zv()}function Wv(e){Wg===Dm?(Kg=JSON.parse(e),Wg=qm,Jv()):Wg===qm&&(ev=_p($g=e),Wg=Vm,iv&&Zv())}function Yv(){ao()&&Di[kl.Users_Position].access_token?(Ya=kl.Main_selectedChannel_id,wi()):(Ap(),Np(T+Bt),window.setTimeout(function(){iv&&ny()},4e3))}function Kv(){Ap(),Np(T+Ot),window.setTimeout(function(){iv&&ny()},4e3)}function $v(){Lv?(Ap(),Np(T+Gt),window.setTimeout(function(){iv&&ny()},4e3)):(Lv=!0,Wg=Dm,Jv())}function Zv(){window.clearInterval(lv),Qg=ev[tv=0].url,-1!==Xg.indexOf("source")&&(Xg="source");for(var e=0;e<fy();e++){if(ev[e].id===Xg){Qg=ev[tv=e].url;break}-1!==ev[e].id.indexOf(Xg)&&(Qg=ev[tv=e].url)}jg=Xg,Qv()}function Qv(){Kc&&console.log("PlayVod_onPlayer:",'\n\n"'+Qg+'"\n'),kl.vodOffset?(ic=kl.vodOffset,_c(),_u&&iv&&Android.startVideoOffset(Qg,2,Pv?-1:1e3*kl.vodOffset),kl.vodOffset=0):_u&&iv&&Android.startVideoOffset(Qg,2,Pv?-1:Android.gettime()),Pv=!1,Zm&&!tg()&&Qp(),_u&&(uv=0,Gh=3+ov/1e3,_v=!1,window.clearInterval(lv),lv=window.setInterval(ey,Ah))}function ey(){_u&&(wv=Android.gettime()),iv&&cv===wv&&!kp()?++uv>Gh&&(_v&&mv&&tv<fy()-1?tv++:!_v&&mv&&fv++,navigator.onLine?1<fv?wp(fv,2,ty):(_y(),Zv(),mv=!0):bp(!1,2)):(uv=fv=0,mv=!1),cv=wv}function ty(e){if(!e){if(!(tv<fy()-1))return void bp(!1,2);tv++}fv=0,_y(),Zv(),mv=!0}function ny(){iv&&(ev=[],ay(!0),Tp())}function ay(e){e&&by(),_u&&Android.stopVideo(2),iv=!1,window.clearInterval(zg),window.clearInterval(Vg),kl.Play_WasPlaying=0,Ev=!0,Oc(),SM(),Lp(),iy()}function iy(){document.body.removeEventListener("keydown",Ly),document.removeEventListener("visibilitychange",Dv),kl.vodOffset=0,window.clearInterval(Yg),window.clearInterval(lv),Dd=0}function oy(){gv=!1,pv=vv=0,$p(),document.getElementById("scene_channel_panel").style.opacity="0",_u&&my(Android.gettime()/1e3,Dd,!0),Bu("progress_bar_jump_to",Ca),document.getElementById("progress_bar_steps").style.display="none",Xg=jg,window.clearInterval(Jg)}function sy(e){dy(),Cp(),Hp(),Jg=window.setInterval(dy,1e3),e&&(ry(),uy(),_y(),ly()),document.getElementById("scene_channel_panel").style.opacity="1"}function dy(){_u&&my(Android.gettime()/1e3,Dd,!gv)}function ry(){Mv=kp()?1:0,cy()}function cy(){Mv?1===Mv?(Tu("pause_button","progress_bar_div_focus"),Lu("progress_bar_div","progress_bar_div_focus"),mg(),Bu("progress_bar_jump_to",Ca),document.getElementById("progress_bar_steps").style.display="none"):2===Mv&&(Lu("pause_button","progress_bar_div_focus"),Lu("progress_bar_div","progress_bar_div_focus"),fg(),Bu("progress_bar_jump_to",Ca),document.getElementById("progress_bar_steps").style.display="none"):(Lu("pause_button","progress_bar_div_focus"),Tu("progress_bar_div","progress_bar_div_focus"),mg(),pv&&(vy(),document.getElementById("progress_bar_steps").style.display="inline-block"))}function ly(){Om=window.setTimeout(oy,5e3+Sv)}function uy(){for(var e=tv=0;e<fy();e++){if(ev[e].id===Xg){tv=e;break}-1!==ev[e].id.indexOf(Xg)&&(tv=e)}}function _y(){1===fy()?(document.getElementById("quality_arrow_up").style.opacity="0",document.getElementById("quality_arrow_down").style.opacity="0"):tv?tv===fy()-1?(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="0.2"):(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="1"):(document.getElementById("quality_arrow_up").style.opacity="0.2",document.getElementById("quality_arrow_down").style.opacity="1"),-1!==(Xg=ev[tv].id).indexOf("source")?Ou("quality_name",Xg.replace("source",ye)+ev[tv].band):Ou("quality_name",Xg+ev[tv].band)}function fy(){return ev.length}function my(e,t,n){Ou("progress_bar_current_time",Ep(e)),n&&(Im.style.width=e/t*100+"%")}function hy(){Jp(),vg()||(Wf=_v=!1,iv?(_u&&Android.startVideoOffset(Qg,2,0<xv?1e3*xv:-1),ic=xv):(ic=er,_u&&Android.startVideoOffset(Df,3,0<xv?1e3*xv:-1)),Xf&&_c()),Bu("progress_bar_jump_to",Ca),document.getElementById("progress_bar_steps").style.display="none",gv=!1,xv=pv=vv=0}function py(){Iv=vv=0,gy(Rh[1])}function gy(e){pv&&!Mv&&(document.getElementById("progress_bar_steps").style.display="inline-block"),60<Math.abs(e)?Ou("progress_bar_steps",zn+e/60+jn):Ou("progress_bar_steps",e?zn+e+Xn:zn+Rh[1]+Xn)}function vy(){Ou("progress_bar_jump_to",_e+" ("+(pv<0?"-":"")+Ep(Math.abs(pv))+")"+fe+Ep(xv))}function yy(e,t){var n=_u?Android.gettime()/1e3:0;window.clearTimeout(qg),gv=!0,vv<Rh.length-1&&Iv++%6==0&&vv++,pv+=Rh[vv]*e,xv=n+pv,iv&&(xv=10*Math.floor(xv/10)),t<xv?(pv=t-n-Rh[1],xv=n+pv,Iv=vv=0):xv<0&&(pv=0-n,xv=Iv=vv=0),vy(),Im.style.width=xv/t*100+"%",gy(Rh[vv]*e),qg=window.setTimeout(py,1e3)}function by(){var e=_u?parseInt(Android.gettime()/1e3):0,t="#"+kl.ChannelVod_vodId;300<e&&e<Dd-300?(kv[t]&&delete kv[t],kv[t]=e,bf("PlayVod_VodIds",JSON.stringify(kv))):Dd-300<e&&kv[t]&&(delete kv[t],bf("PlayVod_VodIds",JSON.stringify(kv)))}function wy(){kv=kf("PlayVod_VodIds",{});var e=ky();250<e&&Cy(e-250)}function ky(){var e=0;for(var t in kv)kv.hasOwnProperty(t)&&e++;return e}function Cy(e){var t=0;for(var n in kv){if(!(t<e))break;delete kv[n],t++}bf("PlayVod_VodIds",JSON.stringify(kv))}function My(){Iu("scene_channel_panel_bottom"),sy(!1),Bu("dialog_vod_saved_text",Sn+Sp(1e3*kv["#"+kl.ChannelVod_vodId])),xu("dialog_vod_start")}function Ey(){oy(),Iu("dialog_vod_start"),Iy(),window.setTimeout(function(){xu("scene_channel_panel_bottom")},1e3)}function Sy(){return Pu("dialog_vod_start")}function Iy(){Py(),Cv=0,xy()}function xy(){Tu("dialog_vod_"+Cv,"dialog_end_icons_focus")}function Py(){Lu("dialog_vod_"+Cv,"dialog_end_icons_focus")}function Ty(e){Ey(),e?(delete kv["#"+kl.ChannelVod_vodId],kl.vodOffset=0,Bv()):(kl.vodOffset=kv["#"+kl.ChannelVod_vodId],wv=1e3*kl.vodOffset,my(kl.vodOffset,Dd,!0),Ov())}function Ly(e){if(Wg===Vm||Sy())switch(e.keyCode){case La:MM()?Fm&&!ZC&&(NM(),Fm--,LM()):Nm&&!jp()&&tg()?(xm++,rg()):jp()&&!Sy()?($p(),Mv?(mg(),5<++vh&&(vh=1),fg()):(yy(-1,Dd),Sv=2500),ly()):Sy()?(Py(),Cv?Cv--:Cv++,xy()):vg()?(Cg(),wg(),--Mh<0&&(Mh=3),1===Mh&&(Mh=0),bg()):Sy()||sy(!0);break;case Oa:MM()?Fm<aM-1&&!ZC&&(NM(),Fm++,LM()):!Nm||jp()||vg()?jp()&&!Sy()?($p(),Mv?(mg(),--vh<1&&(vh=5),fg()):(yy(1,Dd),Sv=2500),ly()):Sy()?(Py(),Cv?Cv--:Cv++,xy()):vg()?(Cg(),wg(),3<++Mh&&(Mh=0),1===Mh&&(Mh=2),bg()):Sy()||sy(!0):bf("ChatEnable",(Zm=tg()||vg()?(eg(),!1):(Qp(),!0))?"true":"false");break;case Ba:vg()?Cg():jp()&&!Sy()?(2===Mv&&1!==vh?(Mv--,cy()):1===Mv?(Mv--,cy()):0<tv&&1===vh&&(tv--,_y()),$p(),ly()):MM()?MM()?TM():Sy()||sy(!0):EM();break;case Ga:vg()?Cg():jp()&&!Sy()?(Mv?1===Mv?(Mv++,cy()):tv<fy()-1&&1===vh&&(tv++,_y()):(Mv++,cy()),$p(),ly()):MM()?SM():Nm&&tg()?(4<++Bm?dg(!(Bm=1)):4===Bm&&dg(!0),og(!0)):Sy()||sy(!0);break;case Aa:Sy()?Ty(Cv):vg()?Mg(2):jp()?Mv?1===Mv?(kl.Play_ChatForceDisable&&(kp()?Lc(lc):Bc()),vg()||ug(2)):Tg(2):($p(),ly(),pv&&hy()):MM()?(ay(!0),D_(Fm,uM,Dg)):sy(!0);break;case Na:Hg(!0);break;case Pa:case xa:case Ta:kl.Play_ChatForceDisable&&(kp()?Lc(lc):Bc()),vg()||ug(2)}else switch(e.keyCode){case Na:Dp()?(Hp(),ny()):Fp()}}var By={};function Oy(){console.log("InitScreens place holder")}function Gy(){yb(),bb(),kb(),Cb(),Mb(),Sb(),Ib()}function Ay(e){return[e+"_thumbdiv",e+"_img",e+"_infodiv",e+"_title",e+"_createdon",e+"_game",e+"_viwers",e+"_duration",e+"_cell","cpempty_",e+"_scroll",e+"_lang"]}function Ny(){for(var e,t={},n=0;n<arguments.length;n+=1){var a=arguments[n],i=Object.keys(a);for(e=0;e<i.length;e+=1)t[i[e]]=a[i[e]]}return t}function Uy(){Nl=-1,kl.Main_Go=By.screen,By.label_init(),document.body.addEventListener("keydown",nb,!1),By.status?(xu(By.ids[10]),k_(By.posY),Yy(),l_()):Fy()}function Ry(){Nl=0,By.label_exit(),document.body.removeEventListener("keydown",nb),Iu(By.ids[10])}function Fy(){Gu(),v_(By.table),Xu(),By.cursor=null,By.status=!1,By.row=document.createElement("div"),By.MaxOffset=0,By.TopRowCreated=!1,By.offset=0,By.idObject={},By.FirstLoad=!0,By.itemsCount=0,By.posX=0,By.posY=0,By.row_id=0,By.coloumn_id=0,By.data=null,By.data_cursor=0,By.dataEnded=!1,Du(),Hy(),Dy()}function Hy(){By.loadingData=!0,By.loadingDataTry=0,By.loadingDataTimeout=3500}function Dy(){var e;if(By.set_url(),_u&&!By.data){if(!(e=Android.mreadUrl(By.url,By.loadingDataTimeout,2,null)))return void qy();200===(e=JSON.parse(e)).status?By.concatenate(e.responseText):qy()}else(e=new XMLHttpRequest).open("GET",By.url,!0),e.timeout=By.loadingDataTimeout,e.setRequestHeader(Zl,$l),e.setRequestHeader(Ql,nu),e.ontimeout=function(){},e.onreadystatechange=function(){4===e.readyState&&(200===e.status?By.concatenate(e.responseText):qy())},e.send(null)}function qy(){By.loadingDataTry++,By.loadingDataTry<By.loadingDataTryMax?(By.loadingDataTimeout+=500,Dy()):(By.loadingData=!1,By.itemsCount?By.dataEnded=!0:(By.FirstLoad=!1,Au(),zu(L)))}function Vy(){var e=By.data.length-By.data_cursor;if(e>By.ItemsLimit?e=By.ItemsLimit:By.loadingData||(By.dataEnded=!0),e){var t=Math.ceil(e/By.ColoumnsCount),n=By.row_id+t,a=document.getElementById(By.table);if(By.HasSwitches&&!By.TopRowCreated){By.TopRowCreated=!0,By.row=document.createElement("div");var i='<i class="icon-history stream_channel_fallow_icon"></i>'+Ca+Ca+m;(Ll=document.createElement("div")).setAttribute("id",By.ids[8]+"y_0"),Ll.className="stream_cell_period",Ll.innerHTML='<div id="'+By.ids[0]+'y_0" class="stream_thumbnail_channel_vod" ><div id="'+By.ids[3]+'y_0" class="stream_channel_fallow_game">'+i+"</div></div>",By.row.appendChild(Ll),a.appendChild(By.row)}for(By.row_id;By.row_id<n;){for(By.coloumn_id===By.ColoumnsCount&&(By.row=document.createElement("div"),By.coloumn_id=0),By.coloumn_id;By.coloumn_id<By.ColoumnsCount&&By.data_cursor<By.data.length;By.data_cursor++)By.data[By.data_cursor]&&By.addCell(By.data[By.data_cursor]);if(a.appendChild(By.row),By.coloumn_id===By.ColoumnsCount)By.row_id++;else if(By.data_cursor>=By.data.length)break}}By.emptyContent=!e&&!By.status,Wy()}function Jy(e,t,n,a){var i=e+"_"+t;return w_(n[1]+i,a),e<By.ColoumnsCount&&M_(a),(Ll=document.createElement("div")).style.cssText=By.ThumbCssText,i}function zy(e,t,n,a,i,o){var s=Jy(e,t,n,a);return Ll.setAttribute("id",n[5]+s),Ll.setAttribute(su,i),Ll.innerHTML='<div id="'+n[0]+s+'" class="stream_thumbnail_game"><div><img id="'+n[1]+s+'" class="stream_img"></div><div id="'+n[2]+s+'" class="stream_text2"><div id="<div id="'+n[3]+s+'" class="stream_channel">'+i+"</div>"+(""!==o?'<div id="'+n[4]+s+'"class="stream_info_games" style="width: 100%; display: inline-block;">'+o+"</div>":"")+"</div></div>",Ll}function Xy(e,t,n,a,i,o,s,d,r,c,l,u,_,f,m,h){var p=Jy(e,t,n,a);return Ll.setAttribute("id",n[8]+p),Ll.setAttribute(su,JSON.stringify([l,c,s[2],u,i,_,f,m,h,s[0],r,s[1]+s[2]])),Ll.innerHTML='<div id="'+n[0]+p+'" class="stream_thumbnail_clip"><div><img id="'+n[1]+p+'" class="stream_img"></div><div id="'+n[2]+p+'" class="stream_text2"><div id="'+n[3]+p+'" class="stream_info" style="width: 72%; display: inline-block; font-size: 85%;">'+i+'</div><div id="'+n[7]+p+'"class="stream_info" style="width:27%; float: right; text-align: right; display: inline-block;">'+r+'</div><div  style="line-height: 12px;"><div id="'+n[4]+p+'"class="stream_info" style="width: 59%; display: inline-block;">'+o[0]+o[1]+'</div><div id="'+n[5]+p+'"class="stream_info" style="width: 39%; display: inline-block; float: right; text-align: right;">'+H+Ep(c)+'</div></div><div id="'+n[11]+p+'"class="stream_info">'+s[0]+ra+s[1]+s[2]+'</div><div id="'+n[6]+p+'"class="stream_info">'+d+D+"</div></div></div>",Ll}function jy(e,t,n,a,i){var o=Jy(e,t,a,i[0]);return Ll.setAttribute("id",a[8]+o),Ll.setAttribute(su,JSON.stringify(n)),Ll.innerHTML='<div id="'+a[0]+o+'" class="stream_thumbnail_clip"><div><img id="'+a[1]+o+'" class="stream_img"></div><div id="'+a[2]+o+'" class="stream_text2"><div id="'+a[3]+o+'" class="stream_channel" style="width: 66%; display: inline-block;">'+i[1]+'</div><div id="'+a[7]+o+'"class="stream_info" style="width:33%; float: right; text-align: right; display: inline-block;">'+i[5]+'</div><div id="'+a[4]+o+'"class="stream_info">'+PI.parse(i[2])+'</div><div id="'+a[5]+o+'"class="stream_info">'+g+i[3]+'</div><div id="'+a[6]+o+'"class="stream_info">'+i[4]+"</div></div></div>",Ll}function Wy(){By.status?(y_(By.img_404),qu(By.posX,By.posY,By.ColoumnsCount,By.itemsCount)):(By.emptyContent?zu(By.empty_str()):(By.status=!0,y_(By.img_404)),Ul&&By.status&&wk.restor_playback.defaultValue?kl.Play_WasPlaying?(__(kl.Main_Go),kl.Main_Go=wl,kl.vodOffset||(kl.vodOffset=1),Dd=kl.vodOffset+1,Np(Wn),1===kl.Play_WasPlaying?q_():z_(),r_(!0),window.setTimeout(function(){yh||Up()},2e3)):1!==wl?(__(kl.Main_Go),kl.Main_Go=wl,j_(By.posY+"_"+By.posX,By.ids),r_()):(kl.Never_run&&$u(),kl.Never_run=!1,Yy(),l_()):(Yy(),l_()),Ul=!1,By.FirstLoad=!1,Au())}function Yy(){By.posY<0?$y():(By.addFocus(By.posY,By.posX,By.ids,By.ColoumnsCount,By.itemsCount),2<By.posY&&By.data_cursor+lb>By.data.length&&!By.dataEnded&&!By.loadingData&&(Hy(),Dy()),By.posY+By.ItemsReloadLimit>By.itemsCount/By.ColoumnsCount&&By.data_cursor<By.data.length&&(b_(),By.loadDataSuccess()),El&&j_(By.posY+"_"+By.posX,By.ids))}function Ky(e,t){j_(By.posY+"_"+By.posX,By.ids),By.posY+=e,By.posX=t,Yy()}function $y(){Tu(By.ids[0]+"y_0",ou)}function Zy(){Lu(By.ids[0]+"y_0",ou)}function Qy(e){Qu()?Zu():Yu()?Wu():(e===By.screen?kl.Main_Go=Qc:kl.Main_Go=e,Ry())}function eb(e){if(!By.HasSwitches||By.posY||-1!==e||By.emptyContent){if(By.HasSwitches&&-1===By.posY)By.posY=0,Yy(),Zy();else for(var t=0;t<By.ColoumnsCount;t++)if(i_(By.posY+e,By.posX-t,By.ids[0]))return void Ky(e,By.posX-t)}else j_(By.posY+"_"+By.posX,By.ids),By.posY=-1,$y()}function tb(e,t){i_(By.posY,By.posX+e,By.ids[0])?Ky(0,By.posX+e):i_(By.posY+e,t,By.ids[0])&&Ky(e,t)}function nb(e){if(!By.FirstLoad&&!U_())switch(N_(),e.keyCode){case Na:By.key_exit();break;case La:tb(-1,By.ColoumnsCount-1);break;case Oa:tb(1,0);break;case Ba:eb(-1);break;case Ga:eb(1);break;case Pa:case xa:case Ta:case Aa:By.key_play()}}By.FirstLoad=!1;var ab,ib,ob,sb,db,rb,cb,lb=100,ub="",_b="",fb="",mb="",hb="",pb="",gb={posX:0,posY:0,row_id:0,coloumn_id:0,dataEnded:!1,idObject:{},loadingData:!1,itemsCount:0,loadingDataTryMax:5,loadingDataTimeout:3500,MaxOffset:0,offset:0,status:!1,emptyContent:!1,itemsCountCheck:!1,FirstLoad:!1,row:0,data:null,data_cursor:0,loadDataSuccess:Vy,set_ThumbSize:function(){this.ThumbCssText="width: "+this.ThumbSize+"%; display: inline-block; padding: 3px;"},key_exit:function(){Qu()?Zu():Yu()?Wu():(this.itemsCount&&j_(this.posY+"_"+this.posX,this.ids),mf(nb))}},vb={ThumbSize:32.65,ItemsLimit:Dl,ItemsReloadLimit:Vl,ColoumnsCount:ql,addFocus:F_,img_404:gu,empty_str:function(){return B+K},key_play:function(){D_(this.posY+"_"+this.posX,this.ids,nb)}};function yb(){(rb=Ny(rb=Ny({ids:Ay("Live"),table:"stream_table_live",screen:Qc,base_url:"https://api.twitch.tv/kraken/streams?limit="+lb,set_url:function(){this.offset&&this.offset+lb>this.MaxOffset&&(this.dataEnded=!0),this.url=this.base_url+"&offset="+this.offset+(""!==Ol?"&language="+Ol:"")},label_init:function(){kl.Main_CenterLablesVectorPos=0,Tu("top_bar_live","icon_center_focus")},label_exit:function(){Lu("top_bar_live","icon_center_focus")},concatenate:function(e){if(this.data){var t=JSON.parse(e);this.MaxOffset=t._total,this.data=this.data.concat(t.streams),this.offset=this.data.length,this.offset>this.MaxOffset&&(this.dataEnded=!0),By.loadingData=!1}else this.data=JSON.parse(e),this.MaxOffset=this.data._total,this.data=this.data.streams,this.offset=this.data.length,this.offset>this.MaxOffset&&(this.dataEnded=!0),this.loadDataSuccess(),By.loadingData=!1},addCell:function(e){By.idObject[e.channel._id]||(By.itemsCount++,By.idObject[e.channel._id]=1,By.row.appendChild(jy(By.row_id,By.coloumn_id,[e.channel.name,e.channel._id,e.channel.status],this.ids,[e.preview.template.replace("{width}x{height}",au),a_(JSON.stringify(e.stream_type))+e.channel.display_name,e.channel.status,e.game,y+Ip(e.created_at)+b+", "+h+t_(e.viewers)+q,n_(e.video_height,e.average_fps,e.channel.language)])),By.coloumn_id++)}},gb),vb)).set_ThumbSize()}function bb(){(cb=Ny(cb=Ny({ids:Ay("Featured"),table:"stream_table_featured",screen:yl,base_url:"https://api.twitch.tv/kraken/streams/featured?limit="+lb,set_url:function(){this.url=this.base_url+"&offset="+this.offset+(ao()&&Di[kl.Users_Position].access_token?"&oauth_token="+Di[kl.Users_Position].access_token:"")},label_init:function(){kl.Main_CenterLablesVectorPos=2,Tu("top_bar_featured","icon_center_focus")},label_exit:function(){Lu("top_bar_featured","icon_center_focus")},concatenate:function(e){this.data=JSON.parse(e),this.data=this.data.featured,this.dataEnded=!0,this.loadDataSuccess(),By.loadingData=!1},addCell:function(e){e=e.stream,By.idObject[e.channel._id]||(By.itemsCount++,By.idObject[e.channel._id]=1,By.row.appendChild(jy(By.row_id,By.coloumn_id,[e.channel.name,e.channel._id,e.channel.status],this.ids,[e.preview.template.replace("{width}x{height}",au),a_(JSON.stringify(e.stream_type))+e.channel.display_name,e.channel.status,e.game,y+Ip(e.created_at)+b+", "+h+t_(e.viewers)+q,n_(e.video_height,e.average_fps,e.channel.language)])),By.coloumn_id++)}},gb),vb)).set_ThumbSize()}var wb={ThumbSize:32.65,ItemsLimit:Dl,HasSwitches:!0,TopRowCreated:!1,ItemsReloadLimit:Vl,ColoumnsCount:ql,addFocus:F_,cursor:null,period:["day","week","month","all"],img_404:gu,empty_str:function(){return B+U},key_play:function(){-1===this.posY?this.loadingData||(this.periodPos++,4<this.periodPos&&(this.periodPos=1),this.SetPeriod(),Fy()):V_(this.posY+"_"+this.posX,this.ids,nb)},concatenate:function(e){if(this.data){var t=JSON.parse(e);this.cursor=t._cursor,""===this.cursor&&(this.dataEnded=!0),this.data=this.data.concat(t.clips),By.loadingData=!1}else this.data=JSON.parse(e),this.cursor=this.data._cursor,""===this.cursor&&(this.dataEnded=!0),this.data=this.data.clips,this.loadDataSuccess(),By.loadingData=!1},addCell:function(e){By.idObject[e.tracking_id]||(By.itemsCount++,By.idObject[e.tracking_id]=1,By.row.appendChild(Xy(By.row_id,By.coloumn_id,By.ids,e.thumbnails.medium,e.broadcaster.display_name,[cn,p_(e.created_at)],[PI.parse(e.title),g,e.game],t_(e.views),"["+e.language.toUpperCase()+"]",e.duration,e.slug,e.broadcaster.name,e.broadcaster.logo.replace("150x150","300x300"),e.broadcaster.id,null!==e.vod?e.vod.id:null,null!==e.vod?e.vod.offset:null)),By.coloumn_id++)}};function kb(){(ab=Ny(ab=Ny({ids:Ay("Clip"),table:"stream_table_clip",screen:pl,periodPos:wf("Clip_periodPos",2),base_url:"https://api.twitch.tv/kraken/clips/top?limit="+lb,set_url:function(){this.url=this.base_url+"&period="+this.period[this.periodPos-1]+(this.cursor?"&cursor="+this.cursor:"")+(""!==Ol?"&language="+Ol:"")},SetPeriod:function(){Bu("top_bar_clip",U+h_(Al[this.periodPos-1])),bf("Clip_periodPos",this.periodPos)},label_init:function(){kl.Main_CenterLablesVectorPos=5,this.SetPeriod(),Tu("top_bar_clip","icon_center_focus"),Su("label_refresh","icon-refresh",t+$t)},label_exit:function(){f_(),Lu("top_bar_clip","icon_center_focus"),Su("label_refresh","icon-refresh",t+$t)}},gb),wb)).set_ThumbSize()}function Cb(){(ib=Ny(ib=Ny({ids:Ay("ChannelClip"),table:"stream_table_channel_clip",screen:ul,periodPos:wf("ChannelClip_periodPos",2),base_url:"https://api.twitch.tv/kraken/clips/top?channel=",set_url:function(){this.url=this.base_url+encodeURIComponent(kl.Main_selectedChannel)+"&limit="+lb+"&period="+this.period[this.periodPos-1]+(this.cursor?"&cursor="+this.cursor:"")},SetPeriod:function(){Bu("top_bar_game",U+Al[this.periodPos-1]),bf("ChannelClip_periodPos",this.periodPos)},label_init:function(){kl.Main_CenterLablesVectorPos=1,!kl.Search_isSearching&&kl.Main_selectedChannel_id&&Id(),kl.Main_selectedChannel!==this.lastselectedChannel&&(this.status=!1),m_(),this.SetPeriod(),Ou("top_bar_user",kl.Main_selectedChannelDisplayname),Su("label_side_panel","icon-arrow-circle-left",x),this.lastselectedChannel=kl.Main_selectedChannel},label_exit:f_},gb),wb)).set_ThumbSize()}function Mb(){(ob=Ny(ob=Ny({ids:Ay("AGameClip"),table:"stream_table_a_game_clip",screen:vl,periodPos:wf("AGameClip_periodPos",2),base_url:"https://api.twitch.tv/kraken/clips/top?game=",set_url:function(){this.url=this.base_url+encodeURIComponent(kl.Main_gameSelected)+"&limit="+lb+"&period="+this.period[this.periodPos-1]+(this.cursor?"&cursor="+this.cursor:"")+(""!==Ol?"&language="+Ol:"")},SetPeriod:function(){Bu("top_bar_game",w+h_(U+Al[this.periodPos-1]+": "+kl.Main_gameSelected)),bf("AGameClip_periodPos",this.periodPos)},label_init:function(){kl.Main_CenterLablesVectorPos=3,this.SetPeriod(),Tu("top_bar_game","icon_center_focus"),Su("label_side_panel","icon-arrow-circle-left",x),this.gameSelected!==kl.Main_gameSelected&&(this.status=!1),this.gameSelected=kl.Main_gameSelected},label_exit:function(){Lu("top_bar_game","icon_center_focus"),Bu("top_bar_game",f),Su("label_side_panel","icon-ellipsis",Dn)}},gb),wb)).set_ThumbSize()}var Eb={ThumbSize:19.35,ItemsLimit:Jl,ItemsReloadLimit:Xl,ColoumnsCount:zl,addFocus:H_,img_404:hu,empty_str:function(){return B+Z},concatenate:function(e){if(this.data){var t=JSON.parse(e);this.MaxOffset=t._total,this.data=this.data.concat(this.screen===ol?t.follows:t.top),this.offset=this.data.length,this.offset>this.MaxOffset&&(this.dataEnded=!0),By.loadingData=!1}else this.data=JSON.parse(e),this.MaxOffset=this.data._total,this.data=this.screen===ol?this.data.follows:this.data.top,this.offset=this.data.length,this.isLive?this.dataEnded=!0:this.offset>this.MaxOffset&&(this.dataEnded=!0),this.loadDataSuccess(),By.loadingData=!1},key_play:function(){kl.Main_gameSelected=document.getElementById(this.ids[5]+this.posY+"_"+this.posX).getAttribute(su),document.body.removeEventListener("keydown",nb),kl.Main_BeforeAgame=this.screen,kl.Main_Go=nl,kl.Main_BeforeAgameisSet=!0,xo=!1,Nl=0,document.body.removeEventListener("keydown",nb),Iu(this.ids[10]),c_(),j_(this.posY+"_"+this.posX,this.ids)},addCell:function(e){var t=this.isLive||this.screen===tl,n=t?e.game:e;By.idObject[n._id]||(By.itemsCount++,By.idObject[n._id]=1,By.row.appendChild(zy(By.row_id,By.coloumn_id,By.ids,n.box.template.replace("{width}x{height}",iu),n.name,t?t_(e.channels)+" "+S+h+t_(e.viewers)+q:"")),By.coloumn_id++)}};function Sb(){(sb=Ny(sb=Ny({ids:Ay("Game"),table:"stream_table_games",screen:tl,base_url:"https://api.twitch.tv/kraken/games/top?limit="+lb,set_url:function(){this.offset&&this.offset+lb>this.MaxOffset&&(this.dataEnded=!0),this.url=this.base_url+"&offset="+this.offset},label_init:function(){kl.Main_CenterLablesVectorPos=3,Tu("top_bar_game","icon_center_focus")},label_exit:function(){Lu("top_bar_game","icon_center_focus")}},gb),Eb)).set_ThumbSize()}function Ib(){(db=Ny(db=Ny({ids:Ay("UserGames"),table:"stream_table_user_games",screen:ol,isLive:Cf("user_Games_live",!0),OldUserName:"",base_url:"https://api.twitch.tv/api/users/",set_url:function(){this.offset&&this.offset+lb>this.MaxOffset&&(this.dataEnded=!0),this.url=this.base_url+encodeURIComponent(Di[kl.Users_Position].name)+"/follows/games",this.isLive?this.url+="/live?limit=750":this.url+="?limit="+lb+"&offset="+this.offset},key_refresh:function(){this.isLive=!this.isLive,Bu("top_bar_user",u+h_(Di[kl.Users_Position].name+" "+(this.isLive?Z:Yt))),Fy(),bf("user_Games_live",this.isLive?"true":"false"),EE&&OE()},label_init:function(){kl.Main_CenterLablesVectorPos=1,Su("label_refresh","icon-refresh",Kt+Z+"/"+Yt+":"+$t),Su("label_side_panel","icon-arrow-circle-left",x),Tu("top_bar_user","icon_center_focus"),this.OldUserName!==Di[kl.Users_Position].name&&(this.status=!1),this.OldUserName=Di[kl.Users_Position].name,Bu("top_bar_user",u+h_(Di[kl.Users_Position].name+" "+(this.isLive?Z:Yt)))},label_exit:function(){kl.Users_Position=0,Lu("top_bar_user","icon_center_focus"),Su("label_refresh","icon-refresh",t+$t),Ou("top_bar_user",u),Su("label_side_panel","icon-ellipsis",Dn)}},gb),Eb)).set_ThumbSize()}var xb=0,Pb=0,Tb=!1,Lb=0,Bb={},Ob=[],Gb=!1,Ab=0,Nb=5,Ub=3500,Rb=0,Fb=0,Hb=!1,Db=!1,qb="",Vb=!1,Jb=["sc_thumbdiv","sc_img","sc_infodiv","sc_displayname","sc_cell","scempty_","search_channel_scroll"];function zb(){kl.Main_CenterLablesVectorPos=1,kl.Main_Go=ml,kl.isLastSChannels=!0,kl.Search_isSearching=!0,qb!==kl.Search_data&&(Db=!1),m_(),Bu("top_bar_user",n+h_(S+" '"+kl.Search_data+"'")),document.body.addEventListener("keydown",ow,!1),Db?(k_(xb),xu(Jb[6]),aw(),l_()):jb()}function Xb(){f_(),document.body.removeEventListener("keydown",ow),Iu(Jb[6])}function jb(){v_("stream_table_search_channel"),Iu(Jb[6]),Gu(),Xu(),qb=kl.Search_data,Db=!1,Bb={},Lb=Fb=Rb=0,xb=Pb=0,Tb=!(_f=!(Vb=!(Ob=[]))),Du(),Wb(),Yb()}function Wb(){b_(),Gb=!0,Ab=0,Ub=3500}function Yb(){var e=Lb+Rb;e&&Fb-1<e&&(e=Fb-jl,Tb=!0),Sf("https://api.twitch.tv/kraken/search/channels?query="+encodeURIComponent(kl.Search_data)+"&limit="+jl+"&offset="+e,Ub,2,null,$b,Kb)}function Kb(){++Ab<Nb?(Ub+=500,Yb()):(Gb=!1,Lb?(Tb=!0,Qb()):(_f=!1,Au(),zu(L)))}function $b(e){var t=JSON.parse(e),n=t.channels.length;Fb=parseInt(t._total),n<jl&&(Tb=!0);var a=Lb;Hb=!(Lb+=n);var i=n/Wl;0<n%Wl&&i++;for(var o,s,d,r,c,l=0,u=document.getElementById("stream_table_search_channel"),_=0;_<i;_++){for(s=a/Wl+_,d=document.createElement("tr"),o=0;o<Wl&&l<n;o++,l++)c=(r=t.channels[l])._id,Bb[c]?o--:(Bb[c]=1,d.appendChild(Zb(s,s+"_"+o,[r.name,c,r.logo,r.display_name])));for(;o<Wl;o++)Tb&&!Vb&&(Vb=!0,Lb=s*Wl+o),d.appendChild(E_(Jb[5]+s+"_"+o)),Ob.push(Jb[5]+s+"_"+o);u.appendChild(d)}Qb()}function Zb(e,t,n){return e<4&&M_(n[2]),S_(t,Jb,n)}function Qb(){if(Db){if(y_(pu),0<Ob.length&&!Tb)return Wb(),void ew();qu(Pb,xb,Wl,Lb),Ob=[]}else Hb?zu(d):(Db=!0,y_(pu),aw(),l_()),xu(Jb[6]),_f=!1,Au();Gb=!1}function ew(){Ju(Ob.length);var e=Lb+Rb;e&&Fb-1<e&&(e=Fb-Kl,Tb=!0),Sf("https://api.twitch.tv/kraken/search/channels?query="+encodeURIComponent(kl.Search_data)+"&limit="+Kl+"&offset="+e,Ub,2,null,nw,tw)}function tw(){++Ab<Nb?(Ub+=500,ew()):(Tb=!0,Lb-=Ob.length,Ob=[],Qb())}function nw(e){var t,n,a=JSON.parse(e),i=a.channels.length,o=0,s=0,d=[];for(Fb=parseInt(a._total),i<Kl&&(Tb=!0);o<Ob.length&&s<i;o++,s++)n=(t=a.channels[s])._id,Bb[n]?o--:(Bb[n]=1,I_(Ob[o],[t.name,n,t.logo,t.display_name],Jb),d.push(o));for(o=d.length-1;-1<o;o--)Ob.splice(d[o],1);Rb+=s,Tb&&(Lb-=Ob.length,Ob=[]),Qb()}function aw(){R_(xb,Pb,Jb,Wl,Lb),Lb/Wl<xb+Yl&&!Tb&&!Gb&&(Wb(),Yb()),El&&iw()}function iw(){Lb&&j_(xb+"_"+Pb,Jb)}function ow(e){var t;if(!_f&&!U_())switch(N_(),e.keyCode){case Na:Qu()?Zu():Yu()?Wu():(iw(),mf(ow));break;case La:if(i_(xb,Pb-1,Jb[0]))iw(),Pb--,aw();else for(t=Wl-1;-1<t;t--)if(i_(xb-1,t,Jb[0])){iw(),xb--,Pb=t,aw();break}break;case Oa:i_(xb,Pb+1,Jb[0])?(iw(),Pb++,aw()):i_(xb+1,0,Jb[0])&&(iw(),xb++,Pb=0,aw());break;case Ba:for(t=0;t<Wl;t++)if(i_(xb-1,Pb-t,Jb[0])){iw(),xb--,Pb-=t,aw();break}break;case Ga:for(t=0;t<Wl;t++)if(i_(xb+1,Pb-t,Jb[0])){iw(),xb++,Pb-=t,aw();break}break;case Pa:case xa:case Ta:case Aa:kl.Main_selectedChannel=document.getElementById(Jb[4]+xb+"_"+Pb).getAttribute(su),kl.Main_selectedChannel_id=document.getElementById(Jb[4]+xb+"_"+Pb).getAttribute("data-id"),kl.Main_selectedChannelDisplayname=document.getElementById(Jb[3]+xb+"_"+Pb).textContent,document.body.removeEventListener("keydown",ow),kl.Main_BeforeChannel=ml,kl.Main_Go=cl,kl.Main_BeforeChannelisSet=!0,zs=Xa=!1,Iu(Jb[6]),r_()}}var sw=!1,dw=0,rw=0,cw=0,lw=0,uw=5,_w=3500,fw=0,mw=0,hw=!1,pw=!1,gw="",vw=["sgthumbdiv","sgimg","sginfodiv","sgdisplayname","sgviwers","sgcell","sgempty_","search_games_scroll"];function yw(){kl.Main_CenterLablesVectorPos=1,kl.Main_Go=dl,kl.Search_isSearching=!0,m_(),gw!==kl.Search_data&&(sw=!1),Bu("top_bar_user",n+h_(f+" '"+kl.Search_data+"'")),document.body.addEventListener("keydown",Tw,!1),sw?(k_(dw),xu(vw[7]),xw(),l_()):ww()}function bw(){kl.Search_isSearching||f_(),document.body.removeEventListener("keydown",Tw),kl.Games_return=!1,Iu(vw[7])}function ww(){v_("stream_table_search_game"),Iu(vw[7]),Gu(),Xu(),gw=kl.Search_data,pw=sw=!1,dw=rw=cw=mw=fw=0,Du(),kw(),Cw()}function kw(){b_(),_f=!0,lw=0,_w=3500}function Cw(){Sf("https://api.twitch.tv/kraken/search/games?query="+encodeURIComponent(kl.Search_data),_w,2,null,Ew,Mw)}function Mw(){++lw<uw?(_w+=500,Cw()):(_f=!1,cw?Iw():(Au(),zu(L)))}function Ew(e){var t=JSON.parse(e),n=0;null!==t.games&&(n=t.games.length);var a=cw;hw=!(cw+=n);var i=n/zl;0<n%zl&&i++;for(var o,s,d,r,c=0,l=document.getElementById("stream_table_search_game"),u=0;u<i;u++){for(s=a/zl+u,d=document.createElement("tr"),o=0;o<zl&&c<n;o++,c++)r=t.games[c],d.appendChild(Sw(s,s+"_"+o,[r.name,r.box.template.replace("{width}x{height}",iu),""]));for(;o<zl;o++)pw||(pw=!0,cw=s*zl+o),d.appendChild(E_(vw[6]+s+"_"+o));l.appendChild(d)}Iw()}function Sw(e,t,n){return e<2&&M_(n[1]),B_(t,vw,n)}function Iw(){sw||(hw?zu(d):(sw=!0,y_(gu),xw(),l_()),Au()),xu(vw[7]),_f=!1,qu(rw,dw,zl,cw)}function xw(){H_(dw,rw,vw,zl,cw),El&&Pw()}function Pw(){cw&&j_(dw+"_"+rw,vw)}function Tw(e){var t;if(!_f&&!U_())switch(N_(),e.keyCode){case Na:Qu()?Zu():Yu()?Wu():(Pw(),mf(Tw));break;case La:if(i_(dw,rw-1,vw[0]))Pw(),rw--,xw();else for(t=zl-1;-1<t;t--)if(i_(dw-1,t,vw[0])){Pw(),dw--,rw=t,xw();break}break;case Oa:i_(dw,rw+1,vw[0])?(Pw(),rw++,xw()):i_(dw+1,0,vw[0])&&(Pw(),dw++,rw=0,xw());break;case Ba:for(t=0;t<zl;t++)if(i_(dw-1,rw-t,vw[0])){Pw(),dw--,rw-=t,xw();break}break;case Ga:for(t=0;t<zl;t++)if(i_(dw+1,rw-t,vw[0])){Pw(),dw++,rw-=t,xw();break}break;case Pa:case xa:case Ta:case Aa:kl.gameSelectedOld=kl.Main_gameSelected,bw(),kl.Main_gameSelected=document.getElementById(vw[5]+dw+"_"+rw).getAttribute(su),document.body.removeEventListener("keydown",Tw),kl.Main_Go=nl,kl.Games_return=!0,r_()}}var Lw=0,Bw=0,Ow=!1;function Gw(){Xu(),Iu("label_refresh"),Su("label_side_panel","icon-arrow-circle-left",x),Ou("top_bar_user",n),document.getElementById("top_lables").style.marginLeft="14%",document.getElementById("top_bar_live").style.display="none",document.getElementById("top_bar_featured").style.display="none",document.getElementById("top_bar_game").style.display="none",document.getElementById("top_bar_vod").style.display="none",document.getElementById("top_bar_clip").style.display="none",qc.placeholder=k,Tu("top_bar_user","icon_center_focus"),xu("search_scroll"),Bw=Lw=0,Uw(),Fw()}function Aw(){Hw(!1),document.body.removeEventListener("keydown",Rw),Uw(),kl.Main_Go=kl.Main_BeforeSearch,document.getElementById("top_lables").style.marginLeft="18.5%",Ou("top_bar_user",u),Lu("top_bar_user","icon_center_focus"),Su("label_side_panel","icon-ellipsis",Dn),xu("label_refresh"),document.getElementById("top_bar_live").style.display="inline-block",document.getElementById("top_bar_featured").style.display="inline-block",document.getElementById("top_bar_game").style.display="inline-block",document.getElementById("top_bar_vod").style.display="inline-block",document.getElementById("top_bar_clip").style.display="inline-block",qc.value="",Iu("search_scroll")}function Nw(){Aw(),K_(function(){Bw?1===Bw?yw():2===Bw&&sk():zb()})}function Uw(){Lu("chanel_button","button_search_focused"),Lu("game_button","button_search_focused"),Lu("live_button","button_search_focused"),Lw&&(Bw?1===Bw?Tu("game_button","button_search_focused"):2===Bw&&Tu("live_button","button_search_focused"):Tu("chanel_button","button_search_focused"))}function Rw(e){if(!Ow)switch(e.keyCode){case Na:Qu()?Zu():Yu()?Wu():(Aw(),r_());break;case La:1===Lw&&(--Bw<0&&(Bw=2),Uw());break;case Oa:1===Lw&&(2<++Bw&&(Bw=0),Uw());break;case Ba:1===Lw&&(Lw=0,Uw(),Fw());break;case Ga:Lw?1===Lw&&(Lw=0,Uw(),Fw()):(Hw(!1),Lw=1,Uw());break;case Pa:case xa:case Ta:case Aa:Lw?""!==qc.value&&null!==qc.value?(kl.Search_data=qc.value,qc.value="",Nw()):(zu(s),window.setTimeout(function(){Xu()},1e3)):Fw()}}function Fw(){document.body.removeEventListener("keydown",Rw),document.body.addEventListener("keydown",qw,!1),qc.placeholder=k,qc.focus(),Ow=!0}function Hw(e){qc.blur(),Dw(),document.body.removeEventListener("keydown",qw),qc.placeholder=E+k,e&&document.body.addEventListener("keydown",Rw,!1),Ow=!1}function Dw(){if(null!==qc){var e=qc.cloneNode(!0);qc.parentNode.replaceChild(e,qc),qc=document.getElementById("search_input")}}function qw(e){switch(e.keyCode){case Na:Yu()?Wu():Qu()?Zu():(Aw(),r_());break;case Ha:qc.value="";break;case Ra:case Ga:Hw(!0),Lw=1,Uw();break;case Ua:qc.value=qc.value.slice(0,-1);break;case Fa:qc.value+=" "}}var Vw=0,Jw=0,zw=!1,Xw=0,jw={},Ww=[],Yw=!1,Kw=0,$w=5,Zw=3500,Qw=0,ek=0,tk=!1,nk=!1,ak=!1,ik="",ok=["sl_thumbdiv","sl_img","sl_infodiv","sl_displayname","sl_streamtitle","sl_streamgame","sl_viwers","sl_quality","sl_cell","slempty_","search_live_scroll"];function sk(){kl.Main_CenterLablesVectorPos=1,kl.Main_Go=rl,kl.Search_isSearching=!0,m_(),ik!==kl.Search_data&&(nk=!1),Bu("top_bar_user",n+h_(_+" '"+kl.Search_data+"'")),document.body.addEventListener("keydown",yk,!1),nk?(k_(Vw),xu(ok[10]),gk(),l_()):rk()}function dk(){f_(),document.body.removeEventListener("keydown",yk),Iu(ok[10])}function rk(){v_("stream_table_search_live"),Iu(ok[10]),Gu(),Xu(),ik=kl.Search_data,nk=!1,ek=Qw=0,jw={},Vw=Jw=Xw=0,zw=!(_f=!(ak=!(Ww=[]))),Du(),ck(),lk()}function ck(){b_(),Yw=!0,Kw=0,Zw=3500}function lk(){var e=Xw+Qw;e&&ek-1<e&&(e=ek-Dl,zw=!0),Sf("https://api.twitch.tv/kraken/search/streams?query="+encodeURIComponent(kl.Search_data)+"&limit="+Dl+"&offset="+e,Zw,2,null,_k,uk)}function uk(){++Kw<$w?(Zw+=500,lk()):(Yw=!1,Xw?(zw=!0,fk()):(_f=!1,Au(),zu(L)))}function _k(e){var t=JSON.parse(e),n=t.streams.length;ek=parseInt(t._total),n<Dl&&(zw=!0);var a=Xw;tk=!(Xw+=n);var i=n/ql;0<n%ql&&i++;for(var o,s,d,r,c,l=0,u=document.getElementById("stream_table_search_live"),_=0;_<i;_++){for(s=a/ql+_,d=document.createElement("tr"),o=0;o<ql&&l<n;o++,l++)c=(r=t.streams[l]).channel._id,jw[c]?o--:(jw[c]=1,d.appendChild(P_(s,s+"_"+o,[r.channel.name,c],ok,[r.preview.template.replace("{width}x{height}",au),a_(JSON.stringify(r.stream_type))+r.channel.display_name,r.channel.status,r.game,y+Ip(r.created_at)+b+", "+h+t_(r.viewers)+q,n_(r.video_height,r.average_fps,r.channel.language)])));for(;o<ql;o++)zw&&!ak&&(ak=!0,Xw=s*ql+o),d.appendChild(E_(ok[9]+s+"_"+o)),Ww.push(ok[9]+s+"_"+o);u.appendChild(d)}fk()}function fk(){if(nk){if(y_(gu),0<Ww.length&&!zw)return ck(),void mk();qu(Jw,Vw,ql,Xw),Ww=[]}else tk?zu(d):(nk=!0,y_(gu),gk(),l_()),xu(ok[10]),_f=!1,Au();Yw=!1}function mk(){Ju(Ww.length);var e=Xw+Qw;e&&ek-1<e&&(e=ek-Kl,zw=!0),Sf("https://api.twitch.tv/kraken/search/streams?query="+encodeURIComponent(kl.Search_data)+"&limit="+Kl+"&offset="+e,Zw,2,null,pk,hk)}function hk(){++Kw<$w?(Zw+=500,mk()):(zw=!0,Xw-=Ww.length,Ww=[],fk())}function pk(e){var t,n,a=JSON.parse(e),i=a.streams.length,o=0,s=0,d=[];for(ek=parseInt(a._total),i<Kl&&(zw=!0);o<Ww.length&&s<i;o++,s++)n=(t=a.streams[s]).channel._id,jw[n]?o--:(jw[n]=1,T_(Ww[o],[t.channel.name,n],[t.preview.template.replace("{width}x{height}",au),a_(JSON.stringify(t.stream_type))+t.channel.display_name,t.channel.status,t.game,y+Ip(t.created_at)+b+", "+h+t_(t.viewers)+q,n_(t.video_height,t.average_fps,t.channel.language)],ok),d.push(o));for(o=d.length-1;-1<o;o--)Ww.splice(d[o],1);Qw+=s,zw&&(Xw-=Ww.length,Ww=[]),fk()}function gk(){F_(Vw,Jw,ok,ql,Xw),Xw/ql<Vw+Vl&&!zw&&!Yw&&(ck(),lk()),El&&vk()}function vk(){Xw&&j_(Vw+"_"+Jw,ok)}function yk(e){var t;if(!_f&&!U_())switch(N_(),e.keyCode){case Na:Qu()?Zu():Yu()?Wu():(vk(),mf(yk));break;case La:if(i_(Vw,Jw-1,ok[0]))vk(),Jw--,gk();else for(t=ql-1;-1<t;t--)if(i_(Vw-1,t,ok[0])){vk(),Vw--,Jw=t,gk();break}break;case Oa:i_(Vw,Jw+1,ok[0])?(vk(),Jw++,gk()):i_(Vw+1,0,ok[0])&&(vk(),Vw++,Jw=0,gk());break;case Ba:for(t=0;t<ql;t++)if(i_(Vw-1,Jw-t,ok[0])){vk(),Vw--,Jw-=t,gk();break}break;case Ga:for(t=0;t<ql;t++)if(i_(Vw+1,Jw-t,ok[0])){vk(),Vw++,Jw-=t,gk();break}break;case Pa:case xa:case Ta:case Aa:D_(Vw+"_"+Jw,ok,yk)}}var bk=0,wk={restor_playback:{values:["off","on"],defaultValue:2},chat_font_size:{values:["60%","80%","100%","120%","140%"],defaultValue:3},chat_brightness:{values:["0%","5%","10%","15%","20%","25%","30%","35%","40%","45%","50%","55%","60%","65%","70%","75%","80%","85%","90%","95%","100%"],defaultValue:11},force_disable_chat:{values:["off","on"],defaultValue:2},buffer_live:{values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],defaultValue:6},buffer_vod:{values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],defaultValue:6},buffer_clip:{values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],defaultValue:3},videos_animation:{values:["off","on"],defaultValue:2},clock_offset:{values:kk(),defaultValue:49},content_lang:{values:["All","Dansk [DA]","Deutsch [DE]","English [EN][EN-GB]","English - USA [EN]","English - UK [EN-GB]","Español [ES][ES-MX]","Español - España [ES]","Español - Latinoamérica [ES-MX]","Français [FR]","Italiano [IT]","Magyar [HU]","Nederlands [NL]","Norsk [NO]","Polski [PL]","Português [PT][PT-BR]","Português -Portugal [PT]","Português - Brasil [PT-BR]","Slovenčina [SK]","Suomi [FI]","Svenska [SV]","Tiếng Việt [VI]","Türkçe [TR]","Čeština [CS]","Ελληνικά [EL]","Български [BG]","Русский [RU]","ภาษาไทย [TH]","中文 [ZH-ALL]","中文 简体 [ZH-CN]","中文 繁體 [ZH-TW]","日本語 [JA]","한국어 [KO]","Română [RO]"],set_values:["","da","de","en,en-gb","en","en-gb","es,es-mx","es","es-mx","fr","it","hu","nl","no","pl","pt,pt-br","pt","pt-br","sk","fi","sv","vi","tr","cs","el","bg","ru","th","zh-cn,zh-tw","zh-cn","zh-tw","ja","ko","ro"],defaultValue:1}};function kk(){for(var e=[],t=43200,n=0;n<48;n++)e.push("-"+Ep(t)),t-=900;for(e.push(Ep(0)),t=900,n=0;n<48;n++)e.push(Ep(t)),t+=900;return e}var Ck=[],Mk=0;function Ek(){d_(),document.body.addEventListener("keydown",zk,!1),Su("label_refresh","icon-arrow-circle-left",x),Ou("top_bar_user",a),document.getElementById("top_lables").style.marginLeft="14%",document.getElementById("top_bar_live").style.display="none",document.getElementById("top_bar_featured").style.display="none",document.getElementById("top_bar_game").style.display="none",document.getElementById("top_bar_vod").style.display="none",document.getElementById("top_bar_clip").style.display="none",Tu("top_bar_user","icon_center_focus"),xu("settings_scroll"),Rk(bk=0)}function Sk(){document.body.removeEventListener("keydown",zk),Fk(),Ou("top_bar_user",u),document.getElementById("top_lables").style.marginLeft="18.5%",document.getElementById("top_bar_live").style.display="inline-block",document.getElementById("top_bar_featured").style.display="inline-block",document.getElementById("top_bar_game").style.display="inline-block",document.getElementById("top_bar_vod").style.display="inline-block",document.getElementById("top_bar_clip").style.display="inline-block",Lu("top_bar_user","icon_center_focus"),Su("label_refresh","icon-refresh",t+$t),Iu("settings_scroll")}function Ik(){var e,t="";t+=xk("general",kn),e="content_lang",Ck.push(e),t+=Pk(e,$n),e="clock_offset",Ck.push(e),t+=Pk(e,Yn),e="restor_playback",Ck.push(e),wk[e].values=[Gn,On],t+=Tk(e,An,Nn),e="videos_animation",Ck.push(e),wk[e].values=[Gn,On],t+=Pk(e,Hn),t+=xk("play",pn),e="chat_font_size",Ck.push(e),t+=Tk(e,Un,Rn),e="chat_brightness",Ck.push(e),t+=Pk(e,sa),e="force_disable_chat",Ck.push(e),wk[e].values=[Xt,B],t+=Tk(e,ia,oa),t+='<div id="setting_title_buffers" class="settings_title">'+gn+'</div><div id="setting_title_buffers_summary" class="settings_summary">'+vn+"</div>",e="buffer_live",Ck.push(e),t+=Pk(e,yn),e="buffer_vod",Ck.push(e),t+=Pk(e,bn),e="buffer_clip",Ck.push(e),Bu("settings_main",t+=Pk(e,wn)),Mk=Ck.length}function xk(e,t){return'<div id="setting_title_'+e+'" class="settings_section">'+t+"</div>"}function Pk(e,t){return'<div id="'+e+'_div" class="settings_div"><div id="'+e+'_name" class="settings_name">'+t+'</div><div class="settings_arraw_div"><div id="'+e+'arrow_left" class="left"></div></div><div id="'+e+'" class="strokedextramini settings_value">'+Gk(e)+'</div><div class="settings_arraw_div"><div id="'+e+'arrow_right" class="right"></div></div></div>'}function Tk(e,t,n){return'<div id="'+e+'_div" class="settings_div"><div id="'+e+'_name" class="settings_name">'+t+'<div id="'+e+'_summary" class="settings_summary" style="font-size: 65%;">'+n+'</div></div><div class="settings_arraw_div"><div id="'+e+'arrow_left" class="left"></div></div><div id="'+e+'" class="strokedextramini settings_value">'+Gk(e)+'</div><div class="settings_arraw_div"><div id="'+e+'arrow_right" class="right"></div></div></div>'}function Lk(e,t,n){Bu(e+"_name",t+'<div id="'+e+'_summary" class="settings_summary" style="font-size: 65%;">'+n+"</div>")}function Bk(){var e="";for(e in Ou("setting_title_general",kn),Ou((e="clock_offset")+"_name",Yn),Ou((e="content_lang")+"_name",$n),wk[e].values[0]=Zn,Ou(e,Gk(e)),Ou("setting_title_play",pn),Ou("setting_title_buffers",gn),Ou("setting_title_buffers_summary",vn),Ou((e="buffer_live")+"_name",yn),Ou((e="buffer_vod")+"_name",bn),Ou((e="buffer_clip")+"_name",wn),Lk(e="restor_playback",An,Nn),wk[e].values=[Gn,On],Lk(e="chat_font_size",Un,Rn),Lk(e="force_disable_chat",ia,oa),wk[e].values=[Gn,On],Ou((e="videos_animation")+"_name",Hn),wk[e].values=[Gn,On],Ou((e="chat_brightness")+"_name",sa),wk)wk.hasOwnProperty(e)&&Ou(e,Gk(e))}function Ok(){for(var e in wk)wk[e].defaultValue=wf(e,wk[e].defaultValue),wk[e].defaultValue-=1;Vk(0),Jk(),Lm=(.05*Nk("chat_brightness")).toFixed(2),$S=Nk("videos_animation"),Ol=Ak("content_lang"),kl.Play_ChatForceDisable=Nk("force_disable_chat")}function Gk(e){return wk[e].values[Nk(e)]}function Ak(e){return wk[e].set_values[Nk(e)]}function Nk(e){return wk[e].defaultValue}function Uk(e){return wk[e].values.length-1}function Rk(e){var t=Ck[bk];Tu(t,"settings_value_focus"),Tu(t+"_div","settings_div_focus"),Dk(e)}function Fk(){var e=Ck[bk];document.getElementById(e+"arrow_left").style.opacity="0",document.getElementById(e+"arrow_right").style.opacity="0",Lu(e,"settings_value_focus"),Lu(e+"_div","settings_div_focus")}function Hk(e){var t=Ck[e];bf(t,Nk(t)+1),Ou(t,Gk(t)),Dk(e),qk(e)}function Dk(e){var t=Ck[e],n=Nk(t),a=Uk(t);0<n&&n<a?(document.getElementById(t+"arrow_left").style.opacity="1",document.getElementById(t+"arrow_right").style.opacity="1"):n===a?(document.getElementById(t+"arrow_left").style.opacity="1",document.getElementById(t+"arrow_right").style.opacity="0.2"):(document.getElementById(t+"arrow_left").style.opacity="0.2",document.getElementById(t+"arrow_right").style.opacity="1")}function qk(e){"content_lang"===(e=Ck[e])?Ol=Ak("content_lang"):"videos_animation"===e?$S=Nk("videos_animation"):"buffer_live"===e?Vk(1):"buffer_vod"===e?Vk(2):"buffer_clip"===e?Vk(3):"chat_brightness"===e?(Lm=(.05*Nk("chat_brightness")).toFixed(2),sg(!1)):"force_disable_chat"===e?kl.Play_ChatForceDisable=Nk("force_disable_chat"):"chat_font_size"===e?jh():"clock_offset"===e&&(Jk(),Q_())}function Vk(e){try{e?1===e?(Hm=1e3*Gk("buffer_live"),_u&&Android.SetBuffer(1,Hm)):2===e?(ov=1e3*Gk("buffer_vod"),_u&&Android.SetBuffer(2,ov)):3===e&&(Kf=1e3*Gk("buffer_clip"),_u&&Android.SetBuffer(3,Kf)):(Hm=1e3*Gk("buffer_live"),ov=1e3*Gk("buffer_vod"),Kf=1e3*Gk("buffer_clip"),_u&&(Android.SetBuffer(1,Hm),Android.SetBuffer(2,ov),Android.SetBuffer(3,Kf)))}catch(e){}}function Jk(){var e=Nk("clock_offset");uu=e<48?-9e5*(48-e):9e5*(e-48)}function zk(e){var t;switch(e.keyCode){case Na:Yu()?Wu():Qu()?Zu():(Sk(),r_());break;case La:0<Nk(t=Ck[bk])&&(wk[t].defaultValue-=1,Hk(bk));break;case Oa:Nk(t=Ck[bk])<Uk(t)&&(wk[t].defaultValue+=1,Hk(bk));break;case Ba:0<bk&&(Fk(),Rk(--bk));break;case Ga:bk<Mk-1&&(Fk(),Rk(++bk))}}var Xk=0,jk=0,Wk=!1,Yk=0,Kk=!1,$k=0,Zk=5,Qk=3500,eC=[],tC=0,nC=!1,aC=!1,iC="",oC=!1,sC=["uc_thumbdiv","uc_img","uc_infodiv","uc_displayname","uc_cell","ucempty_","user_channels_scroll"];function dC(){kl.Main_CenterLablesVectorPos=1,kl.Main_Go=fl,kl.isLastSChannels=!1,Su("label_side_panel","icon-arrow-circle-left",x),Tu("top_bar_user","icon_center_focus"),Bu("top_bar_user",u+h_(Di[kl.Users_Position].name+Q)),document.body.addEventListener("keydown",yC,!1),iC!==Di[kl.Users_Position].name&&(aC=!1),aC?(k_(Xk),xu(sC[6]),gC(),l_()):cC()}function rC(){kl.Users_Position=0,Lu("top_bar_user","icon_center_focus"),document.body.removeEventListener("keydown",yC),Ou("top_bar_user",u),Su("label_side_panel","icon-ellipsis",Dn),Iu(sC[6])}function cC(){v_("stream_table_user_channels"),Iu(sC[6]),Gu(),Xu(),iC=Di[kl.Users_Position].name,Xk=jk=Yk=tC=0,oC=Wk=aC=!1,_f=!0,Du(),eC=[],lC(),uC()}function lC(){b_(),Kk=!0,$k=0,Qk=3500}function uC(){Sf("https://api.twitch.tv/kraken/users/"+encodeURIComponent(Di[kl.Users_Position].id)+"/follows/channels?limit=100&offset="+tC+"&sortby=created_at&",Qk,2,null,fC,_C)}function _C(){++$k<Zk?(Qk+=500,uC()):(Kk=!1,Yk?(Wk=!0,pC()):(_f=!1,Au(),zu(L)))}function fC(e){var t=JSON.parse(e).follows,n=t.length;if(n){for(var a="",i=0;i<n;i++)a=t[i].channel.name+","+t[i].channel._id+","+t[i].channel.logo+","+t[i].channel.display_name,-1===eC.indexOf(a)&&eC.push(a);tC+=n,lC(),uC()}else eC.sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}),mC()}function mC(){var e=jl,t=Yk,n=eC.length-t;n<e&&(e=n),e<jl&&(Wk=!0),nC=!(Yk+=e);var a=e/Wl;0<e%Wl&&a++;for(var i,o,s,d=t,r=document.getElementById("stream_table_user_channels"),c=0;c<a;c++){for(o=t/Wl+c,s=document.createElement("tr"),i=0;i<Wl&&d<eC.length;i++,d++)s.appendChild(hC(o,o+"_"+i,eC[d].split(",")));for(;i<Wl;i++)Wk&&!oC&&(oC=!0,Yk=o*Wl+i),s.appendChild(E_(sC[5]+o+"_"+i));r.appendChild(s)}pC()}function hC(e,t,n){return e<4&&M_(n[2]),S_(t,sC,n)}function pC(){aC?y_(pu):(nC?zu(B+Q):(aC=!0,y_(pu),gC(),l_()),xu(sC[6]),_f=!1,Au()),Kk=!1,qu(jk,Xk,Wl,Yk)}function gC(){R_(Xk,jk,sC,Wl,Yk),Yk/Wl<Xk+Yl&&!Wk&&!Kk&&(lC(),uC()),El&&vC()}function vC(){Yk&&j_(Xk+"_"+jk,sC)}function yC(e){var t;if(!_f&&!U_())switch(N_(),e.keyCode){case Na:Qu()?Zu():Yu()?Wu():(vC(),mf(yC));break;case La:if(i_(Xk,jk-1,sC[0]))vC(),jk--,gC();else for(t=Wl-1;-1<t;t--)if(i_(Xk-1,t,sC[0])){vC(),Xk--,jk=t,gC();break}break;case Oa:i_(Xk,jk+1,sC[0])?(vC(),jk++,gC()):i_(Xk+1,0,sC[0])&&(vC(),Xk++,jk=0,gC());break;case Ba:for(t=0;t<Wl;t++)if(i_(Xk-1,jk-t,sC[0])){vC(),Xk--,jk-=t,gC();break}break;case Ga:for(t=0;t<Wl;t++)if(i_(Xk+1,jk-t,sC[0])){vC(),Xk++,jk-=t,gC();break}break;case Pa:case xa:case Ta:case Aa:kl.Main_selectedChannel=document.getElementById(sC[4]+Xk+"_"+jk).getAttribute(su),kl.Main_selectedChannel_id=document.getElementById(sC[4]+Xk+"_"+jk).getAttribute("data-id"),kl.Main_selectedChannelDisplayname=document.getElementById(sC[3]+Xk+"_"+jk).textContent,kl.Main_selectedChannelLogo=document.getElementById(sC[1]+Xk+"_"+jk).src,document.body.removeEventListener("keydown",yC),kl.Main_BeforeChannel=fl,kl.Main_Go=cl,kl.Main_BeforeChannelisSet=!0,zs=Xa=!0,Iu(sC[6]),r_()}}var bC=0,wC=0,kC=!1,CC=0,MC={},EC=[],SC=!1,IC=0,xC=5,PC=3500,TC=0,LC=0,BC=!1,OC=["uh_thumbdiv","uh_img","uh_infodiv","uh_displayname","uh_hosttitle","uh_hostgame","uh_viwers","uh_quality","uh_cell","uhempty_","user_host_scroll"],GC=!1,AC="",NC=!1;function UC(){kl.Main_CenterLablesVectorPos=1,kl.Main_Go=il,Su("label_side_panel","icon-arrow-circle-left",x),Tu("top_bar_user","icon_center_focus"),Bu("top_bar_user",u+h_(Di[kl.Users_Position].name+$)),document.body.addEventListener("keydown",KC,!1),AC!==Di[kl.Users_Position].name&&(GC=!1),GC?(k_(bC),xu(OC[10]),WC(),l_()):FC()}function RC(){kl.Users_Position=0,Lu("top_bar_user","icon_center_focus"),document.body.removeEventListener("keydown",KC),Ou("top_bar_user",u),Su("label_side_panel","icon-ellipsis",Dn),Iu(OC[10])}function FC(){v_("stream_table_user_host"),Iu(OC[10]),Gu(),Xu(),AC=Di[kl.Users_Position].name,GC=!1,MC={},CC=LC=TC=0,bC=wC=0,kC=!(_f=!(NC=!(EC=[]))),Du(),HC(),DC()}function HC(){b_(),SC=!0,IC=0,PC=3500}function DC(){var e=CC+TC;e&&LC-1<e&&(e=LC-Dl,kC=!0),Sf("https://api.twitch.tv/api/users/"+encodeURIComponent(Di[kl.Users_Position].name)+"/followed/hosting?limit="+Dl+"&offset="+e,PC,2,null,VC,qC)}function qC(){++IC<xC?(PC+=500,DC()):(SC=!1,CC?(kC=!0,JC()):(_f=!1,Au(),zu(L)))}function VC(e){var t=JSON.parse(e),n=t.hosts.length;LC=parseInt(t._total),n<Dl&&(kC=!0);var a=CC;BC=!(CC+=n);var i=n/ql;0<n%ql&&i++;for(var o,s,d,r,c,l=0,u=document.getElementById("stream_table_user_host"),_=0;_<i;_++){for(s=a/ql+_,d=document.createElement("tr"),o=0;o<ql&&l<n;o++,l++)c=(r=t.hosts[l]).target._id+""+r._id,MC[c]?o--:(MC[c]=1,d.appendChild(P_(s,s+"_"+o,[r.target.channel.name,r.target._id],OC,[r.target.preview_urls.template.replace("{width}x{height}",au),r.display_name+ae+r.target.channel.display_name,r.target.title,r.target.meta_game,h.charAt(1).toUpperCase()+h.slice(2)+t_(r.target.viewers)+q,""])));for(;o<ql;o++)kC&&!NC&&(NC=!0,CC=s*ql+o),d.appendChild(E_(OC[9]+s+"_"+o)),EC.push(OC[9]+s+"_"+o);u.appendChild(d)}JC()}function JC(){if(GC){if(y_(gu),0<EC.length&&!kC)return HC(),void zC();qu(wC,bC,ql,CC),EC=[]}else BC?zu(B+$):(GC=!0,WC(),y_(gu),l_()),xu(OC[10]),_f=!1,Au();SC=!1}function zC(){Ju(EC.length);var e=CC+TC;e&&LC-1<e&&(e=LC-Kl,kC=!0),Sf("https://api.twitch.tv/api/users/"+encodeURIComponent(Di[kl.Users_Position].name)+"/followed/hosting?limit="+Kl+"&offset="+e,PC,2,null,jC,XC)}function XC(){++IC<xC?(PC+=500,zC()):(kC=!0,CC-=EC.length,EC=[],JC())}function jC(e){var t,n,a=JSON.parse(e),i=a.streams.length,o=0,s=0,d=[];for(LC=parseInt(a._total),i<Kl&&(kC=!0);o<EC.length&&s<i;o++,s++)n=(t=a.hosts[s]).target._id+""+t._id,MC[n]?o--:(MC[n]=1,T_(EC[o],[t.target.channel.name,t.target._id],[t.target.preview_urls.template.replace("{width}x{height}",au),t.display_name+ae+t.target.channel.display_name,t.target.title,t.target.meta_game,h.charAt(1).toUpperCase()+h.slice(2)+t_(t.target.viewers)+q,""],OC),d.push(o));for(o=d.length-1;-1<o;o--)EC.splice(d[o],1);TC+=s,kC&&(CC-=EC.length,EC=[]),JC()}function WC(){F_(bC,wC,OC,ql,CC),CC/ql<bC+Vl&&!kC&&!SC&&(HC(),DC()),El&&YC()}function YC(){CC&&j_(bC+"_"+wC,OC)}function KC(e){var t;if(!_f&&!U_())switch(N_(),e.keyCode){case Na:Qu()?Zu():Yu()?Wu():(YC(),mf(KC));break;case La:if(i_(bC,wC-1,OC[0]))YC(),wC--,WC();else for(t=ql-1;-1<t;t--)if(i_(bC-1,t,OC[0])){YC(),bC--,wC=t,WC();break}break;case Oa:i_(bC,wC+1,OC[0])?(YC(),wC++,WC()):i_(bC+1,0,OC[0])&&(YC(),bC++,wC=0,WC());break;case Ba:for(t=0;t<ql;t++)if(i_(bC-1,wC-t,OC[0])){YC(),bC--,wC-=t,WC();break}break;case Ga:for(t=0;t<ql;t++)if(i_(bC+1,wC-t,OC[0])){YC(),bC++,wC-=t,WC();break}break;case Pa:case xa:case Ta:case Aa:D_(bC+"_"+wC,OC,KC)}}var $C,ZC=!1,QC=0,eM=3500,tM=0,nM=5,aM=0,iM=!1,oM="",sM=0,dM={},rM=!1,cM=[],lM=null,uM=["ulf_thumbdiv","ulf_img","ulf_infodiv","ulf_displayname","ulf_streamtitle","ulf_streamgame","ulf_viwers","ulf_quality","ulf_cell","ulempty_","user_live_scroll"];function _M(){ao()&&(xM(),rM?AM(Fm,uM[0])&&(lM=JSON.parse(document.getElementById(uM[8]+Fm).getAttribute(su))[0]):lM=null,v_("user_feed_scroll"),rM=!1,document.getElementById("user_feed_scroll").style.left="2.5px",document.getElementById("user_feed").style.bottom="0.1%",xu("dialog_loading_feed"),oM="",sM=aM=tM=0,Fm=0,dM={},cM=[],K_(function(){hM(),pM()}))}function fM(e){for(var t,n=0;n<cM.length;n++)null!==(t=document.getElementById(cM[n].id))&&yu(t,cM[n].src+fu,e)}function mM(e,t){cM.push({id:e,src:t})}function hM(){ZC=!0,QC=0,eM=3500}function pM(){Sf("https://api.twitch.tv/kraken/users/"+encodeURIComponent(Di[kl.Users_Position].id)+"/follows/channels?limit=100&offset="+tM+"&sortby=created_at",eM,2,null,vM,gM)}function gM(){++QC<nM?(eM+=500,pM()):(ZC=!1,aM?(iM=!0,kM()):(Iu("dialog_loading_feed"),MM()&&(Np(L),window.setTimeout(function(){Up()},2e3))))}function vM(e){var t=JSON.parse(e).follows,n=t.length;if(n){for(var a="",i=0;i<n;i++)a=t[i].channel._id+",",-1===oM.indexOf(a)&&(oM+=a);tM+=n,hM(),pM()}else oM=oM.slice(0,-1),hM(),K_(yM)}function yM(){Sf("https://api.twitch.tv/kraken/streams/?channel="+encodeURIComponent(oM)+"&limit=100&offset=0&stream_type=all",eM,2,null,wM,bM)}function bM(){++QC<nM?(eM+=500,yM()):(ZC=!1,Iu("dialog_loading_feed"),MM()&&(Np(L),window.setTimeout(function(){Up()},2e3)))}function wM(e){var t=JSON.parse(e),n=t.streams.length;n<Dl&&(iM=!0),aM+=n;for(var a,i,o=document.getElementById("user_feed_scroll"),s=0;s<n;s++)i=(a=t.streams[s]).channel._id,dM[i]||(dM[i]=1,null!==lM&&lM===a.channel.name&&(Fm=s),o.appendChild(CM(s,[a.channel.name,i],uM,[a.preview.template.replace("{width}x{height}",au),a_(JSON.stringify(a.stream_type))+a.channel.display_name,a.channel.status,a.game,y+Ip(a.created_at)+b+", "+h+t_(a.viewers)+q,n_(a.video_height,a.average_fps,a.channel.language)])));kM()}function kM(){rM=!(ZC=!1),fM(gu),K_(function(){Iu("dialog_loading_feed"),LM()})}function CM(e,t,n,a){return mM(n[1]+e,a[0]),(Ll=document.createElement("div")).setAttribute("id",n[8]+e),Ll.setAttribute(su,JSON.stringify(t)),Ll.className="user_feed_thumb",Ll.innerHTML='<div id="'+n[0]+e+'" class="stream_thumbnail_clip" ><div><img id="'+n[1]+e+'" class="stream_img"></div><div id="'+n[2]+e+'" class="stream_text2"><div id="'+n[3]+e+'" class="stream_channel" style="width: 66%; display: inline-block;">'+a[1]+'</div><div id="'+n[5]+e+'"class="stream_info">'+g+a[3]+"</div></div></div>",Ll}function MM(){return Pu("user_feed")}function EM(){var e=ao();e&&(Rm!==Di[kl.Users_Position].name&&(rM=!1),Rm=Di[kl.Users_Position].name),e&&AM(0,uM[0])||(rM=!1),rM||ZC||_M(),e&&(document.getElementById("user_feed").style.bottom="0.1%",xu("user_feed"),LM())}function SM(){Iu("user_feed")}function IM(){xM(),PM()}function xM(){window.clearTimeout($C)}function PM(){MM()&&($C=window.setTimeout(SM,5500))}function TM(){xM(),ZC?window.setTimeout(function(){ZC=!1},15e3):_M()}function LM(){IM(),AM(Fm,uM[0])&&(Tu(uM[0]+Fm,"feed_thumbnail_focused"),MM()?OM():Pu("scene2")&&GM())}function BM(){return Fm<3?2.5:AM(Fm+2,uM[0])?-1*document.getElementById(uM[8]+(Fm-2)).offsetLeft:AM(Fm+1,uM[0])?-1*document.getElementById(uM[8]+(Fm-3)).offsetLeft:-1*document.getElementById(uM[8]+(Fm-(3<Fm?4:3))).offsetLeft}function OM(){var e=BM();e&&(document.getElementById("user_feed_scroll").style.left=e+"px")}function GM(){document.getElementById("user_feed").style.bottom="-1000%",xu("user_feed");var e=OM();e&&(document.getElementById("user_feed_scroll").style.left=e+"px"),document.getElementById("user_feed").style.bottom="0.1%",Iu("user_feed")}function AM(e,t){return null!==document.getElementById(t+e)}function NM(){AM(Fm,uM[0])&&Lu(uM[0]+Fm,"feed_thumbnail_focused")}var UM=0,RM=0,FM=!1,HM=0,DM={},qM=[],VM=!1,JM=0,zM=5,XM=3500,jM=0,WM=0,YM=0,KM=!1,$M=["ul_thumbdiv","ul_img","ul_infodiv","ul_displayname","ul_streamtitle","ul_streamgame","ul_viwers","ul_quality","ul_cell","ulempty_","user_live_scroll"],ZM=!1,QM="",eE="",tE=!1;function nE(){kl.Main_CenterLablesVectorPos=1,kl.Main_Go=al,Su("label_side_panel","icon-arrow-circle-left",x),Tu("top_bar_user","icon_center_focus"),Bu("top_bar_user",u+h_(Di[kl.Users_Position].name+K)),document.body.addEventListener("keydown",vE,!1),eE!==Di[kl.Users_Position].name&&(ZM=!1),ZM?(k_(UM),xu($M[10]),pE(),l_()):iE()}function aE(){kl.Users_Position=0,Lu("top_bar_user","icon_center_focus"),document.body.removeEventListener("keydown",vE),Ou("top_bar_user",u),Su("label_side_panel","icon-ellipsis",Dn),Iu($M[10])}function iE(){v_("stream_table_user_live"),Iu($M[10]),Gu(),Xu(),ZM=!1,eE=Di[kl.Users_Position].name,WM=jM=YM=0,DM={},UM=RM=HM=0,FM=!(_f=!(tE=!(qM=[]))),QM="",Du(),oE(),sE()}function oE(){b_(),VM=!0,JM=0,XM=3500}function sE(){var e,t="https://api.twitch.tv/kraken/users/"+encodeURIComponent(Di[kl.Users_Position].id)+"/follows/channels?limit=100&offset="+YM+"&sortby=created_at";if(_u){if(!(e=Android.mreadUrl(t,XM,2,null)))return void dE();200===(e=JSON.parse(e)).status?rE(e.responseText):dE()}else(e=new XMLHttpRequest).open("GET",t,!0),e.timeout=XM,e.setRequestHeader(Ql,nu),e.setRequestHeader(Zl,$l),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return void rE(e.responseText);dE()}},e.send(null)}function dE(){++JM<zM?(XM+=500,sE()):(VM=!1,HM?(FM=!0,_E()):(_f=!1,Au(),zu(L)))}function rE(e){var t=JSON.parse(e).follows,n=t.length;if(n){for(var a="",i=0;i<n;i++)a=t[i].channel._id+",",-1===QM.indexOf(a)&&(QM+=a);YM+=n,oE(),sE()}else QM=QM.slice(0,-1),oE(),cE()}function cE(){var e=HM+jM;e&&WM-1<e&&(e=WM-Dl,FM=!0);var t,n="https://api.twitch.tv/kraken/streams/?channel="+encodeURIComponent(QM)+"&limit="+Dl+"&offset="+e+"&stream_type=all";if(_u){if(!(t=Android.mreadUrl(n,XM,2,null)))return void lE();200===(t=JSON.parse(t)).status?uE(t.responseText):lE()}else(t=new XMLHttpRequest).open("GET",n,!0),t.timeout=XM,t.setRequestHeader(Ql,nu),t.setRequestHeader(Zl,$l),t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void uE(t.responseText);lE()}},t.send(null)}function lE(){++JM<zM?(XM+=500,cE()):(VM=!1,Au(),zu(L))}function uE(e){var t=JSON.parse(e),n=t.streams.length;WM=parseInt(t._total),n<Dl&&(FM=!0);var a=HM;KM=!(HM+=n);var i=n/ql;0<n%ql&&i++;for(var o,s,d,r,c,l=0,u=document.getElementById("stream_table_user_live"),_=0;_<i;_++){for(s=a/ql+_,d=document.createElement("tr"),o=0;o<ql&&l<n;o++,l++)c=(r=t.streams[l]).channel._id,DM[c]?o--:(DM[c]=1,d.appendChild(P_(s,s+"_"+o,[r.channel.name,c],$M,[r.preview.template.replace("{width}x{height}",au),a_(JSON.stringify(r.stream_type))+r.channel.display_name,r.channel.status,r.game,y+Ip(r.created_at)+b+", "+h+t_(r.viewers)+q,n_(r.video_height,r.average_fps,r.channel.language)])));for(;o<ql;o++)FM&&!tE&&(tE=!0,HM=s*ql+o),d.appendChild(E_($M[9]+s+"_"+o)),qM.push($M[9]+s+"_"+o);u.appendChild(d)}_E()}function _E(){if(ZM){if(y_(gu),0<qM.length&&!FM)return oE(),void fE();qu(RM,UM,ql,HM),qM=[]}else KM?zu(B+K):(ZM=!0,pE(),y_(gu),l_()),xu($M[10]),_f=!1,Au();VM=!1}function fE(){Ju(qM.length);var e=HM+jM;e&&WM-1<e&&(e=WM-Kl,FM=!0);var t,n="https://api.twitch.tv/kraken/streams/?channel="+encodeURIComponent(QM)+"&limit="+Kl+"&offset="+e+"&stream_type=all";if(_u){if(!(t=Android.mreadUrl(n,XM,2,null)))return void mE();200===(t=JSON.parse(t)).status?hE(t.responseText):mE()}else(t=new XMLHttpRequest).open("GET",+Math.round(1e7*Math.random()),!0),t.timeout=XM,t.setRequestHeader(Ql,nu),t.setRequestHeader(Zl,$l),t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void hE(t.responseText);mE()}},t.send(null)}function mE(){++JM<zM?(XM+=500,fE()):(FM=!0,HM-=qM.length,qM=[],_E())}function hE(e){var t,n,a=JSON.parse(e),i=a.streams.length,o=0,s=0,d=[];for(WM=parseInt(a._total),i<Kl&&(FM=!0);o<qM.length&&s<i;o++,s++)n=(t=a.streams[s]).channel._id,DM[n]?o--:(DM[n]=1,T_(qM[o],[t.channel.name,n],[t.preview.template.replace("{width}x{height}",au),a_(JSON.stringify(t.stream_type))+t.channel.display_name,t.channel.status,t.game,y+Ip(t.created_at)+b+", "+h+t_(t.viewers)+q,n_(t.video_height,t.average_fps,t.channel.language)],$M),d.push(o));for(o=d.length-1;-1<o;o--)qM.splice(d[o],1);jM+=s,FM&&(HM-=qM.length,qM=[]),_E()}function pE(){F_(UM,RM,$M,ql,HM),HM/ql<UM+Vl&&!FM&&!VM&&(oE(),sE()),El&&gE()}function gE(){HM&&j_(UM+"_"+RM,$M)}function vE(e){var t;if(!_f&&!U_())switch(N_(),e.keyCode){case Na:Qu()?Zu():Yu()?Wu():(gE(),mf(vE));break;case La:if(i_(UM,RM-1,$M[0]))gE(),RM--,pE();else for(t=ql-1;-1<t;t--)if(i_(UM-1,t,$M[0])){gE(),UM--,RM=t,pE();break}break;case Oa:i_(UM,RM+1,$M[0])?(gE(),RM++,pE()):i_(UM+1,0,$M[0])&&(gE(),UM++,RM=0,pE());break;case Ba:for(t=0;t<ql;t++)if(i_(UM-1,RM-t,$M[0])){gE(),UM--,RM-=t,pE();break}break;case Ga:for(t=0;t<ql;t++)if(i_(UM+1,RM-t,$M[0])){gE(),UM++,RM-=t,pE();break}break;case Pa:case xa:case Ta:case Aa:D_(UM+"_"+RM,$M,vE)}}var yE=0,bE=0,wE=8,kE=0,CE=null,ME=["u_thumbdiv","u_img","u_infodiv","u_displayname","u_cell","user_scroll"],EE=!1,SE=!0;function IE(){return Il?(xE(),void Qa(Il)):lo()?(kl.Main_CenterLablesVectorPos=1,kl.Main_Go=_l,document.getElementById("screens_holder").style.top=screen.height/100*7+"px",Xu(),Tu("top_bar_user","icon_center_focus"),document.body.addEventListener("keydown",VE,!1),void(EE?(k_(yE),xu(ME[5]),GE(),l_()):PE())):(kl.Main_Go=Qc,xE(),void r_())}function xE(){kl.Users_Position=0,Lu("top_bar_user","icon_center_focus"),document.body.removeEventListener("keydown",VE),Iu(ME[5]),document.getElementById("screens_holder").style.top="0"}function PE(){v_("stream_table_user"),Iu(ME[5]),Gu(),Xu(),_f=!(EE=!1),SE=!(yE=bE=0),K_(function(){TE()})}function TE(){for(var e,t,n,a=document.createElement("tbody"),i=document.getElementById("stream_table_user"),o=0;o<Di.length;o++)t=0,n=o%2?"B5B5B5":"FFFFFF",(Ll=document.createElement("tr")).className="follower_header",Ll.innerHTML='<div class="follower_header">'+(o?"":se)+Di[o].name+R+"</div>",i.appendChild(a),i.appendChild(Ll),(e=document.createElement("tr")).appendChild(LE(o+"_"+t,kl.Main_selectedChannelDisplayname,K,"play",n)),t++,e.appendChild(LE(o+"_"+t,kl.Main_selectedChannelDisplayname,$,"users",n)),t++,e.appendChild(LE(o+"_"+t,kl.Main_selectedChannelDisplayname,db.isLive?Z:Yt,"gamepad",n)),t++,e.appendChild(LE(o+"_"+t,kl.Main_selectedChannelDisplayname,nn,"movie-play",n)),t++,e.appendChild(LE(o+"_"+t,kl.Main_selectedChannelDisplayname,Q,"filmstrip",n)),t++,o?e.appendChild(LE(o+"_"+t,kl.Main_selectedChannelDisplayname,oe,"arrow-up",n)):e.appendChild(LE(o+"_"+t,kl.Main_selectedChannelDisplayname,ee,"user-plus",n)),t++,e.appendChild(LE(o+"_"+t,kl.Main_selectedChannelDisplayname,te,"user-times",n)),t++,e.appendChild(LE(o+"_"+t,kl.Main_selectedChannelDisplayname,Di[o].access_token?Et:Mt,"key",n)),i.appendChild(e);BE()}function LE(e,t,n,a,i){return(Ll=document.createElement("td")).setAttribute("id",ME[4]+e),Ll.setAttribute(su,t),Ll.className="stream_cell",Ll.innerHTML='<div id="'+ME[0]+e+'" class="stream_thumbnail_channel" ><div id="'+ME[1]+e+'" class="stream_user_icon" style="color: #'+i+';"><i class="icon-'+a+'"></i></div></div><div id="'+ME[2]+e+'" class="stream_text"><div id="'+ME[3]+e+'" class="stream_info_user" style="text-align: center;">'+n+"</div></div>",Ll}function BE(){K_(function(){EE||(EE=!0,GE(),Au(),l_()),xu(ME[5]),SE=_f=!1})}function OE(){for(var e=0;e<Di.length;e++)Ou(ME[3]+e+"_2",db.isLive?Z:Yt)}function GE(){Tu(ME[0]+yE+"_"+bE,"stream_thumbnail_focused"),C_(yE)?1<yE?i_(yE+1,0,ME[0])&&X_(ME[5],-1*document.getElementById(ME[4]+yE+"_"+bE).offsetTop+500):X_(ME[5],screen.height/100*7):G_(),El&&AE()}function AE(){Ml=!1,Lu(ME[0]+yE+"_"+bE,"stream_thumbnail_focused")}function NE(){return kl.Users_Position=yE,3!==bE||Di[kl.Users_Position].access_token?7===bE&&Di[kl.Users_Position].access_token?(zu(Et),void window.setTimeout(Xu,1500)):(6!==bE&&7!==bE&&(Iu(ME[5]),document.body.removeEventListener("keydown",VE),document.getElementById("screens_holder").style.top="0"),void K_(function(){bE?1===bE?UC():2===bE?(By=db,Uy()):3===bE?lS():4===bE?dC():5===bE?yE?ro(yE):(kl.Main_Before=_l,zi()):6===bE?FE():7!==bE||Di[kl.Users_Position].access_token||FE():nE()})):(zu(Ln),void window.setTimeout(Xu,5e3))}function UE(){window.clearTimeout(CE)}function RE(){CE=window.setTimeout(HE,2e4)}function FE(){RE(),6===bE?Bu("main_dialog_remove",jt+ra+Di[kl.Users_Position].name+"?"):7===bE&&Bu("main_dialog_remove",gt+" "+Di[kl.Users_Position].name+"?"),xu("main_remove_dialog")}function HE(){UE(),Iu("main_remove_dialog"),kE=0,qE()}function DE(){return Pu("main_remove_dialog")}function qE(){kE?(Lu("remove_cancel","button_search_focused"),Tu("remove_yes","button_search_focused")):(Tu("remove_cancel","button_search_focused"),Lu("remove_yes","button_search_focused"))}function VE(e){var t;if(!_f&&!U_())switch(N_(),e.keyCode){case Na:DE()?HE():Yu()?Wu():Qu()?Zu():(AE(),mf(VE));break;case La:if(DE())--kE<0&&(kE=1),qE(),UE(),RE();else if(i_(yE,bE-1,ME[0]))AE(),bE--,GE();else if(i_(yE-1,0,ME[0])){for(t=wE-1;-1<t;t--)if(i_(yE-1,t,ME[0])){AE(),yE--,bE=t,GE();break}}else AE(),bE=wE-1,GE();break;case Oa:DE()?(1<++kE&&(kE=0),qE(),UE(),RE()):(i_(yE,bE+1,ME[0])?(AE(),bE++):(i_(yE+1,0,ME[0])?(AE(),yE++):AE(),bE=0),GE());break;case Ba:for(t=0;t<wE;t++)if(i_(yE-1,bE-t,ME[0])){AE(),yE--,bE-=t,GE();break}break;case Ga:for(t=0;t<wE;t++)if(i_(yE+1,bE-t,ME[0])){AE(),yE++,bE-=t,GE();break}break;case Pa:case xa:case Ta:case Aa:var n;if(DE()){if(6===bE)n=kE,HE(),n&&(document.body.removeEventListener("keydown",VE),xE(),oo(yE));else if(n=kE,HE(),n){kl.Users_AddcodePosition=kl.Users_Position,l_();var a=Ka,i="https://id.twitch.tv/oauth2/authorize?response_type=code&client_id="+encodeURIComponent($l)+"&redirect_uri="+a+"&scope=user_follows_edit+user_subscriptions&force_verify=true";window.location=i}}else NE()}}var JE=0,zE=0,XE=!1,jE=0,WE={},YE=[],KE=!1,$E=0,ZE=5,QE=3500,eS=0,tS=0,nS=!1,aS=!1,iS="time",oS=2,sS=!1,dS=["uv_thumbdiv","uv_img","uv_infodiv","uv_title","uv_streamon","uv_duration","uv_viwers","uv_quality","uv_cell","uvempty_","user_vod_scroll","uv_game"],rS=!1,cS=!1;function lS(){kl.Main_CenterLablesVectorPos=1,kl.Main_Go=bl,Tu("top_bar_user","icon_center_focus"),Su("label_side_panel","icon-arrow-circle-left",x),Bu("top_bar_user",u+h_(Di[kl.Users_Position].name+(cS?N:A))),document.body.addEventListener("keydown",xS,!1),rS?(k_(JE),xu(dS[10]),PS(),MS(),l_()):_S()}function uS(){kl.Users_Position=0,rS&&ES(),Lu("top_bar_user","icon_center_focus"),Su("label_side_panel","icon-ellipsis",Dn),document.body.removeEventListener("keydown",xS),Ou("top_bar_user",u),Iu(dS[10])}function _S(){rS&&ES(),v_("stream_table_user_vod"),Iu(dS[10]),Gu(),PS(),Xu(),sS=rS=!1,tS=eS=0,WE={},JE=zE=jE=0,XE=!(_f=!(aS=!(YE=[]))),Du(),mS()}function fS(){b_(),KE=!0,$E=0,QE=3500}function mS(){fS(),hS()}function hS(){var e=jE+eS;e&&tS-1<e&&(e=tS-Dl,XE=!0);var t,n="https://api.twitch.tv/kraken/videos/followed?limit="+Dl+"&broadcast_type="+(cS?"highlight":"archive")+"&sort="+iS+"&offset="+e;if(_u){if(!(t=Android.mreadUrl(n,QE,3,tu+Di[kl.Users_Position].access_token)))return void pS();if(200===(t=JSON.parse(t)).status)return void vS(t.responseText);401===t.status||403===t.status?ei(kl.Users_Position,0,mS,gS):pS()}else(t=new XMLHttpRequest).open("GET",n,!0),t.timeout=QE,t.setRequestHeader(Ql,nu),t.setRequestHeader(Zl,$l),t.setRequestHeader(eu,tu+Di[kl.Users_Position].access_token),t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void vS(t.responseText);401===t.status||403===t.status?ei(kl.Users_Position,0,mS,gS):pS()}},t.send(null)}function pS(){++$E<ZE?(QE+=500,hS()):gS()}function gS(){KE=!1,jE?(XE=!0,yS()):(_f=!1,Au(),zu(L))}function vS(e){var t=JSON.parse(e),n=t.videos.length;tS=parseInt(t._total),n<Dl&&(XE=!0);var a=jE;nS=!(jE+=n);var i=n/ql;0<n%ql&&i++;var o,s,d,r,c,l=0,u=document.getElementById("stream_table_user_vod");if(!sS){var _;for(sS=!0,d=document.createElement("tr"),f=0;f<2;f++)_=f?'<i class="icon-history stream_channel_fallow_icon"></i>'+Ca+Ca+Bn:'<i class="icon-movie-play stream_channel_fallow_icon"></i>'+Ca+Ca+p,(Ll=document.createElement("td")).setAttribute("id",dS[8]+"y_"+f),Ll.className="stream_cell",Ll.innerHTML='<div id="'+dS[0]+"y_"+f+'" class="stream_thumbnail_channel_vod" ><div id="'+dS[3]+"y_"+f+'" class="stream_channel_fallow_game">'+_+"</div></div>",d.appendChild(Ll);u.appendChild(d)}for(var f=0;f<i;f++){for(s=a/ql+f,d=document.createElement("tr"),o=0;o<ql&&l<n;o++,l++)c=(r=t.videos[l])._id,-1!==(r.preview.template+"").indexOf("404_processing")||WE[c]?o--:(WE[c]=1,d.appendChild(sI(s,s+"_"+o,[c,r.length,r.language,r.game,r.channel.name,r.increment_view_count_url],[r.preview.template.replace("{width}x{height}",au),r.channel.display_name,F+p_(r.created_at),PI.parse(r.title)+ra+en+g+r.game,t_(r.views)+D,n_(r.resolutions.chunked.slice(-4),parseInt(r.fps.chunked)||0,r.language),H+Ep(r.length),r.animated_preview_url],dS)));for(;o<ql;o++)XE&&!aS&&(aS=!0,jE=s*ql+o),d.appendChild(E_(dS[9]+s+"_"+o)),YE.push(dS[9]+s+"_"+o);u.appendChild(d)}yS()}function yS(){rS?(y_(gu),qu(zE,JE,ql,jE)):(nS?zu(B+(cS?N:A)+O+I):(rS=!0,MS(),y_(gu),l_()),xu(dS[10]),_f=!1,Au()),0<YE.length&&!XE?bS():KE=!(YE=[])}function bS(){fS(),wS()}function wS(){Ju(YE.length);var e=jE+eS;e&&tS-1<e&&(e=tS-Kl,XE=!0);var t,n="https://api.twitch.tv/kraken/videos/followed?limit="+Kl+"&broadcast_type="+(cS?"highlight":"archive")+"&sort="+iS+"&offset="+e;if(_u){if(!(t=Android.mreadUrl(n,QE,3,tu+Di[kl.Users_Position].access_token)))return void kS();if(200===(t=JSON.parse(t)).status)return void CS(t.responseText);401===t.status||403===t.status?ei(kl.Users_Position,0,mS,gS):kS()}else(t=new XMLHttpRequest).open("GET",n,!0),t.timeout=QE,t.setRequestHeader(Ql,nu),t.setRequestHeader(Zl,$l),t.setRequestHeader(eu,tu+Di[kl.Users_Position].access_token),t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void CS(t.responseText);401===t.status||403===t.status?ei(kl.Users_Position,0,mS,gS):kS()}},t.send(null)}function kS(){++$E<ZE?(QE+=500,wS()):(XE=!0,jE-=YE.length,YE=[],yS())}function CS(e){var t,n,a=JSON.parse(e),i=a.videos.length,o=0,s=0,d=[];for(tS=parseInt(a._total);o<YE.length&&s<i;o++,s++)n=(t=a.videos[s])._id,-1!==(t.preview.template+"").indexOf("404_processing")||WE[n]?o--:(WE[n]=1,rI(YE[o],[n,t.length,t.language,t.game,t.channel.name,t.increment_view_count_url],[t.preview.template.replace("{width}x{height}",au),t.channel.display_name,F+p_(t.created_at),PI.parse(t.title)+ra+en+g+t.game,t_(t.views)+D,n_(t.resolutions.chunked.slice(-4),parseInt(t.fps.chunked)||0,t.language),H+Ep(t.length),t.animated_preview_url],dS),d.push(o));for(o=d.length-1;-1<o;o--)YE.splice(d[o],1);eS+=s,XE&&(jE-=YE.length,YE=[]),yS()}function MS(){JE<0?SS():(F_(JE,zE,dS,ql,jE),vI(dS,JE+"_"+zE),jE/ql<JE+Vl&&!XE&&!KE&&mS(),El&&ES())}function ES(){window.clearInterval(TS),-1<JE&&jE?(xu(dS[1]+JE+"_"+zE),j_(JE+"_"+zE,dS)):IS()}function SS(){var e=1<zE?1:zE;Tu(dS[0]+"y_"+e,ou)}function IS(){var e=1<zE?1:zE;Lu(dS[0]+"y_"+e,ou)}function xS(e){var t;if(!_f&&!U_())switch(N_(),e.keyCode){case Na:Yu()?Wu():Yu()?Wu():Qu()?Zu():(ES(),mf(xS));break;case La:if(-1===JE)IS(),--zE<0&&(zE=1),SS();else if(JE||zE){if(i_(JE,zE-1,dS[0]))ES(),zE--,MS();else for(t=ql-1;-1<t;t--)if(i_(JE-1,t,dS[0])){ES(),JE--,zE=t,MS();break}}else ES(),IS(),JE=-1,zE=1,SS();break;case Oa:-1===JE?(IS(),1<++zE?(zE=0,nS?SS():(JE=0,MS())):SS()):i_(JE,zE+1,dS[0])?(ES(),zE++,MS()):i_(JE+1,0,dS[0])&&(ES(),JE++,zE=0,MS());break;case Ba:if(-1!==JE||nS)if(JE){for(t=0;t<ql;t++)if(i_(JE-1,zE-t,dS[0])){ES(),JE--,zE-=t,MS();break}}else ES(),JE=-1,SS();else JE=0,IS(),MS();break;case Ga:if(-1!==JE||nS){for(t=0;t<ql;t++)if(i_(JE+1,zE-t,dS[0])){ES(),JE++,zE-=t,MS();break}}else JE=0,IS(),MS();break;case Pa:case xa:case Ta:case Aa:-1===JE?(0===zE?bf("UserVod_highlight",(cS=!cS)?"true":"false"):1===oS?oS++:oS--,_S()):J_(JE+"_"+zE,dS,xS)}}function PS(){1===oS?(Bu("top_bar_user",u+h_(Di[kl.Users_Position].name+" "+(cS?N:A)+Pn)),iS="time"):2===oS&&(Bu("top_bar_user",u+h_(Di[kl.Users_Position].name+" "+(cS?N:A)+Tn)),iS="views"),bf("UserVod_TypeNumber",oS)}var TS,LS=0,BS=0,OS=!1,GS=0,AS={},NS=[],US=!1,RS=0,FS=5,HS=3500,DS=0,qS=0,VS=!1,JS=!1,zS="week",XS=2,jS=!1,WS=["v_thumbdiv","v_img","v_infodiv","v_title","v_streamon","v_duration","v_viwers","v_quality","v_cell","vempty_","vod_scroll","v_game"],YS=!1,KS=!1,$S=1,ZS=new Image;function QS(){kl.Main_CenterLablesVectorPos=4,kl.Main_Go=hl,Tu("top_bar_vod","icon_center_focus"),document.body.addEventListener("keydown",yI,!1),YS?(k_(LS),xu(WS[10]),bI(),mI(),l_()):tI()}function eI(){YS&&hI(),f_(),document.body.removeEventListener("keydown",yI),Lu("top_bar_vod","icon_center_focus"),Ou("top_bar_vod",nn),Iu(WS[10])}function tI(){YS&&hI(),v_("stream_table_vod"),Iu(WS[10]),Gu(),bI(),Xu(),jS=YS=!1,qS=DS=0,AS={},LS=BS=GS=0,OS=!(_f=!(JS=!(NS=[]))),Du(),nI(),aI()}function nI(){b_(),US=!0,RS=0,HS=3500}function aI(){var e=GS+DS;e&&qS-1<e&&(e=qS-Dl,OS=!0),Sf("https://api.twitch.tv/kraken/videos/top?limit="+Dl+"&broadcast_type="+(KS?"highlight":"archive")+"&sort=views&offset="+e+"&period="+zS+(""!==Ol?"&language="+Ol:""),HS,2,null,oI,iI)}function iI(){++RS<FS?(HS+=500,aI()):(US=!1,GS?(OS=!0,lI()):(_f=!1,Au(),zu(L)))}function oI(e){var t=JSON.parse(e),n=t.vods.length;qS=parseInt(t._total),n<Dl&&(OS=!0);var a=GS;VS=!(GS+=n);var i=n/ql;0<n%ql&&i++;var o,s,d,r,c,l=0,u=document.getElementById("stream_table_vod");if(!jS){var _;for(jS=!0,d=document.createElement("tr"),f=0;f<2;f++)_=f?'<i class="icon-history stream_channel_fallow_icon"></i>'+Ca+Ca+m:'<i class="icon-movie-play stream_channel_fallow_icon"></i>'+Ca+Ca+p,(Ll=document.createElement("td")).setAttribute("id",WS[8]+"y_"+f),Ll.className="stream_cell",Ll.innerHTML='<div id="'+WS[0]+"y_"+f+'" class="stream_thumbnail_channel_vod" ><div id="'+WS[3]+"y_"+f+'" class="stream_channel_fallow_game">'+_+"</div></div>",d.appendChild(Ll);u.appendChild(d)}for(var f=0;f<i;f++){for(s=a/ql+f,d=document.createElement("tr"),o=0;o<ql&&l<n;o++,l++)c=(r=t.vods[l])._id,-1!==(r.preview.template+"").indexOf("404_processing")||AS[c]?o--:(AS[c]=1,d.appendChild(sI(s,s+"_"+o,[c,r.length,r.language,r.game,r.channel.name,r.increment_view_count_url],[r.preview.template.replace("{width}x{height}",au),r.channel.display_name,F+p_(r.created_at),PI.parse(r.title)+ra+en+g+r.game,t_(r.views)+D,n_(r.resolutions.chunked.slice(-4),parseInt(r.fps.chunked)||0,r.language),H+Ep(r.length),r.animated_preview_url],WS)));for(;o<ql;o++)OS&&!JS&&(JS=!0,GS=s*ql+o),d.appendChild(E_(WS[9]+s+"_"+o)),NS.push(WS[9]+s+"_"+o);u.appendChild(d)}lI()}function sI(e,t,n,a,i){return e<ql&&M_(a[0]),dI(n,t,a,i)}function dI(e,t,n,a){return(Ll=document.createElement("td")).setAttribute("id",a[8]+t),Ll.setAttribute(su,JSON.stringify(e)),Ll.className="stream_cell",Ll.innerHTML=cI(t,n,a),Ll}function rI(e,t,n,a){var i=document.getElementById(e),o=e.split(a[9])[1];i.setAttribute(su,JSON.stringify(t)),i.innerHTML=cI(o,n,a),i.setAttribute("id",a[8]+o)}function cI(e,t,n){return w_(n[1]+e,t[0]),'<div id="'+n[0]+e+'" class="stream_thumbnail_video"'+(t[7]?' style="background-size: 0 0; background-image: url('+t[7]+');"':"")+'><img id="'+n[1]+e+'" class="stream_img"></div><div id="'+n[2]+e+'" class="stream_text"><div id="'+n[3]+e+'" class="stream_info" style="width: 72%; display: inline-block; font-size: 85%;">'+t[1]+'</div><div id="'+n[7]+e+'"class="stream_info" style="width:27%; float: right; text-align: right; display: inline-block;">'+t[5]+'</div><div><div id="'+n[4]+e+'"class="stream_info" style="width: 59%; display: inline-block;">'+t[2]+'</div><div id="'+n[5]+e+'"class="stream_info" style="width: 39%; display: inline-block; float: right; text-align: right;">'+t[6]+'</div></div><div id="'+n[11]+e+'"class="stream_info">'+t[3]+'</div><div id="'+n[6]+e+'"class="stream_info">'+t[4]+"</div></div>"}function lI(){if(YS?(y_(gu),qu(BS,LS,ql,GS)):(VS?zu(B+(KS?N:A)+O+I):(YS=!0,mI(),y_(gu),l_()),xu(WS[10]),_f=!1,Au()),0<NS.length&&!OS)return nI(),void uI();US=!(NS=[])}function uI(){Ju(NS.length);var e=GS+DS;e&&qS-1<e&&(e=qS-Kl,OS=!0),Sf("https://api.twitch.tv/kraken/videos/top?limit="+Kl+"&broadcast_type="+(KS?"highlight":"archive")+"&sort=views&offset="+e+"&period="+zS+(""!==Ol?"&language="+Ol:""),HS,2,null,fI,_I)}function _I(){++RS<FS?(HS+=500,uI()):(OS=!0,GS-=NS.length,NS=[],lI())}function fI(e){var t,n,a=JSON.parse(e),i=a.vods.length,o=0,s=0,d=[];for(qS=parseInt(a._total);o<NS.length&&s<i;o++,s++)n=(t=a.vods[s])._id,-1!==(t.preview.template+"").indexOf("404_processing")||AS[n]?o--:(AS[n]=1,rI(NS[o],[n,t.length,t.language,t.game,t.channel.name,t.increment_view_count_url],[t.preview.template.replace("{width}x{height}",au),t.channel.display_name,F+p_(t.created_at),PI.parse(t.title)+ra+en+g+t.game,t_(t.views)+D,n_(t.resolutions.chunked.slice(-4),parseInt(t.fps.chunked)||0,t.language),H+Ep(t.length),t.animated_preview_url],WS),d.push(o));for(o=d.length-1;-1<o;o--)NS.splice(d[o],1);DS+=s,OS&&(GS-=NS.length,NS=[]),lI()}function mI(){LS<0?pI():(F_(LS,BS,WS,ql,GS),vI(WS,LS+"_"+BS),GS/ql<LS+Vl&&!OS&&!US&&(nI(),aI()),El&&hI())}function hI(){window.clearInterval(TS),-1<LS&&GS?(xu(WS[1]+LS+"_"+BS),j_(LS+"_"+BS,WS)):gI()}function pI(){var e=1<BS?1:BS;Tu(WS[0]+"y_"+e,ou)}function gI(){var e=1<BS?1:BS;Lu(WS[0]+"y_"+e,ou)}function vI(t,n){if($S){var a=document.getElementById(t[0]+n);ZS.onload=function(){Iu(t[1]+n),a.style.backgroundSize="612px";var e=0;TS=window.setInterval(function(){a.style.backgroundPosition="0px "+ ++e%10*-344+"px"},650)},ZS.src=a.style.backgroundImage.replace(/url\(['"]?(.*?)['"]?\)/i,"$1")}}function yI(e){var t;if(!_f&&!U_())switch(N_(),e.keyCode){case Na:Qu()?Zu():Yu()?Wu():(hI(),mf(yI));break;case La:if(-1===LS)gI(),--BS<0&&(BS=1),pI();else if(LS||BS){if(i_(LS,BS-1,WS[0]))hI(),BS--,mI();else for(t=ql-1;-1<t;t--)if(i_(LS-1,t,WS[0])){hI(),LS--,BS=t,mI();break}}else hI(),gI(),LS=-1,BS=1,pI();break;case Oa:-1===LS?(gI(),1<++BS?(BS=0,VS?pI():(LS=0,mI())):pI()):i_(LS,BS+1,WS[0])?(hI(),BS++,mI()):i_(LS+1,0,WS[0])&&(hI(),LS++,BS=0,mI());break;case Ba:if(-1!==LS||VS)if(LS){for(t=0;t<ql;t++)if(i_(LS-1,BS-t,WS[0])){hI(),LS--,BS-=t,mI();break}}else hI(),LS=-1,pI();else LS=0,gI(),mI();break;case Ga:if(-1!==LS||VS){for(t=0;t<ql;t++)if(i_(LS+1,BS-t,WS[0])){hI(),LS++,BS-=t,mI();break}}else LS=0,gI(),mI();break;case Pa:case xa:case Ta:case Aa:-1===LS?(0===BS?bf("Vod_highlight",(KS=!KS)?"true":"false"):4<++XS&&(XS=1),tI()):J_(LS+"_"+BS,WS,yI)}}function bI(){1===XS?(Bu("top_bar_vod",nn+h_((KS?N:A)+re)),zS="day"):2===XS?(Bu("top_bar_vod",nn+h_((KS?N:A)+ce)),zS="week"):3===XS?(Bu("top_bar_vod",nn+h_((KS?N:A)+le)),zS="month"):4===XS&&(Bu("top_bar_vod",nn+h_((KS?N:A)+ue)),zS="all"),bf("vod_periodNumber",XS)}function wI(e,t,n){if(n.restrictions){if(n.restrictions.channels&&n.restrictions.channels.length&&-1===n.restrictions.channels.indexOf(kl.Play_selectedChannel))return t;if(n.restrictions.games&&n.restrictions.games.length)return t}return t.replace(n.code,kI(n))}function kI(e){return'<img class="emoticon '+e.source+"-emo-"+e.id+'" src="'+e["1x"]+'" srcset="'+e["2x"]+" 2x, "+e["3x"]+' 4x" />'}function CI(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function MI(e,t){for(var n=t.split(" "),a=0;a<n.length;a++){var i=n[a],o=i.replace(/(^[~!@#$%\^&\*\(\)]+|[~!@#$%\^&\*\(\)]+$)/g,""),s=xr[o]||xr[i];i=s?wI(e,i,s):CI(i),n[a]=i}return n.join(" ")}function EI(e){return'<img class="emoticon" src="https://static-cdn.jtvnw.net/emoticons/v1/'+e+'/1.0" srcset="https://static-cdn.jtvnw.net/emoticons/v1/'+e+"/2.0 2x, https://static-cdn.jtvnw.net/emoticons/v1/"+e+'/3.0 4x" />'}function SI(t,a){if(!a)return[t];var n=[],e=Object.keys(a),i=[];return e.forEach(function(e){for(var t=a[e],n=t.length-1;0<=n;n--)i.push({id:e,first:t[n][0],last:t[n][1]})}),i.sort(function(e,t){return t.first-e.first}),t=punycode.ucs2.decode(t),i.forEach(function(e){n.unshift(punycode.ucs2.encode(t.slice(e.last+1))),n.unshift([EI(e.id)]),t=t.slice(0,e.first)}),n.unshift(punycode.ucs2.encode(t)),n}function II(a){return Object.keys(a).map(function(n){var e=a[n];return e.type=n,e.versions=Object.keys(a[n].versions).map(function(e){var t=a[n].versions[e];return t.type=e,t}),e})}function xI(e,t,n,a){var i=document.createElement("style");i.type="text/css",i.innerHTML="."+e+"-"+t+' { background-image: url("'+n.replace("http:","https:")+'"); }',a?a.appendChild(i):document.head.appendChild(i)}window.parseIRC=function(e){var t={raw:e,tags:{},prefix:null,command:null,params:[]},n=0,a=0;if(64===e.charCodeAt(0)){if(-1===(a=e.indexOf(" ")))return null;for(var i=e.slice(1,a).split(";"),o=0;o<i.length;o++){var s=i[o].split("=");t.tags[s[0]]=s[1]||!0}n=a+1}for(;32===e.charCodeAt(n);)n++;if(58===e.charCodeAt(n)){if(-1===(a=e.indexOf(" ",n)))return null;for(t.prefix=e.slice(n+1,a),n=a+1;32===e.charCodeAt(n);)n++}if(-1===(a=e.indexOf(" ",n)))return e.length>n?(t.command=e.slice(n),t):null;for(t.command=e.slice(n,a),n=a+1;32===e.charCodeAt(n);)n++;for(;n<e.length;){if(a=e.indexOf(" ",n),58===e.charCodeAt(n)){t.params.push(e.slice(n+1));break}if(-1===a){if(-1===a){t.params.push(e.slice(n));break}}else for(t.params.push(e.slice(n,a)),n=a+1;32===e.charCodeAt(n);)n++}return t},function(e){var t="object"==typeof global&&global;t.global!==t&&t.window!==t&&t.self!==t||(e=t);var n,g=2147483647,v=36,y=26,i=38,o=700,a=/^xn--/,s=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,r={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},c=v-1,b=Math.floor,w=String.fromCharCode;function k(e){throw new RangeError(r[e])}function l(e,t){for(var n=e.length,a=[];n--;)a[n]=t(e[n]);return a}function u(e,t){var n=e.split("@"),a="";return 1<n.length&&(a=n[0]+"@",e=n[1]),a+l((e=e.replace(d,".")).split("."),t).join(".")}function C(e){for(var t,n,a=[],i=0,o=e.length;i<o;)55296<=(t=e.charCodeAt(i++))&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?a.push(((1023&t)<<10)+(1023&n)+65536):(a.push(t),i--):a.push(t);return a}function M(e){return l(e,function(e){var t="";return 65535<e&&(t+=w((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+w(e)}).join("")}function E(e,t){return e+22+75*(e<26)-((0!==t)<<5)}function S(e,t,n){var a=0;for(e=n?b(e/o):e>>1,e+=b(e/t);c*y>>1<e;a+=v)e=b(e/c);return b(a+(c+1)*e/(e+i))}function _(e){var t,n,a,i,o,s,d,r,c,l,u,_=[],f=e.length,m=0,h=128,p=72;for((n=e.lastIndexOf("-"))<0&&(n=0),a=0;a<n;++a)128<=e.charCodeAt(a)&&k("not-basic"),_.push(e.charCodeAt(a));for(i=0<n?n+1:0;i<f;){for(o=m,s=1,d=v;f<=i&&k("invalid-input"),u=e.charCodeAt(i++),(v<=(r=u-48<10?u-22:u-65<26?u-65:u-97<26?u-97:v)||r>b((g-m)/s))&&k("overflow"),m+=r*s,!(r<(c=d<=p?1:p+y<=d?y:d-p));d+=v)s>b(g/(l=v-c))&&k("overflow"),s*=l;p=S(m-o,t=_.length+1,0===o),b(m/t)>g-h&&k("overflow"),h+=b(m/t),m%=t,_.splice(m++,0,h)}return M(_)}function f(e){var t,n,a,i,o,s,d,r,c,l,u,_,f,m,h,p=[];for(_=(e=C(e)).length,t=128,o=72,s=n=0;s<_;++s)(u=e[s])<128&&p.push(w(u));for(a=i=p.length,i&&p.push("-");a<_;){for(d=g,s=0;s<_;++s)t<=(u=e[s])&&u<d&&(d=u);for(d-t>b((g-n)/(f=a+1))&&k("overflow"),n+=(d-t)*f,t=d,s=0;s<_;++s)if((u=e[s])<t&&++n>g&&k("overflow"),u===t){for(r=n,c=v;!(r<(l=c<=o?1:o+y<=c?y:c-o));c+=v)h=r-l,m=v-l,p.push(w(E(l+h%m,0))),r=b(h/m);p.push(w(E(r,0))),o=S(n,f,a===i),n=0,++a}++n,++t}return p.join("")}n={version:"1.4.1",ucs2:{decode:C,encode:M},decode:_,encode:f,toASCII:function(e){return u(e,function(e){return s.test(e)?"xn--"+f(e):e})},toUnicode:function(e){return u(e,function(e){return a.test(e)?_(e.slice(4).toLowerCase()):e})}},e.punycode=n}(this),function(e,t){e.ReconnectingWebSocket=function(){if("WebSocket"in window)return u.prototype.onopen=function(){},u.prototype.onclose=function(){},u.prototype.onconnecting=function(){},u.prototype.onmessage=function(){},u.prototype.onerror=function(){},u.debugAll=!1,u.CONNECTING=WebSocket.CONNECTING,u.OPEN=WebSocket.OPEN,u.CLOSING=WebSocket.CLOSING,u.CLOSED=WebSocket.CLOSED,u;function u(e,t,n){var a={debug:!1,automaticOpen:!0,reconnectInterval:1e3,maxReconnectInterval:3e4,reconnectDecay:1.5,timeoutInterval:3e3,maxReconnectAttempts:null,binaryType:"blob"};for(var i in n||(n={}),a)void 0!==n[i]?this[i]=n[i]:this[i]=a[i];this.url=e,this.reconnectAttempts=0,this.readyState=WebSocket.CONNECTING,this.protocol=null;var o,s=this,d=!1,r=!1,c=document.createElement("div");function l(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}c.addEventListener("open",function(e){s.onopen(e)}),c.addEventListener("close",function(e){s.onclose(e)}),c.addEventListener("connecting",function(e){s.onconnecting(e)}),c.addEventListener("message",function(e){s.onmessage(e)}),c.addEventListener("error",function(e){s.onerror(e)}),this.addEventListener=c.addEventListener.bind(c),this.removeEventListener=c.removeEventListener.bind(c),this.dispatchEvent=c.dispatchEvent.bind(c),this.open=function(a){if((o=new WebSocket(s.url,t||[])).binaryType=this.binaryType,a){if(this.maxReconnectAttempts&&this.reconnectAttempts>this.maxReconnectAttempts)return}else c.dispatchEvent(l("connecting")),this.reconnectAttempts=0;(s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","attempt-connect",s.url);var e=o,i=setTimeout(function(){(s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","connection-timeout",s.url),r=!0,e.close(),r=!1},s.timeoutInterval);o.onopen=function(){clearTimeout(i),(s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","onopen",s.url),s.protocol=o.protocol,s.readyState=WebSocket.OPEN,s.reconnectAttempts=0;var e=l("open");e.isReconnect=a,a=!1,c.dispatchEvent(e)},o.onclose=function(e){if(clearTimeout(i),o=null,d)s.readyState=WebSocket.CLOSED,c.dispatchEvent(l("close"));else{s.readyState=WebSocket.CONNECTING;var t=l("connecting");t.code=e.code,t.reason=e.reason,t.wasClean=e.wasClean,c.dispatchEvent(t),a||r||((s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","onclose",s.url),c.dispatchEvent(l("close")));var n=s.reconnectInterval*Math.pow(s.reconnectDecay,s.reconnectAttempts);setTimeout(function(){s.reconnectAttempts++,s.open(!0)},n>s.maxReconnectInterval?s.maxReconnectInterval:n)}},o.onmessage=function(e){(s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","onmessage",s.url,e.data);var t=l("message");t.data=e.data,c.dispatchEvent(t)},o.onerror=function(e){(s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","onerror",s.url,e),c.dispatchEvent(l("error"))}},!0===this.automaticOpen&&this.open(!1),this.send=function(e){if(o)return(s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","send",s.url,e),o.send(e);throw"INVALID_STATE_ERR : Pausing to reconnect websocket"},this.close=function(e,t){void 0===e&&(e=1e3),d=!0,o&&o.close(e,t)},this.refresh=function(){o&&o.close()}}}()}(this);var PI=function(){var e={parse:function(e,t){return t||(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;")),a(e,function(e){var t=function(e){for(var t=e.indexOf(d)<0?e.replace(s,""):e,n=[],a=0,i=0,o=0;o<t.length;)a=t.charCodeAt(o++),i?(n.push((65536+(i-55296<<10)+(a-56320)).toString(16)),i=0):55296<=a&&a<=56319?i=a:n.push(a.toString(16));return n.join("-")}(e);return t?'<img class="emoji" src="https://twemoji.maxcdn.com/2/72x72/'+t+'.png"/>':e})},replace:a},n=/(?:\ud83d[\udc68\udc69])(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddb0-\uddb3])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f)|[\u0023\u002a\u0030-\u0039]\ufe0f?\u20e3|(?:[\u00a9\u00ae\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddb5\uddb6\uddb8\uddb9\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a-\udc6d\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\udeeb\udeec\udef4-\udef9]|\ud83e[\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd40-\udd45\udd47-\udd70\udd73-\udd76\udd7a\udd7c-\udda2\uddb4\uddb7\uddc0-\uddc2\uddd0\uddde-\uddff]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,s=/\uFE0F/g,d=String.fromCharCode(8205);return e;function a(e,t){return String(e).replace(n,t)}}();