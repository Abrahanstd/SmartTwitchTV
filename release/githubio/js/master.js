var t,n,a,e,i,o,s,d,l,c,p,m,r,u,_,f,v,h,g,y,b,w,k,C,M,E,I,S,x,P,L,T,B,O,G,A,N,U,F,V,D,R,H,J,q,z,j,X,W,Y,K,$,Q,Z,ee,te,ne,ae,ie,oe,se,de,le,ce,re,ue,_e,fe,me,he,pe,ve,ge,ye,be,we,ke,Ce,Me,Ee,Ie,Se,xe,Pe,Le,Te,Be,Oe,Ge,Ae,Ne,Ue,Fe,Ve,De,Re,He,Je,qe,ze,je,Xe,We,Ye,Ke,$e,Qe,Ze,et,tt,nt,at,it,ot,st,dt,lt,ct,rt,ut,_t,ft,mt,ht,pt,vt,gt,yt,bt,wt,kt,Ct,Mt,Et,It,St,xt,Pt,Lt,Tt,Bt,Ot,Gt,At,Nt,Ut,Ft,Vt,Dt,Rt,Ht,Jt,qt,zt,jt,Xt,Wt,Yt,Kt,$t,Qt,Zt,en,tn,nn,an,on,sn,dn,ln,cn,rn,un,_n,fn,mn,hn,pn,vn,gn,yn,bn,wn,kn,Cn,Mn,En,In,Sn,xn,Pn,Ln,Tn,Bn,On,Gn,An,Nn,Un,Fn,Vn,Dn,Rn,Hn,Jn,qn,zn,jn,Xn,Wn,Yn,Kn,$n,Qn,Zn,ea,ta,na,aa,ia,oa,sa,da="fglfgl27@gmail.com",la="<br>",ca='<i class="icon-circle" style="font-size: 50%; vertical-align: middle; font-weight: bold;"></i>  ',ra='<div class="about_text_title">',ua='<div class="about_text_title" style="text-align: left;">',_a='<div style="text-align: left;">',fa="",ma="",ha="",pa="",va="",ga="",ya="",ba="",wa="",ka="&nbsp;";function Ca(){fa=e+" (C)",ma=n+" (D)",pa=a+" (A)",ha=i+" (A)",l+=Qt,c+=Qt,x=oa+sa,va=ra+e+"</div>"+ra+Ee+"</div>"+la+_a+ca+Le+la+ca+(Te+=Wt)+la+ca+Be+la+ca+Oe+la+Ge+la+ca+Ae+la+ka+ka+ka+Ne+la+ca+Ue+la+"</div>"+la+(ba=ra+Ce+"</div>"+_a+ca+at+la+ca+et+la+ca+tt+la+"</div>"+_a+ca+nt+la+ca+it+la+ca+ot+la+la+ra+Me+"</div>"+_a+ca+st+la+ca+dt+la+ca+lt+la+ca+ct+la+ca+rt)+la+la+ra+ke+"</div>",ga=ra+we+"</div></div>",ya=_a+la+Fe+la+(Zc?la+'<div style="display: inline-block; color: #FF0000; font-size: 110%; font-weight: bold;">'+Qn+"</div>":"")+"</div>"+la+ra+Ve+"</div>"+da+la+la+De+la+Re+la+la+ua+He+"</div>"+_a+Ke+la+ca+Je+la+ca+qe+la+ca+ze+la+ca+je+la+ca+Xe+la+ca+We+la+ca+Ye+la+$e+la+ca+Qe+la+ca+Ze+la+ra+ke+"</div></div>",wa=ht+la+ca+pt.replace("link_link",'<div style="display: inline-block; color: #FF0000; font-size: 110%; font-weight: bold;">http://tiny.cc/twitchkeycode</div>')+la+ca+vt+la+ca+gt+la+ca+yt+la+ca+bt}function Ma(){Nr=!1,document.getElementById("side_panel").style.width="17%",t="Refresh:",n="Search",a="Settings",e="Controls",i="About",o="Hide",s="The text you entered is empty.",d="The search result is empty.",l="Switch screen",c="Switch user screen",p="Switch: Past Broadcast or Highlight",m="Switch: Period (24h, 7d, 30d, all)",r="Go to ",u="User ",_="Live",f="Games",v="Playing ",h=" for ",g="Watching time ",y="Since ",b=" ago",w="A Game",k="Type your search...",C="Type your authentication key...",M="Type your user name...",E="Press Enter or Select key to, ",I="Channels",S="Channel",oa="Back to previously screen: Back key",sa=" twice",P=" has ended",L="This video is only available to subscribers.",T="Connection failed, unable to load content hit refresh to try again",B="No",O=" for this ",G="Connection failed, unable to load video content exiting...",A=" Past Broadcast",N=" Highlight",U=" Clips",F=" Content",V="Streamed on ",D="Duration ",R=" Views",H=" Viewers",J="Click again to exit!",q="Do you wanna to exit Twitch?",z="Exit",j="Close",X="Minimize",W="Cancel",Y="Not Live | ",K=" Channels Live",$=" Hosts Live",Q=" Games Live",Z=" Followed Channels",ee=" Add User",te=" Remove User",ne="User doesn't exist",ae=" hosting ",ie=" already set",oe="Make First",se="First user can fallow (when providing a key) and see live channels feed outside of the user screen<br>",de="Add a Twitch user to display it's Followed Channels content here",le=" (24h)",ce=" (7d)",re=" (30d)",ue=" (all)",_e="Jumping",fe=" to ",me="Jump Canceled",he=" , jump time bigger then duration",pe=" Sec",ve=" Min",ge=" Hr",ye="Source",be="Version: ",we="SmartTV Twitch",ke="Press back key to close this.",Ce="Player Related:",Me="Chat Related:",Ee="General Related:",Ie="Update",Se="Current installed version ",xe=" latest available version ",Pe="This are the none players related controls, the player can show it's own controls.",Le="Play a video: Navigate using Directional pad (up/down/left/right), press enter to start playing",Te="Refresh screen content: ",Be="Exit the application: from side pannel click exit",Oe=" Switch screen: Back key then D-Pad left or right",Ge="Some screen will change its internal content (channel past broadcast or clips for example) instead of changing to another screen",Ae="Start a search: from side pannel click search",Ne="After writing the search text press key Enter on the virtual keyboard then choose a search option",Ue="About this application: from side pannel click about",Fe="This is a SmartTV Twitch client develop by a individual on his free time, for TV's that don't have access to a good official application, released for free to any one that wanna to use it.",Qn="This version of the app is for test in a browser only!",Ve="Developer information:",De="This is an open source application licensed under the GNU General Public License v3.0, check it on github",Re="github.com/fgl27/SmartTwitchTV",He="This application uses following dependencies:",Je="Nightdev KapChat - KapChat captures Twitch chat directly into OBS or XSplit (https://www.nightdev.com/kapchat/)",qe="Fontastic - Create your customized icon fonts in seconds (http://app.fontastic.me)",ze="Twemoji - A simple library that provides standard Unicode emoji support across all platforms (https://github.com/twitter/twemoji)",je="UglifyJS - is a JavaScript parser, minifier, compressor and beautifier toolkit (https://github.com/mishoo/UglifyJS2)",Xe="JS Beautifier - Beautify, unpack or deobfuscate JavaScript and HTML, make JSON/JSONP readable, etc. (https://github.com/beautify-web/js-beautify)",We="HTMLMinifier - A highly configurable, well-tested, JavaScript-based HTML minifier (https://github.com/kangax/html-minifier)",Ye="JSHint - A Static Code Analysis Tool for JavaScript (https://github.com/jshint/jshint)",Ke="Web:",$e="Android:",Qe="Google: Leanback v17 (https://developer.android.com/reference/android/support/v17/leanback/package-summary)",Ze="Google: ExoPlayer (https://github.com/google/ExoPlayer)",et="Show information panel: Press enter key or D-pad keys if chat and live channel feed is not showing",tt="Close the video: press back key twice",nt="Play/Pause a video: open information panel and click on pause simbol (not available to Live streams)",at="Show user live channels feed: D-pad up",it="Change video quality: Open information panel, , navigate using use Directional pad (left/right), then use Directional pad (up/down) to choose the new quality after press Enter key to confirm the change",ot="Force refresh a video (in case it freezes): Change video quality to the same",st="Show or hide the Chat : D-pad right",dt="Change Chat position : D-pad left",lt="Change Chat size : D-pad down",ct="Change Chat background brightness: Change in side panel settings",rt="Force refresh the Chat (in case it freezes or doesn't load): Change video quality to the same will reset and sync it",ut='Start a search: open information panel, navigate using use Directional pad (left/right) to "Search" and press enter',_t="Chat and video (Side by side): Color button red (A)",na="Force disable the chat",aa="with this the chat will not load content, this is useful on a stream with too many viewers were the chat can lag the app.",ft="Update available, check google play store",mt='Adding a key allows the app to fallow and access subscribed only past broadcast (for channel you are Sub to and block VOD access to none subscribers). On the authentication page if you already added a key for another user, you need to click up two to tree time and click over "not you?" to authenticate for a different users <br> <br> add key for',ht=" below, fallowing this steps:",pt="Access the site link_link (using a computer or a smart phone)",vt='Click on the "Authorize" button it will take you to main Twitch.TV authentication site',gt="Login to Twitch.TV using the user name you are trying to add a key for",yt="Click on Authorize button of Twitch.TV site if you agree with the requested permissions",bt="The web page will update and show a key code, the key only has lower case letters and nubers.",wt=" Add Authentication key",kt="Key added OK",Ct="Key test fail, it's needed to add new one",Mt="Key test return OK",Et="You try to add a key for user ",It=" but this key is for user ",St=" Following",xt=" Follow",Pt=" And you have not set a authentication key the app can't check yours sub status.",Lt=" And you are not a sub of this channel",Tt=" You are a sub of this channel but the app fail to authenticate contact the developer email in about",Bt="Fail authentication check with the provider key, please check and try again",Nn="The added key doesn't belong to the user ",Ot="No user",Gt="Set a user and a authentication key to be able to fallow/unfollow",At="Restart the",Nt=" Clip",Ut="Channel content",Ft="Network is disconnect, the application can't work without INTERNET",Vt="Network connection reestablished",Dt=" Followers",Rt=", Can't fallow or unfallow ",Ht="Game content",Jt="Yes",qt="Are you sure you want to remove the user ",zt="Press Up to ",jt="Followed Games",Xt="Change between",Wt=" Back key then Enter",Yt=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"],Kt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],$t="Started ",Qt=" (PG Up/Down)",Zt="Videos",en=" Video",tn="Replay",nn="exiting in ",an='press "Return" to exit',on="Featured",sn="Created at ",dn="Open the Broadcast",ln="No Broadcast",cn="There is no Past Broadcast for this clip",rn="And because of that no chat",un=" is now",_n="Open the Hosting",fn="Player related",mn="Buffer size:",hn="A lower value here will make the player to start playing sooner, but it may cause re-buffer with will cause the player to pause to buffer.",pn="Live streams buffer",vn="Videos (Past Broadcast and Highlight) buffer",gn="Clips buffer",yn="General related",bn="Language",wn="Chat: Connecting to chat server..."+la+"Chat: Connected."+la+"Chat: Joined channel ",kn="Play from the start or from where you stop watching last time?",Mn=(Cn="From:"+la)+"Start",En="Chat: The Chat has ended!",In=": Most recent",Sn=": Most views",xn="Set a authentication key to be able to see fallowed videos",Pn="Switch: Most recent or views",Ln="Enable",Tn="Disable",zn="The app was closed willing playing, restoring playback",Bn="Restore playback",On="When changing apps, the app may be closed by the system to free memory. In this case the app saves what it was playing and restores the playback when reopened",Gn="Chat font size",An="Change the chat lines font size, applies to text and emotes",Un="Videos animated thumbnails",Fn="Side panel: Back key twice",Vn="Size ",Dn="Brightness ",Rn="Forbidden content, this Live must be for Prime only subscribers or lock to Twitch official app only",Hn="Jump step ",Jn=" seconds",qn=" minutes",jn="Clock offset",Xn="Application language",Wn="Content language",Yn="Press enter to change",Kn="All",$n="Empty game fro this",Zn="Isn't possible to jump during a buffering",ea="Chat is disabled, enable in side pannel settings",ta="This clip/video fail to load can't replay",ia="Chat backgroung brightness "}var Ea=51,Ia=52,Sa=179,xa=37,Pa=38,La=39,Ta=40,Ba=13,Oa=49,Ga=8,Aa=13,Na=32,Ua=46,Fa=0,Va=5,Da=1e4,Ra=0,Ha=!1,Ja=!1,qa=!1,za=!1,ja="",Xa="https://fgl27.github.io/SmartTwitchTV/release/index.min.html",Wa="elsu5d09k0xomu7cggx3qg5ybdwu7g",Ya="https://id.twitch.tv/oauth2/token?";function Ka(e){Ir.Users_Position=Ir.Users_AddcodePosition,Ra=e,yi(),Fu(),ei()}function $a(e,t,n,a){var i=new XMLHttpRequest,o=Ya+"grant_type=refresh_token&client_id="+encodeURIComponent(tu)+"&client_secret="+encodeURIComponent(Wa)+"&refresh_token="+encodeURIComponent(Fi[e].refresh_token)+"&redirect_uri="+Xa;i.open("POST",o,!0),i.timeout=Da,i.ontimeout=function(){},i.onreadystatechange=function(){4!==i.readyState||(200===i.status?Za(i.responseText,e,n):Qa(e,t,n,a))},i.send(null)}function Qa(e,t,n,a){++t<10?$a(e,t,n):a&&a()}function Za(e,t,n){var a=JSON.parse(e);Fi[t].access_token=a.access_token,Fi[t].refresh_token=a.refresh_token,ao(),n&&n()}function ei(){var e=new XMLHttpRequest,t=Ya+"grant_type=authorization_code&client_id="+encodeURIComponent(tu)+"&client_secret="+encodeURIComponent(Wa)+"&code="+encodeURIComponent(Ra)+"&redirect_uri="+Xa;e.open("POST",t,!0),e.timeout=Da,e.ontimeout=function(){},e.onreadystatechange=function(){4!==e.readyState||(200===e.status?ai(e.responseText):ti())},e.send(null)}function ti(){++Fa<Va?ei():ni()}function ni(){Vu(),Yu(Bt),window.setTimeout(function(){Ku(),Tr=0,f_(),Ir.Main_Go=pr,window.location=Xa},4e3),Fi[Ir.Users_Position].access_token=0,Fi[Ir.Users_Position].refresh_token=0}function ai(e){var t=JSON.parse(e);Fi[Ir.Users_Position].access_token=t.access_token,Fi[Ir.Users_Position].refresh_token=t.refresh_token,yi(),ii()}function ii(){Lf("https://api.twitch.tv/kraken?oauth_token="+Fi[Ir.Users_Position].access_token,Da,0,null,oi,si)}function oi(e){var t=JSON.parse(e).token;t.user_name&&-1!==t.user_name.indexOf(Fi[Ir.Users_Position].name)?(ao(),Tr=0,Vu(),Ha=ZE=!1,Ir.Main_Go=pr,f_(),Yu(kt),window.setTimeout(function(){window.location=Xa},3e3)):(Fi[Ir.Users_Position].access_token=0,Fi[Ir.Users_Position].refresh_token=0,Ha=!1,Yu(Nn+Fi[Ir.Users_Position].name),window.setTimeout(function(){Ku(),Tr=0,f_(),Ir.Main_Go=pr,window.location=Xa},4e3))}function si(){++Fa<Va?(Da+=500,ii()):ni()}function di(){yi(),Ja=!1,li()}function li(){var e="https://api.twitch.tv/kraken/users/"+Fi[Ir.Users_Position].id+"/follows/channels/"+ja,t=new XMLHttpRequest;t.open("GET",e,!0),t.timeout=Da,t.setRequestHeader(nu,tu),t.setRequestHeader(au,su),t.ontimeout=function(){},t.onreadystatechange=function(){4===t.readyState&&(200===t.status?ci():404===t.status?ri(t.responseText):ui())},t.send(null)}function ci(){Ha=!(Ja=!0),za?zv():vd()}function ri(e){-1!==(JSON.parse(e).error+"").indexOf("Not Found")?(Ha=Ja=!1,za?zv():vd()):ui()}function ui(){++Fa<Va?(Da+=500,li()):(Ha=!1,za?zv():vd())}function _i(){yi(),fi()}function fi(){var e=new XMLHttpRequest;e.open("PUT","https://api.twitch.tv/kraken/users/"+Fi[Ir.Users_Position].id+"/follows/channels/"+ja,!0),e.timeout=Da,e.setRequestHeader(nu,tu),e.setRequestHeader(au,su),e.setRequestHeader("Authorization","OAuth "+Fi[Ir.Users_Position].access_token),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return Ja=!(Ha=!1),void(za?zv():vd());401===e.status||403===e.status?$a(Ir.Users_Position,0,_i,null):mi()}},e.send(null)}function mi(){++Fa<Va&&(Da+=500,fi())}function hi(){yi(),pi()}function pi(){var e=new XMLHttpRequest;e.open("DELETE","https://api.twitch.tv/kraken/users/"+Fi[Ir.Users_Position].id+"/follows/channels/"+ja,!0),e.timeout=Da,e.setRequestHeader(nu,tu),e.setRequestHeader(au,su),e.setRequestHeader("Authorization","OAuth "+Fi[Ir.Users_Position].access_token),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(204===e.status)return Ha=Ja=!1,void(za?zv():vd());401===e.status||403===e.status?$a(Ir.Users_Position,0,hi,null):vi()}},e.send(null)}function vi(){++Fa<Va&&(Da+=500,pi())}function gi(){yi(),qa=!1,bi()}function yi(){Da=1e4,Ha=!(Fa=0)}function bi(){var e,t="https://api.twitch.tv/kraken/users/"+Fi[Ir.Users_Position].id+"/subscriptions/"+ja;if(pu){if(!(e=Android.mreadUrl(t,Da,3,Fi[Ir.Users_Position].access_token)))return void wi();if(200===(e=JSON.parse(e)).status)Ha=!(qa=!0),ay();else if(422===e.status)Ha=qa=!1,ny();else if(404===e.status){if(-1!==(JSON.parse(e.responseText).error+"").indexOf("Not Found"))return Ha=qa=!1,void ny();wi()}else 401===e.status||403===e.status?$a(Ir.Users_Position,0,gi,ki):wi()}else(e=new XMLHttpRequest).open("GET",t,!0),e.timeout=Da,e.setRequestHeader(nu,tu),e.setRequestHeader(au,su),e.setRequestHeader("Authorization","OAuth "+Fi[Ir.Users_Position].access_token),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState)if(200===e.status)Ha=!(qa=!0),ay();else if(422===e.status)Ha=qa=!1,ny();else if(404===e.status){if(-1!==(JSON.parse(e.responseText).error+"").indexOf("Not Found"))return Ha=qa=!1,void ny();wi()}else 401===e.status||403===e.status?$a(Ir.Users_Position,0,gi,ki):wi()},e.send(null)}function wi(){++Fa<Va?(Da+=500,bi()):ki()}function ki(){Ha=qa=!1,ny()}function Ci(e){yi(),Mi(e,0)}function Mi(e,t){var n="https://api.twitch.tv/kraken?oauth_token="+Fi[e].access_token,a=new XMLHttpRequest;a.open("GET",n,!0),a.timeout=1e4,a.ontimeout=function(){},a.onreadystatechange=function(){if(4===a.readyState){if(200===a.status)return void(JSON.parse(a.responseText).token.valid?Ha=!1:(yi(),$a(e,0,null,null)));400===a.status?(yi(),$a(e,0,null,null)):Ei(e,t)}},a.send(null)}function Ei(e,t){++t<Va&&Mi(e,t)}function Ii(){yi(),Si()}function Si(){var e=new XMLHttpRequest;e.open("PUT","https://api.twitch.tv/api/users/"+Fi[Ir.Users_Position].name+"/follows/games/"+encodeURIComponent(Ir.Main_gameSelected)+"?oauth_token="+Fi[Ir.Users_Position].access_token,!0),e.timeout=1e4,e.setRequestHeader(nu,tu),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status)return Mo=!0,void No();401===e.status||403===e.status?$a(Ir.Users_Position,0,Ii,null):xi()}},e.send(null)}function xi(){++Fa<Va&&(Da+=500,Si())}function Pi(){yi(),Li()}function Li(){var e=new XMLHttpRequest;e.open("DELETE","https://api.twitch.tv/api/users/"+Fi[Ir.Users_Position].name+"/follows/games/"+encodeURIComponent(Ir.Main_gameSelected)+"?oauth_token="+Fi[Ir.Users_Position].access_token,!0),e.timeout=1e4,e.setRequestHeader(nu,tu),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState){if(204===e.status)return Mo=!1,void No();401===e.status||403===e.status?$a(Ir.Users_Position,0,Pi,null):Ti()}},e.send(null)}function Ti(){++Fa<Va&&(Da+=500,Li())}function Bi(){yi(),Oi()}function Oi(){var e,t="https://api.twitch.tv/api/users/"+Fi[Ir.Users_Position].name+"/follows/games/"+encodeURIComponent(Ir.Main_gameSelected);(e=new XMLHttpRequest).open("GET",t,!0),e.timeout=1e4,e.setRequestHeader(nu,tu),e.ontimeout=function(){},e.onreadystatechange=function(){if(4===e.readyState)return 200===e.status?(Mo=!0,void No()):404===e.status?(Mo=!1,void No()):void Gi()},e.send(null)}function Gi(){++Fa<Va?(Da+=500,Oi()):(Mo=!1,No())}var Ai=0,Ni=5,Ui=3500,Fi=[],Vi=null,Di=!1,Ri=!1;function Hi(){Ir.Main_Go=ir,Gu("top_bar_user","icon_center_focus"),Ku(),Xc.placeholder=M,Bu("add_user_scroll"),zi()}function Ji(){Xi(!1),document.body.removeEventListener("keydown",qi),document.body.removeEventListener("keydown",Wi),Au("top_bar_user","icon_center_focus"),Tu("add_user_scroll")}function qi(e){if(!Di&&!Ri&&Ir.Main_Go===ir)switch(e.keyCode){case Oa:Zu()?Qu():a_()?n_():(0<Fi.length&&Ir.Main_Go!==pr?Ir.Main_Go=Ir.Main_Before:Ir.Main_Go=ar,Ji(),u_());break;case Ia:case Ea:case Sa:case Ba:zi()}}function zi(){document.body.removeEventListener("keydown",qi),document.body.addEventListener("keydown",Wi,!1),Xc.placeholder=M,Xc.focus(),Ri=!0}function ji(){if(null!==Xc){var e=Xc.cloneNode(!0);Xc.parentNode.replaceChild(e,Xc),Xc=document.getElementById("user_input")}}function Xi(e){Xc.blur(),ji(),document.body.removeEventListener("keydown",Wi),Xc.placeholder=E+M,e&&document.body.addEventListener("keydown",qi,!1),Ri=!1}function Wi(e){if(!Di&&Ir.Main_Go===ir)switch(e.keyCode){case Oa:Zu()?Qu():a_()?n_():(0<Fi.length&&Ir.Main_Go!==pr?Ir.Main_Go=Ir.Main_Before:Ir.Main_Go=ar,Ji(),u_());break;case Ua:Xc.value="";break;case Aa:case Ta:""!==Xc.value&&null!==Xc.value?oo(Vi=Zc&&!eo()?"testtwitch27":Xc.value)?(Vu(),Yu(u+Vi+ie),window.setTimeout(function(){Ku(),zi()},1500)):(Ui=3500,Di=!(Ai=0),Tu("add_user_scroll"),Fu(),Yi()):zi();break;case Ga:Xc.value=Xc.value.slice(0,-1);break;case Na:Xc.value+=" "}}function Yi(){Lf("https://api.twitch.tv/kraken/users?login="+encodeURIComponent(Vi),Ui,2,null,Ki,$i)}function Ki(e){JSON.parse(e)._total?(Xc.value="",document.body.removeEventListener("keydown",qi),to(e)):Qi()}function $i(){++Ai<Ni?(Ui+=500,Yi()):Qi()}function Qi(){Vi=null,Vu(),Yu(ne),window.setTimeout(function(){Hi()},1e3),Di=!1}function Zi(){if(0<(Fi=If("AddUser_UsernameArray",[])).length)for(var e=0;e<Fi.length;e++)Fi[e].access_token&&Ci(e)}function eo(){return 0<Fi.length}function to(e){Vi=JSON.parse(e).users[0],Fi.push({name:Vi.name,id:Vi._id,access_token:0,refresh_token:0}),ao(),ZE=!1,Ji(),tI(),Di=!1}function no(e){var t=Fi.indexOf(Fi[e]);-1<t&&Fi.splice(t,1),0<Fi.length?(ZE=!1,tI()):Hi(),ao()}function ao(){Mf("AddUser_UsernameArray",JSON.stringify(Fi))}function io(e){Vi=Fi[0],Fi[0]=Fi[e],Fi[e]=Vi,ZE=!1,tI(),ao()}function oo(e){return-1!==Fi.indexOf(e)}function so(){return 0<Fi.length}var lo=0,co=0,ro=!1,uo=0,_o={},fo=[],mo=!1,ho=0,po=5,vo=3500,go=0,yo=0,bo=!1,wo=["ag_thumbdiv","ag_img","ag_infodiv","ag_displayname","ag_streamtitle","ag_streamgame","ag_viwers","ag_quality","ag_cell","agempty_","a_games_scroll"],ko=!1,Co=!1,Mo=!1,Eo=!1,Io=!1;function So(){Ir.Main_CenterLablesVectorPos=3,Ir.Main_Go=sr,document.body.addEventListener("keydown",Xo,!1),Gu("top_bar_game","icon_center_focus"),Lu("label_side_panel","icon-arrow-circle-left",x),Ir.Search_isSearching&&(v_(),Nu("top_bar_user",n+g_(f+" '"+Ir.Search_data+"'"))),Nu("top_bar_game",w+g_(_+": "+Ir.Main_gameSelected)),Ir.Main_OldgameSelected===Ir.Main_gameSelected&&ko?(I_(lo),Bu(wo[10]),Jo(),f_()):Po()}function xo(){ko&&-1===lo&&(jo(),co=lo=0,Gu(wo[0]+"0_"+co,cu)),Lu("label_side_panel","icon-ellipsis",Fn),Nu("top_bar_game",f),document.body.removeEventListener("keydown",Xo),Au("top_bar_game","icon_center_focus"),Tu(wo[10])}function Po(){null===Ir.Main_OldgameSelected&&(Ir.Main_OldgameSelected=Ir.Main_gameSelected),k_("stream_table_a_game"),Tu(wo[10]),Fu(),Ku(),Io=ko=!1,_o={},pf=!(uo=yo=go=0),lo=co=0,ro=Co=!(fo=[]),zu(),Lo(),To()}function Lo(){M_(),mo=!0,ho=0,vo=3500}function To(){var e=uo+go;e&&yo-1<e&&(e=yo-zr,ro=!0);var t="https://api.twitch.tv/kraken/streams?game="+encodeURIComponent(Ir.Main_gameSelected)+"&limit="+zr+"&offset="+e+(""!==Ur?"&broadcaster_language="+Ur:"");pu&&!uo?Tf(t,vo,2,null,Oo,Bo):Bf(t,vo,2,null,Oo,Bo,!1)}function Bo(){++ho<po?(vo+=500,To()):(mo=!1,uo?(ro=!0,Go()):(pf=!1,Vu(),Yu(T)))}function Oo(e){var t=JSON.parse(e),n=t.streams.length;yo=parseInt(t._total),n<zr&&(ro=!0);var a=uo;bo=!(uo+=n);var i=n/jr;0<n%jr&&i++;var o,s,d,l,c,r,u=0,_=document.getElementById("stream_table_a_game");if(!Io){var f;for(Io=!0,d=document.createElement("tr"),l=0;l<3;l++)f=l?1===l?'<i class="icon-movie stream_channel_fallow_icon"></i>'+ka+U:"":'<i class="icon-movie-play stream_channel_fallow_icon"></i>'+ka+ka+Zt,(Ar=document.createElement("td")).setAttribute("id",wo[8]+"y_"+l),Ar.className="stream_cell",Ar.innerHTML='<div id="'+wo[0]+"y_"+l+'" class="stream_thumbnail_fallow_game" ><div id="'+wo[3]+"y_"+l+'" class="stream_channel_fallow_game">'+f+"</div></div>",d.appendChild(Ar);_.appendChild(d)}for(l=0;l<i;l++){for(s=a/jr+l,d=document.createElement("tr"),o=0;o<jr&&u<n;o++,u++)r=(c=t.streams[u]).channel._id,_o[r]?o--:(_o[r]=1,d.appendChild(O_(s,s+"_"+o,[c.channel.name,r],wo,[c.preview.template.replace("{width}x{height}",du),s_(JSON.stringify(c.stream_type))+c.channel.display_name,c.channel.status,c.game,y+Op(c.created_at)+b+", "+h+i_(c.viewers)+H,o_(c.video_height,c.average_fps,c.channel.broadcaster_language)])));for(;o<jr;o++)ro&&!Co&&(Co=!0,uo=s*jr+o),d.appendChild(P_(wo[9]+s+"_"+o)),fo.push(wo[9]+s+"_"+o);_.appendChild(d)}Go()}function Go(){if(ko){if(C_(wu),0<fo.length&&!ro)return Lo(),void Do();ju(co,lo,jr,uo),fo=[]}else Ao(),bo?(Yu(B+Q),lo=-1,zo()):(ko=!0,C_(wu),Jo(),f_()),Bu(wo[10]),pf=!1,Vu();mo=!1}function Ao(){Eo?(Mo=!0,No()):eo()?Bi():(Mo=!1,No())}function No(){Nu(wo[3]+"y_2",Mo?'<i class="icon-heart" style="color: #00b300; font-size: 100%; text-shadow: #FFFFFF 0 0 10px, #FFFFFF 0 0 10px, #FFFFFF 0 0 8px;"></i>'+ka+ka+St:'<i class="icon-heart-o" style="color: #FFFFFF; font-size: 100%; text-shadow: #000000 0 0 10px, #000000 0 0 10px, #000000 0 0 8px;"></i>'+ka+ka+(eo()?xt:Ot))}function Uo(){eo()&&Fi[Ir.Users_Position].access_token?Mo?Pi():Ii():(Yu(Gt),window.setTimeout(function(){bo&&Ir.Main_Go===sr?Yu(B+Q):Ku()},2e3))}function Fo(){co?1===co?(Ir.Main_Go=kr,Ir.Main_OldgameSelected=Ir.Main_gameSelected,Vo(),__()):Uo():(Ir.Main_Go=wr,Ir.Main_OldgameSelected=Ir.Main_gameSelected,Vo(),__())}function Vo(){ko&&-1===lo&&(jo(),co=lo=0,Gu(wo[0]+"0_"+co,cu)),document.body.removeEventListener("keydown",Xo),Tu(wo[10])}function Do(){Wu(fo.length);var e=uo+go;e&&yo-1<e&&(e=yo-eu,ro=!0),Lf("https://api.twitch.tv/kraken/streams?game="+encodeURIComponent(Ir.Main_gameSelected)+"&limit="+eu+"&offset="+e+(""!==Ur?"&broadcaster_language="+Ur:""),vo,2,null,Ho,Ro)}function Ro(){++ho<po?(vo+=500,Do()):(ro=!0,uo-=fo.length,fo=[],Go())}function Ho(e){var t,n,a=JSON.parse(e),i=a.streams.length,o=0,s=0,d=[];for(yo=parseInt(a._total),i<eu&&(ro=!0);o<fo.length&&s<i;o++,s++)n=(t=a.streams[s]).channel._id,_o[n]?o--:(_o[n]=1,G_(fo[o],[t.channel.name,n],[t.preview.template.replace("{width}x{height}",du),s_(JSON.stringify(t.stream_type))+t.channel.display_name,t.channel.status,t.game,y+Op(t.created_at)+b+", "+h+i_(t.viewers)+H,o_(t.video_height,t.average_fps,t.channel.broadcaster_language)],wo),d.push(o));for(o=d.length-1;-1<o;o--)fo.splice(d[o],1);go+=s,ro&&(uo-=fo.length,fo=[]),Go()}function Jo(){lo<0?zo():(J_(lo,co,wo,jr,uo),uo/jr<lo+Xr&&!ro&&!mo&&(Lo(),To()),Pr&&qo())}function qo(){-1<lo&&uo?$_(lo+"_"+co,wo):jo()}function zo(){Gu(wo[0]+"y_"+co,cu)}function jo(){Au(wo[0]+"y_"+co,cu)}function Xo(e){var t;if(!pf&&!R_())switch(D_(),e.keyCode){case Oa:a_()?n_():Zu()?Qu():(Ir.Main_OldgameSelected=Ir.Main_gameSelected,qo(),jo(),gf(Xo));break;case xa:if(-1===lo)jo(),--co<0&&(co=2),zo();else if(lo||co){if(d_(lo,co-1,wo[0]))qo(),co--,Jo();else for(t=jr-1;-1<t;t--)if(d_(lo-1,t,wo[0])){qo(),lo--,co=t,Jo();break}}else qo(),jo(),lo=-1,co=2,zo();break;case La:-1===lo?(jo(),2<++co?(co=0,bo?zo():(lo=0,Jo())):zo()):d_(lo,co+1,wo[0])?(qo(),co++,Jo()):d_(lo+1,0,wo[0])&&(qo(),lo++,co=0,Jo());break;case Pa:if(-1!==lo||bo)if(lo){for(t=0;t<jr;t++)if(d_(lo-1,co-t,wo[0])){qo(),lo--,co-=t,Jo();break}}else qo(),lo=-1,zo();else lo=0,jo(),Jo();break;case Ta:if(-1!==lo||bo){for(t=0;t<jr;t++)if(d_(lo+1,co-t,wo[0])){qo(),lo++,co-=t,Jo();break}}else lo=0,jo(),Jo();break;case Ia:case Ea:case Sa:case Ba:-1!==lo?z_(lo+"_"+co,wo,Xo):Fo()}}var Wo=0,Yo=0,Ko=!1,$o=0,Qo={},Zo=[],es=!1,ts=0,ns=5,as=3500,is=0,os=0,ss=!1,ds=!1,ls="week",cs=2,rs=!1,us=["agv_thumbdiv","agv_img","agv_infodiv","agv_title","agv_streamon","agv_duration","agv_viwers","agv_quality","agv_cell","gvempty_","a_games_vod_scroll","agv_game"],_s=!1,fs=!1,ms="";function hs(){Ir.Main_CenterLablesVectorPos=3,Ir.Main_Go=wr,Gu("top_bar_game","icon_center_focus"),document.body.addEventListener("keydown",Ls,!1),Lu("label_side_panel","icon-arrow-circle-left",x),ms===Ir.Main_gameSelected&&_s?(I_(Wo),Bu(us[10]),Ts(),Is(),f_()):vs()}function ps(){_s&&Ss(),document.body.removeEventListener("keydown",Ls),Au("top_bar_game","icon_center_focus"),Nu("top_bar_game",f),Lu("label_side_panel","icon-ellipsis",Fn),Tu(us[10])}function vs(){_s&&Ss(),k_("stream_table_a_game_vod"),Tu(us[10]),Fu(),Ts(),ms=Ir.Main_gameSelected,Ku(),rs=_s=!1,pf=!(ds=!(Zo=[])),Wo=Yo=$o=os=is=0,Ko=!(Qo={}),zu(),gs(),ys()}function gs(){M_(),es=!0,ts=0,as=3500}function ys(){var e=$o+is;e&&os-1<e&&(e=os-zr,Ko=!0);var t="https://api.twitch.tv/kraken/videos/top?game="+encodeURIComponent(Ir.Main_gameSelected)+"&limit="+zr+"&broadcast_type="+(fs?"highlight":"archive")+"&sort=views&offset="+e+"&period="+ls+(""!==Ur?"&language="+Ur:"");pu&&!$o?Tf(t,as,2,null,ws,bs):Bf(t,as,2,null,ws,bs,!1)}function bs(){++ts<ns?(as+=500,ys()):(es=!1,$o?(Ko=!0,ks()):(pf=!1,Vu(),Yu(T)))}function ws(e){var t=JSON.parse(e),n=t.vods.length;os=parseInt(t._total),n<zr&&(Ko=!0);var a=$o;ss=!($o+=n);var i=n/jr;0<n%jr&&i++;var o,s,d,l,c,r=0,u=document.getElementById("stream_table_a_game_vod");if(!rs){var _;for(rs=!0,d=document.createElement("tr"),f=0;f<2;f++)_=f?'<i class="icon-history stream_channel_fallow_icon"></i>'+ka+ka+m:'<i class="icon-movie-play stream_channel_fallow_icon"></i>'+ka+ka+p,(Ar=document.createElement("td")).setAttribute("id",us[8]+"y_"+f),Ar.className="stream_cell",Ar.innerHTML='<div id="'+us[0]+"y_"+f+'" class="stream_thumbnail_channel_vod" ><div id="'+us[3]+"y_"+f+'" class="stream_channel_fallow_game">'+_+"</div></div>",d.appendChild(Ar);u.appendChild(d)}for(var f=0;f<i;f++){for(s=a/jr+f,d=document.createElement("tr"),o=0;o<jr&&r<n;o++,r++)c=(l=t.vods[r])._id,-1!==(l.preview.template+"").indexOf("404_processing")||Qo[c]?o--:(Qo[c]=1,d.appendChild(GS(s,s+"_"+o,[c,l.length,l.channel.broadcaster_language,l.game,l.channel.name,l.increment_view_count_url],[l.preview.template.replace("{width}x{height}",du),l.channel.display_name,V+y_(l.created_at),ax.parse(l.title)+la+$t+v+l.game,i_(l.views)+R,o_(l.resolutions.chunked.slice(-4),parseInt(l.fps.chunked)||0,l.channel.broadcaster_language),D+Tp(l.length),l.animated_preview_url],us)));for(;o<jr;o++)Ko&&!ds&&(ds=!0,$o=s*jr+o),d.appendChild(P_(us[9]+s+"_"+o)),Zo.push(us[9]+s+"_"+o);u.appendChild(d)}ks()}function ks(){if(_s?C_(wu):(ss?Yu(B+(fs?N:A)+O+S):(_s=!0,C_(wu),Is(),f_()),Bu(us[10]),pf=!1,Vu()),0<Zo.length&&!Ko)return gs(),void Cs();ju(Yo,Wo,jr,$o),es=!(Zo=[])}function Cs(){Wu(Zo.length);var e=$o+is;e&&os-1<e&&(e=os-eu,Ko=!0),Lf("https://api.twitch.tv/kraken/videos/top?game="+encodeURIComponent(Ir.Main_gameSelected)+"&limit="+eu+"&broadcast_type="+(fs?"highlight":"archive")+"&sort=views&offset="+e+"&period="+ls+(""!==Ur?"&language="+Ur:""),as,2,null,Es,Ms)}function Ms(){++ts<ns?(as+=500,Cs()):(Ko=!0,Zo=[],ks())}function Es(e){var t,n,a=JSON.parse(e),i=a.vods.length,o=0,s=0,d=[];for(os=parseInt(a._total);o<Zo.length&&s<i;o++,s++)n=(t=a.vods[s])._id,-1!==(t.preview.template+"").indexOf("404_processing")||Qo[n]?o--:(Qo[n]=1,NS(Zo[o],[n,t.length,t.channel.broadcaster_language,t.game,t.channel.name,t.increment_view_count_url],[t.preview.template.replace("{width}x{height}",du),t.channel.display_name,V+y_(t.created_at),ax.parse(t.title)+la+$t+v+t.game,i_(t.views)+R,o_(t.resolutions.chunked.slice(-4),parseInt(t.fps.chunked)||0,t.channel.broadcaster_language),D+Tp(t.length),t.animated_preview_url],us),d.push(o));for(o=d.length-1;-1<o;o--)Zo.splice(d[o],1);is+=s,Ko&&($o-=Zo.length,Zo=[]),ks()}function Is(){Wo<0?xs():(J_(Wo,Yo,us,jr,$o),jS(us,Wo+"_"+Yo),$o/jr<Wo+Xr&&!Ko&&!es&&(gs(),ys()),Pr&&Ss())}function Ss(){window.clearInterval(iS),-1<Wo&&$o?(Bu(us[1]+Wo+"_"+Yo),$_(Wo+"_"+Yo,us)):Ps()}function xs(){var e=1<Yo?1:Yo;Gu(us[0]+"y_"+e,cu)}function Ps(){var e=1<Yo?1:Yo;Au(us[0]+"y_"+e,cu)}function Ls(e){var t;if(!pf&&!R_())switch(D_(),e.keyCode){case Oa:a_()?n_():Zu()?Qu():(Ss(),gf(Ls));break;case xa:if(-1===Wo)Ps(),--Yo<0&&(Yo=1),xs();else if(Wo||Yo){if(d_(Wo,Yo-1,us[0]))Ss(),Yo--,Is();else for(t=jr-1;-1<t;t--)if(d_(Wo-1,t,us[0])){Ss(),Wo--,Yo=t,Is();break}}else Ss(),Ps(),Wo=-1,Yo=1,xs();break;case La:-1===Wo?(Ps(),1<++Yo?(Yo=0,ss?xs():(Wo=0,Is())):xs()):d_(Wo,Yo+1,us[0])?(Ss(),Yo++,Is()):d_(Wo+1,0,us[0])&&(Ss(),Wo++,Yo=0,Is());break;case Pa:if(-1!==Wo||ss)if(Wo){for(t=0;t<jr;t++)if(d_(Wo-1,Yo-t,us[0])){Ss(),Wo--,Yo-=t,Is();break}}else Ss(),Wo=-1,xs();else Wo=0,Ps(),Is();break;case Ta:if(-1!==Wo||ss){for(t=0;t<jr;t++)if(d_(Wo+1,Yo-t,us[0])){Ss(),Wo++,Yo-=t,Is();break}}else Wo=0,Ps(),Is();break;case Ia:case Ea:case Sa:case Ba:-1===Wo?(0===Yo?Mf("AGameVod_highlight",(fs=!fs)?"true":"false"):4<++cs&&(cs=1),vs()):W_(Wo+"_"+Yo,us,Ls)}}function Ts(){1===cs?(Nu("top_bar_game",w+g_((fs?N:A)+le+": "+Ir.Main_gameSelected)),ls="day"):2===cs?(Nu("top_bar_game",w+g_((fs?N:A)+ce+": "+Ir.Main_gameSelected)),ls="week"):3===cs?(Nu("top_bar_game",w+g_((fs?N:A)+re+": "+Ir.Main_gameSelected)),ls="month"):4===cs&&(Nu("top_bar_game",w+g_((fs?N:A)+ue+": "+Ir.Main_gameSelected)),ls="all"),Mf("AGameVod_periodNumber",cs)}var Bs,Os=0,Gs=0,As=!1,Ns=0,Us=0,Fs=5,Vs=3500,Ds=0,Rs=!1,Hs=!1,Js=["cc_thumbdiv","cc_img","cc_infodiv","cc_name","cc_createdon","cc_game","cc_viwers","cc_duration","cc_cell","sccempty_","channel_content_scroll"],qs=!1,zs="",js=null,Xs="",Ws="",Ys="",Ks="",$s="",Qs={},Zs=!1;function ed(){Ir.Main_CenterLablesVectorPos=1,Ir.Main_Go=fr,Zs&&!Ir.Search_isSearching&&Ir.Main_selectedChannel_id&&Md(),zs!==Ir.Main_selectedChannel&&(qs=!1),v_(),Ir.Main_selectedChannelDisplayname=Ir.Main_selectedChannelDisplayname.replace(Y,""),Uu("top_bar_user",Ir.Main_selectedChannelDisplayname),Uu("top_bar_game",Ut),document.body.addEventListener("keydown",Ed,!1),za=!1,qs?(I_(Os),Bu(Js[10]),yd(),bd(),f_()):nd()}function td(){p_(),document.body.removeEventListener("keydown",Ed),Tu(Js[10])}function nd(){k_("stream_table_channel_content"),Tu(Js[10]),Fu(),Ku(),zs=Ir.Main_selectedChannel,Ks="",As=Rs=qs=!1,Bs=void(Os=Gs=Ns=Ds=0),ad(),id()}function ad(){pf=!0,Us=0,Vs=3500}function id(){Lf("https://api.twitch.tv/kraken/streams/"+encodeURIComponent(void 0!==Bs?Bs:Ir.Main_selectedChannel_id),Vs,2,null,od,sd)}function od(e){null!==JSON.parse(e).stream?(js=e,ad(),rd()):Bs?(js=null,ad(),rd()):(ad(),dd())}function sd(){++Us<Fs?(Vs+=500,id()):(js=null,ad(),rd())}function dd(){Lf("https://tmi.twitch.tv/hosts?include_logins=1&host="+encodeURIComponent(Ir.Main_selectedChannel_id),Vs,1,null,cd,ld,!0)}function ld(){++Us<Fs?(Vs+=500,dd()):(js=null,ad(),rd())}function cd(e){var t=JSON.parse(e);void 0!==(Bs=t.hosts[0].target_id)?(ad(),id()):(js=null,ad(),rd())}function rd(){Lf("https://api.twitch.tv/kraken/channels/"+Ir.Main_selectedChannel_id,mg,2,null,ud,_d)}function ud(e){var t=JSON.parse(e);Xs=t.views,Ws=t.followers,Ys=t.description,Ir.Main_selectedChannelLogo=t.logo,fd()}function _d(){++Us<Fs?(Vs+=500,rd()):(Ys=Ws=Xs="",Ir.Main_selectedChannelLogo=bu,fd())}function fd(){var e=document.createElement("tr"),t=document.createElement("tbody"),n=0,a=document.getElementById("stream_table_channel_content");if((Ar=document.createElement("tr")).className="follower_header",Ar.innerHTML='<div class="follower_header">'+ax.parse(Ys)+"</div>",a.appendChild(t),a.appendChild(Ar),null!==js){var i=JSON.parse(js);if(null!==i.stream){var o=void 0!==Bs?Ir.Main_selectedChannelDisplayname+ae:"",s=i.stream;e.appendChild(md("0_"+n,s.channel.name,s.preview.template,ax.parse(s.channel.status),s.game,s_(JSON.stringify(s.stream_type))+o+s.channel.display_name,y+Op(s.created_at)+b+", "+h+i_(s.viewers)+H,o_(s.video_height,s.average_fps,s.channel.broadcaster_language))),n++}else Rs=!0}else Rs=!0;e.appendChild(hd("0_"+n,Ir.Main_selectedChannelDisplayname,Ir.Main_selectedChannelDisplayname+A,"movie-play")),n++,e.appendChild(hd("0_"+n,Ir.Main_selectedChannelDisplayname,Ir.Main_selectedChannelDisplayname+U,"movie")),n<2&&(n++,e.appendChild(P_(Js[9]+"0_"+n))),a.appendChild(e),(e=document.createElement("tr")).appendChild(pd("1_0",Ir.Main_selectedChannelDisplayname,Ir.Main_selectedChannelDisplayname,Ir.Main_selectedChannelLogo)),a.appendChild(e),gd()}function md(e,t,n,a,i,o,s,d){return Ks=n.replace("{width}x{height}",du),(Ar=document.createElement("td")).setAttribute("id",Js[8]+e),Ar.setAttribute(ru,t),Ar.className="stream_cell",Ar.innerHTML='<div id="'+Js[0]+e+'" class="stream_thumbnail_video" ><img id="'+Js[1]+e+'" class="stream_img"></div><div id="'+Js[2]+e+'" class="stream_text"><div id="'+Js[3]+e+'" class="stream_channel" style="width: 66%; display: inline-block;"><i class="icon-circle" style="color: '+(void 0!==Bs?"#FED000":"red")+'; font-size: 90%; aria-hidden="true"></i> '+ka+o+'</div><div id="'+Js[7]+e+'"class="stream_info" style="width:33%; float: right; text-align: right; display: inline-block;">'+d+'</div><div id="'+Js[4]+e+'"class="stream_info">'+a+'</div><div id="'+Js[5]+e+'"class="stream_info">'+v+i+'</div><div id="'+Js[6]+e+'"class="stream_info">'+s+"</div></div>",Ar}function hd(e,t,n,a){return(Ar=document.createElement("td")).setAttribute("id",Js[8]+e),Ar.setAttribute(ru,t),Ar.className="stream_cell",Ar.innerHTML='<div id="'+Js[0]+e+'" class="stream_thumbnail_video" ><div id="'+Js[1]+e+'" class="stream_channel_content_icon"><i class="icon-'+a+'"></i></div></div><div id="'+Js[2]+e+'" class="stream_text"><div id="'+Js[3]+e+'" class="stream_channel" style="text-align: center">'+n+"</div></div>",Ar}function pd(e,t,n,a){return $s=a,(Ar=document.createElement("td")).setAttribute("id",Js[8]+e),Ar.setAttribute(ru,t),Ar.className="stream_cell",Ar.innerHTML='<div id="'+Js[0]+e+'" class="stream_thumbnail_video" ><div id="schannel_cont_heart" style="position: absolute; top: 5%; left: 6%;"></div><img id="'+Js[1]+e+'" class="stream_img_fallow"></div><div id="'+Js[2]+e+'" class="stream_text"><div id="'+Js[3]+e+'" class="stream_channel">'+n+'</div><div id="'+Js[5]+e+'"class="stream_info">'+i_(Xs)+R+'</div><div id="'+Js[6]+e+'"class="stream_info" >'+i_(Ws)+Dt+"</div></div>",Ar}function vd(){Ja?(Nu("schannel_cont_heart",'<i class="icon-heart" style="color: #00b300; font-size: 600%; text-shadow: #FFFFFF 0 0 10px, #FFFFFF 0 0 10px, #FFFFFF 0 0 8px;"></i>'),Uu(Js[3]+"1_0",Ir.Main_selectedChannelDisplayname+St)):(Nu("schannel_cont_heart",'<i class="icon-heart-o" style="color: #FFFFFF; font-size: 600%; text-shadow: #000000 0 0 10px, #000000 0 0 10px, #000000 0 0 8px;"></i>'),eo()?Uu(Js[3]+"1_0",Ir.Main_selectedChannelDisplayname+xt):Uu(Js[3]+"1_0",Ir.Main_selectedChannelDisplayname+Rt))}function gd(){qs||(qs=!0,""!==Ks&&Cu(document.getElementById(Js[1]+"0_0"),Ks,wu),Cu(document.getElementById(Js[1]+"1_0"),$s,bu),bd(),f_(),Bu(Js[10]),Vu()),yd(),pf=!1}function yd(){Hs?vd():eo()?(ja=Ir.Main_selectedChannel_id,za=!1,di()):(Ja=!1,vd())}function bd(){Gu(Js[0]+Os+"_"+(Os?0:Gs),cu),Pr&&wd(),F_()}function wd(){$_(Os+"_"+(Os?0:Gs),Js)}function kd(){if(Os)eo()&&Fi[Ir.Users_Position].access_token?(za=!1,ja=Ir.Main_selectedChannel_id,Ja?hi():_i()):(Yu(Gt),window.setTimeout(Ku,2e3));else{document.body.removeEventListener("keydown",Ed),Tu(Js[10]);var e=Rs?1:0;Gs===0-e?(Ir.Play_selectedChannel=document.getElementById(Js[8]+Os+"_"+Gs).getAttribute(ru),Ir.Play_selectedChannelDisplayname=document.getElementById(Js[3]+Os+"_"+Gs).textContent,-1!==Ir.Play_selectedChannelDisplayname.indexOf(ae)?(Ir.Play_isHost=!0,Ir.Play_DisplaynameHost=Ir.Play_selectedChannelDisplayname,Ir.Play_selectedChannelDisplayname=Ir.Play_selectedChannelDisplayname.split(ae)[1],Ir.Play_selectedChannel_id=Bs):Ir.Play_selectedChannel_id=Ir.Main_selectedChannel_id,Ir.Play_gameSelected=document.getElementById(Js[5]+Os+"_"+Gs).textContent.split(v)[1],ef(j_)):Gs===1-e?ef(Qd):Gs===2-e&&(Fy=ub,ef(Jy))}}function Cd(){Qs={"Main_values.Main_selectedChannel_id":Ir.Main_selectedChannel_id,"Main_values.Main_selectedChannelLogo":Ir.Main_selectedChannelLogo,"Main_values.Main_selectedChannel":Ir.Main_selectedChannel,"Main_values.Main_selectedChannelDisplayname":Ir.Main_selectedChannelDisplayname,ChannelContent_UserChannels:Hs,"Main_values.Main_BeforeChannel":Ir.Main_BeforeChannel}}function Md(){Ir.Main_selectedChannel_id=Ir.Main_selectedChannel_id,Ir.Main_selectedChannelLogo=Ir.Main_selectedChannelLogo,Ir.Main_selectedChannel=Ir.Main_selectedChannel,Ir.Main_selectedChannelDisplayname=Ir.Main_selectedChannelDisplayname,Hs=Qs.ChannelContent_UserChannels,Ir.Main_BeforeChannel=Ir.Main_BeforeChannel,Zs=!(Qs={})}function Ed(e){if(!pf&&!R_())switch(D_(),e.keyCode){case Oa:a_()?n_():Zu()?Qu():(wd(),gf(Ed));break;case xa:Os||(wd(),--Gs<0&&(Gs=Rs?1:2),bd());break;case La:Os||(wd(),(Rs?1:2)<++Gs&&(Gs=0),bd());break;case Pa:case Ta:wd(),Os=Os?0:1,bd();break;case Ia:case Ea:case Sa:case Ba:kd()}}var Id=0,Sd=0,xd=!1,Pd=0,Ld={},Td=[],Bd=!1,Od=0,Gd=5,Ad=3500,Nd=0,Ud=0,Fd=0,Vd=!1,Dd=!1,Rd="",Hd=!1,Jd=["cv_thumbdiv","cv_img","cv_infodiv","cv_title","cv_streamon","cv_duration","cv_viwers","cv_quality","cv_cell","cvempty_","channel_vod_scroll","cv_game"],qd=!1,zd=!1,jd="",Xd="",Wd="",Yd="",Kd="",$d=0;function Qd(){Ir.Main_CenterLablesVectorPos=1,Ir.Main_Go=mr,!Ir.Search_isSearching&&Ir.Main_selectedChannel_id&&Md(),Ir.Main_selectedChannel!==jd&&(qd=!1),v_(),Lu("label_side_panel","icon-arrow-circle-left",x),Uu("top_bar_user",Ir.Main_selectedChannelDisplayname),document.body.addEventListener("keydown",fl,!1),qd?(I_(Id),Uu("top_bar_game",zd?N:A),Bu(Jd[10]),cl(),f_()):el()}function Zd(){qd&&rl(),p_(),document.body.removeEventListener("keydown",fl),Tu(Jd[10])}function el(){qd&&rl(),k_("stream_table_channel_vod"),Tu(Jd[10]),Uu("top_bar_game",zd?N:A),Fu(),Ku(),jd=Ir.Main_selectedChannel,Hd=qd=!1,pf=!(Dd=!(Td=[])),Id=Sd=Pd=Ud=Nd=0,xd=!(Ld={}),zu(),tl(),nl()}function tl(){M_(),Bd=!0,Od=0,Ad=3500}function nl(){var e=Pd+Nd;e&&Ud-1<e&&(e=Ud-zr,xd=!0);var t="https://api.twitch.tv/kraken/channels/"+encodeURIComponent(Ir.Main_selectedChannel_id)+"/videos?limit="+zr+"&broadcast_type="+(zd?"highlight":"archive")+"&sort=time&offset="+e;pu&&!Pd?Tf(t,Ad,2,null,il,al):Bf(t,Ad,2,null,il,al,!1)}function al(){++Od<Gd?(Ad+=500,nl()):(Bd=!1,Pd?(xd=!0,ol()):(pf=!1,Vu(),Yu(T)))}function il(e){var t=JSON.parse(e),n=t.videos.length;Ud=parseInt(t._total),n<zr&&(xd=!0);var a=Pd;Vd=!(Pd+=n);var i=n/jr;0<n%jr&&i++;var o,s,d,l,c,r,u,_=0,f=document.getElementById("stream_table_channel_vod");if(!Hd){Hd=!0,d=document.createElement("tr");var m='<i class="icon-movie-play stream_channel_fallow_icon"></i>'+ka+ka+p;(Ar=document.createElement("td")).setAttribute("id",Jd[8]+"y_0"),Ar.className="stream_cell",Ar.innerHTML='<div id="'+Jd[0]+'y_0" class="stream_thumbnail_channel_vod" ><div id="'+Jd[3]+'y_0" class="stream_channel_fallow_game">'+m+"</div></div>",d.appendChild(Ar),f.appendChild(d)}for(var h=0;h<i;h++){for(s=a/jr+h,d=document.createElement("tr"),o=0;o<jr&&_<n;o++,_++)c=(l=t.videos[_])._id,r=-1!==((u=l.preview.template)+"").indexOf("404_processing"),s||o||!r||(r=!1,u=wu),r||Ld[c]?o--:(Ld[c]=1,d.appendChild(GS(s,s+"_"+o,[c,l.length,l.channel.broadcaster_language,l.game,l.channel.name,l.increment_view_count_url],[u.replace("{width}x{height}",du),ax.parse(l.title),V+y_(l.created_at),$t+v+l.game,i_(l.views)+R,o_(l.resolutions.chunked.slice(-4),parseInt(l.fps.chunked)||0,l.channel.broadcaster_language),D+Tp(l.length),l.animated_preview_url],Jd)));for(;o<jr;o++)xd&&!Dd&&(Dd=!0,Pd=s*jr+o),d.appendChild(P_(Jd[9]+s+"_"+o)),Td.push(Jd[9]+s+"_"+o);f.appendChild(d)}ol()}function ol(){if(qd?(ju(Sd,Id,jr,Pd),C_(wu)):(Vd?Yu(B+(zd?N:A)+O+S):(qd=!0,C_(wu),cl(),f_()),Bu(Jd[10]),pf=!1,Vu()),0<Td.length&&!xd)return tl(),void sl();Bd=!(Td=[])}function sl(){Wu(Td.length);var e=Pd+Nd;e&&Ud-1<e&&(e=Ud-eu,xd=!0),Lf("https://api.twitch.tv/kraken/channels/"+encodeURIComponent(Ir.Main_selectedChannel_id)+"/videos?limit="+eu+"&broadcast_type="+(zd?"highlight":"archive")+"&sort=time&offset="+e,Ad,2,null,ll,dl)}function dl(){++Od<Gd?(Ad+=500,sl()):(xd=!0,Pd-=Td.length,Td=[],ol())}function ll(e){var t,n,a=JSON.parse(e),i=a.videos.length,o=0,s=0,d=[];for(Ud=parseInt(a._total);o<Td.length&&s<i;o++,s++)n=(t=a.videos[s])._id,-1!==(t.preview.template+"").indexOf("404_processing")||Ld[n]?o--:(Ld[n]=1,NS(Td[o],[n,t.length,t.channel.broadcaster_language,t.game,t.channel.name,t.increment_view_count_url],[t.preview.template.replace("{width}x{height}",du),ax.parse(t.title),V+y_(t.created_at),$t+v+t.game,i_(t.views)+R,o_(t.resolutions.chunked.slice(-4),parseInt(t.fps.chunked)||0,t.channel.broadcaster_language),D+Tp(t.length),t.animated_preview_url],Jd),d.push(o));for(o=d.length-1;-1<o;o--)Td.splice(d[o],1);Nd+=s,xd&&(Pd-=Td.length,Td=[]),ol()}function cl(){Id<0?ul():(J_(Id,Sd,Jd,jr,Pd),jS(Jd,Id+"_"+Sd),Pd/jr<Id+Xr&&!xd&&!Bd&&(tl(),nl()),Pr&&rl())}function rl(){window.clearInterval(iS),-1<Id&&Pd?(Bu(Jd[1]+Id+"_"+Sd),$_(Id+"_"+Sd,Jd)):_l()}function ul(){Gu(Jd[0]+"y_0",cu)}function _l(){Au(Jd[0]+"y_0",cu)}function fl(e){var t;if(!pf&&!R_())switch(D_(),e.keyCode){case Oa:a_()?n_():Zu()?Qu():(rl(),gf(fl));break;case xa:if(d_(Id,Sd-1,Jd[0]))rl(),Sd--,cl();else for(t=jr-1;-1<t;t--)if(d_(Id-1,t,Jd[0])){rl(),Id--,Sd=t,cl();break}break;case La:d_(Id,Sd+1,Jd[0])?(rl(),Sd++,cl()):d_(Id+1,0,Jd[0])&&(rl(),Id++,Sd=0,cl());break;case Pa:if(-1!==Id||Vd)if(Id){for(t=0;t<jr;t++)if(d_(Id-1,Sd-t,Jd[0])){rl(),Id--,Sd-=t,cl();break}}else rl(),Id=-1,ul();else Id=0,_l(),cl();break;case Ta:if(-1!==Id||Vd){for(t=0;t<jr;t++)if(d_(Id+1,Sd-t,Jd[0])){rl(),Id++,Sd-=t,cl();break}}else Id=0,_l(),cl();break;case Ia:case Ea:case Sa:case Ba:-1===Id?(Mf("ChannelVod_highlight",(zd=!zd)?"true":"false"),el()):W_(Id+"_"+Sd,Jd,fl)}}var ml,hl,pl,vl,gl=0,yl=10,bl=!1,wl=0,kl=null,Cl=!1,Ml=0,El={},Il={};function Sl(){zl(),Ir.Play_ChatForceDisable?($l||_c(),Cl=!1,ef(function(){xl(wl=(new Date).getTime())})):Hc()}function xl(e){gl=0,Pl(e)}function Pl(e){var t="https://badges.twitch.tv/v1/badges/channels/"+Ir.Play_selectedChannel_id+"/display",n=new XMLHttpRequest;n.open("GET",t,!0),n.timeout=1e4,n.ontimeout=function(){},n.onreadystatechange=function(){if(4===n.readyState){if(200===n.status)return void(wl===e&&Tl(n.responseText,e));wl===e&&Ll(e)}},n.send(null)}function Ll(e){gl++,wl===e&&(gl<yl?Pl(e):hl=window.setTimeout(function(){Pl(e)},1e3))}function Tl(e,t){tx(JSON.parse(e).badge_sets).forEach(function(t){t.versions.forEach(function(e){nx(t.type,e.type,e.image_url_4x,Yl)})}),El[Ir.Play_selectedChannel_id]?wl===t&&Nl():Bl(t)}function Bl(e){gl=0,Ol(e)}function Ol(e){var t="https://api.betterttv.net/2/channels/"+encodeURIComponent(Ir.Play_selectedChannel),n=new XMLHttpRequest;n.open("GET",t,!0),n.timeout=1e4,n.ontimeout=function(){},n.onreadystatechange=function(){4===n.readyState&&(200===n.status?wl===e&&Al(n.responseText,e):404===n.status?(El[Ir.Play_selectedChannel_id]=1,wl===e&&Nl()):wl===e&&Gl(e))},n.send(null)}function Gl(e){gl++,wl===e&&(gl<yl?Ol(e):wl===e&&Nl())}function Al(t,e){(t=JSON.parse(t)).emotes.forEach(function(e){Il[e.code]={restrictions:e.restrictions,code:e.code,source:"bttv",id:e.id,"1x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","1x"),"2x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","2x"),"3x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","3x")}}),El[Ir.Play_selectedChannel_id]=1,wl===e&&Nl()}function Nl(){Vl(),Ul()}function Ul(){(kl=new ReconnectingWebSocket("wss://irc-ws.chat.twitch.tv","irc",{reconnectInterval:3e3})).onopen=function(){kl.send("PASS blah\r\n"),kl.send("NICK justinfan12345\r\n"),kl.send("CAP REQ :twitch.tv/commands twitch.tv/tags\r\n"),kl.send("JOIN #"+Ir.Play_selectedChannel+"\r\n")},kl.onclose=function(){bl=!0},kl.onmessage=function(e){var t=window.parseIRC(e.data.trim());if(t.command)switch(t.command){case"PING":kl.send("PONG "+t.params[0]);break;case"JOIN":Cl=!0,Hl('&nbsp;<span class="message">'+la+wn+Ir.Play_selectedChannelDisplayname+" "+_+"</span>");break;case"PRIVMSG":Dl(t)}},pl=window.setTimeout(Fl,5e3)}function Fl(){Cl?vl=window.setInterval(Jl,1e3):(kl.close(1e3),Nl())}function Vl(){window.clearTimeout(pl)}function Dl(e){var t="",n=e.tags;if(n.hasOwnProperty("badges")&&"string"==typeof n.badges&&n.badges.split(",").forEach(function(e){e=e.split("/"),t+='<span class="'+e[0]+"-"+e[1]+' tag"></span>'}),n.hasOwnProperty("display-name")){var a=n["display-name"];"string"==typeof a&&(t+='<span class="nick" style="color: #'+oc[a.charCodeAt(0)%sc]+';">'+a+"</span>&#58;&nbsp;")}var i=e.params[1];i=i.replace(/</g,"&lt;").replace(/>/g,"&gt;"),/^\x01ACTION.*\x01$/.test(i)&&(i=i.replace(/^\x01ACTION/,"").replace(/\x01$/,"").trim());var o={};n.hasOwnProperty("emotes")&&"string"==typeof n.emotes&&(n.emotes=n.emotes.split("/"),n.emotes.forEach(function(t){t=t.split(":"),o[t[0]]||(o[t[0]]=[]),t[1].split(",").forEach(function(e){e=e.split("-"),o[t[0]].push([parseInt(e[0]),parseInt(e[1])])})})),Hl(t+='<span class="message">'+Rl(ex(i,o))+"</span>")}function Rl(e){for(var t=0;t<e.length;t++)"string"==typeof e[t]?e[t]=ZS(e[t]):e[t]=e[t][0];return ax.parse(e.join(" "),!0,!0)}function Hl(e){var t=document.createElement("div");t.className="chat_line",t.innerHTML=e,Yl.appendChild(t),Jl(),100<++Ml&&(Ml=0,qc())}function Jl(){Yl.scrollTop=Yl.scrollHeight}function ql(){Vl(),window.clearTimeout(hl),window.clearTimeout(ml),window.clearInterval(vl)}function zl(){ql(),kl&&kl.close(1e3),wl=0,k_("chat_box"),Cl=bl=!1}var jl,Xl,Wl,Yl,Kl,$l=!1,Ql=0,Zl=[],ec=[],tc=10,nc=null,ac=0,ic="",oc=["ff0000","ff4000","ff8000","ffbf00","ffff00","bfff00","80ff00","40ff00","00ff00","00ff40","00ff80","00ffbf","00ffff","00bfff","0080ff","0040ff","ff00ff","ff00bf","ff0080","ff0040"],sc=oc.length,dc=0,lc=!1,cc=0;function rc(){Yl=document.getElementById("chat_box"),_c()}function uc(){Nc(),pu&&Ir.Play_ChatForceDisable?($l||_c(),ef(function(){bc(cc=(new Date).getTime())})):Hc()}function _c(){Ql=0,$l=!(Il={}),fc()}function fc(){Bf("https://badges.twitch.tv/v1/badges/global/display",1e4,0,null,hc,mc,!1)}function mc(){++Ql<tc?fc():$l=!1}function hc(e){tx(JSON.parse(e).badge_sets).forEach(function(t){t.versions.forEach(function(e){nx(t.type,e.type,e.image_url_4x,null)})}),pc()}function pc(){Ql=0,vc()}function vc(){Bf("https://api.betterttv.net/2/emotes",1e4,0,null,yc,gc,!1)}function gc(){++Ql<tc?vc():$l=!1}function yc(t){(t=JSON.parse(t)).emotes.forEach(function(e){Il[e.code]={restrictions:e.restrictions,code:e.code,source:"bttv",id:e.id,"1x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","1x"),"2x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","2x"),"3x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","3x")}}),$l=!0}function bc(e){Ql=0,wc(e)}function wc(e){var t="https://badges.twitch.tv/v1/badges/channels/"+Ir.Main_selectedChannel_id+"/display",n=new XMLHttpRequest;n.open("GET",t,!0),n.timeout=1e4,n.ontimeout=function(){},n.onreadystatechange=function(){if(4===n.readyState){if(200===n.status)return void(cc===e&&Cc(n.responseText,e));cc===e&&kc(e)}},n.send(null)}function kc(e){Ql++,cc===e&&(Ql<tc?wc(e):Kl=window.setTimeout(function(){wc(e)},1e3))}function Cc(e,t){tx(JSON.parse(e).badge_sets).forEach(function(t){t.versions.forEach(function(e){nx(t.type,e.type,e.image_url_4x,Yl)})}),cc===t&&xc(t),El[Ir.Main_selectedChannel_id]?cc===t&&xc(t):Mc(t)}function Mc(e){Ql=0,Ec(e)}function Ec(e){var t="https://api.betterttv.net/2/channels/"+encodeURIComponent(Ir.Main_selectedChannel),n=new XMLHttpRequest;n.open("GET",t,!0),n.timeout=1e4,n.ontimeout=function(){},n.onreadystatechange=function(){4===n.readyState&&(200===n.status?cc===e&&Sc(n.responseText,e):404===n.status?(El[Ir.Main_selectedChannel_id]=1,cc===e&&xc()):cc===e&&Ic(e))},n.send(null)}function Ic(e){Ql++,cc===e&&(Ql<tc?Ec(e):cc===e&&xc())}function Sc(t,e){(t=JSON.parse(t)).emotes.forEach(function(e){Il[e.code]={restrictions:e.restrictions,code:e.code,source:"bttv",id:e.id,"1x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","1x"),"2x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","2x"),"3x":"https:"+t.urlTemplate.replace("{{id}}",e.id).replace("{{image}}","3x")}}),El[Ir.Main_selectedChannel_id]=1,cc===e&&xc()}function xc(e){Ql=0,cc===e&&Pc(e)}function Pc(e){var t="https://api.twitch.tv/v5/videos/"+Ir.ChannelVod_vodId+"/comments?client_id="+tu+(ac?"&content_offset_seconds="+parseInt(ac):""),n=new XMLHttpRequest;n.open("GET",t,!0),n.timeout=1e4,n.ontimeout=function(){},n.onreadystatechange=function(){if(4===n.readyState){if(200===n.status)return void(cc===e&&Tc(n.responseText,e));cc===e&&Lc(e)}},n.send(null)}function Lc(e){Ql++,cc===e&&(Ql<tc?Pc(e):Xl=window.setTimeout(function(){Pc(e)},2500))}function Tc(e,t){e=JSON.parse(e);var n,a,i=null===nc;i&&(n="&nbsp;",n+='<span class="message">',n+=la+wn+Ir.Main_selectedChannelDisplayname+" "+ic,Bc(n+="</span>",0)),ac=0,nc=e._next,e.comments.forEach(function(e){n="",(a=e.message).hasOwnProperty("user_badges")&&a.user_badges.forEach(function(e){n+='<span class="'+e._id+"-"+e.version+' tag"></span>'}),n+='<span class="nick" style="color: #'+oc[e.commenter.display_name.charCodeAt(0)%sc]+';">'+e.commenter.display_name+"</span>&#58;&nbsp;",n+='<span class="message">',a.fragments.forEach(function(e){e.hasOwnProperty("emoticon")?n+='<img class="emoticon" src="https://static-cdn.jtvnw.net/emoticons/v1/'+e.emoticon.emoticon_id+'/1.0" srcset="https://static-cdn.jtvnw.net/emoticons/v1/'+e.emoticon.emoticon_id+"/2.0 2x, https://static-cdn.jtvnw.net/emoticons/v1/"+e.emoticon.emoticon_id+'/3.0 4x">':n+=Rl([e.text])}),n+="</span>",i?Bc(n,e.content_offset_seconds):void 0!==nc&&Oc(n,e.content_offset_seconds)}),i&&cc===t&&(Gc(t),void 0!==nc&&Fc(t))}function Bc(e,t){Zl.push({time:t,message:e})}function Oc(e,t){ec.push({time:t,message:e})}function Gc(e){lc||cc!==e||(jl=window.setInterval(function(){Uc(e),Yl.scrollTop=Yl.scrollHeight},1e3))}function Ac(){lc||(window.clearTimeout(Kl),window.clearTimeout(Xl),window.clearTimeout(Wl),window.clearInterval(jl))}function Nc(){Ac(),cc=0,k_("chat_box"),lc=!1,nc=null,Zl=[],ec=[],dc=0}function Uc(e){var t;if(dc<Zl.length-1)for(var n=dc;n<Zl.length&&Zl[n].time<$d+Android.gettime()/1e3;n++,dc++)(t=document.createElement("div")).className="chat_line",t.innerHTML=Zl[n].message,Yl.appendChild(t);else if(Ac(),void 0!==nc)Zl=ec.slice(),dc=0,Gc(e),ec=[],cc===e&&Fc(e),qc();else{var a="&nbsp;";a+='<span class="message">',a+=la+la+En+la+la,a+="</span>",(t=document.createElement("div")).className="chat_line",t.innerHTML=a,Yl.appendChild(t),lc=!0,Yl.scrollTop=Yl.scrollHeight,window.clearInterval(jl),jl=window.setInterval(function(){Yl.scrollTop=Yl.scrollHeight},1e3)}}function Fc(e){Ql=0,lc||cc!==e||Vc(e)}function Vc(e){var t="https://api.twitch.tv/v5/videos/"+Ir.ChannelVod_vodId+"/comments?client_id="+tu+(null!==nc?"&cursor="+nc:""),n=new XMLHttpRequest;n.open("GET",t,!0),n.timeout=1e4,n.ontimeout=function(){},n.onreadystatechange=function(){if(4===n.readyState){if(200===n.status)return void(lc||cc!==e||Tc(n.responseText,e));lc||cc!==e||Dc(e)}},n.send(null)}function Dc(e){Ql++,cc===e&&(Ql<tc?Vc(e):Wl=window.setTimeout(function(){Vc(e)},2500))}function Rc(){Nc(),Jc(cn+la+rn)}function Hc(){Nc(),Jc(ea)}function Jc(e){var t="&nbsp;";t+='<span class="message">',t+=la+la+la+la+la+la+la+la+la+la,t+=e,t+="</span>";var n=document.createElement("div");n.className="chat_line",n.innerHTML=t,Yl.appendChild(n)}function qc(){var e=document.getElementsByClassName("chat_line");if(0<e.length-100)for(var t=0;t<e.length-100;t++)e[0].parentNode.removeChild(e[0]);Jl()}var zc,jc,Xc,Wc,Yc,Kc,$c,Qc=!0,Zc=!1,er=!1,tr=-1,nr=new Image,ar=1,ir=2,or=3,sr=4,dr=5,lr=6,cr=7,rr=8,ur=9,_r=10,fr=11,mr=12,hr=13,pr=14,vr=15,gr=16,yr=17,br=18,wr=19,kr=20,Cr=21,Mr=22,Er="",Ir={Main_Go:1,Main_Before:1,Main_BeforeSearch:1,Main_BeforeChannel:1,Main_BeforeAgame:or,Main_BeforeChannelisSet:!1,Main_BeforeAgameisSet:!1,Main_selectedChannel:"",Main_selectedChannelDisplayname:"",Main_selectedChannelLogo:"",Main_selectedChannel_id:"",Main_gameSelected:"",Main_OldgameSelected:null,Play_isHost:!1,Play_DisplaynameHost:"",Play_selectedChannelDisplayname:"",Play_selectedChannel:"",Play_gameSelected:"",Users_Position:0,Users_AddcodePosition:0,Play_WasPlaying:0,ChannelVod_vodId:"",vodOffset:0,Search_data:"",isLastSChannels:!1,gameSelectedOld:"",Games_return:!1,Search_isSearching:!1,Play_ChatForceDisable:!1,Never_run:!0,Main_CenterLablesVectorPos:0},Sr=!0,xr=!0,Pr=!1,Lr=[],Tr=0,Br=0,Or=null,Gr=!0,Ar="",Nr=!1,Ur="",Fr=["label_side_panel","label_refresh","top_bar_live","top_bar_user","top_bar_featured","top_bar_game","top_bar_vod","top_bar_clip"],Vr=[],Dr=0,Rr=!0,Hr=0,Jr=1.35,qr=1.5,zr=45,jr=3,Xr=Math.floor(zr/jr/qr),Wr=45,Yr=5,Kr=Math.floor(Wr/Yr/Jr),$r=48,Qr=6,Zr=Math.floor($r/Qr/qr),eu=6,tu="5seja5ptej058mxqy7gh5tcudjqtm9",nu="Client-ID",au="Accept",iu="Authorization",ou="OAuth ",su="application/vnd.twitchtv.v5+json",du="528x297",lu="340x475",cu="stream_thumbnail_focused",ru="data_attribute",uu="1.0",_u=".15",fu="043019",mu=uu+_u+"-"+fu,hu=0,pu=0,vu="?"+Math.random(),gu="https://fgl27.github.io/SmartTwitchTV/release/githubio/images/",yu=gu+"404_game.png",bu=gu+"404_logo.png",wu=gu+"404_video.png",ku="https://cors-anywhere.herokuapp.com/",Cu=function(e,t,n){e.onerror=function(){this.src=n},e.src=t};function Mu(){(er=Sf("Main_isDebug",!1))&&Qc?Eu():"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){Iu(window.navigator.userLanguage||window.navigator.language)}):Iu(window.navigator.userLanguage||window.navigator.language)}function Eu(){console.log("Debug mod start");var e=document.createElement("script");e.src="https://fgl27.github.io/SmartTwitchTV/release/githubio/js/masterdebug.js",document.head.appendChild(e)}function Iu(e){Q_(),ef(function(){try{(pu=Android.getAndroid())&&(yu=(gu="file:///android_asset/")+"404_game.png",bu=gu+"404_logo.png",wu=gu+"404_video.png")}catch(e){pu=0,document.body.style.backgroundColor="rgba(0, 0, 0, 1)",Zc=er=!0,console.log("Main_isReleased: "+Qc),console.log("Main_isDebug: "+er),console.log("Main_isBrowser: "+Zc)}Dk(),Ma(),cC(),console.log("language is "+e),Ca(),-1!==window.location.href.indexOf("code")&&Pf(window.location.href),Su()})}function Su(){Vy(),xu(!0),zc=document.getElementById("scrollbar"),m_(),Er=Ir.Main_Go,ef(function(){rc(),$h(),Zi(),eo()&&($c=window.setInterval(of,6e5),of()),document.body.addEventListener("keyup",F_,!1),Dy(),document.getElementById("side_panel").style.marginLeft="",b_(),Pu(),MS=Sf("Vod_highlight",!1),zd=Sf("ChannelVod_highlight",!1),fs=Sf("AGameVod_highlight",!1),UI=Sf("UserVod_highlight",!1),bS=Ef("vod_periodNumber",2),cs=Ef("AGameVod_periodNumber",2),OI=Ef("UserVod_TypeNumber",1),Sy(),jc=document.getElementById("search_input"),Xc=document.getElementById("user_input"),x_(wu),x_(yu),x_(bu),document.addEventListener("visibilitychange",nf,!1),Yc=window.setInterval(af,6e4),Fy=hb,Jy(),Wc=window.setTimeout(c_,5e3),Bu("topbar")})}function xu(e){af(),Lu("label_refresh","icon-refresh",t+Wt),Nu("label_update",'<div class="strokedextramini" style="vertical-align: middle; display: inline-block;"><i class="icon-arrow-up" style="color: #FF0000; font-size: 115%; "></i></div><div class="strokedextramini" style="vertical-align: middle; display: inline-block; color: #FF0000">'+ka+ft+"</div>"),Lu("label_side_panel","icon-ellipsis",Fn),Lu("icon_feed_refresh","icon-refresh",t+" Press up"),Uu("top_bar_live",_),Uu("top_bar_user",e?u:a),Uu("top_bar_featured",on),Uu("top_bar_game",f),Uu("top_bar_vod",Zt),Uu("top_bar_clip",U),Nu("scene2_search_text",ka+n),Nu("scene2_channel_text",ka+Ut),Nu("scene2_game_text",ka+Ht),Uu("dialog_end_replay_text",tn),Uu("dialog_end_vod_text",dn),Uu("dialog_end_channel_text",Ut),Uu("dialog_end_game_text",Ht),Nu("dialog_about_text",ga+ya),Vr=[le,ce,re,ue],e?Gk():(Vk(),b_())}function Pu(){Uu("play_dialog_exit_text",J),Uu("side_panel_search",n),Uu("side_panel_settings",a),Uu("side_panel_about",i),Uu("side_panel_controls",e),Uu("side_panel_exit",z),Uu("side_panel_live",_),Uu("side_panel_user",u),Uu("side_panel_featured",on),Uu("side_panel_games",f),Uu("side_panel_videos",Zt),Uu("side_panel_clips",U),Uu("side_panel_hide",o),Uu("chanel_button",I),Uu("game_button",f),Uu("live_button",_),Uu("exit_app_cancel",W),Uu("exit_app_close",j),Uu("remove_cancel",W),Uu("remove_yes",Jt),Uu("exit_app_minimize",X),Uu("main_dialog_exit_text",q),Nu("dialog_controls_text",va),Uu("dialog_vod_text",kn),Nu("dialog_vod_start_text",Mn)}function Lu(e,t,n){Nu(e,'<div class="strokedextramini" style="vertical-align: middle; display: inline-block;"><i class="'+t+'" style="color: #FFFFFF; font-size: 115%; "></i></div><div class="strokedextramini" style="vertical-align: middle; display: inline-block">'+ka+n+"</div>")}function Tu(e){document.getElementById(e).classList.add("hide")}function Bu(e){document.getElementById(e).classList.remove("hide")}function Ou(e){return-1===document.getElementById(e).className.indexOf("hide")}function Gu(e,t){document.getElementById(e).classList.add(t)}function Au(e,t){document.getElementById(e).classList.remove(t)}function Nu(e,t){document.getElementById(e).innerHTML=t}function Uu(e,t){document.getElementById(e).textContent=t}function Fu(){I_(-1),pu?Android.mshowLoading(!0):Bu("dialog_loading")}function Vu(){pu?Android.mshowLoading(!1):Tu("dialog_loading")}function Du(){window.clearTimeout(Or)}function Ru(){Or=window.setTimeout(Ju,6e3)}function Hu(){Ru(),Bu("main_dialog_exit"),document.body.addEventListener("keydown",ff,!1)}function Ju(){document.body.removeEventListener("keydown",ff,!1),gf(Kc),Du(),Tu("main_dialog_exit"),Br=0,qu()}function qu(){Au("exit_app_cancel","button_search_focused"),Au("exit_app_minimize","button_search_focused"),Au("exit_app_close","button_search_focused"),Gu(Br?1===Br?"exit_app_minimize":"exit_app_close":"exit_app_cancel","button_search_focused")}function zu(){k_("dialog_counter_text"),Xu(0,0,0)}function ju(e,t,n,a){0<a?(Uu("dialog_counter_text",t*n+(e+1)+"/"+a),Xu(t,n,a)):zu()}function Xu(e,t,n){var a=screen.height/100*7;if(3===t&&9<n||5===t&&10<n||6===t&&12<n){var i=Ir.Main_Go===sr||Ir.Main_Go===wr||Ir.Main_Go===kr||Ir.Main_Go===mr||Ir.Main_Go===Mr||Ir.Main_Go===yr||Ir.Main_Go===br||Ir.Main_Go===hr,o=Math.ceil((screen.height-3*a)/(Math.ceil(n/t)-1)*e+a*(i?1.8:1));zc.style.top=o+"px",Gr&&(Gr=!1,zc.style.backgroundColor="#777777")}else zc.style.backgroundColor="#000000",zc.style.top=a+"px",Gr=!0}function Wu(e){(eu=12)/3<e&&(eu=3*e),99<eu&&(eu=99)}function Yu(e){Uu("dialog_warning_text",e),Bu("dialog_warning")}function Ku(){Tu("dialog_warning")}function $u(){n_(),Bu("dialog_about")}function Qu(){Tu("dialog_about")}function Zu(){return Ou("dialog_about")}function e_(){n_(),Ku(),h_(Ir.Main_Go),zu(),Bk()}function t_(){Qu(),Bu("dialog_controls")}function n_(){Tu("dialog_controls")}function a_(){return Ou("dialog_controls")}function i_(e){return(e+"").replace(/\B(?=(\d{3})+(?!\d))/g,",")}function o_(e,t,n){return(e+="").indexOf("x")||(e=e.slice(-3)),e+"p"+(t=58<t?60:t<32?30:Math.ceil(t))+(""!==n?" ["+n.toUpperCase()+"]":"")}function s_(e){return-1!==e.indexOf("live")?"":Y}function d_(e,t,n){return null!==document.getElementById(n+e+"_"+t)}function l_(){af(),u_(),document.body.addEventListener("keyup",F_,!1)}function c_(){for(var e,t=0;t<Fr.length;t++)t<2?document.getElementById(Fr[t]).style.opacity="0.5":-1===(e=document.getElementById(Fr[t])).className.indexOf("icon_center_focus")&&(e.style.opacity="0.5");Gu("topbar","topbar_dim")}function r_(){for(var e=0;e<Fr.length;e++)document.getElementById(Fr[e]).style.opacity="1";Au("topbar","topbar_dim")}function u_(e){window.clearTimeout(Wc),r_(),ef(function(){__(e)})}function __(e){Ir.Main_Go!==fr&&(Ir.Main_BeforeChannelisSet=!1),Ir.Main_Go!==sr&&(Ir.Main_BeforeAgameisSet=!1),zu(),Ir.Main_Go===ar?(Fy=hb,Jy()):Ir.Main_Go===ir?Hi():Ir.Main_Go===or?(Fy=fb,Jy()):Ir.Main_Go===sr?So():Ir.Main_Go===rr?Rw():Ir.Main_Go===ur?Iw():Ir.Main_Go===_r?fk():Ir.Main_Go===fr?ed():Ir.Main_Go===mr?Qd():Ir.Main_Go===hr?(Fy=ub,Jy()):Ir.Main_Go===pr?tI():Ir.Main_Go===dr?LE():Ir.Main_Go===lr?uM():Ir.Main_Go===cr?(Fy=mb,Jy()):Ir.Main_Go===vr?AC():Ir.Main_Go===gr?Qb():Ir.Main_Go===yr?SS():Ir.Main_Go===br?(Fy=rb,Jy()):Ir.Main_Go===wr?hs():Ir.Main_Go===kr?(Fy=_b,Jy()):Ir.Main_Go===Cr?(Fy=pb,Jy()):Ir.Main_Go===Mr&&FI(),Wc=window.setTimeout(c_,3e3),e&&kf()}function f_(){Mf("Main_values",JSON.stringify(Ir))}function m_(){Ir=Hy(Ir,If("Main_values",{}))}function h_(e){e===ar?qy():e===ir?Ji():e===or?qy():e===sr?xo():e===rr?Hw():e===ur?Sw():e===_r?mk():e===fr?td():e===mr?Zd():e===hr?qy():e===pr?nI():e===dr?TE():e===lr?_M():e===cr?qy():e===vr?NC():e===gr?Zb():e===yr?xS():e===br?qy():e===wr?ps():e===kr?qy():e===Cr?qy():e===Mr&&VI(),Ou("settings_scroll")&&Ok()}function p_(){Lu("label_refresh","icon-refresh",t+Wt),Lu("label_side_panel","icon-ellipsis",Fn),Au("top_bar_user","icon_center_focus"),Uu("top_bar_live",_),Uu("top_bar_user",u),Uu("top_bar_featured",on),Uu("top_bar_game",f),Uu("top_bar_vod",Zt),Uu("top_bar_clip",U)}function v_(){Lu("label_side_panel","icon-arrow-circle-left",x),k_("top_bar_live"),k_("top_bar_game"),k_("top_bar_vod"),k_("top_bar_clip"),k_("top_bar_featured"),Gu("top_bar_user","icon_center_focus")}function g_(e){return'<div style="font-size: 30%; position: fixed; line-height: 0; text-shadow: #000000 0 0 5.7px, #000000 0 0 5.7px, #000000 0 0 4px">'+e+"</div>"}function y_(e){return e=new Date(e),Nr?e.getDate()+" "+Yt[e.getMonth()]+", "+e.getFullYear():Yt[e.getMonth()]+" "+e.getDate()+", "+e.getFullYear()}function b_(){if(pu)try{var e=Android.getversion();mu="Android: "+e+" Web: "+fu,w_(e)&&Bu("label_update")}catch(e){}Nu("dialog_about_text",ga+be+mu+ya)}function w_(e){return e=e.split("."),parseFloat(e[0]+"."+e[1])<parseFloat(uu)||parseInt(e[2])<parseInt(_u.split(".")[1])}function k_(e){for(e=document.getElementById(e);e.firstChild;)e.removeChild(e.firstChild)}function C_(e){for(var t,n=0;n<Lr.length;n++)null!==(t=document.getElementById(Lr[n].id))&&Cu(t,Lr[n].src+vu,e)}function M_(){Lr=[]}function E_(e,t){Lr.push({id:e,src:t})}function I_(e){tr=e}function S_(e){var t=0;return tr<e?t=-1:e<tr&&(t=1),tr=e,t}function x_(e){nr.src=e}function P_(e){return(Ar=document.createElement("td")).setAttribute("id",e),Ar.className="stream_cell",Ar}function L_(e,t,n){return(Ar=document.createElement("td")).setAttribute("id",t[4]+e),Ar.setAttribute(ru,n[0]),Ar.setAttribute("data-id",n[1]),Ar.className="stream_cell",Ar.innerHTML=B_(e,t,n),Ar}function T_(e,t,n){var a=document.getElementById(e),i=e.split(n[5])[1];a.setAttribute(ru,t[0]),a.setAttribute("data-id",t[1]),a.innerHTML=B_(i,n,t),a.setAttribute("id",n[4]+i)}function B_(e,t,n){return E_(t[1]+e,n[2]),'<div id="'+t[0]+e+'" class="stream_thumbnail_channel" ><img id="'+t[1]+e+'" class="stream_img"></div><div id="'+t[2]+e+'" class="stream_text"><div id="'+t[3]+e+'" class="stream_channel">'+n[3]+"</div></div>"}function O_(e,t,n,a,i){return e<jr&&x_(i[0]),(Ar=document.createElement("td")).setAttribute("id",a[8]+t),Ar.setAttribute(ru,JSON.stringify(n)),Ar.className="stream_cell",Ar.innerHTML=A_(t,a,i),Ar}function G_(e,t,n,a){var i=document.getElementById(e),o=e.split(a[9])[1];i.setAttribute(ru,JSON.stringify(t)),i.innerHTML=A_(o,a,n),i.setAttribute("id",a[8]+o)}function A_(e,t,n){return E_(t[1]+e,n[0]),'<div id="'+t[0]+e+'" class="stream_thumbnail_video" ><img id="'+t[1]+e+'" class="stream_img"></div><div id="'+t[2]+e+'" class="stream_text"><div id="'+t[3]+e+'" class="stream_channel" style="width: 66%; display: inline-block;">'+n[1]+'</div><div id="'+t[7]+e+'"class="stream_info" style="width:33%; float: right; text-align: right; display: inline-block;">'+n[5]+'</div><div id="'+t[4]+e+'"class="stream_info">'+ax.parse(n[2])+'</div><div id="'+t[5]+e+'"class="stream_info">'+v+n[3]+'</div><div id="'+t[6]+e+'"class="stream_info">'+n[4]+"</div></div>"}function N_(e,t,n){return(Ar=document.createElement("td")).setAttribute("id",t[5]+e),Ar.setAttribute(ru,n[0]),Ar.className="stream_cell",Ar.innerHTML=U_(e,t,n),Ar}function U_(e,t,n){return E_(t[1]+e,n[1]),'<div id="'+t[0]+e+'" class="stream_thumbnail_game" ><img id="'+t[1]+e+'" class="stream_img"></div><div id="'+t[2]+e+'" class="stream_text"><div id="'+t[3]+e+'" class="stream_channel">'+n[0]+'</div><div id="'+t[4]+e+'"class="stream_info_games" style="width: 100%; display: inline-block;">'+n[2]+"</div></div>"}function F_(){xr=!0}function V_(){Sr=!0}function D_(){Sr=!1,window.setTimeout(V_)}function R_(){return!Sr||!xr}function H_(e,t,n,a,i){Gu(n[0]+e+"_"+t,cu),ju(t,e,a,i),S_(e)?1<e?d_(e+1,0,n[0])?K_(n[6],-1*document.getElementById(n[4]+e+"_"+t).offsetTop+.42*screen.height):F_():K_(n[6],.07*screen.height):F_()}function J_(e,t,n,a,i){Gu(n[0]+e+"_"+t,cu),ju(t,e,a,i),S_(e)?e?d_(e+1,0,n[0])&&K_(n[10],-1*document.getElementById(n[8]+(e-1)+"_"+t).offsetTop):K_(n[10],.07*screen.height):F_()}function q_(e,t,n,a,i){Gu(n[0]+e+"_"+t,cu),ju(t,e,a,i),S_(e)?K_(n[10]?n[10]:n[7],e?-1*document.getElementById(n[5]+(e-1)+"_"+t).offsetTop+.025*screen.height:-1*document.getElementById(n[5]+e+"_"+t).offsetTop+.025*screen.height):F_()}function z_(e,t,n){document.body.removeEventListener("keydown",n),Ir.Play_selectedChannel=JSON.parse(document.getElementById(t[8]+e).getAttribute(ru)),Ir.Play_selectedChannel_id=Ir.Play_selectedChannel[1],Ir.Play_selectedChannel=Ir.Play_selectedChannel[0],Ir.Main_Go===lr?(Ir.Play_DisplaynameHost=document.getElementById(t[3]+e).textContent,Ir.Play_selectedChannelDisplayname=Ir.Play_DisplaynameHost.split(ae)[1],Ir.Play_isHost=!0):Ir.Play_selectedChannelDisplayname=document.getElementById(t[3]+e).textContent,Ir.Play_gameSelected=document.getElementById(t[5]+e).textContent.split(v)[1],Ir.Main_Go===sr&&(Ir.Main_OldgameSelected=Ir.Main_gameSelected),j_()}function j_(){document.body.addEventListener("keydown",Xv,!1),Tu("scene1"),Bu("scene2"),ev(),sv(),Cv(),eo()&&!IM&&NM&&lE(),ef(ep)}function X_(e,t,n){document.body.removeEventListener("keydown",n),wb=JSON.parse(document.getElementById(t[8]+e).getAttribute(ru)),im=parseInt(wb[1]),Ir.Play_gameSelected=wb[2],Ir.Main_selectedChannel=wb[3],Ir.Main_selectedChannelDisplayname=wb[4],Ir.Main_selectedChannelLogo=wb[5],Ir.Main_selectedChannel_id=wb[6],Ir.ChannelVod_vodId=wb[7],$d=parseInt(wb[8]),bb=wb[9],Cb=wb[10],gb=wb[11],wb=wb[0],kb=document.getElementById(t[4]+e).textContent,yb=document.getElementById(t[6]+e).textContent,document.body.addEventListener("keydown",Sm,!1),Tu("scene1"),Bu("scene2"),sv(),Kp(),Jp(),jp(),eo()&&!IM&&NM&&lE(),ef(om)}function W_(e,t,n){document.body.removeEventListener("keydown",n),Ir.ChannelVod_vodId=JSON.parse(document.getElementById(t[8]+e).getAttribute(ru)),Fd=parseInt(Ir.ChannelVod_vodId[1]),Rd=Ir.ChannelVod_vodId[2],Ir.Play_gameSelected=Ir.ChannelVod_vodId[3],Ir.Main_selectedChannel=Ir.ChannelVod_vodId[4],Jh=Ir.ChannelVod_vodId[5],Ir.ChannelVod_vodId=Ir.ChannelVod_vodId[0].substr(1),Ir.Main_Go===mr?Xd=document.getElementById(t[3]+e).innerHTML:(Xd="",Ir.Main_selectedChannelDisplayname=document.getElementById(t[3]+e).textContent),Yd=document.getElementById(t[4]+e).textContent,Kd=document.getElementById(t[5]+e).textContent,Wd=document.getElementById(t[11]+e).innerHTML+", "+document.getElementById(t[6]+e).textContent,Y_()}function Y_(){document.body.addEventListener("keydown",Uy,!1),Tu("scene1"),Bu("scene2"),uy(),sv(),Kp(),jp(),Tg=!1,eo()&&!IM&&NM&&lE(),ef(Fg)}function K_(e,t){document.getElementById(e).style.top=t+"px",window.setTimeout(F_,10)}function $_(e,t){xr=!1,Au(t[0]+e,cu)}function Q_(){var e=document.createElement("span");e.className="fa",e.style.display="none",document.body.insertBefore(e,document.body.firstChild),"icons"!==window.getComputedStyle(e,null).getPropertyValue("font-family")?(er&&console.log("Main_Checktylesheet reloading"),Z_("https://fgl27.github.io/SmartTwitchTV/release/githubio/css/icons.min.css")):er&&console.log("Main_Checktylesheet loaded OK"),document.body.removeChild(e)}function Z_(e){var t=document.createElement("link");t.rel="stylesheet",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)}function ef(e){"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?window.setTimeout(e):document.addEventListener("DOMContentLoaded",e)}function tf(){var e=(new Date).getTime()+hu;return e=new Date(e),(Nr?Kt[e.getDay()]+" "+e.getDate()+"/"+Yt[e.getMonth()]:Kt[e.getDay()]+" "+Yt[e.getMonth()]+"/"+e.getDate())+" "+Lp(e.getHours())+":"+Lp(e.getMinutes())}function nf(){document.hidden||(af(),window.setTimeout(af,2e4))}function af(){document.hidden||(Uu("label_clock",tf()),vu="?"+Math.random())}function of(){document.hidden||eo()&&window.setTimeout(function(){QM()||IM||(qm=Fi[Ir.Users_Position].name,DM())},5e3)}function sf(){Gu("side_panel_"+Hr,"side_panel_text_focus")}function df(){Au("side_panel_"+Hr,"side_panel_text_focus")}function lf(){Hr?1===Hr?e_():2===Hr?(document.body.addEventListener("keydown",Kc,!1),$u()):3===Hr?(document.body.addEventListener("keydown",Kc,!1),t_()):4===Hr?Hu(Kc):5===Hr?cf(ar):6===Hr?cf(so()?pr:ir):7===Hr?cf(Cr):8===Hr?cf(or):9===Hr?cf(yr):10===Hr&&cf(br):Ir.Main_Go!==rr?(Ir.Search_isSearching||Ir.Main_Go!==fr&&Ir.Main_Go!==hr&&Ir.Main_Go!==mr||Cd(),Ir.Main_BeforeSearch=Ir.Main_Go,Ir.Main_Go=rr,h_(Ir.Main_BeforeSearch),u_()):document.body.addEventListener("keydown",Kc,!1),uf()}function cf(e){e===Ir.Main_Go?document.body.addEventListener("keydown",Kc,!1):(Ir.Main_Before=Ir.Main_Go,Ir.Main_Go=e,h_(Ir.Main_Before),u_())}function rf(e){Kc=e,document.body.removeEventListener("keydown",Kc),document.body.addEventListener("keydown",_f,!1),Au("side_panel","side_panel_hide")}function uf(){document.body.removeEventListener("keydown",_f),Gu("side_panel","side_panel_hide"),df(),Hr=0,sf()}function _f(e){switch(e.keyCode){case Oa:case xa:document.body.addEventListener("keydown",Kc,!1),uf(),bf();break;case Pa:Hr&&(df(),Hr--,sf());break;case Ta:Hr<10&&(df(),Hr++,sf());break;case Ba:lf()}}function ff(e){switch(e.keyCode){case Oa:Ju();break;case La:2<++Br&&(Br=0),qu(),Du(),Ru();break;case xa:--Br<0&&(Br=2),qu(),Du(),Ru();break;case Ba:Br?pu&&1===Br?Android.mclose(!1):pu&&2===Br&&Android.mclose(!0):Ju()}}Mu();var mf=["top_bar_live","top_bar_user","top_bar_featured","top_bar_game","top_bar_vod","top_bar_clip"],hf=[ar,pr,Cr,or,yr,br],pf=!1;function vf(e){if(!(pf||Fy.FirstLoad||R_()))switch(e.keyCode){case Oa:a_()?(bf(),n_()):Zu()?(bf(),Qu()):Ir.Main_Go===sr?(Ir.Main_OldgameSelected=Ir.Main_gameSelected,Ir.Games_return?(Ir.Main_Go=ur,Ir.Main_gameSelected=Ir.gameSelectedOld):(Ir.Main_Go=Ir.Main_BeforeAgame,Ir.Main_BeforeAgame=ar),xo(),yf(),__()):Ir.Main_Go===kr?(sb(sr),yf(),__()):Ir.Main_Go===cr?(sb(pr),yf(),__()):Ir.Main_Go===hr?(sb(fr),yf(),__()):Ir.Main_Go===wr?(Ir.Main_Go=sr,ps(),yf(),__()):Ir.Main_Go===dr?(Ir.Main_Go=pr,TE(),yf(),__()):Ir.Main_Go===lr?(Ir.Main_Go=pr,_M(),yf(),__()):Ir.Main_Go===Mr?(Ir.Main_Go=pr,VI(),yf(),__()):Ir.Main_Go===vr?(Ir.Main_Go=pr,NC(),yf(),__()):Ir.Main_Go===fr?(Ir.Main_Go=Ir.Main_BeforeChannel,Ir.Main_BeforeChannel=ar,td(),Ir.Main_selectedChannel_id="",yf(),__()):Ir.Main_Go===mr?(Ir.Main_Go=fr,Zd(),yf(),__()):Ir.Main_Go===_r?(Ir.Main_Go===Ir.Main_BeforeSearch?Ir.Main_Go=ar:Ir.Main_Go=Ir.Main_BeforeSearch,mk(),Ir.Search_isSearching=!1,yf(),__()):Ir.Main_Go===ur?(Ir.Main_Go===Ir.Main_BeforeSearch?Ir.Main_Go=ar:Ir.Main_Go=Ir.Main_BeforeSearch,Ir.Search_isSearching=!1,Sw(),yf(),__()):Ir.Main_Go===gr?(Ir.Main_Go===Ir.Main_BeforeSearch?Ir.Main_Go=ar:Ir.Main_Go=Ir.Main_BeforeSearch,Ir.Main_selectedChannel_id&&Md(),Zb(),Ir.Search_isSearching=!1,yf(),__()):(yf(),rf(vf));break;case La:if(Ir.Search_isSearching||Ir.Main_Go===fr||Ir.Main_Go===mr||Ir.Main_Go===hr||Ir.Main_Go===_r||Ir.Main_Go===ur||Ir.Main_Go===gr)break;Au(mf[Ir.Main_CenterLablesVectorPos],"icon_center_line"),Ir.Main_CenterLablesVectorPos++,5<Ir.Main_CenterLablesVectorPos&&(Ir.Main_CenterLablesVectorPos=0),bf(),wf();break;case xa:if(Ir.Search_isSearching||Ir.Main_Go===fr||Ir.Main_Go===mr||Ir.Main_Go===hr||Ir.Main_Go===_r||Ir.Main_Go===ur||Ir.Main_Go===gr)break;Au(mf[Ir.Main_CenterLablesVectorPos],"icon_center_line"),Ir.Main_CenterLablesVectorPos--,Ir.Main_CenterLablesVectorPos<0&&(Ir.Main_CenterLablesVectorPos=5),bf(),wf();break;case Ta:Au(mf[Ir.Main_CenterLablesVectorPos],"icon_center_line"),document.body.removeEventListener("keydown",vf),Pr=!1,__();break;case Ba:Cf()}}function gf(e){window.clearTimeout(Wc),r_(),document.body.removeEventListener("keydown",e),document.body.removeEventListener("keydown",vf),document.body.addEventListener("keydown",vf,!1),bf()}function yf(){Au(mf[Ir.Main_CenterLablesVectorPos],"icon_center_line"),document.body.removeEventListener("keydown",vf),Pr=!1}function bf(){Pr=!0,Gu(mf[Ir.Main_CenterLablesVectorPos],"icon_center_line")}function wf(){h_(Ir.Main_Go),Ir.Main_Go=hf[Ir.Main_CenterLablesVectorPos],Ir.Main_Go!==pr||so()?u_(!0):(Ir.Main_Go=ir,yf(),u_())}function kf(){Ir.Main_Go===ar?(Fy=hb,document.body.removeEventListener("keydown",cb)):Ir.Main_Go===pr?document.body.removeEventListener("keydown",vI):Ir.Main_Go===sr?document.body.removeEventListener("keydown",Xo):Ir.Main_Go===Cr?(Fy=pb,document.body.removeEventListener("keydown",cb)):Ir.Main_Go===_r?document.body.removeEventListener("keydown",Ik):Ir.Main_Go===ur?document.body.removeEventListener("keydown",Uw):Ir.Main_Go===gr?document.body.removeEventListener("keydown",_w):Ir.Main_Go===mr?document.body.removeEventListener("keydown",fl):Ir.Main_Go===fr?document.body.removeEventListener("keydown",Ed):Ir.Main_Go===lr?document.body.removeEventListener("keydown",MM):Ir.Main_Go===Mr?document.body.removeEventListener("keydown",nS):Ir.Main_Go===vr?document.body.removeEventListener("keydown",XC):Ir.Main_Go===or?(Fy=fb,document.body.removeEventListener("keydown",cb)):Ir.Main_Go===hr?(Fy=ub,document.body.removeEventListener("keydown",cb)):Ir.Main_Go===yr?document.body.removeEventListener("keydown",XS):Ir.Main_Go===br?(Fy=rb,document.body.removeEventListener("keydown",cb)):Ir.Main_Go===kr?(Fy=_b,document.body.removeEventListener("keydown",cb)):Ir.Main_Go===cr?(Fy=mb,document.body.removeEventListener("keydown",cb)):Ir.Main_Go===wr?document.body.removeEventListener("keydown",Ls):Ir.Main_Go===dr&&document.body.removeEventListener("keydown",jE)}function Cf(){window.clearTimeout(Wc),r_(),Ir.Main_Go!==fr&&(Ir.Main_BeforeChannelisSet=!1),Ir.Main_Go!==sr&&(Ir.Main_BeforeAgameisSet=!1),zu(),Ir.Main_Go===ar?(Fy=hb,zy()):Ir.Main_Go===pr?aI():Ir.Main_Go===Cr?(Fy=pb,zy()):Ir.Main_Go===sr?Po():Ir.Main_Go===vr?UC():Ir.Main_Go===fr?nd():Ir.Main_Go===mr?el():Ir.Main_Go===_r?hk():Ir.Main_Go===ur?xw():Ir.Main_Go===gr?ew():Ir.Main_Go===or?(Fy=fb,zy()):Ir.Main_Go===cr?(Fy=mb).loadingData||Fy.key_refresh():Ir.Main_Go===yr?PS():Ir.Main_Go===br?(Fy=rb,zy()):Ir.Main_Go===kr?(Fy=_b,zy()):Ir.Main_Go===hr?(Fy=ub,zy()):Ir.Main_Go===wr?vs():Ir.Main_Go===dr?BE():Ir.Main_Go===lr?fM():Ir.Main_Go===Mr&&DI(),Wc=window.setTimeout(c_,3e3)}function Mf(e,t){localStorage.setItem(e,t)}function Ef(e,t){return parseInt(localStorage.getItem(e))||t}function If(e,t){return JSON.parse(localStorage.getItem(e))||t}function Sf(e,t){var n=t.toString();return(localStorage.getItem(e)||n)===n?t:!t}function xf(e){console.log(e);for(var t=0;t<e.length;t++)console.log("Character is: "+e.charAt(t)+" it's Unicode is: \\u"+e.charCodeAt(t).toString(16).toUpperCase())}function Pf(e){console.log("processCode");var t="";t=e.match(/code=(\w+)/),Tr=t?(t=t[1],console.log("if code "+t),t):(console.log("else code "+t),0)}function Lf(e,t,n,a,i,o,s){pu?Tf(e,t,n,a,i,o):Bf(e,t,n,a,i,o,s)}function Tf(e,t,n,a,i,o){var s=Android.mreadUrl(e,t,n,a);s&&200===(s=JSON.parse(s)).status?i(s.responseText):o()}function Bf(e,t,n,a,i,o,s){var d=new XMLHttpRequest;d.open("GET",(s?ku:"")+e,!0),d.timeout=t,0<n&&d.setRequestHeader(nu,tu),1<n&&d.setRequestHeader(au,su),2<n&&d.setRequestHeader(iu,a),d.ontimeout=function(){},d.onreadystatechange=function(){if(4===d.readyState){if(200===d.status)return void i(d.responseText);o()}},d.send(null)}var Of=0,Gf=null,Af=0,Nf=!1,Uf=0,Ff=0,Vf=!1,Df=0,Rf=2e3,Hf=5,Jf="source",qf=Jf,zf=0,jf=[],Xf="",Wf=!1,Yf=0,Kf=0,$f=1,Qf=!1,Zf=0,em=!1,tm=!1,nm=2e3,am=[0,5],im=0;function om(){Dp(),Cv(),rp(document.getElementById("stream_info_icon"),Ir.Main_selectedChannelLogo),Uu("stream_info_name",Ir.Main_selectedChannelDisplayname),Nu("stream_info_title",bb),Nu("stream_info_game",gb+", "+yb+", "+Cb),Uu("stream_live_icon",kb),Uu("progress_bar_duration",Tp(im)),Cy((qh=am)[1]),Ir.Play_isHost=!1,Uu("progress_bar_current_time",Tp(0)),Uu("stream_live_time",""),Uu("stream_watching_time",""),Qf=null!==Ir.ChannelVod_vodId,ic=Nt+".",Qf?(ac=$d,uc()):Rc(),Nu("pause_button",'<i class="strokedbig icon-pause" style="color: #FFFFFF; font-size: 180%;"></i>'),Bu("progress_pause_holder"),Em(),Bu("scene_channel_panel_bottom"),Af=Zf=0,window.clearInterval(Gf),tm=!1,Nm=-13,Yf=Kf=0,zf=2,Tv(3),Eh=!1,gv(),eo()?(za=!0,ja=Ir.Main_selectedChannel_id,di()):Vp(),document.addEventListener("visibilitychange",fm,!1),Nf=!1,Vf=!(Ff=Uf=0),sm(),document.body.removeEventListener("keyup",F_)}function sm(){Df=0,Rf=2e3,dm()}function dm(){Lf("https://clips.twitch.tv/api/v2/clips/"+wb+"/status",Rf,1,null,cm,lm,!0)}function lm(){++Df<Hf?(Rf+=250,dm()):(Rp(),Uv(3))}function cm(e){jf=[],e=JSON.parse(e).quality_options;for(var t=0;t<e.length;t++)jf.length?jf.push({id:e[t].quality+"p"+rm(e[t].frame_rate),url:e[t].source}):jf.push({id:e[t].quality+"p"+rm(e[t].frame_rate)+" (source)",url:e[t].source});Kf=$f,um()}function rm(e){return 40<e?60:""}function um(){window.clearInterval(Gf),Xf=jf[zf=0].url,-1!==Jf.indexOf("source")&&(Jf="source");for(var e=0;e<km();e++){if(jf[e].id===Jf){Xf=jf[zf=e].url;break}-1!==jf[e].id.indexOf(Jf)&&(Xf=jf[zf=e].url)}qf=Jf,er&&console.log("PlayClip_onPlayer:",'\n\n"'+Xf+'"\n'),Kf=$f,pu&&Vf&&Android.startVideoOffset(Xf,3,Wf?-1:Android.gettime()),Wf=!1,_m()}function _m(){ih&&!dv()&&ov(),pu&&(Af=0,Dh=1+nm/1e3,em=!1,window.clearInterval(Gf),Gf=window.setInterval(mm,Rh))}function fm(){document.hidden&&pm()}function mm(){pu&&(Yf=Android.gettime()),Vf&&Of===Yf&&!xp()?++Af>Dh&&(em&&tm&&zf<km()-1?zf++:!em&&tm&&Zf++,navigator.onLine?1<Zf?Sp(Zf,3,hm):(Cm(),um(),tm=!0):Ip(!1,3)):(Af=Zf=0,tm=!1),Of=Yf}function hm(e){if(!e){if(!(zf<km()-1))return void Ip(!1,3);zf++}Zf=0,Cm(),um(),tm=!0}function pm(){Vf&&(jf=[],vm(),jp(),Np())}function vm(){window.clearInterval(Gf),pu&&Android.stopVideo(3),Vf=!1,Nc(),Up(),eE(),document.body.removeEventListener("keydown",Sm),document.removeEventListener("visibilitychange",fm),gm(),document.getElementById("scene2_pannel_0").style.display="none",document.getElementById("scene2_pannel_1").style.width="30%",document.getElementById("quality_name").style.width="77%",document.getElementById("quality_name").style.fontSize="87.5%",$d=0}function gm(){Cg=!1,kg=Mg=0,av(),Jf=qf,document.getElementById("scene_channel_panel").style.opacity="0",pu&&by(Android.gettime()/1e3,im,!0),Nu("progress_bar_jump_to",ka),document.getElementById("progress_bar_steps").style.display="none",window.clearInterval(Kv)}function ym(){bm(),Pp(),Kv=window.setInterval(bm,1e3),jp(),my(),wm(),Cm(),document.getElementById("scene_channel_panel").style.opacity="1",Mm()}function bm(){pu&&by(Android.gettime()/1e3,im,!Cg)}function wm(){for(var e=zf=0;e<km();e++){if(jf[e].id===Jf){zf=e;break}-1!==jf[e].id.indexOf(Jf)&&(zf=e)}}function km(){return jf.length}function Cm(){1===km()?(document.getElementById("quality_arrow_up").style.opacity="0",document.getElementById("quality_arrow_down").style.opacity="0"):zf?zf===km()-1?(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="0.2"):(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="1"):(document.getElementById("quality_arrow_up").style.opacity="0.2",document.getElementById("quality_arrow_down").style.opacity="1"),-1!==(Jf=jf[zf].id).indexOf("source")?Uu("quality_name",Jf.replace("source",ye)):Uu("quality_name",Jf)}function Mm(){Vm=window.setTimeout(gm,5e3+Bg)}function Em(){document.getElementById("scene2_pannel_1").style.width="18%",document.getElementById("quality_name").style.width="60%",document.getElementById("quality_name").style.fontSize="72%",Uu("open_vod_text",Qf?dn:ln),document.getElementById("scene2_pannel_0").style.display="inline-block"}function Im(){Qf?(Ir.vodOffset=$d,vm(),document.body.addEventListener("keydown",Uy,!1),gv(),ef(Fg)):(Eh=!0,Hp(cn),window.setTimeout(function(){Eh=!1,Jp()},2e3))}function Sm(e){if(Kf!==$f)switch(e.keyCode){case Oa:Xp()?(jp(),pm()):zp()}else switch(e.keyCode){case xa:QM()?zm&&!IM&&(rE(),zm--,oE()):Hm&&!Zp()&&dv()?(Gm++,mv()):Zp()?(av(),Lg?(bv(),5<++Mh&&(Mh=0),yv()):(Ey(-1,im),Bg=2500),Mm()):Mv()?(Pv(),Sv(),--Lh<0&&(Lh=3),Iv()):ym();break;case La:QM()?zm<TM-1&&!IM&&(rE(),zm++,oE()):!Hm||Zp()||Mv()?Zp()?(av(),Lg?(bv(),--Mh<0&&(Mh=5),yv()):(Ey(1,im),Bg=2500),Mm()):Mv()?(Pv(),Sv(),3<++Lh&&(Lh=0),Iv()):ym():Mf("ChatEnable",(ih=dv()||Mv()?(sv(),!1):(ov(),!0))?"true":"false");break;case Pa:Mv()?Pv():Zp()?(2===Lg&&1!==Mh?(Lg--,hy()):1===Lg?(Lg--,hy()):0<zf&&1===Mh&&(zf--,Cm()),av(),Mm()):QM()?QM()?iE():ym():ZM();break;case Ta:Mv()?Pv():Zp()?(Lg?1===Lg?(Lg++,hy()):zf<km()-1&&1===Mh&&(zf++,Cm()):(Lg++,hy()),av(),Mm()):QM()?eE():Hm&&dv()?(4<++Fm?fv(!(Fm=1)):4===Fm&&fv(!0),uv(!0)):ym();break;case Ba:Mv()?Lv(3):Zp()?Lg?1===Lg?(Qf&&Ir.Play_ChatForceDisable&&(xp()?Gc(cc):Ac()),Mv()||vv(3)):Nv(3):(av(),Mm(),kg&&wy()):QM()?(vm(),z_(zm,VM,Xv)):ym();break;case Oa:Zp()?gm():QM()?eE():Xp()?(jp(),pm()):zp();break;case Ia:case Ea:case Sa:Qf&&!Ir.Play_ChatForceDisable&&(xp()?Gc(cc):Ac()),Mv()||vv(3)}}var xm,Pm,Lm,Tm,Bm,Om,Gm=0,Am=Gm,Nm=-5,Um=.55,Fm=3,Vm=null,Dm="source",Rm=Dm,Hm=!0,Jm=!1,qm="",zm=0,jm=2e3,Xm=0,Wm=1,Ym=2,Km=0,$m=null,Qm=0,Zm=0,eh=0,th="",nh=[],ah=0,ih=!1,oh=null,sh=null,dh=null,lh="",ch=0,rh=5,uh=0,_h=5,fh=0,mh=!1,hh=null,ph=!1,vh=0,gh=null,yh=0,bh=0,wh=!1,kh=!1,Ch=!1,Mh=1,Eh=!1,Ih=!1,Sh=1e4,xh=2e3,Ph="",Lh=0,Th=3,Bh=null,Oh="",Gh=0,Ah=0,Nh="",Uh=!0,Fh=!1,Vh=!1,Dh=7,Rh=1e3,Hh=0,Jh="",qh=[],zh=[{top:51.8,left:75.1,sizeOffset:[31,16,0,0]},{top:33,left:75.1,sizeOffset:[12.5,0,-6.25,0]},{top:.2,left:75.1,sizeOffset:[0,0,0,0]},{top:.2,left:38.3,sizeOffset:[0,0,0,0]},{top:.2,left:.2,sizeOffset:[0,0,0,0]},{top:33,left:.2,sizeOffset:[12.5,0,-6.25,0]},{top:51.8,left:.2,sizeOffset:[31,16,0,0]},{top:51.8,left:38.3,sizeOffset:[31,16,0,0]}],jh=[0,0,0,1,2,2,2,1],Xh=[[0,1,2,2,2,1,0,0],[7,3,3,3,3,3,7,7],[6,5,4,4,4,5,6,6]],Wh=[{containerHeight:17,percentage:"12.5%",dialogTop:15},{containerHeight:32,percentage:"25%",dialogTop:30},{containerHeight:48,percentage:"50%",dialogTop:50},{containerHeight:99.6,percentage:"100%",dialogTop:115}],Yh=1,Kh=["chat_extra_small","chat_size_small","chat_size_default","chat_size_biger","chat_size_bigest"];function $h(){Bm=document.getElementById("chat_container"),Om=document.getElementById("inner_progress_bar"),Gm=Ef("ChatPositionsValue",0),Fm=Ef("ChatSizeValue",3),ih=Sf("ChatEnable",!1),Hm=Sf("Play_isFullScreen",!0),uv(!1),_v(!1),Zh()}function Qh(e){e?void 0!==xm&&(Gm=xm,Fm=Lm,(ih=Pm)||sv(),uv(!1)):(xm=Gm,Pm=ih,Lm=Fm,Gm=0,ov(),Fm=4,fv(ih=!0),uv(!1),Yl&&(Yl.scrollTop=Yl.scrollHeight)),Mf("Play_isFullScreen",Hm)}function Zh(){Yh=Hk("chat_font_size");for(var e=0;e<Kh.length;e++)Au("chat_inner_container",Kh[e]);Gu("chat_inner_container",Kh[Yh])}function ep(){Dp(),Nu("stream_live_icon",'<div style="vertical-align: middle; display: inline-block"><i class="icon-circle" style="color: red; font-size: 105%; "></i></div><div style="vertical-align: middle; display: inline-block">'+ka+_.toUpperCase()+"</div>"),k_("stream_info_title"),Qf=!(Ih=!1),rp(document.getElementById("stream_info_icon"),bu),Ir.Play_isHost?Uu("stream_info_name",Ir.Play_DisplaynameHost):Uu("stream_info_name",Ir.Play_selectedChannelDisplayname),Ir.Play_WasPlaying=1,f_(),Jm=Ir.Play_isHost,Ir.Play_isHost=!1,Fh=!1,Bu("scene_channel_panel_bottom"),Ah=Gh=0,Uu("stream_watching_time",g+Tp(0)),lh=Bp(0),Uu("stream_live_time",y+lh+b),Tu("progress_pause_holder"),Tv(1),Nm=-5,yh=bh=Hh=0,window.clearInterval(gh),kh=!1,Sh=3e3,Uh=!(uh=0),Km=Xm,Ch=!(mh=!(eh=Zm=Qm=ph=0)),document.addEventListener("visibilitychange",np,!1),ip(),up(),document.body.removeEventListener("keyup",F_),$m=window.setInterval(dp,6e4)}function tp(e){Hp(e)}function Play_CheckResume(){mh&&np(),rg&&Xg(),Vf&&(pm(),window.clearInterval(Gf))}function np(){document.hidden?Mv()?(jp(),sv(),Gp()):(Up(),Ch=!1,zl(),window.clearInterval($m)):(mh=!0,Kp(),mh&&(Dp(),Sh=3e3,Fh=!(uh=0),Ih?dp():ip(),Km=Xm,fh=0,navigator.onLine?up():Tm=window.setInterval(ap,100),$m=window.setInterval(dp,6e4)))}function ap(){(navigator.onLine||200<fh)&&(window.clearInterval(Tm),up()),fh++}function ip(){Bf("https://api.twitch.tv/kraken/streams/"+Ir.Play_selectedChannel_id,Sh,2,null,op,sp,!1)}function op(e){null!==(e=JSON.parse(e)).stream&&(Uu("stream_info_name",Jm?Ir.Play_DisplaynameHost:Ir.Play_selectedChannelDisplayname),Ir.Play_selectedChannel_id=e.stream.channel._id,Nu("stream_info_title",ax.parse(e.stream.channel.status)),Ir.Play_gameSelected=e.stream.game,Ph=", ["+e.stream.channel.broadcaster_language.toUpperCase()+"]",Uu("stream_info_game",v+Ir.Play_gameSelected+h+i_(e.stream.viewers)+" "+H+Ph),Ir.Play_selectedChannelLogo=e.stream.channel.logo,Ih=!0,rp(document.getElementById("stream_info_icon"),Ir.Play_selectedChannelLogo),lh=e.stream.created_at,eo()?(za=!0,ja=Ir.Play_selectedChannel_id,di()):Vp())}function sp(){uh<_h&&(Sh+=500,window.setTimeout(function(){mh&&ip()},750)),uh++}function dp(){Bf("https://api.twitch.tv/kraken/streams/"+Ir.Play_selectedChannel_id,3e3,2,null,lp,cp,!1)}function lp(e){null!==(e=JSON.parse(e)).stream&&(Nu("stream_info_title",ax.parse(e.stream.channel.status)),Ir.Play_gameSelected=e.stream.game,Uu("stream_info_game",v+Ir.Play_gameSelected+h+i_(e.stream.viewers)+" "+H+Ph),Ih||rp(document.getElementById("stream_info_icon"),e.stream.channel.logo))}function cp(){Hh<_h?(window.setTimeout(function(){mh&&dp()},2500),Hh++):Hh=0}function rp(e,t){e.onerror=function(){this.src=bu,Ih=!1},e.src=t}function up(){ch=0,xh=2e3+(Fh?3e3:0),_p()}function _p(){var e,t;if(e=Km===Xm?"https://api.twitch.tv/api/channels/"+Ir.Play_selectedChannel+"/access_token"+(eo()&&Fi[Ir.Users_Position].access_token?"?oauth_token="+Fi[Ir.Users_Position].access_token:""):"https://usher.ttvnw.net/api/channel/hls/"+Ir.Play_selectedChannel+".m3u8?&token="+encodeURIComponent(Qm.token)+"&sig="+Qm.sig+"&allow_source=true&allow_audi_only=true&fast_bread=true&allow_spectre=false",pu){if(!(t=Android.mreadUrl(e,xh,1,null)))return void mp();200===(t=JSON.parse(t)).status?(ch=0,mh&&vp(t.responseText)):403===t.status?hp():404===t.status?Fv():mp()}else(t=new XMLHttpRequest).open("GET",ku+e,!0),t.timeout=xh,t.setRequestHeader(nu,tu),t.ontimeout=function(){},t.onreadystatechange=function(){4===t.readyState&&(200===t.status?(ch=0,mh&&vp(t.responseText)):403===t.status?(fp(t),Zc?pp():hp()):404===t.status?(fp(t),Zc?pp():Fv()):(fp(t),mp()))},t.send(null)}function fp(e){er&&(console.log(e.status),console.log(e.responseText))}function mp(){mh&&Uh&&(++ch<rh+(Fh?8:0)?(xh+=250,Fh?window.setTimeout(_p,500):_p()):Zc?pp():Fv())}function hp(){Rp(),Hp(Rn),window.setTimeout(function(){mh&&Fv()},4e3)}function pp(){nh=[{id:"1080p60(Source)",band:"(10.00Mbps)",url:"http://fake"}],Km=Ym,mh&&wp()}function vp(e){Km===Xm?(Qm=JSON.parse(e),Km=Wm,up()):Km===Wm&&(nh=gp(Zm=e),Km=Ym,mh&&wp())}function gp(e){for(var t,n=[],a="",i=1,o=bp(e),s=0;s<o.length;s++)a=o[s].split('NAME="')[1].split('"')[0],t=yp(o[s].split("BANDWIDTH=")[1].split(",")[0]),n.length?n[s-i].id!==a&&n[s-i].id!==a+" (source)"?n.push({id:a,band:t,url:o[s].split("\n")[2]}):i++:(-1===a.indexOf("ource")&&(a+=" (source)"),n.push({id:a,band:t,url:o[s].split("\n")[2]}));return n}function yp(e){return 0<(e=parseInt(e))?" ("+parseFloat(e/1e6).toFixed(2)+"Mbps)":""}function bp(e){for(var t,n=[],a=/#EXT-X-MEDIA:(.)*\n#EXT-X-STREAM-INF:(.)*\n(.)*/g;t=a.exec(e);)n.push(t[0]);return n}function wp(){window.clearInterval(gh),th=nh[ah=0].url,-1!==Dm.indexOf("source")&&(Dm="source");for(var e=0;e<rv();e++){if(nh[e].id===Dm){th=nh[ah=e].url;break}-1!==nh[e].id.indexOf(Dm)&&(th=nh[ah=e].url)}Rm=Dm,Km=Ym,er&&console.log("Play_onPlayer:",'\n\n"'+th+'"\n'),pu&&mh&&Android.startVideo(th,1),kp()}function kp(){Vh=!1,ih&&!dv()&&ov(),Ch=!0,Cp(),pu&&(yh=0,Dh=1+jm/1e3,wh=!1,window.clearInterval(gh),gh=window.setInterval(Mp,Rh))}function Cp(){Ir.Play_ChatForceDisable?Sl():Hc()}function Mp(){var e=!xp();pu&&(Gh=Android.gettime()),mh&&vh===Gh&&e?Dh<++yh&&(wh&&kh&&ah<rv()-1?ah++:!wh&&kh&&bh++,navigator.onLine?1<bh?Sp(bh,1,Ep):(cv(),wp(),kh=!0):Ip(!1,1)):(yh=bh=0,kh=!1),vh=Gh,e&&Ah++}function Ep(e){if(!e){if(!(ah<rv()-1))return void Fv();ah++}bh=0,cv(),wp(),kh=!0}function Ip(e,t){Ir.Play_isHost=e,Tv(t),Uv(t)}function Sp(e,t,n){var a=new XMLHttpRequest;a.timeout=1e3,a.open("GET","https://static-cdn.jtvnw.net/jtv-static/404_preview-10x10.png?"+Math.random(),!0),a.onreadystatechange=function(){4===a.readyState&&(200===a.status?n(2<e):12<e&&Ip(!1,t))},a.send(null)}function xp(){return!!pu&&!Android.getPlaybackState()}function Pp(){var e=tf();Uu("stream_clock",e),Uu("label_clock",e)}function Lp(e){return e<10?"0"+e:e}function Tp(e){var t,n,a;return t=Lp(parseInt(e)%60),n=Lp((e=Math.floor(e/60))%60),a=Lp(e=Math.floor(e/60)),e?a+":"+n+":"+t:n+":"+t}function Bp(e){var t,n,a;return t=Lp(parseInt(e/1e3)%60),n=Lp((e=Math.floor(e/1e3/60))%60),a=Lp(e=Math.floor(e/60)),e?a+":"+n+":"+t:n+":"+t}function Op(e){return Bp((new Date).getTime()-new Date(e).getTime())}function Gp(){mh&&(Ap(),Ir.Play_WasPlaying=0,Np())}function Ap(){pu&&Android.stopVideo(1),mh=!1,eE(),Nc(),Up(),Fp(),Ir.Play_selectedChannel_id=""}function Np(){by(0,0),Bu("scene1"),Tu("scene2"),l_()}function Up(){ev(),Kp(),Jp(),Cv(),Jh="",ah===rv()-1&&(Rm=nh[0].id),dg===yy()-1&&(Zv=sg[0].id),zf===km()-1&&(qf=jf[0].id)}function Fp(){Ch=!1,document.body.removeEventListener("keydown",Xv),document.removeEventListener("visibilitychange",np),zl(),window.clearInterval($m),window.clearInterval(gh),Eh=!1}function Vp(){Nu("fallow_text",ka+Ot),Ja=!1}function Dp(){pu?Android.mshowLoading(!0):Bu("dialog_loading_play")}function Rp(){pu?Android.mshowLoading(!1):Tu("dialog_loading_play")}function Hp(e){Uu("dialog_warning_play_text",e),Bu("dialog_warning_play")}function Jp(){Tu("dialog_warning_play")}function qp(){return Ou("dialog_warning_play")}function zp(){Xp()?jp():(Bu("play_dialog_exit"),oh=window.setTimeout(zp,3e3))}function jp(){window.clearTimeout(oh),Tu("play_dialog_exit")}function Xp(){return Ou("play_dialog_exit")}function Wp(){window.clearTimeout(sh)}function Yp(){window.clearTimeout(dh)}function Kp(){Wp(),Yp(),Tu("play_dialog_simple_pause")}function $p(){xp()?Qp()?(Tu("play_dialog_simple_pause"),dh=window.setTimeout($p,8e3)):(Bu("play_dialog_simple_pause"),sh=window.setTimeout($p,1500)):Kp()}function Qp(){return Ou("play_dialog_simple_pause")}function Zp(){return"1"===document.getElementById("scene_channel_panel").style.opacity}function ev(){av(),document.getElementById("scene_channel_panel").style.opacity="0",Dm=Rm,window.clearInterval(Kv)}function tv(){gv(),lv(),cv(),nv(),Kv=window.setInterval(nv,1e3),Pp(),jp(),document.getElementById("scene_channel_panel").style.opacity="1",iv()}function nv(){Uu("stream_watching_time",g+Tp(Ah)),Uu("stream_live_time",y+(-1===lh.indexOf("00:00")?Op(lh):lh)+b)}function av(){window.clearTimeout(Vm),Bg=0}function iv(){Vm=window.setTimeout(ev,5e3)}function ov(){mv(),Bu("chat_container")}function sv(){Tu("chat_container")}function dv(){return Ou("chat_container")}function lv(){for(var e=ah=0;e<rv();e++){if(nh[e].id===Dm){ah=e;break}-1!==nh[e].id.indexOf(Dm)&&(ah=e)}}function cv(){1===rv()?(document.getElementById("quality_arrow_up").style.opacity="0",document.getElementById("quality_arrow_down").style.opacity="0"):ah?ah===rv()-1?(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="0.2"):(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="1"):(document.getElementById("quality_arrow_up").style.opacity="0.2",document.getElementById("quality_arrow_down").style.opacity="1"),-1!==(Dm=nh[ah].id).indexOf("source")?Uu("quality_name",Dm.replace("source",ye)+nh[ah].band):Uu("quality_name",Dm+nh[ah].band)}function rv(){return nh.length}function uv(e){Bm.style.height=Wh[Fm-1].containerHeight+"%",document.getElementById("play_chat_dialog").style.marginTop=Wh[Fm-1].dialogTop+"%",mv(),Jl(),e&&hv(Vn+Wh[Fm-1].percentage),window.setTimeout(function(){Yl&&(Yl.scrollTop=Yl.scrollHeight)},500),Mf("ChatSizeValue",Fm)}function _v(e){Bm.style.backgroundColor="rgba(0, 0, 0, "+Um+")",e&&hv(Dn+(100*Um).toFixed(0)+"%")}function fv(e){Gm=e?jh[Am=Gm]:Xh[Gm][Am]}function mv(){var e=4===Fm;Gm<0?Gm=e?2:7:(e?2:7)<Gm&&(Gm=0),Bm.style.top=(e?.2:zh[Gm].top+zh[Gm].sizeOffset[Fm-1])+"%",Bm.style.left=zh[Gm+(e?2:0)].left+"%",Mf("ChatPositionsValue",Gm)}function hv(e){window.clearTimeout(hh),Uu("play_chat_dialog_text",e),Bu("play_chat_dialog"),hh=window.setTimeout(pv,1e3)}function pv(){Tu("play_chat_dialog")}function vv(e){xp()?(Kp(),pu&&Android.play(!0),Nu("pause_button",'<i class="strokedbig icon-pause" style="color: #FFFFFF; font-size: 180%;"></i>'),1===e?(Zp()&&ev(),window.clearInterval(gh),gh=window.setInterval(Mp,Rh)):2===e?(Zp()&&uy(),window.clearInterval(pg),pg=window.setInterval(sy,Rh)):3===e&&(Zp()&&gm(),window.clearInterval(Gf),Gf=window.setInterval(mm,Rh))):(window.clearInterval(gh),window.clearInterval(pg),window.clearInterval(Gf),Nu("pause_button",'<i class="strokedbig icon-play-1" style="color: #FFFFFF; font-size: 180%;"></i>'),pu&&Android.play(!1),$p())}function gv(){bv(),Mh=1,yv()}function yv(){Gu("scene2_pannel_"+Mh,"playbotton_focus")}function bv(){Au("scene2_pannel_"+Mh,"playbotton_focus")}function wv(){eg=Km=-1,Kf=-1,sv(),ev(),gm(),uy(),Eh||Jp(),Rp(),jp(),Iv()}function kv(){Bu("dialog_end_stream")}function Cv(){Tu("dialog_end_stream"),Pv(),Ev()}function Mv(){return Ou("dialog_end_stream")}function Ev(){Sv(),Lh=0,Iv()}function Iv(){Gu("dialog_end_"+Lh,"dialog_end_icons_focus")}function Sv(){Au("dialog_end_"+Lh,"dialog_end_icons_focus")}function xv(e){1===e?Oh=Ir.Play_selectedChannelDisplayname+" "+_:2===e?Oh=Ir.Main_selectedChannelDisplayname+en:3===e&&(Oh=Ir.Main_selectedChannelDisplayname+Nt),Nu("dialog_end_stream_text",Oh+P+la+nn+Th+"..."),Mv()?(eg=Km=Ym,Kf=$f,-1===--Th?(Nu("dialog_end_stream_text",Oh+P+la+nn+"0..."),jp(),sv(),1===e?Gp():2===e?ly():3===e&&pm()):Bh=window.setTimeout(function(){xv(e)},1e3)):Bh=window.setTimeout(function(){xv(e)},50)}function Pv(){window.clearTimeout(Bh),Nu("dialog_end_stream_text",Oh+P+la+an)}function Lv(e){var t=!0;Lh?1===Lh?Ir.Play_isHost?(Ir.Play_DisplaynameHost=Ir.Play_selectedChannelDisplayname+ae,Ir.Play_selectedChannel=Nh.target_login,Ir.Play_selectedChannelDisplayname=Nh.target_display_name,Ir.Play_DisplaynameHost=Ir.Play_DisplaynameHost+Ir.Play_selectedChannelDisplayname,Ap(),document.body.addEventListener("keydown",Xv,!1),Ir.Play_selectedChannel_id=Nh.target_id,ef(ep)):Im():2===Lh?Bv(e):3===Lh&&Gv(e):2===e?sg.length?(gg=!(Ag=!0),iy(),Kp(),ac=Sg=0,uc()):(t=!1,Hp(ta),window.setTimeout(function(){Jp()},2e3)):3===e&&(jf.length?(em=!(Wf=!0),um(),Kp(),Qf?(Sg=0,ac=$d,uc()):Rc()):(t=!1,Hp(ta),window.setTimeout(function(){Jp()},2e3))),1!==Lh&&3===Lh&&""===Ir.Play_gameSelected&&(t=!1),t&&Cv()}function Tv(e){e?1===e?(Sv(),Lh=2,Iv(),document.getElementById("dialog_end_0").style.display="none",document.getElementById("dialog_end_1").style.display="none"):2===e?(Ev(),document.getElementById("dialog_end_0").style.display="inline-block",document.getElementById("dialog_end_1").style.display="none"):3===e&&(Ev(),document.getElementById("dialog_end_0").style.display="inline-block",document.getElementById("dialog_end_1").style.display="inline-block",Uu("dialog_end_vod_text",Qf?dn:ln)):(Sv(),Lh=1,Iv(),document.getElementById("dialog_end_0").style.display="none",document.getElementById("dialog_end_1").style.display="inline-block",Uu("dialog_end_vod_text",_n))}function Bv(e){Ir.Main_BeforeChannelisSet||Ir.Main_Go===mr||Ir.Main_Go===hr||(Ir.Main_BeforeChannel=Ir.Main_BeforeAgameisSet&&Ir.Main_Go!==sr?Ir.Main_BeforeAgame:Ir.Main_Go,Ir.Main_BeforeChannelisSet=!0),h_(Ir.Main_Go),Ir.Main_Go=fr,1===e?(Ir.Main_selectedChannel_id=Ir.Play_selectedChannel_id,Ir.Main_selectedChannel=Ir.Play_selectedChannel,Ir.Main_selectedChannelDisplayname=Ir.Play_selectedChannelDisplayname,Hs=Ja,sv(),Gp()):2===e?ly():3===e&&pm()}function Ov(e){Ir.Search_isSearching||(Ir.Main_BeforeSearch=Ir.Main_Go),h_(Ir.Main_Go),Ir.Main_Go=rr,1===e?(sv(),Gp()):2===e?ly():3===e&&pm()}function Gv(e){if(""===Ir.Play_gameSelected)return Eh=!0,Hp($n),void window.setTimeout(function(){Eh=!1,Jp()},2e3);Ir.Main_BeforeAgameisSet||Ir.Main_Go===wr||Ir.Main_Go===kr||(Ir.Main_BeforeAgame=Ir.Main_BeforeChannelisSet&&Ir.Main_Go!==fr&&Ir.Main_Go!==mr&&Ir.Main_Go!==hr?Ir.Main_BeforeChannel:Ir.Main_Go,Ir.Main_BeforeAgameisSet=!0),h_(Ir.Main_Go),Ir.Main_Go=sr,Eo=!1,Ir.Main_gameSelected=Ir.Play_gameSelected,sv(),1===e?Gp():2===e?ly():3===e&&pm()}function Av(){eo()&&Fi[Ir.Users_Position].access_token?Ja?hi():_i():(Hp(Gt),Eh=!0,window.setTimeout(function(){Jp(),Eh=!1},2e3))}function Nv(e){Mh?1===Mh?(1===e?(wp(),ev()):2===e?(gg=!1,iy(),uy()):3===e&&(em=!1,um(),gm()),Kp()):2===Mh?(ja=1===e?Ir.Play_selectedChannel_id:Ir.Main_selectedChannel_id,Av(),av(),1===e?iv():2===e?py():3===e&&Mm()):3===Mh?Gv(e):4===Mh?Bv(e):5===Mh&&Ov(e):Im()}function Play_PannelEndStart(e){1===e?(window.clearInterval(gh),Fv()):Uv(e)}function Uv(e){window.clearInterval(gh),window.clearInterval(Gf),window.clearInterval(pg),wv(),Th=3,xv(e),kv(e)}function Fv(){Dp(),Km=-1,ch=0,xh=2e3,zl(),window.clearInterval($m),window.clearInterval(gh),""!==Ir.Play_selectedChannel_id?Hv():Vv()}function Vv(){Bf("https://api.twitch.tv/kraken/users?login="+Ir.Play_selectedChannel,xh,2,null,Dv,Rv,!1)}function Dv(e){void 0!==(e=JSON.parse(e).users[0])?(Ir.Play_selectedChannel_id=e._id,ch=0,xh=2e3,Hv()):Uv(1)}function Rv(){++ch<rh?(xh+=250,Vv()):Ip(!1,1)}function Hv(){Lf("https://tmi.twitch.tv/hosts?include_logins=1&host="+encodeURIComponent(Ir.Play_selectedChannel_id),xh,1,null,qv,Jv,!0)}function Jv(){++ch<rh?(xh+=250,Hv()):Ip(!1,1)}function qv(e){void 0!==(Nh=JSON.parse(e).hosts[0]).target_login?(Eh=!0,Hp(Ir.Play_selectedChannelDisplayname+un+ae+Nh.target_display_name),window.setTimeout(function(){Eh=!1},4e3),Tv(0),Ir.Play_isHost=!0):(Tv(1),Ir.Play_isHost=!1),Uv(1)}function zv(){Ja?(Nu("fallow_heart",'<i class="icon-heart strokicon" style="color: #00b300; font-size: 210%;"></i>'),Nu("fallow_text",ka+St)):(Nu("fallow_heart",'<i class="icon-heart-o strokicon" style="color: #FFFFFF; font-size: 210%;"></i>'),Nu("fallow_text",ka+xt))}function jv(e){Mv()&&!Xp()?(Pv(),zp()):QM()?eE():Zp()&&!By()?e?uy():ev():By()&&Xp()?(Ty(),cy(!1),Np()):Xp()?(jp(),sv(),e?ly():Gp()):(qp()&&Jp(),zp())}function Xv(e){if(Km!==Ym)switch(e.keyCode){case Oa:Xp()?(jp(),sv(),Gp()):zp()}else switch(e.keyCode){case xa:QM()?zm&&!IM&&(rE(),zm--,oE()):Hm&&!Zp()&&dv()?(Gm++,mv()):Zp()?(bv(),5<++Mh&&(Mh=1),yv(),av(),iv()):Mv()?(Pv(),Sv(),--Lh<(Ir.Play_isHost?1:2)&&(Lh=3),Iv()):tv();break;case La:QM()?zm<TM-1&&!IM&&(rE(),zm++,oE()):!Hm||Zp()||Mv()?Zp()?(bv(),--Mh<1&&(Mh=5),yv(),av(),iv()):Mv()?(Pv(),Sv(),3<++Lh&&(Lh=Ir.Play_isHost?1:2),Iv()):tv():Mf("ChatEnable",(ih=dv()||Mv()?(sv(),!1):(ov(),!0))?"true":"false");break;case Pa:Zp()?(0<ah&&1===Mh&&(ah--,cv()),av(),iv()):!QM()&&eo()?ZM():Mv()?Pv():QM()&&iE();break;case Ta:Zp()?(ah<rv()-1&&1===Mh&&(ah++,cv()),av(),iv()):QM()?eE():Hm&&dv()?(4<++Fm?fv(!(Fm=1)):4===Fm&&fv(!0),uv(!0)):Mv()?Pv():tv();break;case Ba:Mv()?Lv(1):Zp()?Nv(1):QM()?Ir.Play_selectedChannel!==JSON.parse(document.getElementById(VM[8]+zm).getAttribute(ru))[0]?(Ap(),z_(zm,VM,Xv)):tE():tv();break;case Oa:jv(!1);break;case Ia:case Ea:case Sa:Mv()||vv(1)}}var Wv,Yv,Kv,$v,Qv="source",Zv=Qv,eg=0,tg=null,ng=0,ag=0,ig=0,og="",sg=[],dg=0,lg=0,cg=5,rg=!1,ug=2e3,_g=0,fg=5,mg=1e4,hg=0,pg=null,vg=0,gg=!1,yg=0,bg=!1,wg=!1,kg=0,Cg=!1,Mg=0,Eg=2e3,Ig=!1,Sg=0,xg={},Pg=0,Lg=0,Tg=!0,Bg=0,Og=0,Gg=0,Ag=!1,Ng=[0,10,30,60,120,300,600,900,1200,1800],Ug=!1;function Fg(){Dp(),Cv(),Sg=0,Uu("stream_live_time",""),Uu("stream_watching_time",""),Uu("progress_bar_current_time",Tp(0)),ic=A+".",Nu("pause_button",'<i class="strokedbig icon-pause" style="color: #FFFFFF; font-size: 180%;"></i>'),Tu("progress_pause_holder"),Og=0,Cy((qh=Ng)[1]),eg=Xm,Qf=!0,$d=0,Ir.Play_isHost=!1,Ir.vodOffset?(Dg(),qg()):(Tg&&""!==Ir.Main_selectedChannel_id?(rp(document.getElementById("stream_info_icon"),Ir.Main_selectedChannelLogo),xg["#"+Ir.ChannelVod_vodId]||uc(),eo()?(ja=Ir.Main_selectedChannel_id,za=!0,di()):Vp()):(Dg(),Rg()),Uu("stream_info_name",Ir.Main_selectedChannelDisplayname),Nu("stream_info_title",Xd),Nu("stream_info_game",Wd+", ["+Rd.toUpperCase()+"]"),Uu("stream_live_icon",Yd)),xg["#"+Ir.ChannelVod_vodId]&&!Ir.vodOffset?(Rp(),Ly()):Vg()}function Vg(){window.setTimeout(function(){Bu("scene_channel_panel_bottom"),Nu("pause_button",'<i class="strokedbig icon-pause" style="color: #FFFFFF; font-size: 180%;"></i>'),Bu("progress_pause_holder")},1e3),Uu("progress_bar_duration",Tp(Fd)),Ir.Play_WasPlaying=2,f_(),$v=window.setInterval(Yg,6e4),x_(Jh),vg=yg=0,window.clearInterval(pg),Eh=Ig=bg=!(Nm=-13),Cg=!1,ig=ag=ng=Mg=0,document.addEventListener("visibilitychange",Xg,!1),Ug=!(rg=!(wg=!1)),Kg(),Tv(2),document.body.removeEventListener("keyup",F_)}function Dg(){_g=0,fg=5,mg=1e4}function Rg(){Bf("https://api.twitch.tv/kraken/users?login="+encodeURIComponent(Ir.Main_selectedChannel),mg,2,null,Hg,Jg,!1)}function Hg(e){void 0!==(e=JSON.parse(e).users[0])?(Ir.Main_selectedChannelLogo=e.logo,Ir.Main_selectedChannel_id=e._id,xg["#"+Ir.ChannelVod_vodId]||uc(),eo()?(ja=Ir.Main_selectedChannel_id,za=!0,di()):Vp()):(Ir.Main_selectedChannelLogo=bu,Ir.Main_selectedChannel_id=""),rp(document.getElementById("stream_info_icon"),Ir.Main_selectedChannelLogo)}function Jg(){++_g<fg?(mg+=500,window.setTimeout(function(){rg&&Rg()},750)):Yv=window.setTimeout(Rg,2500)}function qg(){Bf("https://api.twitch.tv/kraken/videos/"+Ir.ChannelVod_vodId,mg,2,null,jg,zg,!1)}function zg(){++_g<fg&&(mg+=2e3,qg())}function jg(e){e=JSON.parse(e),Nu("stream_info_title",ax.parse(e.title)),Nu("stream_info_game",$t+v+e.game+", "+i_(e.views)+R+", ["+e.channel.broadcaster_language.toUpperCase()+"]"),Uu("stream_live_icon",V+y_(e.created_at)),Uu("progress_bar_duration",Tp(Fd=parseInt(e.length))),Sg=1e3*Ir.vodOffset,by(Ir.vodOffset,Fd,!0),Ir.Main_selectedChannelDisplayname=e.channel.display_name,Uu("stream_info_name",Ir.Main_selectedChannelDisplayname),Ir.Main_selectedChannelLogo=e.channel.logo,rp(document.getElementById("stream_info_icon"),Ir.Main_selectedChannelLogo),Ir.Main_selectedChannel_id=e.channel._id,Ir.Main_selectedChannel=e.channel.name,eo()?(za=!0,ja=Ir.Main_selectedChannel_id,di()):Vp(),x_(e.increment_view_count_url)}function Xg(){document.hidden?Mv()?(jp(),sv(),ly()):(Yg(),Iy(),Ac(),Up(),window.clearInterval(pg),window.clearInterval($v)):(rg=!0,Kp(),rg&&(Dp(),fh=fh=0,navigator.onLine?oy():Tm=window.setInterval(Wg,100),Gc(cc),Tv(2),$v=window.setInterval(Yg,6e4)))}function Wg(){(navigator.onLine||200<fh)&&(window.clearInterval(Tm),eg=Xm,Kg()),fh++}function Yg(){Ir.vodOffset=pu?parseInt(Android.gettime()/1e3):0,f_(),Ir.vodOffset=0}function Kg(){lg=0,Eg=2e3,$g()}function $g(){Lf(eg===Xm?"https://api.twitch.tv/api/vods/"+Ir.ChannelVod_vodId+"/access_token"+(eo()&&Fi[Ir.Users_Position].access_token?"?oauth_token="+Fi[Ir.Users_Position].access_token:""):"https://usher.ttvnw.net/vod/"+Ir.ChannelVod_vodId+".m3u8?&nauth="+encodeURIComponent(ng.token)+"&nauthsig="+ng.sig+"&allow_source=true&allow_audi_only=true&allow_spectre=false",xh,1,null,ey,Qg,!0)}function Qg(){if(rg){var e;if(ng.token&&(e=JSON.parse(ng.token)),e&&0!==JSON.parse(ng.token).chansub.restricted_bitrates.length)return void ty();++lg<cg?(Eg+=250,$g()):Zc?Zg():(Rp(),Uv(2))}}function Zg(){sg=[{id:"1080p60(Source)",band:"(10.00Mbps)",url:"http://fake"}],eg=Ym,rg&&iy()}function ey(e){eg===Xm?(ng=JSON.parse(e),eg=Wm,Kg()):eg===Wm&&(sg=gp(ag=e),eg=Ym,rg&&iy())}function ty(){eo()&&Fi[Ir.Users_Position].access_token?(ja=Ir.Main_selectedChannel_id,gi()):(Rp(),Hp(L+Pt),window.setTimeout(function(){rg&&ly()},4e3))}function ny(){Rp(),Hp(L+Lt),window.setTimeout(function(){rg&&ly()},4e3)}function ay(){Ug?(Rp(),Hp(L+Tt),window.setTimeout(function(){rg&&ly()},4e3)):(Ug=!0,eg=Xm,Kg())}function iy(){window.clearInterval(pg),og=sg[dg=0].url,-1!==Qv.indexOf("source")&&(Qv="source");for(var e=0;e<yy();e++){if(sg[e].id===Qv){og=sg[dg=e].url;break}-1!==sg[e].id.indexOf(Qv)&&(og=sg[dg=e].url)}Zv=Qv,oy()}function oy(){er&&console.log("PlayVod_onPlayer:",'\n\n"'+og+'"\n'),Ir.vodOffset?(ac=Ir.vodOffset,uc(),pu&&rg&&Android.startVideoOffset(og,2,Ag?-1:1e3*Ir.vodOffset),Ir.vodOffset=0):pu&&rg&&Android.startVideoOffset(og,2,Ag?-1:Android.gettime()),Ag=!1,ih&&!dv()&&ov(),pu&&(vg=0,Dh=3+ug/1e3,gg=!1,window.clearInterval(pg),pg=window.setInterval(sy,Rh))}function sy(){pu&&(Sg=Android.gettime()),rg&&hg===Sg&&!xp()?++vg>Dh&&(gg&&bg&&dg<yy()-1?dg++:!gg&&bg&&yg++,navigator.onLine?1<yg?Sp(yg,2,dy):(gy(),iy(),bg=!0):Ip(!1,2)):(vg=yg=0,bg=!1),hg=Sg}function dy(e){if(!e){if(!(dg<yy()-1))return void Ip(!1,2);dg++}yg=0,gy(),iy(),bg=!0}function ly(){rg&&(sg=[],cy(!0),Np())}function cy(e){e&&Iy(),pu&&Android.stopVideo(2),rg=!1,window.clearInterval($v),window.clearInterval(Yv),Ir.Play_WasPlaying=0,Tg=!0,Nc(),eE(),Up(),ry()}function ry(){document.body.removeEventListener("keydown",Uy),document.removeEventListener("visibilitychange",Xg),Ir.vodOffset=0,window.clearInterval(tg),window.clearInterval(pg),Fd=0}function uy(){Cg=!1,kg=Mg=0,av(),document.getElementById("scene_channel_panel").style.opacity="0",pu&&by(Android.gettime()/1e3,Fd,!0),Nu("progress_bar_jump_to",ka),document.getElementById("progress_bar_steps").style.display="none",Qv=Zv,window.clearInterval(Kv)}function _y(e){fy(),Pp(),jp(),Kv=window.setInterval(fy,1e3),e&&(my(),vy(),gy(),py()),document.getElementById("scene_channel_panel").style.opacity="1"}function fy(){pu&&by(Android.gettime()/1e3,Fd,!Cg)}function my(){Lg=xp()?1:0,hy()}function hy(){Lg?1===Lg?(Gu("pause_button","progress_bar_div_focus"),Au("progress_bar_div","progress_bar_div_focus"),bv(),Nu("progress_bar_jump_to",ka),document.getElementById("progress_bar_steps").style.display="none"):2===Lg&&(Au("pause_button","progress_bar_div_focus"),Au("progress_bar_div","progress_bar_div_focus"),yv(),Nu("progress_bar_jump_to",ka),document.getElementById("progress_bar_steps").style.display="none"):(Au("pause_button","progress_bar_div_focus"),Gu("progress_bar_div","progress_bar_div_focus"),bv(),kg&&(My(),document.getElementById("progress_bar_steps").style.display="inline-block"))}function py(){Vm=window.setTimeout(uy,5e3+Bg)}function vy(){for(var e=dg=0;e<yy();e++){if(sg[e].id===Qv){dg=e;break}-1!==sg[e].id.indexOf(Qv)&&(dg=e)}}function gy(){1===yy()?(document.getElementById("quality_arrow_up").style.opacity="0",document.getElementById("quality_arrow_down").style.opacity="0"):dg?dg===yy()-1?(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="0.2"):(document.getElementById("quality_arrow_up").style.opacity="1",document.getElementById("quality_arrow_down").style.opacity="1"):(document.getElementById("quality_arrow_up").style.opacity="0.2",document.getElementById("quality_arrow_down").style.opacity="1"),-1!==(Qv=sg[dg].id).indexOf("source")?Uu("quality_name",Qv.replace("source",ye)+sg[dg].band):Uu("quality_name",Qv+sg[dg].band)}function yy(){return sg.length}function by(e,t,n){Uu("progress_bar_current_time",Tp(e)),n&&(Om.style.width=e/t*100+"%")}function wy(){Kp(),Mv()||(em=gg=!1,rg?(pu&&Android.startVideoOffset(og,2,0<Gg?1e3*Gg:-1),ac=Gg):(ac=$d,pu&&Android.startVideoOffset(Xf,3,0<Gg?1e3*Gg:-1)),Qf&&uc()),Nu("progress_bar_jump_to",ka),document.getElementById("progress_bar_steps").style.display="none",Cg=!1,Gg=kg=Mg=0}function ky(){Og=Mg=0,Cy(qh[1])}function Cy(e){kg&&!Lg&&(document.getElementById("progress_bar_steps").style.display="inline-block"),60<Math.abs(e)?Uu("progress_bar_steps",Hn+e/60+qn):Uu("progress_bar_steps",e?Hn+e+Jn:Hn+qh[1]+Jn)}function My(){Uu("progress_bar_jump_to",_e+" ("+(kg<0?"-":"")+Tp(Math.abs(kg))+")"+fe+Tp(Gg))}function Ey(e,t){var n=pu?Android.gettime()/1e3:0;window.clearTimeout(Wv),Cg=!0,Mg<qh.length-1&&Og++%6==0&&Mg++,kg+=qh[Mg]*e,Gg=n+kg,rg&&(Gg=10*Math.floor(Gg/10)),t<Gg?(kg=t-n-qh[1],Gg=n+kg,Og=Mg=0):Gg<0&&(kg=0-n,Gg=Og=Mg=0),My(),Om.style.width=Gg/t*100+"%",Cy(qh[Mg]*e),Wv=window.setTimeout(ky,1e3)}function Iy(){var e=pu?parseInt(Android.gettime()/1e3):0,t="#"+Ir.ChannelVod_vodId;300<e&&e<Fd-300?(xg[t]&&delete xg[t],xg[t]=e,Mf("PlayVod_VodIds",JSON.stringify(xg))):Fd-300<e&&xg[t]&&(delete xg[t],Mf("PlayVod_VodIds",JSON.stringify(xg)))}function Sy(){xg=If("PlayVod_VodIds",{});var e=xy();250<e&&Py(e-250)}function xy(){var e=0;for(var t in xg)xg.hasOwnProperty(t)&&e++;return e}function Py(e){var t=0;for(var n in xg){if(!(t<e))break;delete xg[n],t++}Mf("PlayVod_VodIds",JSON.stringify(xg))}function Ly(){Tu("scene_channel_panel_bottom"),_y(!1),Nu("dialog_vod_saved_text",Cn+Bp(1e3*xg["#"+Ir.ChannelVod_vodId])),Bu("dialog_vod_start")}function Ty(){uy(),Tu("dialog_vod_start"),Oy(),window.setTimeout(function(){Bu("scene_channel_panel_bottom")},1e3)}function By(){return Ou("dialog_vod_start")}function Oy(){Ay(),Pg=0,Gy()}function Gy(){Gu("dialog_vod_"+Pg,"dialog_end_icons_focus")}function Ay(){Au("dialog_vod_"+Pg,"dialog_end_icons_focus")}function Ny(e){Ty(),e?(delete xg["#"+Ir.ChannelVod_vodId],Ir.vodOffset=0,Fg()):(Ir.vodOffset=xg["#"+Ir.ChannelVod_vodId],Sg=1e3*Ir.vodOffset,by(Ir.vodOffset,Fd,!0),Vg())}function Uy(e){if(eg===Ym||By())switch(e.keyCode){case xa:QM()?zm&&!IM&&(rE(),zm--,oE()):Hm&&!Zp()&&dv()?(Gm++,mv()):Zp()&&!By()?(av(),Lg?(bv(),5<++Mh&&(Mh=1),yv()):(Ey(-1,Fd),Bg=2500),py()):By()?(Ay(),Pg?Pg--:Pg++,Gy()):Mv()?(Pv(),Sv(),--Lh<0&&(Lh=3),1===Lh&&(Lh=0),Iv()):By()||_y(!0);break;case La:QM()?zm<TM-1&&!IM&&(rE(),zm++,oE()):!Hm||Zp()||Mv()?Zp()&&!By()?(av(),Lg?(bv(),--Mh<1&&(Mh=5),yv()):(Ey(1,Fd),Bg=2500),py()):By()?(Ay(),Pg?Pg--:Pg++,Gy()):Mv()?(Pv(),Sv(),3<++Lh&&(Lh=0),1===Lh&&(Lh=2),Iv()):By()||_y(!0):Mf("ChatEnable",(ih=dv()||Mv()?(sv(),!1):(ov(),!0))?"true":"false");break;case Pa:Mv()?Pv():Zp()&&!By()?(2===Lg&&1!==Mh?(Lg--,hy()):1===Lg?(Lg--,hy()):0<dg&&1===Mh&&(dg--,gy()),av(),py()):QM()?QM()?iE():By()||_y(!0):ZM();break;case Ta:Mv()?Pv():Zp()&&!By()?(Lg?1===Lg?(Lg++,hy()):dg<yy()-1&&1===Mh&&(dg++,gy()):(Lg++,hy()),av(),py()):QM()?eE():Hm&&dv()?(4<++Fm?fv(!(Fm=1)):4===Fm&&fv(!0),uv(!0)):By()||_y(!0);break;case Ba:By()?Ny(Pg):Mv()?Lv(2):Zp()?Lg?1===Lg?(Ir.Play_ChatForceDisable&&(xp()?Gc(cc):Ac()),Mv()||vv(2)):Nv(2):(av(),py(),kg&&wy()):QM()?(cy(!0),z_(zm,VM,Xv)):_y(!0);break;case Oa:jv(!0);break;case Ia:case Ea:case Sa:Ir.Play_ChatForceDisable&&(xp()?Gc(cc):Ac()),Mv()||vv(2)}else switch(e.keyCode){case Oa:Xp()?(jp(),ly()):zp()}}var Fy={};function Vy(){console.log("InitScreens place holder")}function Dy(){Ib(),Sb(),Pb(),Lb(),Tb(),Ob(),Gb()}function Ry(e){return[e+"_thumbdiv",e+"_img",e+"_infodiv",e+"_title",e+"_createdon",e+"_game",e+"_viwers",e+"_duration",e+"_cell","cpempty_",e+"_scroll",e+"_lang"]}function Hy(){for(var e,t={},n=0;n<arguments.length;n+=1){var a=arguments[n],i=Object.keys(a);for(e=0;e<i.length;e+=1)t[i[e]]=a[i[e]]}return t}function Jy(){Dr=-1,Ir.Main_Go=Fy.screen,Fy.label_init(),document.body.addEventListener("keydown",cb,!1),Fy.status?(Bu(Fy.ids[10]),I_(Fy.posY),nb(),f_()):zy()}function qy(){Dr=0,Fy.label_exit(),document.body.removeEventListener("keydown",cb),Tu(Fy.ids[10])}function zy(){Fu(),k_(Fy.table),Ku(),Fy.cursor=null,Fy.status=!1,Fy.row=document.createElement("div"),Fy.MaxOffset=0,Fy.TopRowCreated=!1,Fy.offset=0,Fy.idObject={},Fy.FirstLoad=!0,Fy.itemsCount=0,Fy.posX=0,Fy.posY=0,Fy.row_id=0,Fy.coloumn_id=0,Fy.data=null,Fy.data_cursor=0,Fy.dataEnded=!1,zu(),jy(),Xy()}function jy(){Fy.loadingData=!0,Fy.loadingDataTry=0,Fy.loadingDataTimeout=3500}function Xy(){Fy.set_url(),pu&&!Fy.itemsCount?Tf(Fy.url,Fy.loadingDataTimeout,2,null,Yy,Wy):Bf(Fy.url,Fy.loadingDataTimeout,2,null,Yy,Wy,!1)}function Wy(){Fy.loadingDataTry++,Fy.loadingDataTry<Fy.loadingDataTryMax?(Fy.loadingDataTimeout+=500,Xy()):(Fy.loadingData=!1,Fy.itemsCount?Fy.dataEnded=!0:(Fy.FirstLoad=!1,Vu(),Yu(T)))}function Yy(e){Fy.concatenate(e)}function Ky(){var e=Fy.data.length-Fy.data_cursor;if(e>Fy.ItemsLimit?e=Fy.ItemsLimit:Fy.loadingData||(Fy.dataEnded=!0),e){var t=Math.ceil(e/Fy.ColoumnsCount),n=Fy.row_id+t,a=document.getElementById(Fy.table);if(Fy.HasSwitches&&!Fy.TopRowCreated){Fy.TopRowCreated=!0,Fy.row=document.createElement("div");var i='<i class="icon-history stream_channel_fallow_icon"></i>'+ka+ka+m;(Ar=document.createElement("div")).setAttribute("id",Fy.ids[8]+"y_0"),Ar.className="stream_cell_period",Ar.innerHTML='<div id="'+Fy.ids[0]+'y_0" class="stream_thumbnail_channel_vod" ><div id="'+Fy.ids[3]+'y_0" class="stream_channel_fallow_game">'+i+"</div></div>",Fy.row.appendChild(Ar),a.appendChild(Fy.row)}for(Fy.row_id;Fy.row_id<n;){for(Fy.coloumn_id===Fy.ColoumnsCount&&(Fy.row=document.createElement("div"),Fy.coloumn_id=0),Fy.coloumn_id;Fy.coloumn_id<Fy.ColoumnsCount&&Fy.data_cursor<Fy.data.length;Fy.data_cursor++)Fy.data[Fy.data_cursor]&&Fy.addCell(Fy.data[Fy.data_cursor]);if(a.appendChild(Fy.row),Fy.coloumn_id===Fy.ColoumnsCount)Fy.row_id++;else if(Fy.data_cursor>=Fy.data.length)break}}Fy.emptyContent=!e&&!Fy.status,tb()}function $y(e,t,n,a){var i=e+"_"+t;return E_(n[1]+i,a),e<Fy.ColoumnsCount&&x_(a),(Ar=document.createElement("div")).style.cssText=Fy.ThumbCssText,i}function Qy(e,t,n,a,i,o){var s=$y(e,t,n,a);return Ar.setAttribute("id",n[5]+s),Ar.setAttribute(ru,i),Ar.innerHTML='<div id="'+n[0]+s+'" class="stream_thumbnail_game"><div><img id="'+n[1]+s+'" class="stream_img"></div><div id="'+n[2]+s+'" class="stream_text2"><div id="<div id="'+n[3]+s+'" class="stream_channel">'+i+"</div>"+(""!==o?'<div id="'+n[4]+s+'"class="stream_info_games" style="width: 100%; display: inline-block;">'+o+"</div>":"")+"</div></div>",Ar}function Zy(e,t,n,a,i,o,s,d,l,c,r,u,_,f,m,h){var p=$y(e,t,n,a);return Ar.setAttribute("id",n[8]+p),Ar.setAttribute(ru,JSON.stringify([r,c,s[2],u,i,_,f,m,h,s[0],l,s[1]+s[2]])),Ar.innerHTML='<div id="'+n[0]+p+'" class="stream_thumbnail_clip"><div><img id="'+n[1]+p+'" class="stream_img"></div><div id="'+n[2]+p+'" class="stream_text2"><div style="line-height: 14px;"><div id="'+n[3]+p+'" class="stream_info" style="width: 72%; display: inline-block; font-size: 85%;">'+i+'</div><div id="'+n[7]+p+'"class="stream_info" style="width:27%; float: right; text-align: right; display: inline-block;">'+l+'</div></div><div  style="line-height: 12px;"><div id="'+n[4]+p+'"class="stream_info" style="width: 59%; display: inline-block;">'+o[0]+o[1]+'</div><div id="'+n[5]+p+'"class="stream_info" style="width: 39%; display: inline-block; float: right; text-align: right;">'+D+Tp(c)+'</div></div><div id="'+n[11]+p+'"class="stream_info">'+s[0]+la+s[1]+s[2]+'</div><div id="'+n[6]+p+'"class="stream_info">'+d+R+"</div></div></div>",Ar}function eb(e,t,n,a,i){var o=$y(e,t,a,i[0]);return Ar.setAttribute("id",a[8]+o),Ar.setAttribute(ru,JSON.stringify(n)),Ar.innerHTML='<div id="'+a[0]+o+'" class="stream_thumbnail_clip"><div><img id="'+a[1]+o+'" class="stream_img"></div><div id="'+a[2]+o+'" class="stream_text2"><div style="line-height: 14px;"><div id="'+a[3]+o+'" class="stream_channel" style="width: 66%; display: inline-block;">'+i[1]+'</div><div id="'+a[7]+o+'"class="stream_info" style="width:33%; float: right; text-align: right; display: inline-block;">'+i[5]+'</div></div><div id="'+a[4]+o+'"class="stream_info">'+ax.parse(i[2])+'</div><div id="'+a[5]+o+'"class="stream_info">'+v+i[3]+'</div><div id="'+a[6]+o+'"class="stream_info">'+i[4]+"</div></div></div>",Ar}function tb(){Fy.status?(C_(Fy.img_404),ju(Fy.posX,Fy.posY,Fy.ColoumnsCount,Fy.itemsCount)):(Fy.emptyContent?Yu(Fy.empty_str()):(Fy.status=!0,C_(Fy.img_404)),Rr&&Fy.status&&xk.restor_playback.defaultValue?Ir.Play_WasPlaying?(h_(Ir.Main_Go),Ir.Main_Go=Er,Ir.vodOffset||(Ir.vodOffset=1),Fd=Ir.vodOffset+1,Hp(zn),1===Ir.Play_WasPlaying?j_():Y_(),u_(!0),window.setTimeout(function(){Eh||Jp()},2e3)):1!==Er?(h_(Ir.Main_Go),Ir.Main_Go=Er,$_(Fy.posY+"_"+Fy.posX,Fy.ids),u_()):(Ir.Never_run&&t_(),Ir.Never_run=!1,nb(),f_()):(nb(),f_()),Rr=!1,Fy.FirstLoad=!1,Vu())}function nb(){Fy.posY<0?ib():(Fy.addFocus(Fy.posY,Fy.posX,Fy.ids,Fy.ColoumnsCount,Fy.itemsCount),2<Fy.posY&&Fy.data_cursor+vb>Fy.data.length&&!Fy.dataEnded&&!Fy.loadingData?(jy(),Xy()):Fy.posY+Fy.ItemsReloadLimit>Fy.itemsCount/Fy.ColoumnsCount&&Fy.data_cursor<Fy.data.length&&(M_(),Fy.loadDataSuccess()),Pr&&$_(Fy.posY+"_"+Fy.posX,Fy.ids))}function ab(e,t){$_(Fy.posY+"_"+Fy.posX,Fy.ids),Fy.posY+=e,Fy.posX=t,nb()}function ib(){Gu(Fy.ids[0]+"y_0",cu)}function ob(){Au(Fy.ids[0]+"y_0",cu)}function sb(e){a_()?n_():Zu()?Qu():(e===Fy.screen?Ir.Main_Go=ar:Ir.Main_Go=e,qy())}function db(e){if(!Fy.HasSwitches||Fy.posY||-1!==e||Fy.emptyContent){if(Fy.HasSwitches&&-1===Fy.posY)Fy.posY=0,nb(),ob();else for(var t=0;t<Fy.ColoumnsCount;t++)if(d_(Fy.posY+e,Fy.posX-t,Fy.ids[0]))return void ab(e,Fy.posX-t)}else $_(Fy.posY+"_"+Fy.posX,Fy.ids),Fy.posY=-1,ib()}function lb(e,t){d_(Fy.posY,Fy.posX+e,Fy.ids[0])?ab(0,Fy.posX+e):d_(Fy.posY+e,t,Fy.ids[0])&&ab(e,t)}function cb(e){if(!Fy.FirstLoad&&!R_())switch(D_(),e.keyCode){case Oa:Fy.key_exit();break;case xa:lb(-1,Fy.ColoumnsCount-1);break;case La:lb(1,0);break;case Pa:db(-1);break;case Ta:db(1);break;case Ia:case Ea:case Sa:case Ba:Fy.key_play()}}Fy.FirstLoad=!1;var rb,ub,_b,fb,mb,hb,pb,vb=100,gb="",yb="",bb="",wb="",kb="",Cb="",Mb={posX:0,posY:0,row_id:0,coloumn_id:0,dataEnded:!1,idObject:{},loadingData:!1,itemsCount:0,loadingDataTryMax:5,loadingDataTimeout:3500,MaxOffset:0,offset:0,status:!1,emptyContent:!1,itemsCountCheck:!1,FirstLoad:!1,row:0,data:null,data_cursor:0,loadDataSuccess:Ky,set_ThumbSize:function(){this.ThumbCssText="width: "+this.ThumbSize+"%; display: inline-block; padding: 3px;"},key_exit:function(){a_()?n_():Zu()?Qu():(this.itemsCount&&$_(this.posY+"_"+this.posX,this.ids),gf(cb))}},Eb={ThumbSize:32.65,ItemsLimit:zr,ItemsReloadLimit:Xr,ColoumnsCount:jr,addFocus:J_,img_404:wu,empty_str:function(){return B+K},key_play:function(){z_(this.posY+"_"+this.posX,this.ids,cb)}};function Ib(){(hb=Hy(hb=Hy({ids:Ry("Live"),table:"stream_table_live",screen:ar,base_url:"https://api.twitch.tv/kraken/streams?limit="+vb,set_url:function(){this.offset&&this.offset+vb>this.MaxOffset&&(this.dataEnded=!0),this.url=this.base_url+"&offset="+this.offset+(""!==Ur?"&broadcaster_language="+Ur:"")},label_init:function(){Ir.Main_CenterLablesVectorPos=0,Gu("top_bar_live","icon_center_focus")},label_exit:function(){Au("top_bar_live","icon_center_focus")},concatenate:function(e){if(this.data){var t=JSON.parse(e);this.MaxOffset=t._total,this.data=this.data.concat(t.streams),this.offset=this.data.length,this.offset>this.MaxOffset&&(this.dataEnded=!0),this.loadingData=!1}else this.data=JSON.parse(e),this.MaxOffset=this.data._total,this.data=this.data.streams,this.offset=this.data.length,this.offset>this.MaxOffset&&(this.dataEnded=!0),this.loadDataSuccess(),this.loadingData=!1},addCell:function(e){this.idObject[e.channel._id]||(this.itemsCount++,this.idObject[e.channel._id]=1,this.row.appendChild(eb(this.row_id,this.coloumn_id,[e.channel.name,e.channel._id,e.channel.status],this.ids,[e.preview.template.replace("{width}x{height}",du),s_(JSON.stringify(e.stream_type))+e.channel.display_name,e.channel.status,e.game,y+Op(e.created_at)+b+", "+h+i_(e.viewers)+H,o_(e.video_height,e.average_fps,e.channel.broadcaster_language)])),this.coloumn_id++)}},Mb),Eb)).set_ThumbSize()}function Sb(){(pb=Hy(pb=Hy({ids:Ry("Featured"),table:"stream_table_featured",screen:Cr,base_url:"https://api.twitch.tv/kraken/streams/featured?limit="+vb,set_url:function(){this.url=this.base_url+"&offset="+this.offset+(eo()&&Fi[Ir.Users_Position].access_token?"&oauth_token="+Fi[Ir.Users_Position].access_token:"")},label_init:function(){Ir.Main_CenterLablesVectorPos=2,Gu("top_bar_featured","icon_center_focus")},label_exit:function(){Au("top_bar_featured","icon_center_focus")},concatenate:function(e){this.data=JSON.parse(e),this.data=this.data.featured,this.dataEnded=!0,this.loadDataSuccess(),this.loadingData=!1},addCell:function(e){e=e.stream,this.idObject[e.channel._id]||(this.itemsCount++,this.idObject[e.channel._id]=1,this.row.appendChild(eb(this.row_id,this.coloumn_id,[e.channel.name,e.channel._id,e.channel.status],this.ids,[e.preview.template.replace("{width}x{height}",du),s_(JSON.stringify(e.stream_type))+e.channel.display_name,e.channel.status,e.game,y+Op(e.created_at)+b+", "+h+i_(e.viewers)+H,o_(e.video_height,e.average_fps,e.channel.broadcaster_language)])),this.coloumn_id++)}},Mb),Eb)).set_ThumbSize()}var xb={ThumbSize:32.65,ItemsLimit:zr,HasSwitches:!0,TopRowCreated:!1,ItemsReloadLimit:Xr,ColoumnsCount:jr,addFocus:J_,cursor:null,period:["day","week","month","all"],img_404:wu,empty_str:function(){return B+U},key_play:function(){-1===this.posY?this.loadingData||(this.periodPos++,4<this.periodPos&&(this.periodPos=1),this.SetPeriod(),zy()):X_(this.posY+"_"+this.posX,this.ids,cb)},concatenate:function(e){if(this.data){var t=JSON.parse(e);this.cursor=t._cursor,""===this.cursor&&(this.dataEnded=!0),this.data=this.data.concat(t.clips),this.loadingData=!1}else this.data=JSON.parse(e),this.cursor=this.data._cursor,""===this.cursor&&(this.dataEnded=!0),this.data=this.data.clips,this.loadDataSuccess(),this.loadingData=!1},addCell:function(e){this.idObject[e.tracking_id]||(this.itemsCount++,this.idObject[e.tracking_id]=1,this.row.appendChild(Zy(this.row_id,this.coloumn_id,this.ids,e.thumbnails.medium,e.broadcaster.display_name,[sn,y_(e.created_at)],[ax.parse(e.title),v,e.game],i_(e.views),"["+e.language.toUpperCase()+"]",e.duration,e.slug,e.broadcaster.name,e.broadcaster.logo.replace("150x150","300x300"),e.broadcaster.id,null!==e.vod?e.vod.id:null,null!==e.vod?e.vod.offset:null)),this.coloumn_id++)}};function Pb(){(rb=Hy(rb=Hy({ids:Ry("Clip"),table:"stream_table_clip",screen:br,periodPos:Ef("Clip_periodPos",2),base_url:"https://api.twitch.tv/kraken/clips/top?limit="+vb,set_url:function(){this.url=this.base_url+"&period="+this.period[this.periodPos-1]+(this.cursor?"&cursor="+this.cursor:"")+(""!==Ur?"&language="+Ur:"")},SetPeriod:function(){Nu("top_bar_clip",U+g_(Vr[this.periodPos-1])),Mf("Clip_periodPos",this.periodPos)},label_init:function(){Ir.Main_CenterLablesVectorPos=5,this.SetPeriod(),Gu("top_bar_clip","icon_center_focus"),Lu("label_refresh","icon-refresh",t+Wt)},label_exit:function(){p_(),Au("top_bar_clip","icon_center_focus"),Lu("label_refresh","icon-refresh",t+Wt)}},Mb),xb)).set_ThumbSize()}function Lb(){(ub=Hy(ub=Hy({ids:Ry("ChannelClip"),table:"stream_table_channel_clip",screen:hr,periodPos:Ef("ChannelClip_periodPos",2),base_url:"https://api.twitch.tv/kraken/clips/top?channel=",set_url:function(){this.url=this.base_url+encodeURIComponent(Ir.Main_selectedChannel)+"&limit="+vb+"&period="+this.period[this.periodPos-1]+(this.cursor?"&cursor="+this.cursor:"")},SetPeriod:function(){Nu("top_bar_game",U+Vr[this.periodPos-1]),Mf("ChannelClip_periodPos",this.periodPos)},label_init:function(){Ir.Main_CenterLablesVectorPos=1,!Ir.Search_isSearching&&Ir.Main_selectedChannel_id&&Md(),Ir.Main_selectedChannel!==this.lastselectedChannel&&(this.status=!1),v_(),this.SetPeriod(),Uu("top_bar_user",Ir.Main_selectedChannelDisplayname),Lu("label_side_panel","icon-arrow-circle-left",x),this.lastselectedChannel=Ir.Main_selectedChannel,Bu(this.ids[10])},label_exit:p_},Mb),xb)).set_ThumbSize()}function Tb(){(_b=Hy(_b=Hy({ids:Ry("AGameClip"),table:"stream_table_a_game_clip",screen:kr,periodPos:Ef("AGameClip_periodPos",2),base_url:"https://api.twitch.tv/kraken/clips/top?game=",set_url:function(){this.url=this.base_url+encodeURIComponent(Ir.Main_gameSelected)+"&limit="+vb+"&period="+this.period[this.periodPos-1]+(this.cursor?"&cursor="+this.cursor:"")+(""!==Ur?"&language="+Ur:"")},SetPeriod:function(){Nu("top_bar_game",w+g_(U+Vr[this.periodPos-1]+": "+Ir.Main_gameSelected)),Mf("AGameClip_periodPos",this.periodPos)},label_init:function(){Ir.Main_CenterLablesVectorPos=3,this.SetPeriod(),Gu("top_bar_game","icon_center_focus"),Lu("label_side_panel","icon-arrow-circle-left",x),this.gameSelected!==Ir.Main_gameSelected&&(this.status=!1),this.gameSelected=Ir.Main_gameSelected},label_exit:function(){Au("top_bar_game","icon_center_focus"),Nu("top_bar_game",f),Lu("label_side_panel","icon-ellipsis",Fn)}},Mb),xb)).set_ThumbSize()}var Bb={ThumbSize:19.35,ItemsLimit:Wr,ItemsReloadLimit:Kr,ColoumnsCount:Yr,addFocus:q_,img_404:yu,empty_str:function(){return B+Q},concatenate:function(e){if(this.data){var t=JSON.parse(e);this.MaxOffset=t._total,this.data=this.data.concat(this.screen===cr?t.follows:t.top),this.offset=this.data.length,this.offset>this.MaxOffset&&(this.dataEnded=!0),this.loadingData=!1}else this.data=JSON.parse(e),this.MaxOffset=this.data._total,this.data=this.screen===cr?this.data.follows:this.data.top,this.offset=this.data.length,this.isLive?this.dataEnded=!0:this.offset>this.MaxOffset&&(this.dataEnded=!0),this.loadDataSuccess(),this.loadingData=!1},key_play:function(){Ir.Main_gameSelected=document.getElementById(this.ids[5]+this.posY+"_"+this.posX).getAttribute(ru),document.body.removeEventListener("keydown",cb),Ir.Main_BeforeAgame=this.screen,Ir.Main_Go=sr,Ir.Main_BeforeAgameisSet=!0,Eo=!1,Dr=0,document.body.removeEventListener("keydown",cb),Tu(this.ids[10]),__(),$_(this.posY+"_"+this.posX,this.ids)},addCell:function(e){var t=this.isLive||this.screen===or,n=t?e.game:e;this.idObject[n._id]||(this.itemsCount++,this.idObject[n._id]=1,this.row.appendChild(Qy(this.row_id,this.coloumn_id,this.ids,n.box.template.replace("{width}x{height}",lu),n.name,t?i_(e.channels)+" "+I+h+i_(e.viewers)+H:"")),this.coloumn_id++)}};function Ob(){(fb=Hy(fb=Hy({ids:Ry("Game"),table:"stream_table_games",screen:or,base_url:"https://api.twitch.tv/kraken/games/top?limit="+vb,set_url:function(){this.offset&&this.offset+vb>this.MaxOffset&&(this.dataEnded=!0),this.url=this.base_url+"&offset="+this.offset},label_init:function(){Ir.Main_CenterLablesVectorPos=3,Gu("top_bar_game","icon_center_focus")},label_exit:function(){Au("top_bar_game","icon_center_focus")}},Mb),Bb)).set_ThumbSize()}function Gb(){(mb=Hy(mb=Hy({ids:Ry("UserGames"),table:"stream_table_user_games",screen:cr,isLive:Sf("user_Games_live",!0),OldUserName:"",base_url:"https://api.twitch.tv/api/users/",set_url:function(){this.offset&&this.offset+vb>this.MaxOffset&&(this.dataEnded=!0),this.url=this.base_url+encodeURIComponent(Fi[Ir.Users_Position].name)+"/follows/games",this.isLive?this.url+="/live?limit=750":this.url+="?limit="+vb+"&offset="+this.offset},key_refresh:function(){this.isLive=!this.isLive,Nu("top_bar_user",u+g_(Fi[Ir.Users_Position].name+" "+(this.isLive?Q:jt))),zy(),Mf("user_Games_live",this.isLive?"true":"false"),ZE&&dI()},label_init:function(){Ir.Main_CenterLablesVectorPos=1,Lu("label_refresh","icon-refresh",Xt+Q+"/"+jt+":"+Wt),Lu("label_side_panel","icon-arrow-circle-left",x),Gu("top_bar_user","icon_center_focus"),this.OldUserName!==Fi[Ir.Users_Position].name&&(this.status=!1),this.OldUserName=Fi[Ir.Users_Position].name,Nu("top_bar_user",u+g_(Fi[Ir.Users_Position].name+" "+(this.isLive?Q:jt)))},label_exit:function(){Ir.Users_Position=0,Au("top_bar_user","icon_center_focus"),Lu("label_refresh","icon-refresh",t+Wt),Uu("top_bar_user",u),Lu("label_side_panel","icon-ellipsis",Fn)}},Mb),Bb)).set_ThumbSize()}var Ab=0,Nb=0,Ub=!1,Fb=0,Vb={},Db=[],Rb=!1,Hb=0,Jb=5,qb=3500,zb=0,jb=0,Xb=!1,Wb=!1,Yb="",Kb=!1,$b=["sc_thumbdiv","sc_img","sc_infodiv","sc_displayname","sc_cell","scempty_","search_channel_scroll"];function Qb(){Ir.Main_CenterLablesVectorPos=1,Ir.Main_Go=gr,Ir.isLastSChannels=!0,Ir.Search_isSearching=!0,Yb!==Ir.Search_data&&(Wb=!1),v_(),Nu("top_bar_user",n+g_(I+" '"+Ir.Search_data+"'")),document.body.addEventListener("keydown",_w,!1),Wb?(I_(Ab),Bu($b[6]),rw(),f_()):ew()}function Zb(){p_(),document.body.removeEventListener("keydown",_w),Tu($b[6])}function ew(){k_("stream_table_search_channel"),Tu($b[6]),Fu(),Ku(),Yb=Ir.Search_data,Wb=!1,Vb={},pf=!(Fb=jb=zb=0),Ab=Nb=0,Ub=Kb=!(Db=[]),zu(),tw(),nw()}function tw(){M_(),Rb=!0,Hb=0,qb=3500}function nw(){var e=Fb+zb;e&&jb-1<e&&(e=jb-$r,Ub=!0);var t="https://api.twitch.tv/kraken/search/channels?query="+encodeURIComponent(Ir.Search_data)+"&limit="+$r+"&offset="+e;pu&&!Fb?Tf(t,qb,2,null,iw,aw):Bf(t,qb,2,null,iw,aw,!1)}function aw(){++Hb<Jb?(qb+=500,nw()):(Rb=!1,Fb?(Ub=!0,sw()):(pf=!1,Vu(),Yu(T)))}function iw(e){var t=JSON.parse(e),n=t.channels.length;jb=parseInt(t._total),n<$r&&(Ub=!0);var a=Fb;Xb=!(Fb+=n);var i=n/Qr;0<n%Qr&&i++;for(var o,s,d,l,c,r=0,u=document.getElementById("stream_table_search_channel"),_=0;_<i;_++){for(s=a/Qr+_,d=document.createElement("tr"),o=0;o<Qr&&r<n;o++,r++)c=(l=t.channels[r])._id,Vb[c]?o--:(Vb[c]=1,d.appendChild(ow(s,s+"_"+o,[l.name,c,l.logo,l.display_name])));for(;o<Qr;o++)Ub&&!Kb&&(Kb=!0,Fb=s*Qr+o),d.appendChild(P_($b[5]+s+"_"+o)),Db.push($b[5]+s+"_"+o);u.appendChild(d)}sw()}function ow(e,t,n){return e<4&&x_(n[2]),L_(t,$b,n)}function sw(){if(Wb){if(C_(bu),0<Db.length&&!Ub)return tw(),void dw();ju(Nb,Ab,Qr,Fb),Db=[]}else Xb?Yu(d):(Wb=!0,C_(bu),rw(),f_()),Bu($b[6]),pf=!1,Vu();Rb=!1}function dw(){Wu(Db.length);var e=Fb+zb;e&&jb-1<e&&(e=jb-eu,Ub=!0),Lf("https://api.twitch.tv/kraken/search/channels?query="+encodeURIComponent(Ir.Search_data)+"&limit="+eu+"&offset="+e,qb,2,null,cw,lw)}function lw(){++Hb<Jb?(qb+=500,dw()):(Ub=!0,Fb-=Db.length,Db=[],sw())}function cw(e){var t,n,a=JSON.parse(e),i=a.channels.length,o=0,s=0,d=[];for(jb=parseInt(a._total),i<eu&&(Ub=!0);o<Db.length&&s<i;o++,s++)n=(t=a.channels[s])._id,Vb[n]?o--:(Vb[n]=1,T_(Db[o],[t.name,n,t.logo,t.display_name],$b),d.push(o));for(o=d.length-1;-1<o;o--)Db.splice(d[o],1);zb+=s,Ub&&(Fb-=Db.length,Db=[]),sw()}function rw(){H_(Ab,Nb,$b,Qr,Fb),Fb/Qr<Ab+Zr&&!Ub&&!Rb&&(tw(),nw()),Pr&&uw()}function uw(){Fb&&$_(Ab+"_"+Nb,$b)}function _w(e){var t;if(!pf&&!R_())switch(D_(),e.keyCode){case Oa:a_()?n_():Zu()?Qu():(uw(),gf(_w));break;case xa:if(d_(Ab,Nb-1,$b[0]))uw(),Nb--,rw();else for(t=Qr-1;-1<t;t--)if(d_(Ab-1,t,$b[0])){uw(),Ab--,Nb=t,rw();break}break;case La:d_(Ab,Nb+1,$b[0])?(uw(),Nb++,rw()):d_(Ab+1,0,$b[0])&&(uw(),Ab++,Nb=0,rw());break;case Pa:for(t=0;t<Qr;t++)if(d_(Ab-1,Nb-t,$b[0])){uw(),Ab--,Nb-=t,rw();break}break;case Ta:for(t=0;t<Qr;t++)if(d_(Ab+1,Nb-t,$b[0])){uw(),Ab++,Nb-=t,rw();break}break;case Ia:case Ea:case Sa:case Ba:Ir.Main_selectedChannel=document.getElementById($b[4]+Ab+"_"+Nb).getAttribute(ru),Ir.Main_selectedChannel_id=document.getElementById($b[4]+Ab+"_"+Nb).getAttribute("data-id"),Ir.Main_selectedChannelDisplayname=document.getElementById($b[3]+Ab+"_"+Nb).textContent,document.body.removeEventListener("keydown",_w),Ir.Main_BeforeChannel=gr,Ir.Main_Go=fr,Ir.Main_BeforeChannelisSet=!0,Hs=Ja=!1,Tu($b[6]),u_()}}var fw=!1,mw=0,hw=0,pw=0,vw=0,gw=5,yw=3500,bw=0,ww=0,kw=!1,Cw=!1,Mw="",Ew=["sgthumbdiv","sgimg","sginfodiv","sgdisplayname","sgviwers","sgcell","sgempty_","search_games_scroll"];function Iw(){Ir.Main_CenterLablesVectorPos=1,Ir.Main_Go=ur,Ir.Search_isSearching=!0,v_(),Mw!==Ir.Search_data&&(fw=!1),Nu("top_bar_user",n+g_(f+" '"+Ir.Search_data+"'")),document.body.addEventListener("keydown",Uw,!1),fw?(I_(mw),Bu(Ew[7]),Aw(),f_()):xw()}function Sw(){Ir.Search_isSearching||p_(),document.body.removeEventListener("keydown",Uw),Ir.Games_return=!1,Tu(Ew[7])}function xw(){k_("stream_table_search_game"),Tu(Ew[7]),Fu(),Ku(),Mw=Ir.Search_data,Cw=fw=!1,mw=hw=pw=ww=bw=0,zu(),Pw(),Lw()}function Pw(){M_(),pf=!0,vw=0,yw=3500}function Lw(){Lf("https://api.twitch.tv/kraken/search/games?query="+encodeURIComponent(Ir.Search_data),yw,2,null,Bw,Tw)}function Tw(){++vw<gw?(yw+=500,Lw()):(pf=!1,pw?Gw():(Vu(),Yu(T)))}function Bw(e){var t=JSON.parse(e),n=0;null!==t.games&&(n=t.games.length);var a=pw;kw=!(pw+=n);var i=n/Yr;0<n%Yr&&i++;for(var o,s,d,l,c=0,r=document.getElementById("stream_table_search_game"),u=0;u<i;u++){for(s=a/Yr+u,d=document.createElement("tr"),o=0;o<Yr&&c<n;o++,c++)l=t.games[c],d.appendChild(Ow(s,s+"_"+o,[l.name,l.box.template.replace("{width}x{height}",lu),""]));for(;o<Yr;o++)Cw||(Cw=!0,pw=s*Yr+o),d.appendChild(P_(Ew[6]+s+"_"+o));r.appendChild(d)}Gw()}function Ow(e,t,n){return e<2&&x_(n[1]),N_(t,Ew,n)}function Gw(){fw||(kw?Yu(d):(fw=!0,C_(wu),Aw(),f_()),Vu()),Bu(Ew[7]),pf=!1,ju(hw,mw,Yr,pw)}function Aw(){q_(mw,hw,Ew,Yr,pw),Pr&&Nw()}function Nw(){pw&&$_(mw+"_"+hw,Ew)}function Uw(e){var t;if(!pf&&!R_())switch(D_(),e.keyCode){case Oa:a_()?n_():Zu()?Qu():(Nw(),gf(Uw));break;case xa:if(d_(mw,hw-1,Ew[0]))Nw(),hw--,Aw();else for(t=Yr-1;-1<t;t--)if(d_(mw-1,t,Ew[0])){Nw(),mw--,hw=t,Aw();break}break;case La:d_(mw,hw+1,Ew[0])?(Nw(),hw++,Aw()):d_(mw+1,0,Ew[0])&&(Nw(),mw++,hw=0,Aw());break;case Pa:for(t=0;t<Yr;t++)if(d_(mw-1,hw-t,Ew[0])){Nw(),mw--,hw-=t,Aw();break}break;case Ta:for(t=0;t<Yr;t++)if(d_(mw+1,hw-t,Ew[0])){Nw(),mw++,hw-=t,Aw();break}break;case Ia:case Ea:case Sa:case Ba:Ir.gameSelectedOld=Ir.Main_gameSelected,Sw(),Ir.Main_gameSelected=document.getElementById(Ew[5]+mw+"_"+hw).getAttribute(ru),document.body.removeEventListener("keydown",Uw),Ir.Main_Go=sr,Ir.Games_return=!0,u_()}}var Fw=0,Vw=0,Dw=!1;function Rw(){Ku(),Tu("label_refresh"),Lu("label_side_panel","icon-arrow-circle-left",x),Uu("top_bar_user",n),document.getElementById("top_lables").style.marginLeft="14%",document.getElementById("top_bar_live").style.display="none",document.getElementById("top_bar_featured").style.display="none",document.getElementById("top_bar_game").style.display="none",document.getElementById("top_bar_vod").style.display="none",document.getElementById("top_bar_clip").style.display="none",jc.placeholder=k,Gu("top_bar_user","icon_center_focus"),Bu("search_scroll"),Vw=Fw=0,qw(),jw()}function Hw(){Xw(!1),document.body.removeEventListener("keydown",zw),qw(),Ir.Main_Go=Ir.Main_BeforeSearch,document.getElementById("top_lables").style.marginLeft="18.5%",Uu("top_bar_user",u),Au("top_bar_user","icon_center_focus"),Lu("label_side_panel","icon-ellipsis",Fn),Bu("label_refresh"),document.getElementById("top_bar_live").style.display="inline-block",document.getElementById("top_bar_featured").style.display="inline-block",document.getElementById("top_bar_game").style.display="inline-block",document.getElementById("top_bar_vod").style.display="inline-block",document.getElementById("top_bar_clip").style.display="inline-block",jc.value="",Tu("search_scroll")}function Jw(){Hw(),ef(function(){Vw?1===Vw?Iw():2===Vw&&fk():Qb()})}function qw(){Au("chanel_button","button_search_focused"),Au("game_button","button_search_focused"),Au("live_button","button_search_focused"),Fw&&(Vw?1===Vw?Gu("game_button","button_search_focused"):2===Vw&&Gu("live_button","button_search_focused"):Gu("chanel_button","button_search_focused"))}function zw(e){if(!Dw)switch(e.keyCode){case Oa:a_()?n_():Zu()?Qu():(Hw(),u_());break;case xa:1===Fw&&(--Vw<0&&(Vw=2),qw());break;case La:1===Fw&&(2<++Vw&&(Vw=0),qw());break;case Pa:1===Fw&&(Fw=0,qw(),jw());break;case Ta:Fw?1===Fw&&(Fw=0,qw(),jw()):(Xw(!1),Fw=1,qw());break;case Ia:case Ea:case Sa:case Ba:Fw?""!==jc.value&&null!==jc.value?(Ir.Search_data=jc.value,jc.value="",Jw()):(Yu(s),window.setTimeout(function(){Ku()},1e3)):jw()}}function jw(){document.body.removeEventListener("keydown",zw),document.body.addEventListener("keydown",Yw,!1),jc.placeholder=k,jc.focus(),Dw=!0}function Xw(e){jc.blur(),Ww(),document.body.removeEventListener("keydown",Yw),jc.placeholder=E+k,e&&document.body.addEventListener("keydown",zw,!1),Dw=!1}function Ww(){if(null!==jc){var e=jc.cloneNode(!0);jc.parentNode.replaceChild(e,jc),jc=document.getElementById("search_input")}}function Yw(e){switch(e.keyCode){case Oa:Zu()?Qu():a_()?n_():(Hw(),u_());break;case Ua:jc.value="";break;case Aa:case Ta:Xw(!0),Fw=1,qw();break;case Ga:jc.value=jc.value.slice(0,-1);break;case Na:jc.value+=" "}}var Kw=0,$w=0,Qw=!1,Zw=0,ek={},tk=[],nk=!1,ak=0,ik=5,ok=3500,sk=0,dk=0,lk=!1,ck=!1,rk=!1,uk="",_k=["sl_thumbdiv","sl_img","sl_infodiv","sl_displayname","sl_streamtitle","sl_streamgame","sl_viwers","sl_quality","sl_cell","slempty_","search_live_scroll"];function fk(){Ir.Main_CenterLablesVectorPos=1,Ir.Main_Go=_r,Ir.Search_isSearching=!0,v_(),uk!==Ir.Search_data&&(ck=!1),Nu("top_bar_user",n+g_(_+" '"+Ir.Search_data+"'")),document.body.addEventListener("keydown",Ik,!1),ck?(I_(Kw),Bu(_k[10]),Mk(),f_()):hk()}function mk(){p_(),document.body.removeEventListener("keydown",Ik),Tu(_k[10])}function hk(){k_("stream_table_search_live"),Tu(_k[10]),Fu(),Ku(),uk=Ir.Search_data,ck=!1,pf=!(rk=!(tk=[])),Kw=$w=Zw=dk=sk=0,Qw=!(ek={}),zu(),pk(),vk()}function pk(){M_(),nk=!0,ak=0,ok=3500}function vk(){var e=Zw+sk;e&&dk-1<e&&(e=dk-zr,Qw=!0);var t="https://api.twitch.tv/kraken/search/streams?query="+encodeURIComponent(Ir.Search_data)+"&limit="+zr+"&offset="+e;pu&&!Zw?Tf(t,ok,2,null,yk,gk):Bf(t,ok,2,null,yk,gk,!1)}function gk(){++ak<ik?(ok+=500,vk()):(nk=!1,Zw?(Qw=!0,bk()):(pf=!1,Vu(),Yu(T)))}function yk(e){var t=JSON.parse(e),n=t.streams.length;dk=parseInt(t._total),n<zr&&(Qw=!0);var a=Zw;lk=!(Zw+=n);var i=n/jr;0<n%jr&&i++;for(var o,s,d,l,c,r=0,u=document.getElementById("stream_table_search_live"),_=0;_<i;_++){for(s=a/jr+_,d=document.createElement("tr"),o=0;o<jr&&r<n;o++,r++)c=(l=t.streams[r]).channel._id,ek[c]?o--:(ek[c]=1,d.appendChild(O_(s,s+"_"+o,[l.channel.name,c],_k,[l.preview.template.replace("{width}x{height}",du),s_(JSON.stringify(l.stream_type))+l.channel.display_name,l.channel.status,l.game,y+Op(l.created_at)+b+", "+h+i_(l.viewers)+H,o_(l.video_height,l.average_fps,l.channel.broadcaster_language)])));for(;o<jr;o++)Qw&&!rk&&(rk=!0,Zw=s*jr+o),d.appendChild(P_(_k[9]+s+"_"+o)),tk.push(_k[9]+s+"_"+o);u.appendChild(d)}bk()}function bk(){if(ck){if(C_(wu),0<tk.length&&!Qw)return pk(),void wk();ju($w,Kw,jr,Zw),tk=[]}else lk?Yu(d):(ck=!0,C_(wu),Mk(),f_()),Bu(_k[10]),pf=!1,Vu();nk=!1}function wk(){Wu(tk.length);var e=Zw+sk;e&&dk-1<e&&(e=dk-eu,Qw=!0),Lf("https://api.twitch.tv/kraken/search/streams?query="+encodeURIComponent(Ir.Search_data)+"&limit="+eu+"&offset="+e,ok,2,null,Ck,kk)}function kk(){++ak<ik?(ok+=500,wk()):(Qw=!0,Zw-=tk.length,tk=[],bk())}function Ck(e){var t,n,a=JSON.parse(e),i=a.streams.length,o=0,s=0,d=[];for(dk=parseInt(a._total),i<eu&&(Qw=!0);o<tk.length&&s<i;o++,s++)n=(t=a.streams[s]).channel._id,ek[n]?o--:(ek[n]=1,G_(tk[o],[t.channel.name,n],[t.preview.template.replace("{width}x{height}",du),s_(JSON.stringify(t.stream_type))+t.channel.display_name,t.channel.status,t.game,y+Op(t.created_at)+b+", "+h+i_(t.viewers)+H,o_(t.video_height,t.average_fps,t.channel.broadcaster_language)],_k),d.push(o));for(o=d.length-1;-1<o;o--)tk.splice(d[o],1);sk+=s,Qw&&(Zw-=tk.length,tk=[]),bk()}function Mk(){J_(Kw,$w,_k,jr,Zw),Zw/jr<Kw+Xr&&!Qw&&!nk&&(pk(),vk()),Pr&&Ek()}function Ek(){Zw&&$_(Kw+"_"+$w,_k)}function Ik(e){var t;if(!pf&&!R_())switch(D_(),e.keyCode){case Oa:a_()?n_():Zu()?Qu():(Ek(),gf(Ik));break;case xa:if(d_(Kw,$w-1,_k[0]))Ek(),$w--,Mk();else for(t=jr-1;-1<t;t--)if(d_(Kw-1,t,_k[0])){Ek(),Kw--,$w=t,Mk();break}break;case La:d_(Kw,$w+1,_k[0])?(Ek(),$w++,Mk()):d_(Kw+1,0,_k[0])&&(Ek(),Kw++,$w=0,Mk());break;case Pa:for(t=0;t<jr;t++)if(d_(Kw-1,$w-t,_k[0])){Ek(),Kw--,$w-=t,Mk();break}break;case Ta:for(t=0;t<jr;t++)if(d_(Kw+1,$w-t,_k[0])){Ek(),Kw++,$w-=t,Mk();break}break;case Ia:case Ea:case Sa:case Ba:z_(Kw+"_"+$w,_k,Ik)}}var Sk=0,xk={restor_playback:{values:["off","on"],defaultValue:2},chat_font_size:{values:["60%","80%","100%","120%","140%"],defaultValue:3},chat_brightness:{values:["0%","5%","10%","15%","20%","25%","30%","35%","40%","45%","50%","55%","60%","65%","70%","75%","80%","85%","90%","95%","100%"],defaultValue:11},force_disable_chat:{values:["off","on"],defaultValue:2},buffer_live:{values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],defaultValue:4},buffer_vod:{values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],defaultValue:4},buffer_clip:{values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],defaultValue:3},videos_animation:{values:["off","on"],defaultValue:2},clock_offset:{values:Pk(),defaultValue:49},content_lang:{values:["All"],set_values:[""],defaultValue:1}};function Pk(){for(var e=[],t=43200,n=0;n<48;n++)e.push("-"+Tp(t)),t-=900;for(e.push(Tp(0)),t=900,n=0;n<48;n++)e.push(Tp(t)),t+=900;return e}var Lk=[],Tk=0;function Bk(){r_(),Tu("label_side_panel"),Lu("label_refresh","icon-arrow-circle-left",oa),document.body.addEventListener("keydown",$k,!1),Uu("top_bar_user",a),document.getElementById("top_lables").style.marginLeft="14%",document.getElementById("top_bar_live").style.display="none",document.getElementById("top_bar_featured").style.display="none",document.getElementById("top_bar_game").style.display="none",document.getElementById("top_bar_vod").style.display="none",document.getElementById("top_bar_clip").style.display="none",Gu("top_bar_user","icon_center_focus"),Bu("settings_scroll"),qk(Sk=0),Fk("content_lang",Wn,Zk)}function Ok(){document.body.removeEventListener("keydown",$k),Bu("label_side_panel"),zk(),Uu("top_bar_user",u),document.getElementById("top_lables").style.marginLeft="18.5%",document.getElementById("top_bar_live").style.display="inline-block",document.getElementById("top_bar_featured").style.display="inline-block",document.getElementById("top_bar_game").style.display="inline-block",document.getElementById("top_bar_vod").style.display="inline-block",document.getElementById("top_bar_clip").style.display="inline-block",Au("top_bar_user","icon_center_focus"),Lu("label_refresh","icon-refresh",t+Wt),Tu("settings_scroll")}function Gk(){var e,t="";t+=Ak("general",yn),e="content_lang",Lk.push(e),xk[e].values=[Yn],t+=Uk(e,Wn,""),e="clock_offset",Lk.push(e),t+=Nk(e,jn),e="restor_playback",Lk.push(e),xk[e].values=[Tn,Ln],t+=Uk(e,Bn,On),e="videos_animation",Lk.push(e),xk[e].values=[Tn,Ln],t+=Nk(e,Un),t+=Ak("play",fn),e="chat_font_size",Lk.push(e),t+=Uk(e,Gn,An),e="chat_brightness",Lk.push(e),t+=Nk(e,ia),e="force_disable_chat",Lk.push(e),xk[e].values=[Jt,B],t+=Uk(e,na,aa),t+='<div id="setting_title_buffers" class="settings_title">'+mn+'</div><div id="setting_title_buffers_summary" class="settings_summary">'+hn+"</div>",e="buffer_live",Lk.push(e),t+=Nk(e,pn),e="buffer_vod",Lk.push(e),t+=Nk(e,vn),e="buffer_clip",Lk.push(e),Nu("settings_main",t+=Nk(e,gn)),Tk=Lk.length,dC()}function Ak(e,t){return'<div id="setting_title_'+e+'" class="settings_section">'+t+"</div>"}function Nk(e,t){return'<div id="'+e+'_div" class="settings_div"><div id="'+e+'_name" class="settings_name">'+t+'</div><div class="settings_arraw_div"><div id="'+e+'arrow_left" class="left"></div></div><div id="'+e+'" class="strokedextramini settings_value">'+Rk(e)+'</div><div class="settings_arraw_div"><div id="'+e+'arrow_right" class="right"></div></div></div>'}function Uk(e,t,n){return'<div id="'+e+'_div" class="settings_div"><div id="'+e+'_name" class="settings_name">'+t+'<div id="'+e+'_summary" class="settings_summary" style="font-size: 65%;">'+n+'</div></div><div class="settings_arraw_div"><div id="'+e+'arrow_left" class="left"></div></div><div id="'+e+'" class="strokedextramini settings_value">'+Rk(e)+'</div><div class="settings_arraw_div"><div id="'+e+'arrow_right" class="right"></div></div></div>'}function Fk(e,t,n){Nu(e+"_name",t+'<div id="'+e+'_summary" class="settings_summary" style="font-size: 65%;">'+n+"</div>")}function Vk(){var e="";for(e in Uu("setting_title_general",yn),Uu((e="clock_offset")+"_name",jn),Uu((e="content_lang")+"_name",Wn),Uu(e,Rk(e)),xk[e].values=[Yn],Uu("setting_title_play",fn),Uu("setting_title_buffers",mn),Uu("setting_title_buffers_summary",hn),Uu((e="buffer_live")+"_name",pn),Uu((e="buffer_vod")+"_name",vn),Uu((e="buffer_clip")+"_name",gn),Fk(e="restor_playback",Bn,On),xk[e].values=[Tn,Ln],Fk(e="chat_font_size",Gn,An),Fk(e="force_disable_chat",na,aa),xk[e].values=[Tn,Ln],Uu((e="videos_animation")+"_name",Un),xk[e].values=[Tn,Ln],Uu((e="chat_brightness")+"_name",ia),xk)xk.hasOwnProperty(e)&&Uu(e,Rk(e));sC()}function Dk(){for(var e in xk)xk[e].defaultValue=Ef(e,xk[e].defaultValue),xk[e].defaultValue-=1,xk[e].defaultValue>Jk(e)&&(xk[e].defaultValue=0);Yk(0),Kk(),Um=(.05*Hk("chat_brightness")).toFixed(2),ES=Hk("videos_animation"),Ir.Play_ChatForceDisable=Hk("force_disable_chat")}function Rk(e){return xk[e].values[Hk(e)]}function Hk(e){return xk[e].defaultValue}function Jk(e){return xk[e].values.length-1}function qk(e){var t=Lk[Sk];Gu(t,"settings_value_focus"),Gu(t+"_div","settings_div_focus"),Xk(e)}function zk(){var e=Lk[Sk];document.getElementById(e+"arrow_left").style.opacity="0",document.getElementById(e+"arrow_right").style.opacity="0",Au(e,"settings_value_focus"),Au(e+"_div","settings_div_focus")}function jk(e){var t=Lk[e];Mf(t,Hk(t)+1),Uu(t,Rk(t)),Xk(e),Wk(e)}function Xk(e){var t=Lk[e];if(Jk(t)){var n=Hk(t),a=Jk(t);0<n&&n<a?(document.getElementById(t+"arrow_left").style.opacity="1",document.getElementById(t+"arrow_right").style.opacity="1"):n===a?(document.getElementById(t+"arrow_left").style.opacity="1",document.getElementById(t+"arrow_right").style.opacity="0.2"):(document.getElementById(t+"arrow_left").style.opacity="0.2",document.getElementById(t+"arrow_right").style.opacity="1")}}function Wk(e){"videos_animation"===(e=Lk[e])?ES=Hk("videos_animation"):"buffer_live"===e?Yk(1):"buffer_vod"===e?Yk(2):"buffer_clip"===e?Yk(3):"chat_brightness"===e?(Um=(.05*Hk("chat_brightness")).toFixed(2),_v(!1)):"force_disable_chat"===e?Ir.Play_ChatForceDisable=Hk("force_disable_chat"):"chat_font_size"===e?Zh():"clock_offset"===e&&(Kk(),af())}function Yk(e){try{e?1===e?(jm=1e3*Rk("buffer_live"),pu&&Android.SetBuffer(1,jm)):2===e?(ug=1e3*Rk("buffer_vod"),pu&&Android.SetBuffer(2,ug)):3===e&&(nm=1e3*Rk("buffer_clip"),pu&&Android.SetBuffer(3,nm)):(jm=1e3*Rk("buffer_live"),ug=1e3*Rk("buffer_vod"),nm=1e3*Rk("buffer_clip"),pu&&(Android.SetBuffer(1,jm),Android.SetBuffer(2,ug),Android.SetBuffer(3,nm)))}catch(e){}}function Kk(){var e=Hk("clock_offset");hu=e<48?-9e5*(48-e):9e5*(e-48)}function $k(e){var t;switch(e.keyCode){case Oa:Zu()?Qu():a_()?n_():(Ok(),u_());break;case xa:0<Hk(t=Lk[Sk])&&(xk[t].defaultValue-=1,jk(Sk));break;case La:Hk(t=Lk[Sk])<Jk(t)&&(xk[t].defaultValue+=1,jk(Sk));break;case Pa:0<Sk&&(zk(),qk(--Sk));break;case Ta:Sk<Tk-1&&(zk(),qk(++Sk));break;case Ba:Sk||aC()}}var Qk=0,Zk="",eC={All:{values:["off","on"],defaultValue:2,set_values:""},"Dansk [DA]":{values:["off","on"],defaultValue:1,set_values:"da"},"Deutsch [DE]":{values:["off","on"],defaultValue:1,set_values:"de"},"English [EN]":{values:["off","on"],defaultValue:1,set_values:"en,en-gb"},"Español [ES]":{values:["off","on"],defaultValue:1,set_values:"es,es-mx"},"Français [FR]":{values:["off","on"],defaultValue:1,set_values:"fr"},"Italiano [IT]":{values:["off","on"],defaultValue:1,set_values:"it"},"Magyar [HU]":{values:["off","on"],defaultValue:1,set_values:"hu"},"Nederlands [NL]":{values:["off","on"],defaultValue:1,set_values:"nl"},"Norsk [NO]":{values:["off","on"],defaultValue:1,set_values:"no"},"Polski [PL]":{values:["off","on"],defaultValue:1,set_values:"pl"},"Português [PT]":{values:["off","on"],defaultValue:1,set_values:"pt,pt-br"},"Slovenčina [SK]":{values:["off","on"],defaultValue:1,set_values:"sk"},"Suomi [FI]":{values:["off","on"],defaultValue:1,set_values:"fi"},"Svenska [SV]":{values:["off","on"],defaultValue:1,set_values:"sv"},"Tiếng Việt [VI]":{values:["off","on"],defaultValue:1,set_values:"vi"},"Türkçe [TR]":{values:["off","on"],defaultValue:1,set_values:"tr"},"Čeština [CS]":{values:["off","on"],defaultValue:1,set_values:"cs"},"Ελληνικά [EL]":{values:["off","on"],defaultValue:1,set_values:"el"},"Русский [RU]":{values:["off","on"],defaultValue:1,set_values:"ru"},"ภาษาไทย [TH]":{values:["off","on"],defaultValue:1,set_values:"th"},"中文 [ZH]":{values:["off","on"],defaultValue:1,set_values:"zh-cn,zh-tw"},"日本語 [JA]":{values:["off","on"],defaultValue:1,set_values:"ja"},"한국어 [KO]":{values:["off","on"],defaultValue:1,set_values:"ko"},"Română [RO]":{values:["off","on"],defaultValue:1,set_values:"ro"}},tC=[],nC=0;function aC(){r_(),document.body.removeEventListener("keydown",$k),Tu("settings_main"),Bu("settings_lang"),gC(),Uu("top_bar_featured",bn),document.getElementById("top_bar_featured").style.display="inline-block",document.body.addEventListener("keydown",yC,!1),fC(Qk=0),oC()}function iC(){document.body.removeEventListener("keydown",yC),document.body.addEventListener("keydown",$k,!1),document.getElementById("settings_scroll").style.top=.085*screen.height+"px",Bu("settings_main"),Tu("settings_lang"),Uu("top_bar_featured",on),document.getElementById("top_bar_featured").style.display="none",mC(),sC(),oC()}function oC(){""===Ur&&(Zk=Kn,eC.All.defaultValue=1,pC(0),Gu(tC[0],"strokedextraminired"),gC()),Fk("content_lang",Wn,Zk)}function sC(){if(Ur="",!uC("All")){for(var e in eC)uC(e)&&(Ur+=","+eC[e].set_values);Ur=Ur.slice(1)}Zk=""===Ur?Kn:Ur.toUpperCase()}function dC(){var e="";for(var t in eC)tC.push(t),eC[t].values=[B,Jt],e+=lC(t,t);Nu("settings_lang",e),nC=tC.length}function lC(e,t){return'<div id="'+e+'_div" class="settings_div"><div id="'+e+'_name" class="settings_name">'+t+'</div><div class="settings_arraw_div"><div id="'+e+'arrow_left" class="left"></div></div><div id="'+e+'" class="'+(uC(e)?"strokedextraminired ":"")+'strokedextramini settings_value">'+rC(e)+'</div><div class="settings_arraw_div"><div id="'+e+'arrow_right" class="right"></div></div></div>'}function cC(){for(var e in eC)eC[e].defaultValue=Ef(e,eC[e].defaultValue),eC[e].defaultValue-=1;sC()}function rC(e){return eC[e].values[uC(e)]}function uC(e){return eC[e].defaultValue}function _C(e){return eC[e].values.length-1}function fC(e){var t=tC[Qk];Gu(t,"settings_value_focus"),Gu(t+"_div","settings_div_focus"),vC(e),hC(t)}function mC(){var e=tC[Qk];document.getElementById(e+"arrow_left").style.opacity="0",document.getElementById(e+"arrow_right").style.opacity="0",Au(e,"settings_value_focus"),Au(e+"_div","settings_div_focus")}function hC(){var e=screen.height;7<Qk?(e*=.093,e+=-1*document.getElementById(tC[Qk-7]).offsetTop):e*=.077,Qk<18&&(document.getElementById("settings_scroll").style.top=e+"px")}function pC(e){var t=tC[e];Mf(t,uC(t)+1),Uu(t,rC(t)),vC(e)}function vC(e){var t=tC[e],n=uC(t),a=_C(t);0<n&&n<a?(document.getElementById(t+"arrow_left").style.opacity="1",document.getElementById(t+"arrow_right").style.opacity="1"):n===a?(document.getElementById(t+"arrow_left").style.opacity="1",document.getElementById(t+"arrow_right").style.opacity="0.2"):(document.getElementById(t+"arrow_left").style.opacity="0.2",document.getElementById(t+"arrow_right").style.opacity="1")}function gC(){for(var e in eC)-1===e.indexOf("All")&&(document.getElementById(e+"_div").style.display=uC("All")?"none":"inline-block")}function yC(e){var t;switch(e.keyCode){case Oa:iC();break;case xa:0<uC(t=tC[Qk])&&(eC[t].defaultValue-=1,pC(Qk),Au(tC[Qk],"strokedextraminired"),-1!==t.indexOf("All")&&gC());break;case La:uC(t=tC[Qk])<_C(t)&&(eC[t].defaultValue+=1,pC(Qk),Gu(tC[Qk],"strokedextraminired"),-1!==t.indexOf("All")&&gC());break;case Pa:0<Qk&&(mC(),fC(--Qk));break;case Ta:!uC("All")&&Qk<nC-1&&(mC(),fC(++Qk))}}var bC=0,wC=0,kC=!1,CC=0,MC=!1,EC=0,IC=5,SC=3500,xC=[],PC=0,LC=!1,TC=!1,BC="",OC=!1,GC=["uc_thumbdiv","uc_img","uc_infodiv","uc_displayname","uc_cell","ucempty_","user_channels_scroll"];function AC(){Ir.Main_CenterLablesVectorPos=1,Ir.Main_Go=vr,Ir.isLastSChannels=!1,Lu("label_side_panel","icon-arrow-circle-left",x),Gu("top_bar_user","icon_center_focus"),Nu("top_bar_user",u+g_(Fi[Ir.Users_Position].name+Z)),document.body.addEventListener("keydown",XC,!1),BC!==Fi[Ir.Users_Position].name&&(TC=!1),TC?(I_(bC),Bu(GC[6]),zC(),f_()):UC()}function NC(){Ir.Users_Position=0,Au("top_bar_user","icon_center_focus"),document.body.removeEventListener("keydown",XC),Uu("top_bar_user",u),Lu("label_side_panel","icon-ellipsis",Fn),Tu(GC[6])}function UC(){k_("stream_table_user_channels"),Tu(GC[6]),Fu(),Ku(),BC=Fi[Ir.Users_Position].name,bC=wC=CC=PC=0,pf=!(OC=kC=TC=!1),zu(),xC=[],FC(),VC()}function FC(){M_(),MC=!0,EC=0,SC=3500}function VC(){Lf("https://api.twitch.tv/kraken/users/"+encodeURIComponent(Fi[Ir.Users_Position].id)+"/follows/channels?limit=100&offset="+PC+"&sortby=created_at&",SC,2,null,RC,DC)}function DC(){++EC<IC?(SC+=500,VC()):(MC=!1,CC?(kC=!0,qC()):(pf=!1,Vu(),Yu(T)))}function RC(e){var t=JSON.parse(e).follows,n=t.length;if(n){for(var a="",i=0;i<n;i++)a=t[i].channel.name+","+t[i].channel._id+","+t[i].channel.logo+","+t[i].channel.display_name,-1===xC.indexOf(a)&&xC.push(a);PC+=n,FC(),VC()}else xC.sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}),HC()}function HC(){var e=$r,t=CC,n=xC.length-t;n<e&&(e=n),e<$r&&(kC=!0),LC=!(CC+=e);var a=e/Qr;0<e%Qr&&a++;for(var i,o,s,d=t,l=document.getElementById("stream_table_user_channels"),c=0;c<a;c++){for(o=t/Qr+c,s=document.createElement("tr"),i=0;i<Qr&&d<xC.length;i++,d++)s.appendChild(JC(o,o+"_"+i,xC[d].split(",")));for(;i<Qr;i++)kC&&!OC&&(OC=!0,CC=o*Qr+i),s.appendChild(P_(GC[5]+o+"_"+i));l.appendChild(s)}qC()}function JC(e,t,n){return e<4&&x_(n[2]),L_(t,GC,n)}function qC(){TC?C_(bu):(LC?Yu(B+Z):(TC=!0,C_(bu),zC(),f_()),Bu(GC[6]),pf=!1,Vu()),MC=!1,ju(wC,bC,Qr,CC)}function zC(){H_(bC,wC,GC,Qr,CC),CC/Qr<bC+Zr&&!kC&&!MC&&(FC(),VC()),Pr&&jC()}function jC(){CC&&$_(bC+"_"+wC,GC)}function XC(e){var t;if(!pf&&!R_())switch(D_(),e.keyCode){case Oa:a_()?n_():Zu()?Qu():(jC(),gf(XC));break;case xa:if(d_(bC,wC-1,GC[0]))jC(),wC--,zC();else for(t=Qr-1;-1<t;t--)if(d_(bC-1,t,GC[0])){jC(),bC--,wC=t,zC();break}break;case La:d_(bC,wC+1,GC[0])?(jC(),wC++,zC()):d_(bC+1,0,GC[0])&&(jC(),bC++,wC=0,zC());break;case Pa:for(t=0;t<Qr;t++)if(d_(bC-1,wC-t,GC[0])){jC(),bC--,wC-=t,zC();break}break;case Ta:for(t=0;t<Qr;t++)if(d_(bC+1,wC-t,GC[0])){jC(),bC++,wC-=t,zC();break}break;case Ia:case Ea:case Sa:case Ba:Ir.Main_selectedChannel=document.getElementById(GC[4]+bC+"_"+wC).getAttribute(ru),Ir.Main_selectedChannel_id=document.getElementById(GC[4]+bC+"_"+wC).getAttribute("data-id"),Ir.Main_selectedChannelDisplayname=document.getElementById(GC[3]+bC+"_"+wC).textContent,Ir.Main_selectedChannelLogo=document.getElementById(GC[1]+bC+"_"+wC).src,document.body.removeEventListener("keydown",XC),Ir.Main_BeforeChannel=vr,Ir.Main_Go=fr,Ir.Main_BeforeChannelisSet=!0,Hs=Ja=!0,Tu(GC[6]),u_()}}var WC=0,YC=0,KC=!1,$C=0,QC={},ZC=[],eM=!1,tM=0,nM=5,aM=3500,iM=0,oM=0,sM=!1,dM=["uh_thumbdiv","uh_img","uh_infodiv","uh_displayname","uh_hosttitle","uh_hostgame","uh_viwers","uh_quality","uh_cell","uhempty_","user_host_scroll"],lM=!1,cM="",rM=!1;function uM(){Ir.Main_CenterLablesVectorPos=1,Ir.Main_Go=lr,Lu("label_side_panel","icon-arrow-circle-left",x),Gu("top_bar_user","icon_center_focus"),Nu("top_bar_user",u+g_(Fi[Ir.Users_Position].name+$)),document.body.addEventListener("keydown",MM,!1),cM!==Fi[Ir.Users_Position].name&&(lM=!1),lM?(I_(WC),Bu(dM[10]),kM(),f_()):fM()}function _M(){Ir.Users_Position=0,Au("top_bar_user","icon_center_focus"),document.body.removeEventListener("keydown",MM),Uu("top_bar_user",u),Lu("label_side_panel","icon-ellipsis",Fn),Tu(dM[10])}function fM(){k_("stream_table_user_host"),Tu(dM[10]),Fu(),Ku(),cM=Fi[Ir.Users_Position].name,lM=!1,QC={},pf=!($C=oM=iM=0),WC=YC=0,KC=rM=!(ZC=[]),zu(),mM(),hM()}function mM(){M_(),eM=!0,tM=0,aM=3500}function hM(){var e=$C+iM;e&&oM-1<e&&(e=oM-zr,KC=!0);var t="https://api.twitch.tv/api/users/"+encodeURIComponent(Fi[Ir.Users_Position].name)+"/followed/hosting?limit="+zr+"&offset="+e;pu&&!$C?Tf(t,aM,2,null,vM,pM):Bf(t,aM,2,null,vM,pM,!1)}function pM(){++tM<nM?(aM+=500,hM()):(eM=!1,$C?(KC=!0,gM()):(pf=!1,Vu(),Yu(T)))}function vM(e){var t=JSON.parse(e),n=t.hosts.length;oM=parseInt(t._total),n<zr&&(KC=!0);var a=$C;sM=!($C+=n);var i=n/jr;0<n%jr&&i++;for(var o,s,d,l,c,r=0,u=document.getElementById("stream_table_user_host"),_=0;_<i;_++){for(s=a/jr+_,d=document.createElement("tr"),o=0;o<jr&&r<n;o++,r++)c=(l=t.hosts[r]).target._id+""+l._id,QC[c]?o--:(QC[c]=1,d.appendChild(O_(s,s+"_"+o,[l.target.channel.name,l.target._id],dM,[l.target.preview_urls.template.replace("{width}x{height}",du),l.display_name+ae+l.target.channel.display_name,l.target.title,l.target.meta_game,h.charAt(1).toUpperCase()+h.slice(2)+i_(l.target.viewers)+H,""])));for(;o<jr;o++)KC&&!rM&&(rM=!0,$C=s*jr+o),d.appendChild(P_(dM[9]+s+"_"+o)),ZC.push(dM[9]+s+"_"+o);u.appendChild(d)}gM()}function gM(){if(lM){if(C_(wu),0<ZC.length&&!KC)return mM(),void yM();ju(YC,WC,jr,$C),ZC=[]}else sM?Yu(B+$):(lM=!0,kM(),C_(wu),f_()),Bu(dM[10]),pf=!1,Vu();eM=!1}function yM(){Wu(ZC.length);var e=$C+iM;e&&oM-1<e&&(e=oM-eu,KC=!0),Lf("https://api.twitch.tv/api/users/"+encodeURIComponent(Fi[Ir.Users_Position].name)+"/followed/hosting?limit="+eu+"&offset="+e,aM,2,null,wM,bM)}function bM(){++tM<nM?(aM+=500,yM()):(KC=!0,$C-=ZC.length,ZC=[],gM())}function wM(e){var t,n,a=JSON.parse(e),i=a.streams.length,o=0,s=0,d=[];for(oM=parseInt(a._total),i<eu&&(KC=!0);o<ZC.length&&s<i;o++,s++)n=(t=a.hosts[s]).target._id+""+t._id,QC[n]?o--:(QC[n]=1,G_(ZC[o],[t.target.channel.name,t.target._id],[t.target.preview_urls.template.replace("{width}x{height}",du),t.display_name+ae+t.target.channel.display_name,t.target.title,t.target.meta_game,h.charAt(1).toUpperCase()+h.slice(2)+i_(t.target.viewers)+H,""],dM),d.push(o));for(o=d.length-1;-1<o;o--)ZC.splice(d[o],1);iM+=s,KC&&($C-=ZC.length,ZC=[]),gM()}function kM(){J_(WC,YC,dM,jr,$C),$C/jr<WC+Xr&&!KC&&!eM&&(mM(),hM()),Pr&&CM()}function CM(){$C&&$_(WC+"_"+YC,dM)}function MM(e){var t;if(!pf&&!R_())switch(D_(),e.keyCode){case Oa:a_()?n_():Zu()?Qu():(CM(),gf(MM));break;case xa:if(d_(WC,YC-1,dM[0]))CM(),YC--,kM();else for(t=jr-1;-1<t;t--)if(d_(WC-1,t,dM[0])){CM(),WC--,YC=t,kM();break}break;case La:d_(WC,YC+1,dM[0])?(CM(),YC++,kM()):d_(WC+1,0,dM[0])&&(CM(),WC++,YC=0,kM());break;case Pa:for(t=0;t<jr;t++)if(d_(WC-1,YC-t,dM[0])){CM(),WC--,YC-=t,kM();break}break;case Ta:for(t=0;t<jr;t++)if(d_(WC+1,YC-t,dM[0])){CM(),WC++,YC-=t,kM();break}break;case Ia:case Ea:case Sa:case Ba:z_(WC+"_"+YC,dM,MM)}}var EM,IM=!1,SM=0,xM=3500,PM=0,LM=5,TM=0,BM=!1,OM="",GM=0,AM={},NM=!1,UM=[],FM=null,VM=["ulf_thumbdiv","ulf_img","ulf_infodiv","ulf_displayname","ulf_streamtitle","ulf_streamgame","ulf_viwers","ulf_quality","ulf_cell","ulempty_","user_live_scroll"];function DM(){eo()&&(nE(),NM?cE(zm,VM[0])&&(FM=JSON.parse(document.getElementById(VM[8]+zm).getAttribute(ru))[0]):FM=null,k_("user_feed_scroll"),NM=!1,document.getElementById("user_feed_scroll").style.left="2.5px",document.getElementById("user_feed").style.bottom="0.1%",Bu("dialog_loading_feed"),OM="",zm=GM=TM=PM=0,AM={},UM=[],ef(function(){JM(),qM()}))}function RM(e){for(var t,n=0;n<UM.length;n++)null!==(t=document.getElementById(UM[n].id))&&Cu(t,UM[n].src+vu,e)}function HM(e,t){UM.push({id:e,src:t})}function JM(){IM=!0,SM=0,xM=3500}function qM(){Lf("https://api.twitch.tv/kraken/users/"+encodeURIComponent(Fi[Ir.Users_Position].id)+"/follows/channels?limit=100&offset="+PM+"&sortby=created_at",xM,2,null,jM,zM)}function zM(){++SM<LM?(xM+=500,qM()):(IM=!1,TM?(BM=!0,KM()):(Tu("dialog_loading_feed"),QM()&&(Hp(T),window.setTimeout(function(){Jp()},2e3))))}function jM(e){var t=JSON.parse(e).follows,n=t.length;if(n){for(var a="",i=0;i<n;i++)a=t[i].channel._id+",",-1===OM.indexOf(a)&&(OM+=a);PM+=n,JM(),qM()}else OM=OM.slice(0,-1),JM(),ef(XM)}function XM(){Lf("https://api.twitch.tv/kraken/streams/?channel="+encodeURIComponent(OM)+"&limit=100&offset=0&stream_type=all",xM,2,null,YM,WM)}function WM(){++SM<LM?(xM+=500,XM()):(IM=!1,Tu("dialog_loading_feed"),QM()&&(Hp(T),window.setTimeout(function(){Jp()},2e3)))}function YM(e){var t=JSON.parse(e),n=t.streams.length;n<zr&&(BM=!0),TM+=n;for(var a,i,o=document.getElementById("user_feed_scroll"),s=0;s<n;s++)i=(a=t.streams[s]).channel._id,AM[i]||(AM[i]=1,null!==FM&&FM===a.channel.name&&(zm=s),o.appendChild($M(s,[a.channel.name,i],VM,[a.preview.template.replace("{width}x{height}",du),s_(JSON.stringify(a.stream_type))+a.channel.display_name,a.channel.status,a.game,y+Op(a.created_at)+b+", "+h+i_(a.viewers)+H,o_(a.video_height,a.average_fps,a.channel.broadcaster_language)])));KM()}function KM(){NM=!(IM=!1),RM(wu),ef(function(){Tu("dialog_loading_feed"),oE()})}function $M(e,t,n,a){return HM(n[1]+e,a[0]),(Ar=document.createElement("div")).setAttribute("id",n[8]+e),Ar.setAttribute(ru,JSON.stringify(t)),Ar.className="user_feed_thumb",Ar.innerHTML='<div id="'+n[0]+e+'" class="stream_thumbnail_clip" ><div><img id="'+n[1]+e+'" class="stream_img"></div><div id="'+n[2]+e+'" class="stream_text2"><div id="'+n[3]+e+'" class="stream_channel" style="width: 66%; display: inline-block;">'+a[1]+'</div><div id="'+n[5]+e+'"class="stream_info">'+v+a[3]+"</div></div></div>",Ar}function QM(){return Ou("user_feed")}function ZM(){var e=eo();e&&(qm!==Fi[Ir.Users_Position].name&&(NM=!1),qm=Fi[Ir.Users_Position].name),e&&cE(0,VM[0])||(NM=!1),NM||IM||DM(),e&&(document.getElementById("user_feed").style.bottom="0.1%",Bu("user_feed"),oE())}function eE(){Tu("user_feed")}function tE(){nE(),aE()}function nE(){window.clearTimeout(EM)}function aE(){QM()&&(EM=window.setTimeout(eE,5500))}function iE(){nE(),IM?window.setTimeout(function(){IM=!1},15e3):DM()}function oE(){tE(),cE(zm,VM[0])&&(Gu(VM[0]+zm,"feed_thumbnail_focused"),QM()?dE():Ou("scene2")&&lE())}function sE(){return zm<3?2.5:cE(zm+2,VM[0])?-1*document.getElementById(VM[8]+(zm-2)).offsetLeft:cE(zm+1,VM[0])?-1*document.getElementById(VM[8]+(zm-3)).offsetLeft:-1*document.getElementById(VM[8]+(zm-(3<zm?4:3))).offsetLeft}function dE(){var e=sE();e&&(document.getElementById("user_feed_scroll").style.left=e+"px")}function lE(){document.getElementById("user_feed").style.bottom="-1000%",Bu("user_feed");var e=dE();e&&(document.getElementById("user_feed_scroll").style.left=e+"px"),document.getElementById("user_feed").style.bottom="0.1%",Tu("user_feed")}function cE(e,t){return null!==document.getElementById(t+e)}function rE(){cE(zm,VM[0])&&Au(VM[0]+zm,"feed_thumbnail_focused")}var uE=0,_E=0,fE=!1,mE=0,hE={},pE=[],vE=!1,gE=0,yE=5,bE=3500,wE=0,kE=0,CE=0,ME=!1,EE=["ul_thumbdiv","ul_img","ul_infodiv","ul_displayname","ul_streamtitle","ul_streamgame","ul_viwers","ul_quality","ul_cell","ulempty_","user_live_scroll"],IE=!1,SE="",xE="",PE=!1;function LE(){Ir.Main_CenterLablesVectorPos=1,Ir.Main_Go=dr,Lu("label_side_panel","icon-arrow-circle-left",x),Gu("top_bar_user","icon_center_focus"),Nu("top_bar_user",u+g_(Fi[Ir.Users_Position].name+K)),document.body.addEventListener("keydown",jE,!1),xE!==Fi[Ir.Users_Position].name&&(IE=!1),IE?(I_(uE),Bu(EE[10]),qE(),f_()):BE()}function TE(){Ir.Users_Position=0,Au("top_bar_user","icon_center_focus"),document.body.removeEventListener("keydown",jE),Uu("top_bar_user",u),Lu("label_side_panel","icon-ellipsis",Fn),Tu(EE[10])}function BE(){k_("stream_table_user_live"),Tu(EE[10]),Fu(),Ku(),IE=!1,xE=Fi[Ir.Users_Position].name,pf=!(PE=!(pE=[])),uE=_E=mE=kE=wE=CE=0,fE=!(hE={}),SE="",zu(),OE(),GE()}function OE(){M_(),vE=!0,gE=0,bE=3500}function GE(){Lf("https://api.twitch.tv/kraken/users/"+encodeURIComponent(Fi[Ir.Users_Position].id)+"/follows/channels?limit=100&offset="+CE+"&sortby=created_at",bE,2,null,NE,AE)}function AE(){++gE<yE?(bE+=500,GE()):(vE=!1,mE?(fE=!0,DE()):(pf=!1,Vu(),Yu(T)))}function NE(e){var t=JSON.parse(e).follows,n=t.length;if(n){for(var a="",i=0;i<n;i++)a=t[i].channel._id+",",-1===SE.indexOf(a)&&(SE+=a);CE+=n,OE(),GE()}else SE=SE.slice(0,-1),OE(),UE()}function UE(){var e=mE+wE;e&&kE-1<e&&(e=kE-zr,fE=!0),Lf("https://api.twitch.tv/kraken/streams/?channel="+encodeURIComponent(SE)+"&limit="+zr+"&offset="+e+"&stream_type=all",bE,2,null,VE,FE)}function FE(){++gE<yE?(bE+=500,UE()):(vE=!1,Vu(),Yu(T))}function VE(e){var t=JSON.parse(e),n=t.streams.length;kE=parseInt(t._total),n<zr&&(fE=!0);var a=mE;ME=!(mE+=n);var i=n/jr;0<n%jr&&i++;for(var o,s,d,l,c,r=0,u=document.getElementById("stream_table_user_live"),_=0;_<i;_++){for(s=a/jr+_,d=document.createElement("tr"),o=0;o<jr&&r<n;o++,r++)c=(l=t.streams[r]).channel._id,hE[c]?o--:(hE[c]=1,d.appendChild(O_(s,s+"_"+o,[l.channel.name,c],EE,[l.preview.template.replace("{width}x{height}",du),s_(JSON.stringify(l.stream_type))+l.channel.display_name,l.channel.status,l.game,y+Op(l.created_at)+b+", "+h+i_(l.viewers)+H,o_(l.video_height,l.average_fps,l.channel.broadcaster_language)])));for(;o<jr;o++)fE&&!PE&&(PE=!0,mE=s*jr+o),d.appendChild(P_(EE[9]+s+"_"+o)),pE.push(EE[9]+s+"_"+o);u.appendChild(d)}DE()}function DE(){if(IE){if(C_(wu),0<pE.length&&!fE)return OE(),void RE();ju(_E,uE,jr,mE),pE=[]}else ME?Yu(B+K):(IE=!0,qE(),C_(wu),f_()),Bu(EE[10]),pf=!1,Vu();vE=!1}function RE(){Wu(pE.length);var e=mE+wE;e&&kE-1<e&&(e=kE-eu,fE=!0),Lf("https://api.twitch.tv/kraken/streams/?channel="+encodeURIComponent(SE)+"&limit="+eu+"&offset="+e+"&stream_type=all",bE,2,null,JE,HE)}function HE(){++gE<yE?(bE+=500,RE()):(fE=!0,mE-=pE.length,pE=[],DE())}function JE(e){var t,n,a=JSON.parse(e),i=a.streams.length,o=0,s=0,d=[];for(kE=parseInt(a._total),i<eu&&(fE=!0);o<pE.length&&s<i;o++,s++)n=(t=a.streams[s]).channel._id,hE[n]?o--:(hE[n]=1,G_(pE[o],[t.channel.name,n],[t.preview.template.replace("{width}x{height}",du),s_(JSON.stringify(t.stream_type))+t.channel.display_name,t.channel.status,t.game,y+Op(t.created_at)+b+", "+h+i_(t.viewers)+H,o_(t.video_height,t.average_fps,t.channel.broadcaster_language)],EE),d.push(o));for(o=d.length-1;-1<o;o--)pE.splice(d[o],1);wE+=s,fE&&(mE-=pE.length,pE=[]),DE()}function qE(){J_(uE,_E,EE,jr,mE),mE/jr<uE+Xr&&!fE&&!vE&&(OE(),GE()),Pr&&zE()}function zE(){mE&&$_(uE+"_"+_E,EE)}function jE(e){var t;if(!pf&&!R_())switch(D_(),e.keyCode){case Oa:a_()?n_():Zu()?Qu():(zE(),gf(jE));break;case xa:if(d_(uE,_E-1,EE[0]))zE(),_E--,qE();else for(t=jr-1;-1<t;t--)if(d_(uE-1,t,EE[0])){zE(),uE--,_E=t,qE();break}break;case La:d_(uE,_E+1,EE[0])?(zE(),_E++,qE()):d_(uE+1,0,EE[0])&&(zE(),uE++,_E=0,qE());break;case Pa:for(t=0;t<jr;t++)if(d_(uE-1,_E-t,EE[0])){zE(),uE--,_E-=t,qE();break}break;case Ta:for(t=0;t<jr;t++)if(d_(uE+1,_E-t,EE[0])){zE(),uE++,_E-=t,qE();break}break;case Ia:case Ea:case Sa:case Ba:z_(uE+"_"+_E,EE,jE)}}var XE=0,WE=0,YE=8,KE=0,$E=null,QE=["u_thumbdiv","u_img","u_infodiv","u_displayname","u_cell","user_scroll"],ZE=!1,eI=!0;function tI(){return Tr?(nI(),void Ka(Tr)):so()?(Ir.Main_CenterLablesVectorPos=1,Ir.Main_Go=pr,document.getElementById("screens_holder").style.top=screen.height/100*7+"px",Ku(),Gu("top_bar_user","icon_center_focus"),document.body.addEventListener("keydown",vI,!1),void(ZE?(I_(XE),Bu(QE[5]),lI(),f_()):aI())):(Ir.Main_Go=ar,nI(),void u_())}function nI(){Ir.Users_Position=0,Au("top_bar_user","icon_center_focus"),document.body.removeEventListener("keydown",vI),Tu(QE[5]),document.getElementById("screens_holder").style.top="0"}function aI(){k_("stream_table_user"),Tu(QE[5]),Fu(),Ku(),pf=!(ZE=!1),eI=!(XE=WE=0),ef(function(){iI()})}function iI(){for(var e,t,n,a=document.createElement("tbody"),i=document.getElementById("stream_table_user"),o=0;o<Fi.length;o++)t=0,n=o%2?"B5B5B5":"FFFFFF",(Ar=document.createElement("tr")).className="follower_header",Ar.innerHTML='<div class="follower_header">'+(o?"":se)+Fi[o].name+F+"</div>",i.appendChild(a),i.appendChild(Ar),(e=document.createElement("tr")).appendChild(oI(o+"_"+t,Ir.Main_selectedChannelDisplayname,K,"play",n)),t++,e.appendChild(oI(o+"_"+t,Ir.Main_selectedChannelDisplayname,$,"users",n)),t++,e.appendChild(oI(o+"_"+t,Ir.Main_selectedChannelDisplayname,mb.isLive?Q:jt,"gamepad",n)),t++,e.appendChild(oI(o+"_"+t,Ir.Main_selectedChannelDisplayname,Zt,"movie-play",n)),t++,e.appendChild(oI(o+"_"+t,Ir.Main_selectedChannelDisplayname,Z,"filmstrip",n)),t++,o?e.appendChild(oI(o+"_"+t,Ir.Main_selectedChannelDisplayname,oe,"arrow-up",n)):e.appendChild(oI(o+"_"+t,Ir.Main_selectedChannelDisplayname,ee,"user-plus",n)),t++,e.appendChild(oI(o+"_"+t,Ir.Main_selectedChannelDisplayname,te,"user-times",n)),t++,e.appendChild(oI(o+"_"+t,Ir.Main_selectedChannelDisplayname,Fi[o].access_token?kt:wt,"key",n)),i.appendChild(e);sI()}function oI(e,t,n,a,i){return(Ar=document.createElement("td")).setAttribute("id",QE[4]+e),Ar.setAttribute(ru,t),Ar.className="stream_cell",Ar.innerHTML='<div id="'+QE[0]+e+'" class="stream_thumbnail_channel" ><div id="'+QE[1]+e+'" class="stream_user_icon" style="color: #'+i+';"><i class="icon-'+a+'"></i></div></div><div id="'+QE[2]+e+'" class="stream_text"><div id="'+QE[3]+e+'" class="stream_info_user" style="text-align: center;">'+n+"</div></div>",Ar}function sI(){ef(function(){ZE||(ZE=!0,lI(),Vu(),f_()),Bu(QE[5]),eI=pf=!1})}function dI(){for(var e=0;e<Fi.length;e++)Uu(QE[3]+e+"_2",mb.isLive?Q:jt)}function lI(){Gu(QE[0]+XE+"_"+WE,"stream_thumbnail_focused"),S_(XE)?1<XE?d_(XE+1,0,QE[0])&&K_(QE[5],-1*document.getElementById(QE[4]+XE+"_"+WE).offsetTop+500):K_(QE[5],screen.height/100*7):F_(),Pr&&cI()}function cI(){xr=!1,Au(QE[0]+XE+"_"+WE,"stream_thumbnail_focused")}function rI(){return Ir.Users_Position=XE,3!==WE||Fi[Ir.Users_Position].access_token?7===WE&&Fi[Ir.Users_Position].access_token?(Yu(kt),void window.setTimeout(Ku,1500)):(6!==WE&&7!==WE&&(Tu(QE[5]),document.body.removeEventListener("keydown",vI),document.getElementById("screens_holder").style.top="0"),void ef(function(){WE?1===WE?uM():2===WE?(Fy=mb,Jy()):3===WE?FI():4===WE?AC():5===WE?XE?io(XE):(Ir.Main_Before=pr,Hi()):6===WE?fI():7!==WE||Fi[Ir.Users_Position].access_token||fI():LE()})):(Yu(xn),void window.setTimeout(Ku,5e3))}function uI(){window.clearTimeout($E)}function _I(){$E=window.setTimeout(mI,2e4)}function fI(){_I(),6===WE?Nu("main_dialog_remove",qt+la+Fi[Ir.Users_Position].name+"?"):7===WE&&Nu("main_dialog_remove",mt+" "+Fi[Ir.Users_Position].name+"?"),Bu("main_remove_dialog")}function mI(){uI(),Tu("main_remove_dialog"),KE=0,pI()}function hI(){return Ou("main_remove_dialog")}function pI(){KE?(Au("remove_cancel","button_search_focused"),Gu("remove_yes","button_search_focused")):(Gu("remove_cancel","button_search_focused"),Au("remove_yes","button_search_focused"))}function vI(e){var t;if(!pf&&!R_())switch(D_(),e.keyCode){case Oa:hI()?mI():Zu()?Qu():a_()?n_():(cI(),gf(vI));break;case xa:if(hI())--KE<0&&(KE=1),pI(),uI(),_I();else if(d_(XE,WE-1,QE[0]))cI(),WE--,lI();else if(d_(XE-1,0,QE[0])){for(t=YE-1;-1<t;t--)if(d_(XE-1,t,QE[0])){cI(),XE--,WE=t,lI();break}}else cI(),WE=YE-1,lI();break;case La:hI()?(1<++KE&&(KE=0),pI(),uI(),_I()):(d_(XE,WE+1,QE[0])?(cI(),WE++):(d_(XE+1,0,QE[0])?(cI(),XE++):cI(),WE=0),lI());break;case Pa:for(t=0;t<YE;t++)if(d_(XE-1,WE-t,QE[0])){cI(),XE--,WE-=t,lI();break}break;case Ta:for(t=0;t<YE;t++)if(d_(XE+1,WE-t,QE[0])){cI(),XE++,WE-=t,lI();break}break;case Ia:case Ea:case Sa:case Ba:var n;if(hI()){if(6===WE)n=KE,mI(),n&&(document.body.removeEventListener("keydown",vI),nI(),no(XE));else if(n=KE,mI(),n){Ir.Users_AddcodePosition=Ir.Users_Position,f_();var a=Xa,i="https://id.twitch.tv/oauth2/authorize?response_type=code&client_id="+encodeURIComponent(tu)+"&redirect_uri="+a+"&scope=user_follows_edit+user_subscriptions&force_verify=true";window.location=i}}else rI()}}var gI=0,yI=0,bI=!1,wI=0,kI={},CI=[],MI=!1,EI=0,II=5,SI=3500,xI=0,PI=0,LI=!1,TI=!1,BI="time",OI=2,GI=!1,AI=["uv_thumbdiv","uv_img","uv_infodiv","uv_title","uv_streamon","uv_duration","uv_viwers","uv_quality","uv_cell","uvempty_","user_vod_scroll","uv_game"],NI=!1,UI=!1;function FI(){Ir.Main_CenterLablesVectorPos=1,Ir.Main_Go=Mr,Gu("top_bar_user","icon_center_focus"),Lu("label_side_panel","icon-arrow-circle-left",x),Nu("top_bar_user",u+g_(Fi[Ir.Users_Position].name+(UI?N:A))),document.body.addEventListener("keydown",nS,!1),NI?(I_(gI),Bu(AI[10]),aS(),QI(),f_()):DI()}function VI(){Ir.Users_Position=0,NI&&ZI(),Au("top_bar_user","icon_center_focus"),Lu("label_side_panel","icon-ellipsis",Fn),document.body.removeEventListener("keydown",nS),Uu("top_bar_user",u),Tu(AI[10])}function DI(){NI&&ZI(),k_("stream_table_user_vod"),Tu(AI[10]),Fu(),aS(),Ku(),GI=NI=!1,pf=!(TI=!(CI=[])),gI=yI=wI=PI=xI=0,bI=!(kI={}),zu(),HI()}function RI(){M_(),MI=!0,EI=0,SI=3500}function HI(){RI(),JI()}function JI(){var e=wI+xI;e&&PI-1<e&&(e=PI-zr,bI=!0);var t,n="https://api.twitch.tv/kraken/videos/followed?limit="+zr+"&broadcast_type="+(UI?"highlight":"archive")+"&sort="+BI+"&offset="+e;if(pu&&!wI){if(!(t=Android.mreadUrl(n,SI,3,ou+Fi[Ir.Users_Position].access_token)))return void qI();if(200===(t=JSON.parse(t)).status)return void jI(t.responseText);401===t.status||403===t.status?$a(Ir.Users_Position,0,HI,zI):qI()}else(t=new XMLHttpRequest).open("GET",n,!0),t.timeout=SI,t.setRequestHeader(au,su),t.setRequestHeader(nu,tu),t.setRequestHeader(iu,ou+Fi[Ir.Users_Position].access_token),t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void jI(t.responseText);401===t.status||403===t.status?$a(Ir.Users_Position,0,HI,zI):qI()}},t.send(null)}function qI(){++EI<II?(SI+=500,JI()):zI()}function zI(){MI=!1,wI?(bI=!0,XI()):(pf=!1,Vu(),Yu(T))}function jI(e){var t=JSON.parse(e),n=t.videos.length;PI=parseInt(t._total),n<zr&&(bI=!0);var a=wI;LI=!(wI+=n);var i=n/jr;0<n%jr&&i++;var o,s,d,l,c,r=0,u=document.getElementById("stream_table_user_vod");if(!GI){var _;for(GI=!0,d=document.createElement("tr"),f=0;f<2;f++)_=f?'<i class="icon-history stream_channel_fallow_icon"></i>'+ka+ka+Pn:'<i class="icon-movie-play stream_channel_fallow_icon"></i>'+ka+ka+p,(Ar=document.createElement("td")).setAttribute("id",AI[8]+"y_"+f),Ar.className="stream_cell",Ar.innerHTML='<div id="'+AI[0]+"y_"+f+'" class="stream_thumbnail_channel_vod" ><div id="'+AI[3]+"y_"+f+'" class="stream_channel_fallow_game">'+_+"</div></div>",d.appendChild(Ar);u.appendChild(d)}for(var f=0;f<i;f++){for(s=a/jr+f,d=document.createElement("tr"),o=0;o<jr&&r<n;o++,r++)c=(l=t.videos[r])._id,-1!==(l.preview.template+"").indexOf("404_processing")||kI[c]?o--:(kI[c]=1,d.appendChild(GS(s,s+"_"+o,[c,l.length,l.channel.broadcaster_language,l.game,l.channel.name,l.increment_view_count_url],[l.preview.template.replace("{width}x{height}",du),l.channel.display_name,V+y_(l.created_at),ax.parse(l.title)+la+$t+v+l.game,i_(l.views)+R,o_(l.resolutions.chunked.slice(-4),parseInt(l.fps.chunked)||0,l.channel.broadcaster_language),D+Tp(l.length),l.animated_preview_url],AI)));for(;o<jr;o++)bI&&!TI&&(TI=!0,wI=s*jr+o),d.appendChild(P_(AI[9]+s+"_"+o)),CI.push(AI[9]+s+"_"+o);u.appendChild(d)}XI()}function XI(){NI?(C_(wu),ju(yI,gI,jr,wI)):(LI?Yu(B+(UI?N:A)+O+S):(NI=!0,QI(),C_(wu),f_()),Bu(AI[10]),pf=!1,Vu()),0<CI.length&&!bI?WI():MI=!(CI=[])}function WI(){RI(),YI()}function YI(){Wu(CI.length);var e=wI+xI;e&&PI-1<e&&(e=PI-eu,bI=!0);var t,n="https://api.twitch.tv/kraken/videos/followed?limit="+eu+"&broadcast_type="+(UI?"highlight":"archive")+"&sort="+BI+"&offset="+e;if(pu){if(!(t=Android.mreadUrl(n,SI,3,ou+Fi[Ir.Users_Position].access_token)))return void KI();if(200===(t=JSON.parse(t)).status)return void $I(t.responseText);401===t.status||403===t.status?$a(Ir.Users_Position,0,HI,zI):KI()}else(t=new XMLHttpRequest).open("GET",n,!0),t.timeout=SI,t.setRequestHeader(au,su),t.setRequestHeader(nu,tu),t.setRequestHeader(iu,ou+Fi[Ir.Users_Position].access_token),t.ontimeout=function(){},t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status)return void $I(t.responseText);401===t.status||403===t.status?$a(Ir.Users_Position,0,HI,zI):KI()}},t.send(null)}function KI(){++EI<II?(SI+=500,YI()):(bI=!0,wI-=CI.length,CI=[],XI())}function $I(e){var t,n,a=JSON.parse(e),i=a.videos.length,o=0,s=0,d=[];for(PI=parseInt(a._total);o<CI.length&&s<i;o++,s++)n=(t=a.videos[s])._id,-1!==(t.preview.template+"").indexOf("404_processing")||kI[n]?o--:(kI[n]=1,NS(CI[o],[n,t.length,t.channel.broadcaster_language,t.game,t.channel.name,t.increment_view_count_url],[t.preview.template.replace("{width}x{height}",du),t.channel.display_name,V+y_(t.created_at),ax.parse(t.title)+la+$t+v+t.game,i_(t.views)+R,o_(t.resolutions.chunked.slice(-4),parseInt(t.fps.chunked)||0,t.channel.broadcaster_language),D+Tp(t.length),t.animated_preview_url],AI),d.push(o));for(o=d.length-1;-1<o;o--)CI.splice(d[o],1);xI+=s,bI&&(wI-=CI.length,CI=[]),XI()}function QI(){gI<0?eS():(J_(gI,yI,AI,jr,wI),jS(AI,gI+"_"+yI),wI/jr<gI+Xr&&!bI&&!MI&&HI(),Pr&&ZI())}function ZI(){window.clearInterval(iS),-1<gI&&wI?(Bu(AI[1]+gI+"_"+yI),$_(gI+"_"+yI,AI)):tS()}function eS(){var e=1<yI?1:yI;Gu(AI[0]+"y_"+e,cu)}function tS(){var e=1<yI?1:yI;Au(AI[0]+"y_"+e,cu)}function nS(e){var t;if(!pf&&!R_())switch(D_(),e.keyCode){case Oa:Zu()?Qu():Zu()?Qu():a_()?n_():(ZI(),gf(nS));break;case xa:if(-1===gI)tS(),--yI<0&&(yI=1),eS();else if(gI||yI){if(d_(gI,yI-1,AI[0]))ZI(),yI--,QI();else for(t=jr-1;-1<t;t--)if(d_(gI-1,t,AI[0])){ZI(),gI--,yI=t,QI();break}}else ZI(),tS(),gI=-1,yI=1,eS();break;case La:-1===gI?(tS(),1<++yI?(yI=0,LI?eS():(gI=0,QI())):eS()):d_(gI,yI+1,AI[0])?(ZI(),yI++,QI()):d_(gI+1,0,AI[0])&&(ZI(),gI++,yI=0,QI());break;case Pa:if(-1!==gI||LI)if(gI){for(t=0;t<jr;t++)if(d_(gI-1,yI-t,AI[0])){ZI(),gI--,yI-=t,QI();break}}else ZI(),gI=-1,eS();else gI=0,tS(),QI();break;case Ta:if(-1!==gI||LI){for(t=0;t<jr;t++)if(d_(gI+1,yI-t,AI[0])){ZI(),gI++,yI-=t,QI();break}}else gI=0,tS(),QI();break;case Ia:case Ea:case Sa:case Ba:-1===gI?(0===yI?Mf("UserVod_highlight",(UI=!UI)?"true":"false"):1===OI?OI++:OI--,DI()):W_(gI+"_"+yI,AI,nS)}}function aS(){1===OI?(Nu("top_bar_user",u+g_(Fi[Ir.Users_Position].name+" "+(UI?N:A)+In)),BI="time"):2===OI&&(Nu("top_bar_user",u+g_(Fi[Ir.Users_Position].name+" "+(UI?N:A)+Sn)),BI="views"),Mf("UserVod_TypeNumber",OI)}var iS,oS=0,sS=0,dS=!1,lS=0,cS={},rS=[],uS=!1,_S=0,fS=5,mS=3500,hS=0,pS=0,vS=!1,gS=!1,yS="week",bS=2,wS=!1,kS=["v_thumbdiv","v_img","v_infodiv","v_title","v_streamon","v_duration","v_viwers","v_quality","v_cell","vempty_","vod_scroll","v_game"],CS=!1,MS=!1,ES=1,IS=new Image;function SS(){Ir.Main_CenterLablesVectorPos=4,Ir.Main_Go=yr,Gu("top_bar_vod","icon_center_focus"),document.body.addEventListener("keydown",XS,!1),CS?(I_(oS),Bu(kS[10]),WS(),HS(),f_()):PS()}function xS(){CS&&JS(),p_(),document.body.removeEventListener("keydown",XS),Au("top_bar_vod","icon_center_focus"),Uu("top_bar_vod",Zt),Tu(kS[10])}function PS(){CS&&JS(),k_("stream_table_vod"),Tu(kS[10]),Fu(),WS(),Ku(),wS=CS=!1,pf=!(gS=!(rS=[])),oS=sS=lS=pS=hS=0,dS=!(cS={}),zu(),LS(),TS()}function LS(){M_(),uS=!0,_S=0,mS=3500}function TS(){var e=lS+hS;e&&pS-1<e&&(e=pS-zr,dS=!0);var t="https://api.twitch.tv/kraken/videos/top?limit="+zr+"&broadcast_type="+(MS?"highlight":"archive")+"&sort=views&offset="+e+"&period="+yS+(""!==Ur?"&language="+Ur:"");pu&&!lS?Tf(t,mS,2,null,OS,BS):Bf(t,mS,2,null,OS,BS,!1)}function BS(){++_S<fS?(mS+=500,TS()):(uS=!1,lS?(dS=!0,FS()):(pf=!1,Vu(),Yu(T)))}function OS(e){var t=JSON.parse(e),n=t.vods.length;pS=parseInt(t._total),n<zr&&(dS=!0);var a=lS;vS=!(lS+=n);var i=n/jr;0<n%jr&&i++;var o,s,d,l,c,r=0,u=document.getElementById("stream_table_vod");if(!wS){var _;for(wS=!0,d=document.createElement("tr"),f=0;f<2;f++)_=f?'<i class="icon-history stream_channel_fallow_icon"></i>'+ka+ka+m:'<i class="icon-movie-play stream_channel_fallow_icon"></i>'+ka+ka+p,(Ar=document.createElement("td")).setAttribute("id",kS[8]+"y_"+f),Ar.className="stream_cell",Ar.innerHTML='<div id="'+kS[0]+"y_"+f+'" class="stream_thumbnail_channel_vod" ><div id="'+kS[3]+"y_"+f+'" class="stream_channel_fallow_game">'+_+"</div></div>",d.appendChild(Ar);u.appendChild(d)}for(var f=0;f<i;f++){for(s=a/jr+f,d=document.createElement("tr"),o=0;o<jr&&r<n;o++,r++)c=(l=t.vods[r])._id,-1!==(l.preview.template+"").indexOf("404_processing")||cS[c]?o--:(cS[c]=1,d.appendChild(GS(s,s+"_"+o,[c,l.length,l.channel.broadcaster_language,l.game,l.channel.name,l.increment_view_count_url],[l.preview.template.replace("{width}x{height}",du),l.channel.display_name,V+y_(l.created_at),ax.parse(l.title)+la+$t+v+l.game,i_(l.views)+R,o_(l.resolutions.chunked.slice(-4),parseInt(l.fps.chunked)||0,l.channel.broadcaster_language),D+Tp(l.length),l.animated_preview_url],kS)));for(;o<jr;o++)dS&&!gS&&(gS=!0,lS=s*jr+o),d.appendChild(P_(kS[9]+s+"_"+o)),rS.push(kS[9]+s+"_"+o);u.appendChild(d)}FS()}function GS(e,t,n,a,i){return e<jr&&x_(a[0]),AS(n,t,a,i)}function AS(e,t,n,a){return(Ar=document.createElement("td")).setAttribute("id",a[8]+t),Ar.setAttribute(ru,JSON.stringify(e)),Ar.className="stream_cell",Ar.innerHTML=US(t,n,a),Ar}function NS(e,t,n,a){var i=document.getElementById(e),o=e.split(a[9])[1];i.setAttribute(ru,JSON.stringify(t)),i.innerHTML=US(o,n,a),i.setAttribute("id",a[8]+o)}function US(e,t,n){return E_(n[1]+e,t[0]),'<div id="'+n[0]+e+'" class="stream_thumbnail_clip"'+(t[7]?' style="background-size: 0 0; background-image: url('+t[7]+');"':"")+'><div><img id="'+n[1]+e+'" class="stream_img"></div><div id="'+n[2]+e+'" class="stream_text2"><div style="line-height: 14px;"><div id="'+n[3]+e+'" class="stream_info" style="width: 72%; display: inline-block; font-size: 85%;">'+t[1]+'</div><div id="'+n[7]+e+'"class="stream_info" style="width:27%; float: right; text-align: right; display: inline-block;">'+t[5]+'</div></div><div style="line-height: 12px;"><div id="'+n[4]+e+'"class="stream_info" style="width: 59%; display: inline-block;">'+t[2]+'</div><div id="'+n[5]+e+'"class="stream_info" style="width: 39%; display: inline-block; float: right; text-align: right;">'+t[6]+'</div></div><div id="'+n[11]+e+'"class="stream_info">'+t[3]+'</div><div id="'+n[6]+e+'"class="stream_info">'+t[4]+"</div></div></div>"}function FS(){if(CS?(C_(wu),ju(sS,oS,jr,lS)):(vS?Yu(B+(MS?N:A)+O+S):(CS=!0,HS(),C_(wu),f_()),Bu(kS[10]),pf=!1,Vu()),0<rS.length&&!dS)return LS(),void VS();uS=!(rS=[])}function VS(){Wu(rS.length);var e=lS+hS;e&&pS-1<e&&(e=pS-eu,dS=!0),Lf("https://api.twitch.tv/kraken/videos/top?limit="+eu+"&broadcast_type="+(MS?"highlight":"archive")+"&sort=views&offset="+e+"&period="+yS+(""!==Ur?"&language="+Ur:""),mS,2,null,RS,DS)}function DS(){++_S<fS?(mS+=500,VS()):(dS=!0,lS-=rS.length,rS=[],FS())}function RS(e){var t,n,a=JSON.parse(e),i=a.vods.length,o=0,s=0,d=[];for(pS=parseInt(a._total);o<rS.length&&s<i;o++,s++)n=(t=a.vods[s])._id,-1!==(t.preview.template+"").indexOf("404_processing")||cS[n]?o--:(cS[n]=1,NS(rS[o],[n,t.length,t.channel.broadcaster_language,t.game,t.channel.name,t.increment_view_count_url],[t.preview.template.replace("{width}x{height}",du),t.channel.display_name,V+y_(t.created_at),ax.parse(t.title)+la+$t+v+t.game,i_(t.views)+R,o_(t.resolutions.chunked.slice(-4),parseInt(t.fps.chunked)||0,t.channel.broadcaster_language),D+Tp(t.length),t.animated_preview_url],kS),d.push(o));for(o=d.length-1;-1<o;o--)rS.splice(d[o],1);hS+=s,dS&&(lS-=rS.length,rS=[]),FS()}function HS(){oS<0?qS():(J_(oS,sS,kS,jr,lS),jS(kS,oS+"_"+sS),lS/jr<oS+Xr&&!dS&&!uS&&(LS(),TS()),Pr&&JS())}function JS(){window.clearInterval(iS),-1<oS&&lS?(Bu(kS[1]+oS+"_"+sS),$_(oS+"_"+sS,kS)):zS()}function qS(){var e=1<sS?1:sS;Gu(kS[0]+"y_"+e,cu)}function zS(){var e=1<sS?1:sS;Au(kS[0]+"y_"+e,cu)}function jS(t,n){if(ES){var a=document.getElementById(t[0]+n);IS.onload=function(){Tu(t[1]+n),a.style.backgroundSize="612px";var e=0;iS=window.setInterval(function(){a.style.backgroundPosition="0px "+ ++e%10*-344+"px"},650)},IS.src=a.style.backgroundImage.replace(/url\(['"]?(.*?)['"]?\)/i,"$1")}}function XS(e){var t;if(!pf&&!R_())switch(D_(),e.keyCode){case Oa:a_()?n_():Zu()?Qu():(JS(),gf(XS));break;case xa:if(-1===oS)zS(),--sS<0&&(sS=1),qS();else if(oS||sS){if(d_(oS,sS-1,kS[0]))JS(),sS--,HS();else for(t=jr-1;-1<t;t--)if(d_(oS-1,t,kS[0])){JS(),oS--,sS=t,HS();break}}else JS(),zS(),oS=-1,sS=1,qS();break;case La:-1===oS?(zS(),1<++sS?(sS=0,vS?qS():(oS=0,HS())):qS()):d_(oS,sS+1,kS[0])?(JS(),sS++,HS()):d_(oS+1,0,kS[0])&&(JS(),oS++,sS=0,HS());break;case Pa:if(-1!==oS||vS)if(oS){for(t=0;t<jr;t++)if(d_(oS-1,sS-t,kS[0])){JS(),oS--,sS-=t,HS();break}}else JS(),oS=-1,qS();else oS=0,zS(),HS();break;case Ta:if(-1!==oS||vS){for(t=0;t<jr;t++)if(d_(oS+1,sS-t,kS[0])){JS(),oS++,sS-=t,HS();break}}else oS=0,zS(),HS();break;case Ia:case Ea:case Sa:case Ba:-1===oS?(0===sS?Mf("Vod_highlight",(MS=!MS)?"true":"false"):4<++bS&&(bS=1),PS()):W_(oS+"_"+sS,kS,XS)}}function WS(){1===bS?(Nu("top_bar_vod",Zt+g_((MS?N:A)+le)),yS="day"):2===bS?(Nu("top_bar_vod",Zt+g_((MS?N:A)+ce)),yS="week"):3===bS?(Nu("top_bar_vod",Zt+g_((MS?N:A)+re)),yS="month"):4===bS&&(Nu("top_bar_vod",Zt+g_((MS?N:A)+ue)),yS="all"),Mf("vod_periodNumber",bS)}function YS(e,t){if(t.restrictions){if(t.restrictions.channels&&t.restrictions.channels.length&&-1===t.restrictions.channels.indexOf(Ir.Play_selectedChannel))return e;if(t.restrictions.games&&t.restrictions.games.length)return e}return e.replace(t.code,KS(t))}function KS(e){return'<img class="emoticon" src="'+e["1x"]+'" srcset="'+e["2x"]+" 2x, "+e["3x"]+' 4x" />'}function $S(e){return'<img class="emoticon" src="https://static-cdn.jtvnw.net/emoticons/v1/'+e+'/1.0" srcset="https://static-cdn.jtvnw.net/emoticons/v1/'+e+"/2.0 2x, https://static-cdn.jtvnw.net/emoticons/v1/"+e+'/3.0 4x" />'}function QS(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function ZS(e){for(var t=e.split(" "),n=0;n<t.length;n++){var a=(e=t[n]).replace(/(^[~!@#$%\^&\*\(\)]+|[~!@#$%\^&\*\(\)]+$)/g,""),i=Il[a]||Il[e];e=i?YS(e,i):QS(e),t[n]=e}return t.join(" ")}function ex(t,a){if(!a)return[t];var n=[],e=Object.keys(a),i=[];return e.forEach(function(e){for(var t=a[e],n=t.length-1;0<=n;n--)i.push({id:e,first:t[n][0],last:t[n][1]})}),i.sort(function(e,t){return t.first-e.first}),t=punycode.ucs2.decode(t),i.forEach(function(e){n.unshift(punycode.ucs2.encode(t.slice(e.last+1))),n.unshift([$S(e.id)]),t=t.slice(0,e.first)}),n.unshift(punycode.ucs2.encode(t)),n}function tx(a){return Object.keys(a).map(function(n){var e=a[n];return e.type=n,e.versions=Object.keys(a[n].versions).map(function(e){var t=a[n].versions[e];return t.type=e,t}),e})}function nx(e,t,n,a){var i=document.createElement("style");i.type="text/css",i.innerHTML="."+e+"-"+t+' { background-image: url("'+n.replace("http:","https:")+'"); }',a?a.appendChild(i):document.head.appendChild(i)}window.parseIRC=function(e){var t={raw:e,tags:{},prefix:null,command:null,params:[]},n=0,a=0;if(64===e.charCodeAt(0)){if(-1===(a=e.indexOf(" ")))return null;for(var i=e.slice(1,a).split(";"),o=0;o<i.length;o++){var s=i[o].split("=");t.tags[s[0]]=s[1]||!0}n=a+1}for(;32===e.charCodeAt(n);)n++;if(58===e.charCodeAt(n)){if(-1===(a=e.indexOf(" ",n)))return null;for(t.prefix=e.slice(n+1,a),n=a+1;32===e.charCodeAt(n);)n++}if(-1===(a=e.indexOf(" ",n)))return e.length>n?(t.command=e.slice(n),t):null;for(t.command=e.slice(n,a),n=a+1;32===e.charCodeAt(n);)n++;for(;n<e.length;){if(a=e.indexOf(" ",n),58===e.charCodeAt(n)){t.params.push(e.slice(n+1));break}if(-1===a){if(-1===a){t.params.push(e.slice(n));break}}else for(t.params.push(e.slice(n,a)),n=a+1;32===e.charCodeAt(n);)n++}return t},function(e){var t="object"==typeof global&&global;t.global!==t&&t.window!==t&&t.self!==t||(e=t);var n,v=2147483647,g=36,y=26,i=38,o=700,a=/^xn--/,s=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,l={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},c=g-1,b=Math.floor,w=String.fromCharCode;function k(e){throw new RangeError(l[e])}function r(e,t){for(var n=e.length,a=[];n--;)a[n]=t(e[n]);return a}function u(e,t){var n=e.split("@"),a="";return 1<n.length&&(a=n[0]+"@",e=n[1]),a+r((e=e.replace(d,".")).split("."),t).join(".")}function C(e){for(var t,n,a=[],i=0,o=e.length;i<o;)55296<=(t=e.charCodeAt(i++))&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?a.push(((1023&t)<<10)+(1023&n)+65536):(a.push(t),i--):a.push(t);return a}function M(e){return r(e,function(e){var t="";return 65535<e&&(t+=w((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+w(e)}).join("")}function E(e,t){return e+22+75*(e<26)-((0!==t)<<5)}function I(e,t,n){var a=0;for(e=n?b(e/o):e>>1,e+=b(e/t);c*y>>1<e;a+=g)e=b(e/c);return b(a+(c+1)*e/(e+i))}function _(e){var t,n,a,i,o,s,d,l,c,r,u,_=[],f=e.length,m=0,h=128,p=72;for((n=e.lastIndexOf("-"))<0&&(n=0),a=0;a<n;++a)128<=e.charCodeAt(a)&&k("not-basic"),_.push(e.charCodeAt(a));for(i=0<n?n+1:0;i<f;){for(o=m,s=1,d=g;f<=i&&k("invalid-input"),u=e.charCodeAt(i++),(g<=(l=u-48<10?u-22:u-65<26?u-65:u-97<26?u-97:g)||l>b((v-m)/s))&&k("overflow"),m+=l*s,!(l<(c=d<=p?1:p+y<=d?y:d-p));d+=g)s>b(v/(r=g-c))&&k("overflow"),s*=r;p=I(m-o,t=_.length+1,0===o),b(m/t)>v-h&&k("overflow"),h+=b(m/t),m%=t,_.splice(m++,0,h)}return M(_)}function f(e){var t,n,a,i,o,s,d,l,c,r,u,_,f,m,h,p=[];for(_=(e=C(e)).length,t=128,o=72,s=n=0;s<_;++s)(u=e[s])<128&&p.push(w(u));for(a=i=p.length,i&&p.push("-");a<_;){for(d=v,s=0;s<_;++s)t<=(u=e[s])&&u<d&&(d=u);for(d-t>b((v-n)/(f=a+1))&&k("overflow"),n+=(d-t)*f,t=d,s=0;s<_;++s)if((u=e[s])<t&&++n>v&&k("overflow"),u===t){for(l=n,c=g;!(l<(r=c<=o?1:o+y<=c?y:c-o));c+=g)h=l-r,m=g-r,p.push(w(E(r+h%m,0))),l=b(h/m);p.push(w(E(l,0))),o=I(n,f,a===i),n=0,++a}++n,++t}return p.join("")}n={version:"1.4.1",ucs2:{decode:C,encode:M},decode:_,encode:f,toASCII:function(e){return u(e,function(e){return s.test(e)?"xn--"+f(e):e})},toUnicode:function(e){return u(e,function(e){return a.test(e)?_(e.slice(4).toLowerCase()):e})}},e.punycode=n}(this),function(e,t){e.ReconnectingWebSocket=function(){if("WebSocket"in window)return u.prototype.onopen=function(){},u.prototype.onclose=function(){},u.prototype.onconnecting=function(){},u.prototype.onmessage=function(){},u.prototype.onerror=function(){},u.debugAll=!1,u.CONNECTING=WebSocket.CONNECTING,u.OPEN=WebSocket.OPEN,u.CLOSING=WebSocket.CLOSING,u.CLOSED=WebSocket.CLOSED,u;function u(e,t,n){var a={debug:!1,automaticOpen:!0,reconnectInterval:1e3,maxReconnectInterval:3e4,reconnectDecay:1.5,timeoutInterval:3e3,maxReconnectAttempts:null,binaryType:"blob"};for(var i in n||(n={}),a)void 0!==n[i]?this[i]=n[i]:this[i]=a[i];this.url=e,this.reconnectAttempts=0,this.readyState=WebSocket.CONNECTING,this.protocol=null;var o,s=this,d=!1,l=!1,c=document.createElement("div");function r(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}c.addEventListener("open",function(e){s.onopen(e)}),c.addEventListener("close",function(e){s.onclose(e)}),c.addEventListener("connecting",function(e){s.onconnecting(e)}),c.addEventListener("message",function(e){s.onmessage(e)}),c.addEventListener("error",function(e){s.onerror(e)}),this.addEventListener=c.addEventListener.bind(c),this.removeEventListener=c.removeEventListener.bind(c),this.dispatchEvent=c.dispatchEvent.bind(c),this.open=function(a){if((o=new WebSocket(s.url,t||[])).binaryType=this.binaryType,a){if(this.maxReconnectAttempts&&this.reconnectAttempts>this.maxReconnectAttempts)return}else c.dispatchEvent(r("connecting")),this.reconnectAttempts=0;(s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","attempt-connect",s.url);var e=o,i=setTimeout(function(){(s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","connection-timeout",s.url),l=!0,e.close(),l=!1},s.timeoutInterval);o.onopen=function(){clearTimeout(i),(s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","onopen",s.url),s.protocol=o.protocol,s.readyState=WebSocket.OPEN,s.reconnectAttempts=0;var e=r("open");e.isReconnect=a,a=!1,c.dispatchEvent(e)},o.onclose=function(e){if(clearTimeout(i),o=null,d)s.readyState=WebSocket.CLOSED,c.dispatchEvent(r("close"));else{s.readyState=WebSocket.CONNECTING;var t=r("connecting");t.code=e.code,t.reason=e.reason,t.wasClean=e.wasClean,c.dispatchEvent(t),a||l||((s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","onclose",s.url),c.dispatchEvent(r("close")));var n=s.reconnectInterval*Math.pow(s.reconnectDecay,s.reconnectAttempts);setTimeout(function(){s.reconnectAttempts++,s.open(!0)},n>s.maxReconnectInterval?s.maxReconnectInterval:n)}},o.onmessage=function(e){(s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","onmessage",s.url,e.data);var t=r("message");t.data=e.data,c.dispatchEvent(t)},o.onerror=function(e){(s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","onerror",s.url,e),c.dispatchEvent(r("error"))}},!0===this.automaticOpen&&this.open(!1),this.send=function(e){if(o)return(s.debug||u.debugAll)&&console.debug("ReconnectingWebSocket","send",s.url,e),o.send(e);throw"INVALID_STATE_ERR : Pausing to reconnect websocket"},this.close=function(e,t){void 0===e&&(e=1e3),d=!0,o&&o.close(e,t)},this.refresh=function(){o&&o.close()}}}()}(this);var ax=function(){var e={parse:function(e,t,n){return t||(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;")),a(e,function(e){var t=function(e){for(var t=e.indexOf(d)<0?e.replace(s,""):e,n=[],a=0,i=0,o=0;o<t.length;)a=t.charCodeAt(o++),i?(n.push((65536+(i-55296<<10)+(a-56320)).toString(16)),i=0):55296<=a&&a<=56319?i=a:n.push(a.toString(16));return n.join("-")}(e);return t?'<img class="'+(n?"emojichat":"emoji")+'" src="https://twemoji.maxcdn.com/2/72x72/'+t+'.png"/>':e})},replace:a},n=/(?:\ud83d[\udc68\udc69])(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddb0-\uddb3])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f)|[\u0023\u002a\u0030-\u0039]\ufe0f?\u20e3|(?:[\u00a9\u00ae\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddb5\uddb6\uddb8\uddb9\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a-\udc6d\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\udeeb\udeec\udef4-\udef9]|\ud83e[\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd40-\udd45\udd47-\udd70\udd73-\udd76\udd7a\udd7c-\udda2\uddb4\uddb7\uddc0-\uddc2\uddd0\uddde-\uddff]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,s=/\uFE0F/g,d=String.fromCharCode(8205);return e;function a(e,t){return String(e).replace(n,t)}}();